/*
 *
 * Wijmo Library 3.20142.45
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 */
var wijmo;(function(e){e.expando=".wijmo";var t=function(){function e(e){this.message=e,this.stack="Wijmo"+(new Error).stack,this.name="WijmoError"}return e}();e.WijmoError=t;var n=t;n.prototype=new Error,n.prototype.constructor=n})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=function(){function t(e){this.object=e}return t.getFrom=function(n,r){typeof r=="undefined"&&(r=!0);var i=e.expando,s;if(Object(n)!==n)return null;s=n[i],s&&s.object!==n&&(s=null);if(r&&!(s instanceof t&&Object.prototype.hasOwnProperty.call(n,i))){s=new t(n);try{Object.defineProperty(n,i,{value:s,configurable:!1,enumerable:!1,writable:!1})}catch(o){n[i]=s}}return s},t}();t.Expando=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(e){function t(e){return function(){var t=function(){return e.prototype._call.apply(t,arguments)};return $.extend(t,e.prototype),e.apply(t,arguments),t}}e.funcClass=t})(e.util||(e.util={}));var t=e.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){function i(e){return t.isFunction(e.subscribe)}function h(e){return typeof e=="undefined"&&(e=null),new f(e)}function p(e){return typeof e=="undefined"&&(e=0),new c(e)}function d(e){return typeof e=="undefined"&&(e=null),new f(e,!0)}function v(e){return t.isFunction(e)&&i(e)}var t=jQuery,n=function(){function e(e,t){this.handler=e,this.context=t}return e.prototype.trigger=function(e){return this.handler.apply(this.context,e)},e}();e.SubscriberEntry=n;var r=function(){function r(e){this.defaultContext=e,this._entries=[]}return r.prototype.subscribe=function(t,r){var i=this;typeof r=="undefined"&&(r=this.defaultContext);var s=new n(t,r);return this._entries.push(s),{dispose:function(){return e.util.remove(i._entries,s)}}},r.prototype.trigger=function(){var t=[];for(var n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];e.util.each(this._entries,function(e,n){return n.trigger(t)})},r.makeSubscribable=function(e){var n=new r(e);return e.subscribe=t.proxy(n.subscribe,n),n},r}();e.Subscribable=r,e.isSubscriptable=i;var s=function(){function e(){}return e.prototype.subscribe=function(e,t){return this._subscribable=this._subscribable||new r(this),this._subscribable.subscribe(e,t)},e.prototype._trigger=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},e}();e.BaseObservable=s;var o=function(e){function t(t){e.call(this),this.mutable=t}return __extends(t,e),t.prototype._call=function(){return this.mutable.value},t}(s);e._ReadOnlyObservable=o;var u=e.util.funcClass(o),a=function(e){function t(t,n){typeof n=="undefined"&&(n=!1),e.call(this),this.value=t,this.checkNewValue=n}return __extends(t,e),t.prototype._call=function(e){return arguments.length>0&&(!this.checkNewValue||e!==this.value)&&(this.value=e,this._trigger(e),this._readOnly&&this._readOnly._trigger(e)),this.value},t.prototype.read=function(){return this._readOnly=this._readOnly||new u(this),this._readOnly},t}(s);e._MutableObservable=a;var f=e.util.funcClass(a),l=function(e){function t(t){e.call(this,t,!1),this.value=t}return __extends(t,e),t.prototype.change=function(e){return this._call(this._call()+e)},t.prototype.inc=function(){return this.change(1)},t.prototype.dec=function(){return this.change(-1)},t}(a);e._NumericMutableObservable=l;var c=e.util.funcClass(l);e.observable=h,e.numericObservable=p,e.observableWithNewValueCheck=d,e.isObservable=v})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){(function(n){function i(e,t){return typeof t=="undefined"&&(t=!1),r.isArray(e)?e=e.slice(0):r.isPlainObject(e)&&(e=r.extend(!!t,{},e)),e}function s(e){return typeof e=="string"||e instanceof String}function o(e){return typeof e=="number"}function u(t){return t===e.expando||t===r.expando}function a(e,t){var n=this;r.each(e,function(e,r){if(!u(e))return t.call(n,e,r)})}function f(t,n){var i=r.map(t,n);return delete i[e.expando],i}function l(e){var t;return e&&r.isFunction(e.toString)&&e.toString!==Object.prototype.toString?t=e.toString():t=JSON.stringify(e),t!=null&&t.length>2&&t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substr(1,t.length-2)),t}function c(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];return e.replace(/{(\d+)}/g,function(e,n){return l(t[parseInt(n,10)])})}function h(e,t){var n=!0;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(!n)return!1}),n}function p(e,t){var n=!1;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(n)return!1}),n}function d(e,t){var n,i,o;if(e==null)return t==null?0:-1;if(t==null)return 1;if(r.isArray(e)&&r.isArray(t)){i=Math.min(e.length,t.length);for(n=0;n<i;n++){o=d(e[n],t[n]);if(o!==0)return o}return e.length-t.length}return s(e)&&s(t)?(e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0):(o=e-t,isNaN(o)?0:o)}function v(e,t){return r.inArray(t,e)>=0}function m(e,t){var n=0,r;for(r=0;r<e.length;)e[r]!==t?r++:(e.splice(r,1),n++);return n}function g(e,t){return e==-1?-1:e==0?0:t?Math.ceil(e/t):1}function y(e,t){function i(){return e.apply(t,n)}var n=[];for(var r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];if(typeof setTimeout==typeof undefined)return i();setTimeout(i,10)}function b(e){if(typeof console=="undefined")return;console.error?console.error(e):console.log&&console.log(e)}function w(e,n){var r=0,i=e,s;for(;;){var o=n.indexOf(".",r);o>=0?(s=n.substring(r,o),r=o+1):r>0?s=n.substring(r):s=n,i=i[s],t.isObservable(i)&&(i=i());if(o<0)break}return i}function E(e,n,r){var i=0,s;for(;;){var o=n.indexOf(".",i);o>=0?(s=n.substring(i,o),i=o+1):i>0?s=n.substring(i):s=n;var u=e[s];if(!(o>=0)){t.isObservable(u)?u(r):e[s]=r;break}t.isObservable(u)&&(u=u()),e=u}}function S(e){return typeof e=="object"&&!r.isArray(e)&&!r.isPlainObject(e)&&e.constructor!==Object.prototype.constructor}function x(e){n.each(e,function(e,t){if(!t||typeof t!="object")return;n.each(t,function(e,r){var i;if(!n.isString(r))return;i=/\/Date\((-?\d+)\)\//.exec(r);if(!i)return;t[e]=new Date(parseInt(i[1],10))})})}var r=jQuery;n.clone=i,n.isString=s,n.isNumeric=o,n.isInternalProperty=u,n.each=a,n.map=f,n.toStr=l,n.format=c,n.every=h,n.some=p,n.compare=d,n.contains=v,n.remove=m,n.pageCount=g,n.executeDelayed=y,n.logError=b,n.getProperty=w,n.setProperty=E,n.isClassInstance=S,n.convertDateProperties=x;var T=function(){function e(e){this.key=e}return e}();n.HashMapEntry=T;var N=function(){function e(){this.hash={}}return e.prototype.getEntry=function(e,t){typeof t=="undefined"&&(t=!1);if(e===null)return!this.nullEntry&&t&&(this.nullEntry=new T(e)),this.nullEntry;var n=String(e),r=this.hash[n],i;if(r==null){if(!t)return null;r=[],this.hash[n]=r}for(var s=0;s<r.length;s++)if(r[s].key===e)return r[s];return t&&(i=new T(e),r.push(i)),null},e.prototype.containsKey=function(e){return!!this.getEntry(e)},e.prototype.get=function(e,t){typeof t=="undefined"&&(t=null);var n=this.getEntry(e);return n?n.value:t},e.prototype.put=function(e,t){this.getEntry(e,!0).value=t},e}();n.HashMap=N})(t.util||(t.util={}));var n=t.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){t.errors={},t.errors._register=function(n){t.util.each(n,function(n,r){function i(){var n=[];for(var i=0;i<arguments.length-0;i++)n[i]=arguments[i+0];var s;return $.isFunction(r)?r=r.apply(this,arguments):arguments.length>0&&(n.unshift(r),r=t.util.format.apply(this,n)),r=$.trim(r),s=r[r.length-1],s!=="."&&s!=="!"&&s!=="?"&&(r+="."),new e.WijmoError(r)}t.errors[n]=function(){throw i.apply(this,arguments)},t.errors[n].create=i})},t.errors._register({indexOutOfBounds:"Index is outside the bounds of the array.",notImplemented:"The operation is not implemented",unsupportedOperation:"Unsupported operation",unsupportedFilterOperator:"Unsupported filter operator: {0}",unsupportedDataSource:"Unsupported data source",argument:function(e){var t="Unexpected argument value.";return e&&(t+="\nParameter name: "+e),t},argumentNull:"Argument '{0}' is null/undefined",noParser:"There is no parser for type '{0}'",noUrl:"Url is not specified",cantConvert:"Value can't be converted to type '{0}': '{1}'",noGlobalize:"Globalize is not defined. Make sure you include globalize.js",itemNotInView:"Item {0} is not in the data view",unsupportedFilterFormat:"The filter format is not supported",multiPropertyKeysNotSupported:"Entities with multiple properties in the primary key are not supported. Entity type: {0}",keyPropertyNotFound:"Key property not found in {0} entity type"})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function r(n,r){typeof r=="undefined"&&(r=!1),n=n.toLowerCase();var i=t.ops[n];if(!i){var s=t.opMap[n];s&&(i=t.ops[s])}return!i&&r&&e.errors.unsupportedFilterOperator(n),i}function i(i){var s;if(!n.isPlainObject(i))return{operator:"==",op:t.ops.equals,value:i};var o=i.operator||t.ops.equals;if(e.util.isString(i.operator)){if(i.operator.toLowerCase()==="nofilter")return null;o=r(i.operator,!0)}else n.isFunction(o.apply)||e.errors.unsupportedFilterOperator(o);return{operator:i.operator,op:o,value:i.value}}function s(t){var r={isEmpty:!1,original:t,func:null,normalized:null};if(n.isFunction(t))r.func=t;else if(n.isArray(t))e.errors.unsupportedFilterFormat(t);else if(t){r.normalized={};var s=!1;e.util.each(t,function(t,o){n.isArray(o)&&e.errors.unsupportedFilterFormat(),o=i(o),o&&(r.normalized[t]=o,s=!0)}),s?r.func=function(t){return e.util.every(r.normalized,function(n,r){var i=e.util.getProperty(t,r);return n.op.apply(i,n.value)})}:r.normalized=null}return!r.normalized&&!r.func&&(r.isEmpty=!0,r.func=function(e){return!0}),r}var n=jQuery;t.opMap={"==":"equals",doesnotcontain:"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal",isnotempty:"notisempty",isnotnull:"notisnull"},t.normalizeCondition=i,t.compile=s,t.ops=function(){function r(e,n,r,i,s){return t[e.toLowerCase()]={name:e,displayName:n,arity:r,applicableTo:i,apply:s}}function i(t){return t instanceof Date&&(t=t.getTime()),e.util.isString(t)&&(t=t.toLowerCase()),t}function s(e,t,n,s){r(e,t,2,n,function(e,t){return s(i(e),i(t))})}function o(e,t,n,i){r(e,t,1,n,i)}function u(e,t,r){s(e,t,n.prim,r)}function a(e,t,r){s(e,t,n.str,r)}var t={},n={str:["string"],prim:["string","number","datetime","currency","boolean"]};return u("Equals","Equals",function(e,t){return e==t}),u("NotEqual","Not equal",function(e,t){return e!=t}),u("Greater","Greater than",function(e,t){return e>t}),u("Less","Less than",function(e,t){return e<t}),u("GreaterOrEqual","Greater or equal",function(e,t){return e>=t}),u("LessOrEqual","Less or equal",function(e,t){return e<=t}),a("Contains","Contains",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)>=0}),a("NotContain","Does not contain",function(e,t){return e!=t&&(!e||!e.indexOf||e.indexOf(t)<0)}),a("BeginsWith","Begins with",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)==0}),a("EndsWith","Ends with",function(t,n){var r;return!e.util.isString(t)||!e.util.isString(n)?!1:(r=t.lastIndexOf(n),r>=0&&t.length-r===n.length)}),o("IsEmpty","Is empty",n.str,function(e){return!e&&e!==0&&e!==!1}),o("NotIsEmpty","Is not empty",n.str,function(e){return!!e||e===0||e===!1}),o("IsNull","Is null",n.prim,function(e){return e==null}),o("NotIsNull","Is not null",n.prim,function(e){return e!=null}),t}()})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function n(t){var n=[];return t=e.util.isString(t)?t.split(/,\s*/):$.isArray(t)?t.slice(0):[t],t=$.isArray(t)?t.slice(0):[t],e.util.each(t,function(t,r){var i=!0,s;if(r==null)return;if(!e.util.isString(r)){r.property!=null&&n.push(r);return}if(r[0]==="-")i=!1,r=r.substr(1);else{var o=/\s(asc|desc)\s*$/.exec(r);o&&(r=r.substr(0,o.index),i=o[1]!=="desc")}n.push({property:r,asc:i})}),n.length>0?n:null}function r(t,r){typeof r=="undefined"&&(r=e.util.compare);var i=n(t),s={isEmpty:!0,original:t,propertyCompareTo:r,compare:null,normalized:i};return i!=null&&(s.isEmpty=!1,s.compare=function(t,n){var s=0,o,u;for(s=0;s<i.length;s++){u=i[s],o=r(e.util.getProperty(t,u.property),e.util.getProperty(n,u.property));if(o!==0)return u.asc||(o=-o),o}return 0}),s}t.compile=r})(e.sorting||(e.sorting={}));var t=e.sorting})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(r){return t.isFunction(r)||e.errors.argument("factory"),n.push(r),{dispose:function(){e.util.remove(n,r)}}}function i(t){if(s(t))return t;var r=e.util.some(n,function(e){return e(t)});return r||e.errors.unsupportedDataSource()}function s(e){return e&&t.isFunction(e.count)&&t.isFunction(e.item)&&t.isFunction(e.getProperty)}var t=jQuery,n=[];e.registerDataViewFactory=r,r(function(e){return s(e)&&e}),r(function(n){return t.isArray(n)&&new e.ArrayDataView(n)}),e.asDataView=i,e.isDataView=s})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function n(n){function i(e){return function(){if(r)return;r=!0;try{e.apply(this,arguments)}finally{r=!1}}}this.array=n,this.currentItem=e.observableWithNewValueCheck(null),this.currentPosition=e.observableWithNewValueCheck(-1);var r=!1;this.currentItem.subscribe(i(function(e){this.currentPosition(e==null?-1:t.inArray(e,this.array))}),this),this.currentPosition.subscribe(i(function(t){e.util.isNumeric(t)||e.errors.argument("value"),(t<-1||t>=this.array.length)&&e.errors.indexOutOfBounds(),this.currentItem(t<0?null:this.array[t])}),this)}return n.prototype.update=function(){var e=this.currentItem(),n=this.currentPosition(),r=t.inArray(e,this.array);r<0&&e==null&&this._recentlyRemovedItem!=null&&(r=t.inArray(this._recentlyRemovedItem,this.array)),r>=0?(e&&(this._recentlyRemovedItem=e),this.currentPosition(r)):n>=0&&n<this.array.length?this.currentItem(this.array[n]):n>=this.array.length&&this.array.length>0?(n=this.array.length-1,this.currentPosition(n),this.currentItem(this.array[n])):(this.currentPosition(-1),this.currentItem(null))},n.prototype.updateDelayed=function(){e.util.executeDelayed(this.update,this)},n}();e.CurrencyManager=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function t(t){function n(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),t(!0)}this.onChanged=t,this.filter=e.observable(),this._compiledFilter=e.filtering.compile(null),this.sort=e.observable(),this._compiledSort=e.sorting.compile(null),this.pageIndex=e.observable(0),this.pageSize=e.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(e){this.onFilterChanged(e),t()},this),this.sort.subscribe(function(){this._compiledSort=e.sorting.compile(this.sort()),t()},this),this.pageIndex.subscribe(n,this),this.pageSize.subscribe(n,this)}return t.prototype.onFilterChanged=function(t){this._compiledFilter=e.filtering.compile(t)},t.prototype.setFilter=function(e){this.filter(e)},t.prototype.update=function(e){"filter"in e&&this.setFilter(e.filter),"sort"in e&&this.sort(e.sort),"pageSize"in e&&this.pageSize(e.pageSize),"pageIndex"in e&&this.pageIndex(e.pageIndex)},t.prototype.apply=function(e,t,n){typeof t=="undefined"&&(t=!0),typeof n=="undefined"&&(n=null);var r;if(!this._compiledFilter.isEmpty){n?n.length=0:n=[];for(r=0;r<e.length;r++){var i=e[r];this._compiledFilter.func(i)&&n.push(i)}}else if(!n)n=e.slice(0);else{n.length=e.length;for(r=0;r<e.length;r++)n[r]=e[r]}this._compiledSort.isEmpty||this._stableSort(n,this._compiledSort.compare);var s=n.length;return t&&this._take>0&&(this._skip>0&&n.splice(0,Math.min(this._skip,n.length)),this._take<n.length&&(n.length=this._take)),{results:n,totalCount:s}},t.prototype._stableSort=function(e,t){var n=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())&&/Google Inc/.test(navigator.vendor);t&&n?(e.forEach(function(t,n){e[n]={index:n,value:t}}),e.sort(function(e,n){var r=t(e.value,n.value);return r===0?e.index-n.index:r}),e.forEach(function(t,n){e[n]=t.value})):e.sort(t)},t.prototype.toObj=function(){return{filter:this._compiledFilter.normalized,sort:this._compiledSort.normalized,pageSize:this.pageSize(),pageIndex:this.pageIndex()}},t}();e.Shape=n;var r=function(){function r(t){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=e.observable(1),this._totalItemCount=e.numericObservable(0),this._isLoaded=e.observable(!1),this._isLoading=e.observable(!1),this._currentEditItem=e.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new e.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(t)}return r.prototype.dispose=function(){},r.prototype.count=function(){return this.local.length},r.prototype.item=function(t){return(t<0||t>=this.local.length)&&e.errors.indexOutOfBounds(),this.local[t]},r.prototype.indexOf=function(e){return t.inArray(e,this.local)},r.prototype.getSource=function(){return this.sourceArray},r.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},r._getProps=function(n){var r=[];return e.util.each(n,function(e,n){e=String(e);if(e.match(/^_/))return;if(t.isFunction(n)&&!n.subscribe)return;r.push({name:e})}),r},r.prototype.getProperties=function(){return this.count()?r._getProps(this.item(0)):[]},r.prototype._readProperty=function(t,n){return e.util.getProperty(t,n)},r.prototype.getProperty=function(e,t){var n=this._getItem(e);return this._readProperty(n,t)},r.prototype._writeProperty=function(t,n,r){e.util.setProperty(t,n,r)},r.prototype.setProperty=function(e,t,n){var r=this._getItem(e);return r===this.currentEditItem()&&this._currentEditItemSnapshot&&!(t in this._currentEditItemSnapshot)&&(this._currentEditItemSnapshot[t]=this.getProperty(e,t)),this._writeProperty(r,t,n),this},r.prototype.subscribe=function(e,t){return this._changed.subscribe(e,t)},r.prototype.trigger=function(){this._currencyManager.update(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},r.prototype.canFilter=function(){return!0},r.prototype.canSort=function(){return!0},r.prototype._updateShape=function(e){this._updatingShape=!0;try{this._shape.update(e)}finally{this._updatingShape=!1}},r.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},r.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},r.prototype._createShape=function(e){return new n(e)},r.prototype._initShape=function(e){var t=this,n=function(e){typeof e=="undefined"&&(e=!1),t._updatingShape||t.refresh(null,e&&t.localPaging)};this._shape=this._createShape(n),e&&this._updateShape(e),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},r.prototype._localRefresh=function(n){typeof n=="undefined"&&(n=this.localPaging);var r=this._shape.apply(this.sourceArray,n,this.local);return n&&this._totalItemCount(r.totalCount),this._pageCount(e.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),t.Deferred().resolve().promise()},r.prototype._remoteRefresh=function(){return this._localRefresh()},r.prototype.refresh=function(e,t){var n=this;typeof t=="undefined"&&(t=!1),this.cancelRefresh(),e&&this._updateShape(e),this._isLoading(!0);var r=t?this._localRefresh():this._remoteRefresh();return r.then(function(){n._isLoaded(!0),n._isLoading(!1)})},r.prototype.cancelRefresh=function(){},r.prototype._initCurrency=function(){this._currencyManager=new e.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},r.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},r.prototype._beginEdit=function(e,t){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=t,this._currentEditItem(e)},r.prototype.canAdd=function(){return!0},r.prototype.add=function(t){t||e.errors.argument("item"),this.commitEdit(),this.local.push(t),this._beginEdit(t,!0),this.trigger()},r.prototype.canAddNew=function(){return!1},r.prototype.addNew=function(){return e.errors.unsupportedOperation()},r.prototype.editItem=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit(),e=this._getItem(e),e&&this._beginEdit(e,!1)},r.prototype.canRemove=function(){return!0},r.prototype._remove=function(t){this.local.splice(t.index,1),e.util.remove(this.sourceArray,t.item),this._totalItemCount.dec(),this.trigger()},r.prototype.remove=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit();var t=this._resolve(e);return t?(this._remove(t),!0):!1},r.prototype.canCancelEdit=function(){return!0},r.prototype.cancelEdit=function(){var n=this,r;if(!this.currentEditItem())return;var i=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew?e.util.remove(this.local,i):this._currentEditItemSnapshot&&t.each(this._currentEditItemSnapshot,function(e,t){return n._writeProperty(i,e,t)}),this.trigger()},r.prototype.canCommitEdit=function(){return!0},r.prototype.commitEdit=function(){if(!this.currentEditItem())return;var t=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew&&(this.sourceArray.push(t),this._totalItemCount.inc());var n=this._shape._compiledFilter;!n.isEmpty&&!n.func(t)&&e.util.remove(this.local,t),this.trigger()},r.prototype._getItem=function(t){var n;return e.util.isNumeric(t)?this.item(t):t},r.prototype._resolve=function(t,n){typeof n=="undefined"&&(n=!1);var r;return e.util.isNumeric(t)?{index:t,item:this.item(t)}:(r=this.indexOf(t),r<0?(n&&e.errors.itemNotInView(t),null):{index:r,item:t})},r}();e.ArrayDataViewBase=r;var i=function(e){function t(t,n){e.call(this,n),this.sourceArray=t,this.refresh()}return __extends(t,e),t}(r);e.ArrayDataView=i})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(e){function n(t){e.call(this),this.isRemote=!0,this.sourceArray=[],t&&this._construct(t)}return __extends(n,e),n.prototype._construct=function(e){this.options=e=t.extend({localPaging:!1},e),this.localPaging=e.localPaging,this._updateShape(e)},n}(e.ArrayDataViewBase);e.RemoteDataView=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e){this._originalReader=e}return e.prototype.read=function(e){e.items=null,this._originalReader&&t.isFunction(this._originalReader.read)&&this._originalReader.read(e),t.isArray(e.items)||(t.isArray(e.data)?e.items=e.data:e.data&&t.isArray(e.data.rows)?e.items=e.data.rows:e.items=[]);if(e.dynamic)if(!e.data||isNaN(e.data.totalRows))throw"totalRows value is missing"},e}(),r=function(r){function i(e){var i=this;r.call(this),this.dataSource=e,this.isRemote=!0,this.localPaging=!0,this._origLoaded=e.loaded,this._origReader=e.reader,e.loaded=function(e,n){i._loaded(),t.isFunction(i._origLoaded)&&i._origLoaded.apply(i,arguments)},e.reader=new n(e.reader);var s=e.items&&e.items.length>0;t.isArray(e.data)&&!s&&e.read(),e.items&&this._loaded()}return __extends(i,r),i.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,r.prototype.dispose.call(this)},i.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?e.ArrayDataViewBase._getProps(this.sourceArray[0]):[]},i.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&e.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var t=r.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&t.then(this._currentDeferred.resolve)},i.prototype._remoteRefresh=function(){this._currentDeferred&&this._currentDeferred.state()==="pending"&&this._currentDeferred.fail(),this._currentDeferred=t.Deferred();var e={},n=!1;return this.dataSource.dynamic&&(n=!0,e.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=t.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=t.extend({},this._origDataOption,e.data))),this.dataSource.load(e,n),this._currentDeferred},i.prototype._prepareRequest=function(){return{filtering:this._prepareFilterRequest(),paging:this._preparePageRequest(),sorting:this._prepareSortRequest()}},i.prototype._prepareFilterRequest=function(){var e=[];return!this._shape._compiledFilter.isEmpty&&this._shape._compiledFilter.normalized&&t.each(this._shape._compiledFilter.normalized,function(t,n){e.push({dataKey:t,filterOperator:n.op.Name,filterValue:n.value})}),e},i.prototype._preparePageRequest=function(){return{pageIndex:this._shape.pageIndex(),pageSize:this._shape.pageSize()}},i.prototype._prepareSortRequest=function(){return this._shape._compiledSort.isEmpty||!this._shape._compiledSort.normalized||this._shape._compiledSort.normalized.length==0?[]:t.map(this._shape._compiledSort.normalized,function(e){return{dataKey:e.property,sortDirection:e.asc?"ascending":"descending"}})},i}(e.ArrayDataViewBase);e.registerDataViewFactory(function(e){if(typeof wijdatasource=="function"&&e instanceof wijdatasource)return new r(e);return})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},t.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},t.prototype._setOption=function(e,t){this._super(e,t),this._refresh()},t.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=n('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},t.prototype._validate=function(){var e=this.options;if(isNaN(e.pageCount)||e.pageCount<1)e.pageCount=1;isNaN(e.pageIndex)||e.pageIndex<0?e.pageIndex=0:e.pageIndex>=e.pageCount&&(e.pageIndex=e.pageCount-1);if(isNaN(e.pageButtonCount)||e.pageButtonCount<1)e.pageButtonCount=1},t.prototype._createNextPrev=function(e){var t=this.options,n=t.firstPageClass?t.firstPageClass+" "+t.wijCSS.iconSeekFirst:"",r=t.previousPageClass?t.previousPageClass+" "+t.wijCSS.iconSeekPrev:"",i=t.nextPageClass?t.nextPageClass+" "+t.wijCSS.iconSeekNext:"",s=t.lastPageClass?t.lastPageClass+" "+t.wijCSS.iconSeekEnd:"";e&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,n)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,r)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,i)),e&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,s))},t.prototype._createNumeric=function(e){var t=this.options,n=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),s,o=t.firstPageClass?t.firstPageClass+" "+t.wijCSS.iconSeekFirst:"",u=t.lastPageClass?t.lastPageClass+" "+t.wijCSS.iconSeekEnd:"";n>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(e&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,o)),this.$ul.append(this._createPagerItem(!1,"...",r-1,"")));for(s=r;s<=i;s++)this.$ul.append(this._createPagerItem(s===n,s.toString(),s,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),e&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,u)))},t.prototype._createPagerItem=function(e,t,r,i){var s,o=this.options.wijCSS,u=this,a=n("<li />").addClass(o.pagerButton+" "+o.cornerAll).attr({role:"tab","aria-label":t,title:t});return e?a.addClass(o.stateActive).attr("aria-selected","true"):a.addClass(o.stateDefault).hover(function(){u.options.disabled||n(this).addClass(o.stateHover)},function(){u.options.disabled||n(this).removeClass(o.stateHover)}).bind("click."+this.widgetName,{newPageIndex:r-1},n.proxy(this._onClick,this)),e?s=n("<span />"):s=i?n("<span />").addClass(o.icon+" "+i):n("<a/>").attr("href","#"),s.text(t),a.append(s),a},t.prototype._onClick=function(e){if(this.options.disabled)return!1;var t={newPageIndex:e.data.newPageIndex,handled:!1};if(this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex){this.options.pageIndex=t.newPageIndex,t.handled||this._refresh();var n={newPageIndex:t.newPageIndex};this._trigger("pageIndexChanged",null,n)}return!1},t}(e.wijmoWidget);t.wijpager=r,r.prototype.widgetEventPrefix="wijpager";var i=function(){function e(){this.wijCSS={pagerButton:"wijmo-wijpager-button"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},this.firstPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,this.firstPageText="First",this.lastPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,this.lastPageText="Last",this.mode="numeric",this.nextPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekNext,this.nextPageText="Next",this.pageButtonCount=10,this.previousPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,this.previousPageText="Previous",this.pageCount=1,this.pageIndex=0,this.pageIndexChanging=null,this.pageIndexChanged=null}return e}();r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijpager",r.prototype)})(e.pager||(e.pager={}));var t=e.pager})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){"use strict";var t=jQuery,n,r,i;n=function(e){var t=this;t.data={},t.reader=null,t.proxy=null,t.items=[],t.loading=null,t.loaded=null,t._constructor(e)},window.wijdatasource=n,t.extend(n.prototype,{_constructor:function(e){t.extend(this,e)},load:function(e,n){var r=this,i=r.proxy;if(t.isFunction(r.loading)&&r.loading(r,e)===!1)return;i?i.request(r,r.loaded,e):((r.items.length===0||n)&&this.read(),t.isFunction(r.loaded)&&r.loaded(r,e))},read:function(){var e=this,t=e.data;t&&e.reader?e.reader.read(e):e.items=e.data}}),r=function(e){t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e),t.isArray(e)&&(this.fields=e)},window.wijarrayreader=r,t.extend(r.prototype,{read:function(e){t.isArray(e.data)?e.items=this._map(e.data):e.items=[]},_map:function(e){var n=this,r=[];return n.fields===undefined||n.fields.length===0?(t.extend(!0,r,e),r):(t.each(e,function(e,i){var s={};t.each(n.fields,function(e,n){n.mapping&&typeof n.mapping&&window[n.mapping]&&(n.mapping=window[n.mapping]);if(t.isFunction(n.mapping))return s[n.name]=n.mapping(i),!0;var r=n.mapping!==undefined?n.mapping:n.name,o=i[r];o===undefined&&(n.defaultValue!==undefined?o=n.defaultValue:o=i),s[n.name]=o}),r.push(s)}),r)}}),i=function(e){this.options=e,t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e)},window.wijhttpproxy=i,t.extend(i.prototype,{request:function(e,n,r){var i=this,s,o;s=t.extend({},this.options),o=s.success,s.success=function(u){t.isFunction(o)&&o(u),i._complete(u,e,n,s,r)},t.ajax(s)},_complete:function(e,n,r,i,s){n.data=i.key!==undefined?e[i.key]:e,n.read(),t.isFunction(r)&&r(n,s)}})})(e.checkbox||(e.checkbox={}));var t=e.checkbox})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijcombobox",i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){var e=this,t;e.selectedItem=null,e.selectedItems=[],window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n));try{t=document.activeElement}catch(r){}e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.repaint(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcombobox"),e._initInnerData(),e._createDOMElements(),e._bindInputEvents(),e._initDropDownList(),e.repaint(),e._checkSelectIndex(),e.options.text=e._input.val(),e._usingRemoteData()&&e.options.data&&(e.originalDataSourceLoaded=e.options.data.loaded),t===e._input[0]&&e.options.isEditable&&n(function(){e._input.focus()})},r.prototype._initInnerData=function(){var e=this,t=e.options,n;t.dataSource!==null?(n=e._isBind(),n?e.innerData=e._getMappingItems():e.innerData=t.data):e.innerData=t.data,e.listHasCreated=!1},r.prototype._checkSelectIndex=function(){var e=this,t,r=e.options,i=e.innerData;r.selectedIndex===-1&&r.selectedValue!=null&&n.each(i,function(e,t){if(i[e].value===r.selectedValue)return r.selectedIndex=e,r.selectionMode==="multiple"&&(r.selectedIndex=[r.selectedIndex]),!1}),t=r.selectedIndex,!e._usingRemoteData()&&(t>=0||n.isArray(t))&&e.search(null,"checkindex"),r.selectedIndex===-1&&r.text&&(!r.forceSelectionText||r.forceSelectionText&&e._checkTextInItems(r.text)!==-1)&&(e._input.val(r.text),r.selectedIndex=e._checkTextInItems(r.text),r.selectionMode==="multiple"&&(r.selectedIndex=[r.selectedIndex]),r.selectedIndex>-1&&e._checkSelectIndex())},r.prototype.repaint=function(){var e=this.options,t=this;if(t.element.is(":visible")||t._comboDiv||t._select!==undefined&&t._input.is(":visible")){t._showTrigger();if(e.disabledState){var n=e.disabled;t.disable(),e.disabled=n}return e.disabled&&t.disable(),!0}return!1},r.prototype._bindInputEvents=function(){var t=this,r=this.options.wijCSS,i,s,o,u,a;i=t._input,s=t.options,i.bind("keydown.wijcombobox",function(r){if(s.disabledState===!0||s.disabled)return;o=r.keyCode,u=e.getKeyCodeEnum();switch(o){case u.UP:t._move("previous",r),r.preventDefault();break;case u.DOWN:t._move("next",r),r.preventDefault();break;case u.ENTER:t.menu.active&&(r.preventDefault(),s.selectionMode==="multiple"&&t.menu&&t.menu.items&&t.menu.items.length===1&&n.each(t.selectedItems,function(e,n){n!==t.menu.items[0]&&(n.selected=!1)}),t.menu.select(r)),r.preventDefault();break;case u.TAB:i.trigger("wijcomboblur");if(!t.menu.active||s.selectionMode==="multiple"&&u.TAB===o)return;t.menu.select(r);var a=i.val().length;t._selectText(a,a,i);break;case u.ESCAPE:t.close(r,undefined);break;case u.LEFT:case u.RIGHT:case u.SHIFT:case 16:case 17:case u.CONTROL:case u.HOME:case u.END:case u.DELETE:case u.PAGE_UP:case u.PAGE_DOWN:break;case 18:i.trigger("wijcomboblur");break;default:if(o===229||n.browser.mozilla&&r.key==="Unidentified"&&o===0)return;t._processingSearch(i,o,r)}}).bind("wijcomboblur.wijcombobox",function(e){window.clearTimeout(t.searching),t._addInputFocus(!1,r.stateFocus),t.closing=window.setTimeout(function(){t.close(e,!0)},150)}).bind("focus.wijcombobox",function(){t._addInputFocus(!0,r.stateFocus)}).bind("blur.wijcombobox",function(){t.menu.element.is(":visible")||i.trigger("wijcomboblur"),t._inputBlurCausedByListItemClick||t._change()}).bind("compositionend.wijcombobox",function(e){t._processingSearch(i,o,e)}),n.browser.msie&&parseInt(n.browser.version)>9&&i.bind("mouseup.wijcombobox",function(e){if(i.val()==="")return;setTimeout(function(){i.val()===""&&t.menu.deactivate()},5)})},r.prototype._processingSearch=function(e,t,n){var r=this,i=r.options;window.clearTimeout(r.searching),i.isEditable===!1&&(r._cacheKey===undefined&&(r._cacheKey=""),r._cacheKey+=String.fromCharCode(t)),r.searching=window.setTimeout(function(){var t;i.isEditable===!1?(t=r._cacheKey,r._cacheKey=undefined):t=e.val(),r.search(t,n)},i.delay)},r.prototype._addInputFocus=function(e,t){var n=this,r,i,s;r=n._input.parent(),i=e?"addClass":"removeClass",s=n._triggerArrow,r[i](t),s!==undefined&&s[i](t)},r.prototype._renderColumnsHeader=function(e){var t=this,r=n("<ul class='wijmo-wijcombobox-rowheader'></ul>");n.each(this.options.columns,function(e,i){var s=n("<li class='wijmo-wijcombobox-cell "+t.options.wijCSS.header+"'></li>");s.html(i.name),i.width!==undefined&&s.width(i.width),s.appendTo(r)}),e.append(r)},r.prototype._hasSameValueText=function(e,t){return e.label===t.label&&e.value===t.value},r.prototype._initDropDownList=function(){var e=this,t,r,i,s,o,u=this.options.wijCSS,a=parseInt(e._input.css("zIndex"),10),f;t=e.element[0].ownerDocument,isNaN(a)&&(a=0),e._comboDiv?r=e._oriList:r=n("<div class='"+u.comboboxListCss+"'></div>"),i=e.options,i.columns.length>0&&(r.addClass("wijmo-wijcombobox-multicolumn"),s=n("<div class='wijmo-wijsuperpanel-header "+u.stateDefault+"'></div>"),e._renderColumnsHeader(s),r.append(s)),o={keepHightlightOnMouseLeave:!0,selectionMode:i.selectionMode,addHoverItemClass:i.columns.length===0,focus:function(t,n){var r=n;i.selectOnItemFocus&&e.menu.select(null,{notCloseAfterSelected:!0}),i.columns.length>0&&r.element&&(r.element.prev().addClass("wijmo-wijcombobox-active-prev"),r.element.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").addClass(u.stateHover))},selected:function(t,r){window.clearTimeout(e.closing);var s=i.selectionMode,o,u,a=!1,f,l,c;o=r.item,u=n.inArray(o,e.items);if(u<0)return;if(e._trigger("select",t,o))if(s==="single"){if(!e._usingRemoteData())if(u!==i.selectedIndex){l=i.selectedIndex,c=e.selectedItem,a=e._triggerSelectedIndexChanging(c,o,l,u);if(a)return;e._setInputText(o.label),c&&(c.selected=!1),e.selectedItem=o,i.selectedIndex=u,i.selectedValue=e.selectedItem.value,i.inputTextInDropDownList=!0,c&&c.element&&c.element.removeClass("wijmo-wijcombobox-selecteditem"),e._trigger("changed",null,{oldItem:c,selectedItem:e.selectedItem,newIndex:i.selectedIndex,oldIndex:l}),e._triggerSelectedIndexChanged(c,e.selectedItem,l,i.selectedIndex)}else e.selectedItem&&e._input.val()!==e.selectedItem.label&&(r.data===undefined||!r.data.notCloseAfterSelected)&&e._input.val(o.label);else if(e.selectedItem===null||!e._hasSameValueText(o,e.selectedItem)){c=e.selectedItem,l=i.selectedIndex,a=e._triggerSelectedIndexChanging(c,o,l,r.selectedIndex);if(a)return;e._setInputText(o.label),e.selectedItem=o,u!==i.selectedIndex&&(i.selectedIndex=u,i.selectedValue=e.selectedItem.value),i.inputTextInDropDownList=!0,e._trigger("changed",null,{selectedItem:o}),e._triggerSelectedIndexChanged(c,o,l,i.selectedIndex)}}else if(!e._usingRemoteData()){a=e._triggerSelectedIndexChanging(null,o,l,r.selectedIndex);if(a)return;e.selectedItems=r.selectedItems,e._selectedItemsToInputVal(e.selectedItems),i.inputTextInDropDownList=!0,i.selectedIndex=r.selectedIndex,e._trigger("changed",null,{selectedItem:o,selectedItems:e.selectedItems}),e._triggerSelectedIndexChanged(null,o,null,i.selectedIndex)}(r.data===undefined||!r.data.notCloseAfterSelected)&&s==="single"&&(e.close(t),e._input.focus()),e._inputBlurCausedByListItemClick=!1},blur:function(e,t){var n=t.element;i.columns.length>0&&n&&(n.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").removeClass(u.stateHover),n.prev().removeClass("wijmo-wijcombobox-active-prev"))},mouseDown:function(t){e._inputBlurCausedByListItemClick=!0},itemRendering:function(e,t){var n=t,r="";n.isSeparator&&(r+=" wijmo-wijcombobox-separator"),n.selected&&(r+=" wijmo-wijcombobox-selecteditem"),r.length>0&&n.element.addClass(r)},itemRendered:function(e,t){var r=t,s,o;if(r.cells===undefined)return;s=r.element,s.empty(),o=n("<ul class='wijmo-wijcombobox-row'></ul>"),n.each(r.cells,function(e,t){var r=n("<li class='wijmo-wijcombobox-cell "+u.stateDefault+"'></li>");i.columns&&i.columns.length>e&&typeof i.columns[e].width!="undefined"&&r.width(i.columns[e].width),r.append(t),r.attr("title",t),o.append(r)}),s.append(o)},listRendered:function(t,r){var s=e.menu.selectedItem,o=e.menu.selectedItems,u,a;if(i.selectionMode==="single"&&s){u=n.inArray(s,e.items);if(u<0)return;e.selectedItem=e.items[u],e._setInputText(e.selectedItem.label,!0),u>=-1&&(i.selectedIndex=u)}else o&&o.length>0&&(u=[],a=[],n.each(o,function(t,r){var i=n.inArray(r,e.items);if(i<0)return!0;u.push(i),a.push(e.items[i])}),e._selectedItemsToInputVal(a),u.length>=0&&(i.selectedIndex=u))},superPanelOptions:{resized:function(t){var n=e.menu,r=n.element;i.dropdownWidth=r.outerWidth(),i.dropdownHeight=r.outerHeight(),e._positionList(),e.menu.refreshSuperPanel()}}},o=n.extend(!0,o,i.listOptions),f=i.ensureDropDownOnBody?n("body"):e._comboElement,e.menu=r.appendTo(f,t).wijlist(o).css({zIndex:a+1,top:0,left:0}).hide().data("wijmo-wijlist"),e._createDropDownList(),e._menuUL=e.menu.ul},r.prototype._setInputText=function(e,t){var n=this,r=n.options.text;n._input.val(e),n.options.text=e,r!==e&&!t&&n._trigger("textChanged",null,{oldText:r,newText:e})},r.prototype._triggerSelectedIndexChanged=function(e,t,r,i){var s=this.options,o;this._select!==undefined&&(n.isArray(s.selectedIndex)&&s.selectedIndex.length>0?this._select[0].selectedIndex=s.selectedIndex[0]:this._select[0].selectedIndex=s.selectedIndex,this._select.trigger("change")),s.selectionMode==="single"?this._trigger("selectedIndexChanged",null,{oldItem:e,selectedItem:t,newIndex:i,oldIndex:r}):(o=n.inArray(t,this.items),this._trigger("selectedIndexChanged",null,{selectedItem:t,selectedIndex:o,selectedItems:this.selectedItems}))},r.prototype._triggerSelectedIndexChanging=function(e,t,r,i){var s=this.options,o,u,a=!0;return s.selectionMode==="single"?(u={oldItem:e,selectedItem:t,newIndex:i,oldIndex:r},a=this._trigger("selectedIndexChanging",null,u)):(o=n.inArray(t,this.items),u={selectedItem:t,selectedIndex:o,selectedItems:this.selectedItems},a=this._trigger("selectedIndexChanging",null,u)),a||(t.selected=!1,t.element&&t.element.removeClass("wijmo-wijcombobox-selecteditem")),!a},r.prototype._createDropDownList=function(e){var t=this,r,i=t.options,s=e;s||(s=t.innerData),s===null?r=null:r=n.isArray(s)?s:s.items,t._comboDiv?!t.listHasCreated&&r&&r.length>0&&(t.menu.setTemplateItems(i.data),n.isArray(t.innerData)?t.innerData=t.menu.items:t.innerData.items=t.menu.items,t.items=t.menu.items,t.menu.renderList(),t.listHasCreated=!0):!t.listHasCreated&&r&&r.length>0&&(t.menu.setItems(r),n.isArray(t.innerData)?t.innerData=t.menu.items:t.innerData.items=t.menu.items,t.items=t.menu.items,t.menu.renderList(),t.listHasCreated=!0)},r.prototype._getSelectedItemsText=function(e){var t="",r,i;return r=this,i=r.options.multipleSelectionSeparator,r.selectedItems=e,n.each(e,function(e,n){n&&(t+=n.label+i)}),t.length>0&&(t=t.substr(0,t.lastIndexOf(i))),t},r.prototype._selectedItemsToInputVal=function(e){var t=this;t._setInputText(t._getSelectedItemsText(e))},r.prototype._createDOMElements=function(){var e=this,t,r=this.options.wijCSS,i,s,o;o=n("<div class='"+r.comboboxWrapperCss+" "+r.stateDefault+" "+r.cornerAll+"'>"+"</div>"),i=e.element,i.is("select")?(t=n("<div role='combobox' class='"+r.comboboxCss+" "+r.widget+" "+r.helperClearFix+"'>"+"</div>"),t.append(o),e._comboElement=t,e._select=i,i.addClass(r.widget),s=e._input=n("<input role='textbox' aria-autocomplete='list' aria-haspopup='true' />").insertAfter(i),e.options.data||(e.options.data=e._convertSelectOptions(),e._initInnerData())):i.is("div")&&n(i.children()[0]).is("input[type='text']")&&n(i.children()[1]).is("div")?(e._comboElement=e._comboDiv=t=i,e._oriList=n(i.children()[1]),s=e._input=n(i.children()[0]),o.prependTo(t).append(s),i.addClass(r.comboboxCss+" "+r.widget+" "+r.helperClearFix),i.attr("role","combobox")):(t=n("<div role='combobox' class='"+r.comboboxCss+" "+r.widget+" "+r.helperClearFix+"'>"+"</div>"),t.append(o),e._comboElement=t,s=e._input=i),e._comboDiv||(t.insertBefore(s),e.element.is(":visible")&&s.width(s.width()),t.children("."+r.comboboxWrapperCss).append(s)),i.attr("title")&&e._comboElement.attr("title",i.attr("title")),s.attr({autocomplete:"off",role:"textbox","aria-wijcombobox":"list","aria-haspopup":"true"}).addClass(r.comoboboxInputCss),e._oldWidth=i.css("width"),e.options.isEditable===!1&&(s.attr("readonly","readonly"),o.bind("click",function(){if(e.options.disabledState===!0||e.options.disabled)return;e._triggerClick()}));if(e.options.disabledState===!0||e.options.disabled===!0)e._comboElement.addClass("wijmo-wijcombobox-disabled "+r.stateDisabled),s.attr("disabled","disabled");t.bind("mouseenter.wijcombobox",function(){if(e.options.disabledState===!0||e.options.disabled)return;e._addInputFocus(!0,r.stateHover)}).bind("mouseleave.wijcombobox",function(){e._addInputFocus(!1,r.stateHover)})},r.prototype._convertSelectOptions=function(){var e=[],t,r;return t=this,r=t._select.get(0).options,n.each(r,function(t,n){e.push({label:n.text,value:n.value})}),t.options.selectedIndex===-1&&t.options.selectedValue===null&&t.options.text===null&&(t.options.selectedIndex=t._select[0].selectedIndex),e},r.prototype.getComboElement=function(){return this._comboElement},r.prototype._updateLabelTextElement=function(){var e=this,t=e.options,r=t.wijCSS,i="<label class='wijmo-wijcombobox-label "+r.content+"'></label>",s=e._input.parent().children(".wijmo-wijcombobox-label");t.labelText!==null?(s.length===0&&(s=n(i),e._input.parent().append(s)),e._label=s,s.html(t.labelText)):s&&(s.remove(),e._label=undefined)},r.prototype._showTrigger=function(){var e=this,t,r,i,s,o=this.options.wijCSS,u,a=0,f,l,c,h,p,d,v,m="<div class='"+o.comboboxTriggerCss+" "+o.stateDefault+" "+o.cornerRight+"'>"+"<span class='"+o.icon+" "+o.iconArrowDown+"'></span>"+"</div>";t=e.options,r=e._input,i=r.parent(),s=e._comboElement,f=e._triggerArrow,l=e._label,e._select!==undefined&&(e._select.is(":visible")?(n.browser.msie?(u=e._select.clone(),e._select.after(u),a=u.width(),u.remove()):a=e._select.width(),e._nativeWidth=a):a=e._nativeWidth,s.css("width",""),r.width(a+(t.dropdownHeight<e.menu.element.height()?t.selectElementWidthFix:0)),e._select.hide()),r.css("margin-left",""),r.css("margin-right",""),s.width(i[0].offsetWidth),e._updateLabelTextElement(),l=e._label,t.showTrigger?(r.removeClass(o.cornerAll),f===undefined&&(f=e._triggerArrow=n(m),s.append(f),f.bind("mouseover.triggerevent",e,function(e){if(t.disabledState===!0||t.disabled)return;var r=n(e.currentTarget);r.addClass(o.stateHover)}).bind("mousedown.triggerevent",e,function(e){if(t.disabledState===!0||t.disabled)return;var r=n(e.currentTarget);r.addClass(o.stateActive)}).bind("mouseup.triggerevent",e,function(e){var t=n(e.currentTarget);t.removeClass(o.stateActive)}).bind("click.triggerevent",e,function(){if(t.disabledState===!0||t.disabled)return;e._triggerClick()})),t.triggerPosition==="right"?(f.css({left:"",right:"0px"}),f.removeClass(o.cornerLeft),f.addClass(o.cornerRight)):(f.css({right:"",left:"0px"}),f.removeClass(o.cornerRight),f.addClass(o.cornerLeft)),f.setOutHeight(s.innerHeight()),c=f.find("span"),c.css("margin-left",(f.innerWidth()-c[0].offsetWidth)/2),c.css("margin-top",(f.innerHeight()-c[0].offsetHeight)/2)):(f!==undefined&&(f.unbind(".triggerevent"),f.remove(),e._triggerArrow=undefined),r.removeClass(o.cornerLeft),r.removeClass(o.cornerRight),r.addClass(o.cornerAll)),h=p=d=0,l!==undefined&&(p+=l.outerWidth(!0)),v=t.triggerPosition==="left"?i.leftBorderWidth():i.rightBorderWidth(),f!==undefined&&(d=f.outerWidth(!0)-v),h=p+d,r.setOutWidth(i.width()-h),h=h===0?"":h,t.triggerPosition==="right"?(r.css("margin-left",""),r.css("margin-right",h),l!==undefined&&(l.css("left",""),l.css("right",d))):(r.css("margin-right",""),r.css("margin-left",h),l!==undefined&&(l.css("right",""),l.css("left",d)))},r.prototype._triggerClick=function(e){var t=this,n="";window.clearTimeout(t.closing),t.menu.element.is(":visible")?t.close():(t._usingRemoteData()&&(n=t._input.val()),t.search(n,e))},r.prototype.destroy=function(){var e=this,t=this.options.wijCSS,r=e.element;e.options.isEditable===!1&&r.removeAttr("readonly"),e._input&&e._input.unbind(".wijcombobox"),e._comboElement&&e._comboElement.unbind(".wijcombobox"),e._triggerArrow&&e._triggerArrow.unbind(".triggerevent"),e._select!==undefined?(e._select.removeClass(t.widget),e._select.show(),e._input.remove()):e._comboDiv?(e._comboDiv.removeClass(t.comboboxCss+" "+t.widget+" "+t.helperClearFix),e._comboDiv.removeAttr("role"),e._input.insertBefore(e._comboDiv),e._comboDiv.children("."+t.comboboxWrapperCss).remove()):(r.css("width",e._oldWidth),r.removeClass(t.comoboboxInputCss),r.removeAttr("autocomplete").removeAttr("role").removeAttr("aria-wijcombobox").removeAttr("aria-haspopup"),r.insertBefore(e._comboElement),r.css("padding","")),e.options.ensureDropDownOnBody&&n(window).unbind("resize.wijcombobox"),e._comboElement.remove(),e.menu.destroy(),e.menu.element.remove(),n.wijmo.widget.prototype.destroy.call(e)},r.prototype._setOption=function(e,t){var r=this,i,s,o,u,a,f=this.options.wijCSS,l=r._label,c,h,p,d,v=null,m=0,g=r.options;i=r._comboElement,s=r.element,u=s.parent(),h=g.selectedIndex,d=g.disabled,r._triggerArrow&&(m=r._triggerArrow.outerWidth()),n.wijmo.widget.prototype._setOption.apply(r,arguments);if(e==="disabled"){if(d===t)return;t?(i.addClass("wijmo-wijcombobox-disabled "+f.stateDisabled),r._input.attr("disabled","disabled"),r._comboDiv&&r._input.addClass("wijmo-wijcombobox-disabled "+f.stateDisabled).attr("disabled","disabled"),r.close()):(i.removeClass("wijmo-wijcombobox-disabled "+f.stateDisabled),r._input.removeAttr("disabled"),r._comboDiv&&r._input.removeClass("wijmo-wijcombobox-disabled "+f.stateDisabled).removeAttr("disabled"))}else if(e==="labelText")r._updateLabelTextElement(),l=r._label,l&&l.length>0&&(r._triggerArrow!==undefined&&(c=r._triggerArrow[0].offsetWidth),g.triggerPosition==="right"?l!==undefined&&(l.css("left",""),l.css("right",c)):l!==undefined&&(l.css("right",""),l.css("left",c)),r.repaint());else if(e==="showTrigger")r._showTrigger(),!g.showTrigger&&r.element.is("select")&&s.width(s.width()+m);else if(e==="triggerPosition")s.width(s.width()+m),r._showTrigger();else if(e==="selectionMode")r.menu._setOption("selectionMode",t);else if(e==="isEditable")t?(r._input.removeAttr("readonly"),n("."+f.comboboxWrapperCss,r._comboElement[0]).bind("click",function(){r._triggerClick()})):(r._input.attr("readonly","readonly"),n("."+f.comboboxWrapperCss,r._comboElement[0]).unbind("click"));else if(e==="data"||e==="dataSource"){r._initInnerData(),r._setSelectedIndex(g.selectedIndex);if(n.isArray(r.innerData))r.listHasCreated=!1,r._createDropDownList();else try{r.innerData.loaded=function(e,t){e===null?r.items=null:r.items=n.isArray(e)?e:e.items,r.listHasCreated=!1,r._createDropDownList()},r.innerData.load(null)}catch(y){}g.selectedIndex!==-1&&(v=o?o[h]:null,o=r.innerData,r._trigger("changed",null,{oldItem:v,selectedItem:r.selectedItem,newIndex:g.selectedIndex,oldIndex:h}),r._triggerSelectedIndexChanged(v,r.selectedItem,h,g.selectedIndex)),r._keypress=!1}else if(e==="selectedIndex"){if(t===h)return;if(t===null||t===undefined)t=-1;r.innerData===null?o=null:o=n.isArray(r.innerData)?r.innerData:r.innerData.items;if(g.selectionMode==="single"){v=o?o[h]:null;if(t>-1){o&&o[t]!==null&&(p=o[t]),a=r._triggerSelectedIndexChanging(v,p,h,t);if(a){g.selectedIndex=h;return}h!==null&&h!==-1&&h!==undefined&&v&&(v.selected=!1,this.menu.unselectItems(h),v.element&&v.element.removeClass("wijmo-wijcombobox-selecteditem")),o&&o[t]!==null&&(r.selectedItem=o[t],r.selectedItem&&(r.selectedItem.selected=!0,r._setInputText(r.selectedItem.label),g.selectedValue=r.selectedItem.value,g.inputTextInDropDownList=!0))}else if(t<=-1||!t){a=r._triggerSelectedIndexChanging(v,null,h,t);if(a){g.selectedIndex=h;return}g.inputTextInDropDownList=!1,r._clearSelection()}r._trigger("changed",null,{oldItem:v,selectedItem:r.selectedItem,newIndex:g.selectedIndex,oldIndex:h}),r._triggerSelectedIndexChanged(v,r.selectedItem,h,g.selectedIndex)}else n.isArray(h)||(h=[h]),n.each(h,function(e,t){r.menu.items&&r.menu.items[t]&&(r.menu.items[t].selected=!1)}),this.menu.unselectItems(h),r.selectedItems=[],r.selectedItem=null,n.isArray(t)||(t=[t],g[e]=t),r._setSelectedIndex(t),n.each(t,function(e,t){r.menu.items&&r.menu.items[t]&&(r.menu.items[t].selected=!0)}),r._trigger("changed",null,{oldItem:null,selectedItem:r.selectedItems,newIndex:g.selectedIndex,oldIndex:null})}else if(e==="selectedValue")o=r.items,o||(o=r.innerData),g.selectionMode==="single"?v=o?o[h]:null:h=null,t!=null?(r.selectedItem&&r.selectedItem.selected!==undefined&&(r.selectedItem.selected=!1),o&&(this.options.selectedIndex>-1&&o.length>this.options.selectedIndex&&o[this.options.selectedIndex]&&(o[this.options.selectedIndex].selected=!1,this.menu.deactivate(),this.menu.unselectItems(this.options.selectedIndex),r.menu.items[this.options.selectedIndex].selected=!1),n.each(o,function(e,n){if(o[e].value===t)return r.selectedItem=o[e],r.selectedItem.selected=!0,r.menu.items[e].selected=!0,r._setInputText(r.selectedItem.label),g.selectionMode==="single"?g.selectedIndex=e:g.selectedIndex=[e],g.inputTextInDropDownList=!0,!1}))):g.selectionMode==="single"&&(g.inputTextInDropDownList=!1,r._clearSelection()),r._trigger("changed",null,{oldItem:v,selectedItem:g.selectionMode==="single"?r.selectedItem:r.selectedItems,newIndex:g.selectedIndex,oldIndex:h});else if(e==="text"){if(g.forceSelectionText&&r._checkTextInItems(t)===-1)return;r._setInputText(t)}else e==="selectElementWidthFix"&&r._showTrigger()},r.prototype._setSelectedIndex=function(e){var t=this,r=t.options,i=[],s=t.innerData;if(e===null||e===undefined)return;e===-1?(t.selectedItem=null,r.selectedIndex=-1,r.selectedValue=null,r.text?t._input.val(r.text):t._input.val("")):n.isArray(e)?(t.selectedItems=[],n.each(e,function(e,t){s&&s[t]!==null&&s[t]!==undefined&&(s[t].selected=!0,i.push(s[t]))}),t.selectedItems=i,t._selectedItemsToInputVal(i)):s&&s[e]!==null&&s[e]!==undefined?(s[e].selected=!0,t._input.val(s[e].label),t.selectedItem=s[e]):s&&n.isArray(s)&&e>s.length-1&&(r.selectedIndex=-1,t._input.val("")),r.text=t._input.val()},r.prototype.search=function(e,t){var r=this,i,s,o,u;i=r.options,s=r.innerData,window.clearTimeout(r.closing),o={value:e,e:t,self:r};if(s!==null||r._comboDiv){u=r._isBind();if(t!=="checkindex"&&r._trigger("search",t,{datasrc:s,term:o})===!1)return;if(n.isArray(s)||u||r._comboDiv||!r._usingRemoteData()&&s.items&&n.isArray(s.items)&&s.items.length>0)r._hideShowArrow(!1),r._onListLoaded(s,o);else{if(!u&&n.isArray(i.dataSource))return;if(r._usingRemoteData()&&t!==undefined&&e.length<i.minLength)return;r._hideShowArrow(!1),s.loaded=function(e,t){r.listHasCreated=!1,r._createDropDownList(e),r._onListLoaded(e,t),r.originalDataSourceLoaded&&r.originalDataSourceLoaded(e,t)},s.load(o)}}},r.prototype.getSelectedItems=function(){var e=this.options;return e.selectionMode==="single"?this.selectedItem:this.selectedItems},r.prototype._isBind=function(){var e=this.options,t=e.data;return t!==null&&t.label&&t.label.bind?!0:!1},r.prototype._getMappingItems=function(){var e=this.options,t=e.dataSource,r=e.data,i,s,o;return!t||!r?null:!r.label||!r.label.bind||!r.value||!r.value.bind?null:(s=r.label.bind,o=r.value.bind,t&&t.length!==0?(i=[],n.each(t,function(e,t){i.push({label:t[s],value:t[o]})}),i):null)},r.prototype._clearSelection=function(e){var t=this,r=t.options;r.selectionMode==="single"?t.selectedItem&&(t.selectedItem.selected=!1,t.selectedItem=null):t.selectedItems&&(n.each(t.selectedItems,function(e,t){t&&t.selected&&(t.selected=!1)}),t.selectedItem=null,t.selectedItems=[]),r.selectedValue=null,t._setInputText("",e)},r.prototype._usingRemoteData=function(){var e=this.options.data,t=!1;return!n.isArray(e)&&e!==null&&e.proxy&&(t=!0),t},r.prototype._hideShowArrow=function(e){var t=this,n,r;n=t.element,r=t._triggerArrow,r!==undefined&&r[e?"show":"hide"](),n[e?"removeClass":"addClass"]("wijmo-wijcombobox-loading")},r.prototype._onListLoaded=function(e,t){var r=t.self,i,s,o=this.options.wijCSS,u,a,f,l;i=r._input,s=r.options,u=t.value,e?a=n.isArray(e)?e:e.items:a=null,r.items=a;if(t.e==="checkindex"){f=s.selectedIndex,s.selectionMode==="multiple"&&n.isArray(f)?(r.selectedItems=[],n.each(f,function(e,t){var n=a[t];n.selected=!0,r.selectedItems.push(n)}),r._selectedItemsToInputVal(r.selectedItems)):(a[f].selected=!0,r.selectedItem=a[f],i.val(r.selectedItem.label)),r._hideShowArrow(!0);return}i.val()===""&&(!this.selectedItem||this.selectedItem.label!=="")&&(r._clearSelection(!0),r._setSelectedIndex(-1),r.menu.deactivate()),!r._usingRemoteData()&&a?l=a:(r._topHit=null,l=a),l&&l.length>0||r._comboDiv?r._openlist(l,t,u)&&r._addInputFocus(!0,o.stateFocus):r.close(null,!0),r._hideShowArrow(!0)},r.prototype.close=function(e,t){var r=this,i,s=this.options.wijCSS,o,u;i=r.menu,r._dropDownHeight=i.element.outerHeight(),r._dropDownWidth=i.element.outerWidth(),window.clearTimeout(r.closing),i.element.is(":visible")&&!i.element.is(":animated")&&!i.element.parent().is(":animated")&&(r._trigger("close",e),i.deactivate(),o=r.options.hidingAnimation,o&&(o.effect==="size"||o.animated==="size")&&(o.options=n.extend({to:{width:0,height:0}},o.options)),u=i.element.attr("style"),t!==!0&&o?i.element.hide(o.effect||o.animated,o.options,o.speed||o.duration,function(){i.element.removeAttr("style").attr("style",u).hide(),o.callback&&o.callback.apply(this,arguments)}):i.element.hide(),r._addInputFocus(!1,s.stateFocus),n(document).unbind("mouseup",r.closeOnClick),r._inputBlurCausedByListItemClick=!1)},r.prototype._change=function(){var e=this,t=e.options,r=t.forceSelectionText,i=t.selectionMode,s=e._input,o=s.val(),u=e.selectedItem,a=e.selectedItems,f,l=e.innerData,c=-1;f=t.selectedIndex||t.selectedIndex>-1?t.selectedIndex:-1;if(r)i==="single"&&(u!==null&&u!==undefined?u.label!==o&&e._setInputText(u.label):e._setInputText(""));else if(i==="single"){var h=!1;u!==null&&u!==undefined&&(h=u.label?u.label.toString()!==o:""!==o),!u&&o!==""||h?(e.selectedItem!==null&&e.selectedItem!==undefined&&(e.selectedItem.selected=!1,e.menu.unselectItems(t.selectedIndex)),c=e._checkTextInItems(o),c===-1?(e.selectedItem=null,t.selectedIndex=-1,t.selectedValue=null,t.inputTextInDropDownList=!1):l&&(l=n.isArray(l)?l:l.items,e.selectedItem=l[c],t.selectedIndex=c,t.selectedValue=e.selectedItem.value,t.inputTextInDropDownList=!0),e._setInputText(e._input.val()),e._trigger("changed",null,{oldItem:u,selectedItem:e.selectedItem,newIndex:t.selectedIndex,oldIndex:f}),f!==c&&e._triggerSelectedIndexChanged(u,e.selectedItem,f,t.selectedIndex)):e._setInputText(o)}if(i==="multiple"){if(!e.selectedItems||e.selectedItems.length===0)a=[u];e._selectedItemsToInputVal(a)}},r.prototype._checkTextInItems=function(e){var t=this.items,r=-1;return e&&!!t&&!!t.length&&n.each(t,function(t,n){if(n&&n.label&&n.label.toString()===e)return r=t,!1}),r},r.prototype._openlist=function(t,r,i){var s=r.self,o=r.e,u,a,f,l,c,h=2,p=0,d,v,m,g,y,b,w=n.trim(s._input.val()).length,E=e.getKeyCodeEnum(),S,x=!1,T,N;u=s._keypress=!!o,l=s.options,f=s.menu.element,n.ui?f.zIndex(s.element.zIndex()+100):(S=parseInt(s.element.css("zIndex"),10),isNaN(S)&&(S=0),f.css("zIndex",S+100)),s.listHasCreated||s._createDropDownList(),s.innerData&&(n.isArray(s.innerData)?T=s.innerData:T=s.innerData.items);if(!T||T.length===0)return!1;if(!s._usingRemoteData()&&i!==null&&i!==undefined){x=s._keypress&&l.isEditable&&l.columns.length===0&&l.highlightMatching&&w>0,o&&o.keyCode===E.DOWN&&i.length===0&&w>0?s._topHit=s.menu.filterItems(s._input.val(),!1,x):s._topHit=s.menu.filterItems(i,l.autoFilter,x);if(s._topHit===null&&s.innerData&&n("li[wijhidden]",s.menu.element).length===s.innerData.length)return s.close(null,!0),!1}return s.menu.element.show(),l.dropdownWidth==="auto"?a=s._comboElement.outerWidth():a=l.dropdownWidth,c=f.css("padding"),f.css("padding","0px"),f.setOutWidth(a),f.css("padding",c),d=l.dropdownHeight,f.children(".wijmo-wijsuperpanel-header")&&(p=f.children(".wijmo-wijsuperpanel-header").outerHeight()||0),m=s._menuUL.outerHeight()+h+p,m<d?(s._menuUL.setOutWidth(a),m=s._menuUL.outerHeight()+h+p):m=d,f.setOutHeight(m),s.menu.refreshSuperPanel(),s._positionList(),!u&&s.selectedItem!==undefined&&s.menu.activate(null,s.selectedItem,!0),u&&o.keyCode!==E.BACKSPACE?l.isEditable?s._runAutoComplete():s.menu.activate(null,s._topHit,!0):(g=s.options.showingAnimation,l.showingAnimation!==null&&(o===undefined||o.keyCode!==E.BACKSPACE)&&(s.menu.element.hide(),b={from:{width:0,height:0},to:{width:s._dropDownWidth||f.outerWidth(),height:s._dropDownHeight||f.outerHeight()}},g&&(g.effect==="size"||g.animated==="size")&&(g.options=n.extend(b,g.options)),y=f.attr("style"),f.show(g.effect||g.animated,g.options,g.speed||g.duration,function(){f.removeAttr("style").attr("style",y).show(),g.callback&&g.callback.apply(this,arguments),n.browser.msie&&f.css("filter","")}))),s.hasOwnProperty("closeOnClick")||(v=s.closeOnClick,s.closeOnClick=function(e){return v(e)}),s._trigger("open"),n(document).bind("mouseup",s,s.closeOnClick),l.ensureDropDownOnBody&&n(window).bind("resize.wijcombobox",function(){N&&clearTimeout(N),N=setTimeout(function(){s._positionList()},100)}),!0},r.prototype.closeOnClick=function(e){var t=e.data,r=t.options.wijCSS,i,s=e.target;!n.contains(t._comboElement[0],s)&&!n.contains(t.menu.element[0],s)&&(n.support.isTouchEnabled&&n.support.isTouchEnabled()?(i=t.menu.element.offset(),(e.pageX<i.left||e.pageX>i.left+t.menu.element.width()||e.pageY<i.top||e.pageY>i.top+t.menu.element.height())&&t.close()):t.close(),n("."+r.comboboxWrapperCss,t._comboElement[0]).removeClass(r.stateHover).removeClass(r.stateFocus),n("."+r.comboboxTriggerCss,t._comboElement[0]).removeClass(r.stateHover).removeClass(r.stateFocus)),t.options.ensureDropDownOnBody&&n(window).unbind("resize.wijcombobox")},r.prototype._positionList=function(){var e=this,t,r;t=e.options.dropDownListPosition,r={my:"left top",at:"left bottom",of:e._comboElement,collision:"none"},r=n.extend(r,t),e.menu.element.position(r)},r.prototype._runAutoComplete=function(){var e=this,t,n,r,i,s,o;t=e._input,n=e._topHit;if(!e.options.autoComplete||n===null||n===undefined)return;e.menu.activate(null,n,!0),r=t.val(),i=n.label,t.val(i),s=r.length,o=i.length,e._selectText(s,o,t)},r.prototype._selectText=function(e,t,n){var r=n.val(),i=n.get(0),s;r.length>0&&(i.setSelectionRange!==undefined?i.setSelectionRange(e,t):i.createTextRange!==undefined&&(s=i.createTextRange(),s.moveStart("character",e),s.moveEnd("character",t-r.length),s.select()))},r.prototype._move=function(e,t){if(!this.menu.element.is(":visible")){this.search("",t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e))return;this.menu[e](t)},r.prototype._escapeRegex=function(e){return e===undefined?e:e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},r.prototype._filter=function(e,t){var r=this._escapeRegex(t),i,s=null;return e?(i=new RegExp(r,"i"),n.each(e,function(e,t){if(r===undefined||r.length===0){t.match=!0;return}var n=i.exec(t.label);n===null?t.match=!1:(s===null&&n.index===0&&(s=t),t.match=n.index>=0)}),this._topHit=s,e):null},r}(e.wijmoWidget);t.wijcombobox=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijcombobox')",this.wijCSS={comboboxCss:"wijmo-wijcombobox",comboboxWrapperCss:"wijmo-wijcombobox-wrapper",comoboboxInputCss:"wijmo-wijcombobox-input",comboboxListCss:"wijmo-wijcombobox-list",comboboxTriggerCss:"wijmo-wijcombobox-trigger"},this.dataSource=null,this.data=null,this.labelText=null,this.minLength=4,this.delay=300,this.showingAnimation=null,this.hidingAnimation=null,this.showTrigger=!0,this.triggerPosition="right",this.dropdownHeight=300,this.dropdownWidth="auto",this.selectOnItemFocus=!1,this.autoFilter=!0,this.autoComplete=!0,this.highlightMatching=!0,this.dropDownListPosition={},this.columns=[],this.selectionMode="single",this.multipleSelectionSeparator=",",this.forceSelectionText=!1,this.select=null,this.isEditable=!0,this.selectedIndex=-1,this.selectedValue=null,this.inputTextInDropDownList=!1,this.text=null,this.ensureDropDownOnBody=!0,this.open=null,this.close=null,this.selectElementWidthFix=6,this.search=null,this.changed=null,this.textChanged=null,this.selectedIndexChanged=null,this.selectedIndexChanging=null,this.listOptions=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijcombobox",i.prototype)})(e.combobox||(e.combobox={}));var t=e.combobox})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){var t=function(){function e(){this.OtherChar=0,this.Control=1,this.Numeric=2,this.MathSymbol=3,this.Symbol=4,this.Punctuation=5,this.Space=6,this.UpperCase=7,this.LowerCase=8,this.Katakana=9,this.Hiragana=10,this.FarEastPunctation=11,this.Hangul=12,this.FullWidth=32768}return e}();e.CharType=t;var n=function(){function e(){this.MinValue="\0",this.MaxValue="\uffff",this.ANSISTART=0,this.ANSIEND=255,this.BOTHWIDTHSTART=65280,this.BOTHWIDTHEND=65519,this.FULLALPHASTART=65281,this.FULLUPPERSTART=65313,this.FULLUPPEREND=65338,this.FULLALPHAEND=65374,this.CJKHALFSYMBOLSTART=65377,this.CJKHALFSYMBOLEND=65380,this.KANAHALFSTART=65381,this.KANAHALFEND=65439,this.HANGULHALFSTART=65440,this.HANGULHALFEND=65500,this.FULLSYMBOLSTART=65504,this.FULLSYMBOLEND=65510,this.HALFPUNCTSTART=65512,this.HALFPUNCTEND=65518,this.KATAKANA_VOICED="\uff9e",this.KATAKANA_SEMIVOICED="\uff9f",this.Tab="	",this.Space=" ",this._charstarts=["\0","\u0080","\u0100","\u0180","\u0250","\u02b0","\u0300","\u0370","\u0400","\u0530","\u0590","\u0600","\u0700","\u0780","\u0900","\u0980","\u0a00","\u0a80","\u0b00","\u0b80","\u0c00","\u0c80","\u0d00","\u0d80","\u0e00","\u0e80","\u0f00","\u1000","\u10a0","\u1100","\u1200","\u13a0","\u1400","\u1680","\u16a0","\u1780","\u1800","\u1e00","\u1f00","\u2000","\u2070","\u20a0","\u20d0","\u2100","\u2150","\u2190","\u2200","\u2300","\u2400","\u2440","\u2460","\u2500","\u2580","\u25a0","\u2600","\u2700","\u2800","\u2e80","\u2f00","\u2ff0","\u3000","\u3040","\u30a0","\u3100","\u3130","\u3190","\u31a0","\u3200","\u3300","\u3400","\u4e00","\ua000","\ua490","\uac00","\uf900","\ufb00","\ufb50","\ufe20","\ufe30","\ufe50","\ufe70","\uff00","\ufff0"],this.Blocks=["BASIC_LATIN","LATIN_1_SUPPLEMENT","LATIN_EXTENDED_A","LATIN_EXTENDED_B","IPA_EXTENSIONS","SPACING_MODIFIER_LETTERS","COMBINING_DIACRITICAL_MARKS","GREEK","CYRILLIC","ARMENIAN","HEBREW","ARABIC","SYRIAC","THAANA","DEVANAGARI","BENGALI","GURMUKHI","GUJARATI","ORIYA","TAMIL","TELUGU","KANNADA","MALAYALAM","SINHALA","THAI","LAO","TIBETAN","MYANMAR","GEORGIAN","HANGUL_JAMO","ETHIOPIC","CHEROKEE","UNIFIED_CANADIAN_ABORIGINAL_SYLLABIC","OGHAM","RUNIC","KUMER","MONGOLIAN","LATIN_EXTENDED_ADDITIONAL","GREEK_EXTENDED","GENERAL_PUNCTUATION","SUPERSCRIPTS_AND_SUBSCRIPTS","CURRENCY_SYMBOLS","COMBINING_MARKS_FOR_SYMBOLS","LETTERLIKE_SYMBOLS","NUMBER_FORMS","ARROWS","MATHEMATICAL_OPERATORS","MISCELLANEOUS_TECHNICAL","CONTROL_PICTURES","OPTICAL_CHARACTER_RECOGNITION","ENCLOSED_ALPHANUMERICS","BOX_DRAWING","BLOCK_ELEMENTS","GEOMETRIC_SHAPES","MISCELLANEOUS_SYMBOLS","DINGBATS","BRAILLE_PATTERNS","CJK_RADICALS_SUPPLEMENT","KANGXI_RADICALS","IDEOGRAPHIC_DESCRIPTION_CHARACTERS","CJK_SYMBOLS_AND_PUNCTUATION","HIRAGANA","KATAKANA","BOPOMOFO","HANGUL_COMPATIBILITY_JAMO","KANBUN","BOPOMOFO_EXTENDED","ENCLOSED_CJK_LETTERS_AND_MONTHS","CJK_COMPATIBILITY","CJK_UNIFIED_IDEOGRAPHS_EXTENSION","CJK_UNIFIED_IDEOGRAPHS","YI_SYLLABLES","YI_RADICALS","HANGUL_SYLLABLES","CJK_COMPATIBILITY_IDEOGRAPHS","ALPHABETIC_PRESENTATION_FORMS","ARABIC_PRESENTATION_FORMS_A","COMBINING_HALF_MARKS","CJK_COMPATIBILITY_FORMS","SMALL_FORM_VARIANTS","ARABIC_PRESENTATION_FORMS_B","HALFWIDTH_AND_FULLWIDTH_FORMS","SPECIALS"],this._fullhalfblocks=["\uff01","\uff10","\uff1a","\uff21","\uff3b","\uff41","\uff5b","\uff61","\uff65","\uffa0","\uffe0","\uffe8"],this._halfkana=["\u30fb","\u30f2","\u30a1","\u30a3","\u30a5","\u30a7","\u30a9","\u30e3","\u30e5","\u30e7","\u30c3","\u30fc","\u30a2","\u30a4","\u30a6","\u30a8","\u30aa","\u30ab","\u30ad","\u30af","\u30b1","\u30b3","\u30b5","\u30b7","\u30b9","\u30bb","\u30bd","\u30bf","\u30c1","\u30c4","\u30c6","\u30c8","\u30ca","\u30cb","\u30cc","\u30cd","\u30ce","\u30cf","\u30d2","\u30d5","\u30d8","\u30db","\u30de","\u30df","\u30e0","\u30e1","\u30e2","\u30e4","\u30e6","\u30e8","\u30e9","\u30ea","\u30eb","\u30ec","\u30ed","\u30ef","\u30f3","\u3099","\u309a"],this._fullkana=["\uff67","\uff71","\uff68","\uff72","\uff69","\uff73","\uff6a","\uff74","\uff6b","\uff75","\uff76","\uff76","\uff77","\uff77","\uff78","\uff78","\uff79","\uff79","\uff7a","\uff7a","\uff7b","\uff7b","\uff7c","\uff7c","\uff7d","\uff7d","\uff7e","\uff7e","\uff7f","\uff7f","\uff80","\uff80","\uff81","\uff81","\uff6f","\uff82","\uff82","\uff83","\uff83","\uff84","\uff84","\uff85","\uff86","\uff87","\uff88","\uff89","\uff8a","\uff8a","\uff8a","\uff8b","\uff8b","\uff8b","\uff8c","\uff8c","\uff8c","\uff8d","\uff8d","\uff8d","\uff8e","\uff8e","\uff8e","\uff8f","\uff90","\uff91","\uff92","\uff93","\uff6c","\uff94","\uff6d","\uff95","\uff6e","\uff96","\uff97","\uff98","\uff99","\uff9a","\uff9b","\uff9c","\uff9c","\uff68","\uff6a","\uff66","\uff9d","\uff73","\uff76","\uff79","\uff9c","\uff68","\uff6a","\uff66","\uff65","\uff70"],this._fullkanaSmall=["\uff67","\uff68","\uff69","\uff6a","\uff6b","\uff6c","\uff6d","\uff6e","\uff6f"],this._accentkana=[0,0,0,0,0,0,0,0,0,0,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,0,-1,1,-1,1,-1,1,0,0,0,0,0,-3,1,2,-3,1,2,-3,1,2,-3,1,2,-3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0],this._feQuotes=["\u2018","\u2019","\u201c","\u201d"],this._jpnMixed=["\u30fc"],this._jpnSpecialFull=["\u3000","\u3001","\u3002","\u300c","\u300d","\u201c","\u201d","\u2018","\u2019","\u309b","\u309c","\uffe5"],this._jpnSpecialHalf=[" ","\uff64","\uff61","\uff62","\uff63",'"','"',"'","'","\uff9e","\uff9f","\u00a5"];var e=new t;this._mwtable=[e.Symbol|e.FullWidth,e.Numeric|e.FullWidth,e.Symbol|e.FullWidth,e.UpperCase|e.FullWidth,e.Symbol|e.FullWidth,e.LowerCase|e.FullWidth,e.Symbol|e.FullWidth,e.FarEastPunctation,e.Katakana,e.Hangul,e.Symbol|e.FullWidth,e.Symbol]}return e}();e.CharCategory=n;var r=function(){function e(){this.CharCategory=new n,this.Ctype=new t}return e.prototype.ToHalfKatakana=function(e){var t="";if(this.IsFullWidth(e)){if(this.IsKatakana(e)){var n=e,r=n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(r<0||r>91)return n;n=this.CharCategory._fullkana[r];var i=this.CharCategory._accentkana[r];i>0&&(n+=String.fromCharCode(i==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),t=n}else if(this.IsHiragana(e)){var n=String.fromCharCode(e.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0)),r=n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(r<0||r>91)return n;n=this.CharCategory._fullkana[r];var i=this.CharCategory._accentkana[r];i>0&&(n+=String.fromCharCode(i==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),t=n}}else this.IsKatakana(e)&&(t=e);return t},e.prototype.GetCharType=function(e){var t=this.Ctype.OtherChar,n=this.BelongTo(e);if(e==""||"\0"<=e&&e<=""||"\u0080"<=e&&e<="\u009f")return this.Ctype.Control;if("A"<=e&&e<="Z")return this.Ctype.UpperCase;if("a"<=e&&e<="z")return this.Ctype.LowerCase;if("0"<=e&&e<="9")return this.Ctype.Numeric;if(this.IsFullWidthSymbol(e)||this.IsHalfWidthSymbol(e))t=this.Ctype.Symbol;if(e.charCodeAt(0)==8216||e.charCodeAt(0)==8217||e.charCodeAt(0)==8220||e.charCodeAt(0)==8221)t=this.Ctype.Punctuation;e.charCodeAt(0)==12288&&(t=this.Ctype.Space);switch(this.CharCategory.Blocks[n]){case"HALFWIDTH_AND_FULLWIDTH_FORMS":return this.MultiWidthDetails(e);case"KATAKANA":return this.Ctype.Katakana|this.Ctype.FullWidth;case"HIRAGANA":return this.Ctype.Hiragana|this.Ctype.FullWidth}return this.IsFarEastBlock(n,e)&&(t|=this.Ctype.FullWidth),t},e.prototype.IsCharOfType=function(e,t){return this.GetCharType(e)==t},e.prototype.IsMultiWidth=function(e){var t=this.BelongTo(e),n=this.CharCategory.Blocks[t];return n=="KATAKANA"||n=="CJK_SYMBOLS_AND_PUNCTUATION"||n=="HALFWIDTH_AND_FULLWIDTH_FORMS"||n=="BASIC_LATIN"&&e>=" "},e.prototype.IsFullWidthSymbol=function(t){for(var n=0;n<e.FullWidthSymbolArray.length;n++)if(t===e.FullWidthSymbolArray[n])return!0;return!1},e.prototype.IsHalfWidthSymbol=function(t){for(var n=0;n<e.HalfWidthSymbolArray.length;n++)if(t===e.HalfWidthSymbolArray[n])return!0;return!1},e.prototype.IsFullWidth=function(e){if(this.IsFullWidthSymbol(e))return!0;if(this.IsHalfWidthSymbol(e))return!1;var t=this.BelongTo(e),n=this.IsFarEastBlock(t,e);return this.CharCategory.Blocks[t]=="HALFWIDTH_AND_FULLWIDTH_FORMS"&&(n=(this.MultiWidthDetails(e)&this.Ctype.FullWidth)==this.Ctype.FullWidth),n},e.prototype.IsSurrogatePair=function(e){return e.charCodeAt(0)>="\ud800".charCodeAt(0)&&e.charCodeAt(0)<="\udbff".charCodeAt(0)&&e.charCodeAt(1)>="\udc00".charCodeAt(0)&&e.charCodeAt(1)<="\udfff".charCodeAt(0)?!0:!1},e.prototype.IsSurrogate=function(e){return e!=null&&e.charCodeAt(0)>="\ud800".charCodeAt(0)&&e.charCodeAt(0)<="\udfff".charCodeAt(0)},e.prototype.IsOther=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.OtherChar},e.prototype.IsControl=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Control},e.prototype.IsKatakana=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Katakana},e.prototype.IsSmallHalfKatakana=function(e){var t=new Array("\u30a1","\u30a3","\u30a5","\u30a7","\u30a9","\u30e3","\u30e5","\u30e7","\u30c3","\u30ee"),n=e;e.charCodeAt(0)>this.CharCategory.KANAHALFSTART&&(n=this.CharCategory._halfkana[e.charCodeAt(0)-this.CharCategory.KANAHALFSTART]);for(var r=0;r<t.length;r++)if(n==t[r])return!0;return!1},e.prototype.IsHiragana=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Hiragana||this.CharCategory._jpnMixed[0]==e},e.prototype.IsShiftJIS=function(e){return!1},e.prototype.IsJISX0208=function(e){return!1},e.prototype.IsDigit=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Numeric},e.prototype.IsPunctuation=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Punctuation},e.prototype.IsMathSymbol=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.MathSymbol},e.prototype.IsSymbol=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Symbol},e.prototype.IsLower=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.LowerCase},e.prototype.IsUpper=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.UpperCase},e.prototype.IsDigitOrSymbol=function(e){return this.IsDigit(e)||this.IsMathSymbol(e)},e.prototype.IsAlphabet=function(e){return this.IsUpper(e)||this.IsLower(e)},e.prototype.IsAlphaOrDigit=function(e){return this.IsUpper(e)||this.IsLower(e)||this.IsDigit(e)},e.prototype.IsUpperKana=function(e){return!this.IsLowerKana(e)},e.prototype.IsLowerKana=function(t){return e.LowerKana.search(t)!=-1},e.prototype.HasLowerKana=function(t){return e.UpperKana.search(t)!=-1||this.IsLowerKana(t)},e.prototype.ToUpperKana=function(t){var n=e.LowerKana.search(t);return n==-1?t:e.UpperKana.substr(n,1)},e.prototype.ToLowerKana=function(t){var n=e.UpperKana.search(t);return n>=e.UpperKana.length-4&&n<e.UpperKana.length?t:n==-1?t:e.LowerKana.substr(n,1)},e.prototype.ToLower=function(e){return this.IsUpper(e)?String.fromCharCode(e.charCodeAt(0)+32):e},e.prototype.ToUpper=function(e){return this.IsLower(e)?String.fromCharCode(e.charCodeAt(0)-32):e},e.prototype.IsSpace=function(e){return e==" "||e==="\u3000"},e.prototype.ToFullWidth=function(e){var t={text:"",processedAll:!1};t.text=e,t.processedAll=!1;if(e.length==0)return t;var n=e.substring(0,1);if(this.IsMultiWidth(n)){if(n<this.CharCategory._charstarts[1]){if(n==" ")return t.text="\u3000",t;var r="!";return t.text=String.fromCharCode(n.charCodeAt(0)-r.charCodeAt(0)+(this.CharCategory._charstarts[81].charCodeAt(0)+1)),t}if((this.MultiWidthDetails(n)&this.Ctype.Katakana)==this.Ctype.Katakana){if(n.charCodeAt(0)<this.CharCategory.KANAHALFSTART){var i=this.GetFullHalfWidthSpecialChar(n,!0);return t.text=i!==""?i:n,t}n=this.CharCategory._halfkana[n.charCodeAt(0)-this.CharCategory.KANAHALFSTART];if(e.length<2)return t.text=n,t;var s=e.charCodeAt(1)-(this.CharCategory.KATAKANA_VOICED.charCodeAt(0)-1);if(s==1||s==2){t.processedAll=!0;var o=this.CharCategory._accentkana[n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1)];o!=0&&((Math.abs(o)&2)==s&&(n=String.fromCharCode(n.charCodeAt(0)+1)),n=String.fromCharCode(n.charCodeAt(0)+1))}s==1&&n=="\u30a6"&&(n="\u30f4")}}return t.text=n,t},e.prototype.ToHalfWidth=function(e){return this.ToHalfWidthEx(e)},e.prototype.ToHalfWidthEx=function(e){var t=this.GetCharType(e),n=this.IsMultiWidth(e);if((t&this.Ctype.FullWidth)==this.Ctype.FullWidth)switch(t&~this.Ctype.FullWidth){case this.Ctype.Punctuation:case this.Ctype.UpperCase:case this.Ctype.LowerCase:case this.Ctype.Symbol:case this.Ctype.Numeric:case this.Ctype.MathSymbol:var r=this.GetFullHalfWidthSpecialChar(e,!1);if(r!=="")e=r;else if(n){var i="!";e=String.fromCharCode(e.charCodeAt(0)-(this.CharCategory._charstarts[81].charCodeAt(0)+1)+i.charCodeAt(0))}break;case this.Ctype.Katakana:var s=e.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(s<0||s>91)return e;e=this.CharCategory._fullkana[s];var o=this.CharCategory._accentkana[s];if(o>0)return e+=String.fromCharCode(o==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0)),e;break;case this.Ctype.Space:e=" ";break;case this.Ctype.Hangul:}return e},e.prototype.ToKatakana=function(e){if(!this.IsCharOfType(e,this.Ctype.Hiragana|this.Ctype.FullWidth))return e;var t=this.GetFullHalfWidthSpecialChar(e,!1);return t!==""?t:String.fromCharCode(e.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0))},e.prototype.ToHiragana=function(e){return this.IsKatakana(e)?(this.IsFullWidth(e)||(e=this.ToFullWidth(e).text),this.IsCharOfType(e,this.Ctype.Katakana|this.Ctype.FullWidth)?e>="\u30f7"&&e<="\u30ff"?e:e=="\u30f5"?"\u304b":e=="\u30f6"?"\u3051":String.fromCharCode(e.charCodeAt(0)+this.CharCategory._charstarts[61].charCodeAt(0)-this.CharCategory._charstarts[62].charCodeAt(0)):e):e},e.prototype.ToBigHalfKatakana=function(e){if(!this.IsSmallHalfKatakana(e))return e;var t=this.CharCategory._halfkana[e.charCodeAt(0)-this.CharCategory.KANAHALFSTART];return t=String.fromCharCode(t.charCodeAt(0)+1),t},e.prototype.BelongTo=function(e){var t=0,n=83,r=n>>1;while(n-t>1)e>=this.CharCategory._charstarts[r]?t=r:n=r,r=n+t>>1;return r},e.prototype.MultiWidthDetails=function(e){var t=0,n=this.CharCategory._fullhalfblocks.length,r=n>>1;while(n-t>1)e>=this.CharCategory._fullhalfblocks[r]?t=r:n=r,r=n+t>>1;return this.CharCategory._mwtable[r]},e.prototype.IsFarEastBlock=function(e,t){switch(this.CharCategory.Blocks[e]){case"CJK_COMPATIBILITY":case"CJK_COMPATIBILITY_FORMS":case"CJK_COMPATIBILITY_IDEOGRAPHS":case"CJK_RADICALS_SUPPLEMENT":case"CJK_SYMBOLS_AND_PUNCTUATION":case"CJK_UNIFIED_IDEOGRAPHS":case"CJK_UNIFIED_IDEOGRAPHS_EXTENSION":case"HALFWIDTH_AND_FULLWIDTH_FORMS":case"BOPOMOFO":case"BOPOMOFO_EXTENDED":case"HIRAGANA":case"KATAKANA":case"KANBUN":case"HANGUL_COMPATIBILITY_JAMO":case"HANGUL_JAMO":case"HANGUL_SYLLABLES":return!0;default:for(var n=0;n<this.CharCategory._feQuotes.length;n++)if(t==this.CharCategory._feQuotes[n])return!0;if(t.charCodeAt(0)>255)return!0;if(t.charCodeAt(0)==8216||t.charCodeAt(0)==8217||t.charCodeAt(0)==8220||t.charCodeAt(0)==8221)return!0}return!1},e.prototype.GetFullHalfWidthSpecialChar=function(e,t){if(t==1)var n=this.CharCategory._jpnSpecialHalf,r=this.CharCategory._jpnSpecialFull;else var n=this.CharCategory._jpnSpecialFull,r=this.CharCategory._jpnSpecialHalf;var i=-1,s=0;while(s<n.length){if(n[s]==e){i=s;break}s++}return i!=-1&&s<r.length?r[s]:""},e.LowerKana="\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\u30f5\u30f6\u3095\u3096",e.UpperKana="\u3042\u3044\u3046\u3048\u304a\u3064\u3084\u3086\u3088\u308f\u30a2\u30a4\u30a6\u30a8\u30aa\u30c4\u30e4\u30e6\u30e8\u30ef\uff71\uff72\uff73\uff74\uff75\uff94\uff95\uff96\uff82\u30ab\u30b1\u304b\u3051",e.FullWidthSymbolArray=["\u3001","\u3002","\uff0c","\uff0e","\u30fb","\uff1a","\uff1b","\uff1f","\uff01","\u309b","\u309c","\u00b4","\uff40","\u00a8","\uff3e","\uffe3","\uff3f","\u30fd","\u30fe","\u309d","\u309e","\u3003","\u4edd","\u3005","\u3006","\u3007","\u30fc","\u2014","\u2010","\uff0f","\u301c","\u2016","\uff5c","\u2026","\u2025","\u2018","\u2019","\u201c","\u201d","\uff08","\uff09","\u3014","\u3015","\uff3b","\uff3d","\uff5b","\uff5d","\u3008","\u3009","\u300a","\u300b","\u300c","\u300d","\u300e","\u300f","\u3010","\u3011","\uff0b","\u2212","\u00b1","\u00d7","\u00f7","\uff1d","\u2260","\uff1c","\uff1e","\u2266","\u2267","\u221e","\u2234","\u2642","\u2640","\u00b0","\u2032","\u2033","\u2103","\uffe5","\uff04","\u00a2","\u00a3","\uff05","\uff03","\uff06","\uff0a","\uff20","\u00a7","\u2606","\u2605","\u25cb","\u25cf","\u25ce","\u25c7","\u25c6","\u25a1","\u25a0","\u25b3","\u25b2","\u25bd","\u25bc","\u203b","\u3012","\u2192","\u2190","\u2191","\u2193","\u3013","\uff07","\uff02","\uff0d","\u3033","\u3034","\u3035","\u303b","\u303c","\u30ff","\u309f","\u2208","\u220b","\u2286","\u2287","\u2282","\u2283","\u222a","\u2229","\u2284","\u2285","\u228a","\u228b","\u2209","\u2205","\u2305","\u2306","\u2227","\u2228","\u00ac","\u21d2","\u21d4","\u2200","\u2203","\u2295","\u2296","\u2297","\u2225","\u2226","\u2985","\u2986","\u3018","\u3019","\u3016","\u3017","\u2220","\u22a5","\u2312","\u2202","\u2207","\u2261","\u2252","\u226a","\u226b","\u221a","\u223d","\u221d","\u2235","\u222b","\u222c","\u2262","\u2243","\u2245","\u2248","\u2276","\u2277","\u2194","\u212b","\u2030","\u266f","\u266d","\u266a","\u2020","\u2021","\u00b6","\u266e","\u266b","\u266c","\u2669","\u25ef","\uff3c","\uff5e","\uffe0","\uffe1","\uffe2","\u2015"],e.HalfWidthSymbolArray=["\\","~","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","]","^","_","`","{","|","}","\uff61","\uff62","\uff63","\uff64","\uff65","\u00a1","\u00a4","\u00a5"],e.CharEx=new e,e}();e.CharProcess=r})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){var t=function(){function e(){}return e.Getbyte64=function(t,n){var r=e.ALPHA.indexOf(t.charAt(n));if(r==-1)throw"Cannot decode base64";return r},e.Decode=function(t){if(window.atob!==undefined)return window.atob(t);t=""+t;var n=e.Getbyte64,r,i,s,o=t.length;if(o==0)return t;if(o%4!=0)throw"Cannot decode base64";r=0,t.charAt(o-1)==e.PADCHAR&&(r=1,t.charAt(o-2)==e.PADCHAR&&(r=2),o-=4);var u=[];for(i=0;i<o;i+=4)s=n(t,i)<<18|n(t,i+1)<<12|n(t,i+2)<<6|n(t,i+3),u.push(String.fromCharCode(s>>16,s>>8&255,s&255));switch(r){case 1:s=n(t,i)<<18|n(t,i+1)<<12|n(t,i+2)<<6,u.push(String.fromCharCode(s>>16,s>>8&255));break;case 2:s=n(t,i)<<18|n(t,i+1)<<12,u.push(String.fromCharCode(s>>16))}return u.join("")},e.prototype.getbyte=function(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n},e.DecodeCharInfo=function(){var t=e.Decode(e._base64CharInfo),n=[],r=0;for(r=0;r<t.length;r+=2){var i=t.charCodeAt(r+1)*256+t.charCodeAt(r);n.push(i)}var s=[];for(r=0;r<n.length;r++)if(n[r]!=65534)s.push(n[r]);else{var o=n[r+1];for(var u=1;u<o;u++)s.push(n[r-1]);r++}for(r=0;r<s.length;r+=2){var a=s[r+1]*65536+s[r];e._charInfo.push(a)}},e.GetByte=function(t){e._charInfo.length===0&&e.DecodeCharInfo();var n=Math.floor(t/4),r=t%4,i=e._charInfo[n];switch(r){case 0:return i&255;case 1:return i>>8&255;case 2:return i>>16&255;case 3:return i>>24&255}},e.GetShortValue=function(t){var n=e.GetByte(t),r=e.GetByte(t+1);return r*256+n},e.GetIntValue=function(t){var n=e.GetByte(t),r=e.GetByte(t+1),i=e.GetByte(t+2),s=e.GetByte(t+3);return s*65535*256+i*65535+r*256+n},e.PADCHAR="=",e.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e._charInfo=[],e._base64CharInfo="YwBoAGEAcgBpAG4AZgBvAC4AbgBsAHAAAAD+/wgAPAAAAGBLAAD0SwAAgHcAAIB4AAAAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEQASEBIgEjASQBJQEmAScBKAEpASoBKwEsAS0BLgEvASABMQEyATMBNAE1ATYBNwE4ATkBOgE7ATwBPQE+AT8BMAFBAUIBQwFFAS/v8ZAEAUUBL+/1EAUBRgFFAS/v8DAHAUUBKAFJAUoBSwFMAUgBFQEv7/KwDQFOAU/v8IAPAU/v8ZAFASABUQFSAVMBVAFVAVYBVwFYAVkBWgFYAR/v8DALAVwBXQFYAR/v8VAFAS/v8DAOAV8BWAEf7/qwAAFhAWIBYwFkAWUBZgFnAWgBH+/xgAgBaAEf7/DwBQEv7/pgCQFoAR/v9RAFAS/v8CAKAWgBH+/wULsBbAFoAR/v/+APAU/v//ANAW8BT+//8A0BbgFugW8Bb4FgAXCBcQFxgXIBcoFzAXOBdAF0gXUBdYF2AX/v8DAGgXcBdgF/7/AgB4F4AXiBeQF5gXoBeoF2AXsBdgF/7/AwC4F8AXUBf+/wQAyBdQF9AX2BfgF+gX8Bf4F/7/BwAAGAgYEBgYGFAXIBgoGGAXMBhAF/7/AwBQF/7/AwBgF/7/AgA4GGAX/v8DAEAYYBf+/wUASBhQGEAXWBhgGFAXaBhwGPgXeBiAGIgYkBiYGKAYqBiwGLgYwBjIGNAY2Bi4GP7/BQDgGOgY8Bj4GAAZuBj4FwgZuBj+/wUAEBkYGSAZiBgoGTAZOBn+/xAAQBlIGf7/AgBQGVgZYBloGXAZeBmAGYgZkBmYGaAZqBmwGbgZgBmIGcAZyBnQGdgZ4BnoGfAZiBn4GQAaCBqoGRAaeBmAGYgZGBogGigaqBkwGjgaQBpIGlAaWBpgGtgZaBpwGngaiBmAGogakBqoGZgaoBp4GogZqBqwGrgaqBnAGqAaeBqIGcga0BrYGqgZ4BroGvAaSBn4GgAbCBs4GRAbGBtIGf7/AgAgGygbMBs4Gf7/AgA4G0AbSBtQG1gbYBs4Gf7/AgBoG3AbeBuAG4gbSBmQG5gboBuoG/gXsBu4G8AbOBn+/wIASBn+/wIAyBvQG9gb4BvoG/Ab+BsAHEAX/v8CAAgcSBn+/wIAEBxIGf7/BQAYHEgZ/v8EACAcSBn+/wQAKBxIGf7/BAAwHDgcSBn+/wIAMBxIGf7/AgBAHEgcUBxIGf7/AwBIHEgZ/v8DAFgcYBxoHEgZcBxIGf7/BQB4HBgbSBn+/yUAgByIHJAcmBxIGf7/BACgHKgcsBy4HEgZwBxIGcgcsBzQHEgZ/v8DANgc4BzoHPAc+BwAHfAcSBn+/wIACB1IGf7/AgAQHUgZ/v8CABgdOBn+/wUASBmQGyAdKB0wHUgZOB14HEgZ/v8CACgcQB1IHVAdWB3+/wIASBlgHTgZ/v8OAGgdSBn+/wIAcB14HdgbgB2IHZAdSBmYHfAcOBn+/wQASBn+/wIAoB2oHbAduB1IGcAdOBn+/wgAUBf+/wIAyB3QHf7/AwDYHeAdUBfoHdAd/v8CAPgX/v8CAPAd+B1gF/7/CQAAHmAX/v8GAAgeEB4IHv7/AgAQHhgeCB4gHige/v8DADAeOB5AHkgeUB5YHmAeaB5wHngegB6IHpAemB6gHqgesB44GbgewB7IHtAe2B7gHuge8B74HgAf/v8CAAgfEB8YH1gdIB8oH1gdMB84H0AfOB/+/w4ASB9YHVAfWB9gH/7/AwBoH1gdcB84H3gfWB2AH4gfOBlYHf7/AgCQHzgZmB84GaAf/v8CAKgfsB9gH/7/BAC4H6AfWB3+/wsAwB/IH1gd/v8CANAfWB3+/wYA2B9YHf7/AgDgH+gf8B/4HzgZ/v8DAAAgWB0IIFgdECAYICAgKCCgHzAgWB04IEAgOB9IIDgfYB/+/xAAOB/+/wgAUCBYIDgf/v8DAGAgOB9oIDgf/v8QAFgd/v8DADgfcCB4IDgZ/v8KAEAX/v8CAIAgUBf+/wIAiCCQIJggYBf+/wYAoCCoIFAX/v8CALAgSBn+/wMAuCA4GUgZiBzAIP7/BAD4F/7/AgDIINAg2CDgIDgZ/v8EAFgd6CBYHf7/BQD4H1gd/v8NAPAgOBn4IAAhCCEQIRghGBtIGf7/BAAgISghSBn+/wQAMCE4IUgZOB0YG0gZ/v8EAEAhSCFIGRAdWB3+/wIA+B9IGWAfUCFYIWAfYCFoIWAfcCFYIWAf/v8CAHghgCFgH/7/AgCIIWAf/v8HAJAhYB/+/wUAmCFgH6AhSBn+/wsAqCFYHf7/BABIGf7/DACwITgZ/v8DAEgZuCFIGf7/FgCQG1gd/v8DAJAfOBn+/wMAwCFIGcghOBlgF/7/AgDQIdghYBfgITgZ/v8GAPAX6CHwIfghYBf+/wMAACIIIjgZ/v8GABAiGCJIGSAiOBlIGf7/AwAoIjAiSBn+/wIAOCJAIvAcOBn+/wIAuB1IGUgiSBlQIlgiOBn+/woASBn+/wIAYCJoInAieCI4Gf7/CgBIGf7/CgCwITgZ/v8FAIAi/v8QAIgi/v8QAEgZ/v8CADgdSBn+/wMAkCJIGf7/BgAoHDgZ/v8CAJgioCKoIrAiuCK4GP7/BgDAIjgZyCK4GP7/FQDQIjgZuBj+/wQA2CK4GP7/AgDgIjgZ/v8CAOgi+BfwIvAd+CIAIwgjECMYI7gY/v8HACAjKCP4FgAXCBcQFzAjOCNAI0gZSCNIGUAhUCNYI2AjaCNwI0gZUBx4Izgd/v8CADgZ/v8CAEgZ/v8HAJAigCOII/7/AgCQI5gj/v8DAKAjqCP4IDgZ/v8DAGAf/v8CALAjOBn+/wgASBmQG0gZ/v8DAAgaOBn+/wIASBlAIbgjSBnAIzgZ/v8DAEgZyCNIGf7/AgDQI9gjOBn+/wIAQBf+/wIA4CNQF/7/AgBIGf7/BAA4HfAcOBn+/wUA6COIGP7/AgDwIzgZ/v8MAIgY+COIGAAkOBn+/wwACCQQJIgYGCQgJCgkOBn+/woASBn+/wYAQCE4Gf7/CQAAH/7/BgAwJDgkOBn+/wgAYB/+/w8AQCRgH/7/AgBIJGAf/v8DAFAkWCRgJGAfaCRgH/7/AgBwJDgZ/v8CAFgd/v8EAHgkOBn+/wsAWB3+/wUAkB+II4AkOBn+/wgAQBeIJFAXkCSYJKAkCB5AF6gksCS4JMAkyCRAF4gkUBfQJNgkUBfgJOgk8CT4JEAXACVQF0AXiCRQF5AkmCRQFwgeQBeoJPgkQBcAJVAXQBeIJFAXCCVAFxAlGCUgJSglUBcwJUAXOCVAJUglUCVQF1glQBdgJVAXaCVwJf7/AwBYHf7/AgD4IFgd/v8GAPgfOBn+/wYASBn+/w0AiBw4Gf7/AgBIGTgdOBn+/w4AeCU4GYAl/v8GADgZ/v8IAPgX/v8PADgZiCL+/w8AiCUBAf7/BAABAgMCBAMBAf7/BwADAwMCBQYGBwgHBgYJCgYLDA0MDA4O/v8FAAwGDw8PBgYQEBD+/wwAEAkGChESERMTE/7/DAATCQ8KDwEBAf7/AgABAwEB/v8NABQGCAj+/wIAFRURFRMWDxcVERgZGhoRExUGERoTGxwcHAYQEP7/CwAQDxAQ/v8DABATExP+/wsAEw8TE/7/BAAQE/7/DAATEP7/CAATExAT/v8HABAQExD+/wIAExMTEBAT/v8CABAQExAQEBMTEBD+/wIAExAQExAQEBMTExAQExAQE/7/AwAQEBMQExMQExAQExAQEBMQ/v8CABATEx0QExMTHR3+/wIAEB4TEB4TEB4TEP7/CAATExATExAeExATEBAQE/7/BgATE/7/AwAQEBMQEBMTEP7/AgAQEBAT/v8FABMT/v8CAB0TExP+/wUAHx/+/wQAHyAgHx8f/v8DABER/v8CACAg/v8FAB8fERH+/wcAHx/+/wIAHxEREf7/AwAgER8RERH+/wgAISH+/wgAEBP+/wIAIBEQEwAAHxMTEwYAAAD+/wIAEREQBhAQEAD+/wIAEBATEBAQ/v8IAAAQEBD+/wQAExP+/wkAExATExAQEBMTExAT/v8EABMT/v8CABATDxATEBATExAQEBATIiEhIf7/AgAjIxAT/v8DABAQExD+/wYAExMQE/7/AgAAAP7/BgAAEBAQ/v8KABAAAB8kJP7/AwAAExMT/v8LAAAkJQAAAP7/AgAAISEh/v8OACYhJyEhJyEhJyEAAP7/BAAoKP7/DQAoAAAA/v8CACgoKCcnAAAA/v8FACkp/v8CAAAADw8qBwcrDCwVFSEh/v8FACEsAAAsLAAtLS3+/w8ALi0tLf7/BAAtISEh/v8JACEALy/+/wUABzAwLC0tIS0tLf7/CQAsLSEh/v8DACEpIyEhIf7/AgAhLi4hIRUhIf7/AgAtLQ4O/v8FAC0tLTExLSws/v8HAAAXLSEtLf7/BwAhIf7/BQAhAAAtLS3+/wQAISH+/wUAIS0AAP7/BwAyMv7/BQAoKP7/CAAoISEh/v8EADMzFQYGBjMAAAD+/woAACEhNB0d/v8TAAAAIR00NDQhISH+/wMAITQ0NDQhAAAdISEhIQAAAB0d/v8FACEhJCQ1Nf7/BQAkHx0AAAD+/wMAAB0dHf7/AgAAITQ0AB0dHf7/AwAdAAAdHQAAHR0d/v8KAB0AHR3+/wMAHQD+/wIAAAAdHf7/AgAAACEdNDQ0ISEhIQAANDQAADQ0IR0AAAD+/wMAADQAAP7/AgAdHQAdHR0hIQAANTX+/wUAHR0ICDY2/v8DACIAAAD+/wIAACEhNAAdHR3+/wIAHQAAAAAdHQAdHQAdHQAdHQAAIQA0NDQhIQAAAAAhIQAAISEhAAAAIQAA/v8DAAAdHR0dAP7/AgAAAP7/AwA1Nf7/BQAhIR0dHSEAAP7/BQAAISE0AB0dHf7/BAAAHR0dAB0dHf7/BgAdAB0dAB0dHf7/AgAAACEdNDQ0ISEh/v8CAAAhITQANDQhAAAdAAAA/v8HAAAIAAD+/wcAHQAdHQAdHR3+/wIAAAAhHTQh/v8CACEhIQAANDQAADQ0IQAA/v8EACE0AAD+/wIAHR0AHSIdAAD+/wgAIR0AHR0d/v8CAB0AAAAdHR0AHR3+/wIAAAAAHR0A/v8CAB0dAAAAHR0AAAAdHR0AAAAdHf7/BgAAAP7/AgA0NCE0NAAAADQ0NAA0NDQhAAAdAAAA/v8CAAA0AAD+/wQANjY2FRUV/v8CABUIFQAAAP7/AgAANDQ0AB0dHf7/AwAdAB0dHQAdHf7/CQAAHR0d/v8CAAAAAB0hISE0NDQ0ACEhIQAhIf7/AgAAAP7/AwAAISEAHR0AAP7/BwAcHP7/AwAcIgAANDQAHR0d/v8DAB0AHR3+/wMAAB0dHf7/AgAAACEdNDc0NP7/AgA0ADc0NAA0NCEhAAD+/wMAADQ0AAAA/v8DAB0AABUVAAAA/v8GAB0d/v8FAAAAAB00NDQhISEhADQ0NAA0NDQhAAD+/wQAADQAAP7/BAA2Nv7/AwAAAAAiHR3+/wMAAAA0NAAdHR3+/wgAHQAAAB0d/v8EAAAdHR3+/wQAAB0AAB0d/v8DAB0AAAAhAAAAADQ0NCEhIQD+/wIANDT+/wQAAAA0NCQAAAD+/wUAAB0dHf7/BwAdIR0dISH+/wMAIQAAAAAIHR3+/wMAHyEhIf7/AwAhJDU1/v8FACQkAAD+/wIAAB0dAP7/AgAAHR0A/v8CAAAdAAD+/wMAHR3+/wIAAB0dHf7/AwAAHR0dAB3+/wIAAAAdHQAdHR0dIR0dISH+/wMAACEhHQAAHR3+/wIAHQAfACEh/v8DAAAANTX+/wUAAAAdHQAAHSIiIiQk/v8HACQiIiL+/wIAISEiIv7/AwA1Nf7/BQA2Nv7/BQAiIf7/AwAJCv7/AgA0NB0d/v8EAAAdHR3+/wkAHQAAAAAhISH+/wYAITQhIf7/AgAhJCEhHR3+/wIAAAD+/wIAISH+/wQAACEhIf7/CQAhACIi/v8EACEiIiL+/wIAIgAiIiQk/v8CACQAAAD+/wUAHR3+/wUAHTQ0ISEhITQhIf7/AwA0ISE0NCEhHTU1/v8FACQk/v8DAB0d/v8DADQ0ISEdHf7/AgAhISEdNDQ0HR00NDT+/wMAHR0dISEhIR0dHf7/BgAhNDQhITQ0NP7/AgA0IR00NTX+/wUAAAD+/wIAIiIQEP7/AwAAAP7/BQAdHf7/BQAdJB8AAAAdHf7/BQAAAP7/AgAAHR0dHQAAAP7/AgAdHf7/CQAAAP7/AwAdHf7/BAAdAB0d/v8CAAAAHR3+/wMAHQD+/wIAHR3+/wIAAAAdAB0d/v8CAAAAHR3+/wMAHQD+/wIAHR3+/wIAAAAdHf7/BwAdAB0d/v8JAB0AAAAAISIkJCT+/wMAJDY2Nv7/CQA2AAAAFRX+/wUAAAD+/wMAHR3+/wIAHQAAAP7/BQAdHf7/BgAdJCQdHR3+/wMAHQAAAP7/BAAFHR0d/v8MAB0JCgAAAB0d/v8FAB0kJCQ4ODgAAAD+/wcAHR3+/wYAHQAdHf7/AgAhISEAAAD+/wUAHR0hISEkJAAAAP7/BAAdHSEhAAD+/wYAHQAhIQAA/v8GAB0d/v8CADk5NCEhIf7/AwA0NP7/BAAhNDQhISH+/wUAJCQkHyQkJAgdIQAANTX+/wUAAAD+/wMAHBz+/wUAAAD+/wMABgb+/wMAJQYGBgYhISEFAB0dHR8dHf7/CgAAAP7/BAAdHf7/BAAdIR0AAAD+/wIAISEhNDQ0NCEhNDQ0AAD+/wIANDQhNDQ0/v8CADQhISEAAP7/AgAVAAAABgY1Nf7/BQAdHf7/BwAAADQ0/v8IADQdHR3+/wMANDQAAP7/AwA1Nf7/BQAAAP7/AgAGBhUV/v8IAB0d/v8DAB0hITQ0NAAAJCQhIf7/AgA0HR0d/v8HACE0ISH+/wIAITT+/wIANDT+/wIAITQ0HR0d/v8DAAAA/v8CACQiIiL+/wQAIiEhIf7/BAAiIv7/BAAiAAAAISE0HR0d/v8GAB00ISH+/wIANDQhITQAAAAdHf7/AwA0NP7/BAAhIf7/BAA0NCEhAAAAJCQk/v8CADU1/v8FAAAAAB0dHTU1/v8FAB0d/v8HAB8f/v8DACQkExP+/wYAHx/+/wsAExP+/wsAHxMTE/7/CAATHx8f/v8CACEh/v8DACEAAAD+/wsAISEQE/7/AwATE/7/BAAQExMT/v8EABAQ/v8EABMT/v8DAAAAEBD+/wMAAAATE/7/BAAAEP7/BAATE/7/BwAAABMT/v8EAB4e/v8EABMT/v8CABMAExMQEP7/AgAeERMRERETExMAExMQEP7/AgAeERERExP+/wIAAAATExAQ/v8CAAARERETE/7/BAAQEP7/AgAQERERAAATExMAExMQEP7/AgAeEREABQX+/wUABRcXFzk6JSX+/wMABgYWGwkWFhsJFgYG/v8EADs8PT4/QEEUBwf+/wIABwYGBgYWGwYGBgYSEgYGBkIJCgYGBv7/BQAPBhIGBgb+/wQABgUXF/7/AgAXAAAA/v8CABcX/v8DABoTAAAaGv7/AwALCw8JChMaGv7/BQALCw8JCgAfH/7/AgAfAAAA/v8FAAgI/v8LAAAA/v8FACEh/v8GACEjIyMjISMjIyEhIf7/BQAhAAAA/v8HABUVEBUVFRUQFRUTEBAQExMQEBATFRAVFRUQEBD+/wIAFRX+/wMAEBX+/wMAEBD+/wIAGBMQEP7/AgATHR0dHRMVFRMTEBAPD/7/AgAPEBMT/v8CABUPFRUTIgAAABwcHP7/BgA4OP7/CQA4EBM4ODg4AAAA/v8DAA8P/v8CAA8VFRX+/wIADw8VFf7/AgAPFRUPFRUPFRUV/v8DAA8VFRX+/wcADw8VFQ8V/v8CABUV/v8HAA8P/v8PAAsZDw/+/wYAFRX+/wQADw/+/wIAFRX+/wIADw8VFf7/AwAVCQoVFRX+/wUAIiL+/xIAIhUPFRUV/v8DABUiFRX+/wIAFQ8PD/7/BAAVFf7/DAAPD/7/AwAVFf7/AwAAAP7/BAAVFf7/AwAVAAAA/v8EABUV/v8FABUAAAD+/wIAHBz+/wwAGhr+/woAIiL+/wcAHBz+/wMAFRX+/wMAFQ8VFf7/BAAVDxUV/v8LAA8P/v8EABUV/v8HABUPFRX+/wcAAAAVFf7/BgAiFRUV/v8HABUAAAAVFf7/AgAAAP7/BgAAFRUVFQAVFf7/AgAAABUV/v8GAAAVFRX+/wkAABX+/wIAFRUVAAAAFQAVFf7/AwAVAAAVFRX+/wMACQr+/wcAHBz+/wcAFQAAABUV/v8EAAAVFRX+/wYAFQAPD/7/AgAPCQoPDw8PAP7/AgAAAA8P/v8DAAkK/v8FAA8PDwkKCf7/CgAKDw8P/v8HAAkK/v8CAA8P/v8IAAkKDw/+/wMADxUVDw8P/v8CAA8AAAAVFf7/AgAVAAAA/v8FABAQ/v8HABAAExP+/wcAEwAQExAQEBMTEP7/BAAQEAATEBMTEBMT/v8DABMfAAAQE/7/AgATFRUV/v8CABUAAAD+/wYAAAYGBgYcBgYTE/7/AwAAAP7/BQAdHf7/AwAAAP7/BAAAHx0d/v8DAB0AHR3+/wMAHQAGBhYb/v8CAAYGBhYbBhYbBgb+/wQABiUGBiUGFhsGBhYbCQr+/wQABgb+/wIABiAGAAAA/v8HABUV/v8FAAAVFRX+/wUAAAD+/wUAFRX+/wYAAAD+/wIABQYGBhUfHTgJCv7/BQAVFQkK/v8EACUJCgoVODg4/v8EACEh/v8DACUfHx/+/wIAFRU4ODgfHQYVFR0d/v8DAB0AACEhEREfHx0lHR0d/v8MAB0GHx8fHQAA/v8CAAAdHR3+/wwAHQAiIjY2/v8CACIi/v8LACIVFQA2Nv7/BQAiIv7/BQAAAP7/BgAVHBwc/v8HACIi/v8GABUVFSIiHBwc/v8HACIi/v8GABUV/v8CACIi/v8HACIAIiL+/wMAIhUVFRUiIiL+/wkAFRUiIv7/BwAiFR0d/v8DAAAA/v8FAB0d/v8CAAAA/v8GAB0d/v8CAB0fHR3+/wsAHwYGBjU1/v8FAB0dAAD+/wMAEBP+/wYAHSEjIyMGAAD+/wQAISEGIBAT/v8EAAAA/v8EABER/v8DABEgICD+/wQAEREQE/7/BwATExAT/v8HAB8TExP+/wMAExD+/wMAEBP+/wUAIENDEBMAAAD+/wYAAB0dHf7/AwAhHR0dIR0dHR0hHR3+/wMAHTQ0ISE0FRX+/wIAAAD+/wIAHR3+/wIABgb+/wIAAAD+/wQANDQdHf7/CQA0NP7/CAAhAAAA/v8EACQkHR3+/wMAISH+/wQAJCQdHf7/AwAdISEh/v8FADQ0AAD+/wUAACQdHf7/BAAdISEh/v8CACE0NCEhNDQhIQAAAP7/BAAdHR0hHR3+/wQAITQAADU1/v8FAAAAJCT+/wIARET+/wgARUX+/wgAHR3+/wUAHQAAAP7/AgATE/7/AwATAAAA/v8FAAATExP+/wIAAAD+/wIAACghKCgo/v8EACgLKCj+/wYAKAAoKP7/AgAoAP7/AgAoKAAoKAAoKP7/BQAtLQAA/v8IAAAtLS3+/w0ACQoAAC0t/v8LAAAA/v8EAC0t/v8GACsVAAAGBv7/AwAGCQoGAAD+/wMABiUlEhIJCgn+/wcACgYGCQoGBgYGEhISDAYMAAYMBgYlCQoJ/v8CAAoHBgYLDQ8PDwAGCAcGAAD+/wIALS3+/wIALQAtLf7/CwAtAAAXAAYGBwgHBgYJCgYLDA0MDBMT/v8FABMJDwoPCQoGCQoGBh0d/v8FAB8dHR3+/w4AHx8AAB0d/v8DAAAAHR3+/wMAAAAdHf7/AwAAAB0dHQAAAAgIDxEVCAgAFQ8PDw8VFQAAAP7/BAAARkZGFRUAAB0d/v8GAAAdHR3+/wYAHQAdHQAdJAYiAAAAADY2Nv7/DgAAAAAiIiL+/wQAR0f+/woARxwcHBwVFRX+/wgAHAAAAP7/AgAiIv7/BgAiIQAANjb+/wIAAAD+/wYAHTgdHf7/BAA4AAAA/v8CAB0d/v8HAAAkHR3+/wIAAAD+/wIAHR3+/wQAJDg4OP7/AgAAAP7/BQAQEP7/BAATE/7/BAAoKP7/AwAAACgAKCj+/wYAACgoAAAAKAAAKCgo/v8DAEhI/v8CAAAA/v8CAAAGKCj+/wUAAAD+/wIAACcoISEhACEhAAAA/v8CACEh/v8CACgo/v8CAAAoKCgAKCgo/v8FAAAA/v8CACEhIQAAAAAhSEj+/wQAAAD+/wQAJyf+/wQAJwAAAP7/AwA4ODgAAAD+/wYAJCT+/wIAAAD+/wYAIiL+/wMAAAD+/wUAIiL+/wMAIgAAIiIi/v8FACI0NCEhISIiIjQ0NP7/AgA0FxcX/v8DABchISH+/wMAISIiISEh/v8DACIi/v8HACEh/v8CACIi/v8IAAAAFRUhISEVAAD+/wUANjYAAP7/BwAQEP7/BQATE/7/BQAQEP7/DQATE/7/AwATABMT/v8FABAQExP+/w0AEAAQEAAAEAAAEBAAABAQEBAAEBD+/wQAExP+/wIAABP+/wIAExP+/wMAABMTE/7/BwAQEAAQEBAQAAAQEBD+/wMAEAAQEP7/AwAQABMT/v8FABAQABAQEBAAEBD+/wIAEAD+/wIAAAAQEP7/AwAQABMT/v8NABAQ/v8FABMT/v8IAAAAEBD+/wQAEEkTE/7/DAATSRMT/v8DABAQ/v8MABBJExP+/wQAE0kTE/7/AwAQEP7/BAAQSRMT/v8MABNJExP+/wMAEBD+/wwAEEkTE/7/BAATSRMT/v8DABAQ/v8EABBJExP+/wQAE0kTE/7/AwAQEwAADg7+/wkAABcAAP7/BwAXF/7/CABFRf7/BwAAAO7u/v8CAB0ADg4OEA4PDhELERgSGAoaChQSFRIZCRgMEwkICBkSAAAbEhISAQALDBwSFhIPDhwKGQoKCBcSChIEAAIAAwADEgUNHAAHDRgAExITAxgDBAMPCxkEGgQYBAQEAwQICxgLHAQIAwMDBgAIAAoABQAJAA8ADwMMEQ0PDwEPBQ8HDwIPBhkMGwAQABEADxIJEgoDGQAAERAR/v8FACARMBEQEUARUBFgEXARgBGQEaARsBEQEf7/AgDAERAR/v8CANAR4BHwEQASEBEQEiASEBH+/wMAMBJAEhAR/v8CAFASEBH+/wIAYBIQEf7/BABwEhAR/v8DAIASkBKgEhAR/v9zALASEBHAEtAS4BIQEf7/TgDwEhAR/v8FAPAREBEAExAREBMgExAR/v8EADATQBMQEf7/GQBQExAR/v+uAGATEBH+/wMAcBMQEf7/IAGAExAR/v8HDpAT/v8DAJgTkBP+/wcAoBOQE/7/GgCYE5AT/v8IAJgTkBP+/wwAmBOQE/7/CQCoE5AT/v8HAKgTsBOQE/7/BgCoE5AT/v8HAKgTkBP+/wcAqBOQE/7/BwCoE7gTkBP+/wYAqBPAE5AT/v8GAKgTkBP+/wcAqBPIE5AT/v8NAJgTkBP+/wcAmBOQE/7/BADQE9gTkBP+/xAAmBOQE/7/BACYE5AT/v8MAOAT6BOQE/7/FgDwE/gTkBP+/w4AmBMAFJATmBOQE/7/EgCoE5AT/v8IAJgTkBP+/wcAmBOQE/7/BQCYE5AT/v8IAJgT/v8CAJAT/v8RAAgUEBSQE/7/DAAYFCAU/v8CACgUkBP+/w0AMBQ4FEAUSBSQE/7/BABQFFgUkBP+/wcAYBRoFHAUkBP+/xUAeBSAFJATiBSQFJAT/v8VAJgUkBP+/wgAoBSQE/7/AgCoFJAT/v8CAKAUkBP+/wIAsBSQE/7/BgCYE5AT/v8aAJgTkBP+/wIAmBOQE/7/FACYE5AT/v8QALgUwBSQE/7/AwDIFJAT0BSQE9gU4BToFPAU+BQAFQgVEBUYFSAVkBP+/wkAKBWQEzAVkBP+/wgAOBWQE/7/DACYE5AT/v8GAEAVkBP+/xIASBWQE/7/CwBQFVgVYBVoFXAVeBWAFZAT/v8PAIgVkBWQE/7/FACYFaAVqBWwFZAT/v8JALgVkBP+/wYAAAD+/wgAAQIDBAUGBwgJCgAA/v8EAAsMAAD+/wIAAA0AAA4PEAAAAP7/AwABAgMEBQYHCAkKAAD+/wIAERITFAAVAAD+/wMAFhcYAAAA/v8KABkREhMREhMAFhcYDg8QAAD+/wUAAQIDBAUGBwgJCg8aGxwdHh8gISIAAP7/CgAADQsMIyQlJicoFikqKywtLi8wFzEAAAD+/wgAMjM0AAAA/v8HABkREhMUNTY3ODkAAP7/AwA6AAAAIyQlJicoAAD+/wMAOg0LDCMkJSYnKAAA/v8EAAA7PD0+P0BBQkNERUYRERITFDU2Nzg5FkdILBdJGBhKMQAANixLTAAAAP7/AwANCwwjJCUmJygWR0hNTk8VMjM0KQ0LDCMkJSYnKBZHSE1OTxUyMzQpDQsMIyQlJicoFkdITU5PFTIzNCkAAP7/BwA6R0hNTk8VMjM0KQ0LDCMkJSYnKBY6AAD+/wMADQsMIyQlJicoFg0LDCMkJSYnKBYNCwwjJCUmJygWAAD+/wwAAA8AAP7/BAAAGQAA/v8EAAAREhMUNTY3ODkAAP7/BwAWKSoAAAD+/wMAERITFAAA/v8FABESExQ1Njc4ORYAAP7/AwAAUFFSU1RVVldYKllaW1xdAF5fYGErYmNkZWZnaGlqLAAA/v8FAAATAAD+/wMAABYAAP7/AgASAAAA/v8EABkAAAD+/wYAADb+/wIAAAD+/wwAABYAAP7/BAAAERITFDU2Nzg5FikqKywtLi8wF2tsbUlub3BxGHJzdEp1dnd4MXl6e0t8fX5/AAD+/wYADg8RNSxJSks1FiwXSRhKNRYsF0kYMUsWEREREhISEjUWFv7/AgAWKiws/v8CABdsSUn+/wIASRhKNSwPDzwQAAAA/v8IABkAAAD+/wIAETUWLAAA/v8GAAAwAAD+/wQAcQAAAP7/AgAAERIWKRcAAP7/CAARFikXAAD+/wMADQsMIxYpFxgAAP7/BAASExQ1Njc4ORMUNTY3ODkUNTY3ODkREhMUNTY3ODkREhMUNRITExQ1Njc4ORESExMUNQAAERITExQ1ExMUFP7/AgA2Nzc3ODg5Of7/AgASExQ1NhESExQUNTUAABESOzxCOzxDDkEOAAAA/v8GABESExQ1Njc4ORYpKissLS4vMAAA/v8OAAECAwQFBgcICQoBAgMEBQYHCAkKAQIDBAUGBwgJCgECAwQFBgcICQoBAgMEBQYHCAkKOQAAAP7/BwDu7v7/BgD//wAAAQECAgMDBAQFBQYGBwcICAkJ/wL/A/8B///+/xUA/wT/Bf8G/wf/CP8J///+/xEA/wD///7/RQAAAP7/AwDwvwAA/v8HAPA/AAD+/wMAAEAAAP7/AwAIQAAA/v8DABBAAAD+/wMAFEAAAP7/AwAYQAAA/v8DABxAAAD+/wMAIEAAAP7/AwAiQAAA/v8DAABAAAD+/wMACEAAAP7/AwDwPwAA/v8DANA/AAD+/wMA4D8AAP7/AwDoPwAA/v8DAPA/AAD+/wMAAEAAAP7/AwAIQAAA/v8DABBAAAD+/wMAMEAAAP7/AwAkQAAA/v8DAFlAAAD+/wIAAECPQAAA/v8HAPg/AAD+/wMABEAAAP7/AwAMQAAA/v8DABJAAAD+/wMAFkAAAP7/AwAaQAAA/v8DAB5AAAD+/wMAIUAAAP7/AwDgvwAA/v8DABBAAAD+/wMAFEAAAP7/AwAYQAAA/v8DABxAAAD+/wMAIEAAAP7/AwAiQAAA/v8DADRAAAD+/wMAPkAAAP7/AwBEQAAA/v8DAElAAAD+/wMATkAAAP7/AgAAgFFAAAD+/wMAVEAAAP7/AgAAgFZAAAD+/wIAAIjDQAAA/v8DADFAAAD+/wMAMkAAAP7/AwAzQAAA/v8DABRAAAD+/wMAGEAAAP7/AwAcQAAA/v8DACBAAAD+/wMAIkAAAP7/BABVVf7/AwDVP1VV/v8DAOU/mpmZmf7/AgDJP5qZmZn+/wIA2T8zM/7/AwDjP5qZmZn+/wIA6T9VVf7/AwDFP6uqqqr+/wIA6j8AAP7/AwDAPwAA/v8DANg/AAD+/wMA5D8AAP7/AwDsPwAA/v8DACZAAAD+/wMAKEAAAP7/AgAAQH9AAAD+/wIAAIizQAAA/v8CAABq6EAAAP7/AgAAavhAAAD+/wMAKkAAAP7/AwAsQAAA/v8DAC5AAAD+/wMANUAAAP7/AwA2QAAA/v8DADdAAAD+/wMAOEAAAP7/AwA5QAAA/v8DADpAAAD+/wMAO0AAAP7/AwA8QAAA/v8DAD1AAAD+/wMAP0AAAP7/AwBAQAAA/v8CAACAQEAAAP7/AwBBQAAA/v8CAACAQUAAAP7/AwBCQAAA/v8CAACAQkAAAP7/AwBDQAAA/v8CAACAQ0AAAP7/AgAAgERAAAD+/wMARUAAAP7/AgAAgEVAAAD+/wMARkAAAP7/AgAAgEZAAAD+/wMAR0AAAP7/AgAAgEdAAAD+/wMASEAAAP7/AgAAgEhAAAD+/wMAaUAAAP7/AgAAwHJAAAD+/wMAeUAAAP7/AgAAwIJAAAD+/wIAAOCFQAAA/v8DAIlAAAD+/wIAACCMQAAA/v8CAABAn0AAAP7/AgAAcKdAAAD+/wIAAECvQAAA/v8CAABwt0AAAP7/AgAAWLtAAAD+/wIAAEC/QAAA/v8CAACUwUAAAP7/AgAAiNNAAAD+/wIAAEzdQAAA/v8CAACI40AAAP7/AgAATO1AAAD+/wIAABfxQAAA/v8CAACI80AAAP7/AgAA+fVA",e}();e.CharInfo=t;var n=function(){function e(){}return e.InitTable=function(){e.globalizationResourceBytePtr=0,e.headerPtr=e.globalizationResourceBytePtr,e.s_pCategoryLevel1Index=t.GetIntValue(e.globalizationResourceBytePtr+40),e.s_pCategoriesValue=t.GetIntValue(e.globalizationResourceBytePtr+44),e.s_pNumericLevel1Index=t.GetIntValue(e.globalizationResourceBytePtr+48),e.s_pNumericValues=t.GetIntValue(e.globalizationResourceBytePtr+56),e.s_pDigitValues=t.GetIntValue(e.globalizationResourceBytePtr+52)},e.InternalConvertToUtf32=function(e,t,n){n.length=1;if(t<e.length-1){var r=e.charCodeAt(t)-55296;if(r>=0&&r<=1023){var i=e.charCodeAt(t+1)-56320;if(i>=0&&i<=1023)return n.length++,r*1024+i+65536}}return e.charCodeAt(t)},e.InternalGeteCategoryValue=function(n,r){if(r===undefined||r===null)r=0;var i=t.GetShortValue(e.s_pCategoryLevel1Index+2*(n>>8));i=t.GetShortValue(e.s_pCategoryLevel1Index+2*(i+(n>>4&15)));var s=e.s_pCategoryLevel1Index+2*i,o=t.GetByte(s+(n&15));return t.GetByte(e.s_pCategoriesValue+o*2+r)},e.InternalGetUnicodeCategory=function(t,n,r){var i=e.InternalConvertToUtf32(t,n,r);return e.InternalGeteCategoryValue(i,0)},e.IsCombiningCategory=function(e){return e!==5&&e!==6?e===7:!0},e}();e.CharUnicodeInfo=n,n.InitTable(),function(e){e[e.ClosePunctuation=21]="ClosePunctuation",e[e.ConnectorPunctuation=18]="ConnectorPunctuation",e[e.Control=14]="Control",e[e.CurrencySymbol=26]="CurrencySymbol",e[e.DashPunctuation=19]="DashPunctuation",e[e.DecimalDigitNumber=8]="DecimalDigitNumber",e[e.EnclosingMark=7]="EnclosingMark",e[e.FinalQuotePunctuation=23]="FinalQuotePunctuation",e[e.Format=15]="Format",e[e.InitialQuotePunctuation=22]="InitialQuotePunctuation",e[e.LetterNumber=9]="LetterNumber",e[e.LineSeparator=12]="LineSeparator",e[e.LowercaseLetter=1]="LowercaseLetter",e[e.MathSymbol=25]="MathSymbol",e[e.ModifierLetter=3]="ModifierLetter",e[e.ModifierSymbol=27]="ModifierSymbol",e[e.NonSpacingMark=5]="NonSpacingMark",e[e.OpenPunctuation=20]="OpenPunctuation",e[e.OtherLetter=4]="OtherLetter",e[e.OtherNotAssigned=29]="OtherNotAssigned",e[e.OtherNumber=10]="OtherNumber",e[e.OtherPunctuation=24]="OtherPunctuation",e[e.OtherSymbol=28]="OtherSymbol",e[e.ParagraphSeparator=13]="ParagraphSeparator",e[e.PrivateUse=17]="PrivateUse",e[e.SpaceSeparator=11]="SpaceSeparator",e[e.SpacingCombiningMark=6]="SpacingCombiningMark",e[e.Surrogate=16]="Surrogate",e[e.TitlecaseLetter=2]="TitlecaseLetter",e[e.UppercaseLetter=0]="UppercaseLetter"}(e.UnicodeCategory||(e.UnicodeCategory={}));var r=e.UnicodeCategory,i=function(){function e(){}return e.GetNextTextElement=function(t,r,i){var s;if(t==null)throw"ArgumentNullException";var o=t.length;if(r<0||r>=o){if(r!=o)throw"ArgumentOutOfRangeException";return""}var u={},a=n.InternalGetUnicodeCategory(t,r,u);s=u.length;var f=e.GetCurrentTextElementLen(t,r,o,a,s,i);return i.length=f,t.substr(r,f)},e.GetCurrentTextElementLen=function(e,t,r,i,s,o){var u;if(t+s===r)return s;var a={},f=n.InternalGetUnicodeCategory(e,t+s,a);u=a.length;if(!n.IsCombiningCategory(f)||n.IsCombiningCategory(i)||i===15||i===14||i===29||i===16){var l=s;return o.ucCurrent=f,o.currentCharCount=u,l}var c=t;t+=s+u;while(t<r){var a={};f=n.InternalGetUnicodeCategory(e,t,a),u=a.length;if(!n.IsCombiningCategory(f)){o.ucCurrent=f,o.currentCharCount=u;break}t+=u}return t-c},e.GetTextElement=function(t){var n=[],r=0;while(r<t.length){var i={},s=e.GetNextTextElement(t,r,i);n.push(s),r+=i.length}return n},e}();e.StringInfo=i;var s=function(){function e(){}return e.AddElementCache=function(t,n){e.TextElementCacheCount>500&&(e.TextElementCache={},e.TextElementCacheCount=0),e.TextElementCache[t]=n,e.TextElementCacheCount++},e.TextElementCache={},e.TextElementCacheCount=0,e}();e.StringCache=s,String.prototype.GetStandardPosition=function(e,t){this.CreateSurrogateArray();var n=e;if(s.TextElementArray!==null&&e>0){var r=Math.min(e,s.TextElementArray.length),i=0;for(var o=0;o<r;o++)i+=s.TextElementArray[o].length;n=i}return n},String.prototype.CreateSurrogateArray=function(){if(s.TextElementArray===undefined||s._InnerValue.toString()!=this.toString()){s._InnerValue=this;var e=s.TextElementCache[this];e===undefined&&(e=i.GetTextElement(this),s.AddElementCache(this,e));if(e.length===this.length)s.TextElementArray=null;else{s.TextElementArray=e,s.MultiCharExit=!1;for(var t=0;t<e.length;t++)if(e[t].length>2){s.MultiCharExit=!0;break}}}},String.prototype.GetLength=function(){this.CreateSurrogateArray();var e=this.length;return s.TextElementArray!==null&&(e=s.TextElementArray.length),e},String.prototype.Substring=function(e,t){this.CreateSurrogateArray();if(e>=t)return"";var n=this.substring(e,t);if(s.TextElementArray!==null){e=Math.max(0,e),t=Math.min(s.TextElementArray.length,t);var r=[];for(var i=e;i<t;i++)r.push(s.TextElementArray[i]);n=r.join("")}return n},String.prototype.IndexOf=function(e,t){this.CreateSurrogateArray();var n=this.indexOf(e,t);if(s.TextElementArray!==null&&n>0){var r=0;for(var i=0;i<s.TextElementArray.length;i++){r+=s.TextElementArray[i].length;if(r==n){n=i+1;break}}}return s.TextElementArray!==null&&n>=0&&this.Substring(n,n+e.GetLength()).length!=e.length&&(n=-1),n},String.prototype.LastIndexOf=function(e){this.CreateSurrogateArray();var t=this.lastIndexOf(e);if(s.TextElementArray!==null&&t>0){var n=0;for(var r=0;r<s.TextElementArray.length;r++){n+=s.TextElementArray[r];if(n==t){t=r+1;break}}}return s.TextElementArray!==null&&t>=0&&this.Substring(t,t+e.GetLength()).length!=e.length&&(t=-1),t},String.prototype.CharAt=function(e){this.CreateSurrogateArray();var t=this.charAt(e);return s.TextElementArray!==null&&(e>=0&&e<s.TextElementArray.length?t=s.TextElementArray[e]:t=""),t},String.prototype.startWith=function(e){return e==null||e==""||this.length==0||e.length>this.length?!1:this.substr(0,e.length)==e?!0:!1},String.prototype.IsNulOrEmpty=function(e){return e==null||e==""}})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments),this._wasPopupShowing=!1,this._imeCompostiing=!1,this._boundMouseWheel=!1,this._blockNextTriggerClickedEvent=!1}return __extends(i,e),i.prototype._elemWithClasses=function(e,t){return typeof t=="undefined"&&(t=[]),n(e).addClass(t.join(" "))},i.prototype._divWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<div/>",e)},i.prototype._spanWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<span/>",e)},i.prototype._horizontalBorderWidth=function(e){return e.leftBorderWidth()+e.rightBorderWidth()},i.prototype._verticalBorderWidth=function(e){return e.topBorderWidth()+e.bottomBorderWidth()},i.prototype._create=function(){var e=this;try{var t=document.activeElement==this.element[0]}catch(r){}var i=this._horizontalBorderWidth(this.element),s=this._verticalBorderWidth(this.element);if(this.element[0].tagName.toLowerCase()!=="input"&&this.element[0].tagName.toLowerCase()!=="textarea")throw"Target element is not a INPUT";this._creationDate=new Date,window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){e._destroy(),e._create(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijinput"),this.element.data("widgetName",this.widgetName),n.effects&&n.effects.save?n.effects.save(this.element,["width","height"]):n.save&&n.save(this.element,["width","height"]);var o=this.options.wijCSS;this.element.wrap("<div><span/></div"),this.wrapper=this.element.parent(),this.outerDiv=this.wrapper.parent(),this.outerDiv.addClass([o.wijinput,o.widget,o.helperClearFix,o.stateDefault,o.cornerAll].join(" ")),this.wrapper.addClass(o.wijinputWrapper),this.element.addClass(o.wijinputInput).addClass(o.cornerAll).attr("role","textbox");if(!(f.IsIE()&&parseFloat(n.browser.version)<=7))try{this.element.attr("aria-multiline",!1)}catch(r){this.element[0].setAttribute("aria-multiline","false")}this.options.showTrigger!=undefined&&(this.options.showDropDownButton=this.options.showTrigger),this._createDropDownAndSpin(),this._initialize(),t&&n(function(){return e.element.focus().wijtextselection(0,e.element.val().length)});var u=this.element[0].style;u.width&&(this._isInPercents(u.width)?this.outerDiv.width(u.width):this.outerDiv.width(this.element.width()+i-this._horizontalBorderWidth(this.outerDiv)),this.element.width("")),u.height&&(this._isInPercents(u.height)?this.outerDiv.height(u.height):this.outerDiv.height(this.element.height()+s-this._verticalBorderWidth(this.outerDiv)),this.element.height(this.outerDiv.height()-(parseInt(this.wrapper.css("padding-top"))+parseInt(this.wrapper.css("padding-bottom")))),this.wrapper.height(u.height))},i.prototype._createDropDownAndSpin=function(){this._createDropDownAndSpinElement(),this._createDropDownAndSpinStyle(),this._createDropDownAndSpinLayout()},i.prototype._createDropDownAndSpinElement=function(){var e=this.options.wijCSS,t=this.options.spinnerAlign,n=t==="verticalLeft",r=this.options.dropDownButtonAlign==="left",i=this.options.showSpinner,s=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(n=this.options.buttonAlign=="left",r=this.options.buttonAlign=="left",t=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight"),this.triggerBtn=null,this.spinUpElement=null,this.spinDownElement=null,this.outerDiv.css("overflow","hidden");if(s){var o=r?e.cornerLeft:e.cornerRight;this.triggerBtn=this._divWithClasses(e.wijinputTrigger,e.stateDefault,o).append(this._spanWithClasses(e.icon,e.iconArrowDown)).attr("role","button"),this.element.attr({role:"combobox","aria-expanded":!1})}i&&(this.spinnerLeft=this._divWithClasses(e.wijinputSpinnerLeft,e.wijinputButton),this.spinnerRight=this._divWithClasses(e.wijinputSpinnerRight,e.wijinputButton),t==="verticalLeft"||t==="verticalRight"?(this.spinUpElement=this._divWithClasses(e.stateDefault,e.wijinputSpinUp).append(this._spanWithClasses(e.icon,e.iconArrowUp)).css({padding:"0px"}).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(e.stateDefault,e.wijinputSpinDown).append(this._spanWithClasses(e.icon,e.iconArrowDown)).css({padding:"0px"}).attr("role","downbutton")):(this.spinUpElement=this._divWithClasses(e.stateDefault,e.wijinputSpin).append(this._spanWithClasses(e.icon,e.iconPlus,e.glyphIcon,e.glyphIconPlus)).css({padding:"0px"}).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(e.stateDefault,e.wijinputSpin).append(this._spanWithClasses(e.icon,e.iconMinus,e.glyphIcon,e.glyphIconMinus)).css({padding:"0px"}).attr("role","downbutton")),this.element.attr("role","spinner"))},i.prototype._createDropDownAndSpinStyle=function(){var e=this.options.wijCSS,t=this.options.spinnerAlign,n=this.options.spinnerAlign==="verticalLeft",r=this.options.dropDownButtonAlign==="left",i=this.options.showSpinner,s=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(n=this.options.buttonAlign=="left",r=this.options.buttonAlign=="left",t=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight");if(s&&i)if(r)switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputSpinnerTriggerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputTriggerLeft),this.outerDiv.addClass(e.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerTriggerLeft),this.outerDiv.addClass(e.inputSpinnerRight)}else switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputTriggerRight),this.outerDiv.addClass(e.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputSpinnerTriggerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerTriggerRight),this.outerDiv.addClass(e.inputSpinnerLeft)}else if(s)r?this.outerDiv.addClass(e.inputTriggerLeft):this.outerDiv.addClass(e.inputTriggerRight);else if(i)switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerLeft),this.outerDiv.addClass(e.inputSpinnerRight)}if(s&&i)if(r)switch(t){case"verticalRight":this.spinUpElement.addClass(e.cornerTR),this.spinDownElement.addClass(e.cornerBR);break;case"horizontalDownLeft":this.spinUpElement.addClass(e.cornerRight);break;case"horizontalUpLeft":this.spinDownElement.addClass(e.cornerRight)}else switch(t){case"verticalLeft":this.spinUpElement.addClass(e.cornerTL),this.spinDownElement.addClass(e.cornerBL);break;case"horizontalDownLeft":this.spinDownElement.addClass(e.cornerLeft);break;case"horizontalUpLeft":this.spinUpElement.addClass(e.cornerLeft)}else if(i)switch(t){case"verticalLeft":this.spinUpElement.addClass(e.cornerTL),this.spinDownElement.addClass(e.cornerBL);break;case"verticalRight":this.spinUpElement.addClass(e.cornerTR),this.spinDownElement.addClass(e.cornerBR);break;case"horizontalDownLeft":this.spinDownElement.addClass(e.cornerLeft),this.spinUpElement.addClass(e.cornerRight);break;case"horizontalUpLeft":this.spinUpElement.addClass(e.cornerLeft),this.spinDownElement.addClass(e.cornerRight)}},i.prototype._createDropDownAndSpinLayout=function(){var e=this.options.spinnerAlign,t=this.options.showSpinner,n=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(e=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight"),n&&this.triggerBtn.appendTo(this.outerDiv);if(t)switch(e){case"verticalLeft":this.spinnerLeft.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"verticalRight":this.spinnerRight.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"horizontalDownLeft":this.spinnerLeft.append(this.spinDownElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinUpElement).appendTo(this.outerDiv);break;case"horizontalUpLeft":this.spinnerLeft.append(this.spinUpElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinDownElement).appendTo(this.outerDiv)}},i.prototype._isDropDownButtonShown=function(){var e=this.options.showTrigger;return e===undefined&&(e=!1),e||this.options.showDropDownButton},i.prototype._isInPercents=function(e){return e.match(/%$/)},i.prototype._createTextProvider=function(){return undefined},i.prototype._beginUpdate=function(){},i.prototype._endUpdate=function(){var e=this;this.element.mousewheel&&!this._boundMouseWheel&&(this.element.mousewheel(function(t,n){e.isFocused()&&e._doSpin(n>0,!1)&&t.preventDefault()}),this._boundMouseWheel=!0)},i.prototype._isPopupShowing=function(){return!!this._comboDiv&&this._comboDiv.wijpopup("isVisible")},i.prototype._onTriggerMouseDown=function(e){this._wasPopupShowing&&(this._blockNextTriggerClickedEvent=!0)},i.prototype._onTriggerMouseUp=function(e){},i.prototype._onTriggerClicked=function(){if(this._blockNextTriggerClickedEvent){this._blockNextTriggerClickedEvent=!1;return}this._popupVisible()?this._hidePopup():this._showPopup()},i.prototype._showPopup=function(){return this._popupComboList()},i.prototype._hidePopup=function(){this._comboDiv.wijpopup("hide")},i.prototype._initialize=function(){var e=this;this.element.data("initializing",!0),this._trigger("initializing"),this.element.data("preText",this.element.val()),this.element.data("elementValue",this.element.val()),this.element.data("errorstate",!1),this.element.data("breakSpinner",!0),this.element.data("prevSelection",null),this.element.data("simulating",!1),this._createTextProvider(),this._beginUpdate();var t=this.options,r=function(e){return(e.which?e.which:e.button)===1},i=function(t){if(e.options.disabled)return;if(!r(t))return;if(e.options.disableUserInput)return;e._trySetFocus(),f.IsFireFox4OrLater()&&e._stopEvent(t),e.element.data("breakSpinner",!1),e._addState("active",n(e)),e._doSpin(n(t.currentTarget).attr("role")=="upbutton",!0)},s=function(t){if(e.options.disabled)return;if(!r(t))return;if(e.options.disableUserInput)return;e._stopSpin(),e._removeState("active",n(e))};this.triggerBtn&&!t.disabledState&&this.triggerBtn.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",n(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",n(e))},mousedown:function(t){if(e.options.disabled)return;if(!r(t))return;e._stopEvent(t),e._addState("active",n(e)),e._trigger("triggerMouseDown"),e._trigger("dropDownButtonMouseDown"),e._onTriggerMouseDown(t)},mouseup:function(t){e._onTriggerMouseUp(t)},click:function(t){if(e.options.disabled)return;e._stopEvent(t),e._stopSpin(),e._removeState("active",n(e)),e._trigger("triggerMouseUp"),e._trigger("dropDownButtonMouseUp"),e._onTriggerClicked(),f.IPad||e._trySetFocus()}}),this.spinUpElement&&!t.disabledState&&this.spinUpElement.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",n(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",n(e)),e._removeState("active",n(e)),e._stopSpin()},mousedown:i,mouseup:s}),this.spinDownElement&&!t.disabledState&&this.spinDownElement.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",n(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",n(e)),e._removeState("active",n(e)),e._stopSpin()},mousedown:i,mouseup:s}),this._attachInputEvent(),this.element.data("initializing",!1),this._resetData(),this._endUpdate(),this._updateText();if(this.options.disabledState){var o=t.disabled;this.disable(),t.disabled=o}this.options.disabled&&this.disable(),this.options.imeMode&&this.element.css("ime-mode",this.options.imeMode),this.element.data("initialized",!0),this._trigger("initialized")},i.prototype._attachInputEvent=function(){this.element.bind({"focus.wijinput":n.proxy(this._onFocus,this),"beforedeactivate.wijinput":n.proxy(this._onBeforeDeactivate,this),"blur.wijinput":n.proxy(this._onBlur,this),"mousedown.wijinput":n.proxy(this._onMouseDown,this),"mouseup.wijinput":n.proxy(this._onMouseUp,this),"keypress.wijinput":n.proxy(this._onKeyPress,this),"keydown.wijinput":n.proxy(this._onKeyDown,this),"keyup.wijinput":n.proxy(this._onKeyUp,this),"compositionstart.wijinput":n.proxy(this._onCompositionStart,this),"compositionend.wijinput":n.proxy(this._onCompositionEnd,this),"change.wijinput":n.proxy(this._onChange,this),"paste.wijinput":n.proxy(this._onPaste,this),"drop.wijinput":n.proxy(this._onDrop,this)}),this.element.bind("propertychange.wijinput input.wijinput",n.proxy(this._onInput,this))},i.prototype._detachInputEvent=function(){this.element.unbind(".wijinput")},i.prototype._init=function(){this.element.attr("readOnly")&&(this.options.readonly=!0),this.options.readonly===!0&&(this.options.disableUserInput=!0),(this.options.readonly===!0||this.options.disableUserInput===!0)&&this.element.attr("readOnly",!0),this.options.placeholder!=null&&(this.options.nullText=this.options.placeholder)},i.prototype._showNullText=function(){return!!this.options.nullText||this.options.nullText===""},i.prototype._setOption=function(e,t){switch(e){case"readonly":this._super(e,t),e="disableUserInput";break;case"placeholder":this._super(e,t),e="nullText";break;case"showTrigger":this.options.showTrigger=t,this.options.showDropDownButton=t}this._super(e,t);switch(e){case"spinnerAlign":case"dropDownButtonAlign":case"showDropDownButton":case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy(),this._create();break;case"showNullText":case"nullText":this._updateText();break;case"imeMode":this.element.css("ime-mode",this.options.imeMode);break;case"disabled":this.element.attr("disabled",t);var n=t?"addClass":"removeClass",r=this.options.wijCSS.stateDisabled;this.element[n](r),this.triggerBtn&&this.triggerBtn[n](r),this.spinUpElement&&this.spinUpElement[n](r),this.spinDownElement&&this.spinDownElement[n](r);break;case"disableUserInput":this.element.attr("readOnly",t);break;case"pickers":this._deleteComboDiv()}},i.prototype.destroy=function(){this._super(),this._comboDiv&&this._comboDiv.remove(),this.outerDiv&&this.outerDiv.remove(),this.spinnerLeft&&this.spinnerLeft.remove(),this.spinnerRight&&this.spinnerRight.remove(),this.spinDownElement&&this.spinDownElement.remove(),this.spinUpElement&&this.spinUpElement.remove(),this._destroy()},i.prototype.drop=function(){this._onTriggerClicked()},i.prototype.isDestroyed=function(){return!this.outerDiv},i.prototype._destroy=function(){if(this.isDestroyed())return;this.wrapper=undefined,this.outerDiv=undefined,this._detachInputEvent(),this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevSelection").removeData("simulating").removeData("isPassword").removeClass(this.options.wijCSS.wijinputInput).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded"),this.element.parent().replaceWith(this.element),this.element.parent().replaceWith(this.element),n.effects&&n.effects.restore?n.effects.restore(this.element,["width","height"]):n.restore&&n.restore(this.element,["width","height"]),this.triggerBtn=undefined,this.spinnerLeft=undefined,this.spinnerRight=undefined,this.spinDownElement=undefined,this.spinUpElement=undefined},i.prototype.widget=function(){return this.outerDiv||this._super()},i.prototype._getCulture=function(e){if(!Globalize)return null;var t=n.extend(!0,{},Globalize.findClosestCulture(e||this.options.culture)||Globalize.findClosestCulture("default"));return this.options.cultureCalendar!==""&&this.options.cultureCalendar!=="standard"&&n.extend(t.calendar,t.calendars[this.options.cultureCalendar||"standard"]),t},i.prototype._addState=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass(this.options.wijCSS.getState(e))},i.prototype._removeState=function(e,t){t.removeClass(this.options.wijCSS.getState(e))},i.prototype._isInitialized=function(){return!this.element.data("initializing")},i.prototype._setData=function(e){this.setText(e)},i.prototype._resetData=function(){},i.prototype._validateData=function(){},i.prototype.getText=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!1):this.element.val()},i.prototype.setText=function(e){this._isInitialized()?(this._textProvider.setText(e),e!==""&&this.element.val()!==this.options.nullText&&this.element.data("isShowNullText",!1),this._updateText()):this.element.val(e)},i.prototype.getPostValue=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},i.prototype.selectText=function(e,t){var n=this;typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this.getText().length),isNaN(e)&&(e=0),isNaN(t)&&(t=0),f.IsFireFox4OrLater()&&this.focus();if(this.element.is(":disabled"))return;this.isSelectingFromAPI=!0,this.element.wijtextselection(e,t),setTimeout(function(){return n.isSelectingFromAPI=!1},100)},i.prototype.focus=function(){if(this.element.is(":disabled"))return;this.element.get(0).focus()},i.prototype.isFocused=function(){return this.outerDiv?this.outerDiv.hasClass(this.options.wijCSS.stateFocus):!1},i.prototype.getSelectedText=function(){if(this.isFocused())return this.element.wijtextselection().text;if(this.element.data("prevSelection")){var e=this.element.data("prevSelection").start,t=this.element.data("prevSelection").end;return this.element.val().substring(e,t)}return""},i.prototype._raiseTextChanged=function(){var e=this.element.val(),t=this.element.data("preText");!!this.element.data("initialized")&&t!==e&&(this._trigger("textChanged",null,{text:e}),this.element.data("changed",!0)),this.element.data("preText",e)},i.prototype._raiseDataChanged=function(){},i.prototype._allowEdit=function(){return!this.element.is(":disabled")},i.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this._isInitialized())return;e=!!e;var t;if(this.element.data("selectionbeforeblur")!==undefined)t=this.element.data("selectionbeforeblur"),this.element.removeData("selectionbeforeblur");else try{t=this.element.wijtextselection()}catch(n){}var r=this.options;this.isDeleteAll&&this._showNullText()?(this.isDeleteAll=!1,r.date=null,this.element.val(r.nullText)):(this.element.val(this._textProvider.toString()),this.options.text=this._textProvider.toString(!0,!1,!1)),this.element.is(":disabled")||(e&&this.selectText(t.start,t.end),this.element.data("prevSelection",t)),this._raiseTextChanged(),this._raiseDataChanged()},i.prototype._trySetFocus=function(){if(document.activeElement!==this.element[0])try{this.options.disableUserInput||this.element.focus()}catch(e){}},i.prototype._deleteSelText=function(e){typeof e=="undefined"&&(e=!1);if(!this._allowEdit())return;var n=this.element.wijtextselection();if(e){if(n.end<1)return;n.end===n.start&&n.start--}n.end--,n.end<n.start&&(n.end=n.start);var r=new t.wijInputResult;this._textProvider.removeAt(n.start,n.end,r),this._updateText(),this.selectText(r.testPosition,r.testPosition)},i.prototype._fireIvalidInputEvent=function(e){var t=this,r=this._trigger("invalidInput",null,{widget:this,"char":e});if(n.isFunction(this.options.invalidInput)&&r===!0)return;if(!this.element.data("errorstate")){var i=this.options.invalidClass||this.options.wijCSS.stateError;this.element.data("errorstate",!0),window.setTimeout(function(){t.outerDiv&&t.outerDiv.removeClass(i),t.element.data("errorstate",!1)},200),this.outerDiv.addClass(i)}},i.prototype._onInput=function(e){var t=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t){this.element.data("hasInput")===!0&&!this._imeCompostiing&&(this.element.data("hasInput",!1),this._simulate());return}if(!this._isSimulating()||!this.element.data("ime")||this.element.data("isComposingIME")){this.element.data("isComposingIME")&&this.element.data("simulationPending",!0);return}this._simulate()},i.prototype._keyDownPreview=function(e){var t=e.keyCode||e.which;return e.ctrlKey===!0&&t===88?!0:e.ctrlKey===!0&&t===90?!0:!1},i.prototype._onDoubleByteCharacter=function(){var e=this.element.data("lastDbsState"),t=this.element.wijtextselection(),n=this.element.val();this.element.data("isComposingIME")&&e&&e.selection.start===t.start&&e.Text===n?(this.element.removeData("lastDbsState"),this._simulateOnCompositionEnd()):(this.element.data("lastDbsState",{selection:t,text:n}),this._onCompositionStart())},i.prototype._onCompositionStart=function(){var e=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(e){this._imeCompostiing=!0,this._beforeSimulate(!0);return}if(this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!0),this._beforeSimulate(!0)},i.prototype._onCompositionEnd=function(){var e=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(e){this._imeCompostiing=!1,this.element.data("hasInput",!0);return}this._simulateOnCompositionEnd()},i.prototype._simulateOnCompositionEnd=function(){if(!this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!1),this._isInitialized()&&(!this._textProvider||!this._textProvider.noMask)&&this._simulateIfPending()},i.prototype._simulateIfPending=function(){this.element.data("simulationPending")&&this.element.data("lastSelection")&&this._simulate()},i.prototype._beforeSimulate=function(e){typeof e=="undefined"&&(e=!1),this.element.data("lastSelection")||(this.element.data("lastSelection",this.element.wijtextselection()),this.element.data("lastValue",this.element.val())),this.element.data("ime",e),this.element.data("simulating",!0)},i.prototype._isSimulating=function(){return this.element.data("simulating")},i.prototype._simulate=function(e){var t=this,n=null;this.element.data("simulationPending",!1);if(typeof e=="string")n=e;else{var r=this.element.wijtextselection(),i=this.element.data("lastSelection").start,s=r.end;s>=i&&(n=this.element.val().substring(i,s))}n&&window.setTimeout(function(){if(t._isLastValueNull())return;t.element.val(t.element.data("lastValue"));var e=t.element.data("lastSelection");t.element.wijtextselection(e),t._batchKeyPress=!0,t.element.data("simulating",!1);var r=jQuery.Event("keypress");r.ctrlKey=r.altKey=!1;for(var i=0;i<n.length;i++){r.which=r.charCode=r.keyCode=n.charCodeAt(i),t._nextChar=i===n.length-1?"":n.charAt(i+1),t._onKeyPress(r),t._nextChar="";var s=t._appendChar;s&&s.length>0&&(t._appendChar="",r.which=r.charCode=r.keyCode=s.charCodeAt(i),t._onKeyPress(r)),t._skipNextChar&&(i++,t._skipNextChar=!1)}t._batchKeyPress=!1,t._endSimulate()},1)},i.prototype._isLastValueNull=function(){return!this.element.data("lastValue")},i.prototype._endSimulate=function(){this._simulateIfPending(),this.element.removeData("ime"),this.element.removeData("lastSelection"),this.element.removeData("lastValue")},i.prototype._processKeyForDropDownList=function(e){var t=this._getKeyCode(e);if(!(!e.altKey||t!==r.UP&&t!==r.DOWN))return this._onTriggerClicked(),this._stopEvent(e),!0;if(t===r.ESCAPE&&this._wasPopupShowing)return this._hidePopup(),this._stopEvent(e),!0;if(this._wasPopupShowing&&this._comboDiv!==undefined){if(t===r.DOWN){try{this._comboDiv.wijlist("next")}catch(n){}return this._stopEvent(e),!0}if(t===r.UP){try{this._comboDiv.wijlist("previous")}catch(n){}return this._stopEvent(e),!0}if(t===r.ENTER)return this._comboDiv.wijlist("select"),e.preventDefault(),!0;if(t===r.PAGE_DOWN){try{this._comboDiv.wijlist("nextPage")}catch(n){}return this._stopEvent(e),!0}if(t===r.PAGE_UP){try{this._comboDiv.wijlist("previousPage")}catch(n){}return this._stopEvent(e),!0}}},i.prototype._processKeyOnNoMask=function(e){var t=this._getKeyCode(e);t===r.Enter&&this._onEnterDown(e);if(t===r.LEFT||t===r.RIGHT)if(this._processLeftRightKey(t===r.LEFT)){this._stopEvent(e);return}this._processKeyForDropDownList(e)},i.prototype._onKeyDown=function(e){var t=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t&&this._imeCompostiing)return;this.element.data("prevSelection",null),this._deleteKeyDown=!1;if(!this._isInitialized())return;if(this._textProvider&&!!this._textProvider.noMask){this._processKeyOnNoMask(e);return}var i=this._getKeyCode(e);if(i===229){this._onDoubleByteCharacter();return}this._simulateOnCompositionEnd();if(this.options.disableUserInput){i===r.TAB?this._processTabKey(e)&&this._stopEvent(e):this._stopEvent(e);return}if(this._keyDownPreview(e)){this._stopEvent(e);return}if(this._processKeyForDropDownList(e))return;switch(i){case r.UP:this._doSpin(!0,!1),this._stopEvent(e);return;case r.DOWN:this._doSpin(!1,!1),this._stopEvent(e);return;case r.LEFT:case r.RIGHT:this._processLeftRightKey(i===r.LEFT)&&(this._trigger("keyExit"),this._stopEvent(e));return;case r.TAB:this._processTabKey(e)&&this._stopEvent(e);return}if(e.ctrlKey)switch(i){case r.INSERT:case 67:return;default:}if(e.ctrlKey||e.altKey)return;switch(i){case 112:case 113:case 114:case 115:case 116:case 117:case r.TAB:case r.CAPSLOCK:case r.END:case r.HOME:case r.CTRL:case r.SHIFT:return;case r.BACKSPACE:this._deleteSelText(!0),this._stopEvent(e);return;case r.DELETE:this._deleteSelText(!1),this._stopEvent(e),this._deleteKeyDown=!0;return;case r.ENTER:this._onEnterDown(e);break;case r.ESCAPE:this._stopEvent(e),window.setTimeout(n.proxy(this._resetData,this),1);return;case r.PAGE_UP:case r.PAGE_DOWN:case r.ALT:this._stopEvent(e);return}},i.prototype._onEnterDown=function(e){this.options.hideEnter&&this._stopEvent(e)},i.prototype._onKeyUp=function(e){var t=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t&&this._imeCompostiing)return;if(this._textProvider&&!!this._textProvider.noMask)return;var n=this._getKeyCode(e);if(this._isSimulating()){n===r.ENTER&&this._simulateOnCompositionEnd();return}if(!this._isInitialized())return;if(n===r.ENTER||n===r.ESCAPE)return;if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}this._stopEvent(e)},i.prototype._getKeyCode=function(e){var t=window.navigator.userAgent;return t.indexOf("iPod")===-1&&t.indexOf("iPhone")===-1||e.which!==127?e.keyCode||e.which:8},i.prototype._keyPressPreview=function(e){return!1},i.prototype._onKeyPress=function(e){if(this._isSimulating()||this._textProvider&&!!this._textProvider.noMask)return;var t=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t&&this._imeCompostiing)return;this.element.data("prevSelection",null);if(this.options.disableUserInput)return;if(!this._allowEdit())return;if(e.ctrlKey&&e.keyCode===119){this._onPaste(e);return}var n=e.keyCode||e.which;if(f.IsFireFox4OrLater())switch(e.keyCode){case r.UP:case r.DOWN:case r.LEFT:case r.RIGHT:case r.HOME:case r.END:return}switch(n){case 0:case r.TAB:return;case r.BACKSPACE:this._stopEvent(e);return;case r.DELETE:if(this._deleteKeyDown){this._stopEvent(e);return}break;case r.ENTER:this.options.hideEnter&&this._stopEvent(e);return}if(e.ctrlKey||e.altKey)if(n!==r.SPACE)return;if(this._keyPressPreview(e))return;var t=window.navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t&&!this._batchKeyPress){this.element.data("hasInput",!0),this._beforeSimulate(!0);return}var i=String.fromCharCode(n),s=this._textProvider.replaceWith(this.element.wijtextselection(),i);s?(this._updateText(),this.selectText(s.testPosition+1,s.testPosition+1),this.element.data("prevSelection",{start:s.testPosition+1,end:s.testPosition+1})):this._fireIvalidInputEvent(i),this._batchKeyPress||this._stopEvent(e)},i.prototype._isNullText=function(e){return e=e||this.element.val(),this._showNullText()&&e===this.options.nullText},i.prototype._doFocus=function(){var e=this.element.wijtextselection(),t=e.start;this._updateText();var r=this.element.val();r.length===t&&(t=0),n.browser.safari||this.selectText(t,t)},i.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},i.prototype._onFocus=function(e){if(this.options.disableUserInput)return;this.outerDiv.addClass(this.options.wijCSS.getState("focus"));if(!this.element.data("breakSpinner"))return;if(!this._isInitialized())return;if(!this._allowEdit())return;if(this.isSelectingFromAPI)return;this.element.data("focusNotCalledFirstTime")||this.element.data("focusNotCalledFirstTime",(new Date).getTime()),this._afterFocused()},i.prototype._onBeforeDeactivate=function(e){if(this.options.disableUserInput)return;if(!this.element.data("breakSpinner"))return;if(!this._isInitialized())return;if(!this._allowEdit())return;this.element.data("selectionbeforeblur",this.element.wijtextselection())},i.prototype._onBlur=function(e){if(this.options.disableUserInput)return;this._simulateOnCompositionEnd();if(this._isComboListVisible())return;var t=this.isFocused();this._removeState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){this.element.get(0).focus();if(this.element.data("prevSelection")){var n=this.element.data("prevSelection").start;n!==undefined&&n!==null&&this.selectText(n,n)}return}if(!this._isInitialized()||!t)return;this.element.data("value",this.element.val()),this._updateTextOnLostFocus()},i.prototype._updateTextOnLostFocus=function(){var e=this;window.setTimeout(function(){e._onChange(),e._updateText(),e._validateData(),e.element.data("changed")&&(e.element.data("changed",!1),e._popupVisible()||(e._trigger("change"),e.element.change()))},100)},i.prototype._popupVisible=function(){return this._wasPopupShowing},i.prototype._onMouseDown=function(e){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;if(f.IsMouseDownOnClearButton(e)){var t=!1;try{t=document.activeElement===e.target}catch(n){}this.element.data("focusedWhenMouseDown",t),this.element.data("mouseDownOnClearButton",!0);return}},i.prototype._onMouseUp=function(e){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;if(f.IsMouseDownOnClearButton(e)&&this.element.data("mouseDownOnClearButton")&&this.element.data("focusedWhenMouseDown")===!0){if(!this.options.disableUserInput){var t=this;setTimeout(function(){t._processClearButton()},0)}this.element.data("mouseDownOnClearButton",!1);return}this.element.data("mouseDownOnClearButton",!1),this.element.data("focusedWhenMouseDown",!1);var n=this.element.wijtextselection();this.element.data("prevSelection",n);if(this.element.val()=="")return;var t=this;setTimeout(function(){t.element.val()==""&&t.setText("")},5),this.element.data("isFocusSelecting")&&(this.element.data("isFocusSelecting",!1),e.preventDefault())},i.prototype._onChange=function(){if(!this.element)return;var e=this.element.val(),t=this.getText();t!==e&&this.setText(e)},i.prototype._onPaste=function(e){if(this._textProvider&&!!this._textProvider.noMask)return;this._beforeSimulate();var t=this;window.setTimeout(function(){t._simulate()},1)},i.prototype._onDrop=function(e){this._beforeSimulate();if(e.originalEvent&&e.originalEvent.dataTransfer){var t=e.originalEvent.dataTransfer.getData("Text");t&&this._simulate(t)}},i.prototype._stopEvent=function(e){e.stopPropagation(),e.preventDefault()},i.prototype._calcSpinInterval=function(){return this._repeatingCount++,this._repeatingCount>10?50:this._repeatingCount>4?100:this._repeatingCount>2?200:400},i.prototype._doSpin=function(e,t){return!1},i.prototype._stopSpin=function(){this.element.data("breakSpinner",!0),this._repeatingCount=0;var e=this.element.data("spintimer");e&&(clearTimeout(e),this.element.data("spintimer",undefined))},i.prototype._hasComboItems=function(){return!!this._getcomboItems()&&this._getcomboItems().length},i.prototype._getcomboItems=function(){return!!this.options.comboItems&&this.options.comboItems.length>0?this.options.comboItems:this.options.pickers.list},i.prototype._getcomboWidth=function(){return this.options.comboWidth||this.options.pickers.width},i.prototype._getcomboHeight=function(){return this.options.comboHeight||this.options.pickers.height},i.prototype._isComboListVisible=function(){return this._comboDiv?this._comboDiv.wijpopup("isVisible"):!1},i.prototype._deleteComboDiv=function(){if(this._comboDiv==undefined)return;this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv},i.prototype._createComboDiv=function(){var e=this;if(this._comboDiv!==undefined)return;this._comboDiv=n("<div></div>").appendTo(document.body).css("position","absolute");var t=this._normalize(this._getcomboItems());this._comboDiv.wijlist({maxItemsCount:5,selected:function(t,n){e.options.disableUserInput||e._setData(n.item.value),e._comboDiv.wijpopup("hide"),e._trySetFocus()}}),this._comboDiv.wijlist("setItems",t),this._comboDiv.wijlist("renderList")},i.prototype._popupComboList=function(){var e=this;if(!this._hasComboItems())return!1;if(!this._allowEdit())return!1;var t=this.outerDiv.width(),n=this._getcomboWidth(),r=this._getcomboHeight();return this._comboDiv!=undefined&&n&&parseInt(n)!==this._comboDiv.width()&&this._deleteComboDiv(),this._createComboDiv(),this._comboDiv.width(t),this._comboDiv.wijlist("option","autoSize",!r),r&&this._comboDiv.height(r),n&&this._comboDiv.width(n),this._comboDiv.wijlist("refreshSuperPanel"),this._comboDiv.wijpopup({autoHide:!0,hidden:function(){e._trigger("dropDownClose"),e._wasPopupShowing=!1,e._comboDiv.wijlist("unselectItems"),e._comboDiv.wijlist("deactivate")},shown:function(){e._trigger("dropDownOpen"),e._wasPopupShowing=!0}}),this.outerDiv.attr("aria-expanded",!0),this._comboDiv.wijpopup("show",{of:this.outerDiv,offset:"0 4",hidden:function(){e.outerDiv.attr("aria-expanded",!1)}}),!0},i.prototype._normalize=function(e){return e.length&&e[0].label&&e[0].value?e:n.map(e,function(e){return typeof e=="string"?{label:e,value:e}:n.extend({label:e.label||e.value,value:e.value||e.label},e)})},i.prototype._processLeftRightKey=function(e){return!1},i.prototype._processTabKey=function(e){return!1},i.prototype._moveControl=function(e,t,n){var r=f.GetElements(),i=null,s={};if(r.length<2)return null;var o=f.GetNextFocusableControl(e,r,t),u=this;setTimeout(function(){f.SetElementFocus(o),u._trigger("keyExit")},0)},i.prototype._processClearButton=function(){},i}(e.wijmoWidget);t.wijinputcore=i;var s="wijmo-wijinput",o=s+"-",u=function(){function e(){this.wijCSS={wijinput:s,wijinputInput:o+"input",wijinputWrapper:o+"wrapper",wijinputWrapperSpinnerLeft:o+"wrapper-spinner-left",wijinputWrapperSpinnerRight:o+"wrapper-spinner-right",wijinputTrigger:o+"trigger",wijinputSpinnerLeft:o+"spinner-left",wijinputSpinnerRight:o+"spinner-right",wijinputButton:o+"button",wijinputSpin:o+"spin",wijinputSpinUp:o+"spinup",wijinputSpinDown:o+"spindown",glyphIcon:"glyphicon",glyphIconPlus:"glyphicon-plus",glyphIconMinus:"glyphicon-minus",iconPlus:"ui-icon-plus",iconMinus:"ui-icon-minus"},this.imeMode="",this.culture="",this.cultureCalendar="",this.invalidClass=n.wijmo.wijCSS.stateError,this.nullText=undefined,this.placeholder=undefined,this.showNullText=!1,this.hideEnter=!1,this.disableUserInput=!1,this.readonly=!1,this.buttonAlign=null,this.dropDownButtonAlign="right",this.showDropDownButton=!1,this.showTrigger=undefined,this.showSpinner=!1,this.comboItems=undefined,this.comboWidth=undefined,this.comboHeight=undefined,this.blurOnLeftRightKey="none",this.spinnerAlign="verticalRight",this.allowSpinLoop=!1,this.pickers={list:undefined,width:undefined,height:undefined},this.dropDownOpen=null,this.dropDownClose=null,this.initializing=null,this.initialized=null,this.triggerMouseDown=null,this.triggerMouseUp=null,this.dropDownButtonMouseDown=null,this.dropDownButtonMouseUp=null,this.textChanged=null,this.invalidInput=null,this.keyExit=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new u),function(e){e[e.Default=-1]="Default",e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(t.MouseButton||(t.MouseButton={}));var a=t.MouseButton,f=function(){function e(){}return e.GetBrowserType=function(){var t=navigator.userAgent.toLowerCase();if(t.indexOf("msie")!=-1)e.ie=t.match(/msie ([\d.]+)/)[1];else if(t.indexOf("chrome")!=-1)e.chrome=t.match(/chrome\/([\d.]+)/)[1];else if(t.indexOf("safari")!=-1){var n=t.match(/version\/([\d.]+)/);n&&(e.safari=n[1])}else t.indexOf("firefox")!=-1?e.firefox=t.match(/firefox\/([\d.]+)/)[1]:t.indexOf("opera")!=-1&&(e.opera=t.match(/opera.([\d.]+)/)[1]);t.indexOf("ipad")!=-1&&(e.IPad=!0),e.engine=null,window.navigator.appName=="Microsoft Internet Explorer"&&(document.documentMode?e.engine=document.documentMode:(e.engine=5,document.compatMode&&document.compatMode=="CSS1Compat"&&(e.engine=7),e.ie&&e.ie.indexOf("6")==0&&(e.engine=6))),t.indexOf("rv:")!==-1&&t.indexOf("firefox")===-1&&(e.ie=e.engine=t.match(/rv:([\d.]+)/)[1])},e.IsMouseDownOnClearButton=function(t){if(!e.IsIE10OrLater())return!1;for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];for(var i=0;i<r.cssRules.length;i++)if(r.cssRules[i].selectorText=="::-ms-clear"&&r.cssRules[i].style.display=="none")return!1}var s=t.offsetX,o=t.offsetY,u=t.srcElement||t.target,a=u.clientWidth,f=u.clientHeight,l=parseInt(u.currentStyle.paddingLeft),c=parseInt(u.currentStyle.paddingRight);if(u.readOnly||t.button!=0)return!1;if(a-f+l+c<e.GetClearButtonShowThreshold(u))return!1;var h=a-f;return s>h&&s<=a&&o>=0&&o<f?!0:!1},e.GetClearButtonShowThreshold=function(t){var n=e.MeasureText("ABCDQ",t).Height,r=4.3604432*n-.76207324;return r=Math.round(r),r},e.GetClientOS=function(){var t;if(!e.IsIE()){var n=navigator.userAgent,r=n.indexOf("("),i=n.indexOf(")");t=n.substring(r+1,i)}else t=navigator.appVersion;return t.indexOf("NT 6.0")!=-1?"vista":t.indexOf("NT 5.2")!=-1?"win2003":t.indexOf("NT 5.1")!=-1?"winxp":t.indexOf("NT 5.0")!=-1?"win2000":t.indexOf("NT 6.1")!=-1?"Win7":t.indexOf("NT 6.2")!=-1?"Win8":t.indexOf("NT 6.3")!=-1?"Win8":t.indexOf("Android")!=-1?"Android":"unknow"},e.MeasureText=function(t,n){if(e.MeasureElement===undefined){var r=document.createElement("div");r.style.position="absolute",r.style.border="solid 0px",r.style.left="-100000px",r.style.top="-100000px";var i=window.document.createTextNode("");r.appendChild(i),document.body.appendChild(r),e.MeasureElement=r,e.MeasureTextElement=i}var r=e.MeasureElement,i=e.MeasureTextElement;if(document!=null){var s=document.body.contains(n);s||document.body.appendChild(n);var o=n.currentStyle||window.getComputedStyle(n,null);r.style.fontFamily=o.fontFamily,r.style.fontSize=o.fontSize,r.style.fontStyle=o.fontStyle,r.style.fontWeight=o.fontWeight,s||document.body.removeChild(n)}var u=null;if(typeof t=="string")i.nodeValue=t,u={Width:r.clientWidth,Height:r.clientHeight};else{u=[];for(var a=0;a<t.length;a++)i.nodeValue=t[a],u.push({Width:r.clientWidth,Height:r.clientHeight})}return u},e.SetElementFocus=function(e){e.focus()},e.GetAllElements=function(){return document.body.querySelectorAll?document.body.querySelectorAll("button, input, object, select, textarea"):document.body.all?document.body.all:document.body.getElementsByTagName("*")},e.GetElements=function(){var t=[],n=e.GetAllElements(),r=0,i=/^(?:button|input|object|select|textarea)$/i;for(var s=0;s<n.length;s++){if((!document.body.querySelectorAll||e.IsIE())&&!i.test(n[s].tagName.toLowerCase()))continue;var o=!n[s].disabled,u=n[s].style.visibility!=="hidden",a=n[s].type!="hidden"&&n[s].tabIndex!=-1,f=n[s].tagName.toLowerCase()=="textarea"&&n[s].tabIndex!=-1,l=a||f;o&&u&&l&&(t[r++]=n[s])}for(var s=0;s<t.length-1;s++)for(var c=s+1;c<t.length;c++)if(t[c].tabIndex<t[s].tabIndex){var h=t[s];t[s]=t[c],t[c]=h}return t},e.GetNextFocusableControl=function(e,t,n){typeof e=="string"&&(e=document.getElementById(e));var r=0;for(var i=0;i<t.length;i++)if(e===t[i]){n?r=(i+1)%t.length:r=(i-1+t.length)%t.length;break}return t[r]},e.MoveFocus=function(t,n){var r=e.GetElements(),i=e.GetNextFocusableControl(t,r,n);return e.SetElementFocus(i),i},e.IsPad=function(){var t=e.IPad||e.GetClientOS().toLowerCase()=="android";return t},e.IsIE=function(){return e.ie!==undefined},e.IsFireFox4OrLater=function(){return e.firefox!=null&&parseFloat(e.firefox)>=4},e.IsIE11OrLater=function(){return e.IsIE()&&e.engine>=11},e.IsIE10OrLater=function(){return e.IsIE()&&e.engine>=10},e.IsIE9OrLater=function(){return e.IsIE()&&e.engine>=9},e.IsIE8OrLater=function(){return e.IsIE()&&e.engine>=8},e.IsIE8OrBelow=function(){return e.IsIE()&&e.engine<=8},e.IsIE8=function(){return e.IsIE()&&e.engine==8},e.IsIE7=function(){return e.IsIE()&&e.engine==7},e.IsIE7OrLater=function(){return e.IsIE()&&e.engine>=7},e.IsIE9=function(){return e.IsIE()&&e.engine==9},e}();t.CoreUtility=f,f.GetBrowserType()})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(wijmo){(function(input){"use strict";var Utility=function(){function Utility(){}return Utility.FireEvent=function(e,t,n,r){if(!t)return!1;try{t.call(window,e,n)}catch(i){return!1}return!0},Utility.FindIMControl=function(e){},Utility.ArrayIndexOf=function(e,t){if(e.indeOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Utility.AttachEvent=function(e,t,n,r){e!==null&&e!==undefined&&(e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n))},Utility.AttachFocusEventOfDocument=function(){input.CoreUtility.IsIE8OrBelow()?Utility.AttachEvent(document,"beforeactivate",function(e){Utility.FocusControlUpdate(e)},!0):Utility.AttachEvent(document,"focus",function(e){Utility.FocusControlUpdate(e)},!0)},Utility.FocusControlUpdate=function(e){Utility.PreviousFocusControl=Utility.FocusControl,Utility.FocusControl=e.target||e.srcElement},Utility.ToString=function(e,t,n,r){var i=e+"";if(n!=null){while(i.length<t)r?i+=n:i=n+i;return i}while(i.length<t)i+=e+"";return i},Utility.GetSelectionEndPosition=function(e){if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var t=0;t=e.selectionEnd;if(e.value){var n=e.value.substring(0,t);t=n.GetLength()}var r=0;r=e.selectionStart;if(e.value){var n=e.value.substring(0,r);r=n.GetLength()}return r>t&&(t=r),t}return Utility.GetSelectionStartPosition(e)+document.selection.createRange().text.GetLength()},Utility.GetSelectionStartPosition=function(e){if(e.selectionStart!=null){var t=0;t=e.selectionStart;if(e.value){var n=e.value.substring(0,t);t=n.GetLength()}var r=0;r=e.selectionEnd;if(e.value){var n=e.value.substring(0,r);r=n.GetLength()}return r<t&&(t=r),t}try{var i=e.createTextRange(),s=document.selection.createRange(),o=e.value.GetLength(),u=0,a=o,f=0;while(u<a){f=Math.floor((u+a)/2),i=e.createTextRange();var l=f,n=e.value.Substring(0,f);for(;;){var c=n.IndexOf("\r\n");if(c==-1)break;l--,n=n.Substring(c+2,n.GetLength())}var h=f-l;l=f-h,i.moveStart("character",l);if(i.offsetTop>s.offsetTop)a=f;else if(i.offsetTop<s.offsetTop){if(u==f)return a;u=f}else if(i.offsetLeft>s.offsetLeft)a=f;else{if(!(i.offsetLeft<s.offsetLeft))return e.value.Substring(f-1,f)=="\r"&&f++,f;if(u==f)return a;u=f}}return o}catch(p){return 0}},Utility.GetCursorPosition=function(e,t){if(e==null)return-1;if(!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()){var n=0;n=e.selectionStart;if(e.value){var r=e.value.substring(0,n);n=r.GetLength()}return n}var i=0;if(document.selection){e.focus();var s=document.selection.createRange();s.moveStart("character",-e.value.length),i=s.text.length}return i},Utility.GetPasteData=function(e){return Utility.GetDataFromClipboard(e)},Utility.GetDataFromClipboard=function(e){return e==0?Utility.SavedText:window.clipboardData?window.clipboardData.getData("Text"):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined?Utility.CutCopyPasteEventObject.clipboardData.getData("text"):null},Utility.ClearSelection=function(e){input.CoreUtility.IsIE()&&!input.CoreUtility.IsIE11OrLater()?document.selection.createRange().text!=""&&document.selection.empty():Utility.GetSelectionText(e)!=""&&(e.selectionStart=e.value.length,e.selectionEnd=e.selectionStart)},Utility.GetSelectionText=function(e){if(e.selectionStart!=null)return e.value.substring(e.selectionStart,e.selectionEnd);if(document.selection!=null)return document.selection.createRange().text;if(document.activeElement!==null){var e=document.activeElement,t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)}return""},Utility.FireSystemEvent=function(e,t){if(input.CoreUtility.IsIE())e.fireEvent(t);else{var n=document.createEvent("HTMLEvents");n.initEvent(t.substring(2,t.length),!0,!0),e.dispatchEvent(n)}},Utility.GetTextBoxScrollWidth=function(e,t){return input.CoreUtility.MeasureText(e.value,e).Width},Utility.CheckInt=function(e,t,n){var r=parseInt(e);if(isNaN(r))throw"value is invalid";if(r<t||r>n)throw e+" is out of range, should between "+t+" and "+n;return r},Utility.CheckFloat=function(e,t,n){var r=parseFloat(e);if(isNaN(r))throw"value is invalid";if(e<t||e>n)throw e+" is out of range, should between "+t+" and "+n;return r},Utility.CheckDate=function(e,t,n){if(!(e instanceof Date))throw"Type is invalid";if(isNaN(e))throw"Date is a invalid date";if(n!=undefined)if(e<t||e>n)throw e+" is out of range, should between "+t+" and "+n},Utility.CheckBool=function(e){return typeof e=="string"&&e.toLowerCase()==="true"?!0:e==1},Utility.CheckFunction=function(fun){if(fun===undefined||fun===null)return null;if(typeof fun=="string"){fun=Utility.Trim(fun);if(fun.length==0)return null;try{eval("fun ="+fun)}catch(e){}}if(typeof fun=="function")return fun;throw"The value is not a valid function"},Utility.GetCheckElement=function(){if(Utility.CheckElement==null){var e=document.createElement("div");Utility.CheckElement=e,e.style.display="none"}return Utility.CheckElement},Utility.CheckString=function(e){e==null&&(e="");if(e!==undefined&&(typeof e=="string"||e instanceof String))return e.toString();throw e+" type is not a string."},Utility.GetCSSLength=function(e){var t=parseInt(e);return isNaN(t)?0:t},Utility.CheckCSSLength=function(e){return e=Utility.CheckInt(e,0,Math.pow(2,31)),parseInt(e)==e&&(e+="px"),Utility.GetCheckElement().style.width="",Utility.GetCheckElement().style.width=e,Utility.GetCheckElement().style.width},Utility.CheckFontSizeValue=function(e){return parseInt(e)==e&&(e+="px"),Utility.GetCheckElement().style.fontSize="",Utility.GetCheckElement().style.fontSize=e,Utility.GetCheckElement().style.fontSize},Utility.CheckColor=function(e){return Utility.GetCheckElement().style.backgroundColor="",Utility.GetCheckElement().style.backgroundColor=e,Utility.GetCheckElement().style.backgroundColor},Utility.CheckImageUrl=function(e){return Utility.CheckString(e)},Utility.GetCssImageUrl=function(e){return e.startWith('url("')?e=e.substring(5,e.length-2):e.startWith("url(")&&(e=e.substring(4,e.length-1)),e},Utility.CheckCssImageUrl=function(e){return e.length>0&&!e.startWith("url(")&&(e="url("+e+")"),Utility.GetCheckElement().style.backgroundImage="",Utility.GetCheckElement().style.backgroundImage=e,Utility.GetCheckElement().style.backgroundImage},Utility.CheckEnum=function(e,t){for(var n in e)if(e[n]==t||e[n]==t.toLowerCase())return e[n];throw"Enum value is invalid"},Utility.CheckChar=function(e){e=Utility.CheckString(e);if(e.length!==1)throw"Invalid value";return e},Utility.GetMultipleStringEnum=function(e){var t=e.split(" ");return t.sort(),t.join(",")},Utility.CheckMultipleStringEnum=function(e,t){var n=t.split(","),r=[];for(var i=0;i<n.length;i++)r.push(Utility.CheckEnum(e,Utility.Trim(n[i])));return r.join(" ")},Utility.EncodingToHTML=function(e){if(e.IndexOf("&")!=-1){var t=e,n="";while(t.IndexOf("&")!=-1){var r=t.IndexOf("&");t=t.replace("&","&amp;"),n+=t.Substring(0,r+5),t=t.Substring(r+5,t.GetLength())}t.IndexOf("&")==-1&&t!=""&&(n+=t),e=n}while(e.IndexOf(" ")!=-1)e=e.replace(" ","&nbsp;");while(e.IndexOf("<")!=-1)e=e.replace("<","&lt;");while(e.IndexOf(">")!=-1)e=e.replace(">","&gt;");return e},Utility.DecodingFromHTML=function(e){while(e.IndexOf("&nbsp;")!=-1)e=e.replace("&nbsp;"," ");while(e.IndexOf("&lt;")!=-1)e=e.replace("&lt;","<");while(e.IndexOf("&gt;")!=-1)e=e.replace("&gt;",">");if(e.IndexOf("&amp;")!=-1){var t=e,n="";while(t.IndexOf("&amp;")!=-1){var r=t.IndexOf("&amp;");t=t.replace("&amp;","&"),n+=t.Substring(0,r+1),t=t.Substring(r+1,t.GetLength())}t.IndexOf("&amp;")==-1&&t!=""&&(n+=t),e=n}return e},Utility.IsStandCompliantModeOn=function(){return input.CoreUtility.IsIE()?document.compatMode=="CSS1Compat":document.compatMode=="CSS1Compat"||document.compatMode=="BackCompat"},Utility.GetPageZoomRate=function(){if(input.CoreUtility.IsIE8())return screen.deviceXDPI/screen.logicalXDPI;var e=document.getElementById("gcsh_standard_control_for_get_normal_position");if(typeof e!="undefined"&&e!=null)return document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100;var t=document.createElement("div");return document.body.appendChild(t),t.id="gcsh_standard_control_for_get_normal_position",t.style.visibility="hidden",t.style.left="100px",t.style.top="1px",t.style.width="1px",t.style.height="1px",t.style.position="absolute",document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100},Utility.GetElementPosition=function(e){if(input.CoreUtility.IsIE()||input.CoreUtility.chrome||input.CoreUtility.safari){if(input.CoreUtility.IsIE8OrLater()){var t=Utility.GetElementPositionForIE8(e);if(t.Left==0&&t.Top==0){var n=Utility.GetElementPositionForFireFox(e);return n}return t}var r=Utility.GetElementPositionForIE(e);return{Left:r.Left,Top:r.Top}}return Utility.GetElementPositionForFireFox(e)},Utility.GetElementPositionForIE8=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0;if(t==null||t.self||t.nodeType===9)return{Left:r,Top:n};var i=t.getBoundingClientRect();if(!i)return{Left:r,Top:n};var s=t.ownerDocument.documentElement;r=i.left+s.scrollLeft,n=i.top+s.scrollTop;try{var o=t.ownerDocument.parentWindow.frameElement||null;if(o){var u=o.frameBorder==="0"||o.frameBorder==="no"?2:0;r+=u,n+=u}}catch(a){}return{Left:r,Top:n}},Utility.GetElementPositionForIE=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0;if(t==null)return{Left:r,Top:n};if(t.offsetParent)while(t.offsetParent!=null){var i=t.offsetParent,s=i.tagName.toLowerCase();s!="table"&&s!="body"&&s!="html"&&i.clientTop&&i.clientLeft&&(r+=i.clientLeft,n+=i.clientTop);if(input.CoreUtility.IsIE7()&&i.style.position.toLowerCase()=="relative"){r+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop;var o=Utility.GetPageZoomRate();if(o==1){var u=t.offsetTop;for(var a=0;a<i.children.length;a++){var f=i.children[a];if(f==t)break;if(f.offsetTop){u=f.offsetTop;break}}n-=u}}else if(Utility.IsStandCompliantModeOn()&&input.CoreUtility.IsIE7()&&(t.style.position.toLowerCase()=="absolute"||t.style.position.toLowerCase()=="relative")){var o=Utility.GetPageZoomRate();n+=(t.offsetTop-t.scrollTop)/o,r+=(t.offsetLeft-t.scrollLeft)/o}else t.tagName.toLowerCase()=="input"&&t.type.toLowerCase()=="text"||t.tagName.toLowerCase()=="textarea"?(n+=t.offsetTop,r+=t.offsetLeft):(n+=t.offsetTop-t.scrollTop,r+=t.offsetLeft-t.scrollLeft);t=i}else t.left&&t.top?(r+=t.left,n+=t.top):(t.x&&(r+=t.x),t.y&&(n+=t.y));if(t.style.position.toLowerCase()!="relative"&&t.style.position.toLowerCase()!="absolute"&&t.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn())if(!input.CoreUtility.IsIE7())n+=t.offsetTop,r+=t.offsetLeft;else{var l=parseInt(t.currentStyle.marginTop),c=parseInt(t.currentStyle.marginLeft);isNaN(l)&&(l=0),isNaN(c)&&(c=0),n+=l,r+=c}return{Left:r,Top:n}},Utility.GetElementPositionForFireFox=function(e){var t=e;typeof e=="string"&&(t=document.getElementById(e));var n=0,r=0,i=0,s=0;if(t==null)return{Left:r,Top:n};if(t.offsetParent)while(t.offsetParent!=null){var o=t.offsetParent.tagName.toLowerCase();o!="table"&&o!="body"&&o!="html"&&o!="div"&&t.offsetParent.clientTop&&t.offsetParent.clientLeft&&(r+=t.offsetParent.clientLeft,n+=t.offsetParent.clientTop),n+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent}else t.left&&t.top?(r+=t.left,n+=t.top):(t.x&&(r+=t.x),t.y&&(n+=t.y));t=e,typeof e=="string"&&(t=document.getElementById(e));if(t.parentElement)while(t.parentElement!=null&&t.tagName.toLowerCase()!="html")s+=t.scrollTop,i+=t.scrollLeft,t=t.parentElement;return n-=s,r-=i,t.style.position.toLowerCase()!="relative"&&t.style.position.toLowerCase()!="absolute"&&t.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn()&&(n+=t.offsetTop,r+=t.offsetLeft),{Left:r,Top:n}},Utility.GetOSDefaultFontFamily=function(){switch(input.CoreUtility.GetClientOS().toLowerCase()){case"winxp":return"MS UI Gothic";case"vista":return"\ufffd\u1964\ufffd\ua96a";case"win7":return"\ufffd\u1964\ufffd\ua96a";case"win8":return"Meiryo UI";case"win2003":return"MS UI Gothic";case"win2000":return"MS UI Gothic"}return"MS UI Gothic"},Utility.IsTouchSupport=function(){return window.navigator.userAgent.toLowerCase().indexOf("touch")!=-1},Utility.DisabledHoldVisual=function(e){e!==null&&e!==undefined&&Utility.IsTouchSupport()&&input.CoreUtility.IsIE10OrLater()&&(e.addEventListener("MSHoldVisual",function(e){e.preventDefault()},!1),e.addEventListener("MSGestureHold",function(e){e.preventDefault()},!1),e.addEventListener("contextmenu",function(e){e.preventDefault()},!1))},Utility.IsFocusFromIMControl=function(e,t){try{var n=t.fromElement;while(n!=null){if(n.id==e||n.id==e+this.Hold+"_DropDownObj"||n.id==e+"_DropDown_Container"||n.id==e+"_ContextMenu"||n.id==e+"_HistoryList"||n.id==e+"_EditField"||n.id==e+"_BorderContainer"||n.id==e+"_DropDown_EditField")return!0;n=n.parentNode}return!1}catch(r){return!1}},Utility.IsFocusToIMControl=function(e,t){try{var n=t.toElement;while(n!=null){if(n.id==e||n.id==e+this.Hold+"_DropDownObj"||n.id==e+"_DropDown_Container"||n.id==e+"_ContextMenu"||n.id==e+"_HistoryList"||n.id==e+this.Hold+"_DropDownObj_PopupMonth"||n.id==e+"_EditField"||n.id==e+"_BorderContainer"||n.id==e+"_DropDown_EditField")return!0;n=n.parentNode}return!1}catch(r){return!1}},Utility.Trim=function(e){if(e=="")return"";var t=0,n=0;for(var r=0;r<e.length;r++)if(e.CharAt(r)!=" "&&e.CharAt(r)!="\ufffd\ufffd"){t=r;break}for(var r=e.length-1;r>=0;r--)if(e.CharAt(r)!=" "&&e.CharAt(r)!="\ufffd\ufffd"){n=r+1;break}try{var i=e.Substring(t,n);return i}catch(s){return e}},Utility.GetTouchPath=function(e,t){return e===-1||t===-1?"Error":e>t?e-t>20?"ToTop":"NotMove":e<t?t-e>20?"ToBottom":"NotMove":"NotMove"},Utility.IsJapan=function(){return navigator.userLanguage?navigator.userLanguage.indexOf("ja")!=-1:navigator.language?navigator["language"].indexOf("ja")!=-1:!1},Utility.CreateStyleElement=function(e){var t=document.createElement("style");return t.id=e,t.type="text/css",t},Utility.CreateClassStyle=function(e){return Utility.CreateSelectorStyle("."+e)},Utility.CreateSelectorStyle=function(e){var t=document.getElementById("tableStyle");t==null&&(t=this.CreateStyleElement("tableStyle"),document.body.appendChild(t));var n=t.sheet||t.styleSheet,r=n.cssRules||n.rules;return n.insertRule?n.insertRule(e+"{ }",r.length):n.addRule(e,"{ }",r.length),r.item(r.length-1)},Utility.SetSelection=function(e,t,n,r){$(e).wijtextselection(Math.min(t,n),Math.max(t,n))},Utility.PreventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Utility.CancelBubble=function(e){e.cancelBubble!==undefined?e.cancelBubble=!0:e.stopPropagation()},Utility.DragDrop=function(e){try{e.dragDrop(!0)}catch(t){}},Utility.GetMouseButton=function(e){var t=-1,n=input.CoreUtility.IsIE8OrBelow()?1:0;return e.button==n?t=0:e.button==1?t=1:e.button==2&&(t=2),t},Utility.GetMouseWheelValue=function(e,t){return input.CoreUtility.IsFireFox4OrLater()?-t.detail/3:(t.wheelDelta>=120?e++:t.wheelDelta<=-120&&e--,e)},Utility.SetCopy=function(e,t){var n;try{if(e==null||e==""){document.selection&&(n=document.selection.createRange().text);if(n=="")return}}catch(r){}e!=null&&(n=e),Utility.CopyDataToClipBoard(n,t)},Utility.CopyDataToClipBoard=function(e,t){if(t==0){Utility.SavedText=e;return}window.clipboardData?setTimeout(function(){try{window.clipboardData.setData("Text",e)}catch(t){}},0):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined&&Utility.CutCopyPasteEventObject.clipboardData.setData("text",e)},Utility.SetZoomStyle=function(e,t,n){if(e===undefined||e===null)return;var r="top left";n===2&&(r="top right"),input.CoreUtility.firefox?(e.style.MozTransformOrigin=t===""?"":r,e.style.MozTransform=t===""?"":"scale("+t+")",e.setAttribute("ZoomValue",t)):input.CoreUtility.chrome||input.CoreUtility.safari?t!==""?(e.style.MozTransform="scale("+t+")",e.style.WebkitTransform="scale("+t+")",e.style.webkitTransformOrigin=r):(e.style.MozTransform="",e.style.WebkitTransform="",e.style.WebkitTransformOrigin=""):input.CoreUtility.IsIE9OrLater()?t!==""?(e.style.msTransform="scale("+t+")",e.style.msTransformOrigin=r):(e.style.msTransform="",e.style.msTransformOrigin=""):e.style.zoom=t},Utility.FilterText=function(e,t){if(t.GetLength()==0)return"";var n="",r=0,i=0;for(r=0;r<t.GetLength();r++){var s=!1;for(i=0;i<e.GetLength();i++)t.Substring(r,r+1)==e.Substring(i,i+1)&&(s=!0);s==1&&(n+=t.Substring(r,r+1))}return n},Utility.IndexOfAny=function(e,t,n){if(n>=e.length)return-1;for(var r=n;r<e.length;r++)for(var i=0;i<t.length;i++)if(e.charAt(r)==t[i])return r;return-1},Utility.IdCounter=0,Utility.EditFieldSuffix="_EidtField",Utility.MaskValChar="\ufeff",Utility.Hold="g-C2",Utility}();input.Utility=Utility,function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.ContextMenu=2]="ContextMenu",e[e.ClientEvent=3]="ClientEvent",e[e.KeyExit=4]="KeyExit",e[e.Default=5]="Default",e[e.SpinButton=6]="SpinButton",e[e.DropDown=7]="DropDown",e[e.ImeInput=8]="ImeInput",e[e.Left=9]="Left",e[e.Right=10]="Right",e[e.DragDrop=11]="DragDrop"}(input.FocusType||(input.FocusType={}));var FocusType=input.FocusType;(function(e){e[e.Default=0]="Default",e[e.Era=1]="Era",e[e.Year=2]="Year",e[e.Month=3]="Month",e[e.Day=4]="Day",e[e.AMPM=5]="AMPM",e[e.Hour=6]="Hour",e[e.Minute=7]="Minute",e[e.Second=8]="Second"})(input.DateCursorPosition||(input.DateCursorPosition={}));var DateCursorPosition=input.DateCursorPosition;(function(e){e[e.NoControl=0]="NoControl",e[e.Filter=1]="Filter",e[e.Cut=2]="Cut"})(input.CrLfMode||(input.CrLfMode={}));var CrLfMode=input.CrLfMode;(function(e){e[e.IncludeLiterals=0]="IncludeLiterals",e[e.ExcludeLiterals=1]="ExcludeLiterals"})(input.ClipContent||(input.ClipContent={}));var ClipContent=input.ClipContent;(function(e){e[e.Insert=0]="Insert",e[e.Overwrite=1]="Overwrite",e[e.FixedInsert=2]="FixedInsert",e[e.FixedOverwrite=3]="FixedOverwrite"})(input.EditMode||(input.EditMode={}));var EditMode=input.EditMode;(function(e){e[e.Always=1]="Always",e[e.PostDisplay=2]="PostDisplay",e[e.PreDisplay=3]="PreDisplay"})(input.ShowLiterals||(input.ShowLiterals={}));var ShowLiterals=input.ShowLiterals;(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Both=3]="Both"})(input.ExitOnLeftRightKey||(input.ExitOnLeftRightKey={}));var ExitOnLeftRightKey=input.ExitOnLeftRightKey;(function(e){e[e.None=0]="None",e[e.Field=1]="Field",e[e.All=2]="All"})(input.HighlightText||(input.HighlightText={}));var HighlightText=input.HighlightText;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(input.DropDownAlign||(input.DropDownAlign={}));var DropDownAlign=input.DropDownAlign;(function(e){e[e.Automatic=0]="Automatic",e[e.Fixed=1]="Fixed"})(input.ScrollBarMode||(input.ScrollBarMode={}));var ScrollBarMode=input.ScrollBarMode;(function(e){e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e[e.Both=3]="Both"})(input.ScrollBars||(input.ScrollBars={}));var ScrollBars=input.ScrollBars;(function(e){e[e.Normal=0]="Normal",e[e.Hover=1]="Hover",e[e.Pressed=2]="Pressed",e[e.Focused=4]="Focused",e[e.Disabled=8]="Disabled"})(input.ControlStatus||(input.ControlStatus={}));var ControlStatus=input.ControlStatus;(function(e){e[e.Tab=1]="Tab",e[e.ShiftTab=2]="ShiftTab",e[e.NextControl=3]="NextControl",e[e.PreviousControl=4]="PreviousControl",e[e.Right=5]="Right",e[e.Left=6]="Left",e[e.CtrlRight=7]="CtrlRight",e[e.CtrlLeft=8]="CtrlLeft",e[e.CharInput=9]="CharInput"})(input.ExitKeys||(input.ExitKeys={}));var ExitKeys=input.ExitKeys;(function(e){e[e.Control=0]="Control",e[e.Field=1]="Field"})(input.TabAction||(input.TabAction={}));var TabAction=input.TabAction;(function(e){e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Clear=12]="Clear",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Pause=19]="Pause",e[e.Caps_Lock=20]="Caps_Lock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Select=41]="Select",e[e.Print=42]="Print",e[e.Execute=43]="Execute",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Help=47]="Help",e[e.equalbraceright=48]="equalbraceright",e[e.exclamonesuperior=49]="exclamonesuperior",e[e.quotedbltwosuperior=50]="quotedbltwosuperior",e[e.sectionthreesuperior=51]="sectionthreesuperior",e[e.dollar=52]="dollar",e[e.percent=53]="percent",e[e.ampersand=54]="ampersand",e[e.slashbraceleft=55]="slashbraceleft",e[e.parenleftbracketleft=56]="parenleftbracketleft",e[e.parenrightbracketright=57]="parenrightbracketright",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.KP_0=96]="KP_0",e[e.KP_1=97]="KP_1",e[e.KP_2=98]="KP_2",e[e.KP_3=99]="KP_3",e[e.KP_4=100]="KP_4",e[e.KP_5=101]="KP_5",e[e.KP_6=102]="KP_6",e[e.KP_7=103]="KP_7",e[e.KP_8=104]="KP_8",e[e.KP_9=105]="KP_9",e[e.KP_Multiply=106]="KP_Multiply",e[e.KP_Add=107]="KP_Add",e[e.KP_Separator=108]="KP_Separator",e[e.KP_Subtract=109]="KP_Subtract",e[e.KP_Decimal=110]="KP_Decimal",e[e.KP_Divide=111]="KP_Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.F13=124]="F13",e[e.F14=125]="F14",e[e.F15=126]="F15",e[e.F16=127]="F16",e[e.F17=128]="F17",e[e.F18=129]="F18",e[e.F19=130]="F19",e[e.F20=131]="F20",e[e.F21=132]="F21",e[e.F22=133]="F22",e[e.F23=134]="F23",e[e.F24=135]="F24",e[e.Num_Lock=136]="Num_Lock",e[e.Scroll_Lock=137]="Scroll_Lock"})(input.Key||(input.Key={}));var Key=input.Key,BaseUIProcess=function(){function e(){this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,this.isOverWrite=!1,this.moveFocusExitOnLastChar=!1}return e.prototype.GetInputElement=function(){return this.Owner.GetInputElement()},e.prototype.GetElementId=function(){return this.Owner.GetInputElement().id},e.prototype.GetShowLiterals=function(){return this.Owner.GetShowLiterals!==undefined?this.Owner.GetShowLiterals():1},e.prototype.SetCursorPositionAndSelection=function(e,t,n,r){var i={};if(e==1||e==2)i.SelectionStart=0,i.SelectionEnd=t.GetLength();return i},e.prototype.Clear=function(){return null},e.prototype.Focus=function(e){var t=e.Text,n=e.DisplayText,r=e.FocusType,i=e.Element,s=e.HighlightText,o=e.CursorPosition,u={};this.isMulSelected=!1,r==1&&(u.SelectionStart=Utility.GetCursorPosition(i),u.SelectionEnd=u.SelectionStart),u.Text=t,u.SelectionStart==-1?(u.SelectionStart=0,u.SelectionEnd=0):u.SelectionStart>u.Text.GetLength()?(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()):u.SelectionStart==n.GetLength()&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()),r==9&&o==0?(u.SelectionStart=0,u.SelectionEnd=0):r==10&&o==0&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength());if(s==0&&o==0)return u;if(r==2)return u;var a=u.SelectionStart==null?e.SelectionStart:u.SelectionStart,f=this.SetCursorPositionAndSelection(s,u.Text,o,a);return f!=null&&(u.SelectionStart=f.SelectionStart,u.SelectionEnd=f.SelectionEnd,u.IsSelectionDeterminedByHighlightText=!0),u},e.prototype.LoseFocus=function(e){},e.prototype.MouseDown=function(e){var t={};return this.isTriClick=!1,this.isDblClick&&!Utility.GrapeCityTimeout&&e==0&&(this.isTriClick=!0,t=this.SelectAll()),this.isDblClick=!1,t},e.prototype.MouseUp=function(e,t,n,r,i){var s={};return this.isTriClick?(Utility.SetSelection(e,t,n),null):i?(s=this.SelectAll(),Utility.SetSelection(e,s.SelectionStart,s.SelectionEnd),s):(s.SelectionStart=t,s.SelectionEnd=n,r==0&&(s.SelectionStart=Utility.GetSelectionStartPosition(e),s.SelectionEnd=Utility.GetSelectionEndPosition(e)),s.SelectionStart!=s.SelectionEnd?this.isMulSelected=!0:this.isMulSelected=!1,s)},e.prototype.ProcessShortcutKey=function(e,t,n,r){var i={};switch(e){case"Clear":if(t)return i.System=!1,i;return this.Clear();case"NextControl":var s=this.MoveControl(this.GetInputElement(),!0,!1,"NextControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"PreviousControl":var s=this.MoveControl(this.GetInputElement(),!1,!1,"PreviousControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"NextField":return i=this.MoveField(n,!0),i;case"PreviousField":return i=this.MoveField(n,!1),i;case"NextField/NextControl":var i=this.MoveFieldAndControl(n,!0);return i;case"PreviousField/PreviousControl":var i=this.MoveFieldAndControl(n,!1);return i}},e.prototype.ProcessCharKeyInput=function(e,t,n,r,i){return null},e.prototype.ProcessNavigatorKeyInput=function(e,t,n,r,i,s,o,u){var a={};switch(e){case 45:return t==2?this.isOverWrite=!1:t==3?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,a.Overwrite=this.isOverWrite,a.System=!1,this.Format.Fields.fieldCount==0&&(a.System=!0),a;case 8:a=this.ProcessBackSpace(i,s,r),a.System=!1;break;case 46:a=this.ProcessDelete(i,s,r),a.System=!1;break;case 196643:case 196644:case 196645:case 196647:case 65569:case 196641:case 65570:case 196642:if(e==65569||e==196641)e=196644;else if(e==65570||e==196642)e=196643;a.SelectionEnd=this.GetCaretPosition(s,e),this.isMulSelected=!0,a.System=!1;break;case 65582:case 65544:if(this.isMulSelected){if(!this.Owner._isSupportClipBoard()){a.System=!0;break}a=this.Cut(n,i,s)}else a=this.ProcessBackSpace(i,s);a.System=!1;break;case 65581:case 131158:if(this.Owner._isSupportClipBoard()){var f=Utility.GetPasteData(this.Owner?this.Owner.GetUseClipboard():!0);a=this.Paste(i,s,f,u),a.System=!1}else a.System=!0;break;case 65571:case 65572:case 65573:case 65575:case 65574:case 65576:this.isMulSelected=!0,a.SelectionEnd=this.GetCaretPosition(s,e),a.System=!1;break;case 131139:case 131117:this.Owner._isSupportClipBoard()?(this.Copy(n,i,s),a.System=!1):a.System=!0;break;case 131118:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessDelete(i,s),a.System=!1;break;case 131080:case 196616:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessBackSpace(i,s),a.System=!1;break;case 131137:a=this.SelectAll(),a.System=!1;break;case 131160:this.Owner._isSupportClipBoard()?(a=this.Cut(n,i,s),a.System=!1):a.System=!0;break;case 131162:a=this.Undo(),a.System=!1;break;case 131109:case 37:if(i==0&&(o==3||o==1)){var l=e==37?"Left":"CtrlLeft",c=this.MoveControl(this.GetInputElement(),!1,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131108:case 131110:case 36:case 33:case 131105:if(e==33||e==131105)e=131108;a=this.ProcessLeftDirection(i,s,e),a.System=!1;break;case 131111:case 39:if(i==r.GetLength()&&(o==3||o==2)){var l=e==39?"Right":"CtrlRight",c=this.MoveControl(this.GetInputElement(),!0,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131107:case 131112:case 35:case 34:case 131106:if(e==34||e==131106)e=131107;a=this.ProcessRightDirection(i,s,e),a.System=!1;break;default:a=null}return a},e.prototype.ProcessLeftDirection=function(e,t,n){},e.prototype.ProcessRightDirection=function(e,t,n){},e.prototype.KeyDown=function(e){var t=e.KeyCode,n=e.SelectionStart,r=e.SelectionEnd,i=e.Text,s=e.EditMode,o=e.KeyAction,u=e.ReadOnly,a=e.ClipContent,f=e.ExitOnLastChar,l=e.ExitOnLeftRightKey,c=e.TabAction,h={};switch(s){case 0:this.isOverWrite=!1;break;case 1:this.isOverWrite=!0;break;case 2:this.isOverWrite=!1;break;case 3:this.isOverWrite=!0}n!=r?this.isMulSelected=!0:this.isMulSelected=!1;switch(t){case 9:return h=this.ProcessTabKey(r,!0,c),h;case 65545:return h=this.ProcessTabKey(r,!1,c),h}if(o!=null)return this.ProcessShortcutKey(o,u,r,n);if(u){if(t==27||t==262182||t==262184||t==38||t==40)return null;if(t!=131117&&t!=131139&&t!=9&&t!=65545&&t!=131081&&t!=196617&&t!=131137&&t!=37&&t!=39&&t!=38&&t!=40)return h}if(this.Format.Fields.fieldCount==0){switch(t){case 45:return s==2?this.isOverWrite=!1:s==3?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,h.Overwrite=this.isOverWrite,this.Format.Fields.fieldCount==0&&(h.System=!0),h;case 37:case 131109:if(n==0&&(l==3||l==1)){var p=t==37?"Left":"CtrlLeft",d=this.MoveControl(this.GetInputElement(),!1,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}break;case 39:case 131111:if(n==i.GetLength()&&(l==3||l==2)){var p=t==39?"Right":"CtrlRight",d=this.MoveControl(this.GetInputElement(),!0,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}}return null}var v=this.ProcessCharKeyInput(t,n,r,f,i);return v!=null?v:(h=this.ProcessNavigatorKeyInput(t,s,a,i,n,r,l,f),h)},e.prototype.KeyPress=function(e){},e.prototype.KeyUp=function(e){},e.prototype.ShowContextMenu=function(e,t){var n={};return t==""&&(n.SelectionStart=Utility.GetCursorPosition(e),n.SelectionEnd=n.SelectionStart),n},e.prototype.SelectStart=function(e,t,n){var r={};return t==""&&!this.isTriClick&&!this.isDblClick&&n!=-1&&(r.SelectionStart=Utility.GetCursorPosition(e),r.SetFalse=!0),r},e.prototype.DoubleClick=function(e){var t={},n=this.Format.Fields.GetFieldIndexByPos(e),r=this.Format.Fields.GetFieldRange(n.index);return t.SelectionStart=r.start,t.SelectionEnd=r.length+r.start,Utility.GrapeCityTimeout=!1,this.isDblClick=!0,this.isMulSelect=!0,setTimeout(function(){Utility.GrapeCityTimeout=!0},300),t},e.prototype.Undo=function(){},e.prototype.Cut=function(e,t,n){var r={};return t==n?r:(this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),r=this.ProcessDelete(t,n),this.FireClientEvent("OnCut"),r)},e.prototype.Copy=function(t,n,r){var i=null,s=!0;if(t==1){var o=Math.abs(n-r),n=Math.min(n,r);if(o==0)return;i=this.Format.Fields.GetNonLiteralsText(n,o)}else!input.CoreUtility.IsIE()||input.CoreUtility.IsIE11OrLater()?i=Utility.GetSelectionText(this.Owner.GetInputElement()):i=document.selection.createRange().text;this.Owner&&(i=e.UpdateCrLfString(i,this.Owner.GetAcceptsCrlf()),s=this.Owner.GetUseClipboard()),input.CoreUtility.IsIE()?setTimeout(function(){Utility.SetCopy(i,s)}):Utility.SetCopy(i,s)},e.prototype.Paste=function(e,t,n,r){},e.prototype.SelectAll=function(){var e={SelectionStart:0,SelectionEnd:0};e.SelectionStart=0;var t;return this.ID&&(t=this.GetShowLiterals()),t=="PostDisplay"||t=="PreDisplay"?e.SelectionEnd=Utility.FindIMControl(this.ID).GetText().GetLength():e.SelectionEnd=this.Format.Fields.GetLength(),this.isMulSelected=!0,e},e.prototype.FireEvent=function(e,t,n,r){if(Utility.FireEvent(e,t,n,r))return 3},e.prototype.ProcessCharKey=function(e,t,n,r){var i={},s=Math.min(e,t),o=Math.abs(t-e),u={};i.start=s,i.success=!1;if(this.Format.Fields.GetFieldIndex(s).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}var f=n.toString();if(o==0&&!this.isOverWrite)u=this.Format.Fields.Insert(s,f,!1);else if(o==0)if(s==this.Format.Fields.GetLength())u=this.Format.Fields.Insert(s,f,!1);else{var l=!1,c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset,d=this.Format.Fields.GetFieldRange(h);this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"?s-p+d.length==this.Format.Fields.GetLength()?l=!1:(l=!0,o=d.length-p+1):(l=!0,o=n.GetLength());if(this.Format.Fields.GetFieldIndexByPos(s+o).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}l?u=this.Format.Fields.Replace(s,o,f,!1):u=this.Format.Fields.Insert(s,f,!1)}else u=this.Format.Fields.Replace(s,o,f,!1);s=u.cursorPos;if(u.text!=""){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i.start=s,i.success=!1,i}if(r==1)if(s==this.Format.Fields.GetLength())this.moveFocusExitOnLastChar=!0;else{var c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset;h==this.Format.Fields.fieldCount-1&&p==0&&this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"&&(this.moveFocusExitOnLastChar=!0)}return i.start=s,i.success=!0,i},e.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};if(n==this.Format.Fields.GetLength()&&r==0)return i;var s,o=this.Format.Fields.GetFieldIndexByPos(n);s=o.index;if(s==-1)return i;if(r==0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;n=this.Format.Fields.Delete(n,1).cursorPos,i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndexByPos(n+r),u=o.offset,a=o.index;if(a==-1)return i;u==0&&a--;if(s==a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;var f=this.Format.Fields.Delete(n,r);if(!f.isSucceed)return i;i.SelectionStart=f.cursorPos,i.SelectionStart==0&&this.Format.Fields.GetFieldByIndex(0).fieldLabel=="PromptField"&&(i.SelectionStart=this.Format.Fields.GetFieldByIndex(0).GetLength()),i.SelectionEnd=i.SelectionStart;var l,c,h=this.Format.Fields.GetFieldIndexByPos(i.SelectionStart);c=h.index,l=h.offset,l!=0&&this.Format.Fields.GetFieldByIndex(c).fieldLabel=="PromptField"&&(i.SelectionStart=i.SelectionStart-l+this.Format.Fields.GetFieldByIndex(c).GetLength(),i.SelectionEnd=i.SelectionStart)}return i},e.prototype.ProcessBackSpace=function(e,t,n){},e.prototype.ProcessDelete=function(e,t,n){},e.prototype.GetCaretPosition=function(e,t,n,r,i){var s=this.Format.Fields,o=s.GetFieldIndexByPos(e),u=o.index,a=o.offset,f,l=0;switch(t){case 36:case 65572:case 65574:return e<=n?0:n;case 35:case 65571:case 65576:return e>=r?s.GetLength():r;case 37:if(e==0)return 0;s.GetFieldByIndex(u).fieldLabel==i?a>0?e-=a:e--:a==0&&s.GetFieldByIndex(u-1).fieldLabel==i?e-=s.GetFieldRange(u-1).length:e--;break;case 39:if(e==s.GetLength())return e;if(s.GetFieldByIndex(u).fieldLabel==i){f=s.GetFieldRange(u),n=f.start,r=n+f.length;if(e<r)return r}else e++;break;case 131109:if(e==0||u==0)return 0;if(s.GetFieldByIndex(u).fieldLabel==i)f=s.GetFieldRange(u-1),e=f.start;else{if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return 0}e-=a}break;case 196645:if(e==0||u==0)return 0;a==0?(f=s.GetFieldRange(u-1),e=f.start):e-=a;break;case 131111:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();if(s.GetFieldByIndex(u).fieldLabel!=i){for(l=u+1;l<s.fieldCount;l++)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return s.GetLength()}f=s.GetFieldRange(u+1),e=f.start;break;case 196647:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();f=s.GetFieldRange(u+1),e=f.start;break;case 131118:return e==s.GetLength()||s.GetFieldByIndex(u).fieldLabel==i?e:(f=s.GetFieldRange(u),f.start+f.length);case 131080:case 196616:if(e==0||s.GetFieldByIndex(u).fieldLabel==i&&u==0)return e;if(s.GetFieldByIndex(u).fieldLabel==i)return s.GetFieldRange(u-1).start;if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return e}e-=a;break;case 196643:case 131107:case 131112:return s.GetLength();case 196644:case 131108:case 131110:return 0;case 65573:return e==0?0:--e;case 65575:return e==s.GetLength()?e:++e}return e},e.prototype.CompareShortcut=function(e,t){if(t.toString().IndexOf("|")==-1)return t==e?!0:!1;var n=null;while(n!=-1){n=t.toString().IndexOf("|");var r=t.toString().GetLength();if(t.Substring(0,n==-1?r:n)==e)return!0;t=t.Substring(n+1,r)}return!1},e.prototype.MoveControl=function(e,t,n,r){var i=input.CoreUtility.GetElements(),s=null,o={};if(i.length<2)return null;var u=input.CoreUtility.GetNextFocusableControl(e,i,t);r=="CharInput"||!input.CoreUtility.IsIE()?(Utility.NextID=u,setTimeout(function(){input.CoreUtility.SetElementFocus(u)},0)):input.CoreUtility.SetElementFocus(u);if(n){var a=document.getElementById(u);if(a!=null&&(a.tagName.toLowerCase()=="textarea"||a.type=="text")&&input.CoreUtility.IsIE()){var f=a.createTextRange();if(r=="Left"||r=="CtrlLeft")f.moveStart("character",a.value.length),f.select()}}var l={Key:9};switch(r){case"NextControl":l.Key=3;break;case"PreviousControl":l.Key=4;break;case"Right":l.Key=5;break;case"Left":l.Key=6;break;case"CtrlRight":l.Key=7;break;case"CtrlLeft":l.Key=8;break;case"CharInput":l.Key=9}return s={},s.Name=this.Owner.KeyExitEvent,s.Args=l,s.Type="KeyExit",s!=null&&(o.EventInfo=s),o},e.prototype.MoveField=function(e,t){var n=this.Format.Fields.MoveField(e,t),r={};return n==-1?(r.NextPos=n,r):(r.SelectionStart=n,r.SelectionEnd=n,r)},e.prototype.ProcessTabKey=function(e,t,n){var r={Key:1},i={};t?r.Key=1:r.Key=2;var s={};return s.Name=this.Owner.KeyExitEvent,s.Args=r,s.Type="KeyExit",i.EventInfo=s,i.FocusType=4,i.System=!0,i},e.prototype.MoveFieldAndControl=function(e,t){var n=this.MoveField(e,t);if(n.NextPos!=-1)return n;var r=t?"NextControl":"PreviousControl",i=this.MoveControl(this.GetInputElement(),t,!1,r);return i!=null&&(n.EventInfo=i.EventInfo,n.FocusType=i.FocusType,n.FocusExit=!0),n},e.prototype.DragStart=function(){},e.prototype.DragEnd=function(){},e.prototype.Drop=function(){},e.prototype.DragOver=function(){},e.prototype.GetKeyActionName=function(e,t){if(t==null)return null;var n=t,r=new Array,i=n.IndexOf(","),s=0;if(t!=""){while(i!=-1)r[s++]=n.Substring(0,i),n=n.Substring(i+1,n.GetLength()),i=n.IndexOf(",");r[s++]=n;for(var o=0;o<s;o+=2)if(this.IsKeyCodeContained(e,r[o+1]))return r[o]}return null},e.prototype.IsKeyCodeContained=function(e,t){var n=t,r=n.IndexOf("|");while(r!=-1){if(n.Substring(0,r)==e)return!0;n=n.Substring(r+1,n.GetLength()),r=n.IndexOf("|")}return n==e?!0:!1},e.prototype.FireClientEvent=function(e){},e.prototype.PerformSpin=function(e,t,n){},e.UpdateCrLfString=function(e,t){var n=e;if(e)if(t==1)n=e.replace(new RegExp("[\r\n]","g"),"");else if(t==2){var r=e.split(new RegExp("[\r\n]","g"));r.length>0?n=r[0]:n=""}return n},e.FilterReturnChar=function(e){return e!=null&&(e=e.replace(new RegExp("[\r]","g"),"")),e},e}();input.BaseUIProcess=BaseUIProcess;var InputUIUpdate=function(){function e(e){this.Owner=e}return e.prototype.SetLastClientValues=function(e){},e.prototype.GetText=function(){if(this.Owner.GetInputElement()!=null)return this.Owner.GetInputElement().value},e.prototype.SetText=function(e){if(this.GetText()==null)return;if(this.GetText().replace(/\r\n/g,"\n")==e.replace(/\r\n/g,"\n"))return;this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().value=e)},e.prototype.SetFocus=function(){try{this.Owner.GetInputElement()!=null&&this.Owner.GetInputElement().focus()}catch(e){}},e.prototype.GetTextHAlign=function(){return this.Owner.GetInputElement()!==null?this.Owner.GetInputElement().style.textAlign:""},e.prototype.SetTextHAlign=function(e){if(this.Owner.GetInputElement()!==null){this.Owner.GetInputElement().style.textAlign=e;if(input.CoreUtility.IsIE()){var t=this.Owner.GetInputElement().style.width,n=parseInt(t);isNaN(n)&&(n=120),this.Owner.GetInputElement().style.width=n+1+"px";var r=this;setTimeout(function(){r.InputElement.style.width=t},0)}}},e.prototype.SetForeColor=function(e){this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().style.color=e)},e.prototype.WriteCssStyle=function(e){try{var t=document.getElementById("gcsh_InputManWeb_Style_Container");if(input.CoreUtility.IsIE())t.styleSheet.cssText=e;else{var n=t.sheet;for(var r=n.cssRules.length-1;r>=0;r--)n.deleteRule(r);var i=e.split("}");for(var s=0;s<i.length;s++){var o=i[s],u=o.indexOf("{");if(u==-1)continue;var e=o.substring(u+1);if(e.length!=0){var a=o.substring(0,u);n.insertRule(a+"{"+e+"}",n.cssRules.length)}}}}catch(f){}},e.prototype.ClearCssStyle=function(){},e}();input.InputUIUpdate=InputUIUpdate;var GlobalEventHandler=function(){function e(){}return e.OnKeyDown=function(e,t,n){if(e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;var r=t.keyCode;n&&(r|=524288);var i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,t.shiftKey&&(i.Shift=!0),t.ctrlKey&&(i.Ctrl=!0),t.altKey&&(i.Alt=!0);var s=null;Utility.FuncKeysPressed=i;try{s=e.KeyDown(t)}catch(o){}if(s!=null&&s.KeyCode!=null){input.CoreUtility.IsIE()&&(t.keyCode=s.KeyCode),input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1);return}s?input.CoreUtility.IsIE()?t!=null&&(t.returnValue=!0):Utility.ShouldInvokeKeyPress=!0:(Utility.PreventDefault(t),input.CoreUtility.IsIE()||(Utility.ShouldInvokeKeyPress=!1))},e.OnKeyPress=function(t,n){if(!(n.charCode!==118&&n.charCode!==120&&n.charCode!==99||!n.ctrlKey))return;if(input.CoreUtility.IPad&&n.charCode>256)return;if(n.keyCode==46&&n.shiftKey)return;if(t.ImeMode===!0)return;var r=t;if(!input.CoreUtility.IsIE()&&(n.charCode==0||!Utility.ShouldInvokeKeyPress)){if(!Utility.ShouldInvokeKeyPress||(n.keyCode==38||n.keyCode==40)&&r.Type!="Edit"){Utility.ShouldInvokeKeyPress=!0,Utility.PreventDefault(n),r!=null&&r.Type=="Edit"&&r.DropDownObj!=null&&r.DropDownObj.IsKeyFromDropDown&&(r.DropDownObj.IsKeyFromDropDown=!1);return}if(n.keyCode!=13||r.Type!="Edit")return}var i=n.keyCode||n.charCode;if(i!=13||r.Type=="Edit"){var s=String.fromCharCode(i);try{if(input.CharProcess.CharEx.IsSurrogate(s.charAt(0))){r.IsSurrogateKeyPressing=!0;return}}catch(o){}if(s!=null){var u=null;try{u=e.CallKeyPress(t,s,n)}catch(o){}}if(!u){Utility.PreventDefault(n);return}}},e.CallKeyPress=function(e,t,n){if(input.CoreUtility.IsPad())return e.HasInput=!0,!0;var r=e.KeyPress(t,n);return r},e.OnKeyUp=function(e,t){if(e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{var n=e;if(n.IsSurrogateKeyPressing)try{if(n.InputElement!=null){var r=n.InputElement.value,i=n.InputElement.selectionStart,s=r.substr(i-2,i);n.KeyPress(s,t)}}finally{n.IsSurrogateKeyPressing=!1}Utility.FuncKeysPressed={Shift:t.shiftKey,Ctrl:t.ctrlKey,Alt:t.altKey},n.KeyUp(t)}catch(o){}},e.OnCompositionStart=function(e,t){try{if(input.CoreUtility.IsPad()){e.ImeMode=!0;return}e.CompositionStart(t)}catch(n){}},e.OnCompositionUpdate=function(e,t){try{if(input.CoreUtility.IsPad())return;e.CompositionUpdate(t)}catch(n){}},e.OnCompositionEnd=function(e,t){try{if(input.CoreUtility.IsPad()){e.HasInput=!0,e.ImeMode=!1;return}e.CompositionEnd(t)}catch(n){}},e.OnInput=function(e,t){try{if(e.ImeMode===!0||e.HasInput!==!0)return;e.ImeMode=!0,e.HasInput=!1,e.Input(t)}catch(n){}},e.OnMouseOver=function(e,t){try{e.MouseOver&&e.MouseOver()}catch(n){}},e.OnMouseOut=function(e,t){try{e.MouseOut()}catch(n){}},e.OnMouseMove=function(e,t){try{e.MouseMove&&e.MouseMove(t)}catch(n){}},e.OnMouseDown=function(e,t){if(e.ImeMode&&e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{e.MouseDown(t),input.CoreUtility.IsIE()||(Utility.DragStartElementID=e)}catch(n){}},e.OnMouseUp=function(e,t){if(e.ImeMode&&e.ImeMode===!0&&!input.CoreUtility.IsIE8OrBelow())return;try{if(e.MouseUpPointerType!=null&&e.MouseUpPointerType!==4&&e.MouseUpPointerType!=="mouse"){var n={};for(var r in t)n[r]=t[r];setTimeout(function(t){e.MouseUp(n)},300)}else e.MouseUp(t);input.CoreUtility.IsIE()||(Utility.DragStartElementID="")}catch(i){}},e.OnSelectStart=function(e,t){Utility.InnerSelect===!0&&Utility.ShouldFireOnSelectStart==0&&Utility.CancelBubble(t);var n=Utility.GetSelectionText(e.GetInputElement());if(typeof n=="undefined"||n==null)n="";var r=null;try{r=e.SelectStart(n)}catch(i){}r==0&&Utility.PreventDefault(t)},e.OnDblClick=function(e,t){var n=null;try{n=e.DoubleClick()}catch(r){}n||Utility.PreventDefault(t)},e.OnHTML5BeforeCopy=function(e,t){try{Utility.CutCopyPasteEventObject=t?t.originalEvent:t,e.Copy(t)}catch(n){}finally{Utility.CutCopyPasteEventObject=null}},e.OnHTML5Cut=function(e,t){try{var n=e.GetInputElement(),r=n.value,i=n.selectionStart,s=n.selectionEnd;setTimeout(function(){n.value=r,n.selectionStart=i,n.selectionEnd=s,e.Cut(t)},0)}catch(o){}},e.OnHTML5Paste=function(e,t){try{if(input.CoreUtility.chrome&&input.CoreUtility.GetClientOS().toLowerCase()!=="android")Utility.CutCopyPasteEventObject=t?t.originalEvent:t,e.Paste(Utility.GetDataFromClipboard(!0)),Utility.PreventDefault(t);else{var n=e.SelectionStart,r=e.SelectionEnd;setTimeout(function(){input.CoreUtility.GetClientOS().toLowerCase()==="android"&&(e.SelectionStart=n,e.SelectionEnd=r),e.isPasting=!0,e.ImeInput("DirectInput")},0)}}catch(i){}finally{Utility.CutCopyPasteEventObject=null}},e.OnMouseWheel=function(e,t){try{e.MouseWheel(t),e.ShouldCancelMouseWheelDefaultBehavior()&&Utility.PreventDefault(t)}catch(n){}},e.OnDragStart=function(e,t){try{e.DragStart()}catch(n){}},e.OnDragEnd=function(e,t){try{e.DragEnd(t)}catch(n){}},e.OnDrop=function(e,t){try{var n=t.originalEvent.dataTransfer.getData("Text");e.DragDrop(n,t)}catch(r){}},e.OnTouchStart=function(e,t){Utility.TouchStartTime=new Date,Utility.TouchStartEvt=t},e.OnTouchEnd=function(e,t){if(Utility.TouchStartTime!==undefined){Utility.TouchEndTime=new Date;var n=Utility.TouchEndTime.valueOf()-Utility.TouchStartTime.valueOf();if(n>1e3){var r="";try{r=Utility.GetSelectionText(e.GetInputElement())}catch(i){}e.ShowContextMenu(r,Utility.TouchStartEvt),e.GetEnabled()&&Utility.PreventDefault(t)}Utility.TouchStartTime=undefined,Utility.TouchEndTime=undefined}},e.OnDragEnter=function(e,t){try{e.DragEnter()}catch(n){}},e.OnDragLeave=function(e,t){try{e.DragLeave()}catch(n){}},e.OnSelect=function(e,t){try{if(input.CoreUtility.IsPad()&&e.ImeMode)return;e&&e.Focused&&e.Select()}catch(n){}},e.OnPropertyChanged=function(e,t){try{e.PropertyChange(t)}catch(n){}},e.OnMSPointerUp=function(e,t){e.MSPointerUp(t)},e.OnMSPointerDown=function(e,t){try{e.MSPointerDown(t)}catch(n){}},e.OnMSGestureTap=function(e,t){try{e.MSGestureTap(t)}catch(n){}},e.OnEditFieldFocus=function(e,t){if(Utility.IsFocusFromIMControl(e._id,t))if(input.CoreUtility.IsIE()||Utility.HasGetFocus)return;Utility.IsOnFocus=!0,input.CoreUtility.IsIE()||(Utility.HasGetFocus=!0),this.OnFocus(e,t)},e.OnEditFieldLoseFocus=function(t,n){try{var r=t;if(r!=null&&r.Type=="Edit"&&r.IsFocusToDropDownEdit){r.IsFocusToDropDownEdit=!1;return}if(Utility.IsFocusToIMControl(t._id,n))return;if(input.CoreUtility.firefox){if(Utility.IsOnFocus&&input.CoreUtility.IsIE()&&Utility.IsOnActivate&&Utility.IsOnActivateControlID==t._id){Utility.FocusToBorder!=null&&Utility.FocusToBorder==1&&(Utility.FocusToBorder=!1,r.SetInnerFocus());return}Utility.FocusToBorder=!1,input.CoreUtility.IsIE()?Utility.IsOnFocus=!1:Utility.HasGetFocus=!1}e.OnLostFocus(t,n),Utility.FuncKeysPressed={Shift:!1,Ctrl:!1,Alt:!1}}catch(i){}},e.OnFocusOut=function(e,t){Utility.FocusToBorder=!1;if(input.CoreUtility.IsIE()&&t.toElement){var n=t.toElement.id;n==e._id+"_Inside_Div_Container"&&(Utility.FocusToBorder=!0)}if(Utility.IsFocusToIMControl(e._id,t)){input.CoreUtility.IsIE9OrLater()&&(Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id,Utility.IsOnFocus=!0);return}input.CoreUtility.IsIE()&&Utility.IsOnActivate&&(Utility.IsOnActivate=!1,Utility.IsOnActivateControlID=""),Utility.IsOnFocus&&(Utility.IsOnFocus=!1)},e.OnActivate=function(e,t){Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id;if(Utility.IsFocusFromIMControl(e._id,t))return;Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=e._id},e.OnDeActivate=function(e,t){if(Utility.IsFocusToIMControl(e._id,t))return;Utility.IsOnActivate=!1,Utility.IsOnActivateControlID="",Utility.IsOnFocus=!1},e.OnFocus=function(t,n){try{var r=function(){t.Focus(),t.Focused=!0,input.CoreUtility.IsPad()&&(t.IPadSelectionRefreshTimer=setInterval(function(n){e.OnSelect(t,n)},400))};input.CoreUtility.IsIE()?r.call(this):setTimeout(r,0)}catch(i){}},e.OnLostFocus=function(e,t){try{e.LoseFocus(t),e.Focused=!1,input.CoreUtility.IsPad()&&clearInterval(e.IPadSelectionRefreshTimer)}catch(n){}},e}();input.GlobalEventHandler=GlobalEventHandler})(wijmo.input||(wijmo.input={}));var input=wijmo.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){"use strict";function t(e,t){typeof t=="undefined"&&(t=2);var n=""+e+"";if(n.length>t)n=n.substr(n.length-t);else while(n.length<t)n="0"+n;return n}function J(e,t,n){if(e instanceof Date){t||(t="d"),n||(typeof t=="string"?n={}:n=t),typeof t=="string"&&(n.format=t),n.date=e;var r=new $(n),i=new V(r,n.format,!0);return i.toString()}return""}function Q(e,t,n){Globalize.findClosestCulture(t)&&(n=t,t=undefined);var r=Globalize.findClosestCulture(n).calendars.standard,i=r.patterns.d;t?t.length<=1?i=Z(t,r.patterns):i=t:i=r.patterns.d;var s=new $({}),o=new V(s,i,!0);return G(o.descriptors)?Y(e,o,r):Globalize.parseDate(e,i,n)}function G(e){for(var t=0;t<e.length;t++)if(e[t].type===70||e[t].type===71||e[t].type===72||e[t].type===73||e[t].type===74||e[t].type===75)return!0;return!1}function Y(e,t,n){var r="",i="",s=0,o=0,u=1,a=1,f=1,l=0,c=0,h=0,p=function(){return s<e.length&&d+1<t.descriptors.length&&t.descriptors[d+1].type===-1&&e.charAt(s)!==t.descriptors[d+1].liternal||d===t.descriptors.length-1&&s+1<=e.length};for(var d=0;d<t.descriptors.length;d++){var v=!1;for(;s<e.length;){r=e.charAt(s++),i+=r;for(var m=0;m<X.GetEraCount();m++){var g=i.toLocaleLowerCase()===X.GetEraShortNames()[m].toLowerCase()&&t.descriptors[d].type===72,y=i.toLocaleLowerCase()===X.GetEraAbbreviations()[m].toLowerCase()&&t.descriptors[d].type===73,b=i.toLocaleLowerCase()===X.GetEraNames()[m].toLowerCase()&&t.descriptors[d].type===74;if(g||y||b){o=m,i="",v=!0;break}}if(v)break;if(t.descriptors[d].type===-1&&t.descriptors[d].liternal===i){i="";break}switch(t.descriptors[d].type){case 70:case 71:if(p())break;u=parseInt(i,10),isNaN(u)&&(u=1),i="",v=!0;break;case 75:if(p())break;i==="\u5143"?u=1:(u=parseInt(i,10),isNaN(u)&&(u=1)),i="",v=!0;break;case 20:case 25:if(p())break;a=parseInt(i,10),isNaN(a)&&(a=1),i="",v=!0;break;case 26:if(p())break;for(var w=0;w<n.months.namesAbbr.length;w++)if(i.toLocaleLowerCase()===n.months.namesAbbr[w]){a=w+1,i="";break}v=!0;break;case 27:if(p())break;for(var E=0;E<n.months.names.length;E++)if(i.toLocaleLowerCase()===n.months.names[E]){a=E+1,i="";break}v=!0;break;case 30:case 31:if(p())break;f=parseInt(i,10),isNaN(f)&&(f=1),i="",v=!0;break;case 45:case 46:case 47:case 48:if(p())break;l=parseInt(i,10),isNaN(l)&&(l=1),i="",v=!0;break;case 51:case 50:if(p())break;c=parseInt(i,10),isNaN(c)&&(c=1),i="",v=!0;break;case 61:case 60:if(p())break;h=parseInt(i,10),isNaN(h)&&(h=1),i="",v=!0;break;case 250:case 251:if(p())break;for(var S=0;S<n.PM.length;S++)if(i.toLocaleLowerCase()===n.PM[S]){l+=12;break}i="",v=!0;break;case 1:case 2:case 10:case 100:case 101:case 80:if(p())break;i="",v=!0;break;default:}if(v)break}}return X.ConvertToGregorianDate(o,u,a,f,l,c,h,!1)}function Z(e,t){var n=e;if(e&&e.length<=1)switch(e){case"":case"d":n=t.patterns.d;break;case"D":n=t.patterns.D;break;case"f":n=t.patterns.D+" "+t.patterns.t;break;case"F":n=t.patterns.D+" "+t.patterns.T;break;case"g":n=t.patterns.d+" "+t.patterns.t;break;case"G":n=t.patterns.d+" "+t.patterns.T;break;case"m":n=t.patterns.M;break;case"M":n=t.patterns.M;break;case"s":n=t.patterns.S;break;case"t":n=t.patterns.t;break;case"T":n=t.patterns.T;break;case"u":n=t.patterns.S;break;case"U":n=t.patterns.D+" "+t.patterns.T;break;case"y":n=t.patterns.Y;break;case"Y":n=t.patterns.Y;break;case"r":case"R":n="ddd, dd MMM yyyy HH:mm:ss G\\M\\T"}return n}function et(e,t,n,r,i){var s=Q(e,r,i);return s>=t&&s<=n}e.paddingZero=t,function(e){e[e.liternal=-1]="liternal",e[e.OneDigitYear=1]="OneDigitYear",e[e.TwoDigitYear=2]="TwoDigitYear",e[e.FourDigitYear=10]="FourDigitYear",e[e.TwoDigitMonth=20]="TwoDigitMonth",e[e.Month=25]="Month",e[e.AbbreviatedMonthNames=26]="AbbreviatedMonthNames",e[e.MonthNames=27]="MonthNames",e[e.EraYear=70]="EraYear",e[e.TwoEraYear=71]="TwoEraYear",e[e.EraName=72]="EraName",e[e.TwoEraName=73]="TwoEraName",e[e.ThreeEraName=74]="ThreeEraName",e[e.EraYearBig=75]="EraYearBig",e[e.AD=80]="AD",e[e.TwoDigityDayOfMonth=30]="TwoDigityDayOfMonth",e[e.DayOfMonth=31]="DayOfMonth",e[e.AbbreviatedDayNames=100]="AbbreviatedDayNames",e[e.DayNames=101]="DayNames",e[e.h=45]="h",e[e.hh=46]="hh",e[e.H=47]="H",e[e.HH=48]="HH",e[e.ShortAmPm=250]="ShortAmPm",e[e.AmPm=251]="AmPm",e[e.mm=50]="mm",e[e.m=51]="m",e[e.ss=60]="ss",e[e.s=61]="s"}(e.DescriptorType||(e.DescriptorType={}));var n=e.DescriptorType,r=function(){function e(e,t){this.id=t,this.startIndex=0,this.name=null,this.type=-1,this.maxLen=2,this.formatString="",this._txtProvider=e,this.startIndex=0}return e.prototype.getText=function(){return null},e.prototype.getRealText=function(e){return this._txtProvider.inputWidget.options.date==null?this.formatString:e},e.prototype.setText=function(e,t,n,r){return!1},e.prototype.inc=function(){},e.prototype.dec=function(){},e.prototype.needAdjustInsertPos=function(){return!0},e.prototype.reachMaxLen=function(){var e=this.getText();do{if(e.charAt(0)!=="0")break;e=e.slice(1)}while(e.length>0);return e.length>=this.maxLen},e}();e._iDateDescriptor=r;var i=function(e){function t(t,n){e.call(this,t,n),this.liternal="",this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){return this.liternal},t}(r),s=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDate(),t=this._txtProvider.inputWidget._getRealEraMinDate(),n=this._txtProvider.inputWidget._getRealEraMaxDate();if(X.Equal(e,n))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(t.valueOf()));else{var r=this._txtProvider.inputWidget._getInnerIncrement();this._txtProvider.setYear(this._txtProvider.getYear()+r,null,!0),this._txtProvider.getDate()>n&&this._txtProvider.setDate(new Date(n.valueOf()))}},t.prototype.dec=function(){var e=this._txtProvider.getDate(),t=this._txtProvider.inputWidget._getRealEraMinDate(),n=this._txtProvider.inputWidget._getRealEraMaxDate();if(X.Equal(e,t))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(n.valueOf()));else{var r=this._txtProvider.inputWidget._getInnerIncrement();this._txtProvider.setYear(this._txtProvider.getYear()-r,null,!0),this._txtProvider.getDate()<t&&this._txtProvider.setDate(new Date(t.valueOf()))}},t}(r),o=function(e){function t(t,n){e.call(this,t,n),this.name="Era Year",this.formatString="e",this.type=70}return __extends(t,e),t.prototype.getText=function(){var e=X.GetEraDate(this._txtProvider.getDate());return e.eraYear===-1?"":(e.eraYear=e.eraYear>99?99:e.eraYear,this.getRealText(String(e.eraYear)))},t.prototype.setText=function(e,t,n){if(isNaN(parseInt(e)))return!1;var r=this._txtProvider.getDate(),i=X.GetEraDate(r);if(i.eraYear!==-1){var s=parseInt(e);s>=X.GetEraYears()[i.era]&&(s=X.GetEraYears()[i.era]);var o=this._txtProvider.inputWidget.options.date==null;o&&(s=parseInt(e));var u=X.ConvertToGregorianDate(i.era,s,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1);if(i.era<X.GetEraCount()-1){var a=X.GetEraDates()[i.era+1];u>a&&(s=X.GetEraYears()[i.era]-1,u=X.ConvertToGregorianDate(i.era,s,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1))}return this._txtProvider.setDate(u),!0}return!1},t}(s),u=function(e){function n(t,n){e.call(this,t,n),this.name="Two Era Year",this.formatString="ee",this.type=71}return __extends(n,e),n.prototype.getText=function(){var e=X.GetEraDate(this._txtProvider.getDate());return e.eraYear===-1?"":(e.eraYear=e.eraYear>99?99:e.eraYear,this.getRealText(t(e.eraYear,2)))},n.prototype.setText=function(e,t,n){if(isNaN(parseInt(e)))return!1;var r=this._txtProvider.getDate(),i=X.GetEraDate(r);if(i.eraYear!==-1){var s=String(i.eraYear)+e,o=parseInt(s.substring(s.length-2,s.length));o>X.GetEraYears()[i.era]&&(o=X.GetEraYears()[i.era]);var u=this._txtProvider.inputWidget.options.date==null;u&&(o=parseInt(e));var a=X.ConvertToGregorianDate(i.era,o,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1);if(i.era<X.GetEraCount()-1){var f=X.GetEraDates()[i.era+1];a>f&&(o=X.GetEraYears()[i.era]-1,a=X.ConvertToGregorianDate(i.era,o,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1))}return this._txtProvider.setDate(a),!0}return!1},n}(s),a=function(e){function t(t,n){e.call(this,t,n),this.name="Era Year Big",this.formatString="E",this.type=75}return __extends(t,e),t.prototype.getText=function(){var t=e.prototype.getText.call(this);return t==1?"\u5143":t},t}(o),f=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDate(),t=X.GetEraDate(e);if(t.era===-1)return;var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();if(X.Equal(e,r))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(n.valueOf()));else if(t.era>=X.GetEraCount()-1)this._txtProvider.setDate(new Date(r.valueOf()));else{var i=t.era+this._txtProvider.inputWidget._getInnerIncrement();i=i>X.GetEraCount()-1?X.GetEraCount()-1:i;var s=t.eraYear>X.GetEraYears()[i]?X.GetEraYears()[i]:t.eraYear,o=X.ConvertToGregorianDate(i,s,e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),!0);o=o==null?X.GetEraDates()[i]:o,o>r?this._txtProvider.setDate(new Date(r.valueOf())):this._txtProvider.setDate(o)}},t.prototype.dec=function(){var e=this._txtProvider.getDate(),t=X.GetEraDate(e);if(t.era===-1)return;var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();if(X.Equal(e,n))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(r.valueOf()));else if(t.era==0)this._txtProvider.setDate(new Date(n.valueOf()));else{var i=t.era-this._txtProvider.inputWidget._getInnerIncrement();i=i<0?0:i;var s=t.eraYear>X.GetEraYears()[i]?X.GetEraYears()[i]:t.eraYear,o=X.ConvertToGregorianDate(i,s,e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),!0);o==null&&(o=new Date(X.GetEraDates()[i+1]),o.setDate(o.getDate()-1)),o>r?this._txtProvider.setDate(new Date(n.valueOf())):this._txtProvider.setDate(o)}},t}(r),l=function(e){function t(t,n){e.call(this,t,n),this.name="Era Name",this.formatString="g",this.type=72}return __extends(t,e),t.prototype.getText=function(){var e=X.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(X.GetEraSymbols()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<X.GetEraCount();i++)if(r.toLowerCase()===X.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===X.GetEraShortNames()[i].toLowerCase())break;if(i==X.GetEraCount())return!0;var s=this._txtProvider.getDate(),o=X.GetEraDate(s);if(o.era===-1)return!0;var u=o.eraYear>X.GetEraYears()[i]?X.GetEraYears()[i]:o.eraYear,a=X.ConvertToGregorianDate(i,u,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);a=a==null?X.GetEraDates()[i]:a;if(i<X.GetEraCount()-1){var f=X.GetEraDates()[i+1];a=a>f?f:a}return this._txtProvider.setDate(a),!0},t}(f),c=function(e){function t(t,n){e.call(this,t,n),this.name="Two Era Name",this.formatString="gg",this.type=73}return __extends(t,e),t.prototype.getText=function(){var e=X.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(X.GetEraAbbreviations()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<X.GetEraCount();i++)if(r.toLowerCase()===X.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===X.GetEraShortNames()[i].toLowerCase()||e.toLowerCase()===X.GetEraAbbreviations()[i].toLowerCase())break;if(i==X.GetEraCount())return!0;var s=this._txtProvider.getDate(),o=X.GetEraDate(s);if(o.era===-1)return!0;var u=o.eraYear>X.GetEraYears()[i]?X.GetEraYears()[i]:o.eraYear,a=X.ConvertToGregorianDate(i,u,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);a=a==null?X.GetEraDates()[i]:a;if(i<X.GetEraCount()-1){var f=X.GetEraDates()[i+1];a=a>f?f:a}return this._txtProvider.setDate(a),!0},t}(f),h=function(e){function t(t,n){e.call(this,t,n),this.name="Three Era Name",this.formatString="ggg",this.type=74}return __extends(t,e),t.prototype.getText=function(){var e=X.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(X.GetEraNames()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<X.GetEraCount();i++)if(r.toLowerCase()===X.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===X.GetEraShortNames()[i].toLowerCase()||e.toLowerCase()===X.GetEraAbbreviations()[i].toLowerCase()||e.toLowerCase()===X.GetEraNames()[i].toLowerCase())break;if(i==X.GetEraCount())return!1;var s=this._txtProvider.getDate(),o=X.GetEraDate(s);if(o.era===-1)return!0;var u=o.eraYear>X.GetEraYears()[i]?X.GetEraYears()[i]:o.eraYear,a=X.ConvertToGregorianDate(i,u,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);a=a==null?X.GetEraDates()[i]:a;if(i<X.GetEraCount()-1){var f=X.GetEraDates()[i+1];a=a>f?f:a}return this._txtProvider.setDate(a),!0},t}(f),p=function(e){function t(t,n){e.call(this,t,n),this.name="AD",this.formatString="A",this.type=80}return __extends(t,e),t.prototype.getText=function(){return"A.D."},t}(r),d=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){e.prototype.inc.call(this);var t=this._txtProvider.getDate(),n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),s=t.getHours(),o=t.getMinutes(),u=t.getSeconds(),a=r+this._txtProvider.inputWidget._getInnerIncrement(),f=X.DaysInMonth(n,a+1);i>f&&(i=f);var l=new Date(n,a,i,s,o,u);if(this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),h=this._txtProvider.inputWidget._getRealEraMaxDate();l>=h?X.Equal(this._txtProvider.getDate(),h)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(h):this._txtProvider.setDate(l)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),h=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(l,!0)?this._txtProvider.setDate(l):X.Equal(this._txtProvider.getDate(),h)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(c):this._txtProvider.setDate(h)}},t.prototype.dec=function(){e.prototype.inc.call(this);var t=this._txtProvider.getDate(),n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),s=t.getHours(),o=t.getMinutes(),u=t.getSeconds(),a=r-this._txtProvider.inputWidget._getInnerIncrement(),f=X.DaysInMonth(n,a+1);i>f&&(i=f);var l=new Date(n,a,i,s,o,u);n==1&&(l.setFullYear(1),a<0&&l.setMonth(a));if(this._txtProvider._isEraFormatExist()){var c=this._txtProvider.inputWidget._getRealEraMinDate(),h=this._txtProvider.inputWidget._getRealEraMaxDate();l<c?X.Equal(this._txtProvider.getDate(),c)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(h):this._txtProvider.setDate(c):this._txtProvider.setDate(l)}else{var c=this._txtProvider.inputWidget._getRealMinDate(),h=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(l,!0)?this._txtProvider.setDate(l):X.Equal(this._txtProvider.getDate(),c)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(h):this._txtProvider.setDate(c)}},t.prototype.setText=function(e,t,n){parseInt(e)>12&&(e=e.substr(e.length-1,1));var r=this._txtProvider.setMonth(e,t,n);if(r&&this._txtProvider._isEraFormatExist()){var i=this._txtProvider.inputWidget._getRealEraMinDate(),s=this._txtProvider.inputWidget._getRealEraMaxDate(),o=this._txtProvider.getDate();o>s?this._txtProvider.setDate(s):o<i&&this._txtProvider.setDate(i)}return r},t}(r),v=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit month",this.formatString="MM",this.type=20}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return this.getRealText(e.length===1?"0"+e:e)},t.prototype.setText=function(t,n,r){return t==="0"?!0:e.prototype.setText.call(this,t,n,r)},t}(d),m=function(e){function t(t,n){e.call(this,t,n),this.name="month",this.formatString="M",this.type=25}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return this.getRealText(e)},t}(d),g=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedMonthNames",this.formatString="MMM",this.type=26,this.maxLen=26}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.months.namesAbbr[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider.inputWidget._getCulture().calendars.standard;return r=this._txtProvider.findAlikeArrayItemIndex(i.months.namesAbbr,e),r===-1?!1:this._txtProvider.setMonth(r+1,t,n)},t}(d),y=function(e){function t(t,n){e.call(this,t,n),this.name="MonthNames",this.formatString="MMMM",this.type=27,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.months.names[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i;if(n&&n.isfullreset)r=1;else{i=this._txtProvider._getCulture(),r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.months.names,e);if(r===-1)return!1}return this._txtProvider.setMonth(r+1,t,n)},t}(d),b=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDayOfMonth()+this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setDate(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getDayOfMonth()-this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setDate(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){var r=this._txtProvider.getDate(),i=X.DaysInMonth(r.getFullYear(),r.getMonth()+1);parseInt(e)>i&&(e=i+"");var s=this._txtProvider.setDayOfMonth(e,t,n);if(s&&this._txtProvider._isEraFormatExist()){var o=this._txtProvider.inputWidget._getRealEraMinDate(),u=this._txtProvider.inputWidget._getRealEraMaxDate(),r=this._txtProvider.getDate();r>u?this._txtProvider.setDate(u):r<o&&this._txtProvider.setDate(o)}return s},t}(r),w=function(e){function n(t,n){e.call(this,t,n),this.name="Two-digit day of month",this.formatString="dd",this.type=30}return __extends(n,e),n.prototype.getText=function(){return this.getRealText(t(this._txtProvider.getDayOfMonth()))},n.prototype.setText=function(t,n,r){return t==="0"?!0:e.prototype.setText.call(this,t,n,r)},n}(b),E=function(e){function t(t,n){e.call(this,t,n),this.name="Day of month",this.formatString="d",this.type=31}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfMonth();return this.getRealText(""+e+"")},t}(b),S=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedDayNames",this.formatString="ddd",this.type=100,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.days.namesAbbr[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.namesShort,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(b),x=function(e){function t(t,n){e.call(this,t,n),this.name="DayNames",this.formatString="dddd",this.type=101,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.days.names[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.names,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(b),T=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getYear()+this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setFullYear(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?X.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):X.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(r)}},t.prototype.dec=function(){var e=this._txtProvider.getYear()- +this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setFullYear(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?X.Equal(this._txtProvider.getDate(),n)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):X.Equal(this._txtProvider.getDate(),n)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(n)}},t}(r),N=function(e){function n(t,n){e.call(this,t,n)}return __extends(n,e),n.prototype.setText=function(e,n,r){e=t(e);var i=t(this._txtProvider.getYear(),4),s,o,u,a,f;return e==="00"&&(s=this._txtProvider.getMonth(),o=this._txtProvider.getDayOfMonth(),u=this._txtProvider.getHours(),a=this._txtProvider.getMinutes(),f=this._txtProvider.getSeconds(),s===1&&o===1&&!u&&!a&&!f&&(i="0001",e="01")),i.length>=2&&(i=i.substr(0,2)+e.substr(0,2)),this._txtProvider.setYear(parseInt(i),r,!1)},n}(T),C=function(e){function n(t,n){e.call(this,t,n),this.name="Four-digit year",this.formatString="yyyy",this.type=10,this.maxLen=4}return __extends(n,e),n.prototype.getText=function(){return this.getRealText(t(this._txtProvider.getYear(),4))},n.prototype.setText=function(e,t,n,r){if(r&&n){e*=1,e%=100;var i=2e3;this._txtProvider.inputWidget.options.startYear&&(i=this._txtProvider.inputWidget.options.startYear);var s=i%100,o=i-s;e>=s?e=o+e:e=o+e+100}return this._txtProvider.setYear(e,n,!1)},n}(T),k=function(e){function n(t,n){e.call(this,t,n),this.name="One-digit year",this.formatString="y",this.type=1}return __extends(n,e),n.prototype.getText=function(){var e=t(this._txtProvider.getYear());return e[0]==="0"&&(e=e[1]),this.getRealText(e)},n}(N),L=function(e){function n(t,n){e.call(this,t,n),this.name="Two-digit year",this.formatString="yy",this.type=2}return __extends(n,e),n.prototype.getText=function(){return this._txtProvider.inputWidget.isFocused()&&this._txtProvider.inputWidget.options.date==null?"yy":this.getRealText(t(this._txtProvider.getYear(),2))},n}(N),A=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getHours()+this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setHours(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getHours()-this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setHours(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t}(r),O=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){var r=this._txtProvider.getHours();return r>12&&(e=e*1+12),this._txtProvider.setHours(e,t)},t}(A),M=function(e){function t(t,n){e.call(this,t,n),this.name="h",this.formatString="h",this.type=45}return __extends(t,e),t.prototype.getText=function(){if(this._txtProvider.inputWidget.isFocused()&&this._txtProvider.inputWidget.options.date==null)return"h";var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),e==12&&this._txtProvider.inputWidget.options.hour12As0&&(e=0),this.getRealText(""+e+"")},t}(O),_=function(e){function n(t,n){e.call(this,t,n),this.name="hh",this.formatString="hh",this.type=46}return __extends(n,e),n.prototype.getText=function(){var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),e==12&&this._txtProvider.inputWidget.options.hour12As0&&(e=0),this.getRealText(t(e,2))},n}(O),D=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){return this._txtProvider.setHours(e,t)},t}(A),P=function(e){function t(t,n){e.call(this,t,n),this.name="H",this.formatString="H",this.type=47}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e==0&&!this._txtProvider.inputWidget.options.midnightAs0&&(e=24),this.getRealText(""+e+"")},t}(D),H=function(e){function n(t,n){e.call(this,t,n),this.name="HH",this.formatString="HH",this.type=48}return __extends(n,e),n.prototype.getText=function(){var e=this._txtProvider.getHours();return e==0&&!this._txtProvider.inputWidget.options.midnightAs0&&(e=24),this.getRealText(t(e,2))},n}(D),B=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.dec=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.setText=function(e,t,n){var r;return e.toLowerCase().indexOf("a")>=0?(r=this._txtProvider.getHours()%12,this._txtProvider.setHours(r,!0)):e.toLowerCase().indexOf("p")>=0&&(r=this._txtProvider.getHours()%12+12,this._txtProvider.setHours(r,!0)),!0},t}(r),j=function(e){function t(t,n){e.call(this,t,n),this.name="t",this.formatString="t",this.type=250}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=this._txtProvider.inputWidget._getInnerAmDesignator(),r=this._txtProvider.inputWidget._getInnerPmDesignator(),i=e<12?n:r;return this.getRealText(i.charAt(0)||" ")},t}(B),F=function(e){function t(t,n){e.call(this,t,n),this.name="tt",this.formatString="tt",this.type=251}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=this._txtProvider.inputWidget._getInnerAmDesignator(),r=this._txtProvider.inputWidget._getInnerPmDesignator(),i=e<12?n:r;return i.length<=0&&(i=" "),this.getRealText(i)},t}(B),I=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getMinutes()+this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setMinutes(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getMinutes()-this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setMinutes(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setMinutes(e,t)},t}(r),q=function(e){function n(t,n){e.call(this,t,n),this.name="mm",this.formatString="mm",this.type=50}return __extends(n,e),n.prototype.getText=function(){return this.getRealText(t(this._txtProvider.getMinutes()))},n}(I),R=function(e){function t(t,n){e.call(this,t,n),this.name="m",this.formatString="m",this.type=51,this.delta=12}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(this._txtProvider.getMinutes().toString())},t}(I),U=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getSeconds()+this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setSeconds(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getSeconds()-this._txtProvider.inputWidget._getInnerIncrement(),t=new Date(this._txtProvider.getDate().valueOf());t.setSeconds(e);if(this._txtProvider._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setSeconds(e,t)},t}(r),z=function(e){function n(t,n){e.call(this,t,n),this.name="ss",this.formatString="ss",this.type=60}return __extends(n,e),n.prototype.getText=function(){return this.getRealText(t(this._txtProvider.getSeconds()))},n}(U),W=function(e){function t(t,n){e.call(this,t,n),this.name="s",this.formatString="s",this.type=61}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(this._txtProvider.getSeconds().toString())},t}(U),X=function(){function e(){}return e.IsValidEraDate=function(e){return e<this.GetEraMin()||e>this.GetEraMax()?!1:!0},e.ConvertToGregorianYear=function(e,t,n){return e<0||e>=this.GetEraCount()||t<1||n&&t>this.GetEraYears()[e]?-1:this.GetEraDates()[e].getFullYear()+t-1},e.GetEraDates=function(){if(window.eras!=undefined){var e=new Array;for(var t=0;t<window.eras.length;t++){var n=new Date(window.eras[t].startDate.replace(/-/g,"/"));e[t]=n}return e}return this.EraDates},e.GetEraNames=function(){var e=new Array;if(window.eras!=undefined){for(var t=0;t<window.eras.length;t++)e[t]=window.eras[t].name;return e}for(var t=0;t<this.EraCount;t++)e[t]=this.EraNames[t+2*this.EraCount];return e},e.GetEraSymbols=function(){var e=new Array;if(window.eras!=undefined){for(var t=0;t<window.eras.length;t++)e[t]=window.eras[t].symbol;return e}for(var t=0;t<this.EraCount;t++)e[t]=this.EraNames[t];return e},e.GetEraAbbreviations=function(){var e=new Array;if(window.eras!=undefined){for(var t=0;t<window.eras.length;t++)e[t]=window.eras[t].abbreviation;return e}for(var t=0;t<this.EraCount;t++)e[t]=this.EraNames[t+this.EraCount];return e},e.GetEraShortNames=function(){var e=new Array;if(window.eras!=undefined){for(var t=0;t<window.eras.length;t++)e[t]=window.eras[t].shortcuts.split(",")[1];return e}for(var t=0;t<this.EraCount;t++)e[t]=this.EraNames[t];return e},e.GetEraShortcuts=function(){var e=new Array;if(window.eras!=undefined){for(var t=0;t<window.eras.length;t++)e[t]=window.eras[t].shortcuts.split(",")[0];return e}for(var t=0;t<this.EraCount;t++)e[t]=this.EraKeys[t];return e},e.GetEraMax=function(){if(window.eras!=undefined&&window.eras.length>0){var e=new Date(window.eras[window.eras.length-1].startDate.replace(/-/g,"/"));return e.setFullYear(e.getFullYear()+99),e}return this.EraMax},e.GetEraMin=function(){if(window.eras!=undefined&&window.eras.length>0){var e=new Date(window.eras[0].startDate.replace(/-/g,"/"));return e}return this.EraMin},e.GetEraCount=function(){return window.eras!=undefined?window.eras.length:this.EraCount},e.GetEraYears=function(){if(window.eras!=undefined){var e=new Array;for(var t=1;t<window.eras.length;t++){var n=new Date(window.eras[t-1].startDate.replace(/-/g,"/")),r=new Date(window.eras[t].startDate.replace(/-/g,"/"));e[t-1]=r.getFullYear()-n.getFullYear()+1}return e[t-1]=99,e}return this.EraYears},e.ConvertToGregorianDate=function(e,t,n,r,i,s,o,u){var a=this.ConvertToGregorianYear(e,t,u);if(a<1||a>9999)return null;if(n<1||n>12)return null;var f=this.DaysInMonth(a,n);if(r<1||r>f)return null;if(i<0||i>23)return null;if(s<0||s>59)return null;if(o<0||o>59)return null;var l=new Date(a,n-1,r,i,s,o);if(u){var c=this.GetEraDates()[e],h=e+1!=this.GetEraCount()?this.AddMilliseconds(this.GetEraDates()[e+1],-1):this.GetEraMax();if(l<c||l>h)return null}return l},e.String2Date=function(e){if(e==null||e.Length==0)return null;var t=new Date(Date.parse(e));return t},e.ToString=function(e,t,n,r){var i=e+"";if(n!=null){while(i.length<t)r?i+=n:i=n+i;return i}while(i.length<t)i+=e+"";return i},e.Date2String=function(t,n,r,i){var s="";try{n==1?r==1?s=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate():i==1?s=t.getHours()+":"+e.ToString(t.getMinutes(),2,"0")+":"+e.ToString(t.getSeconds(),2,"0"):s=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+e.ToString(t.getMinutes(),2,"0")+":"+e.ToString(t.getSeconds(),2,"0"):r==1?s=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear():i==1?s=t.getHours()+":"+e.ToString(t.getMinutes(),2,"0")+":"+e.ToString(t.getSeconds(),2,"0"):s=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+e.ToString(t.getMinutes(),2,"0")+":"+e.ToString(t.getSeconds(),2,"0")}catch(o){s=""}return s},e.Date2Long=function(e){try{return(e.getFullYear()*100+e.getMonth()+1)*100+e.getDate()}catch(t){return 0}},e.Date2Number=function(e){return e==null?0:((((e.getFullYear()*100+e.getMonth()+1)*100+e.getDate())*100+e.getHours())*100+e.getMinutes())*100+e.getSeconds()},e.Long2Date=function(e){return new Date(Math.floor(e/1e4),Math.floor(e%1e4/100)-1,e%100)},e.GetEraDate=function(e){var t=new Object;t.era=-1,t.eraYear=-1;if(!this.IsValidEraDate(e))return t;for(var n=0;n<this.GetEraCount();n++){var r=n+1!=this.GetEraCount()?this.GetEraDates()[n+1]:this.AddMilliseconds(this.GetEraMax(),1);if(e<r){t.era=n,t.eraYear=e.getFullYear()-this.GetEraDates()[n].getFullYear()+1;break}}return t},e.MakeDate=function(e,t,n,r){var i=new Date;return i=this.ConvertToGregorianDate(e,t,n,r,0,0,0,!0),i==null?-1:i},e.GetValidMonthRange=function(e,t){var n={};return n.min=1,n.max=12,e==-1||t==-1?n:(t==1?n.min=this.GetEraDates()[e].getMonth()+1:t==this.EraYears[e]&&e<this.EraCount-1&&(n.max=this.AddMilliseconds(this.GetEraDates()[e+1],-1).getMonth()+1),n)},e.GetValidDayRange=function(e,t,n){var r=new Object;r.min=1,r.max=this.DaysInMonth(this.ConvertToGregorianYear(e,t,!0),n);var i=this.GetEraDates()[e],s=e<this.GetEraCount()-1?this.AddMilliseconds(this.GetEraDates()[e+1],-1):this.GetEraMax();return e==-1||t==-1?r:(t==1&&n==i.getMonth()+1?r.min=i.getDate():t==this.EraYears[e]&&n==s.getMonth()+1&&(r.max=s.getDate()),r)},e.IsLeapYear=function(e){return e%400==0||e%4==0&&e%100!=0?!0:!1},e.DayOfYear=function(e,t,n){var r=0;for(var i=1;i<t;i++)r+=this.DaysInMonth(e,i);return r+=n,r},e.DaysInMonth=function(e,t){if(t>12)e+=Math.floor(t/12),t%=12;else if(t<0){var n=t*-1;e-=Math.ceil(n/12),t=12-n%12}switch(t){case 2:return this.IsLeapYear(e)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},e.Equal=function(e,t,n){if(e==null&&t==null)return!0;if(e==null)return!1;if(t==null)return!1;try{return n?e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()?!0:!1:e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()?!0:!1}catch(r){return!1}},e.YearMonthEqual=function(e,t){if(e==null&&t==null)return!0;if(e==null)return!1;if(t==null)return!1;try{return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()?!0:!1}catch(n){return!1}},e.SetDate=function(e,t,n){var r=new Date,i=12e4;if(e*12+t>i)r=new Date(9999,11,31);else if(e*12+t<100)r=new Date(100,0,1);else{var s=this.DaysInMonth(e,t);n>s&&(n=s),r=new Date(e,t-1,n)}return r},e.SetFullDate=function(e,t,n){var r=new Date;r.setDate(1);var i=12e4,s=this.DaysInMonth(e,t);return t>0&&t<12&&n>s&&(n=s),r.setFullYear(e),r.setMonth(t-1),r.setDate(n),r},e.SetFullDateByDate=function(e){var t=new Date;return t.setDate(1),t.setFullYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(e.getDate()),t.setHours(0,0,0,0),t},e.LYearDays=function(e){var t,n=348;for(t=32768;t>8;t>>=1)n+=this.LunarInfo[e-1960]&t?1:0;return n+this.leapDays(e)},e.leapDays=function(e){return this.LeapMonth(e)?this.LunarInfo[e-1960]&65536?30:29:0},e.LeapDays=function(e){return this.LeapMonth(e)?this.LunarInfo[e-1960]&65536?30:29:0},e.LeapMonth=function(e){return this.LunarInfo[e-1960]&15},e.MonthDays=function(e,t){return this.LunarInfo[e-1960]&65536>>t?30:29},e.GetRokuyou=function(e){if(e-this.RokuyouMin<0||e-this.RokuyouMax>0)return;var t,n=0,r=0,i=new Date(1960,0,28),s=Math.round((e-i)/864e5);for(t=1960;t<2050&&s>0;t++)r=this.LYearDays(t),s-=r;s<0&&(s+=r,t--),this.year=t,n=this.LeapMonth(t),this.isLeap=!1;for(t=1;t<13&&s>0;t++)n>0&&t==n+1&&this.isLeap==0?(--t,this.isLeap=!0,r=this.LeapDays(this.year)):r=this.MonthDays(this.year,t),this.isLeap==1&&t==n+1&&(this.isLeap=!1),s-=r;s==0&&n>0&&t==n+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--t)),s<0&&(s+=r,--t),this.month=t,this.day=s+1;var o=(this.month+this.day-2)%6,u=new Date(1996,6,15),a=new Date(1996,7,13);this.IsDateInRange(e,u,a)&&(o=(6+o-1)%6);var f=new Date(1996,8,12),l=new Date(1996,9,11);this.IsDateInRange(e,f,l)&&(o=(6+o-1)%6);var c=new Date(2033,7,25),h=new Date(2033,11,21);this.IsDateInRange(e,c,h)&&(o=(o+1)%6),this.Equal(e,u)&&(o=(6+o-1)%6),this.Equal(e,f)&&(o=(6+o-1)%6);var p;return p},e.IsDateInRange=function(e,t,n){var r=e.getYear(),i=t.getYear(),s=n.getYear(),o=e.getMonth(),u=t.getMonth(),a=n.getMonth(),f=e.getDate(),l=t.getDate(),c=n.getDate(),h=r*1e4+o*100+f,p=i*1e4+u*100+l,d=s*1e4+a*100+c;return h>=p&&h<=d},e.GetRokuyouText=function(e){var t=new Array;t=this.RokuyouTextArray.slice(0);switch(e){default:return""}},e.DaysInSpecialWeek=function(e,t,n){var r=new Array,i=this.DaysInMonth(e,t+1),s=new Date(e,t,1),o;for(var u=1;u<=i;u++){s.setDate(u);if(s.getDay()==n){var a=new Date(e,t,u);r.push(a),o=u;break}}o+=7;while(o<=i){s.setDate(o);var f=new Date(e,t,o);r.push(f),o+=7}return r},e.GetDaysByFirstWeekday=function(e){var t=new Array;t.push(e);var n=new Date(e);while(n.getDate()+7<=this.DaysInMonth(e.getFullYear(),e.getMonth()+1))n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7),t.push(n);return t},e.AddMilliseconds=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());return n.setMilliseconds(n.getMilliseconds()+t),new Date(n.valueOf())},e.GetWeekIndexByDate=function(e){return Math.floor(e.getDate()/7)},e.EraDates=new Array(new Date(1868,8,8),new Date(1912,6,30),new Date(1926,11,25),new Date(1989,0,8)),e.EraCount=4,e.EraYears=new Array(45,15,64,99),e.EraMax=new Date(2087,11,31,23,59,59),e.EraMin=new Date(1868,8,8),e.EraKeys=new Array("1","2","3","4","m","t","s","h"),e.EraIndices=new Array(0,1,2,3,0,1,2,3),e.DateLongFormat="yyyyMMddHHmmss",e.EraNames=new Array("M","T","S","H","\u660e","\u5927","\u662d","\u5e73","\u660e\u6cbb","\u5927\u6b63","\u662d\u548c","\u5e73\u6210"),e.WeekDays=new Array("\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"),e.MonthNames=new Array("1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"),e.ShortWeekDays=new Array("\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"),e.ShortMonthNames=new Array("1","2","3","4","5","6","7","8","9","10","11","12"),e.RokuyouTextArray=new Array("\u5148\u52dd","\u53cb\u5f15","\u5148\u8ca0","\u4ecf\u6ec5","\u5927\u5b89","\u8d64\u53e3"),e.RokuyouTextArrayEn=new Array("Senshou","Tomobiki","Senbu","Butsumetsu","Taian","Shakkou"),e.DefaultTwoDigitYear=2029,e.Digits=2,e.EraYearMax=99,e.RokuyouMin=new Date(1960,0,28),e.RokuyouMax=new Date(2050,0,22),e.LunarInfo=new Array(44710,43856,19808,43748,42352,21104,29283,55632,27479,22176,39632,19925,19168,42208,54484,53840,54680,46400,54944,103846,38320,18864,43444,42160,45690,27216,27968,46934,11104,38320,19317,18800,25776,29859,59984,28056,21968,11104,38629,37600,51552,59732,54432,55888,30034,22208,43959,9680,37584,51893,43344,46240,111779,46416,21977,19360,42416,21877,21168,43344,47444,27296,44368,27474,19296,42726,42352,21104,27237,55600,23200,46755,38608,19415,19168,42192,118998,53840,54560,56645,46752,38608,21938,18864,42359,42160,45648,111189,27968,44448),e}();e.DateTimeInfo=X;var V=function(){function e(e,t,n){this.inputWidget=e,this.maskPartsCount=0,this.isDisplayFormat=!0,this.pattern="M/d/yyyy",this.descriptors=new Array(0),this.desPostions=new Array(0),this.fields=new Array(0),this.isDisplayFormat=n,this._setFormat(t)}return e.prototype._parseFormat=function(e){var t=[],n="",r="",i=!1,s=!1,o,u;for(o=0;o<e.length;o++){u=e.charAt(o);if(s){t.push(this.createDescriptor(-1,u)),n="",s=!1;continue}if(u==="\\"){s=!0,n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n="");continue}if(u==="'"){i?(i=!1,n=""):(i=!0,n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n=""));continue}if(i){t.push(this.createDescriptor(-1,u)),n="";continue}o||(r=u),r!==u&&n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n=""),n+=u,r=u}return n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r))),t},e.prototype._parseFormatToPattern=function(e){var t=this.inputWidget._getCulture().calendar,n=t.patterns.d;if(e.length<=1)switch(e){case"":case"d":n=t.patterns.d;break;case"D":n=t.patterns.D;break;case"f":n=t.patterns.D+" "+t.patterns.t;break;case"F":n=t.patterns.D+" "+t.patterns.T;break;case"g":n=t.patterns.d+" "+t.patterns.t;break;case"G":n=t.patterns.d+" "+t.patterns.T;break;case"m":n=t.patterns.M;break;case"M":n=t.patterns.M;break;case"s":n=t.patterns.S;break;case"t":n=t.patterns.t;break;case"T":n=t.patterns.T;break;case"u":n=t.patterns.S;break;case"U":n=t.patterns.D+" "+t.patterns.T;break;case"y":n=t.patterns.Y;break;case"Y":n=t.patterns.Y;break;case"r":case"R":n="ddd, dd MMM yyyy HH:mm:ss G\\M\\T"}else n=e;return n},e.prototype.createDescriptor=function(e,t){var n=null,r=this.maskPartsCount++;switch(e){case-1:n=new i(this,r),n.liternal=t;break;case 20:n=new v(this,r);break;case 25:n=new m(this,r);break;case 26:n=new g(this,r);break;case 27:n=new y(this,r);break;case 30:n=new w(this,r);break;case 31:n=new E(this,r);break;case 100:n=new S(this,r);break;case 101:n=new x(this,r);break;case 10:n=new C(this,r);break;case 1:n=new k(this,r);break;case 2:n=new L(this,r);break;case 45:n=new M(this,r);break;case 46:n=new _(this,r);break;case 47:n=new P(this,r);break;case 48:n=new H(this,r);break;case 250:n=new j(this,r);break;case 251:n=new F(this,r);break;case 50:n=new q(this,r);break;case 51:n=new R(this,r);break;case 60:n=new z(this,r);break;case 61:n=new W(this,r);break;case 70:n=new o(this,r);break;case 71:n=new u(this,r);break;case 72:n=new l(this,r);break;case 73:n=new c(this,r);break;case 74:n=new h(this,r);break;case 75:n=new a(this,r);break;case 80:n=new p(this,r);break;default:}return n},e.prototype.handlePattern=function(e,t){var n=new RegExp("y{3,10}"),r=n.test(e);if(r)return this.inputWidget&&this.inputWidget.options.cultureCalendar==="Japanese"?(t.push(this.createDescriptor(71)),!0):(t.push(this.createDescriptor(10)),!0);n=new RegExp("y{2,2}"),r=n.test(e);if(r)return this.inputWidget&&this.inputWidget.options.cultureCalendar==="Japanese"?(t.push(this.createDescriptor(71)),!0):(t.push(this.createDescriptor(2)),!0);n=new RegExp("y{1,1}"),r=n.test(e);if(r)return this.inputWidget&&this.inputWidget.options.cultureCalendar==="Japanese"?(t.push(this.createDescriptor(70)),!0):(t.push(this.createDescriptor(1)),!0);n=new RegExp("d{4,4}"),r=n.test(e);if(r)return t.push(this.createDescriptor(101)),!0;n=new RegExp("d{3,3}"),r=n.test(e);if(r)return t.push(this.createDescriptor(100)),!0;n=new RegExp("d{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(30)),!0;n=new RegExp("d{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(31)),!0;n=new RegExp("M{4,4}"),r=n.test(e);if(r)return t.push(this.createDescriptor(27)),!0;n=new RegExp("M{3,3}"),r=n.test(e);if(r)return t.push(this.createDescriptor(26)),!0;n=new RegExp("M{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(20)),!0;n=new RegExp("M{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(25)),!0;n=new RegExp("h{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(46)),!0;n=new RegExp("h{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(45)),!0;n=new RegExp("H{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(48)),!0;n=new RegExp("H{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(47)),!0;n=new RegExp("m{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(50)),!0;n=new RegExp("m{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(51)),!0;n=new RegExp("s{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(60)),!0;n=new RegExp("s{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(61)),!0;n=new RegExp("t{2,2}"),r=n.test(e);if(r)return t.push(this.createDescriptor(251)),!0;n=new RegExp("t{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(250)),!0;n=new RegExp("e{2,10}"),r=n.test(e);if(r)return t.push(this.createDescriptor(71)),!0;n=new RegExp("e{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(70)),!0;n=new RegExp("g{3,10}"),r=n.test(e);if(r)return t.push(this.createDescriptor(74)),!0;n=new RegExp("g{2,2}"),r=n.test(e);if(r)return this.inputWidget&&this.inputWidget.options.cultureCalendar==="Japanese"?(t.push(this.createDescriptor(74)),!0):(t.push(this.createDescriptor(73)),!0);n=new RegExp("g{1,1}"),r=n.test(e);if(r)return this.inputWidget&&this.inputWidget.options.cultureCalendar==="Japanese"?(t.push(this.createDescriptor(74)),!0):(t.push(this.createDescriptor(72)),!0);if(this.isDisplayFormat){n=new RegExp("E{1,10}"),r=n.test(e);if(r)return t.push(this.createDescriptor(75)),!0;n=new RegExp("A{1,1}"),r=n.test(e);if(r)return t.push(this.createDescriptor(80)),!0}return!1},e.prototype.daysInMonth=function(e,t){e-=1;var n=(new Date(t,++e,1,-1)).getDate();return n},e.prototype._isDigitString=function(e){e=K.trim(e);if(e.length===0)return!0;var t=e.charAt(0),n,r;if(t==="+"||t==="-")e=e.substr(1),e=K.trim(e);if(e.length===0)return!0;try{return n=parseFloat(e),r=n.toString(),r===e}catch(i){return!1}},e.prototype._internalSetDate=function(e){this.inputWidget&&this.inputWidget._internalSetDate(e)},e.prototype._isValidDate=function(e){return this.inputWidget._isValidDate(e)},e.prototype._setFormat=function(e){var t=this.inputWidget._getCulture();if(t==null)return;this.pattern=this._parseFormatToPattern(e),this.descriptors=this._parseFormat(this.pattern),this.fields=K.grep(this.descriptors,function(e){return e.type!==-1})},e.prototype._isEraFormatExist=function(){for(var e=0;e<this.descriptors.length;e++)if(this.descriptors[e].type>=70&&this.descriptors[e].type<=75)return!0;return!1},e.prototype.getDate=function(){return this.inputWidget?new Date(this.inputWidget._safeGetDate(!0).getTime()):undefined},e.prototype.setDate=function(e){this.inputWidget&&this.inputWidget._setData(e)},e.prototype.getYear=function(){return this.getDate().getFullYear()},e.prototype.setYear=function(e,t,n){try{t&&t.isfullreset&&(t.offset=1,e="1970");if(typeof e=="string"&&!this._isDigitString(e))return!1;e*=1;var r=this.inputWidget.options,i=1,s=9999,o,u,a;n&&(r.minDate&&(i=Math.max(i,r.minDate.getFullYear())),r.maxDate&&(s=Math.min(s,r.maxDate.getFullYear()))),t&&t.isreset&&(e=i),e<i&&(e=i),e>s&&(e=s),o=this.getDate(),u=new Date(o.getTime()),u.setFullYear(e);if(this._isValidDate(u))return a=this.daysInMonth(this.getMonth(),this.getYear()),a===o.getDate()?(u=new Date(o.getTime()),u.setDate(1),u.setFullYear(e),u.setDate(a),this._isValidDate(u)?(this._internalSetDate(u),!0):!1):(o.setFullYear(e),this._internalSetDate(o),!0);return t&&t.isreset?(o.setFullYear(1),this._internalSetDate(o),!0):!1}catch(f){return!1}},e.prototype.getMonth=function(){return this.getDate().getMonth()+1},e.prototype.setMonth=function(e,t,n){try{n&&n.isfullreset&&(e="1"),e*=1;var r=this.getDate(),i,s;if(typeof t!="undefined"&&!t)if(e>12||e<1){if(!n||!n.isreset)return!1;e=1}return i=this.daysInMonth(this.getMonth(),this.getYear()),i===this.getDate().getDate()?(s=new Date(r.getTime()),s.setDate(1),s.setMonth(e-1),i=this.daysInMonth(s.getMonth()+1,s.getFullYear()),s.setDate(i),this._isValidDate(s)?(this._internalSetDate(s),!0):!1):(s=new Date(r.getTime()),s.setMonth(e-1),this._isValidDate(s)?(this._internalSetDate(s),!0):!1)}catch(o){return!1}},e.prototype.getHours=function(){return this.getDate().getHours()},e.prototype.setHours=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>24)return!1;var n=new Date(this.getDate().getTime());return n.setHours(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},e.prototype.getMinutes=function(){return this.getDate().getMinutes()},e.prototype.setMinutes=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setMinutes(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},e.prototype.getSeconds=function(){return this.getDate().getSeconds()},e.prototype.setSeconds=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setSeconds(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},e.prototype.getDayOfMonth=function(){return this.getDate().getDate()},e.prototype.setDayOfMonth=function(e,t,n){try{if(n&&n.isfullreset)return this.setDayOfMonth(1,t);var r=this.getDate(),i,s;e*=1;if(typeof t!="undefined"&&!t){i=this.daysInMonth(this.getMonth(),this.getYear());if(e>i||e<1)return n&&n.isreset?this.setDayOfMonth(1,t,n):!1}return s=new Date(r.getTime()),s.setDate(e),this._isValidDate(s)?(this._internalSetDate(s),!0):!1}catch(o){return!1}},e.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1},e.prototype.setDayOfWeek=function(e){try{e*=1;var t=e-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+t,!0)}catch(n){return!1}},e.prototype._getCulture=function(){return this.inputWidget._getCulture()},e.prototype.findAlikeArrayItemIndex=function(e,t){var n=-1,r=99999,i,s;for(i=0;i<e.length;i++)s=e[i].toLowerCase().indexOf(t.toLowerCase()),s!==-1&&s<r&&(r=s,n=i);return n},e.prototype.toString=function(){if(this._isEraFormatExist()&&this.inputWidget.options.date!=null){var e=this.inputWidget._getRealEraMinDate(),t=this.inputWidget._getRealEraMaxDate();if(this.inputWidget.options.date<e||this.inputWidget.options.date>t)return""}var n="",r=0,i,s,o;this.desPostions=new Array(0);for(i=0;i<this.descriptors.length;i++){this.descriptors[i].startIndex=n.length,s=this.descriptors[i].getText(),n+=s;for(o=0;o<s.length;o++){this.desPostions.push({desc:this.descriptors[i],pos:o,text:s,length:s.length}),r++;if(this.desPostions.length!==r)throw"Fatal Error !!!!!!!!!!!!!!!"}}return n},e}();e.wijDateTextFormatter=V;var $=function(){function e(e){this.options=e,e.format=e.format||"M/d/yyyy",e.amDesignator=e.amDesignator||"",e.pmDesignator=e.pmDesignator||"",e.hour12As0===undefined&&(e.hour12As0=!1),e.midnightAs0===undefined&&(e.midnightAs0=!0)}return e.prototype._getInnerIncrement=function(){return 1},e.prototype._getCulture=function(){return Globalize.findClosestCulture(this.options.culture)},e.prototype._getRealEraMaxDate=function(){return this.options.maxDate?X.GetEraMax()<this.options.maxDate?X.GetEraMax():this.options.maxDate:X.GetEraMax()},e.prototype._getRealEraMinDate=function(){return this.options.minDate?X.GetEraMin()>this.options.minDate?X.GetEraMin():this.options.minDate:X.GetEraMin()},e.prototype._safeGetDate=function(e){var t=this.options.date;return t==null&&(t=new Date),e||(t=this._checkRange(t)),t},e.prototype._safeSetDate=function(e,t){var n=e;return t||(e=this._checkRange(e)),isNaN(e)&&(e=n),this.options.date=e,!0},e.prototype._getAllowSpinLoop=function(){return!1},e.prototype._getRealMinDate=function(){if(this.options.minDate)return this.options.minDate;var e=new Date(1,0,1,0,0,0);return e.setFullYear(1),e},e.prototype._getRealMaxDate=function(){return this.options.maxDate?this.options.maxDate:new Date(9999,11,31,23,59,59)},e.prototype._setData=function(e){this.options.date=e},e.prototype._isValidDate=function(e,t){if(e===undefined)return!1;if(isNaN(e))return!1;if(e.getFullYear()<1||e.getFullYear()>9999)return!1;if(t){if(this.options.minDate&&e<this.options.minDate)return!1;if(this.options.maxDate&&e>this.options.maxDate)return!1}return!0},e.prototype._getInnerAmDesignator=function(){return this.options.amDesignator==""?this._getStandardAMPM("AM"):this.options.amDesignator},e.prototype._getInnerPmDesignator=function(){return this.options.pmDesignator==""?this._getStandardAMPM("PM"):this.options.pmDesignator},e.prototype.isFocused=function(){return!1},e.prototype._internalSetDate=function(e){},e.prototype._checkRange=function(e){return e&&(this.options.minDate&&e<this.options.minDate&&(e=new Date(Math.max(this.options.minDate.valueOf(),e.valueOf()))),this.options.maxDate&&e>this.options.maxDate&&(e=new Date(Math.min(this.options.maxDate.valueOf(),e.valueOf())))),e},e.prototype._getStandardAMPM=function(e){var t=this._getCulture();if(t&&t.calendar){var n=t.calendars.standard[e];if(n)return n[0]}return e},e}();e.wijInputDateImpl=$;var K=jQuery;K.wijinputcore=K.wijinputcore||{},K.wijinputcore.formatdate=K.wijinputcore.formatdate||J,K.wijinputcore.parseDate=K.wijinputcore.parseDate||Q,K.wijinputcore.validateDate=K.wijinputcore.validateDate||et})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){"use strict";var t=function(){function t(e){this._owner=e}return t.prototype._initDatePicker=function(){var t=this._owner.element.data("datePicker");if(t!=undefined)return;var n=this,r=this._owner.element.data("pickerMinYear"),i=this._owner.element.data("pickerMaxYear"),s=this._owner.element.data("itemHeight")*5,o=this._owner.element.data("pickerWidth"),u=this._owner.element.data("itemHeight")+"px",a=this._owner.element.data("indicatorHeight")+"px",f=this._owner.element.data("indicatorTranslateTop"),l=this._owner.element.data("indicatorTranslateDown"),c=this._owner.element.data("indicatorTranslateSelector"),h=this._owner.element.data("indicatorTranslateContent"),p=this._createDivElement(document.body,o+"px"),d=this._createDivIndicatiorElement(p,u,"",c),v=this._createTableElement(p,s+"px","-",h),m=$("<tr/>").appendTo(v),g="33%",y="33%",b="33%";this._owner.element.data("pickerDateMonthFormat")=="MMMM"&&(g="30%",y="45%",b="25%");var w=$("<td/>").css({width:g}),E=this._createPickerDivElement(w,s),S=this._createMaskElement(E,s),x=new Array;for(var T=r;T<=i;T++){var N=this._getRollText(T,this._owner.element.data("pickerDateYearFormat")),C=this._createItemElement(T,S,u,N);x[T-r]=C}var k=$("<td/>").css({width:y}),L=this._createPickerDivElement(k,s),A=this._createMaskElement(L,s),O={},T;for(T=1;T<=12;T++){var N=this._getRollText(T,this._owner.element.data("pickerDateMonthFormat")),C=this._createItemElement(T-1,A,u,N);O[T-1]=C}var M=$("<td/>").css({width:b}),_=this._createPickerDivElement(M,s),D=this._createMaskElement(_,s),P={};for(T=1;T<=31;T++){var N=this._getRollText(T,this._owner.element.data("pickerDateDayFormat")),C=this._createItemElement(T,D,u,N);P[T-1]=C}var H=this._owner.element.data("pickerDateFormat"),B=!1,j=!1,F=!1;for(T=0;T<H.length;T++)H[T]=="yyyy"&&!B&&(w.appendTo(m),B=!0),(H[T]=="M"||H[T]=="MM"||H[T]=="MMM"||H[T]=="MMMM")&&!j&&(k.appendTo(m),j=!0),(H[T]=="d"||H[T]=="dd")&&!F&&(M.appendTo(m),F=!0);this._owner.element.data("datePicker",p),this._owner.element.data("divYear",E),this._owner.element.data("divMonth",L),this._owner.element.data("divDay",_),this._owner.element.data("divYearMask",S),this._owner.element.data("divMonthMask",A),this._owner.element.data("divDayMask",D),this._owner.element.data("pickerYearArray",x),this._owner.element.data("pickerMonthArray",O),this._owner.element.data("pickerDayArray",P);if(!e.CoreUtility.IsIE8OrBelow()){var I=this._createIndicatiorElement(E,a,"-",f),q=this._createIndicatiorElement(E,a,"-",l),R=this._createIndicatiorElement(L,a,"-",f),U=this._createIndicatiorElement(L,a,"-",l),z=this._createIndicatiorElement(_,a,"-",f),W=this._createIndicatiorElement(_,a,"-",l);this._owner.element.data("divYearIndicatorTop",I),this._owner.element.data("divMonthIndicatorTop",R),this._owner.element.data("divDayIndicatorTop",z),this._owner.element.data("divYearIndicatorDown",q),this._owner.element.data("divMonthIndicatorDown",U),this._owner.element.data("divDayIndicatorDown",W)}this._initDatePickerEvent(),this._initTouchPickerEvent("Year"),this._initTouchPickerEvent("Month"),this._initTouchPickerEvent("Day")},t.prototype._initDatePickerEvent=function(){var e=this,t=this._owner.element.data("divYear"),n=this._owner.element.data("divMonth"),r=this._owner.element.data("divDay");t.mousewheel(function(t,n){e._yearMouseWheel(t,n)}),n.mousewheel(function(t,n){e._monthMouseWheel(t,n)}),r.mousewheel(function(t,n){e._dayMouseWheel(t,n)})},t.prototype._initTimePicker=function(){var t=this._owner.element.data("timePicker");if(t!=undefined)return;var n=this,r=this._owner.element.data("itemHeight")*5,i=this._owner.element.data("pickerWidth"),s=this._owner.element.data("itemHeight")+"px",o=this._owner.element.data("indicatorHeight")+"px",u=this._owner.element.data("indicatorTranslateTop"),a=this._owner.element.data("indicatorTranslateDown"),f=this._owner.element.data("indicatorTranslateSelector"),l=this._owner.element.data("indicatorTranslateContent"),c=this._createDivElement(document.body,i+"px"),h=this._createDivIndicatiorElement(c,s,"",f),p=this._createTableElement(c,r+"px","-",l),d=$("<tr/>").appendTo(p),v=$("<td/>").css({width:"33%"}),m=this._createPickerDivElement(v,r),g=this._createMaskElement(m,r),y={};for(var b=1;b<=12;b++){var w=this._getRollText(b,this._owner.element.data("pickerTimeHourFormat")),E=this._createItemElement(b,g,s,w);y[b-1]=E}var S=$("<td/>").css({width:"33%"}),x=this._createPickerDivElement(S,r),T=this._createMaskElement(x,r),N={};for(var b=0;b<60;b++){var w=this._getRollText(b,this._owner.element.data("pickerTimeMinuteFormat")),E=this._createItemElement(b,T,s,w);N[b]=E}var C=$("<td/>").css({width:"34%"}),k=this._createPickerDivElement(C,r),L=this._createMaskElement(k,r),A={};for(var b=0;b<2;b++){var w=this._getRollText(b,this._owner.element.data("pickerTimeAMFormat")),E=this._createItemElement(b,L,s,w);A[b]=E}var O=this._owner.element.data("pickerTimeFormat"),M=!1,_=!1,D=!1;for(var b=0;b<O.length;b++)(O[b]=="h"||O[b]=="hh")&&!M&&(v.appendTo(d),M=!0),(O[b]=="m"||O[b]=="mm")&&!_&&(S.appendTo(d),_=!0),(O[b]=="t"||O[b]=="tt")&&!D&&(C.appendTo(d),D=!0);this._owner.element.data("timePicker",c),this._owner.element.data("divHour",m),this._owner.element.data("divMinute",x),this._owner.element.data("divAM",k),this._owner.element.data("divHourMask",g),this._owner.element.data("divMinuteMask",T),this._owner.element.data("divAMMask",L),this._owner.element.data("pickerHourArray",y),this._owner.element.data("pickerMinuteArray",N),this._owner.element.data("pickerAMArray",A);if(!e.CoreUtility.IsIE8OrBelow()){var P=this._createIndicatiorElement(m,o,"-",u),H=this._createIndicatiorElement(m,o,"-",a),B=this._createIndicatiorElement(x,o,"-",u),j=this._createIndicatiorElement(x,o,"-",a),F=this._createIndicatiorElement(k,o,"-",u),I=this._createIndicatiorElement(k,o,"-",a);this._owner.element.data("divHourIndicatorTop",P),this._owner.element.data("divMinuteIndicatorTop",B),this._owner.element.data("divAMIndicatorTop",F),this._owner.element.data("divHourIndicatorDown",H),this._owner.element.data("divMinuteIndicatorDown",j),this._owner.element.data("divAMIndicatorDown",I)}this._initTimePickerEvent(),this._initTouchPickerEvent("Hour"),this._initTouchPickerEvent("Minute"),this._initTouchPickerEvent("AM")},t.prototype._initTimePickerEvent=function(){var e=this,t=this._owner.element.data("divHour"),n=this._owner.element.data("divMinute"),r=this._owner.element.data("divAM");t.mousewheel(function(t,n){e._hourMouseWheel(t,n)}),n.mousewheel(function(t,n){e._minuteMouseWheel(t,n)}),r.mousewheel(function(t,n){e._amMouseWheel(t,n)})},t.prototype._isValidatePickerFormat=function(e){switch(e){case"yyyy":case"M":case"MM":case"MMM":case"MMMM":case"d":case"dd":case"h":case"hh":case"m":case"mm":case"t":case"tt":return!0}return!1},t.prototype._getDatePickerMinYear=function(){var e=this._owner._isEraFormatExist()?this._owner._getRealEraMinDate():this._owner._getRealMinDate(),t=e.getFullYear(),n=this._owner._getPickerValue(),r=this._owner._max(n.getFullYear()-50,t);return r},t.prototype._getDatePickerMaxYear=function(){var e=this._owner._isEraFormatExist()?this._owner._getRealEraMaxDate():this._owner._getRealMaxDate(),t=e.getFullYear(),n=this._owner._getPickerValue(),r=this._owner._min(n.getFullYear()+50,t);return r},t.prototype._getCorrentPickerFormat=function(e){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(e[n].index<e[t].index){var r=e[t];e[t]=e[n],e[n]=r}var i="";for(var t=0;t<e.length;t++)i+=e[t].value,t<e.length-1&&(i+=",");return i},t.prototype._getDefaultDatePickerFormat=function(){var e=this._owner._getCulture();if(e==null)return"yyyy,M,d";var t=e.calendars.standard,n=t.patterns.d,r={index:n.indexOf("y"),value:"yyyy"},i={index:n.indexOf("M"),value:"MM"},s={index:n.indexOf("d"),value:"dd"};if(r.index==-1||i.index==-1||s.index==-1)return"yyyy,M,d";var o=new Array;return o[0]=r,o[1]=i,o[2]=s,this._getCorrentPickerFormat(o)},t.prototype._getDefaultTimePickerFormat=function(){if(this._owner.options.culture.length>=2){var e=this._owner.options.culture.substr(0,2);if(e=="ja"||e=="zh")return"tt,hh,mm"}return"hh,mm,tt"},t.prototype._updateTimePicker=function(){var e=this._owner.element.data("pickerHour")-1,t=this._owner.element.data("pickerMinute"),n=this._owner.element.data("pickerAM"),r=this._owner.element.data("divHourMask"),i=this._owner.element.data("divMinuteMask"),s=this._owner.element.data("divAMMask");this._updateItemTransform("Hour",e),this._updateItemTransform("Minute",t),this._updateItemTransform("AM",n),this._scrollTheView("Hour",e,e,!0),this._scrollTheView("Minute",t,t,!0),this._scrollTheView("AM",n,n,!0),this._owner.element.data("pickerHourScrollDelay",5),this._owner.element.data("pickerMinuteScrollDelay",5),this._owner.element.data("pickerAMScrollDelay",5),this._owner.element.data("pickerHourScrollRate",1),this._owner.element.data("pickerMinuteScrollRate",1),this._owner.element.data("pickerAMScrollRate",1)},t.prototype._updateDatePicker=function(){var t=this._owner.element.data("pickerMinYear"),n=this._owner.element.data("pickerYear"),r=this._owner.element.data("pickerMonth"),i=this._owner.element.data("pickerDay"),s=e.DateTimeInfo.DaysInMonth(n,r);this._updateItemTransform("Year",n-t),this._updateItemTransform("Month",r-1),this._updateItemTransform("Day",i-1),this._scrollTheView("Year",n-t,n-t,!0),this._scrollTheView("Month",r-1,r-1,!0),this._scrollTheView("Day",i-1,i-1,!0),this._owner.element.data("pickerYearScrollDelay",5),this._owner.element.data("pickerMonthScrollDelay",5),this._owner.element.data("pickerDayScrollDelay",5),this._owner.element.data("pickerYearScrollRate",1),this._owner.element.data("pickerMonthScrollRate",1),this._owner.element.data("pickerDayScrollRate",1),this._updateDayPickerMaxCount()},t.prototype._getRollText=function(e,t){var n=this._owner._getCulture(),r="";switch(t){case"M":case"h":r=e.toString();break;case"MM":case"hh":r=e<10?"0"+e.toString():e.toString();break;case"m":case"d":case"yyyy":r=e.toString();break;case"mm":case"dd":r=e<10?"0"+e.toString():e.toString();break;case"t":r=e==0?this._owner._getStandardAMPM("AM"):this._owner._getStandardAMPM("PM"),r=r.substr(0,1);break;case"tt":r=e==0?this._owner._getStandardAMPM("AM"):this._owner._getStandardAMPM("PM");break;case"MMM":r=n.calendars.standard.months.namesAbbr[e-1];break;case"MMMM":r=n.calendars.standard.months.names[e-1];break;default:}return r},t.prototype._initTouchPickerEvent=function(t){var n=this._owner.element.data("div"+t),r=this._owner.element.data("div"+t+"Mask");this._addPickerTouchEvent(r,t);if(!e.CoreUtility.IsIE8OrBelow()){var i=this._owner.element.data("div"+t+"IndicatorTop"),s=this._owner.element.data("div"+t+"IndicatorDown");this._addPickerTouchEvent(i,t),this._addPickerTouchEvent(s,t)}},t.prototype._addPickerTouchEvent=function(e,t){var n=this;e.bind("touchstart",function(e){n._touchStart(e,t),e.preventDefault()}).bind("touchmove",function(e){n._touchMove(e,t),e.preventDefault()}).bind("touchend",function(e){n._touchEnd(e,t),e.preventDefault()})},t.prototype._getRollFormat=function(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)!=-1)return e[n];return""},t.prototype._adjustTouchPosition=function(e,t){var n=this._getTouchPositionArray(e),r=this._getItemIndexByPosition(e,t),i=this._itemIndexToValue(e,r);this._owner.element.data("picker"+e,i),this._scrollTheViewByTouch(e,n[r])},t.prototype._itemIndexToValue=function(e,t){switch(e){case"Minute":case"AM":return t;case"Hour":case"Month":case"Day":return t+1;case"Year":var n=this._owner.element.data("pickerMinYear");return n+t}return-1},t.prototype._getItemLength=function(e){switch(e){case"Hour":case"Month":return 12;case"Year":var t=this._owner.element.data("pickerMinYear"),n=this._owner.element.data("pickerMaxYear");return n-t+1;case"Day":return 31;case"Minute":return 60;case"AM":return 2}return-1},t.prototype._updateItemTransform=function(t,n){if(e.CoreUtility.IsIE8OrBelow())return;if(n<0)return;var r=this._owner.element.data("picker"+t+"Array"),i=this._getItemLength(t),s="skew(0deg) scale(1.2, 1.2) translate(0px, 0px)",o="skew(-5deg) scale(0.9, 0.9) translate(0px, 0px)",u="skew(-10deg) scale(0.7, 0.7) translate(0px, 0px)",a="skew(-15deg) scale(0.5, 0.5) translate(0px, 0px)";for(var f=0;f<i;f++)f==n-3?this._setCssTransform(r[f],"",a,!0):f==n-2?this._setCssTransform(r[f],"",u,!0):f==n-1?this._setCssTransform(r[f],"",o,!0):f==n?this._setCssTransform(r[f],"",s,!0):f==n+1?this._setCssTransform(r[f],"",o,!0):f==n+2?this._setCssTransform(r[f],"",u,!0):f==n+3?this._setCssTransform(r[f],"",a,!0):this._setCssTransform(r[f],"","",!0)},t.prototype._updateDayPickerMaxCount=function(){var t=this._owner.element.data("pickerYear"),n=this._owner.element.data("pickerMonth"),r=this._owner.element.data("pickerDay"),i=e.DateTimeInfo.DaysInMonth(t,n);this._owner.element.data("pickerDayMaxCount",i);var s=this._owner.element.data("pickerDayArray");for(var o=29;o<=31;o++){var u=o>i?"none":"";s[o-1].css("display",u)}if(r>i){var a=this._owner.element.data("divDayMask");r=i,this._updateItemTransform("Day",r-1),this._scrollTheView("Day",r-1,null,!1),this._owner.element.data("pickerDay",r)}},t.prototype._getTouchPositionArray=function(e){var t={},n=this._owner.element.data("itemHeight"),r=this._getItemLength(e);for(var i=0;i<r;i++)t[i]=(2-i)*n;return t},t.prototype._getItemIndexByPosition=function(e,t){var n=this._getTouchPositionArray(e),r=this._getItemLength(e);e=="Day"&&r>this._owner.element.data("pickerDayMaxCount")&&(r=this._owner.element.data("pickerDayMaxCount"));var i=-1;for(var s=0;s<r;s++){if(s==0){if(t>n[s]){i=0;break}}else if(t<=n[s-1]&&t>=n[s]){var o=n[s-1]-t,u=t-n[s];i=o>u?s:s-1;break}if(s==r-1&&t<n[s]){i=s;break}}return i},t.prototype._hideItemInIE7=function(t,n){if(!e.CoreUtility.IsIE7())return;var r=this._owner.element.data("picker"+t+"LastItemIndex"),i=this._getItemIndexByPosition(t,n);if(i==r)return;var s=i-2,o=i+2,u=this._owner.element.data("picker"+t+"Array"),a=this._getItemLength(t);for(var f=0;f<a;f++)f>=s&&f<=o?u[f].css("visibility",""):u[f].css("visibility","hidden");this._owner.element.data("picker"+t+"LastItemIndex",i)},t.prototype._scrollTheView=function(e,t,n,r){var i=this._owner.element.data("itemHeight"),s=(2-t)*i;this._owner.element.data("picker"+e+"ScrollTo",s);if(r==1){var o=this._owner.element.data("div"+e+"Mask"),u=s;this._setCssTransform(o,"",u,!1),this._hideItemInIE7(e,u),this._owner.element.data("picker"+e+"ScrollCurrent",u)}else this._scrollPicker(e)},t.prototype._scrollPicker=function(e){var t=this._owner.element.data("div"+e+"Mask"),n=this._owner.element.data("picker"+e+"ScrollTo"),r=this._owner.element.data("picker"+e+"ScrollCurrent"),i=this._owner.element.data("picker"+e+"ScrollDelay");r==undefined&&(r=n,this._setCssTransform(t,"",r,!1),this._owner.element.data("picker"+e+"ScrollCurrent",r));if(n==r||r==undefined)return!1;r+=n>r?1:-1;var s="translate(0,"+r+"px) ";this._setCssTransform(t,"",r,!1),this._hideItemInIE7(e,r),this._owner.element.data("picker"+e+"ScrollCurrent",r);var o=this;return setTimeout(function(){o._scrollPicker(e)},i),!0},t.prototype._scrollTheViewByTouch=function(e,t){var n=this._owner.element.data("itemHeight"),r=this._owner.element.data("picker"+e+"ScrollCurrent"),i=this._owner.element.data("picker"+e+"ScrollTo");this._owner.element.data("picker"+e+"ScrollTo",t),this._scrollPickerByTouch(e)},t.prototype._scrollPickerByTouch=function(e){var t=this._owner.element.data("div"+e+"Mask"),n=this._owner.element.data("picker"+e+"ScrollTo"),r=this._owner.element.data("picker"+e+"ScrollCurrent");r==undefined&&(r=n,this._setCssTransform(t,"",r,!1),this._owner.element.data("picker"+e+"ScrollCurrent",r));if(n==r){this._owner.element.data("picker"+e+"ScrollRate",1),this._owner.element.data("picker"+e+"ScrollDelay",5),this._owner.element.data("touchQuickScroll",!1);if(e=="Month"||e=="Year")this._updateDayPickerMaxCount();else if(e=="Hour"){var i=this._getItemIndexByPosition(e,r),s=this._owner.element.data("pickerAM");i==11?s==0&&(s=1,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,0,!1),this._owner.element.data("pickerAM",s)):s==1&&(s=0,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,1,!1),this._owner.element.data("pickerAM",s))}return!1}var o=this._owner.element.data("itemHeight"),u=this._owner.element.data("picker"+e+"ScrollDelay"),a=this._owner.element.data("picker"+e+"ScrollRate"),f=Math.abs(n-r),l=f>a?a:f;this._owner.element.data("touchQuickScroll")==1&&(f<o?u=80:f<o*2?u=50:f<o*5?u=30:f<o*8?u=20:f<o*10&&(u=10),this._owner.element.data("picker"+e+"ScrollDelay",u)),r+=n>r?l:-1*l,this._setCssTransform(t,"",r,!1),this._owner.element.data("picker"+e+"ScrollCurrent",r);var i=this._getItemIndexByPosition(e,r),c=this._owner.element.data("picker"+e+"LastItemIndex");i!=c&&this._updateItemTransform(e,i),this._owner.element.data("picker"+e+"LastItemIndex",c);var h=this;return setTimeout(function(){h._scrollPickerByTouch(e)},u),!0},t.prototype._touchStart=function(e,t){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=n.clientY;this._owner.element.data("touch"+t+"StartY",r),this._owner.element.data("touch"+t+"BaseY",this._owner.element.data("picker"+t+"ScrollCurrent")),this._owner.element.data("touch"+t+"Started",!0),this._owner.element.data("touchStartTime",new Date);var i=this._owner.element.data("picker"+t+"ScrollCurrent");this._owner.element.data("picker"+t+"ScrollTo",i)},t.prototype._touchMove=function(e,t){if(!this._owner._allowEdit())return;if(this._owner.element.data("touch"+t+"Started")!=1)return;var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=n.clientY,i=this._owner.element.data("touch"+t+"StartY"),s=this._owner.element.data("touch"+t+"BaseY"),o=s+r-i;this._scrollTheViewByTouch(t,o)},t.prototype._touchEnd=function(e,t){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=this._owner.element.data("touch"+t+"StartY"),i=this._owner.element.data("touch"+t+"BaseY"),s=n.clientY-r,o=i+s;if(Math.abs(s)<10){var u=this._owner.element.data("picker"+t+"ScrollCurrent");this._owner.element.data("picker"+t+"ScrollTo",u),this._adjustTouchPosition(t,u);return}this._owner.element.data("touch"+t+"StartY",-1),this._owner.element.data("touch"+t+"BaseY",-1),this._owner.element.data("touch"+t+"Started",!1);var a=new Date,f=a-this._owner.element.data("touchStartTime");if(f<200){var l=this._owner.element.data("itemHeight")*5,c=s<0?-1:1;s*=4,s=Math.abs(s)<l?c*l:s,o+=s,this._owner.element.data("touchQuickScroll",!0),this._owner.element.data("picker"+t+"ScrollRate",3)}this._adjustTouchPosition(t,o)},t.prototype._yearMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=this._owner.element.data("pickerMinYear"),r=this._owner.element.data("pickerMaxYear"),i=this._owner.element.data("pickerYear"),s=this._owner.element.data("pickerYear");i-=t,i=i<n?n:i,i=i>r?r:i,this._updateItemTransform("Year",i-n),this._scrollTheView("Year",i-n,s-n,!1),this._owner.element.data("pickerYear",i),this._updateDayPickerMaxCount(),e.preventDefault&&e.preventDefault()},t.prototype._monthMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=this._owner.element.data("pickerMonth"),r=this._owner.element.data("pickerMonth");n-=t,n=n<1?1:n,n=n>12?12:n,this._updateItemTransform("Month",n-1),this._scrollTheView("Month",n-1,r,!1),this._owner.element.data("pickerMonth",n),this._updateDayPickerMaxCount(),e.preventDefault&&e.preventDefault()},t.prototype._dayMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=this._owner.element.data("pickerDayMaxCount"),r=this._owner.element.data("pickerDay"),i=this._owner.element.data("pickerDay");i-=t,i=i<1?1:i,i=i>n?n:i,this._updateItemTransform("Day",i-1),this._scrollTheView("Day",i-1,r-1,!1),this._owner.element.data("pickerDay",i),e.preventDefault&&e.preventDefault()},t.prototype._hourMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=this._owner.element.data("pickerHour"),r=this._owner.element.data("pickerHour"),i=r;r-=t,r=r<1?1:r,r=r>12?12:r;var s=this._owner.element.data("pickerAM");r==12?s==0&&(s=1,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,0,!1),this._owner.element.data("pickerAM",s)):i==12&&s==1&&(s=0,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,1,!1),this._owner.element.data("pickerAM",s)),this._updateItemTransform("Hour",r-1),this._scrollTheView("Hour",r-1,n-1,!1),this._owner.element.data("pickerHour",r),e.preventDefault&&e.preventDefault()},t.prototype._minuteMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=this._owner.element.data("pickerMinute"),r=this._owner.element.data("pickerMinute");r-=t,r=r<0?0:r,r=r>59?59:r,this._updateItemTransform("Minute",r),this._scrollTheView("Minute",r,n,!1),this._owner.element.data("pickerMinute",r),e.preventDefault&&e.preventDefault()},t.prototype._amMouseWheel=function(e,t){if(!this._owner._allowEdit())return;if(isNaN(t))return;var n=$(e.currentTarget).data("pickerAM"),r=this._owner.element.data("pickerAM");r-=t,r=r<0?0:r,r=r>1?1:r,this._updateItemTransform("AM",r),this._scrollTheView("AM",r,n,!1),this._owner.element.data("pickerAM",r),e.preventDefault&&e.preventDefault()},t.prototype._createDivElement=function(e,t){var n=$("<div/>").appendTo(e).css({width:t+"px",display:"block",left:"",top:"",position:""}).bind("touchstart",function(e){e.preventDefault()}).bind("touchmove",function(e){e.preventDefault()});return n},t.prototype._createDivIndicatiorElement=function(e,t,n,r){var i=$("<div/>").appendTo(e).css({height:t,opacity:"0.5",lineHeight:t,margin:"0px",cursor:"default"}).attr("class","ui-state-active");return this._setCssTransform(i,n,r,!1),i},t.prototype._createIndicatiorElement=function(e,t,n,r){var i=$("<div/>").appendTo(e).css({height:t,opacity:"0.5",lineHeight:t,"border-width":"0px",cursor:"default"}).attr("class","ui-widget-content");return this._setCssTransform(i,n,r,!1),i},t.prototype._setCssTransform=function(t,n,r,i){var s=r;i||(s="translate(0, "+n+r+"px)"),t.css("position",""),t.css("top",""),e.CoreUtility.IsIE8OrBelow()?(t.css("position","relative"),t.css("top",n+r+"px")):e.CoreUtility.IsIE9()?t.css("-ms-transform",s):t.css("transform",s)},t.prototype._createTableElement=function(e,t,n,r){var i=$("<table/>").appendTo(e).css({width:"100%",height:t+"px"}).attr({cellspacing:"0px",cellpadding:"0px"});return this._setCssTransform(i,n,r,!1),i},t.prototype._createItemElement=function(e,t,n,r){var i=$("<div/>").appendTo(t).css({height:n,lineHeight:n,cursor:"default"}).html(r).data("rollValue",e);return i},t.prototype._createPickerDivElement=function(e,t){var n=$("<div/>").appendTo(e).css({height:t,border:"0px","text-align":"center",overflow:"hidden",background:"transparent"});return n},t.prototype._createMaskElement=function(e,t){var n=$("<div/>").appendTo(e).css({height:t});return n},t}();e.wijinputdateroller=t})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype._create=function(){t.CoreUtility.chrome&&this.element.attr("type","text"),this._wijinputdateroller=null,typeof t.wijinputdateroller!="undefined"&&(this._wijinputdateroller=new t.wijinputdateroller(this)),e.prototype._create.call(this)},i.prototype._createTextProvider=function(){this._textProvider=new o(this,this.options.dateFormat,this.options.displayFormat)},i.prototype._strToDate=function(e){return this._textProvider.parseDate(e)},i.prototype._beginUpdate=function(){var n,r=null;e.prototype._beginUpdate.call(this);if(this.options.minDate&&typeof this.options.minDate=="string"){var i=new Date(this.options.minDate);isNaN(i.getTime())&&(i=this._strToDate(this.options.minDate)),this.options.minDate=i}if(this.options.maxDate&&typeof this.options.maxDate=="string"){var s=new Date(this.options.maxDate);isNaN(s.getTime())&&(s=this._strToDate(this.options.maxDate)),this.options.maxDate=s}this.options.date===undefined?!!this.element.data("elementValue")&&!t.CoreUtility.IsFireFox4OrLater()&&(n=this.element.data("elementValue")):typeof this.options.date=="string"?n=this.options.date:r=this.options.date,this.options.date===undefined&&(this.options.date=new Date),n&&(r=new Date(n),isNaN(r.getTime())&&(r=this._strToDate(n))),r==null&&(r=this.options.date),this._safeSetDate(r);var o=this._getCulture();o!=null&&(this.options.amDesignator==""&&(this.options.amDesignator=this._getStandardAMPM("AM")),this.options.pmDesignator==""&&(this.options.pmDesignator=this._getStandardAMPM("PM"))),this.element.data({defaultDate:r===null?r:new Date(r.getTime()),preDate:r===null?r:new Date(r.getTime())}),this._resetTimeStamp(),this._initPicker(),this.element.addClass(this.options.wijCSS.wijinputdate).attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":this.options.date})},i.prototype._endUpdate=function(){var n=this;e.prototype._endUpdate.call(this),this.element.bind("click.wijinput",function(){if(!n._allowEdit())return;var e=n.options.activeField,r=n.element.wijtextselection();n._updateText();try{n.element.wijtextselection(r)}catch(i){}n.element.data("ignoreHighLight")!=1&&n._highLightCursor(),t.CoreUtility.chrome&&n.element.data("needResoteActiveField")==1&&n._setOption("activeField",e),n.element.data("ignoreHighLight",!1)})},i.prototype._getInnerNullText=function(){return this.options.placeholder!=null?this.options.placeholder:this.options.showNullText?this.options.nullText:null},i.prototype._getInnerAmDesignator=function(){return this.options.amDesignator==""?this._getStandardAMPM("AM"):this.options.amDesignator},i.prototype._getInnerPmDesignator=function(){return this.options.pmDesignator==""?this._getStandardAMPM("PM"):this.options.pmDesignator},i.prototype._getInnerIncrement=function(){var e=Number(this.options.increment);return isNaN(e)&&(e=1),e},i.prototype._getAllowSpinLoop=function(){return!!this.options.allowSpinLoop},i.prototype._getRealMaxDate=function(){return this.options.maxDate?this.options.maxDate:new Date(9999,11,31,23,59,59)},i.prototype._getRealMinDate=function(){if(this.options.minDate)return this.options.minDate;var e=new Date(1,0,1,0,0,0);return e.setFullYear(1),e},i.prototype._getRealEraMaxDate=function(){return this.options.maxDate?t.DateTimeInfo.GetEraMax()<this.options.maxDate?t.DateTimeInfo.GetEraMax():this.options.maxDate:t.DateTimeInfo.GetEraMax()},i.prototype._getRealEraMinDate=function(){return this.options.minDate?t.DateTimeInfo.GetEraMin()>this.options.minDate?t.DateTimeInfo.GetEraMin():this.options.minDate:t.DateTimeInfo.GetEraMin()},i.prototype._isEraFormatExist=function(){return this._textProvider._isEraFormatExist()},i.prototype._checkDate=function(){var e=this.options.date,n=this._checkRange(this.options.date);t.DateTimeInfo.Equal(e,n)||(this._setOption("date",n),this._trigger("valueBoundsExceeded",null))},i.prototype._checkRange=function(e){return e&&(this.options.minDate&&e<this.options.minDate&&(e=new Date(Math.max(this.options.minDate,e))),this.options.maxDate&&e>this.options.maxDate&&(e=new Date(Math.min(this.options.maxDate,e)))),e},i.prototype._safeSetDate=function(e,t){var n=e;return t||(e=this._checkRange(e)),isNaN(e)&&(e=n),this.options.date=e,!0},i.prototype._safeGetDate=function(e){var t=this.options.date;return t==null&&(t=new Date),e||(t=this._checkRange(t)),t},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"pickers":this._reInitPicker();break;case"minDate":case"maxDate":if(typeof this.options[t]=="string"){var r=this._strToDate(n);r=r===null?new Date(n):r,this.options[t]=r}var i=this.options.date;i===null&&(i=new Date);var s=this._getRealMinDate(),o=this._getRealMaxDate();(i<s||i>o)&&this._safeSetDate(i),this._updateText(),this._highLightField();break;case"date":if(!!n){if(typeof n=="string"){var u=this._strToDate(n);n=u===null?new Date(n):u}else typeof n=="object"?n=new Date(n.getTime()):n=new Date(n);isNaN(n)&&(n=new Date)}this._safeSetDate(n),this._updateText(),this._highLightField();break;case"midnightAs0":case"hour12As0":case"amDesignator":case"pmDesignator":this._updateText(),this._highLightField();break;case"culture":case"cultureCalendar":this._textProvider._setFormat(this.options.dateFormat);var a=this.options.displayFormat==""?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(a),this.options.amDesignator=this._getStandardAMPM("AM"),this.options.pmDesignator=this._getStandardAMPM("PM"),this._updateText();var f=this.element.data("calendar");f&&f.wijcalendar("option",t,n),this._reInitPicker();break;case"dateFormat":this._textProvider._setFormat(this.options.dateFormat),this.options.displayFormat==""&&this._textProvider._setDisplayFormat(this.options.dateFormat);if(this._isEraFormatExist()&&this.options.date!=null){var l=this._getRealEraMinDate(),c=this._getRealEraMaxDate();this.options.date<l?this._setOption("date",l):this.options.date>c&&this._setOption("date",c)}this._updateText();var f=this.element.data("calendar");f&&f.wijcalendar("option",t,n),this._reInitPicker();break;case"displayFormat":var a=this.options.displayFormat==""?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(a),this._updateText();break;case"activeField":n=Math.min(n,this._textProvider.getFieldCount()-1),n=Math.max(n,0),this.options.activeField=n,this._checkDate(),this.element.data("ignoreHighLight")!=1&&this._highLightField(),this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var f=this.element.data("calendar",f);f&&f.wijcalendar("option",t,n);break;case"comboItems":this._reInitPicker()}},i.prototype._setData=function(e){this.option("date",e)},i.prototype._resetData=function(){var e=this.element.data("defaultDate");e===undefined||e===null?this.options.date!==null&&(e=this.element.data("elementValue"),e!==undefined&&e!==null&&e!==""?this.setText(e):this._setData(null)):this._setData(e)},i.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0),this.element.data("timeStamp",new Date("1900/1/1")),this.element.data("lastInputChar","")},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isDateNull())return"";var t=this._textProvider.toString();return t===this.options.nullText?"":t},i.prototype._highLightAllField=function(){if(this.isFocused()){var e=this._textProvider.getAllRange();if(e)try{this.element.wijtextselection(e)}catch(t){}}},i.prototype._highLightField=function(e){typeof e=="undefined"&&(e=this.options.activeField);if(this.isFocused()){var t=this._textProvider.getFieldRange(e);if(t)try{this.element.wijtextselection(t)}catch(n){}}},i.prototype._highLightCursor=function(e){if(this._isNullText())return;e===undefined&&(e=Math.max(0,this.element.wijtextselection().start));var t=this._textProvider.getCursorField(e);if(t<0)return;this._setOption("activeField",t)},i.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)},i.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)},i.prototype._toFirstField=function(){this._setOption("activeField",0)},i.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())},i.prototype._clearField=function(e){typeof e=="undefined"&&(e=this.options.activeField);var n=this._textProvider.getFieldRange(e),r,i=this;n&&(r=new t.wijInputResult,this._textProvider.removeAt(n.start,n.end,r),this._updateText(),window.setTimeout(function(){i._highLightField()},1))},i.prototype.spinUp=function(){this._doSpin(!0,!1)},i.prototype.spinDown=function(){this._doSpin(!1,!1)},i.prototype.drop=function(){e.prototype._onTriggerClicked.call(this)},i.prototype.focus=function(){e.prototype.focus.call(this),this._addState("focus",this.outerDiv),this._updateText(),this.options.highlightText=="all"?this._highLightAllField():this._highLightField()},i.prototype.isDateNull=function(){return this.options.date===null||this.options.date===undefined},i.prototype._min=function(e,t){return t==undefined?e:e<t?e:t},i.prototype._max=function(e,t){return t==undefined?e:e>t?e:t},i.prototype._allowEdit=function(){return!this.option("disableUserInput")},i.prototype._onFocus=function(n){var r=this;e.prototype._onFocus.call(this,n);if(!this._allowEdit())return;this._updateText();if(this.element.data("IsInSelectTextMethod")==1)return;if(t.CoreUtility.chrome){var i=this;i.element.data("needResoteActiveField",!0),window.setTimeout(function(){i.element.data("needResoteActiveField",!1),i.options.highlightText=="all"?i._highLightAllField():i._highLightField()},200)}else this.options.highlightText=="all"?(this._highLightAllField(),this.element.data("ignoreHighLight",!0)):this._highLightField();t.CoreUtility.IPad&&(this._ipadRefreshTimer=setInterval(function(){r.element.data("ignoreHighLight")!=1&&r._highLightCursor()},400))},i.prototype._simulate=function(n){var r=null;if(typeof n=="string")r=n;else{var i=this.element.wijtextselection(),s=this.element.data("lastSelection").start,o=i.end;o>=s&&(r=this.element.val().substring(s,o))}for(var u=0;u<t.DateTimeInfo.GetEraCount();u++)if(r.toLowerCase()===t.DateTimeInfo.GetEraShortNames()[u].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraAbbreviations()[u].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraSymbols()[u].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraNames()[u].toLowerCase()){r=t.DateTimeInfo.GetEraShortNames()[u].toLowerCase();break}e.prototype._simulate.call(this,r)},i.prototype._doSpin=function(e,t){var n=this;if(!this._allowEdit())return!1;if(t&&this.element.data("breakSpinner"))return!1;e?this._trigger("spinUp",null):this._trigger("spinDown",null);if(this.options.date==null){this._setDefaultDate(e);return}var r=!1;e?r=this._textProvider.incEnumPart():r=this._textProvider.decEnumPart(),r&&(this._updateText(),this._highLightField());if(t&&!this.element.data("breakSpinner")){var i=window.setTimeout(function(){return n._doSpin(e,!0)},this._calcSpinInterval());this.element.data("spintimer",i)}return!0},i.prototype._setDefaultDate=function(e){e?this.options.date=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate():this.options.date=this._isEraFormatExist()?this._getRealEraMaxDate():this._getRealMaxDate(),this._updateText(),this._highLightField()},i.prototype._onChange=function(){},i.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},i.prototype._onBlur=function(n){e.prototype._onBlur.call(this,n),this._checkDate(),this._removeState("focus",this.outerDiv),this._updateText(),t.CoreUtility.IPad&&window.clearInterval(this._ipadRefreshTimer)},i.prototype._keyDownPreview=function(n){if(e.prototype._keyDownPreview.call(this,n))return!0;var i=n.keyCode||n.which,s;switch(i){case r.UP:case r.DOWN:if(n.altKey)return this._onTriggerClicked(),!0;if(this.element.data("pickerCurrentTab")!="List")return this._doSpin(i==r.UP,!1),this._stopEvent(n),!0;break;case r.LEFT:return this.options.activeField!=0||this.options.blurOnLeftRightKey.toLowerCase()!="left"&&this.options.blurOnLeftRightKey.toLowerCase()!="both"?this._toPrevField():(t.CoreUtility.MoveFocus(this.element.get(0),!1),this._trigger("keyExit")),!0;case r.RIGHT:return this.options.activeField!=this._textProvider.getFieldCount()-1||this.options.blurOnLeftRightKey.toLowerCase()!="right"&&this.options.blurOnLeftRightKey.toLowerCase()!="both"?this._toNextField():(t.CoreUtility.MoveFocus(this.element.get(0),!0),this._trigger("keyExit")),!0;case r.ENTER:if(this._wasPopupShowing)return this.element.data("pickerCurrentTab")=="Calendar"?this.options.date==null&&this._setOption("date",new Date):this.element.data("pickerCurrentTab")=="List"?this._processKeyForDropDownList(n):this._okButtonMouseDown(null,null),this._hidePopup(),!0;this.options.hideEnter&&e.prototype._stopEvent.call(this,n);break;case r.TAB:if(this.options.tabAction!=="field"||this.options.highlightText!=="field"){this._trigger("keyExit");break}s=this.element.wijtextselection();if(s&&s.end-s.start!==this.element.val().length){if(n.shiftKey){if(!(this.options.activeField>0)){this._trigger("keyExit");break}this._toPrevField()}else{if(!(this.options.activeField<this._textProvider.getFieldCount()-1)){this._trigger("keyExit");break}this._toNextField()}return!0}break;case r.SPACE:case 188:case 190:case 110:case 191:if(n.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0;break;case r.HOME:return n.ctrlKey?this._setOption("date",new Date):this._toFirstField(),!0;case r.END:return n.ctrlKey?this._processClearButton():this._toLastField(),!0;case r.BACKSPACE:case r.DELETE:if(this._allowEdit())return this._processDeleteKey(),!0}return!1},i.prototype._processDeleteKey=function(){if(this.options.date==null)return;var e=this.element.wijtextselection();if(e.end-e.start===this.element.val().length){var t=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate();if(this.options.date>t){this._setOption("date",t);return}}else{var n=this.options.activeField,r=this._textProvider.getFiledText(n);this._clearField();var i=this._textProvider.getFiledText(n);if(r!=i)return}this._processClearButton()},i.prototype._autoMoveToNextField=function(e,t){if(!this.options.autoNextField)return;this._textProvider.needToMove(this.options.activeField,e,t)&&this._toNextField()},i.prototype._processClearButton=function(){this._allowEdit()?this._setOption("date",null):this._updateText()},i.prototype._autoMoveToNextControl=function(e,n,r){if(!this.options.blurOnLastChar||r!==this._textProvider.getFieldCount()-1)return;this._textProvider.needToMove(r,e,n)&&(t.CoreUtility.MoveFocus(this.element.get(0),!0),this._trigger("keyExit"))},i.prototype._keyPressPreview=function(e){var t=e.keyCode||e.which,n,i,s,o,u,a,f,l,c,h;if(t===r.ENTER)return this.isDateNull()&&this._setOption("date",new Date),!1;n=this._textProvider.getFieldRange(this.options.activeField);if(n){if(t===r.TAB)return!0;if(t===r.SPACE)return this._stopEvent(e),!0;i=String.fromCharCode(t),s=this._textProvider.isFieldSep(i,this.options.activeField);if(s)return this._toNextField(),this._stopEvent(e),!0;o=this.element.data("cursorPos"),u=new Date,f=this.element.data("timeStamp"),h=this.element.data("lastInput"),a=u.getTime()-f.getTime()>this.options.keyDelay;var p=i;a?o=0:h&&(p=h+p),this.element.data({timeStamp:u,lastInput:p}),l=n.start+o,this.element.data("cursorPos",++o);var d=this.options.date==null;c=this._textProvider.addToField(p,this.options.activeField,l);var v=this.options.activeField;return c?(this._updateText(),this._autoMoveToNextField(o,i),this._highLightField(),this._autoMoveToNextControl(o,i,v)):(d&&this._setOption("date",null),this._resetTimeStamp(),this._fireIvalidInputEvent()),v!=this.options.activeField?this.element.data("lastInputChar",""):this.element.data("lastInputChar",i),this._stopEvent(e),!0}return!1},i.prototype._raiseDataChanged=function(){var e=this.options.date,t=this.element.data("preDate");this.element.data("preDate",e?new Date(e.getTime()):null);if(!t&&e||t&&!e||t&&e&&t.getTime()!==e.getTime())this._popupVisible()&&this._syncCalendar(),this.element.attr("aria-valuenow",e),this._trigger("dateChanged",null,{date:e})},i.prototype._isMinDate=function(e){return e.getFullYear()===1&&e.getMonth()===0&&e.getDate()===1},i.prototype._reInitPicker=function(){this._destroyPicker(),this._initPicker()},i.prototype._destroy=function(){e.prototype._destroy.call(this),this._destroyPicker()},i.prototype._destroyPicker=function(){var e=this.element.data("pickers");e!=undefined&&(this.element.data("pickers",null),this.element.data("calendar",null),this.element.data("datePicker",null),this.element.data("timePicker",null),this._comboDiv=undefined)},i.prototype._initPicker=function(){var e=this,r=this.element.data("pickers");if(r!=undefined)return;var i=this;this._initPickerData();var s=this._getPickerCount(),o=this.element.data("pickerWidth"),u=this.element.data("pickerHeight"),a=this.element.data("pickerAreaHeight");s>1&&(u+=8,a+=8);var f=s>1?u:a;r=n("<table/>").appendTo(document.body).attr({"class":"ui-widget-content ui-corner-all",borderWidth:"0px",cellspacing:"0px",cellpadding:"0px",cursor:"default"}).css({"font-size":"12px"}).mouseup(function(e){e.stopPropagation()});var l=n("<tr/>").appendTo(r),c=n("<tr/>").appendTo(r),h=n("<td/>").appendTo(l).css({width:"100%",height:"100%"}),p=n("<td/>").appendTo(c).attr("align","center").css({width:"100%",height:"30px",display:"none"}),d=n("<input type='button'/>").appendTo(p).attr({"class":"ui-state-active ui-widget",value:"OK"}).css({width:"80px",height:"26px",margin:"1px","text-align":"center",cursor:"pointer",visibility:"hidden"}).mousedown(function(e){i._okButtonMouseDown(e)}),v=n("<div/>").appendTo(h).css({width:"100%",height:"100%",padding:"0px",margin:"0px",borderWidth:"0px",overflow:"hidden"}),m=n("<ul/>").css({"line-height":"1px","font-size":"12px"});s>1&&m.appendTo(v);var g="";if(this._isCalendarPickerShown()){s>1?this._addPickerTab(m,"Calendar","#calendarDiv"):t.CoreUtility.IsIE9()&&(h.css({width:""}),v.css({width:""})),this._initCalendarPicker();var y=this.element.data("calendar");this._addPickerEditor(v,y,"calendarDiv"),g="Calendar"}this._isListPickerShown()&&(s>1&&this._addPickerTab(m,"List","#listDiv"),this._initListPicker(),this._addPickerEditor(v,this._comboDiv,"listDiv"),g=g==""?"List":g);if(this._isDatePickerShown()){s>1&&this._addPickerTab(m,"Date","#dateDiv"),this._wijinputdateroller._initDatePicker();var b=this.element.data("datePicker");this._addPickerEditor(v,b,"dateDiv"),g=g==""?"Date":g}if(this._isTimePickerShown()){s>1&&this._addPickerTab(m,"Time","#timeDiv"),this._wijinputdateroller._initTimePicker();var w=this.element.data("timePicker");this._addPickerEditor(v,w,"timeDiv"),g=g==""?"Time":g}if(g=="Calendar")r.css({width:o+"px",height:"","font-size":""});else if(g=="Date"||g=="Time")p.css({display:""}),r.css({width:o+"px",height:u+"px","font-size":"12px"}),v.css({height:f+"px"});this.element.data("pickerCurrentTab",g);var i=this;v.wijtabs({select:function(e,n){var s=n.tab.outerText||n.tab.text;p.css({display:"none"}),i.element.data("pickerCurrentTab",s);if(s=="Calendar")t.CoreUtility.IPad||i.focus(),r.css({width:o+"px",height:"","font-size":""}),v.css({height:"100%"});else if(s=="List"){var a=i._getListPickerWidth();i._comboDiv.wijlist("option","width",a),r.css({width:a,height:"","font-size":""}),v.css({height:"100%"}),i._comboDiv.wijlist("renderList"),t.CoreUtility.IPad||i._comboDiv.focus()}else{t.CoreUtility.IPad||i.focus();if(s=="Time"||s=="Date")p.css({display:""}),r.css({width:o+"px",height:u+"px","font-size":"12px"}),v.css({height:f+"px"})}}}),r.wijpopup({autoHide:!0,hidden:function(){e._trigger("dropDownClose"),e._wasPopupShowing=!1},shown:function(){e._trigger("dropDownOpen"),e._wasPopupShowing=!0}}),this.element.data("pickers",r),this.element.data("divPickers",v),this.element.data("divOK",d)},i.prototype._initPickerData=function(){var e=70,t=32,n=26,r=30,i=150,s=100,o=235,u=242,a=220,f=220,l=this._getPickerCount(),c=l*e,h=s;c=c<i?i:c,this._isCalendarPickerShown()&&(c=c<o?o:c,h=h<u?u:h);if(this._isListPickerShown()){var p=this._getcomboItems();if(p!=undefined){var d=p.length*n;h=h<d?d:h}}if(this._isDatePickerShown()){c=c<a?a:c,h=h<a?a:h;var v=this._wijinputdateroller._getDatePickerMinYear(),m=this._wijinputdateroller._getDatePickerMaxYear(),g=this._wijinputdateroller._getDefaultDatePickerFormat(),y=this.options.pickers.datePicker.format!=undefined?this.options.pickers.datePicker.format:g,b=y.split(",");b.length!=3&&(b=g.split(","),this.options.pickers.datePicker.format=g);var w=this._wijinputdateroller._getRollFormat(b,"y"),E=this._wijinputdateroller._getRollFormat(b,"M"),S=this._wijinputdateroller._getRollFormat(b,"d");if(!this._wijinputdateroller._isValidatePickerFormat(w)||!this._wijinputdateroller._isValidatePickerFormat(E)||!this._wijinputdateroller._isValidatePickerFormat(S))b=g.split(","),w=this._wijinputdateroller._getRollFormat(b,"y"),E=this._wijinputdateroller._getRollFormat(b,"M"),S=this._wijinputdateroller._getRollFormat(b,"d"),this.options.pickers.datePicker.format=g;this.element.data("pickerDateYearFormat",w),this.element.data("pickerDateMonthFormat",E),this.element.data("pickerDateDayFormat",S),this.element.data("pickerMinYear",v),this.element.data("pickerMaxYear",m),this.element.data("pickerDateFormat",b)}if(this._isTimePickerShown()){c=c<a?a:c,h=h<a?a:h;var x=this._wijinputdateroller._getDefaultTimePickerFormat(),T=this.options.pickers.timePicker.format!=undefined?this.options.pickers.timePicker.format:x,N=T.split(",");N.length!=3&&(N=x.split(","),this.options.pickers.timePicker.format=x);var C=this._wijinputdateroller._getRollFormat(N,"h"),k=this._wijinputdateroller._getRollFormat(N,"m"),L=this._wijinputdateroller._getRollFormat(N,"t");if(!this._wijinputdateroller._isValidatePickerFormat(C)||!this._wijinputdateroller._isValidatePickerFormat(k)||!this._wijinputdateroller._isValidatePickerFormat(L))N=x.split(","),C=this._wijinputdateroller._getRollFormat(N,"h"),k=this._wijinputdateroller._getRollFormat(N,"m"),L=this._wijinputdateroller._getRollFormat(N,"t"),this.options.pickers.timePicker.format=x;this.element.data("pickerTimeHourFormat",C),this.element.data("pickerTimeMinuteFormat",k),this.element.data("pickerTimeAMFormat",L),this.element.data("pickerTimeFormat",N)}var A=this.options.pickers.width!=undefined?this.options.pickers.width:0,O=this.options.pickers.height!=undefined?this.options.pickers.height:0;A=A<c?c:A,O=O<h?h:O,O-=l>1?t:0;var M=O-r,_=Math.floor(M/5)+1,D=_*2,P=_*5+6,H=_*4-3,B=_*2+2,j=_;this.element.data("itemHeight",_),this.element.data("indicatorHeight",D),this.element.data("pickerWidth",A),this.element.data("pickerHeight",O),this.element.data("pickerAreaHeight",M),this.element.data("indicatorTranslateTop",P),this.element.data("indicatorTranslateDown",H),this.element.data("indicatorTranslateSelector",B),this.element.data("indicatorTranslateContent",j)},i.prototype._initListPicker=function(){var e=this;if(this._comboDiv!==undefined)return;this._comboDiv=n("<div/>").css({overflow:"hidden",display:"block",left:"",top:"",position:""});var r=this._normalize(this._getcomboItems());this._comboDiv.wijlist({maxItemsCount:5,autoSize:!0,selected:function(t,n){e.options.disableUserInput||e._setData(n.item.value);var r=e.element.data("pickers");setTimeout(function(){try{r!=undefined&&r.wijpopup("hide")}catch(e){}},250),e._trySetFocus()}}),this._comboDiv.wijlist("setItems",r),this._comboDiv.wijlist("renderList"),t.CoreUtility.IsIE7()&&this._comboDiv.attr("align","left")},i.prototype._initCalendarPicker=function(){var e=this,t=this.element.data("calendar");if(t!=undefined)return;var r=n("<div/>");t=n(r);if(t.length!==1)return;this.element.data("calendar",t),this.options.calendar=t,this.options.localization&&(this.options.nextTooltip=this.options.localization.nextTooltip,this.options.prevTooltip=this.options.localization.prevTooltip,this.options.titleFormat=this.options.localization.titleFormat,this.options.toolTipFormat=this.options.localization.toolTipFormat),t.wijcalendar({popupMode:!0,culture:this.options.culture,cultureCalendar:this.options.cultureCalendar,nextTooltip:this.options.nextTooltip||"Next",prevTooltip:this.options.prevTooltip||"Previous",titleFormat:this.options.titleFormat||"MMMM yyyy",toolTipFormat:this.options.toolTipFormat||"dddd, MMMM dd, yyyy",afterSlide:function(){e.options.afterSlide!=null&&e.options.afterSlide.call(e,null)},selectedDatesChanged:function(){var n=t.wijcalendar("getSelectedDate"),r=e.option("date");e._wasPopupShowing=!1;var i=e.element.data("pickers");setTimeout(function(){try{i!=undefined&&i.wijpopup("hide")}catch(e){}},250),n&&(r&&(n.setHours(r.getHours()),n.setMinutes(r.getMinutes()),n.setSeconds(r.getSeconds()),n.setMilliseconds(r.getMilliseconds())),e._allowEdit()&&(e.option("date",n),e.selectText())),e._trySetFocus()}}),t.css({display:"block",left:"",top:"",position:"","margin-bottom":"0px"}),this._syncCalendar(),this._updateCalendarPicker()},i.prototype._updateCalendarPicker=function(){var e=this.element.data("calendar"),t=this.options.pickers;if(e==undefined||t==undefined)return;if(t.calendar==undefined)return;t.calendar.allowQuickPick!=undefined&&e.wijcalendar("option","allowQuickPick",t.calendar.allowQuickPick),t.calendar.navButtons!=undefined&&e.wijcalendar("option","navButtons",t.calendar.navButtons),t.calendar.nextTooltip!=undefined&&e.wijcalendar("option","nextTooltip",t.calendar.nextTooltip),t.calendar.prevTooltip!=undefined&&e.wijcalendar("option","prevTooltip",t.calendar.prevTooltip),t.calendar.showDayPadding!=undefined&&e.wijcalendar("option","showDayPadding",t.calendar.showDayPadding),t.calendar.showOtherMonthDays!=undefined&&e.wijcalendar("option","showOtherMonthDays",t.calendar.showOtherMonthDays),t.calendar.showTitle!=undefined&&e.wijcalendar("option","showTitle",t.calendar.showTitle),t.calendar.showWeekDays!=undefined&&e.wijcalendar("option","showWeekDays",t.calendar.showWeekDays),t.calendar.showWeekNumbers!=undefined&&e.wijcalendar("option","showWeekNumbers",t.calendar.showWeekNumbers),t.calendar.titleFormat!=undefined&&e.wijcalendar("option","titleFormat",t.calendar.titleFormat),t.calendar.toolTipFormat!=undefined&&e.wijcalendar("option","toolTipFormat",t.calendar.toolTipFormat),t.calendar.weekDayFormat!=undefined&&e.wijcalendar("option","weekDayFormat",t.calendar.weekDayFormat)},i.prototype._okButtonMouseDown=function(e,t){var n=this.element.data("pickerYear"),r=this.element.data("pickerMonth")-1,i=this.element.data("pickerDay"),s=this.element.data("pickerHour"),o=this.element.data("pickerMinute"),u=this.element.data("pickerAM");s==12&&(s=0),u==1&&(s+=12);var a=this._getPickerValue();a.setFullYear(n),a.setMonth(r),a.setDate(i),a.setHours(s),a.setMinutes(o),this._wasPopupShowing=!1;var f=this.element.data("pickers");setTimeout(function(){if(f!=undefined)try{f.wijpopup("hide")}catch(e){}},250),this._allowEdit()&&(this.option("date",a),this.selectText()),this._trySetFocus()},i.prototype._getListPickerWidth=function(){var e=this._getcomboWidth(),t=this.element.data("pickerWidth"),n=e!=undefined?e:this.outerDiv.width();return t>n?t+"px":n+"px"},i.prototype._getPickerValue=function(){var e=this.options.date;return e=e==null?new Date:e,e},i.prototype._getStandardAMPM=function(e){var t=this._getCulture();if(t&&t.calendar){var n=t.calendars.standard[e];if(n)return n[0]}return e},i.prototype._syncCalendar=function(){var e=this.element.data("calendar");if(!e)return;var t=this._safeGetDate();if(t==null||this._isMinDate(t))t=new Date;e.wijcalendar("option","displayDate",t),this.options.minDate&&e.wijcalendar("option","minDate",this.options.minDate),this.options.maxDate&&e.wijcalendar("option","maxDate",this.options.maxDate),e.wijcalendar("unSelectAll"),e.wijcalendar("selectDate",t),e.wijcalendar("refresh")},i.prototype._showPopup=function(){this._isDatePickerNeedReInit()&&this._reInitPicker();var e=this.element.data("pickers");if(e==undefined)return!1;e.wijpopup("show",n.extend({},this.options.popupPosition,{of:this.outerDiv}));var t=this._getPickerValue(),r=t.getHours();r>12?r-=12:r==0&&(r=12),this.element.data("pickerValue",t),this.element.data("pickerYear",t.getFullYear()),this.element.data("pickerMonth",t.getMonth()+1),this.element.data("pickerDay",t.getDate()),this.element.data("pickerHour",r),this.element.data("pickerMinute",t.getMinutes()),this.element.data("pickerAM",t.getHours()<12?0:1),this.element.data("divOK").css("visibility",""),this._isTimePickerShown()&&(this._wijinputdateroller._updateTimePicker(),e.attr({"class":"ui-widget-content ui-corner-all"})),this._isDatePickerShown()&&(this._wijinputdateroller._updateDatePicker(),e.css({"font-size":"12px"}).attr({"class":"ui-widget-content ui-corner-all"}));if(this._isListPickerShown()){this._getPickerCount()==1&&(e.attr({"class":""}),this._comboDiv.focus());if(this.element.data("pickerCurrentTab")=="List"){var i=this._getListPickerWidth();e.css({width:i,height:""}),e.css({"font-size":""});var s=this._comboDiv[0].parentElement;this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv,this._initListPicker(),this._comboDiv.appendTo(s),this._comboDiv.focus()}}return this._isCalendarPickerShown()&&(this._syncCalendar(),this.element.data("pickerCurrentTab")=="Calendar"&&(this._getPickerCount()<=1&&e.css({width:""}),e.css({"font-size":""}))),!0},i.prototype._hidePopup=function(){var e=this.element.data("pickers");e!=undefined&&e.wijpopup("hide"),this.element.data("divOK").css("visibility","hidden")},i.prototype._popupVisible=function(){var e=this.element.data("pickers");return e!=undefined?e.wijpopup("isVisible"):!1},i.prototype._isComboListVisible=function(){return this._popupVisible()},i.prototype._isValidDate=function(e,t){if(e===undefined)return!1;if(isNaN(e))return!1;if(e.getFullYear()<1||e.getFullYear()>9999)return!1;if(t){if(this.options.minDate&&e<this.options.minDate)return!1;if(this.options.maxDate&&e>this.options.maxDate)return!1}return!0},i.prototype._isDatePickerNeedReInit=function(){if(!this._isDatePickerShown())return!1;var e=this.element.data("pickerMinYear"),t=this.element.data("pickerMaxYear"),n=this._getPickerValue().getFullYear();if(n<e||n>t)return!0;var r=this._isEraFormatExist()?this._getRealEraMinDate().getFullYear():this._getRealMinDate().getFullYear(),i=this._isEraFormatExist()?this._getRealEraMaxDate().getFullYear():this._getRealMaxDate().getFullYear();return e<r||t>i?!0:!1},i.prototype._isDropDownButtonShown=function(){return this.options.showDropDownButton},i.prototype._isCalendarPickerShown=function(){return this.options.pickers.calendar!=undefined&&this.options.pickers.calendar.visible!==!1||this._getPickerCount()==0},i.prototype._isListPickerShown=function(){var e=this._getcomboItems();return e!=undefined&&e.length!=undefined?e.length>0:!1},i.prototype._isTimePickerShown=function(){return this.options.pickers.timePicker!=undefined&&this.options.pickers.timePicker.visible!==!1&&this._wijinputdateroller!==null},i.prototype._isDatePickerShown=function(){return this.options.pickers.datePicker!=undefined&&this.options.pickers.datePicker.visible!==!1&&this._wijinputdateroller!==null},i.prototype._getPickerCount=function(){var e=0,t=this.options.pickers.calendar!=undefined&&this.options.pickers.calendar.visible!==!1;return e+=t?1:0,e+=this._isListPickerShown()?1:0,e+=this._isTimePickerShown()?1:0,e+=this._isDatePickerShown()?1:0,e},i.prototype._addPickerEditor=function(e,t,r){var i=n("<div/>").attr({id:r,align:"center"}).css({padding:"0px"}).append(t).appendTo(e)},i.prototype._addPickerTab=function(e,t,r){var i=n("<li/>").appendTo(e).css("line-height","1px"),s=n("<a/>").attr("href",r).html(t).appendTo(i)},i.prototype._internalSetDate=function(e){var t=this,n=this.options,r=this.element,i=!!r.data("typing"),s;i?(n.date=e,s=function(){var e=new Date,i=r.data("timeStamp");i&&(e.getTime()-i.getTime()>n.keyDelay?(t._safeSetDate(n.date,!0),t._updateText(),t._highLightField()):window.setTimeout(s,n.keyDelay))},window.setTimeout(s,n.keyDelay)):this._safeSetDate(e)},i.prototype.selectText=function(t,n){typeof t=="undefined"&&(t=0),typeof n=="undefined"&&(n=this.getText().length);if(this.isFocused())e.prototype.selectText.call(this,t,n);else{this.element.data("IsInSelectTextMethod",!0),this.focus();var r=this;setTimeout(function(){try{r.selectText(t,n)}catch(e){}},0),this.element.data("IsInSelectTextMethod",!1)}},i}(t.wijinputcore);t.wijinputdate=i;var s=function(){function e(){this.wijCSS={wijinputdate:t.wijinputcore.prototype.options.wijCSS.wijinput+"-date"},this.date=undefined,this.minDate=null,this.maxDate=null,this.dateFormat="d",this.displayFormat="",this.amDesignator="",this.pmDesignator="",this.midnightAs0=!0,this.hour12As0=!1,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.tabAction="field",this.startYear=1950,this.smartInputMode=!1,this.activeField=0,this.keyDelay=800,this.autoNextField=!0,this.calendar=null,this.popupPosition={offset:"0 4"},this.afterSlide=null,this.highlightText="field",this.increment=1,this.imeMode="auto",this.showDropDownButton=!0,this.showTrigger=undefined,this.pickers={list:undefined,width:undefined,height:undefined,calendar:undefined,datePicker:undefined,timePicker:undefined},this.dateChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputdate",i.prototype);var o=function(){function e(e,n,r){this.inputWidget=e,this._disableSmartInputMode=!1,this.paddingZero=t.paddingZero,this.formatter=new t.wijDateTextFormatter(e,n,!1),r=r==""?n:r,this.displayFormatter=new t.wijDateTextFormatter(e,r,!0)}return e.prototype.initialize=function(){},e.prototype.getFiledText=function(e){var t=this.formatter.fields[e];return t.getText()},e.prototype.getFieldCount=function(){return this.formatter.fields.length},e.prototype.getFieldRange=function(e){e>=this.formatter.fields.length&&(e=this.formatter.fields.length-1);var t=this.formatter.fields[e];return{start:t.startIndex,end:t.startIndex+t.getText().length}},e.prototype.getAllRange=function(){return{start:0,end:this.formatter.toString().length}},e.prototype.getCursorField=function(e){if(this.formatter.desPostions.length==0)return 0;e=Math.min(e,this.formatter.desPostions.length-1),e=Math.max(e,0);var t=this.formatter.desPostions[e].desc,r;if(t.type===-1){r=n.inArray(t,this.formatter.descriptors);if(!(r>0&&this.formatter.descriptors[r-1].type!==-1))return-1;t=this.formatter.descriptors[r-1]}return n.inArray(t,this.formatter.fields)},e.prototype.needToMove=function(e,n,r){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),!0))return!1;var i=this.formatter.fields[e];switch(i.type){case 72:case 73:case 74:for(var s=0;s<t.DateTimeInfo.GetEraCount();s++)if(r.toLowerCase()===t.DateTimeInfo.GetEraShortcuts()[s].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraShortNames()[s].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraAbbreviations()[s].toLowerCase()||r.toLowerCase()===t.DateTimeInfo.GetEraNames()[s].toLowerCase())return!0;return!1}var o=parseInt(r,10);if(n===i.maxLen)return!0;if(isNaN(o))return!1;var u=this.inputWidget.element.data("lastInputChar");switch(i.type){case 10:return this._isSmartInputMode()&&n===2;case 20:case 25:case 45:case 46:return u=="0"&&o==1?!0:o>1;case 47:case 48:return u=="0"&&o<=2?!0:o>2;case 30:case 31:return u=="0"&&o<=3?!0:o>3;case 50:case 51:case 60:case 61:return u=="0"&&o<=6?!0:o>6;case 70:case 71:return!1}return!1},e.prototype._isEraFormatExist=function(){return this.formatter._isEraFormatExist()},e.prototype._getCulture=function(){return this.inputWidget._getCulture()},e.prototype._isDigitString=function(e){e=n.trim(e);if(e.length===0)return!0;var t=e.charAt(0),r,i;if(t==="+"||t==="-")e=e.substr(1),e=n.trim(e);if(e.length===0)return!0;try{return r=parseFloat(e),i=r.toString(),i===e}catch(s){return!1}},e.prototype._setFormat=function(e){return this.formatter._setFormat(e)},e.prototype._setDisplayFormat=function(e){return this.displayFormatter._setFormat(e)},e.prototype._internalSetDate=function(e){this.inputWidget&&this.inputWidget._internalSetDate(e)},e.prototype.toString=function(){if(this.inputWidget._isEraFormatExist()&&this.inputWidget.options.date!=null){var e=this.inputWidget._getRealEraMinDate(),t=this.inputWidget._getRealEraMaxDate();if(this.inputWidget.options.date<e||this.inputWidget.options.date>t)return""}return this.inputWidget.isFocused()?this.formatter.toString():this.inputWidget.isDateNull()&&this.inputWidget._getInnerNullText()!=null?this.inputWidget._getInnerNullText():this.displayFormatter.toString()},e.prototype.parseDate=function(e){var t;return t=n.wijinputcore.parseDate(e,this.formatter.pattern,this._getCulture()),t},e.prototype.setText=function(e){if(e==="")this._internalSetDate(null);else{var t=new Date(e);isNaN(t.getTime())&&(t=this.parseDate(e)),t==null?this._internalSetDate(new Date(e)):this._internalSetDate(t)}return!0},e.prototype.haveEnumParts=function(){return!1},e.prototype.removeLiterals=function(e){return e=""+e+"",e=e.replace(new RegExp("[+]","g"),""),e=e.replace(new RegExp("[.]","g"),""),e=e.replace(new RegExp("[:]","g"),""),e=e.replace(new RegExp("[-]","g"),""),e=e.replace(new RegExp("[()=]","g"),""),e},e.prototype.getFirstDelimiterPos=function(e,t){var n=0,r=0,i,s;while(n<t.length&&r<e.length){i=t.charAt(n),s=e.charAt(r);if(i!==s)return r-1;r++,n++}return e.length-1},e.prototype.isFieldSep=function(e,t){var n=t++,r;return n<this.formatter.descriptors.length?(r=this.formatter.descriptors[n],r.type!==-1?!1:e===r.text):!1},e.prototype.getPositionType=function(e){var t=this.formatter.desPostions[e];return t.desc.type},e.prototype.addToField=function(e,t,n){var r=this.formatter.fields[t],i,s,o;return i=e,s={val:e,pos:0,offset:0,isreset:!1},this.inputWidget.element.data("typing",!0),o=r.setText(i,e.length===1?!1:!0,s,this._isSmartInputMode()),this.inputWidget.element.data("typing",!1),o},e.prototype.insertAt=function(e,n,r){typeof r=="undefined"&&(r=new t.wijInputResult),r.testPosition=-1;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(e.length===1){i=this.formatter.desPostions[n];if(i&&i.desc.type===-1&&i.text===e)return r.testPosition=n,r.hint=r.characterEscaped,!0}s=e,o=n,e=this.removeLiterals(e),u=e,a=!1,l=!1,o>0&&u.length===1&&(o--,n=o,i=this.formatter.desPostions[o],a=!0,i&&(i.desc.type===-1||i.desc.getText().length!==1)&&(n++,o++,a=!1)),f=!1;while(u.length>0&&o<this.formatter.desPostions.length){i=this.formatter.desPostions[o];if(i.desc.type===-1){o+=i.length;continue}if(i.desc.needAdjustInsertPos()){c=u.substr(0,i.length-i.pos),c=i.text.slice(0,i.pos)+c+i.text.slice(i.pos+c.length,i.length),a&&(c=i.text+c),l&&(c+=i.text),p=i.desc.getText().length,v="";try{e.length===1&&(i.pos?i.pos>0&&(v=c.substring(0,i.pos+1)):v=e)}catch(E){}p===1&&c.length>1&&e.length===1&&(i.desc.type===31||i.desc.type===25)&&(this._disableSmartInputMode=!0),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),this._disableSmartInputMode=!1,!f&&typeof v!="undefined"&&v.length>0&&(i.desc.type===26||i.desc.type===27||i.desc.type===100||i.desc.type===101||i.desc.type===250||i.desc.type===251)&&(f=i.desc.setText(v,e.length===1?!1:!0,h));if(f)r.hint=r.success,r.testPosition=o+h.offset,e.length===1&&(m=i.desc.getText().length,d=i.pos,i.pos>m-1&&(d=m),g=m-p,g>0&&i.pos===p-1&&(d=m-1),y=this.toString(),r.testPosition=i.desc.startIndex+d+h.offset),u=u.slice(i.length-i.pos,u.length);else{r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n);if(i.desc.type!==-1&&e.length===1)return!1}o+=i.length}else b=this.getFirstDelimiterPos(u,s),b<0&&(b=0),c=u.substring(0,b+1),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),f?(r.hint=r.success,r.testPosition=o+h.offset,u=u.slice(b+1,u.length)):(r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n)),b<0&&(b=0),w=b+1,o+=w}return f},e.prototype.removeAt=function(e,t,n,r){try{var i=this.formatter.desPostions[e],s,o,u,a,f=this.inputWidget,l=f.element,c=l.val().length;return c===t+1&&e===0&&(f.isDeleteAll=!0),i.desc.needAdjustInsertPos()&&(s="0",o=e,i.text=i.desc.getText(),s=i.text.slice(0,i.pos)+s+i.text.slice(i.pos+s.length,i.length),i.desc.name==="tt"?s="AM":i.desc.name==="t"?s="A":i.desc.formatString==="ee"?s="01":i.desc.formatString==="e"&&(s="1"),u={val:s,pos:i.pos,offset:0,isreset:!0,isfullreset:!1},t-e+1>=i.length&&(u.isfullreset=!0,e+=i.length,o=e),a=i.desc.setText(s,!1,u,this._isSmartInputMode()),a?(n.hint=n.success,n.testPosition=o):(n.hint=n.invalidInput,n.testPosition===-1&&(n.testPosition=e))),e<t&&this.removeAt(e+1,t,n),!0}catch(h){return!1}},e.prototype.incEnumPart=function(){var e=this.formatter.fields[this.inputWidget.options.activeField];return e&&e.inc(),!0},e.prototype.decEnumPart=function(){var e=this.formatter.fields[this.inputWidget.options.activeField];return e&&e.dec(),!0},e.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?!1:this.inputWidget?this.inputWidget.options.smartInputMode:!0},e.prototype._getInt=function(e,t,r,i){var s,o;for(s=i;s>=r;s--){o=e.substring(t,t+s);if(o.length<r)return null;if(n.wij.charValidator.isDigit(o))return o}return null},e.prototype._tryParseDate=function(e,t){var n=this._getCulture().calendars,r,i,s,o;return t=t||n.standard.patterns.d,t&&(t.indexOf("MMM")===-1&&t.indexOf("MMMM")===-1&&(t=t.replace("MM","M")),t=t.replace("dd","d"),t=t.replace("tt","a")),r=t.replace("yyyy","yy"),i=n.standard["/"],s=[t,r,t.replace(new RegExp(i,"g"),"-"),r.replace(new RegExp(i,"g"),"-"),t.replace(new RegExp(i,"g"),"."),r.replace(new RegExp(i,"g"),".")],o=Globalize.parseDate(e,s,this._getCulture()),o?o:(o=new Date(e),o.toString()!=="Invalid Date"&&e&&e!==""?o:0)},e.prototype._formatDate=function(e,n,r){var i=this;if(!e.valueOf())return"&nbsp;";var s=this.inputWidget._getCulture().calendars.standard,o=n.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(n){var o;switch(n){case"yyyy":return t.paddingZero(e.getFullYear(),4);case"MMMM":return r.dateTimeFormat.monthNames[e.getMonth()];case"MMM":return r.dateTimeFormat.abbreviatedMonthNames[e.getMonth()];case"MM":return i.paddingZero(e.getMonth()+1,2);case"M":return i.paddingZero(e.getMonth()+1,1);case"mm":return i.paddingZero(e.getMinutes(),2);case"m":return i.paddingZero(e.getMinutes(),1);case"dddd":return r.dateTimeFormat.dayNames[e.getDay()];case"ddd":return r.dateTimeFormat.abbreviatedDayNames[e.getDay()];case"dd":return i.paddingZero(e.getDate(),2);case"d":return i.paddingZero(e.getDate(),1);case"hh":return o=e.getHours()%12,i.paddingZero(o?o:12,2);case"h":return o=e.getHours()%12,i.paddingZero(o?o:12,1);case"HH":return i.paddingZero(e.getHours(),2);case"H":return i.paddingZero(e.getHours(),1);case"ss":return i.paddingZero(e.getSeconds(),2);case"s":return i.paddingZero(e.getSeconds(),1);case"tt":return e.getHours()<12?s.AM[0]:s.PM[0];case"t":return e.getHours()<12?s.AM[0].length>0?s.AM[0].charAt(0):"":s.PM[0].length>0?s.PM[0].charAt(0):"";case"a/p":return e.getHours()<12?"a":"p"}return"N"});return o},e.prototype.replaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},e}();t.wijDateTextProvider=o})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function t(e,t,n){this.filterLabel=e,this._include=n,this._owner=t}return t.prototype.Check=function(e,t){var n={};n.success=!1,n.strValue="",n.index=t;var r=e.Substring(t,t+1),i=this.IsValid(r);if(i)return e=e.Substring(t,t+1),t++,n.strValue=e,n.index=t,n;if(this._owner.GetAutoConvert()&&(r.length===1||r.length===3)){n=this.Convert(e,t);if(n.success)return n}return n},t.prototype.IsValid=function(t){return t.length===2&&(t.charCodeAt(1)===65438||t.charCodeAt(1)===65439)&&!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?this.IsValidTwoByte(t):t.length>1?this.IsValidMoreByte(t):this.IsValidTwoByte(t)},t.prototype.IsValidTwoByte=function(e){return!1},t.prototype.IsValidMoreByte=function(e){return!1},t.prototype.Convert=function(t,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=t.Substring(n,n+1),s,o=e.CharProcess.CharEx;if(o.IsAlphabet(i)){var u=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(u=o.IsFullWidth(u)?o.ToHalfWidth(u):o.ToFullWidth(u).text,s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}i=o.ToKatakana(i),s=this.IsValid(i);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var l=o.ToHalfWidthEx(i);s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r;if(o.IsLowerKana(l)){l=o.ToUpperKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}else if(o.HasLowerKana(l)){l=o.ToLowerKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var u=i,c=!1;if(o.IsFullWidth(i)){var h=o.ToHalfWidthEx(i);if(h.GetLength()>0){s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}if(o.IsLowerKana(h)){h=o.ToUpperKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}else if(o.HasLowerKana(h)){h=o.ToLowerKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}}else{if(n==null){u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=u,r}else{if(n+1<t.GetLength()){var p=o.ToFullWidth(t.Substring(n,n+2));u=p.text,c=p.processedAll}else u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,r}if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}u=o.ToHiragana(u),s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,u==="\u3094"&&(c?r.strValue="\u3046\u309b":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},t}();e.CharacterFilter=n;var r=function(t){function n(e,n){t.call(this,"HalfWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?t==="\r"||t==="\n"?!0:!1:!0},n}(n),i=function(t){function n(e,n){t.call(this,"FullWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),s=function(t){function n(e,n){t.call(this,"HiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsHiragana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),o=function(t){function n(e,n){t.call(this,"ShiftJISFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsShiftJIS(t)},n}(n),u=function(t){function n(e,n){t.call(this,"JISX0208Filter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsJISX0208(t)},n}(n),a=function(t){function n(e,n){t.call(this,"DBCSHiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsUpperKana(t)&&e.CharProcess.CharEx.IsHiragana(t)},n}(n),f=function(t){function n(e,n){t.call(this,"DBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),l=function(t){function n(e,n){t.call(this,"SBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),c=function(t){function n(e,n){t.call(this,"SurrogateFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsSurrogatePair(t)?!0:t==="\r"||t==="\n"?!0:!1},n.prototype.IsValidMoreByte=function(t){for(var n=0;n<t.length;n++)if(e.CharProcess.CharEx.IsSurrogate(t[n]))return!0;return!1},n}(n),h=function(t){function n(e,n){t.call(this,"HalfWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),p=function(t){function n(e,n){t.call(this,"FullWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),d=function(t){function n(e,n){t.call(this,"HalfWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),v=function(t){function n(e,n){t.call(this,"FullWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),m=function(e){function t(t,n,r,i){e.call(this,"LimitedFilter",r,i),this._includeChars=t,this._excludeChars=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t}(n),g=function(e){function t(t,n,r,i){e.call(this,"RangeFilter",r,i),this._startChar=t,this._endChar=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return e>=this._startChar&&e<=this._endChar?!0:e==="\r"||e==="\n"?!0:!1},t}(n),y=function(e){function t(t,n){e.call(this,"UnionFilter",t,n),this.filterArray=[]}return __extends(t,e),t.prototype.Add=function(e){if(e==null)return;e.filterLabel==="HiraganaFilter"?this.hiranagaFilter=e:e.filterLabel==="FullWidthKatakanaFilter"&&(this.katakanaFilter=e),this.filterArray.push(e)},t.prototype.AddRange=function(e){for(var t=0;t<e.length;t++)this.Add(e[t])},t.prototype.IsValidTwoByte=function(e){if(this.filterArray.length===0)return e==="\r"||e==="\n"?!0:!1;var t=!1,n=!1;for(var r=0;r<this.filterArray.length;r++)this.filterArray[r]._include&&(n=!0);var i=e==="\u30fc";if(i)if(this.hiranagaFilter&&this.katakanaFilter){if(n)return!0}else{if(this.hiranagaFilter)return!0;if(this.katakanaFilter)return!0}for(var r=0;r<this.filterArray.length;r++)if(this.filterArray[r].IsValid(e)){if(!this.filterArray[r]._include)return!1;t=!0}else n||(t=!0);return t?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this.IsValidTwoByte(e)},t}(n),b=function(){function e(e){this.minLength=-1,this.maxLength=-1,this.text="",this.oldText="",this.fieldLabel=e}return e.prototype.Snap=function(){var e={};return e.text=this.text,e.oldText=this.oldText,e},e.prototype.Revert=function(e){this.text=e.text,this.oldText=e.oldText},e.prototype.GetFieldText=function(){return this.oldText==null?null:this.oldText},e.prototype.GetText=function(){return this.text},e.prototype.SetText=function(e){this.text=e},e.prototype.GetFillingString=function(e){if(!e)return null;var t="";for(var n=0;n<this.minLength;n++)t+=e;return t},e.prototype.GetFieldStatus=function(){return 0},e.prototype.GetTextExcludeLiterals=function(e,t){var n=this.text.GetLength();n<t&&(t=n);var r=this.text.Substring(e,t);return r=r.replace(/[^\d]/g,""),r},e.prototype.SaveOldState=function(){},e.prototype.RollBack=function(){},e.prototype.PerformSpin=function(e,t,n){return 0},e.prototype.Insert=function(e,t,n,r){},e.prototype.Replace=function(e,t,n){},e.prototype.Delete=function(e,t){},e.prototype.SaveUndoState=function(){},e.prototype.Clear=function(){this.text=null},e.prototype.Undo=function(){},e.prototype.SetTextInternal=function(e,t,n,r){},e.prototype.GetLength=function(){return this.text.GetLength()>this.minLength?this.text.GetLength():this.minLength},e}();e.Field=b;var w=function(e){function t(t){e.call(this,"PromptField"),this.text=t,this.minLength=this.text.GetLength(),this.maxLength=this.text.GetLength()}return __extends(t,e),t.prototype.GetFillingString=function(){return this.text},t.prototype.SetText=function(e){var t={};return e===this.promptText?(t.existInvalid=!1,e=e.Substring(this.text.GetLength())):t.existInvalid=!0,t.text=e,t},t.prototype.GetLength=function(){return this.text.GetLength()},t}(b),E=function(t){function r(e){t.call(this,"FilterField"),this._minLength=0,this._maxLength=0,this._filter=new n,this._bitStates=null,this._oldBitState=null,this.undoText="",this.undoTempText="",this._undoBitState=null,this._trueLength=0,this._bitState=null,this._owner=e}return __extends(r,t),r.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},r.prototype.GetAutoConvert=function(){return this._owner.GetAutoConvert()},r.prototype.FilterField=function(e,t,n,r){if(e>t)return!1;if(!n)return!1;this._minLength=e,this._maxLength=t,this._filter=n,this._bitState=r,this._oldBitState=r,this._undoBitState=r,this._trueLength=0;if(this._bitState!=null){var i=0;while(this._bitState[i]!=null)i++;for(var s=i;s>=0;s--)if(this._bitState[s]!=null)this._bitState[s]===!1&&this._trueLength--;else{if(this._bitState[s]!=null)break;this._trueLength--}}return this.Clear(),!0},r.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!=-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!=-1)e=e.replace("@#GCM#@",'"');this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},r.prototype.GetFieldStatus=function(){return this._trueLength>=this._minLength&&this._trueLength>0?2:this._trueLength>0&&this._trueLength<this._minLength?1:0},r.prototype.GetFieldIsFull=function(){if(this._trueLength>=this._minLength&&this._trueLength>0){for(var e=0;e<this._trueLength;e++)if(this._bitState[e]===!1)return!1;return!0}return!1},r.prototype.SetTextInternal=function(t,n,r,i){var s={};s.offset=n,s.text=t,s.existInvalid=!1,s.exception=!1;var o=!1;if(n>this._maxLength||t===""||t.GetLength()===0)return s;var u="",a=0,f=[],l=n;for(var c=0;c<n;c++)f[c]=this._bitState[c];while(a<t.GetLength()){var h=this._filter.Check(t,a),p=h.strValue;a=h.index;if(p===""&&t.Substring(a,a+1)!==this.GetPromptChar()){if(!r&&n+u.GetLength()>=this._minLength&&n+u.GetLength()===this._trueLength+u.GetLength())break;o=!0,a++;break}p!==""?(i&&i!==""&&i.Substring(l,l+1)===e.Utility.MaskValChar?(u+=this.GetPromptChar(),f[l]=!1):p==="\r"||p==="\n"?(u+=this.GetPromptChar(),f[l]=!1):(u+=p,f[l]=!0),l++,p.GetLength()===2&&(f[l]=!0,l++)):(u+=this.GetPromptChar(),a++,f[l]=!1,l++);if(n+u.GetLength()===this._maxLength)break;if(n+u.GetLength()>this._maxLength){u=u.Substring(0,u.GetLength()-1);break}}n+u.GetLength()<this._minLength&&(t=t.Substring(a,t.GetLength()-a),s.existInvalid=o,s.exception=!0);var d=this.text.Substring(0,n)+u+this.text.Substring(n,this.text.GetLength());d.GetLength()>this._maxLength&&(d=d.Substring(0,this._maxLength));if(d.GetLength()>n+u.GetLength())for(var v=1;v<=d.GetLength()-n-u.GetLength();v++)this._bitState[n+v]!=null&&(f[l]=this._bitState[n+v],l++);this._bitState=new Array(l),this._bitState=f,this._trueLength=l;for(var v=l-1;v>=0;v--){if(this._bitState[v]!==!1)break;this._trueLength--}if(d.GetLength()<this._minLength)for(var v=0;v<this._minLength-d.GetLength();v--)d+=this.GetPromptChar();for(var v=d.GetLength();v>this._minLength;v--){if(!(d.Substring(v-1,v)===this.GetPromptChar()&&v>this._trueLength))break;d=d.Substring(0,v-1)}return this.text=d,a===t.GetLength()?t="":t=t.Substring(a,t.GetLength()),n+=u.GetLength(),s.offset=n,s.text=t,s},r.prototype.SaveOldState=function(){this.oldText=this.text,this._oldBitState=this._bitState},r.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoBitState=this._bitState},r.prototype.GetValue=function(){},r.prototype.GetText=function(){return this._text},r.prototype.UpdateState=function(e){},r.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this.oldText;this.text=e,this._bitState=this._oldBitState,this._trueLength=e.GetLength();for(var t=e.GetLength()-1;t>=0;t--){if(this._bitState[t]!=0)break;this._trueLength--}},r.prototype.Undo=function(){if(this.undoTempText===this.text)return!1;var e=this.undoTempText;this.undoTempText=this.text;var t=this._bitState;this.text=e,this._bitState=this._undoBitState,this._trueLength=e.GetLength();if(this._bitState.length===0)this._trueLength=0;else for(var n=e.GetLength()-1;n>=0;n--){if(this._bitState[n]!==!1)break;this._trueLength--}return this._undoBitState=t,!0},r.prototype.Clear=function(){this._trueLength=0;var e="",t=[];if(this._minLength>0){for(var n=0;n<this._minLength;n++)t[n]=!1;this._bitState=new Array(this._minLength),this._bitState=t;if(this.GetPromptChar()!=="")for(var n=0;n<this._minLength;n++)e+=this.GetPromptChar();else for(var n=0;n<this._minLength;n++)e+=" ";this.text=e}else this.text="",this._bitStates=null},r.prototype.Insert=function(e,t,n,r){r||(r=!0);var i={};i.offset=e,i.text=t,i.existInvalid=!1,i.exception=!1;var s=!1;if(e>this._maxLength||t===""||t.GetLength()===0)return i;var o=[],u=e;for(var a=0;a<e;a++)o[a]=this._bitState[a];var f="",l=0;while(l<t.GetLength()){var c=this._filter.Check(t,l),h=c.strValue;l=c.index;if(!(h!==""||!r&&t.CharAt(l)===" ")){if(!n&&e+f.GetLength()>=this._minLength&&e+f.GetLength()>=this._trueLength+f.GetLength())break;s=!0,l++;continue}h===""&&!r&&t.CharAt(l)===" "?(f+=this.GetPromptChar(),o[u]=!1,u++,l++):h==="\r"||h==="\n"?(f+=this.GetPromptChar(),o[u]=!1,u++):(f+=h,o[u]=!0,u++,h.GetLength()===2&&(o[u]=!0,u++));if(e+f.GetLength()===this._maxLength)break;if(e+f.GetLength()>this._maxLength){f=f.Substring(0,f.GetLength()-1);break}}if(f.GetLength()===0)return t=t.Substring(l,t.GetLength()-l),i.existInvalid=s,i.exception=!0,i;var p=this.text.Substring(0,e)+f+this.text.Substring(e,this.text.GetLength());p.GetLength()>this._maxLength&&(p=p.Substring(0,this._maxLength));if(p.GetLength()>e+f.GetLength())for(var d=0;d<p.GetLength()-e-f.GetLength();d++)this._bitState[e+d]!=null?o[u]=this._bitState[e+d]:o[u]=!1,u++;this._bitState=new Array(u),this._bitState=o,this._trueLength=u;for(var d=u-1;d>=0;d--){if(this._bitState[d]!==!1)break;this._trueLength--}if(p.GetLength()<this._minLength)for(var d=0;d<this._minLength-p.GetLength();d--)p+=this.GetPromptChar();for(var d=p.GetLength();d>this._minLength;d--){if(!(p.Substring(d-1,d)===this.GetPromptChar()&&d>this._trueLength))break;p=p.Substring(0,d-1)}return this.text=p,l===t.GetLength()?t="":t=t.Substring(l,t.GetLength()),e+=f.GetLength(),i.offset=e,i.text=t,i},r.prototype.Replace=function(t,n,r,i){var s={};s.offset=t,s.text=r;if(n===0)return s;var o=r.charCodeAt(0),u=[12364,12460,12366,12462,12376,12472];if(e.Utility.ArrayIndexOf(u,o)!==-1&&n===1){var a=this._filter.Check(r,0);a.strValue&&a.strValue.length===2&&(n=2)}return t=this.Delete(t,n),s=this.Insert(t,r,i),s},r.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e+t>this.text.GetLength()&&(t=this.text.GetLength()-e);var n=[],r=e;for(var i=0;i<e;i++)n[i]=this._bitState[i];var s=this.text.Substring(0,e)+this.text.Substring(e+t,this.text.GetLength());if(e+t<this.text.GetLength())for(var o=0;o<this.text.Substring(e+t,this.text.GetLength()).GetLength();o++)this._bitState[e+t+o]!=null?n[r]=this._bitState[e+t+o]:n[r]=!1,r++;if(r<this._minLength)for(var o=r;o<this._minLength;o++)n[o]=!1;this._bitState=new Array(r),this._bitState=n,this._trueLength=r;for(var o=r-1;o>=0;o--){if(this._bitState[o]!==!1)break;this._trueLength--}if(s.GetLength()<this._minLength){var u=this._minLength-s.GetLength();for(var o=0;o<u;o++)s+=this.GetPromptChar()}return this.text=s,e},r}(b),S=function(t){function n(e){t.call(this,"EnumField"),this._activeItem=-1,this._trueLength=0,this._lastActiveItem=-1,this.undoText="",this.undoTempText="",this._undoItem=-1,this._minLength=0,this._maxLength=0,this._itemCount=0,this._owner=e}return __extends(n,t),n.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},n.prototype.GetText=function(){var t="";return this._activeItem<0?t=e.Utility.ToString(this.GetPromptChar(),this._minLength):t+=this._items[this._activeItem],t},n.prototype.GetFieldStatus=function(){return this._activeItem===-1?0:2},n.prototype.GetFieldIsFull=function(){return this._activeItem===-1?!1:!0},n.prototype.IsOver=function(){return this._activeItem!==-1},n.prototype.Init=function(e){var t=Number.MAX_VALUE,n=Number.MIN_VALUE;for(var r=0;r<e.length;r++)t=Math.min(t,e[r].length),n=Math.max(n,e[r].length);this.EnumField(t,n,e,e.length,-1)},n.prototype.EnumField=function(e,t,n,r,i){this._minLength=e,this._maxLength=t;if(!n)return!1;this._itemCount=r,this._activeItem=i,this._lastActiveItem=i,this._undoItem=i,this.InitialItems(n),i!==-1?this._trueLength=n[i].toString().GetLength():this._trueLength=0,this.text=this.GetText()},n.prototype.InitialItems=function(e){this._items=new Array(e.length);for(var t=0;t<e.length;t++){var n=e[t];while(n.IndexOf("@#GCD#@")!==-1)n=n.replace("@#GCD#@","'");while(n.IndexOf("@#GCM#@")!==-1)n=n.replace("@#GCM#@",'"');n&&(n=n.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this._items[t]=n}},n.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!==-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!==-1)e=e.replace("@#GCM#@",'"');e&&(e=e.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},n.prototype.Insert=function(e,t,n){var r={};r.offset=e,r.text=t,r.existInvalid=!1,r.exception=!1;var i=e,s="";this._activeItem===-1&&(i=0),i!==0&&(s=this._items[this._activeItem].toString().Substring(0,i));var o=new Array(this._itemCount),u=new Array(this._itemCount),a=new Array(this._itemCount),f=new Array(this._itemCount);for(var l=0;l<this._itemCount;l++)o[l]=i,u[l]=0,a[l]=99999,f[l]=new Array;for(var l=0;l<this._itemCount;l++){var c=this._items[l].toString();if(s.GetLength()>0&&c.Substring(0,s.GetLength())!==s)continue;while(u[l]<t.GetLength()){if(o[l]>=c.length)break;var h=this.JudgeIfValid(c,o[l],t,u[l]);o[l]=h.index1,u[l]=h.index2,h.isValid?a[l]===99999&&(a[l]=u[l]):u[l]++}}var p=0,d=0,v=!1,m=o[p];for(var g=0;g<this._itemCount;g++){var c=this._items[g].toString();if(o[g]===t.GetLength()+i&&t.GetLength()===c.length){p=g,m=o[p],v=!0;break}if(a[g]===99999)continue;if(a[p]>=a[g])if(a[p]===a[g]){var y=o[g];m<y?(p=g,m=y,d=1):m===y&&d++}else p=g,m=o[p],d=1}var b;if(v)return u[p]===0?(b=!0,r.existInvalid=!0,r):(t=t.Substring(u[p]+1,t.GetLength()),e=this._items[p].toString().GetLength(),b=f[p].Count===0?!1:!0,this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r.existInvalid=b,r);if(m===i)return n===!1&&this._activeItem!==-1&&e===this._items[this._activeItem].toString().GetLength()?(t=t.Substring(u[p],t.GetLength()),b=!1,r.offset=e,r.text=t,r):(b=!0,r.exception=!0,r.existInvalid=!0,r);var w=-1;for(var l=0;l<f[p].Count;l++)w=0;return d===1?e=this._items[p].toString().GetLength():e=m,w===-1?(t=t.Substring(u[p],t.GetLength()),b=!1):(t=t.Substring(u[p],t.GetLength()),b=!0),this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r},n.prototype.Replace=function(e,t,n,r){return this.Insert(e,n,r)},n.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e=0,this._activeItem=-1,this.text="";if(this._minLength>0)for(var n=0;n<this._minLength;n++)this.text+=this.GetPromptChar();return this._trueLength=0,e},n.prototype.SaveOldState=function(){this._lastActiveItem=this._activeItem,this.oldText=this.text},n.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this._lastActiveItem;this._activeItem=e;if(e>=0&&e<this._itemCount)this.text=this._items[e].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoItem=this._activeItem},n.prototype.Undo=function(){if(this.undoTempText===this.text)return;this.undoTempText=this.text;var e=this._activeItem;this._activeItem=this._undoItem,this._undoItem=e;if(this._activeItem>=0&&this._activeItem<this._itemCount)this.text=this._items[this._activeItem].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SetTextInternal=function(e,t,n,r){var i,s=new Array(this._itemCount),o=new Array(this._itemCount),u=new Array(this._itemCount);for(i=0;i<this._itemCount;i++)s[i]=0,o[i]=0,u[i]=!1;for(i=0;i<this._itemCount;i++){var a=this._items[i].toString();while(s[i]<e.GetLength()){var f=this.JudgeIfValid(a,o[i],e,s[i]);o[i]=f.index1,s[i]=f.index2;if(!f.isValid&&n===!0){u[i]=!0;break}if(!f.isValid&&a.GetLength()===s[i])break;if(!f.isValid&&a.GetLength()>s[i]){u[i]=!0;break}if(o[i].toString().GetLength()===a.GetLength()&&s[i].toString().GetLength()<e.GetLength()&&n===!0){u[i]=!0;break}if(s[i].toString().GetLength()===e.GetLength()&&o[i].toString().GetLength()<a.GetLength()){u[i]=!0;break}}}var l=this._itemCount;for(i=0;i<this._itemCount;i++)if(u[i]===!1){l===this._itemCount&&(l=i);var a=this._items[i].toString();if(a.GetLength()===this._maxLength&&e.GetLength()>=this._maxLength){l=i;break}}var c=l,h={};h.existInvalid=!1,h.exception=!1;if(c>=this._itemCount){var p="";h.exception=!0;for(i=0;i<this._minLength;i++)p+=this.GetPromptChar();return e.Substring(0,this._minLength)===p?(e=e.Substring(this._minLength,e.GetLength()),h.offset=this._minLength,h.text=e,h.existInvalid=!1,h.exception=!0,this.Clear(),h):(h.text=e,this.text=p,this._activeItem=-1,h.existInvalid=!0,h.exception=!0,h)}return this._activeItem=c,this.text=this._items[c].toString(),this._trueLength=this._items[c].toString().GetLength(),h.offset=this._trueLength,h.text=e.Substring(this._trueLength,e.GetLength()),h},n.prototype.PerformSpin=function(e,t,n){var r=this._itemCount;if(r<t)if(r>1)while(r<t)t-=r;else t=1;else if(r<-t)if(r>1)while(r<-t)t+=r;else t=-1;if(t===0)return e;var i;if(this._activeItem===-1)i=t>0?0:r-1;else{i=this._activeItem+t;if(i<0||i>=r)n?(i=t>0?i-r:i+r,t>0&&i<this._activeItem?this._activeItem<r-1?i=r-1:i=0:t<0&&i>this._activeItem&&(this._activeItem>0?i=0:i=r-1)):i=t>0?r-1:0}var s=this._items[i].toString().GetLength();return e=Math.min(e,s),this._activeItem=i,this.text=this._items[i].toString(),this._trueLength=this._activeItem===-1?0:this.text.GetLength(),e},n.prototype.Clear=function(){this._activeItem=-1},n.prototype.JudgeIfValid=function(t,n,r,i){var s=e.CharProcess.CharEx,o={};o.index1=n,o.index2=i,o.isValid=!1;if(n>=t.GetLength())return o;if(t.Substring(n,n+1)===r.Substring(i,i+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(this._owner.GetAutoConvert()===!1)return o;if(r.Substring(i,i+1).charCodeAt(0)>=65345&&r.Substring(i,i+1).charCodeAt(0)<=65370){var u=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(r.Substring(i,i+1));if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(u);return f===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(r.Substring(i,i+1).charCodeAt(0)>=65313&&r.Substring(i,i+1).charCodeAt(0)<=65338){var l=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(r.Substring(i,i+1));if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(l);return a===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsUpper(r.Substring(i,i+1))){var a=r.Substring(i,i+1).toLowerCase();if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(r.Substring(i,i+1)).text;if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(a).text;return l===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsLower(r.Substring(i,i+1))){var f=r.Substring(i,i+1).toUpperCase();if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(r.Substring(i,i+1)).text;if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(l).text;return u===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsHiragana(r.Substring(i,i+1))){var c=s.ToKatakana(r.Substring(i,i+1));if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var h=s.ToKatakana(c),p=s.ToHalfWidthEx(h);return p.length===1&&p===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2)?(n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&s.IsFullWidth(r.Substring(i,i+1))){var h=s.ToKatakana(r.Substring(i,i+1)),p=s.ToHalfWidthEx(h);if(p.length===1&&p===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2))return n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(r.Substring(i,i+1));return d==="\u3094"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&!s.IsFullWidth(r.Substring(i,i+1))){var v;i+1<r.GetLength()&&s.IsKatakana(r.Substring(i+1,i+2))&&!s.IsFullWidth(r.Substring(i+1,i+2))?v=r.Substring(i+1,i+2):v=" ";if(v===" "){var c=s.ToFullWidth(r.Substring(i,i+1)).text;if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var m=s.ToFullWidth(r.Substring(i,i+2)),c=m.text,g=m.processedAll;if(c===t.Substring(n,n+1))return n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?g?"\u3046\u309b"===t.Substring(n,n+2)?(n+=2,i+=2,o.index1=n,o.index2=i,o.isValid=!0,o):o:o:d===t.Substring(n,n+1)?(n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsFullWidth(r.Substring(i,i+1))){var y=s.ToHalfWidth(r.Substring(i,i+1));return y===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var b=s.ToFullWidth(r.Substring(i,i+1)).text;return b===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o},n}(b),x=function(){function e(e){this.fieldArray=[],this.fieldCount=0,this.fieldCount=e}return e.prototype.GetLength=function(){var e=0;for(var t=0;t<this.fieldCount;t++){var n=this.GetFieldByIndex(t);e+=n.GetLength()}return e},e.prototype.Add=function(e){e&&this.fieldArray.push(e)},e.prototype.AddRange=function(e){if(!e||e.length===0||this.fieldCount!==e.length)return;var t=new Array;for(var n=0;n<e.length;n++)t[n]=e[n];this.fieldArray=t},e.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},e.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++)e+=this.GetFieldByIndex(t).GetText();return e},e.prototype.GetFillingString=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField")t+=r.GetText();else for(var i=0;i<r._minLength;i++)t+=e}return t},e.prototype.SetText=function(e,t){},e.prototype.Insert=function(e,t,n){},e.prototype.Replace=function(e,t,n,r){},e.prototype.Delete=function(e,t){},e.prototype.PerformSpin=function(e,t,n){},e.prototype.GetFieldIndex=function(e,t){var n={},r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i],o=s.GetLength();if(e===r&&o===0||e>=r&&e<r+o)return n.index=i,n.offset=e-r,n;r+=o}if(e>=r){var s=this.fieldArray[this.fieldCount-1];return n.index=this.fieldCount-1,n.offset=s.GetLength(),n}},e.prototype.GetFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0;for(var r=0;r<e;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}var s=this.GetFieldByIndex(e);return s?(t.start=n,t.length=s.GetLength(),t):t},e}();e.FieldCollection=x;var T=function(){function n(){this.KeyActionList=null,this.Text="",this.Value=null,this.DroppedDown=!1,this.SelectionLength=0,this.SelectionStart=0,this.SelectionEnd=0,this.IsMouseDown=!1,this.OldSelectionStart=0,this.OldSelectionEnd=0,this._acceptCrlf=0,this._clipContent=0,this._editMode=0,this.__editModeInternal=0,this._useClipboard=!0,this._readOnly=!1,this._autoPostBack=!1,this._highlightText=0,this._exitOnLeftRightKey=0,this.FocusType=0,this.IsInUpdatePanelAndAsyncPostBack=!1,this.NeedResetFocus=!1,this.NeedReCalCursorPos=!0,this.SpinBtnPressed=!1,this.DropDownBtnPressed=!1,this.OldValue="",this.ValueBeforeUndo="",this.FocusExit=!1,this.Delay=0,this.SpinOnKeys=!0,this.Wrap=!0,this.SpinEnabled=!0,this.Increment=1,this.Visible=!1,this.MouseButton=-1,this.TouchDropDownScale=1,this.UIUpdate=new e.InputUIUpdate(this),this.Format={Fields:null}}return n.prototype.Snap=function(){var e={Text:this.Text,Value:this.Value,SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd};return e},n.prototype.Revert=function(e){this.Text=e.Text,this.Value=e.Value,this.SelectionStart=e.SelectionStart,this.SelectionEnd=e.SelectionEnd},n.prototype.ReLoadData=function(){},n.prototype.GetOverwrite=function(){return this.GetEditMode()===2||this.GetEditMode()===3?this.GetEditMode()===3:this._getEditModeInternal()!==0&&this._getEditModeInternal()!==2},n.prototype.GetImeMode=function(){return this.InputElement.style.imeMode||"auto"},n.prototype.SetImeMode=function(e){this.GetInputElement().style.imeMode=e},n.prototype.GetEnabled=function(){return this.GetInputElement().disabled},n.prototype.SetEnabled=function(e){e?t(this.GetInputElement()).removeAttr("diabled"):t(this.GetInputElement()).attr("diabled","true")},n.prototype.SetFocus=function(){t(this.GetInputElement()).focus()},n.prototype.GetDroppedDown=function(){return this.DroppedDown},n.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},n.prototype.SetSelectionStart=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),t=Math.min(t,this.Text.GetLength()),this.SetInnerSelectionStart(t),this.SetInnerSelectionEnd(t+this.SelectionLength),this.NeedReCalCursorPos=!0},n.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},n.prototype.SetSelectionLength=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),this.SelectionStart+t>this.Text.GetLength()&&(t=this.Text.GetLength()-this.SelectionStart),this.SelectionLength=t,this.SetInnerSelectionEnd(this.SelectionStart+t),this.NeedReCalCursorPos=!0},n.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e},n.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e},n.prototype.SetDroppedDown=function(e){if(!this.Enabled)return;this.DroppedDown=e},n.prototype.DoSpinUp=function(e,t){t==null&&(t=this.Increment),this.DoSpin("up",this.SelectionEnd,t)},n.prototype.DoSpinDown=function(e,t){t==null&&(t=this.Increment),this.DoSpin("down",this.SelectionEnd,t)},n.prototype.DoSpin=function(e,t,n){e==="down"&&(n*=-1);if(typeof t=="number"&&isNaN(t)||typeof n=="number"&&isNaN(n))return;var r=this.UIProcess.PerformSpin(t,n,this.Wrap);if(!r)return;typeof r.SelectionStart=="number"&&!isNaN(r.SelectionStart)&&(this.SelectionStart=r.SelectionStart),typeof r.SelectionEnd=="number"&&!isNaN(r.SelectionEnd)&&(this.SelectionEnd=r.SelectionEnd);if(r.Text!=null&&!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),e==="up"?this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")},n.prototype.GetExitOnLeftRightKey=function(){return this._exitOnLeftRightKey},n.prototype.SetExitOnLeftRightKey=function(e){this._exitOnLeftRightKey=e},n.prototype.GetAcceptsCrlf=function(){return this._acceptCrlf},n.prototype.SetAcceptsCrlf=function(e){this._acceptCrlf=e},n.prototype.SetInnerFocus=function(){this.FocusType=3,this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},n.prototype.UpdateDisplayText=function(e){this.UIUpdate.SetText(e),this.SetHideValue()},n.prototype.SetHideText=function(e){},n.prototype.SetSelection=function(t,n,r){if(t==null||n==null||isNaN(t)||isNaN(n))return;if(r&&e.CoreUtility.IsIE10OrLater()){var i=this;setTimeout(function(){e.Utility.SetSelection(i.InputElement,t,n)},0)}else e.Utility.SetSelection(this.InputElement,t,n);this.SelectionStart=t,this.SelectionEnd=n,t===n&&(this.UIProcess.isMulSelected=!1)},n.prototype._getAutoPostBack=function(){return this._autoPostBack},n.prototype._setAutoPostBack=function(t){t=e.Utility.CheckBool(t),this._autoPostBack=t},n.prototype.GetUseClipboard=function(){return this._useClipboard},n.prototype.SetUseClipboard=function(e){this._useClipboard=e},n.prototype.GetClipContent=function(){return this._clipContent},n.prototype.SetClipContent=function(e){this._clipContent=e},n.prototype.GetTextHAlign=function(){return this.UIUpdate.GetTextHAlign()},n.prototype.SetTextHAlign=function(e){this.UIUpdate.SetTextHAlign(e)},n.prototype.GetEditMode=function(){return this._editMode},n.prototype.SetEditMode=function(e){if(e!==this._editMode){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this._editMode)?t=!0:this._isinsertGroup(this._editMode)&&this._isOverwriteGroup(e)&&(t=!0),this._editMode=e,this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._getEditModeInternal=function(){return this.__editModeInternal},n.prototype._setEditModeInternal=function(e){if(e!==this.__editModeInternal){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this.__editModeInternal)?t=!0:this._isinsertGroup(this.__editModeInternal)&&this._isOverwriteGroup(e)&&(t=!0),this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._isinsertGroup=function(e){return e===0||e===2},n.prototype._isOverwriteGroup=function(e){return e===1||e===3},n.prototype.GetHighlightText=function(){return this._highlightText},n.prototype.SetHighlightText=function(e){this._highlightText=e},n.prototype.GetReadOnly=function(){return this._readOnly},n.prototype.SetReadOnly=function(e){this._readOnly=e},n.prototype.GetTextboxValue=function(){return this.UIUpdate.GetText()},n.prototype.GetOldValue=function(){return this.OldValue},n.prototype.CanUndo=function(){return this.GetValue()===this.GetOldValue()?!1:!0},n.prototype.GetValue=function(){return""},n.prototype.DragStart=function(){this.DragStartElementID=this.ID},n.prototype.DragEnd=function(t){return this.DragStartElementID="",e.Utility.PreventDefault(t),!1},n.prototype.MouseOut=function(){if(this.IsMouseDown!==!0)return;if(this.MouseUpPointerType!==undefined&&this.MouseUpPointerType!==4&&this.MouseUpPointerType!=="mouse")return;var t=Math.min(this.OldSelectionStart,this.OldSelectionEnd),n=Math.max(this.OldSelectionStart,this.OldSelectionEnd),r=this.GetText().Substring(t,n);r!==""&&(this.SetSelection(this.OldSelectionStart,this.OldSelectionEnd),e.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},n.prototype.GetText=function(){return""},n.prototype.Focus=function(t){t.SelectionStart=this.SelectionStart;var n=this.UIProcess.Focus(t);e.Utility.CurrentActiveControlId=this.ID;if(!n)return;return n.Text!=null&&(this.Text=n.Text),n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.GetReadOnly()&&this.FocusType===0&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),n},n.prototype.LoseFocus=function(e){this.FireKeyExit();if((this.SpinBtnPressed||this.DropDownBtnPressed||this.DropDownObj&&this.DropDownObj.IsMouseOver)&&this.FocusType!==4)return;return this.DroppedDown&&(this.DropDownBtnPressed=!1,this.CloseDropDown()),this.SetLastClientValues(),this.UIProcess.LoseFocus(e)},n.prototype.FireKeyExit=function(){},n.prototype.SetLastClientValues=function(){},n.prototype.MouseDown=function(t){var n=e.Utility.GetMouseButton(t);this.MouseButton=n,this.FocusType=1,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.IsMouseDown=!0,this.MouseDownX=t.x,this.MouseButton===0&&(e.CoreUtility.IsIE()||e.CoreUtility.firefox)&&e.Utility.ClearSelection(this.GetInputElement()),this.DroppedDown&&this.CloseDropDown();if(this.IsNullFormat())return;var r=this.UIProcess.MouseDown(n);if(!r)return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.GetInputElement=function(){return this.InputElement},n.prototype.MouseUp=function(t){this.IsMouseDown=!1,this.MouseUpX=t.x,this.IsNullFormat();var n=this.UIProcess.MouseUp(this.InputElement,this.SelectionStart,this.SelectionEnd,this.MouseButton);if(!n)return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd);if(e.Utility.GetMouseButton(t)===0&&this.MouseDownX!=null&&this.MouseDownX>this.MouseUpX){var r=this.SelectionStart;this.SelectionStart=this.SelectionEnd,this.SelectionEnd=r}this.MouseDownX=null,this.MouseButton=-1},n.prototype.MouseWheel=function(t){if(this.ImeMode===!0)return!1;if(this.GetSpinEnabled()){var n=e.Utility.GetMouseWheelValue(0,t);return n>0?this.PerformSpin("up"):n<0&&this.PerformSpin("down"),e.Utility.PreventDefault(t),!1}},n.prototype.PreProcessContextMenu=function(e){return!1},n.prototype.ProcessReservedKey=function(e){switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 112:case 114:case 115:case 116:case 117:case 121:case 122:case 123:case 65657:case 131081:case 196617:case 131179:case 131181:case 131120:case 131259:case 131261:case 131146:case 196680:case 196681:case 196682:case 131153:case 131156:case 196689:case 262157:return!0}return!1},n.prototype.IsNullFormat=function(){return!1},n.prototype.SetHideValue=function(){var e="";this.GetValue()!=null&&(e=this.GetValue().toString()),this.SetHideText(e)},n.prototype.KeyDown=function(t){var n={},r=t.FuncKeysPressed,i=t.KeyCode;if(this.PreProcessContextMenu(i))return n.System=!1,n;if(i===229)return n.System=!0,n;r.Shift&&(i|=65536),r.Ctrl&&(i|=131072);if(r.Alt){if(this.AccessKey!=null&&this.AccessKey.toLowerCase()===String.fromCharCode(i).toLowerCase())return this.SelectionStart=0,this.SelectionEnd=this.Text.GetLength(),n.System=!0,n;i|=262144}if(this.ProcessReservedKey(i))return n.System=!0,n;var s=i|524288;if(i!==s){var o=this.UIProcess.GetKeyActionName(s,this.Shortcuts);if(o!=null){var u=!0,a=!1;if(u)return n.System=!1,n}}var f=this.UIProcess.GetKeyActionName(i,this.Shortcuts);switch(f){case"DropDown":return this.GetDropDownEnabled()&&(this.PerformDropDown(),n.System=!1),n;case"SpinUp":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("up"),n.System=!1),n;case"SpinDown":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("down"),n.System=!1),n}var l=!1;if(this.KeyActionList)for(var c=0;c<this.KeyActionList.length;c++)if(this.KeyActionList[c]===i.toString()){l=!0;break}if(this.DroppedDown&&this.DropDownObj&&i!=262182&&i!=262184&&i!=27&&i!=118&&i!=9&&i!=65545){f!=null&&this.DropDownObj.IsShortcut(i)&&(f=null);if(!f){if(i===93)return this.CloseDropDown(),!0;n.System=!1;if(!l){var h={keyCode:0,shiftKey:!1,ctrlKey:!1,altKey:!1};return h.keyCode=t.KeyCode,h.shiftKey=r.Shift,h.ctrlKey=r.Ctrl,h.altKey=r.Alt,this.DropDownObj.KeyDown(h),n}}}t.KeyAction=f,t.KeyCode=i;var p=this.UIProcess.KeyDown(t);if(!p){switch(i){case 27:return this.DroppedDown&&(this.CloseDropDown(),this.SetInnerFocus()),n.System=!1,n;case 262182:case 262184:return l||(this.PerformDropDown(),n.System=!0),n;case 262152:return n.KeyCode=10,n;case 38:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("up"),n.System=!1),n;case 40:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("down"),n.System=!1),n;case 13:return n.System=!0,n}if(this.IsNullFormat()||i===20||r&&(r.Ctrl||r.Alt)||i===91||i===144||i===145||i===93||i===92)return n.System=!0,n;if(r&&r.Shift&&i===65552)return n.System=!0,n;if(this.Type==="Number")return n.System=!0,n;if(i===120||i===123||i===113||i===118||i===119)return n;var d=this.UIProcess.FireEvent(this,this.InvalidInputEvent,null,"InvalidInput");return d!=null&&(this.FocusType=d),n}p.Overwrite!=null&&this.GetOverwrite()!==p.Overwrite&&(this._getEditModeInternal()===0?this._setEditModeInternal(1):this._getEditModeInternal()===1&&this._setEditModeInternal(0));if(p.Text!=null&&!this.UpdateText(p))return n.System=!1,n;var v=this.GetSelectionLength();p.SelectionStart!=null&&(this.SelectionStart=p.SelectionStart),p.SelectionEnd!=null&&(this.SelectionEnd=p.SelectionEnd);var m=this.GetSelectionLength();p.System||(p.FocusExit?(this.SetHideValue(),p.System=!1):(this.UpdateDisplayText(this.Text),v===0&&m!==0?e.Utility.ShouldFireOnSelectStart=!0:e.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),e.Utility.ShouldFireOnSelectStart=!1,p.HasSetSelection=!0));if(p.EventInfo)if(p.EventInfo.Type==="KeyExit")this.EventInfo=p.EventInfo;else{var d=this.UIProcess.FireEvent(this,p.EventInfo.Name,p.EventInfo.Args,p.EventInfo.Type);d!=null&&(this.FocusType=d)}return p.FocusType!=null&&(this.FocusType=p.FocusType),n=p,n.KeyAction=f,n},n.prototype.GetImeInputText=function(e){var t=this.GetTextboxValue();if(t===this.Text)return"";var n;if(this.Text!==""){var r=Math.min(this.SelectionStart,this.SelectionEnd),i=Math.max(this.SelectionStart,this.SelectionEnd);if(i<this.Text.GetLength()){var s=this.Text.Substring(i,this.GetText().GetLength()),o=t.IndexOf(s);o!==-1?n=t.Substring(r,t.GetLength()-s.GetLength()):n=""}else n=t.Substring(r,t.GetLength())}else n=t;e==="ReInput"&&(n=n.Substring(0,n.GetLength()));if(e==="Record")return n;if(e==="LoseFocusInput"&&n==="")return"";this.ImeMode=!1,this.ImeSelect=!1;if(e==="ReInput"||e==="ClickInput")this.FocusType=8,this.InputElement.blur(),this.InputElement.focus();return n},n.prototype.KeyUp=function(e){},n.prototype.GetVisible=function(){return!0},n.prototype.PerformDropDown=function(){if(!this.Enabled||!this.GetDropDownEnabled())return;if(!this.GetVisible())return;if(!this.DroppedDown){if(this.DropDownObj&&this.DropDownObj.GetDropDownContainer!==undefined){var t=this.DropDownObj.GetDropDownContainer();e.Utility.IsTouchMouseDown?e.Utility.SetZoomStyle(t,this.TouchDropDownScale,this.DropDownObj.GetAlign()):e.Utility.SetZoomStyle(t,"")}this.ShowDropDown()}else this.CloseDropDown()},n.prototype.DropDownBtnMouseDown=function(e){this.DropDownBtnPressed=!0;if(e!==0&&e!=null)return;this.PerformDropDown(),this.SetInnerFocus(),this.DroppedDown&&this.ResetLocation()},n.prototype.DropDownBtnMouseUp=function(){this.DropDownBtnPressed=!1,this.SetInnerFocus()},n.prototype.ResetLocation=function(){},n.prototype.DropDownBtnMouseOut=function(){this.DropDownBtnPressed&&(this.SetInnerFocus(),this.DropDownBtnPressed=!1)},n.prototype.ShowDropDown=function(e){e!=null&&this.UIUpdate.WriteCssStyle(e)},n.prototype.CloseDropDown=function(){this.DroppedDown=!1,this.DropDownObj.Close(),this.UIUpdate.ClearCssStyle();var e=this.UIProcess.FireEvent(this,this.DropDownCloseEvent,null,"DropDownClose");e!=null&&(this.FocusType=e)},n.prototype.PerformSpin=function(e){var t=this.Increment;if(this.IsNullFormat())this.SetSelection(this.SelectionStart,this.SelectionEnd);else if(!this.GetReadOnly()){e==="down"&&(t*=-1);var n=this.UIProcess.PerformSpin(this.SelectionEnd,t,this.Wrap);if(!n)return;if(n.Text!=null&&!this.UpdateText(n))return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart,this.SelectionEnd=n.SelectionStart),this.UpdateDisplayText(this.Text),this.SetInnerFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)}var r=3;e==="up"?r=this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&(r=this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")),r!=null&&(this.FocusType=r)},n.prototype.SpinBtnMouseDown=function(t,n){this.SpinBtnPressed=!0;if(this.DroppedDown){this.CloseDropDown(),this.SetInnerFocus();return}if(t!=0&&t!=null)return;var r=n===!0?"up":"down";this.PerformSpin(r),this.SetInnerFocus();if(e.Utility.SpinTimer==null){var i=this;e.Utility.SpinTimer=setInterval(function(){i.PerformSpin(r)},this._getRealSpinDelay())}},n.prototype._getRealSpinDelay=function(){return this.Delay===0?150:this.Delay},n.prototype.SpinBtnMouseUp=function(){this.SpinBtnPressed&&(this.SetInnerFocus(),this.SpinBtnPressed=!1),e.Utility.SpinTimer!=null&&(clearInterval(e.Utility.SpinTimer),e.Utility.SpinTimer=null)},n.prototype.SelectStart=function(e){if(this.IsNullFormat())return!0;var t=this.UIProcess.SelectStart(this.InputElement,e,this.MouseButton);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart);if(t.SetFalse!=null)return t.SetFalse},n.prototype.DoubleClick=function(){if(this.IsNullFormat())return!0;var e=this.UIProcess.DoubleClick(this.SelectionStart);e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.Undo=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Undo();if(!e)return;if(e.Text!=null){if(!this.UpdateText(e))return;this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)}},n.prototype.Cut=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Cut(this.GetClipContent(),this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),e.Color!==null&&this.UIUpdate.SetForeColor(e.Color)},n.prototype.Copy=function(){this.UIProcess.Copy(this.GetClipContent(),this.SelectionStart,this.SelectionEnd)},n.prototype.Paste=function(t){if(this.GetReadOnly())return!1;if(this.IsNullFormat())return!1;var n=e.Utility.GetPasteData(this.GetUseClipboard());t&&(n=t);var r=this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,n);return r?r.Text!=null&&!this.UpdateText(r)?!1:(r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type),r.FocusExit!=null&&(this.FocusExit=r.FocusExit),!0):!1},n.prototype.Delete=function(){if(this.GetReadOnly())return;var e=this.UIProcess.ProcessDelete(this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.DoDeleteExtraWork())},n.prototype.DoDeleteExtraWork=function(){},n.prototype.SelectAll=function(){var e=this.UIProcess.SelectAll();e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.FocusType=2},n.prototype.DragDrop=function(t){if(!e.CoreUtility.IsIE()&&this.GetReadOnly())return!1;if(this.DragStartElementID===this.ID)return this.DragStartElementID="",!1;var n=this.UIProcess.Paste(0,0,t);if(!n)return;if(n.Text!=null){if(!this.UpdateText(n))return;e.CoreUtility.IsIE()||this.SetInnerFocus()}n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),n.EventInfo!=null&&this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type)},n.prototype.SetInnerText=function(e){this.SetText(e)},n.prototype.SetText=function(e){},n.prototype.GetInnerText=function(){return this.Text},n.prototype.UpdateText=function(e){return e!=null&&e.Text!=null&&(this.Text=e.Text),!0},n.prototype.RollBack=function(){},n.prototype.AddAllEventsHandler=function(){var n=this,r=this.GetInputElement();r!=null&&(t(r).bind("mousedown.wijinput",function(t){e.GlobalEventHandler.OnMouseDown(n,t)}),t(r).bind("mouseup.wijinput",function(t){e.GlobalEventHandler.OnMouseUp(n,t)}),t(r).bind("selectstart.wijinput",function(t){e.GlobalEventHandler.OnSelectStart(n,t)}),t(r).bind("keydown.wijinput",function(t){e.GlobalEventHandler.OnKeyDown(n,t)}),t(r).bind("keypress.wijinput",function(t){var r=t;e.GlobalEventHandler.OnKeyPress(n,r)}),t(r).bind("keyup.wijinput",function(t){e.GlobalEventHandler.OnKeyUp(n,t)}),t(r).bind("dblclick.wijinput",function(t){e.GlobalEventHandler.OnDblClick(n,t)}),t(r).bind("beforecopy.wijinput",function(t){e.GlobalEventHandler.OnHTML5BeforeCopy(n,t)}),t(r).bind("cut.wijinput",function(t){e.GlobalEventHandler.OnHTML5Cut(n,t)}),t(r).bind("paste.wijinput",function(t){e.GlobalEventHandler.OnHTML5Paste(n,t)}),t(r).bind("focus.wijinput",function(t){e.GlobalEventHandler.OnFocus(n,t)}),t(r).bind("blur.wijinput",function(t){e.GlobalEventHandler.OnLostFocus(n,t)}),t(r).bind("mousewheel.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("DOMMouseScroll.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("dragstart.wijinput",function(t){e.GlobalEventHandler.OnDragStart(n,t)}),t(r).bind("dragend.wijinput",function(t){e.GlobalEventHandler.OnDragEnd(n,t)}),t(r).bind("mouseout.wijinput",function(t){e.GlobalEventHandler.OnMouseOut(n,t)}),t(r).bind("drop.wijinput",function(t){e.GlobalEventHandler.OnDrop(n,t)}),t(r).bind("touchstart.wijinput",function(t){e.GlobalEventHandler.OnTouchStart(n,t)}),t(r).bind("touchend.wijinput",function(t){e.GlobalEventHandler.OnTouchEnd(n,t)}),t(r).bind("select.wijinput",function(t){e.GlobalEventHandler.OnSelect(n,t)}),e.CoreUtility.safari&&(t(r).bind("dragenter.wijinput",function(e){n._safariDropText=getSelection().toString()}),t(r).bind("dragleave.wijinput",function(e){n._safariDropText=null})),t(r).bind("compositionstart.wijinput",function(t){e.GlobalEventHandler.OnCompositionStart(n,t)}),t(r).bind("compositionupdate.wijinput",function(t){e.GlobalEventHandler.OnCompositionUpdate(n,t)}),t(r).bind("compositionend.wijinput",function(t){e.GlobalEventHandler.OnCompositionEnd(n,t)}),e.CoreUtility.IsPad()&&t(r).bind("input.wijinput",function(t){e.GlobalEventHandler.OnInput(n,t)}))},n.prototype.ResetData=function(e){this.SetText(e.ResetData)},n.prototype._createElementForNoSpinAndNoDropDown=function(e){return e},n.prototype._addControlEventHandler=function(){},n.prototype._reCreate=function(){},n.prototype._onSpinPropertyChanged=function(e){e=e.toLowerCase(),e==="alignment"||e==="position"?this._getRealSpinVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="spinupimage"||e==="spindownimage"||e==="pressedspinupimage"||e==="pressedspindownimage")},n.prototype._onDropDownPropertyChanged=function(e){e=e.toLowerCase(),e==="position"?this._getRealDropDownVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="buttonimage"||e==="pressedbuttonimage")},n.prototype._isSupportClipBoard=function(){return this.GetUseClipboard()?e.CoreUtility.IsIE()?!0:!1:!0},n.prototype._onpropertyChanged=function(){},n.prototype.GetSpinDelay=function(){return this.Delay},n.prototype.SetSpinDelay=function(e){this.Delay=e},n.prototype.GetSpinEnabled=function(){return this.SpinEnabled&&this.Enabled},n.prototype.SetSpinEnabled=function(e){this.SpinEnabled=e},n.prototype.GetSpinIncrement=function(){return this.Increment},n.prototype.SetSpinIncrement=function(e){this.Increment=e},n.prototype.GetSpinOnKeys=function(){return this.SpinOnKeys},n.prototype.SetSpinOnKeys=function(e){this.SpinOnKeys=e},n.prototype.GetSpinVisible=function(){return this.Visible},n.prototype._getRealSpinVisible=function(){return this.GetSpinVisible()},n.prototype.SetSpinVisible=function(e){this.Visible=e},n.prototype.GetSpinWrap=function(){return this.Wrap},n.prototype.SetSpinWrap=function(e){this.Wrap=e},n.prototype.GetAutoDropDown=function(){return this._dropDown.AutoDropDown},n.prototype.SetAutoDropDown=function(e){this._dropDown.SetAutoDropDown(e)},n.prototype.GetDropDownButtonImageUrl=function(){return this._dropDown.GetButtonImage()},n.prototype.SetDropDownButtonImageUrl=function(e){this._dropDown.SetButtonImage(e)},n.prototype.GetDropDownClosingAnimation=function(){return this._dropDown.ClosingAnimation},n.prototype.SetDropDownClosingAnimation=function(e){this._dropDown.SetClosingAnimation(e)},n.prototype.GetDropDownShadow=function(){return this._dropDown.DropDownShadow},n.prototype.SetDropDownShadow=function(e){this._dropDown.SetDropDownShadow(e)},n.prototype.GetDropDownEnabled=function(){return this._dropDown.GetEnabled()&&this.Enabled},n.prototype.SetDropDownEnabled=function(e){this._dropDown.SetEnabled(e)},n.prototype.GetDropDownOpeningAnimation=function(){return this._dropDown.OpeningAnimation},n.prototype.SetDropDownOpeningAnimation=function(e){this._dropDown.SetOpeningAnimation(e)},n.prototype.GetDropDownPosition=function(){return this._dropDown.Position},n.prototype.SetDropDownPosition=function(e){this._dropDown.SetPosition(e)},n.prototype.GetPressedDropDownButtonImageUrl=function(){return this._dropDown.GetPressedButtonImage()},n.prototype.SetPressedDropDownButtonImageUrl=function(e){this._dropDown.SetPressedButtonImage(e)},n.prototype.GetDropDownVisible=function(){return this._dropDown.Visible},n.prototype._getRealDropDownVisible=function(){return this.GetDropDownVisible()},n.prototype.SetDropDownVisible=function(e){this._dropDown.SetVisible(e)},n}();e.BaseInputControl=T;var N;(function(e){e[e.OctalAscII=0]="OctalAscII",e[e.HexAscII=1]="HexAscII",e[e.HexUnicode=2]="HexUnicode",e[e.DefinedCharBase=3]="DefinedCharBase",e[e.DefinedCharAddition=4]="DefinedCharAddition",e[e.CharSubset=5]="CharSubset",e[e.EnumGroup=6]="EnumGroup",e[e.Quantifier=7]="Quantifier",e[e.PromptChar=8]="PromptChar",e[e.Unknow=9]="Unknow"})(N||(N={}));var C=function(){function t(){}return t.ParseFormat=function(n,d){t.Owner=d;var v=new k(t.Owner,0,!1);if(n===null||n.length===0){var m=new E(t.Owner),g=new Array;m._bitState=g;var b=new y(t.Owner,!0),x=new i(t.Owner,!0);b.Add(x);var T=new r(t.Owner,!0);b.Add(T);var N=new c(t.Owner,!0);return b.Add(N),m.FilterField(0,2147483647,b,g),m.InitialText(""),m._trueLength=0,v.PushBack(m),v.formatIsNull=!0,v}var C=0,L="",A=8,O=5,M=t.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen,H;while(n.length>C){switch(D){case 9:throw"InvalidParameter";case 5:var B=t.AnalyseCharSubset(_);b=B.uf;if(!B.Result)throw"Invalid parameter";H=b,A=5;break;case 4:if(_==="\\K")H=new h(t.Owner,!0);else if(_==="\\H")H=new r(t.Owner,!0);else if(_==="\\N")H=new l(t.Owner,!0);else if(_==="\\"+t.DBCS_K)H=new p(t.Owner,!0);else if(_==="\\"+t.DBCS_J)H=new s(t.Owner,!0);else if(_==="\\"+t.DBCS_M)H=new o(t.Owner,!0);else if(_==="\\"+t.DBCS_I)H=new u(t.Owner,!0);else if(_==="\\"+t.DBCS_G)H=new a(t.Owner,!0);else if(_==="\\"+t.DBCS_N)H=new f(t.Owner,!0);else if(_==="\\"+t.DBCS_Z)H=new i(t.Owner,!0);else{if(_!=="\\"+t.DBCS_T)throw"argument null";H=new c(t.Owner,!0)}A=5;break;case 6:var j=[];if(t.AnalyseEnumGroup(_,j)){var F=new S(t.Owner);F.Init(j),v.PushBack(F),A=6,C+=P;var I=t.GetKeyWord(n,C);_=I.KeyWord,D=I.KeyType,P=I.KeyLen;continue}throw"invalid parameter";case 0:try{var q=_.Substring(1);q=parseInt(q,8);if(q===0)throw"argument exception";var R=String.fromCharCode(q);A===8?L+=R:(L=R,A=8)}catch(U){throw"invalid parameter"}break;case 1:case 2:try{var q=_.Substring(2);q=parseInt(q,16);if(q===0)throw"argument exception";var R=String.fromCharCode(q);A===8?L+=R:(L=R,A=8)}catch(U){throw"invalid parameter"}break;case 8:A===8?L+=_:(L=_,A=8);break;case 7:throw"invalid parameter";default:throw"invalid parameter"}C+=P;var z=1,W=1;if(C<n.length){M=t.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen;switch(D){case 9:throw"invalid parameter";case 5:case 4:case 6:O=5;break;case 7:var X=t.AnalyseQuantifier(_);W=X.Min,z=X.Max;if(!X.Result)throw"invalid parameter";C+=P,M=t.GetKeyWord(n,C),_=M.KeyWord,D=M.KeyType,P=M.KeyLen,O=7;break;case 0:case 2:case 1:case 8:O=8}if(A===8){if(O!==8){if(O===7)throw"invalid parameter";v.PushBack(new w(L))}}else{var V=new E(t.Owner);V.FilterField(W,z,H,[!1,!1,!1]),V.InitialText(e.Utility.ToString(V.GetPromptChar(),W)),V._trueLength=0,v.PushBack(V)}}else if(A===8)v.PushBack(new w(L));else{var V=new E(t.Owner);V.FilterField(1,1,H,[]),v.PushBack(V)}}for(var $=0;$<v.fieldCount;$++)if(!(v.GetFieldByIndex($)instanceof w))break;if($===v.fieldCount)throw"invalid parameter";return v},t.ParseFillExpression=function(e,n){var r={};r.Expression="",r.Result=!0;if(e==="{}")return r.Expression="{}",r.Result=!0,r;if(e!==undefined&&e!==null&&e.length>0)try{var i=e,s="\0",o=t.ParseFillingString(i);i=o.Format,s=o.FillingChar;if(s!=="\0"){if(!t.NullParse(i))throw"argument exception";n!==undefined&&n!==null&&n.fieldCount>0?r.Expression=n.GetFillingString(s):r.Expression=e}else r.Expression=i}catch(u){throw"argument exception"}else r.Expression=null;return r},t.ParseFillingString=function(e){var n={};n.Format=e,n.FillingChar="\0",n.Result=!1;if(e===undefined||e===null||e.length===0)return n.Result=!1,n;var r=e.indexOf("{"),i=e.indexOf("}");if(r===-1&&i===-1)return e=t.RemoveEscapeChar(e),n.Format=e,n.Result=!1,n;while(r>0&&e.charAt(r-1)==="\\")r=e.indexOf("{",r+1);while(i>0&&e.charAt(i-1)==="\\")i=e.indexOf("}",i+1);if(r<i){if(r===-1)return e=t.RemoveEscapeChar(e),n.Format=e,n.Result=!1,n;if(i-r===1)n.Format="";else{if(e.charAt(r+1)==="{")throw"argument exception";if(e.charAt(r+1)==="\\"){if(!(r+2<i))throw"arugment exception";r++}n.FillingChar=e.charAt(r+1)}return n.Result=!0,n}return e=t.RemoveEscapeChar(e),n.Format=e,n.Result=!1,n},t.RemoveEscapeChar=function(e){if(e.indexOf("\\")!==-1){var t="",n=e.length;for(var r=0;r<n;r++){if(e.charAt(r)==="\\"){r+1<n&&(t+=e.charAt(++r));continue}t+=e.charAt(r)}return t}return e},t.NullParse=function(e){var n=t.FindSpecialCh(e,"{",0),r=t.FindSpecialCh(e,"}",0);if(n>-1&&r>-1&&r>n){if(t.FindSpecialCh(e,"{",n+1)>-1)return!1;if(t.FindSpecialCh(e,"}",r+1)>-1)return!1}return!0},t.FindSpecialCh=function(e,t,n){var r=0,i=n-1;do{i=e.indexOf(t,i+1);if(i===0||i===-1)return i;for(var s=i-1;s>0;s--){if(e.charAt(s)!=="\\")break;r++}}while(e.charAt(i-1)==="\\"&&r%2!==0);return i},t.GetKeyWord=function(e,n){var r={};r.KeyLen=0,r.KeyType=9,r.KeyWord=null;if(n>=e.length)return r;var i=e.charAt(n);switch(i){case"\\":var s=t.GetEscapeCharLength(e.Substring(n),r.KeyType,r.KeyLen);if(s.Result)return r.KeyLen=s.KeyLen,r.KeyType=s.KeyType,r.KeyWord=e.substr(n,r.KeyLen),r;var o=e.charAt(n+1);return o==="A"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[A-Z]",r):o===t.DBCS_A?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_A+"-"+t.DBCS_Z+"]",r):o==="a"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[a-z]",r):o===t.DBCS_a?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+"]",r):o==="D"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-9]",r):o===t.DBCS_D?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+"]",r):o==="B"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-1]",r):o===t.DBCS_B?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_0+"-"+t.DBCS_1+"]",r):o==="X"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[0-9A-Fa-f]",r):o===t.DBCS_X?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+t.DBCS_A+"-"+t.DBCS_F+t.DBCS_a+"-"+t.DBCS_f+"]",r):o==="W"?(r.KeyLen=2,r.KeyType=5,r.KeyWord="[a-zA-Z_0-9]",r):o===t.DBCS_W?(r.KeyLen=2,r.KeyType=5,r.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+t.DBCS_A+"-"+t.DBCS_Z+t.DBCS__+t.DBCS_0+"-"+t.DBCS_9+"]",r):o==="K"||o===t.DBCS_K||o===t.DBCS_J||o===t.DBCS_Z||o==="H"||o===t.DBCS_T||o===t.DBCS_M||o===t.DBCS_I||o===t.DBCS_G||o===t.DBCS_N||o==="N"||o===t.DBCS_E||o===t.DBCS_V?(r.KeyLen=2,r.KeyType=4,r.KeyWord=e.substr(n,2),r):t.IsSpecialChar(o)?(r.KeyLen=2,r.KeyType=8,r.KeyWord=e.substr(n+1,1),r):(r.KeyWord="",r);case"{":var u=e.indexOf("}",n+1);return u===-1?(r.KeyWord="",r):(r.KeyType=7,r.KeyLen=u+1-n,r.KeyWord=e.substr(n,r.KeyLen),r);case"[":var u=n,a=0;do{u=e.indexOf("]",u+1);if(u===-1)return"";for(var f=u-1;f>0;f--){if(e.charAt(f)!=="\\")break;a++}}while(e.charAt(u-1)==="\\"&&a%2!==0);return r.KeyType=5,r.KeyLen=u+1-n,r.KeyWord=e.substr(n,r.KeyLen),r;case"(":var u=n;do{u=e.indexOf(")",u+1);if(u===-1)return""}while(e.charAt(u-1)==="\\");return r.KeyType=6,r.KeyLen=u+1-n,r.KeyWord=e.substr(n,r.KeyLen),r;case"*":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{0,}",r;case"+":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{1,}",r;case"?":return r.KeyLen=1,r.KeyType=7,r.KeyWord="{0,1}",r;default:var l=n+1;for(;l<e.length;l++)if(t.IsSpecialChar(e.charAt(l)))break;return r.KeyType=8,r.KeyLen=l-n,r.KeyWord=e.substr(n,r.KeyLen),r}},t.IsSpecialChar=function(e){return e==="\\"||e==="{"||e==="}"||e==="["||e==="]"||e==="("||e===")"||e==="."||e==="*"||e==="+"||e==="?"},t.GetEscapeCharLength=function(e,n,r){var i={};i.Result=!1,i.KeyType=n,i.Length=r;if(e.charAt(0)!=="\\")return i;var s=1,o=e.charAt(1);return o==="x"?e.length<s+3?i:(i.Length=4,i.KeyType=1,i.Result=!0,i):o==="u"?e.length<s+5?i:(i.Length=6,i.KeyType=2,i.Result=!0,i):t.IsOctalChar(o)?e.length<s+3?i:(i.Length=4,i.KeyType=0,i.Result=!0,i):i},t.IsOctalChar=function(e){return e>="0"&&e<="7"},t.AnalyseQuantifier=function(e){var t={};t.Min=-1,t.Max=-1,t.Result=!1;var n=e.indexOf(",",1);if(n===-1)try{return t.Min=parseInt(e.substr(1,e.length-2)),t.Max=t.Min,t.Result=t.Max>0,t}catch(r){return t.Result=!1,t}try{return t.Min=parseInt(e.substr(1,n-1)),n===e.length-2?t.Max=Math.pow(2,31):t.Max=parseInt(e.substr(n+1,e.length-n-2)),t.Min<0||t.Min>t.Max||t.Max===0?(t.Result=!1,t):(t.Result=!0,t)}catch(r){return t.Result=!1,t}},t.AnalyseCharSubset=function(e,n){var d={};d.uf=n,d.Result=!1;var v=[],b=1,w=!0,E="";if(e==="[]"){v.push(new i(t.Owner,!0)),v.push(new r(t.Owner,!0)),v.push(new c(t.Owner,!0));if(d.uf&&d.uf.filterArray.length>0)for(var S=0;S<n.filterArray.length;S++)v.push(n.filterArray[S]);return d.uf=new y(t.Owner,!0),d.uf.AddRange(v),d.Result=!0,d}if(e==="[^]"){v.push(new i(t.Owner,!1)),v.push(new r(t.Owner,!1)),v.push(new c(t.Owner,!1));if(d.uf&&d.uf.filterArray.length>0)for(var S=0;S<n.filterArray.length;S++)v.push(n.filterArray[S]);return d.uf=new y(t.Owner,!0),d.uf.AddRange(v),d.uf.filterArray[0]._include=!1,d.uf.filterArray[1]._include=!1,d.uf.filterArray[2]._include=!1,d.Result=!0,d}e.charAt(b)==="^"&&(w=!1,b++);while(b<e.length-1){var x=e.charAt(b),T=1,N=0;switch(x){case"-":return d.Result=!1,d;case"^":if(w===!1)throw"invalid fromat";if(E.length>0){var C=new m(E,"");C._include=w,v.push(C)}if(v.length>0){d.uf=new y(t.Owner,!0),d.uf.AddRange(v);for(var S=0;S<d.uf.filterArray.length;S++)if(!d.uf.filterArray[S]._include)return d.Result=!1,d;var k=t.AnalyseCharSubset("["+e.substr(b,e.length-b),d.uf);return d.uf=k.uf,d.Result=k.Result,d}return d.Result=!1,d;case"\\":var L=t.GetEscapeCharLength(e.substr(b),T,N);T=L.KeyType,N=L.Length;if(L.Result){var A=16,O=null;T===0?(A=8,O=e.substr(b+1,N-1)):O=e.substr(b+2,N-2),e=e.substring(0,b)+e.substr(b+N);var M=String.fromCharCode(parseInt(O,A));e=e.substring(0,b)+M+e.substr(b);continue}var _=e.charAt(b+1);if(_==="A")v.push(new g("A","Z",t.Owner,!0)),b++;else if(_===t.DBCS_A)v.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),b++;else if(_==="a")v.push(new g("a","z",t.Owner,!0)),b++;else if(_===t.DBCS_a)v.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),b++;else if(_==="D")v.push(new g("0","9",t.Owner,!0)),b++;else if(_===t.DBCS_D)v.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),b++;else if(_==="B")v.push(new g("0","1",t.Owner,!0)),b++;else if(_===t.DBCS_B)v.push(new g(t.DBCS_0,t.DBCS_1,t.Owner,!0)),b++;else if(_==="X")v.push(new g("0","9",t.Owner,!0)),v.push(new g("A","F",t.Owner,!0)),v.push(new g("a","f",t.Owner,!0)),b++;else if(_===t.DBCS_X)v.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),v.push(new g(t.DBCS_A,t.DBCS_F,t.Owner,!0)),v.push(new g(t.DBCS_a,t.DBCS_f,t.Owner,!0)),b++;else if(_==="W")v.push(new g("0","9",t.Owner,!0)),v.push(new g("A","Z",t.Owner,!0)),v.push(new g("a","z")),E+="_",b++;else if(_===t.DBCS_W)v.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),v.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),v.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),E+=t.DBCS__,b++;else if(_==="K")v.push(new h(t.Owner,!0)),b++;else if(_==="H")v.push(new r(t.Owner,w)),b++;else if(_===t.DBCS_K)v.push(new p(t.Owner,!0)),b++;else if(_===t.DBCS_J)v.push(new s(t.Owner,!0)),b++;else if(_===t.DBCS_M)v.push(new o(t.Owner,!0)),b++;else if(_===t.DBCS_I)v.push(new u(t.Owner,!0)),b++;else if(_==="N")v.push(new l(t.Owner,!0)),b++;else if(_===t.DBCS_N)v.push(new f(t.Owner,!0)),b++;else if(_===t.DBCS_G)v.push(new a(t.Owner,!0)),b++;else if(_===t.DBCS_Z)v.push(new i(t.Owner,!0)),b++;else if(_===t.DBCS_T)v.push(new c(t.Owner,!0)),b++;else{if(_!=="\\"&&_!=="]"&&_!=="["&&_!=="-"&&_!=="^")return!1;if(E.indexOf(_)!==-1){b++;continue}E+=_,b++}break;default:if(e.length>b+2&&e.charAt(b+1)==="-"){var D=t.GetEscapeCharLength(e.substr(b+2),T,N);T=D.KeyType,N=D.Length;if(D.Result){var O=null,A=16;T===0?(A=8,O=e.substr(b+2+1,N-1)):O=e.substr(b+2+2,N-2);var P=b+2;e=e.substring(0,P)+e.substr(P+N);var M=String.fromCharCode(parseInt(O,A));e=e.substring(0,P)+M+e.substr(P)}var H,B;e.charAt(b)>e.charAt(b+2)?(H=e.charAt(b+2),B=e.charAt(b)):(H=e.charAt(b),B=e.charAt(b+2));var j=new g(H,B,t.Owner,!0);v.push(j),b+=2;break}if(E.indexOf(x)!==-1){b++;continue}E+=x}b++}E.length>0&&v.push(new m(E,"",t.Owner,!0));var F=v.length;if(d.uf&&d.uf.filterArray.length>0)for(var S=0;S<d.uf.filterArray.length;S++)v.push(n.filterArray[S]);d.uf=new y(t.Owner,!0),d.uf.AddRange(v);for(var S=0;S<F;S++)d.uf.filterArray[S]._include=w;return d.Result=!0,d},t.AnalyseEnumGroup=function(t,n){t=t.Substring(1,1+t.length-2);var r=0,i=0;while(r<t.length){var s=e.Utility.IndexOfAny(t,["|",")","\\","("],r);if(s===-1){var o=t.Substring(i);if(o.length===0)return!1;n.push(o),r=t.length;continue}if(t.charAt(s)==="\\"){var u=t.charAt(s+1);if(u==="\\"||u===")"||u==="|"||u==="("){t=t.Substring(0,s)+t.Substring(s+1,t.length),r=s+1;if(r===t.length){var o=t.Substring(i);if(o.length===0)return!1;n.push(o)}continue}return!1}if(t.charAt(s)==="|"){var o=t.Substring(i,s);if(o.length===0)return!1;n.push(o),r=s+1,i=r;continue}return!1}return!0},t.DBCS_A=e.CharProcess.CharEx.ToFullWidth("A").text,t.DBCS_a=e.CharProcess.CharEx.ToFullWidth("a").text,t.DBCS_B=e.CharProcess.CharEx.ToFullWidth("B").text,t.DBCS_D=e.CharProcess.CharEx.ToFullWidth("D").text,t.DBCS_J=e.CharProcess.CharEx.ToFullWidth("J").text,t.DBCS_K=e.CharProcess.CharEx.ToFullWidth("K").text,t.DBCS_W=e.CharProcess.CharEx.ToFullWidth("W").text,t.DBCS_X=e.CharProcess.CharEx.ToFullWidth("X").text,t.DBCS_Z=e.CharProcess.CharEx.ToFullWidth("Z").text,t.DBCS_T=e.CharProcess.CharEx.ToFullWidth("T").text,t.DBCS_M=e.CharProcess.CharEx.ToFullWidth("M").text,t.DBCS_I=e.CharProcess.CharEx.ToFullWidth("I").text,t.DBCS_N=e.CharProcess.CharEx.ToFullWidth("N").text,t.DBCS_G=e.CharProcess.CharEx.ToFullWidth("G").text,t.DBCS_E=e.CharProcess.CharEx.ToFullWidth("E").text,t.DBCS_V=e.CharProcess.CharEx.ToFullWidth("V").text,t.DBCS_z=e.CharProcess.CharEx.ToFullWidth("z").text,t.DBCS_0=e.CharProcess.CharEx.ToFullWidth("0").text,t.DBCS_1=e.CharProcess.CharEx.ToFullWidth("1").text,t.DBCS_9=e.CharProcess.CharEx.ToFullWidth("9").text,t.DBCS_F=e.CharProcess.CharEx.ToFullWidth("F").text,t.DBCS_f=e.CharProcess.CharEx.ToFullWidth("f").text,t.DBCS__=e.CharProcess.CharEx.ToFullWidth("_").text,t}(),k=function(e){function t(t,n,r){e.call(this,n),this._focusNull="",this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this._owner=t,this.formatIsNull=r}return __extends(t,e),t.prototype.GetShowLiterals=function(){return this._owner.GetShowLiterals()},t.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},t.prototype.GetLength=function(){var e=this.ValueIsNull();if(e&&this._focusNull!==""&&!this.formatIsNull)return this._focusNull.GetLength();if(e===!0&&this._focusNull!=="")return 0;var t=this.GetLastVisibleFieldIndex(this.GetShowLiterals()),n=0;for(var r=0;r<=t;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}return n},t.prototype.GetInputFieldIndexByPos=function(e){var t=null,n=0,r,i=this.GetFieldIndex(e,n);r=i.index,n=i.offset,r!==0&&n===0&&this.fieldArray[r-1].fieldLabel!=="PromptField"&&(r--,n=this.fieldArray[r].text.GetLength());var s=this.fieldArray[r];if(n===s.text.GetLength()){var o;if(n<s._maxLength){t=r;if(t!==this.fieldCount-1)for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField")break}else for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField"){t=o;break}}else t=r;var u={},a={};if(t){var f=!1;while(f===!1){s=this.fieldArray[t];if(s.fieldLabel==="FilterField")a.fieldMark=s._filter.filterLabel,f=!0;else if(s.fieldLabel==="EnumField")a.fieldMark="Enum",f=!0;else{if(t===this.fieldCount-1){a=null;break}t++}a.fieldIndex=t}}else a=null;return a!=null?(u.currentField=a,u):null},t.prototype.GetCurrentField=function(e){var t={},n=0,r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i];s.fieldLabel==="PromptField"&&r++;var o=s.GetLength();n+=o;if(e<=n)return s.fieldLabel==="PromptField"?e===n-o?t.index=i-r:e===n?t.index=i-r+1:t.index=-1:t.index=i-r,t}},t.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];e+=n.text}return e},t.prototype.GetTextSimpleMode=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField"&&!e)continue;t+=r.text}return t},t.prototype.GetExistLength=function(){var e=this.fieldCount,t,n;for(t=this.fieldCount-1;t>=0;t--){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;e=t;break}var r=0;for(t=0;t<=e;t++)n=this.fieldArray[t],t===e?r>=21474e3?r=n._maxLength:r+=n._maxLength:r+=n.text.GetLength();return r},t.prototype.GetNonLiteralsText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?(n=f.text.Substring(r,o),n.GetLength()>f._trueLength&&(n=n.Substring(0,f._trueLength))):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text.Substring(0,f.text.GetLength()))}return n},t.prototype.GetNonPromptText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?n=f.text.Substring(r,o):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text)}return n},t.prototype.ValueIsNull=function(){for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel==="PromptField")continue;if(t.GetFieldStatus()!==0)return!1}return!0},t.prototype.ValueIsFull=function(e){e=e?e:0;var t,n;if(e!=null&&e===1)for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(this.fieldCount===1&&n._minLength===0)return!0;if(n.fieldLabel==="PromptField")continue;if(!n.GetFieldIsFull())return!1}else for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;if(n.GetFieldStatus()!==2)return!1}return!0},t.prototype.GetShowText=function(e,t,n){if(!n){var r=this.ValueIsNull();if(r===!0&&this._focusNull!==""&&t=="")return this._focusNull;if(r===!0&&this._focusNull!==""&&t==null)return"";if(r===!0&&t==="LoseFocus")return this._owner._getDisplayNullExpression()!==null?this._owner._getDisplayNullExpression():this.GetText()}var i=this.GetLastVisibleFieldIndex(e);if(i<0)return"";var s="";for(var o=0;o<i;o++)s+=this.fieldArray[o].text;if(i<this.fieldCount){var u=this.fieldArray[i];u.fieldLabel==="PromptField"||e===1?s+=this.fieldArray[i].text:s+=u.text.Substring(0,u._trueLength)}return s},t.prototype.GetLastVisibleFieldIndex=function(e){var t=this.fieldCount-1;if(e!==1){var n=this.fieldCount-1,r=!0;for(t=n;t>=0;t--){var i=this.fieldArray[t];if(i.fieldLabel==="PromptField")continue;if(i._trueLength===0){r=!1;continue}if(i._trueLength>0&&i._trueLength<i._minLength)break;if(e===2){r&&(t=n);break}while(t<n&&this.fieldArray[t+1].fieldLabel==="PromptField")t++;break}}return t},t.prototype.GetValue=function(){var e=this.fieldCount-1,t;for(;e>=0;e--){t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t._trueLength!==0)break}if(e<0)return"";var n="";for(var r=0;r<=e;r++){t=this.fieldArray[r];if(t.fieldLabel==="PromptField")continue;var i=t._trueLength,s=t.text,o=s;if(t.fieldLabel==="FilterField"){o=o.Substring(0,i);for(var u=0;u<i;u++)t._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));var a=s.GetLength(),f=o.GetLength();if(i===0&&a!==0){if(r!==e){var l="";for(var c=0;c<a;c++)l+=" ";o=l}}else if(a>f&&r!==e){var l="";for(var c=0;c<a-f;c++)l+=" ";o+=l}}else t._activeItem===-1&&(o=" ");n+=o}return n},t.prototype.GetOldValue=function(){var e="",t;for(var n=0;n<this.fieldCount;n++){t=this.fieldArray[n];if(t.fieldLabel==="PromptField")continue;var r;if(t.fieldLabel==="FilterField"){r=t.undoText;if(t._undoBitState&&t._undoBitState.length>0){var i=!0;for(var s=t._undoBitState.length-1;s>=0;s--)t._undoBitState[s]===!1?i?r=r.Substring(0,r.GetLength()-1):r=r.Substring(0,s)+" "+r.Substring(s+1,r.GetLength()):i=!1}else r=""}else t._undoItem!==-1?r=t.undoText:r="";e+=r}return e},t.prototype.SetValue=function(e,t){if(!e)return this.ClearContent(),!0;var n=!1;return t!=null&&(n=t),this.SetFieldCollectionValue(e,n)?!0:(this.RollBack(),!1)},t.prototype.SetFieldCollectionValue=function(e,t){this.ClearContent();var n=!1;return t!=null&&(n=t),e.GetLength()!==0&&this.Insert(0,e,n,!1),!0},t.prototype.ClearContent=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState();if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.oldText=t.text,t.Delete(0,t.text.GetLength())}},t.prototype.RollBack=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.RollBack()}},t.prototype.SaveOldState=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.SaveOldState()}},t.prototype.SaveUndoState=function(){if(this.formatIsNull){var e=this.fieldArray[0],t=-1;if(this.oldStart===-1)e.SaveUndoState(),t=this.newStart;else{var n=e.text.substr(this.newStart,this.newLength);t=e.undoText.IndexOf(n,this.oldStart),t!==this.oldStart+this.oldLength&&(t=this.newStart,t+this.newLength!==this.oldStart&&e.SaveUndoState())}this.oldStart>0?this.oldStart=Math.min(this.oldStart,t):this.oldStart=t,this.oldLength+=this.newLength}else if(this.fieldCount>0)for(var r=0;r<this.fieldCount;r++){var e=this.fieldArray[r];e.fieldLabel!=="PromptField"&&e.SaveUndoState()}},t.prototype.Undo=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0;if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.Undo()}},t.prototype.PerformSpin=function(e,t,n){var r,i=this.GetFieldIndex(e,r),s=i.index;r=i.offset,this.SaveOldState();if(r>0||this.fieldArray[s].fieldLabel==="EnumField"){r=this.fieldArray[s].PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}else{var a=s,f;for(;a<this.fieldCount;a++){f=this.fieldArray[a];if(f._minLength===0){if(f.text.GetLength()===0)continue;break}if(f.fieldLabel==="EnumField"){r=f.PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();return e=o+r,e}break}if(s>0){f=this.fieldArray[s-1],r=f.text.GetLength(),r<f._minLength&&(r=f._minLength),r=f.PerformSpin(r,t,n);if(f.fieldLabel==="EnumField"){var o=0;for(var u=0;u<s-1;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}}}return e},t.prototype.Delete=function(e,t){if(this.fieldCount===0)return e;var n=0;this.SaveOldState();var r=this.GetFieldIndex(e,n),i=r.index;n=r.offset,this.fieldArray[i].fieldLabel==="PromptField"&&t>this.fieldArray[i].text.GetLength()-n&&(e+=this.fieldArray[i].text.GetLength()-n,t-=this.fieldArray[i].text.GetLength()-n,i++,n=0),this.newStart=e,this.newLength=t,this.formatIsNull&&this.SaveUndoState();var s=0;r=this.GetFieldIndex(e+t,s);var o=r.index;s=r.offset;while(o!==0&&s===0){var u=this.fieldArray[o-1];if(u.fieldLabel==="PromptField")break;o--,s=this.fieldArray[o].text.GetLength()>this.fieldArray[o]._minLength?this.fieldArray[o].text.GetLength():this.fieldArray[o]._minLength}for(var a=i;a<=o;a++){var u=this.fieldArray[a],f=n;if(i===o)s>n?n=u.Delete(n,s-n):n-=n-s;else if(a===i){var l=u.text.GetLength()-n;l>0&&(n=u.Delete(n,u.text.GetLength()-n))}else a===o?n=u.Delete(n,s):n=u.Delete(n,u.text.GetLength());n!=null&&(e+=n-f),n=0}return e},t.prototype.Replace=function(e,t,n,r){var i={};i.cursorPos=e,i.text=n;var s=this.GetFieldIndex(e,o),o=0,s=0,u={};u=this.GetFieldIndex(e,o),s=u.index,o=u.offset,this.SaveOldState();var a;for(;s<this.fieldCount;s++){a=this.fieldArray[s];if(a._minLength>0||a.text.GetLength()>0)break}while(s!==0&&o===0){if(this.fieldArray[s].fieldLabel!=="PromptField")break;s--,a=this.fieldArray[s],o=a.text.GetLength(),o<a._minLength&&(o=a._minLength)}this.newStart=e,this.newLength=t;var f=0,l;u=this.GetFieldIndex(e+t,f),l=u.index,f=u.offset;var c=0;for(var h=s;h<l;h++)a=this.fieldArray[l-1],c+=a.text.GetLength();c+=f,-w;while(l!==0&&f===0){a=this.fieldArray[l-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;l--,f=this.fieldArray[l].text.GetLength()}var p=n,d=!1,v=e-o;for(var m=s;m<=this.fieldCount-1;m++){d=!1,a=this.fieldArray[m];var g=a.text.GetLength()>a._minLength?a.text.GetLength():a._minLength;if(a.fieldLabel==="PromptField"){g=a.GetLength();if(r){var y=a.text.Substring(o,a.text.GetLength()),b=n.GetLength();n.GetLength()>=y.GetLength()?(n.Substring(0,y.GetLength())!==y&&(d=!0),n=n.Substring(y.GetLength(),n.GetLength()),e+=y.GetLength()):(n.Substring(0,y.GetLength())!==y&&(d=!0),n="",e+=n.GetLength());if(d){T;if(b===n.GetLength())break}}else v+o===e&&(e+=g-o);v+=a.text.GetLength()-o}else{var w=o,E=m===this.fieldCount-1;if(m>l){var S={},E=m===this.fieldCount-1;S=a.Insert(o,n,E),o=S.offset,n=S.text,d=S.existInvalid}else if(s===l){var x={};x=a.Replace(o,f-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===s){var x={};x=a.Replace(o,g-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===l){var x={};f-o>0?x=a.Replace(o,f-o,n,E):t>0&&(x=a.Replace(o,t,n,E)),o=x.offset,n=x.text,d=x.existInvalid}else{var x={};x=a.Replace(o,g,n),o=x.offset,n=x.text,d=x.existInvalid}var T=a.GetFieldStatus()!==2;if(T&&d)break;e+=o-w,v+=a._minLength>a.text.GetLength()?a._minLength:a.text.GetLength()}o=0;if(n===""){if(m<l){m++;var h=m,N=0;for(;m<l;m++)this.fieldArray[m].fieldLabel!=="PromptField"&&this.fieldArray[m].Delete(o,this.fieldArray[m].text.GetLength());for(var C=0;C<h;C++){var a=this.fieldArray[C],g=a.GetLength();N+=g}if(e===N&&a._trueLength===a._maxLength)for(;h<=l;h++){if(this.fieldArray[h].fieldLabel!=="PromptField"||h===this.fieldCount-1)break;e+=this.fieldArray[h].text.GetLength()}if(f===0)break;this.fieldArray[l].fieldLabel!=="PromptField"&&this.fieldArray[l].Delete(o,f)}break}}return p===n?(this.RollBack(),i.success=!1):i.success=!0,i.cursorPos=e,i.text=n,i},t.prototype.SetText=function(e,t){var n=0,r={};r.cursorPos=n,r.text=e;if(this.fieldCount===0||!e||n<0)return r;var i=0,s=0,o={};o=this.GetFieldIndex(n,i),s=o.index,i=o.offset;if(i===this.fieldArray[s]._maxLength)return r;while(s!==0&&i===0){var u=this.fieldArray[s-1];if(!(u.fieldLabel!=="PromptField"&&u.text.GetLength()<u._maxLength))break;s--,i=this.fieldArray[s]._trueLength,i<this.fieldArray[s]._minLength&&(i=this.fieldArray[s]._minLength)}var a=!1,f=s,l=n-i;for(;f<this.fieldCount;f++){a=!1;var u=this.fieldArray[f];if(u.fieldLabel==="PromptField"){if(t){var c=u.text.Substring(i,u.text.GetLength()),h=e.GetLength();e.GetLength()>=c.GetLength()?e.Substring(0,c.GetLength())!==c?a=!0:(e=e.Substring(c.GetLength(),e.GetLength()),n+=c.GetLength()):(c.Substring(0,e.GetLength())!==e&&(a=!0),e="",n+=e.GetLength());if(a){m;if(e.GetLength()===h)return r.isValid=!1,r}}else l+i===n&&(n+=u.maxLength-i);l+=u.maxLength-i}else{var p=i,d={},v=f===this.fieldCount-1;d=u.SetTextInternal(e,i,v),this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),i=d.offset,e=d.text,a=d.existInvalid;var m=d.exception;if(a&&m)return r.isValid=!1,r;n+=i-p,l+=u._minLength<u._trueLength?u._trueLength:u._minLength}i=0;if(e.GetLength()===0&&(a||m)){if(!t)break;if(a)return r.isValid=!1,r}}if(f>=this.fieldCount&&e!==""&&e.GetLength()>0)return r.isValid=!1,r;var g=this.GetFieldIndex(n,i),y=g.index,b=g.offset;return f<this.fieldCount&&y===f+1&&b===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.fieldArray[f+1].fieldLabel==="PromptField"&&(n+=this.fieldArray[f+1].GetLength()),r.isValid=!0,r.cursorPos=n,r.text=e,r},t.prototype.Insert=function(e,t,n,r){var i={};i.cursorPos=e,i.text=t;if(this.fieldCount===0||!t||e<0)return i;var s=0,o=this.GetFieldIndex(e,s),u=o.index;s=o.offset;if(s===this.fieldArray[u]._maxLength)return i;while(u!==0&&s===0){var a=this.fieldArray[u-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;u--,s=this.fieldArray[u]._trueLength;if(s<this.fieldArray[u]._minLength){s=this.fieldArray[u]._minLength,i=this.InsertProcess(u,s,e,t,n);if(i.text==="")return i;if(e===s){u++,s=0;break}}}return this.InsertProcess(u,s,e,t,n,r)},t.prototype.InsertProcess=function(e,t,n,r,i,s){var o={},u=!1,a=e,f=n-t;this.SaveOldState();for(;a<this.fieldCount;a++){u=!1;var l=this.fieldArray[a];if(l.fieldLabel==="PromptField"){if(i){var c=l.text.Substring(t,l.text.GetLength()),h=r.GetLength();r.GetLength()>=c.GetLength()?(r.Substring(0,c.GetLength())!==c&&(u=!0),r=r.Substring(c.GetLength(),r.GetLength()),n+=c.GetLength()):(c.Substring(0,r.GetLength())!==r&&(u=!0),r="",n+=r.GetLength());if(u){m;if(r.GetLength()===h)break}}else n+=l.maxLength-t;f+=l.maxLength-t}else{var p=t,d=a===this.fieldCount-1,v=l.Insert(t,r,d,s);t=v.offset,r=v.text,u=v.existInvalid;var m=v.exception;if(u&&m){if(r===o.text)return o;break}n+=t-p,f+=l._minLength<l._trueLength?l._trueLength:l._minLength}t=0;if(r.GetLength()===0)break}if(a>=this.fieldCount&&r!==""&&r.GetLength()>0&&r===o.text)return o;var g=this.GetFieldIndex(n,t),y=g.index,b=g.offset;return a<this.fieldCount&&y===a+1&&b===0&&this.fieldArray[a].text.GetLength()===this.fieldArray[a]._maxLength&&this.GetShowLiterals()!==2&&this.fieldArray[a+1].fieldLabel==="PromptField"&&a+1!==this.fieldCount-1&&(n+=this.fieldArray[a+1].GetLength()),o.cursorPos=n,o.text=r,o},t.prototype.MoveField=function(e,t){var n=this.GetFieldIndex(e),r=n.index,i=n.offset;if(r===-1)return-1;if(t){if(r===this.fieldCount-1)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r<this.fieldCount)r++;if(r===this.fieldCount-1)return-1;r++;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===this.fieldCount-1)return-1;r++}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s}if(r===0||r===1&&i===0)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r>0)r--;if(r===0)return-1;r--;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===0)return-1;r--}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s},t.prototype.GetPosByCurrentField=function(e){if(e==null)return null;var t=0,n=-1,r=!1;for(;t<this.fieldCount;t++){var i=this.fieldArray[t];i.fieldLabel!=="PromptField"&&n++;if(n===e){r=!0;break}}if(r)return this.GetFieldRange(t);if(n===-1)return null;t>=this.fieldCount&&(t=this.fieldCount-1);while(this.fieldArray[t].fieldLabel==="PromptField")t--;return this.GetFieldRange(t)},t.prototype.GetFirstInputPosition=function(){var e=this.ValueIsNull();return e&&this._focusNull!==""&&!this.formatIsNull?0:this.fieldArray[0].fieldLabel==="PromptField"?this.GetFieldRange(1).start:0},t.prototype.GetTotalInputFieldCount=function(){var e=0;if(this.fieldCount>0)for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];n.fieldLabel!=="PromptField"&&e++}return e},t.prototype.GetFieldIndexByPos=function(e){return this.GetFieldIndex(e)},t.prototype.CanUndo=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t.undoTempText!==t.text)return!0}return!1},t.prototype.GetRealFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0,r=-1,i=-1;for(var s=0;s<this.fieldCount;s++){this.fieldArray[s].fieldLabel!=="PromptField"&&r++;if(r===e){i=s;break}}for(var s=0;s<i;s++){var o=this.GetFieldByIndex(s);n+=o.GetLength()}var u=this.GetFieldByIndex(i);return u?(t.start=n,t.length=u.GetLength(),t):t},t.prototype.PushBack=function(e){this.Add(e),this.fieldCount++},t}(x);e.MaskFieldCollection=k;var L=function(t){function n(e){t.call(this),this.OldPosition=0,this.IsFocus=!1,this.isSelectionDeterminedByHighlightText=!1,this.Format=null,e.HelpID!=null&&(this.HelpID=e.HelpID),e.Owner&&(this.Owner=e.Owner)}return __extends(n,t),n.prototype.GetCurrentField=function(e){var t=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&t!=null&&(this.Format.Fields._focusNull!==""&&t===this.Format.Fields._focusNull||t!=null&&t=="")){var n={};return n.index=-1,n}return this.Format.Fields.GetCurrentField(e)},n.prototype.FocusInternal=function(t,n,r,i,s){var o={},u=this.GetShowText(this.GetShowLiterals());this.OldValue=this.Format.Fields.GetText(),this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,o.SelectionStart=s,t===1&&(o.SelectionStart=e.Utility.GetCursorPosition(n),o.SelectionEnd=o.SelectionStart),o.Text=u,this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!==""&&o.Text===this.Format.Fields._focusNull&&(o.SelectionStart=0,o.SelectionEnd=0),this.Format.Fields.ValueIsNull()&&this.Format.Fields._owner._getDisplayNullExpression()!==null&&(o.SelectionStart=0,o.SelectionEnd=0);if(o.SelectionStart===-1||o.SelectionStart>o.Text.GetLength())o.SelectionStart=0,o.SelectionEnd=0;t===9?(o.SelectionStart=0,o.SelectionEnd=0):t===10&&(o.SelectionStart=o.Text.GetLength(),o.SelectionEnd=o.Text.GetLength());var a=o.SelectionStart;if(t!==6&&t!==2&&t!==3&&t!==8&&(r!==0||i!==-1))if(this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!=""&&o.Text===this.Format.Fields._focusNull)o.SelectionEnd=o.Text.GetLength();else{var f=this.SetCursorPositionAndSelection(r,"",i,a);f!=null&&(o.SelectionStart=f.SelectionStart,o.SelectionEnd=f.SelectionEnd)}return o.SelectionStart!=null&&(this.OldPosition=o.SelectionStart),this.IsFocus=!0,o},n.prototype.SetCursorPositionAndSelection=function(e,t,n,r){var i;if(e===2)this.isSelectionDeterminedByHighlightText=!0,i=this.SelectAll();else if(e===1){this.isSelectionDeterminedByHighlightText=!0;if(n<=-1)if(r>0){var s=this.Format.Fields.GetFieldIndex(r).index,o=this.Format.Fields.fieldArray[s];o.fieldLabel==="PromptField"&&(s===this.Format.Fields.fieldCount-1?s--:s++);var u=this.Format.Fields.GetFieldRange(s);i={},i.SelectionStart=u.start,i.SelectionEnd=u.length+u.start}else i=this.GetPosByCurrentField(r);else i=this.GetPosByCurrentField(n)}else i=this.GetPosByCurrentField(n),i!=null&&(i.SelectionStart=i.SelectionStart,i.SelectionEnd=i.SelectionStart);return i},n.prototype.GetPosByCurrentField=function(e){var t={},n=this.Format.Fields.GetPosByCurrentField(e);return n!=null&&n!=-1?(t.SelectionStart=n.start,t.SelectionEnd=n.start+n.length,t):null},n.prototype.LoseFocus=function(){var e={};return this.Owner._getFormatIsNull()!=1&&this.Format.Fields.SaveUndoState(),e.Text=this.GetShowText(this.GetShowLiterals(),"LoseFocus"),e.Value=this.Format.Fields.GetValue(),this.IsFocus=!1,e},n.prototype.GetSepText=function(){if(this.Owner._getFormatIsNull())return this.Format.Fields.GetText();var t="",n=this.Format.Fields.fieldCount-1;for(var r=0;r<=n;r++){var i=this.Format.Fields.fieldArray[r];if(i.fieldLabel==="PromptField")continue;var s=i._trueLength,o=i.text;if(i.fieldLabel==="FilterField")for(var u=0;u<s;u++)i._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));else i._activeItem===-1&&(o="");if(r!=n){var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a+e.Utility.Hold+";"}else{var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a}}return t},n.prototype.SetSepText=function(t){if(!t){for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;r.Clear()}return!0}var i=e.Utility.Hold+";",s=t.split(i);for(var o=0;o<s.length;o++)s[o]=s[o].replace(/@#GCC#@/g,",").replace(/@#GCD#@/g,"'").replace(/@#GCM#@/g,'"');var u=!1,a=0;for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;if(a<s.length){var f=s[a].split(e.Utility.Hold+","),l=f[0],c="";if(f.length>1){c=f[1];if(c&&c!=""&&l!=c){var h=0,p=l.IndexOf(" ",h);while(p!=-1)c.Substring(p,p+1)===e.Utility.MaskValChar&&(l=l.Substring(0,p)+this.Owner.GetPromptChar()+l.Substring(p+1,l.GetLength())),h=p,p=l.IndexOf(" ",h)}}u=a===this.Format.Fields.fieldCount-1;var d=l.GetLength();if(d<r._minLength)for(var o=0;o<r._minLength-d;o++)l+=this.Owner.GetPromptChar(),c+=e.Utility.MaskValChar;var v;r.fieldLabel==="FilterField"?v=r.SetTextInternal(l,0,u,c):v=r.SetTextInternal(l,0,u);if(v.existInvalid&&v.exception)return!1;a++}else r.Clear()}return!0},n.prototype.ProcessShortcutKey=function(e,n,r){var i={};switch(e){case"Clear":return n||this.Format.Fields.ClearContent(),i.SelectionStart=this.Format.Fields.GetFirstInputPosition(),i.SelectionEnd=i.SelectionStart,i.Text=this.GetShowText(this.GetShowLiterals()),i;case"NextField":if(this.IsLastInputField(r,!0))return!0;break;case"PreviousField":if(this.IsLastInputField(r,!1))return!0}return i=t.prototype.ProcessShortcutKey.call(this,e,n,r),i},n.prototype.KeyDown=function(n){var r=n.KeyCode,i=t.prototype.KeyDown.call(this,n);r===27&&this.Owner.Clear();if(n.KeyAction!=null)return i;if(n.ReadOnly===!0)return i;if(r!=undefined&&r!=null){if(r>=48&&r<=57||r>=65&&r<=90||r>=96&&r<=105||r===0||r===229||r===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(r===32||r===106||r===107||r===109||r===110||r===111||r===219||r===220||r===221||r===222||r>=186&&r<=192||r===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.CoreUtility.IsIE()&&(r===61||r===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;var s=r;n.FuncKeysPressed.Shift&&r!=65552&&(s=r-65536),r>65600&&r<65627&&(s=r-65536);if(s>=48&&s<=57||s>=65&&s<=90||s>=96&&s<=105||s===229||s===0||s===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(s===32||s===106||s===107||s===109||s===110||s===111||s===219||s===220||s===221||s===222||s>=186&&s<=192||s===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.CoreUtility.IsIE()&&(s===61||s===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i}return i},n.prototype.KeyPressInternal=function(e,t,n,r,i){if(A.Mask_ImeResponse===!0){A.Mask_ImeResponse=!1;var s={};this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&(t=0,n=0);var o=this.ProcessCharKey(t,n,i,r);if(o.success){s.SelectionStart=o.start,s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1;if(this.moveFocusExitOnLastChar){var u=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");u!=null&&(s.EventInfo=u.EventInfo,s.FocusType=u.FocusType,s.FocusExit=!0),this.moveFocusExitOnLastChar=!1}}else s.SelectionStart=o.start,s.SelectionEnd=Math.max(t,n),s.Text=this.GetShowText(this.GetShowLiterals()),s.EventInfo=o.EventInfo,s.exception=!0,this.moveFocusExitOnLastChar&&(s.FocusExit=!0,this.moveFocusExitOnLastChar=!1);return s}return!1},n.prototype.ProcessCharKey=function(e,n,r,i){var s=t.prototype.ProcessCharKey.call(this,e,n,r,i),o=Math.min(e,n);return s.success&&(o=s.start),i&&(this.moveFocusExitOnLastChar=!1,o===this.Format.Fields.GetExistLength()&&(this.moveFocusExitOnLastChar=!0)),s},n.prototype.ContextMenu=function(){},n.prototype.Click=function(){},n.prototype.Undo=function(e){var t={};return this.Format.Fields.Undo(),t.SelectionStart=this.OldPosition,t.SelectionEnd=this.OldPosition,this.OldPosition=e,t.Value=this.Format.Fields.GetText(),t.Text=this.GetShowText(this.GetShowLiterals()),t},n.prototype.Paste=function(t,n,r,i,s){var o={};o.SelectionStart=t,o.SelectionEnd=n;var u;s!=null&&s===!0?u=r:this.Owner?(u=e.Utility.GetPasteData(this.Owner.GetUseClipboard()),u=this.UpdateCrLfString(u,this.Owner.GetAcceptsCrlf())):u=e.Utility.GetPasteData(!0);var a=null;u!=null&&(u.IndexOf("\r")!=-1&&(u=u.Substring(0,u.IndexOf("\r"))),u.IndexOf("\n")!=-1&&(u=u.Substring(0,u.IndexOf("\n"))));if(!u)return o;this.FireClientEvent("OnBeforePaste");var f=Math.min(t,n),l=Math.max(t,n),c=l-f;if(f===l)o.SelectionStart=this.Format.Fields.Insert(f,u,!1).cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),o.SelectionEnd=o.SelectionStart;else{var h=this.GetShowText(this.GetShowLiterals());h!=null&&this.Format.Fields._focusNull!=""&&h===this.Format.Fields._focusNull&&this.Format.Fields.fieldArray[0].text!=h?a=this.Format.Fields.Insert(0,u,!1):a=this.Format.Fields.Replace(f,c,u,!1),o.SelectionStart=a.cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),h===o.Text&&a.success===!1?(o.SelectionStart=f,o.SelectionEnd=l):o.SelectionEnd=o.SelectionStart}if(o.Text.Substring(f,f+u.GetLength())!=u&&o.SelectionStart-f<u.GetLength()&&this.InvalidInput!=""){var p={};p.Name=this.InvalidInput,p.Args=null,p.Type="InvalidInput",o.EventInfo=p}if(i)if(o.SelectionStart===this.Format.Fields.GetExistLength())this.moveFocusExitOnLastChar=!0;else{var d=this.Format.Fields.GetFieldIndex(o.SelectionStart),v=d.index,m=d.offset;v===this.Format.Fields.fieldCount-1&&m===0&&this.Format.Fields.GetFieldByIndex(v).fieldLabel==="PromptField"&&(this.moveFocusExitOnLastChar=!0)}if(this.moveFocusExitOnLastChar){var g=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");g!=null&&(o.EventInfo=g.EventInfo,o.FocusType=g.FocusType,o.FocusExit=!0),this.moveFocusExitOnLastChar=!1}return o.SelectionStart!=f&&this.FireClientEvent("OnPaste"),o},n.prototype.UpdateCrLfString=function(t,n){return n!==0?e.BaseUIProcess.UpdateCrLfString(t,n):e.BaseUIProcess.UpdateCrLfString(t,2)},n.prototype.DragStart=function(){},n.prototype.DragEnd=function(){},n.prototype.DragOver=function(){},n.prototype.DragInit=function(){},n.prototype.SetValue=function(e){this.Format.Fields.SetValue(e)},n.prototype.GetShowText=function(e,t,n){var r="";return t?t==="LoseFocus"&&(r=this.Format.Fields.GetShowText(e,"LoseFocus",n)):r=this.Format.Fields.GetShowText(e,"",n),r},n.prototype.ProcessBackSpaceKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===0&&r===0)return i;var s,o,u=this.Format.Fields.GetFieldIndex(n);s=u.index,o=u.offset;if(s===-1)return i;if(r===0){var a=this.Format.Fields.GetFieldByIndex(s);if(s===0&&o===0)return i;while((o===0||a.fieldLabel==="PromptField")&&s>0)s--,r+=o,a=this.Format.Fields.GetFieldByIndex(s),o=a.GetLength(),a.fieldLabel==="PromptField"&&(r+=o,o=0);if(s===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;if(this.Format.Fields.GetFieldByIndex(s).GetLength()===0)return i}if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="FilterField")r+=1,n-=r,r=1;else{if(this.Format.Fields.GetFieldByIndex(s).fieldLabel!=="EnumField")return i;r+=this.Format.Fields.GetFieldByIndex(s).GetLength(),n-=r,n=n>0?n:0}n=this.Format.Fields.Delete(n,r),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var f;u=this.Format.Fields.GetFieldIndex(n+r),f=u.index;if(f===-1)return i;o===0&&s!=0&&s--;if(s===f&&this.Format.Fields.GetFieldByIndex(f).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.PerformSpinInternal=function(e,t,n,r,i){if(this.Format.Fields.fieldCount<=0)return null;var s={};s.SelectionStart=e,s.SelectionEnd=t,s.Text=this.GetShowText(this.GetShowLiterals());var o=this.Format.Fields.GetFieldIndex(t),u=o.index,a=o.offset;u!=0&&a===0&&(e===t?this.Format.Fields.fieldArray[u].fieldLabel!="EnumField"&&u--:e<t&&u--);if(this.Format.Fields.fieldArray[u].fieldLabel=="EnumField"||this.Format.Fields.fieldArray[u].text.GetLength()==0)i?s.SelectionStart=this.Format.Fields.PerformSpin(t,n,r):s.SelectionStart=this.Format.Fields.PerformSpin(t,-n,r),s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals());if(i){if(this.SpinUp!=""){var f={};f.Name=this.SpinUp,f.Args=null,f.Type="SpinUp",s.EventInfo=f}}else if(this.SpinDown!=""){var f={};f.Name=this.SpinDown,f.Args=null,f.Type="SpinDown",s.EventInfo=f}return s},n.prototype.ProcessBackSpace=function(e,t){var n=this.ProcessBackSpaceKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===this.Format.Fields.GetLength()&&r===0)return i;var s,o=this.Format.Fields.GetFieldIndex(n);s=o.index;if(s===-1)return i;if(r===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;n=this.Format.Fields.Delete(n,1),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndex(n+r),u=o.offset,a=o.index;if(a===-1)return i;u===0&&a--;if(s===a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.ProcessDelete=function(e,t){var n=this.ProcessDeleteKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.GetNullCasePosition=function(e,t){var n=this.Format.Fields;switch(t){case 36:case 65572:case 131109:case 196645:case 196644:case 131108:e=0;break;case 35:case 65571:e=n.GetLength();break;case 65573:case 37:e!=0&&e--;break;case 39:case 65575:e!=n.GetLength()&&e++;break;case 131111:case 196647:case 196643:case 131107:e=n.GetLength();break;case 131118:case 131080:case 196616:return e}return e},n.prototype.GetCaretPosition=function(e,n){if(this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!="")return this.GetNullCasePosition(e,n);var r=this.Format.Fields,i=r.GetFieldIndex(e),s=i.index,o,u,a=0,f=0;for(f=0;f<r.fieldCount;f++)if(r.GetFieldByIndex(f).fieldLabel!="PromptField"){u=r.GetFieldRange(f).start;break}var l=r.GetLastVisibleFieldIndex(this.GetShowLiterals());if(this.ShowLiterals===3)for(f=l;f>=0;f--)r.GetFieldByIndex(f).fieldLabel!="PromptField"&&(a+=r.GetFieldByIndex(f)._trueLength);else for(f=l;f>=0;f--)if(r.GetFieldByIndex(f).fieldLabel!="PromptField"){o=r.GetFieldRange(f),a=o.start+o.length;break}var c=e;e=t.prototype.GetCaretPosition.call(this,e,n,u,a,"PromptField");var i=r.GetFieldIndexByPos(c),s=i.index,o;if(n===196647&&e===c){for(;s<l;s++){o=r.GetFieldRange(s+1),e=o.start;if(e>u)break}s===l&&(e+=o.length)}if(n===131111&&r.GetFieldByIndex(s).fieldLabel!="PromptField"&&r.GetFieldRange(s).length===0){while(r.GetFieldRange(s).length===0&&s<r.fieldCount-1)s++;for(f=s+1;f<r.fieldCount;f++)if(r.GetFieldByIndex(f).fieldLabel!="PromptField")return o=r.GetFieldRange(f),o.start}return e},n.prototype.ProcessTabKey=function(e,n,r){var i;return r!==1||!!this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&this.GetShowText(this.GetShowLiterals())===this.Format.Fields._focusNull?i=t.prototype.ProcessTabKey.call(this,e,n,r):i=this.MoveFieldAndControl(e,n),i},n.prototype.ProcessLeftDirection=function(e,t,n){var r={};!this.isMulSelected||n===36||n===131108?(r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart):(r.SelectionStart=Math.min(e,t),r.SelectionEnd=r.SelectionStart);if(n===37||n===131109){if(!this.Format.Fields.ValueIsNull()||this.Format.Fields._focusNull=="")if(r.SelectionStart>0){var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&this.isMulSelected===!1&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return this.isMulSelected=!1,r}this.isMulSelected=!1;if(!this.isMulSelected||n===36||n===131108)r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart;else{r.SelectionStart=Math.min(e,t);var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return r},n.prototype.ProcessRightDirection=function(e,t,n){var r={};if(!this.isMulSelected||n===35||n===131107)return r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;r.SelectionStart=Math.max(e,t);if(this.Format.Fields.ValueIsNull()===!0&&this.Format.Fields._focusNull!="")return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;var i,s,o=this.Format.Fields.GetFieldIndex(r.SelectionStart);i=o.index,s=o.offset;if(this.Format.Fields.GetFieldByIndex(i).fieldLabel==="PromptField"&&this.isMulSelected===!1){var u=this.Format.Fields.fieldArray[i];r.SelectionStart+=u.text.GetLength()-s}return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r},n.prototype.IsLastInputField=function(e,t){var n=this.Format.Fields.GetFieldIndex(e,0),r=n.index;if(t){while(r<this.Format.Fields.fieldCount-1&&this.Format.Fields.fieldArray[r+1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r+1].text.GetLength()===0)r++;var i=this.Format.Fields.fieldCount-1;for(;i>r;i--)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1}while(r>0&&this.Format.Fields.fieldArray[r-1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r-1].text.GetLength()===0)r--;var i=0;for(;i<r;i++)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1},n.prototype.DoubleClick=function(e){var n={},r=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&r!=null&&(this.Format.Fields._focusNull!=""&&r===this.Format.Fields._focusNull||r!=null&&r=="")){var r=this.GetShowText(this.GetShowLiterals());n.SelectionStart=0,n.SelectionEnd=r.GetLength()}else n=t.prototype.DoubleClick.call(this,e);return n},n}(e.BaseUIProcess);e.MaskUIProcess=L;var A=function(n){function r(){n.call(this),this.IMControlType="Mask",this._promptChar="_",this._autoConvert=!0,this._displayNull=null,this._null="",this._formatPattern="",this._exitOnLastChar=!1,this._displayNullExpresson=null,this._showLiterals=1,this._tabAction=0,this._hideEnter=!1,this._hidePromptOnLeave=!1,this._textWithPromptChar=null,this.Init()}return __extends(r,n),r.prototype.AttachInput=function(e){this.InputElement=e,this.AddAllEventsHandler()},r.prototype.DetachInput=function(){t(this.InputElement).unbind(".wijinput"),this.InputElement=null},r.prototype.GetAutoConvert=function(){return this._autoConvert},r.prototype.SetAutoConvert=function(e){this._autoConvert=e},r.prototype.GetExitOnLastChar=function(){return this._exitOnLastChar},r.prototype.SetExitOnLastChar=function(t){t=e.Utility.CheckBool(t),this._exitOnLastChar=t},r.prototype.GetNull=function(){return this._null},r.prototype.SetNull=function(e){if(e!==this._null){var t=C.ParseFillExpression(e,this.Format.Fields);t.Expression===null?this.Format.Fields._focusNull=e:this.Format.Fields._focusNull=t.Expression,this._null=e}},r.prototype._getDisplayNullExpression=function(){return this._displayNullExpresson!==null?this._displayNullExpresson:this._displayNull},r.prototype.GetDisplayNull=function(){return this._displayNull},r.prototype.SetDisplayNull=function(t){t===undefined&&(t=null),t!==null&&(t=e.Utility.CheckString(t));if(t!==this._displayNull){var n=C.ParseFillExpression(t,this.Format.Fields);this._displayNullExpresson=n.Expression,this._displayNull=t;var r=this.GetValue();this.SetValue(r)}},r.prototype.GetFormatPattern=function(){return this._formatPattern},r.prototype.SetFormatPattern=function(t){t=e.BaseUIProcess.UpdateCrLfString(t,1);if(t!==this._formatPattern)try{var n=C.ParseFormat(t,this);this.Clear(),this.Format.Fields=n,this.ResetNullAndDispalyNull(),this.FormatIsNull=this.Format.Fields.formatIsNull,this.Clear(),this.SetSelectionStart(0),this._formatPattern=t;var r=this.GetDisplayText();this.UpdateDisplayText(r)}catch(i){throw"Format pattern is invalid"}},r.prototype.ResetNullAndDispalyNull=function(){var e=C.ParseFillExpression(this.GetNull(),this.Format.Fields);e.Expression===null?this.Format.Fields._focusNull=this.GetNull():this.Format.Fields._focusNull=e.Expression,e=C.ParseFillExpression(this.GetDisplayNull(),this.Format.Fields),this._displayNullExpresson=e.Expression},r.prototype.GetPromptChar=function(){return this._promptChar},r.prototype.SetPromptChar=function(e){e||(e="_"),e.length>1&&(e=e.charAt(0));if(e!==this._promptChar){this._promptChar=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetShowLiterals=function(){return this._showLiterals},r.prototype.SetShowLiterals=function(e){if(e!=this._showLiterals){this._showLiterals=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetTabAction=function(){return this._tabAction},r.prototype.SetTabAction=function(e){this._tabAction=e},r.prototype.GetCursorPosition=function(){return this.CursorPosition},r.prototype.SetCursorPosition=function(t){t=e.Utility.CheckInt(t,-1,Math.pow(2,31)),t=Math.min(t,this.Format.Fields.GetTotalInputFieldCount()-1),t!==this.CursorPosition&&(this.CursorPosition=t)},r.prototype.Init=function(){this._autoConvert=!0,this.FormatIsNull=!0,this.CursorPosition=-1,this.truePosition=-1,this.japInput=!1,this.ImeMode=!1,this.IsImplementImeInput=!1,this.IsJapanConvertKeyPress=!1,this.HelpID="__"+this.ID+"_State",this.IsDragDrop=!1;var e={};e.ID=this.ID,e.HelpID=this.HelpID,e.Owner=this,this.UIProcess=this._createUIProcess(e),this.Format.Fields=C.ParseFormat("",this),this.FormatIsNull=this.Format.Fields.formatIsNull,this.UIProcess.Format=this.Format,this.NewSelectionStart=0,this.NewSelectionEnd=0,this.IsInUpdatePanelAndAsyncPostBack||this.UIUpdate&&(this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(this.UIUpdate.GetText(),!0)),this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.MouseButton=-1,this.FocusType=0;if(this.IsInUpdatePanelAndAsyncPostBack){var t=this.UIUpdate.GetText();if(t!=this.UIProcess.GetShowText(this.GetShowLiterals(),null,true)&&t!=this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus",false))if(this.ShowLiterals===1)this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(t,!0),this.SetHideValue();else{this.UIProcess.Format.Fields.ClearContent();var n=this.UIProcess.GetShowText("Always",null,!0);t.GetLength()<n.GetLength()&&(t+=n.Substring(t.GetLength(),n.GetLength())),this.UIProcess.Format.Fields.SetText(t,!0),this.SetHideValue()}this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()}this.UIUpdate&&(this.DisplayText=this.GetTextboxValue()),this.LastStart=0,this.LastEnd=0,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.Type="Mask",this.UIUpdate&&this.ReLoadData()},r.prototype._createUIProcess=function(e){return new L(e)},r.prototype.Clear=function(){this.SetValue(""),this.SelectionStart=this.SelectionEnd=this.Format.Fields.GetFirstInputPosition()},r.prototype.SetValue=function(t){t&&(typeof t!="string"&&(t=t.toString()),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,1)),this.UIProcess.Format.Fields.SetValue(t,!1)&&this.AfterSetTextValue()},r.prototype.GetValue=function(){return this.Value},r.prototype.GetSelectedText=function(){var e=Math.min(this.SelectionStart,this.SelectionEnd),t=Math.max(this.SelectionStart,this.SelectionEnd),n=this.Text.Substring(e,t);if(this.GetClipContent()===1){var r=Math.min(this.SelectionStart,this.SelectionEnd),i=this.GetSelectionLength();n=this.UIProcess.Format.Fields.GetNonPromptText(r,i)}return n},r.prototype.SetSelectedText=function(e){if(!e)return;var t=this.Value,n=this.Text;this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,e,!1,!0);var r={};r.Text=this.GetDisplayText("Focus");if(!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),this.Value=this.UIProcess.Format.Fields.GetValue(),this.Text!=n&&this.FireClientEvent("TextChanged",null),this.Value!=t&&this.FireClientEvent("ValueChanged",null)},r.prototype.SetText=function(t){try{this.ShowPromptChar(),this.Value=this.UIProcess.Format.Fields.GetValue();if(!t){this.SetValue("");return}if(t===this.UIProcess.Format.Fields._focusNull&&!this.UIProcess.Format.Fields.formatIsNull){this.SetValue("");return}this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,1),this.UIProcess.Format.Fields.SetText(t,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.AfterSetTextValue()}finally{this.HidePromptChar()}},r.prototype.AfterSetTextValue=function(){var e=this.Value,t=this.Text,n={};n.Text=this.GetDisplayText("Focus");if(!this.UpdateText(n))return;this.Value=this.UIProcess.Format.Fields.GetValue(),this.UpdateDisplayText(this.GetDisplayText()),this.Text!=t&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.FireClientEvent("TextChanged",null)),this.Value!=e&&this.FireClientEvent("ValueChanged",null)},r.prototype.GetText=function(){return this.GetDisplayText("Focus")},r.prototype.GetDisplayText=function(e){return e?e==="Focus"?this.UIProcess.GetShowText(this.GetShowLiterals()):"":this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus")},r.prototype.GetCurrentField=function(){return this.UIProcess.GetCurrentField(this.SelectionEnd)!=null?this.UIProcess.GetCurrentField(this.SelectionEnd).index:0},r.prototype.GetValueIsFull=function(){return this.UIProcess.Format.Fields.ValueIsFull(1)},r.prototype._getFormatIsNull=function(){return this.FormatIsNull},r.prototype.FireClientEvent=function(e,t){var n="";switch(e){case"TextChanged":this.TextChanged!=""&&(n=this.TextChanged);break;case"ValueChanged":this.ValueChanged!=""&&(n=this.ValueChanged);break;default:return}return this.UIProcess.FireEvent(this,n,t,e)},r.prototype.Focus=function(){this.ShowPromptChar(),!this.IsDragDrop&&this.FocusType!=3&&this.FocusType!=6&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText());if(this.UIProcess.Format.Fields.fieldCount>0){var e=this.UIProcess.FocusInternal(this.FocusType,this.InputElement,this.GetHighlightText(),this.CursorPosition,this.SelectionStart);if(!e)return;e.Text!=null&&(this.Text=e.Text),e.SelectionStart!=null&&this.NeedReCalCursorPos&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&this.NeedReCalCursorPos&&(this.SelectionEnd=e.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),this.NeedReCalCursorPos||(this.NeedReCalCursorPos=!0),this.japInput===!0&&(this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition),this.japInput=!1),this.GetReadOnly()===!0&&this.FocusType===0&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),!this.IsDragDrop&&this.FocusType!=3&&this.FocusType!=6&&this.FocusType!=7&&(this.OldValue=this.Value)}else this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.OldValue=this.Value;this.IsDragDrop=!1},r.prototype._shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.LoseFocus=function(){this.FireKeyExit();var t=this.ImeMode;e.CoreUtility.IsIE()?this.ImeInput("LoseFocusInput"):this.ImeInput("ReInput",!0);if(this.SpinBtnPressed)return;this.SetLastClientValues();var n=this.UIProcess.LoseFocus();this.DisplayText=n.Text,this.Value=n.Value,this.Text=this.UIProcess.Format.Fields.GetText(),(e.CoreUtility.IsIE()||!t)&&this.UpdateDisplayText(this.DisplayText),!e.CoreUtility.IsIE()&&t&&this.UpdateDisplayText(this.DisplayText),this.FocusType=0;var r;n.EventInfo!=null&&(r=this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type),r!=null&&(this.FocusType=r));var i=this;!e.CoreUtility.IsIE()&&this.DisplayText!=this.UIUpdate.GetText()&&t&&window.setTimeout(function(){i.UpdateDisplayText(i.DisplayText)},0),this.GetHighlightText()===2&&(this.SelectionStart=0),this._shouldFireValueChangedEvent()&&(r=this.FireClientEvent("TextChanged",null),r!=null&&(this.FocusType=r),r=this.FireClientEvent("ValueChanged",null),r!=null&&(this.FocusType=r),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),e.Utility.FireSystemEvent(this.InputElement,"onchange"),this._getAutoPostBack()),window.setTimeout(function(){i.HidePromptChar()},50)},r.prototype.shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.MouseDown=function(t){var r=e.Utility.GetMouseButton(t);this.FocusedWhenMouseDown=document.activeElement===(t.srcElement||t.target),this.MouseDownOnClearButton=e.CoreUtility.IsMouseDownOnClearButton(t),n.prototype.MouseDown.call(this,t),this.MouseButton===2?this.FocusType=2:this.MouseButton=0,this.UIProcess.isDblClick=!1,this.SelectionLength=this.GetSelectionLength(),!e.CoreUtility.IsIE()&&this.ImeMode&&r===0&&(this.IsImplementImeInput=!0)},r.prototype.MouseUp=function(t){if(!e.CoreUtility.IsIE()&&this.ImeMode){if(!this.IsImplementImeInput)return;this.IsImplementImeInput=!1}this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,n.prototype.MouseUp.call(this,t);if(!this.ImeMode)this.SelectionLength=this.GetSelectionLength();else{this.SelectionStart=this.LastStart,this.SelectionEnd=this.LastEnd,this.SelectionLength=this.GetSelectionLength(),e.CoreUtility.IsIE()?this.ImeInput("ClickInput"):this.ImeInput("ReInput",!0);if(!e.CoreUtility.IsIE()&&this.Text!=this.UIUpdate.GetText()){var r=this;window.setTimeout(function(){r.UpdateDisplayText(r.Text)},0)}}this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=this.GetInputElement().value.length>0),this.HandleClearButton(t)},r.prototype.KeyDown=function(t){var r=t.keyCode,i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,t.shiftKey&&(i.Shift=!0),t.ctrlKey&&(i.Ctrl=!0),t.altKey&&(i.Alt=!0);var s={},o=this.ImeMode;this.ImeMode=!1;if(r===229)return e.CoreUtility.IsIE8OrBelow()&&(this.ImeMode=!0),!0;!this.ImeMode&&o&&!i.Shift&&!i.Ctrl&&r!=9&&r!=65545&&(this.ImeInput("ReInput",!0),this.ImeSelectTimes=0),s.KeyCode=r,s.Text=this.Text,s.FuncKeysPressed=i,s.SelectionStart=this.SelectionStart,s.SelectionEnd=this.SelectionEnd,s.EditMode=this._getEditModeInternal(),s.ReadOnly=this.GetReadOnly(),s.ClipContent=this.GetClipContent(),s.ExitOnLastChar=this.GetExitOnLastChar(),s.ExitOnLeftRightKey=this.GetExitOnLeftRightKey(),s.TabAction=this.GetTabAction();var u=n.prototype.KeyDown.call(this,s);return u.inputChar!=null?!0:(i.Shift||i.Ctrl||i.Alt)&&!u?!0:this.GetHideEnter()&&r===13?!1:u.System},r.prototype.KeyPress=function(t,n){var r=n.keyCode||n.charCode,i=r===192&&n.altKey;if(!e.CoreUtility.IsIE()&&this.ImeMode&&i)return this.ImeInput("ReInput",!0),!1;if(!e.CoreUtility.IsIE()&&(r===229||i))return!1;var s=t,o=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),s);if(this.japInput!=1){o.SelectionStart!=null&&(this.NewSelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.NewSelectionEnd=o.SelectionEnd);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text)}var u=this._doExtraWorkForKeyPress(t);if(u===!0)return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),o.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.exception!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.EventInfo!=null&&(this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),o.EventInfo.Type==="KeyExit"&&(this.EventInfo=o.EventInfo,this.FireKeyExit()),this.FocusType=3);if(n.keyCode===13)return!0}else{if(n.keyCode===13)return!0;o.SelectionStart!=null&&(this.truePosition=o.SelectionStart),o.EventInfo!=null&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type)}},r.prototype._doExtraWorkForKeyPress=function(e){return!1},r.prototype.innerKeyPress=function(e,t,n){var r=e;t=!!t;var i=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),r);if(this.japInput!=1){if(i.Text!=null){if(!this.UpdateText(i))return!1;n||this.UpdateDisplayText(this.Text)}i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),i.FocusExit!=1&&!t&&!n&&i.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),i.exception!=null&&(n||this.UpdateDisplayText(this.Text),i.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),i.EventInfo!=null&&(this.UIProcess.FireEvent(this,i.EventInfo.Name,i.EventInfo.Args,i.EventInfo.Type),this.FocusType=3);if(window.event!=null&&event.keyCode===13)return!0}else{if(window.event!=null&&event.keyCode===13)return!0;i.SelectionStart!=null&&(this.truePosition=i.SelectionStart),i.EventInfo!=null&&this.UIProcess.FireEvent(this,i.EventInfo.Name,i.EventInfo.Args,i.EventInfo.Type)}},r.prototype.KeyUp=function(t){if(this.ImeMode===!0&&e.CoreUtility.IsIE8OrBelow()){var n=t.keyCode,r=e.CharProcess.CharEx,i=this.GetTextboxValue(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength());if(n===13)this.ImeInput("DirectInput");else if(n>=48&&n<=57||n>=96&&n<=105)n>=96&&(n-=48),s=r.ToHalfWidth(s),s==String.fromCharCode(n)&&(s===String.fromCharCode(n)&&this.ImeSelectTimes<1||this.ImeSelect||this.ImeInput("ReInput")),this.ImeSelectTimes=0;else if(n===32){if(this.ImeSelect===!1)if(this.ImeSelectTimes===1)this.ImeSelect=!0;else if(r.ToHalfWidth(s)!=String.fromCharCode(n))this.ImeSelectTimes++;else{var u=i.Substring(this.SelectionStart,i.GetLength()-o);r.ToHalfWidth(u)===String.fromCharCode(n)&&this.ImeInput("DirectInput")}}else n>=65&&n<=90?this.ImeSelectTimes=0:n===32||n===106||n===107||n===109||n===110||n===111||n===219||n===220||n===221||n===222||n>=186&&n<=192?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput"),this.ImeSelectTimes=0):n===40||n===38?this.ImeSelect===!1&&this.ImeSelectTimes===1&&(this.ImeSelect=!0):n===8||n===46||n===27?this.ImeSelectTimes=0:n===244&&(this.IsJapanConvertKeyPress=!0)}if(t.keyCode!==13)return!1},r.prototype.PerformSpin=function(e){var t=this.Spin.Increment,n=!0;e==="down"&&(n=!1),this.PerformSpinProcess(this.SelectionStart,this.SelectionEnd,t,this.Spin.Wrap,n,!0),this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},r.prototype.PerformSpinProcess=function(e,t,n,r,i,s){if(this.GetReadOnly()&&s)return;var o=this.UIProcess.PerformSpinInternal(e,t,n,r,i);this.FocusType=6;if(!o){this.UIUpdate.SetFocus();return}if(o.Text!=null&&!this.UpdateText(o))return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength());if(o.EventInfo){var u=this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type);u!=null&&(this.FocusType=u)}if(this.Text!==this.GetTextboxValue()){var a=this.Format.Fields.fieldArray;for(var f=0;f<a.length;f++)if(a[f].fieldLabel==="EnumField")break;if(f===a.length)return;this.UpdateDisplayText(this.Text)}},r.prototype.SelectStart=function(e){if(!!this.ImeMode)return!1;n.prototype.SelectStart.call(this,e)},r.prototype.Click=function(){},r.prototype.DragDrop=function(t){return!e.CoreUtility.IsIE()&&this.GetReadOnly()?!1:(this.IsDragDrop=!0,this.Paste(t,!0,0,0),!1)},r.prototype.DragOver=function(){},r.prototype.DragInit=function(){},r.prototype.ImeInput=function(t,n){var i=this.UIUpdate.GetText();if(i===this.Text)return window.event&&e.Utility.PreventDefault(window.event),this.ImeMode=!1,!1;var s;if(this.Text!==""){var o=Math.min(this.SelectionStart,this.SelectionEnd),u=Math.max(this.SelectionStart,this.SelectionEnd);if(u<this.Text.GetLength()){var a=this.Text.Substring(u,this.Text.GetLength()),f=i.IndexOf(a);f!==-1?s=i.Substring(o,i.GetLength()-a.GetLength()):s=""}else s=i.Substring(o,i.GetLength())}else s=i;t==="ReInput"&&(n?s=s.Substring(0,s.GetLength()):s=s.Substring(0,s.GetLength()-1));if(t==="Record")return s;var l=!1;if(t==="LoseFocusInput"){if(s==="")return;r.Mask_ImeResponse=!0,l=!0}for(var c=0;c<s.GetLength();c++){c===s.GetLength()-1&&t==="LoseFocusInput"&&(this.japInput=!0),r.Mask_ImeResponse=!0;if(s.GetLength()>c+1){var h=s.Substring(c+1,c+2),p=new e.CharCategory,d=h.charCodeAt(0)-(p.KATAKANA_VOICED.charCodeAt(0)-1);d===1||d===2?(this.innerKeyPress(s.Substring(c,c+2),l),c++):t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}else t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}this.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(t==="ReInput"||t==="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=8},r.prototype.SetInnerText=function(e){this.Clear(),this.UIProcess.Format.Fields.SetText(e,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.UIProcess.Format.Fields.SaveOldState();var t={};t.Text=this.GetDisplayText("Focus");if(!this.UpdateText(t))return;this.UpdateDisplayText(this.Text)},r.prototype.Copy=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Copy.call(this)},r.prototype.Cut=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Cut.call(this)},r.prototype.Paste=function(t,n,r,i){var s="";t!=null&&(s=t),r||(r=this.SelectionStart),i||(i=this.SelectionEnd);var o=this.UIProcess.Paste(r,i,s,this.GetExitOnLastChar(),n);if(!o)return!1;o.Value!=null&&(this.Value=o.Value);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text),e.CoreUtility.IsIE()||this.SetInnerFocus()}return o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),(!o||o.FocusExit==null||!o.FocusExit)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),o.EventInfo&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),!0},r.prototype.SetHideValue=function(){},r.prototype.GetHideValue=function(){},r.prototype.CanUndo=function(){return this.Format.Fields.CanUndo()?!0:!1},r.prototype.DoSpinUp=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("up",e,t)},r.prototype.DoSpinDown=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("down",e,t)},r.prototype.DoSpin=function(t,n,r){if(typeof n=="number"&&isNaN(n)||typeof r=="number"&&isNaN(r))return;var i=this.SelectionStart,s=this.SelectionEnd,o=this.Increment;if(n!=undefined){n=e.Utility.CheckInt(n,0,Math.pow(2,31));var u={};u.start=0,u.length=0,u=this.Format.Fields.GetRealFieldRange(n),i=u.start,s=u.start+u.length}r!=undefined&&(o=r),o=e.Utility.CheckInt(o,-Math.pow(2,31),Math.pow(2,31)),t==="up"?this.PerformSpinProcess(i,s,o,this.Wrap,!0,!1):this.PerformSpinProcess(i,s,o,this.Wrap,!1,!1)},r.prototype.UpdateText=function(e){if(!e)return!1;var t="";e.Text!=null&&(t=e.Text);if(t!==this.Text&&this.TextChanging!=null&&this.TextChanging!=""){var n={},r={};r.Result=t,r.Cancel=!1,n.Name=this.TextChanging,n.Args=r,e.SelectionStart!=null&&(this.NewSelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.NewSelectionEnd=e.SelectionEnd);var i=this.UIProcess.GetSepText();this.RollBack(),typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&this.SetHideValue(),n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1&&(this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i));var s=this.UIProcess.FireEvent(this,n.Name,n.Args,"TextChanging");n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1,s!=null&&(this.FocusType=s),typeof this.TextChanging!="undefined"&&(this.NeedSetHideValue=!1);if(r.Cancel)return this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),!1;this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i)}return this.Text=t,this.Value=this.UIProcess.Format.Fields.GetValue(),!0},r.prototype.UpdateDisplayText=function(e){typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&(n.prototype.UpdateDisplayText.call(this,e),this.EditingTextChanged&&this.EditingTextChanged.call(this))},r.prototype.RollBack=function(){this.UIProcess.Format.Fields.RollBack()},r.prototype.ProcessReservedKey=function(e){var t=n.prototype.ProcessReservedKey.call(this,e);if(!t){switch(e){case 118:case 119:return!0}return!1}return!0},r.prototype.AddAllEventsHandler=function(){n.prototype.AddAllEventsHandler.call(this);var r=this;e.CoreUtility.IsIE10OrLater()&&t(this.GetInputElement()).bind("MSPointerUp.wijinput",function(t){e.GlobalEventHandler.OnMSPointerUp(r,t)},!1)},r.prototype.CompositionStart=function(e){this.ImeMode=!0},r.prototype.CompositionUpdate=function(e){},r.prototype.CompositionEnd=function(t){var n=this,r=function(){try{n.ImeInput("DirectInput")}finally{n.ImeMode=!1}};e.CoreUtility.IsIE9OrLater()?r():window.setTimeout(r,0)},r.prototype.Select=function(){if(this.ImeMode)return;this.SelectionStart=e.Utility.GetSelectionStartPosition(this.GetInputElement()),this.SelectionEnd=this.SelectionStart+e.Utility.GetSelectionText(this.GetInputElement()).GetLength()},r.prototype.MSPointerUp=function(e){e&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},r.prototype.Input=function(e){var t=this,n=function(){try{t.ImeInput("DirectInput")}finally{t.ImeMode=!1}};setTimeout(n,0)},r.prototype.HandleClearButton=function(t){if(e.CoreUtility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&(t.srcElement||t.target)===this.InputElement){var n=document.activeElement===(t.srcElement||t.target),r=e.CoreUtility.IsMouseDownOnClearButton(t);if(this.MouseUpHasValue&&n&&r){this.Clear();var i=this.GetText(),s=this;window.setTimeout(function(){s.UpdateDisplayText(i),s.SelectionStart=s.SelectionEnd=s.Format.Fields.GetFirstInputPosition(),s.SetSelection(s.SelectionStart,s.SelectionEnd)},0)}}},r.prototype.HidePromptChar=function(){if(this.GetHidePromptOnLeave()){var e=this.GetInputElement().value;this._textWithPromptChar=e,e=e.replace(new RegExp(this.GetPromptChar(),"g")," "),this.GetInputElement().value=e}},r.prototype.ShowPromptChar=function(){this._textWithPromptChar!==null&&(this.GetInputElement().value=this._textWithPromptChar,this._textWithPromptChar=null)},r.prototype.GetHideEnter=function(){return this._hideEnter},r.prototype.SetHideEnter=function(e){this._hideEnter=e},r.prototype.GetHidePromptOnLeave=function(){return this._hidePromptOnLeave},r.prototype.SetHidePromptOnLeave=function(e){e!==this._hidePromptOnLeave&&(this._hidePromptOnLeave=e,e&&document.activeElement!==this.GetInputElement()&&this.HidePromptChar(),!e&&document.activeElement!==this.GetInputElement()&&this.ShowPromptChar())},r.prototype.FireKeyExit=function(){this.EventInfo!=null&&this.EventInfo.Type=="KeyExit"&&(this.KeyExit&&this.KeyExit.call(this),this.FocusType=4,this.EventInfo=null)},r.prototype.OnEditStatusChanged=function(t){t=e.Utility.CheckFunction(t),this.EditStatusChangedEvent=t},r.prototype.OnInvalidInput=function(t){t=e.Utility.CheckFunction(t),this.InvalidInputEvent=t},r.prototype.OnKeyExit=function(t){t=e.Utility.CheckFunction(t),this.KeyExit=t},r.prototype.OnSpinDown=function(t){t=e.Utility.CheckFunction(t),this.SpinDown=t},r.prototype.OnSpinUp=function(t){t=e.Utility.CheckFunction(t),this.SpinUp=t},r.prototype.OnTextChanged=function(t){t=e.Utility.CheckFunction(t),this.TextChanged=t},r.prototype.OnTextChanging=function(t){t=e.Utility.CheckFunction(t),this.TextChanging=t},r.prototype.OnValueChanged=function(t){t=e.Utility.CheckFunction(t),this.ValueChanged=t},r.prototype.OnMouseDownCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseDownEvent=t},r.prototype.OnMouseUpCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseUpEvent=t},r.prototype.OnEditingTextChanged=function(t){t=e.Utility.CheckFunction(t),this.EditingTextChanged=t},r.prototype.IsFocused=function(){try{return document.activeElement===this.GetInputElement()}catch(e){return!1}},r.prototype.GetTextOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!1),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r.prototype.GetPostValueOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!0),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r.Mask_ImeResponse=!1,r}(T);e.MaskControl=A})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(t){(function(e){e[e.editOptional=1]="editOptional",e[e.editRequired=2]="editRequired",e[e.separator=4]="separator",e[e.literal=8]="literal"})(t.wijchartype||(t.wijchartype={}));var n=t.wijchartype,r=function(){function n(e,t,n){this.inputWidget=e,this.mask=t,this.asciiOnly=n,this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.noMask=!1,this._autoConvertPosition=0,this._needCheckNextChar=!1,this.descriptors=[],this.initialize()}return n.prototype.initialize=function(){this.noMask=!this.mask||this.mask.length<=0;if(this.noMask)return;this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.descriptors=[];var e="none",t=!1,r=8,s="",o=this.inputWidget._getCulture();typeof o=="undefined"&&(o=Globalize.findClosestCulture(""));for(var u=0;u<this.mask.length;u++){var a=!1,f=this.mask.charAt(u);t&&(t=!1,a=!0);if(!a){var l=f;if(l<="C"){switch(l){case"#":case"9":case"?":case"C":f=this.getPromtChar(),r=1,a=!0;break;case"$":s=o.numberFormat.currency.symbol,r=4,a=!0;break;case"%":case"-":case";":case"=":case"@":r=8,a=!0;break;case"&":case"0":case"A":f=this.getPromtChar(),r=2,a=!0;break;case",":s=o.numberFormat[","],r=4,a=!0;break;case".":s=o.numberFormat["."],r=4,a=!0;break;case"/":s=o.calendars.standard["/"],r=4,a=!0;break;case":":s=o.calendars.standard[":"],r=4,a=!0;break;case"<":e="lower";continue;case">":e="upper";continue}a||(r=8,a=!0)}if(!a){if(l<="\\"){switch(l){case n.FK_K:case n.FK_H:case n.FK_N:case"L":f=this.getPromtChar(),r=2,a=!0;break;case"\\":t=!0,r=8;continue}a||(r=8,a=!0)}if(!a){l==="a"&&(f=this.getPromtChar(),r=1,a=!0);switch(l){case n.FK_DB_K:case n.FK_DB_J:case n.FK_DB_9:case n.FK_DB_Z:case n.FK_DB_N:case n.FK_DB_G:case n.FK_DB_T:f=this.getPromtChar(),r=2,a=!0}if(!a){l!=="|"&&(r=8,a=!0);if(!a){e="none";continue}}}}}if(a){var c=new i(u,r);this.isEditDesc(c)&&(c.caseConversion=e),r!==4&&(s=f);for(var h=0;h<s.length;h++)this.testString=this.testString+s.charAt(h),this.descriptors[this.descriptors.length]=c}}},n.prototype.getAllowPromptAsInput=function(){return this.inputWidget?this.inputWidget._getAllowPromptAsInput():!1},n.prototype.getPasswordChar=function(){var e=this.inputWidget?this.inputWidget._getPasswordChar():"*";return e===""&&(e="*"),e.length>1?e.charAt(0):e},n.prototype.isPassword=function(){return this.inputWidget?this.inputWidget._isPassword():!1},n.prototype.getResetOnPrompt=function(){return this.inputWidget?this.inputWidget._getResetOnPrompt():!0},n.prototype.getResetOnSpace=function(){return this.inputWidget?this.inputWidget._getResetOnSpace():!0},n.prototype.getSkipLiterals=function(){return this.inputWidget?this.inputWidget._getSkipLiterals():!0},n.prototype.getHidePromptOnLeave=function(){return this.inputWidget?this.inputWidget._getHidePromptOnLeave():!1},n.prototype._trueOR=function(e,t){return(e>>>1|t>>>1)*2+(e&1|t&1)},n.prototype.setValue=function(e){return!1},n.prototype.getValue=function(){return null},n.prototype.getPromtChar=function(){var e=this.inputWidget?this.inputWidget._getPromptChar():"_";return e===""&&(e="_"),e.length>1?e.charAt(0):e},n.prototype.getAutoConvert=function(){return this.inputWidget?this.inputWidget._getAutoConvert():!0},n.prototype.updatePromptChar=function(){if(this.noMask)return;for(var e=0;e<this.descriptors.length;e++){var t=this.descriptors[e];if(t.charType===1||t.charType===2)t.isAssigned||(this.testString=$.wij.charValidator.setChar(this.testString,this.getPromtChar(),e))}},n.prototype.resetChar=function(e){var t=this.descriptors[e];this.isEditPos(e)&&t.isAssigned&&(t.isAssigned=!1,this.testString=$.wij.charValidator.setChar(this.testString,this.getPromtChar(),e),this.assignedCharCount--,t.charType===2&&this.requiredCharCount--)},n.prototype.getAdjustedPos=function(e){return this.noMask?e=Math.min(e,this.testString.length-1):e>=this.descriptors.length&&e--,Math.max(0,e)},n.prototype.findNonEditPositionInRange=function(e,t,n){var r=this._trueOR(8,4);return this.findPositionInRange(e,t,n,r)},n.prototype.findPositionInRange=function(e,t,n,r){e=Math.max(0,e),t=Math.min(t,this.testString.length-1);if(e<=t)while(e<=t){var i=n?e++:t--,s=this.descriptors[i];if((s.charType&4294967295&(r&4294967295))===s.charType)return i}return-1},n.prototype.findAssignedEditPositionInRange=function(e,t,n){return this.assignedCharCount===0?-1:this.findEditPositionInRange(e,t,n,2)},n.prototype.findEditPositionInRange=function(e,t,n,r){do{var i=this._trueOR(2,1),s=this.findPositionInRange(e,t,n,i);if(s===-1)break;var o=this.descriptors[s];switch(r){case 1:if(!o.isAssigned)return s;break;case 2:if(o.isAssigned)return s;break;default:return s}n?e++:t--}while(e<=t);return-1},n.prototype.findAssignedEditPositionFrom=function(e,t){if(!this.assignedCharCount)return-1;var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findAssignedEditPositionInRange(n,r,t)},n.prototype.findEditPositionFrom=function(e,t){var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findEditPositionInRange(n,r,t,0)},n.prototype.setChar=function(t,n,r){if(this.getAutoConvert()){var i=new e.input.wijInputResult,s=this.testInternal(t,n,i);if(!s){var o=this._convert(t,0);if(t.length===0)debugger;t=o.strValue.charAt(0),o.strValue.length>1&&(this.inputWidget._appendChar=o.strValue.charAt(1)),o.index===2&&(this.inputWidget._skipNextChar=!0)}}n=Math.max(0,n),r||(r=this.descriptors[n]),this.testEscapeChar(t,n,r)?this.resetChar(n):($.wij.charValidator.isLetter(t)&&($.wij.charValidator.isUpper(t)?r.caseConversion==="lower"&&(t=t.toLowerCase()):r.caseConversion==="upper"&&(t=t.toUpperCase())),this.testString=$.wij.charValidator.setChar(this.testString,t,n),r.isAssigned||(r.isAssigned=!0,this.assignedCharCount++,r.charType===2&&this.requiredCharCount++))},n.prototype.internalInsertAt=function(e,n,r,i){if(e.length===0)return r.testPosition=n,r.hint=r.noEffect,!0;if(!this._testString(e,n,r))return!1;var s=this.findEditPositionFrom(n,!0),o=this.findAssignedEditPositionInRange(s,r.testPosition,!0)!==-1;if(o&&r.testPosition===this.testString.length-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;var u=this.findEditPositionFrom(r.testPosition+1,!0);if(o){var a=new t.wijInputResult;a.hint=a.unknown;var f=!0,l=this.findAssignedEditPositionFrom(this.testString.length-1,!1);while(f){f=!1;if(u===-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;var c=this.testChar(this.testString.charAt(s),u,a);if(this.descriptors[s].isAssigned&&!c)return r.hint=a.hint,r.testPosition=u,!1;if(s!==l){s=this.findEditPositionFrom(s+1,!0),u=this.findEditPositionFrom(u+1,!0),f=!0;continue}}r.hint=Math.max(r.hint,a.hint)}if(!i){if(o)while(s>=n)this.descriptors[s].isAssigned?this.setChar(this.testString.charAt(s),u):this.resetChar(u),u=this.findEditPositionFrom(u-1,!1),s=this.findEditPositionFrom(s-1,!1);this.setString(e,n)}return!0},n.prototype.insertAt=function(e,n,r){typeof r=="undefined"&&(r=new t.wijInputResult);if(e===undefined)throw"InsertAt: input";return this.noMask?(this.testString=this.testString.substring(0,n)+e+this.testString.substring(n,this.testString.length),r.testPosition=n+e.length-1,!0):n>=0&&n<this.testString.length?this.internalInsertAt(e,n,r,!1):(r.testPosition=n,r.hint=r.positionOutOfRange,!1)},n.prototype.clear=function(e){if(this.noMask){this.testString="",e.hint=e.success;return}if(!this.assignedCharCount)e.hint=e.noEffect;else{e.hint=e.success;for(var t=0;t<this.testString.length;t++)this.resetChar(t)}},n.prototype.isLiteral=function(e){return e?e.charType===8||e.charType===4:!1},n.prototype.testEscapeChar=function(e,t,n){t=Math.max(0,t),n||(n=this.descriptors[t]);if(this.isLiteral(n))return this.getSkipLiterals()?e===this.testString.charAt(t):!1;var r=this.getResetOnPrompt()&&e===this.getPromtChar(),i=this.getResetOnSpace()&&e===" ";return r||i},n.prototype.testChar=function(e,t,n){var r=this.testInternal(e,t,n);if(!r&&this.getAutoConvert()){this._autoConvertPosition=t;var i=this._convert(e,0);r=i.strValue.length>0,i.strValue.length>1&&(this.inputWidget._appendChar=i.strValue.charAt(1)),i.index===2&&(this.inputWidget._skipNextChar=!0)}return r},n.prototype.testInternal=function(e,r,i){if(!$.wij.charValidator.isPrintableChar(e))return i.hint=i.invalidInput,!1;var s=this.descriptors[r];if(!s)return!1;if(this.isLiteral(s))return this.getSkipLiterals()&&e===this.testString.charAt(r)?(i.hint=i.characterEscaped,!0):(i.hint=i.nonEditPosition,!1);if(e===this.getPromtChar()){if(this.getResetOnPrompt())return this.isEditDesc(s)&&s.isAssigned?i.hint=i.sideEffect:i.hint=i.characterEscaped,!0;if(!this.getAllowPromptAsInput())return i.hint=i.promptCharNotAllowed,!1}if(e===" "&&this.getResetOnSpace())return this.isEditDesc(s)&&s.isAssigned?i.hint=i.sideEffect:i.hint=i.characterEscaped,!0;switch(this.mask.charAt(s.maskPosition)){case"L":if(!$.wij.charValidator.isLetter(e))return i.hint=i.letterExpected,!1;if(!$.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"?":if(!$.wij.charValidator.isLetter(e)&&e!==" ")return i.hint=i.letterExpected,!1;if(!$.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"A":if(!$.wij.charValidator.isAlphanumeric(e))return i.hint=i.alphanumericCharacterExpected,!1;if(!$.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"a":if(!$.wij.charValidator.isAlphanumeric(e)&&e!==" ")return i.hint=i.alphanumericCharacterExpected,!1;if(!$.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"&":if(!$.wij.charValidator.isAscii(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"C":if(!$.wij.charValidator.isAscii(e)&&this.asciiOnly&&e!==" ")return i.hint=i.asciiCharacterExpected,!1;break;case"0":if(!$.wij.charValidator.isDigit(e))return i.hint=i.digitExpected,!1;break;case"9":if(!$.wij.charValidator.isDigit(e)&&e!==" ")return i.hint=i.digitExpected,!1;break;case n.FK_N:if(!(!t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)&&!t.CharProcess.CharEx.IsLowerKana(e)))return!1;break;case n.FK_DB_N:if(!(t.CharProcess.CharEx.IsFullWidth(e)&&t.CharProcess.CharEx.IsKatakana(e)&&!t.CharProcess.CharEx.IsLowerKana(e)))return!1;break;case n.FK_DB_G:if(!t.CharProcess.CharEx.IsUpperKana(e)||!t.CharProcess.CharEx.IsHiragana(e))return!1;break;case n.FK_DB_9:if(!(e>=n.DBCS_0&&e<=n.DBCS_9)&&e!==" ")return!1;break;case"#":if(!$.wij.charValidator.isDigit(e)&&e!=="-"&&e!=="+"&&e!==" ")return i.hint=i.digitExpected,!1;break;case n.FK_K:if(!!t.CharProcess.CharEx.IsFullWidth(e)||!t.CharProcess.CharEx.IsKatakana(e))return!1;break;case n.FK_H:if(t.CharProcess.CharEx.IsFullWidth(e))return!1;break;case n.FK_DB_K:if(!t.CharProcess.CharEx.IsFullWidth(e)||!t.CharProcess.CharEx.IsKatakana(e))return!1;break;case n.FK_DB_T:if(!t.CharProcess.CharEx.IsSurrogate(e))return!1;break;case n.FK_DB_J:if(!t.CharProcess.CharEx.IsHiragana(e))return!1;break;case n.FK_DB_Z:if(!t.CharProcess.CharEx.IsFullWidth(e))return!1}return e===this.testString.charAt(r)&&s.isAssigned?i.hint=i.noEffect:i.hint=i.success,!0},n.prototype._convert=function(e,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=e.Substring(n,n+1),s,o=t.CharProcess.CharEx,u=!0;if(o.IsAlphabet(i)){var a=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this._isValid(a),s&&u||!s&&!u?(n++,r.index=n,r.strValue=a,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this._isValid(i),s&&u||!s&&!u?(n++,r.index=n,r.strValue=i,r):(a=o.IsFullWidth(a)?o.ToHalfWidth(a):o.ToFullWidth(a).text,s=this._isValid(a),s&&u||!s&&!u?(n++,r.index=n,r.strValue=a,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}i=o.ToKatakana(i),s=this._isValid(i);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}var c=o.ToHalfWidthEx(i);s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r;if(o.IsLowerKana(c)){c=o.ToUpperKana(c),s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r}else if(o.HasLowerKana(c)){c=o.ToLowerKana(c),s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}var a=i,h=!1;if(o.IsFullWidth(i)){var p=o.ToHalfWidthEx(i);if(p.GetLength()>0){s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}if(o.IsLowerKana(p)){p=o.ToUpperKana(p),s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}else if(o.HasLowerKana(p)){p=o.ToLowerKana(p),s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}}else{if(n==null){a=o.ToFullWidth(i).text;if(!o.IsKatakana(a))return r;s=this._isValid(a);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=a,r}else{var d=this.inputWidget._nextChar;if(this._needCheckNextChar&&d&&d.length>0){var v=o.ToFullWidth(e+d);a=v.text,h=v.processedAll}else a=o.ToFullWidth(i).text;if(!o.IsKatakana(a))return r;s=this._isValid(a);if(s&&u||!s&&!u)return n++,h&&n++,r.index=n,r.strValue=a,r}if(o.IsLowerKana(a)){var f=o.ToUpperKana(a);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(a)){var l=o.ToLowerKana(a);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}}a=o.ToHiragana(a),s=this._isValid(a);if(s&&u||!s&&!u)return n++,h&&n++,r.index=n,r.strValue=a,a=="\u3094"&&(h?r.strValue="\u3046\u309b":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(a)){var f=o.ToUpperKana(a);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(a)){var l=o.ToLowerKana(a);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this._isValid(i),s&&u||!s&&!u?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},n.prototype._isValid=function(t){var n=new e.input.wijInputResult;return this.testInternal(t,this._autoConvertPosition,n)},n.prototype._testString=function(e,n,r){r.hint=r.unknown,r.testPosition=n;if(e.length){var i=new t.wijInputResult;i.testPosition=r.testPosition,i.hint=r.hint;for(var s=0;s<e.length;s++){if(r.testPosition>this.testString.length)return r.hint=r.unavailableEditPosition,!1;var o=e.charAt(s);if(!this.testEscapeChar(o,r.testPosition)){r.testPosition=this.findEditPositionFrom(r.testPosition,!0);if(r.testPosition===-1)return r.testPosition=this.testString.length,r.hint=r.unavailableEditPosition,!1}this._needCheckNextChar=!0,this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=s===e.length-1?"":e.charAt(s+1));if(!this.testChar(o,r.testPosition,i))return r.hint=i.hint,this._needCheckNextChar=!1,this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=""),!1;this._needCheckNextChar=!1;if(!this.inputWidget._batchKeyPress){this.inputWidget._nextChar="";var u=this.inputWidget._appendChar;if(u&&u.length>0){this.inputWidget._appendChar="",r.testPosition++;if(!this.testChar(u,r.testPosition,i))return r.hint=i.hint,this._needCheckNextChar=!1,!1}this.inputWidget._skipNextChar&&(s++,this.inputWidget._skipNextChar=!1)}r.hint=Math.max(i.hint,r.hint),r.testPosition++;if(r.testPosition===this.testString.length)break}r.testPosition--}return!0},n.prototype.setText=function(e,n){typeof n=="undefined"&&(n=new t.wijInputResult);if(e===undefined)throw"SetFromPos: input parameter is null or undefined.";n.hint=n.unknown,n.testPosition=0;if(!e.length)return this.clear(n),!0;if(this.noMask)return this.testString=e,!0;if(!this.testSetString(e,n.testPosition,n))return!1;var r=this.findAssignedEditPositionFrom(n.testPosition+1,!0);return r!==-1&&this.resetString(r,this.testString.length-1),!0},n.prototype.resetString=function(e,t){if(this.noMask){this.testString="";return}e=this.findAssignedEditPositionFrom(e,!0);if(e!==-1){t=this.findAssignedEditPositionFrom(t,!1);while(e<=t)e=this.findAssignedEditPositionFrom(e,!0),this.resetChar(e),e++}},n.prototype.setString=function(e,t){for(var n=0;n<e.length;n++){var r=e.charAt(n);this.testEscapeChar(r,t)||(t=this.findEditPositionFrom(t,!0));if(t<0||t>=this.testString.length)return;this.inputWidget._batchKeyPress||(this.inputWidget._nextChar=n===e.length-1?"":e.charAt(n+1)),this._needCheckNextChar=!0,this.setChar(r,t),t++,this._needCheckNextChar=!1;if(!this.inputWidget._batchKeyPress){this.inputWidget._nextChar="";var i=this.inputWidget._appendChar;i&&i.length>0&&(this.inputWidget._appendChar="",this.inputWidget._nextChar="",this.testEscapeChar(i,t)||(t=this.findEditPositionFrom(t,!0)),this.setChar(i,t),t++),this.inputWidget._skipNextChar&&(n++,this.inputWidget._skipNextChar=!1)}}},n.prototype.testSetString=function(e,t,n){return e.length>this.testString.length&&(e=e.substring(0,this.testString.length)),this._testString(e,t,n)?(this.setString(e,t),!0):!1},n.prototype.isAllDecriptorUnAssigned=function(){for(var e=0;e<this.testString.length;e++){var t=this.descriptors[e];if(t&&(t.charType===1||t.charType===2)&&t.isAssigned)return!1}return!0},n.prototype.toString=function(e,t,n,r,i){var s=this.inputWidget._showNullText(),o=!this.inputWidget.isFocused(),u=this.isAllDecriptorUnAssigned();if(s&&o&&u)return this.inputWidget._getNullText();e=e===undefined?!this.isPassword():e;var a=this.getHidePromptOnLeave()?this.inputWidget.isFocused():!0;t=t===undefined?a:t,n=n===undefined?!0:n;if(this.noMask){if(!e){var f="";for(var l=0;l<this.testString.length;l++)f+=this.getPasswordChar();return f}return this.testString}r=r===undefined?0:r,i=i===undefined?this.testString.length:i;if(i<=0)return"";r=Math.max(0,r);if(r>=this.testString.length)return"";var c=this.testString.length-r;i=Math.min(i,c),s=!this.isPassword()||e,o=t&&n;if(s&&o)return this.testString.substring(r,i-r);var h="",p=r+i-1;for(var d=r;d<=p;d++){var v=this.testString.charAt(d),m=this.descriptors[d];switch(m.charType){case 1:case 2:if(!m.isAssigned)break;if(!this.isPassword()||e){h+=v;continue}h+=this.getPasswordChar();continue;case 3:h+=v;continue;case 4:case 8:if(!n)continue;h+=v;continue;default:h+=v;continue}if(t){h+=v;continue}h+=" ";continue}return h},n.prototype.isEditDesc=function(e){return this.noMask?!0:e.charType===2||e.charType===1},n.prototype.isEditPos=function(e){if(this.noMask)return!0;if(e<0||e>=this.testString.length)return!1;var t=this.descriptors[e];return this.isEditDesc(t)},n.prototype.internalRemoveAt=function(e,n,r,i){typeof i=="undefined"&&(i=!1);if(this.noMask){try{this.testString=this.testString.substring(0,e)+this.testString.substring(n+1,this.testString.length),r.testPosition=e}catch(s){}return!0}var o=this.findAssignedEditPositionFrom(this.testString.length-1,!1),u=this.findEditPositionInRange(e,n,!0,0);r.hint=r.noEffect;if(u===-1||u>o)return r.testPosition=e,!0;r.testPosition=e,this.findAssignedEditPositionInRange(e,n,!0)!==-1&&(r.hint=r.success);if(n<o){var a=this.findEditPositionFrom(n+1,!0),f=a;e=u;var l=!0,c=new t.wijInputResult;while(l){l=!1;var h=this.testString.charAt(a),p=this.descriptors[a],d=h!==this.getPromtChar()||p.isAssigned,v=!this.testChar(h,u,c);if(d&&v)return r.hint=c.hint,r.testPosition=u,!1;if(a!==o){a=this.findEditPositionFrom(a+1,!0),u=this.findEditPositionFrom(u+1,!0),l=!0;continue}}r.sideEffect>r.hint&&(r.hint=r.sideEffect);if(i)return!0;a=f,u=e,l=!0;while(l){l=!1;var m=this.testString.charAt(a),g=this.descriptors[a];m===this.getPromtChar()&&!g.isAssigned?this.resetChar(u):(this.setChar(m,u),this.resetChar(a));if(a!==o){a=this.findEditPositionFrom(a+1,!0),u=this.findEditPositionFrom(u+1,!0),l=!0;continue}}e=u+1}return e<=n&&this.resetString(e,n),!0},n.prototype.removeAt=function(e,n,r,i){return typeof n=="undefined"&&(n=e),typeof r=="undefined"&&(r=new t.wijInputResult),n>=this.testString.length?(r.testPosition=n,r.hint=r.positionOutOfRange,!1):e>=0&&e<=n?this.internalRemoveAt(e,n,r,!1):(r.testPosition=e,r.hint=r.positionOutOfRange,!1)},n.prototype._isLastCharAssigned=function(){var e=this.findEditPositionFrom(this.testString.length,!1);return e>=0&&e<this.testString.length?this.descriptors[e].isAssigned:!1},n.prototype._getFieldList=function(){var e=[],t=this.findEditPositionFrom(0,!0);while(t>=0&&t<this.testString.length)e.push(t),t=this.findEditPositionFrom(t+1,!0);var n=[];if(e.length>0){var r=e[0],i=1,s=r;while(i<e.length)e[i]-r!=1&&(n.push({start:s,end:r}),s=e[i]),r=e[i],i++;n.push({start:s,end:r})}return n},n.prototype.replaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},n.FK_K="K",n.FK_H="H",n.FK_DB_9="\uff19",n.FK_N="N",n.FK_DB_N="\uff2e",n.FK_DB_G="\uff27",n.FK_DB_K="\uff2b",n.FK_DB_J="\uff2a",n.FK_DB_Z="\uff3a",n.FK_DB_T="\uff34",n.DBCS_0="\uff10",n.DBCS_9="\uff19",n.DBCS_A="\uff21",n.DBCS_a="\uff41",n.DBCS_Z="\uff3a",n.DBCS_z="\uff5a",n}();t.wijMaskedTextProvider=r;var i=function(){function e(e,t){this.maskPos=e,this.charType=t,this.caseConversion="none",this.isAssigned=!1,this.maskPosition=0,this.maskPosition=e,this.charType=t}return e}();t.wijCharDescriptor=i;var s=function(){function e(e){this._imaskOptions=e}return e.prototype._getCulture=function(){return Globalize.findClosestCulture(this._imaskOptions.culture)},e.prototype._getAllowPromptAsInput=function(){return!1},e.prototype._getPasswordChar=function(){return""},e.prototype._getResetOnPrompt=function(){return!0},e.prototype._getResetOnSpace=function(){return!0},e.prototype._getSkipLiterals=function(){return!0},e.prototype._getHidePromptOnLeave=function(){return!1},e.prototype._getPromptChar=function(){return"_"},e.prototype._getAutoConvert=function(){return this._imaskOptions.autoConvert},e.prototype._getNullText=function(){return""},e.prototype._isPassword=function(){return!1},e.prototype._showNullText=function(){return!1},e.prototype.isFocused=function(){return!1},e}();t.MaskStub=s})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),$.wijinputcore=$.wijinputcore||{},$.wijinputcore.formatmask=$.wijinputcore.formatmask||function(e,t,n){var r=n||{};r.autoConvert!==!1&&(r.autoConvert=!0),r.culture="";var i=new wijmo.input.MaskStub(r),s=new wijmo.input.wijMaskedTextProvider(i,t,!1),o=s.setText(e);return o?s.toString(!0,!0,!0):s.toString(!0,!1,!1)},$.wijinputcore.validateMask=function(e,t){var n={autoConvert:!1};n.culture="";var r=new wijmo.input.MaskStub(n),i=new wijmo.input.wijMaskedTextProvider(r,t,!1);i.setText(e);var s=i.toString(!0,!0,!0);return s===e};;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(n){function r(){n.apply(this,arguments),this._imMask=null,this._advanceMode=!1}return __extends(r,n),r.prototype._createTextProvider=function(){this._textProvider=new e.wijMaskedTextProvider(this,this.options.mask,!1)},r.prototype._checkMaskAndPassword=function(){var e=!this.options.mask||this.options.mask.length<0;if(e&&this._isPassword())throw'Option "passwordChar" requires a mask'},r.prototype._updateIsPassword=function(){var e=this.options.passwordChar.length>0&&this.element.attr("type")!=="password";this.element.data("isPassword",e),this._checkMaskAndPassword()},r.prototype._beginUpdate=function(){this.element.addClass(this.options.wijCSS.wijinputmask),this._updateIsPassword(),this.element.data("defaultText",this.options.text)},r.prototype._setOption=function(e,t){switch(e){case"maskFormat":this._super(e,t),e="mask"}n.prototype._setOption.call(this,e,t);if(this._advanceMode)if(r._imMaskAssociatedoptions.indexOf)r._imMaskAssociatedoptions.indexOf(e)!==-1&&this._syncProperties();else for(var i=0;i<r._imMaskAssociatedoptions.length;i++)if(r._imMaskAssociatedoptions[i]===e){this._syncProperties();break}switch(e){case"text":this._advanceMode&&this.options.textWithPromptAndLiterals&&(t=this.options.textWithPromptAndLiterals),this.setText(t);break;case"mask":case"culture":if(typeof t=="undefined"||t.length<=0)t="";this._checkMaskAndPassword();var s=this.getText();s===this._getNullText()&&(s="");if(e==="mask"){if(!this._isAdvanceMode()&&t instanceof RegExp)return;this._textProvider.mask=t}this._checkFormatPattern(t),this._advanceMode?(this._imMask.SetText(s),this._updateText()):(this._textProvider.initialize(),this._textProvider.setText(s),this._updateText());break;case"promptChar":case"nullText":this._textProvider&&(this._textProvider.updatePromptChar(),this._updateText());break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this._updateIsPassword(),this._updateText()}},r.prototype._isAdvanceMode=function(){return typeof e.MaskControl!="undefined"},r.prototype._checkFormatPattern=function(t){if(t instanceof RegExp||this.options.formatMode==="advanced"){this._advanceMode||(this._detachInputEvent(),this._imMask||(this._imMask=new e.MaskControl,this._addimMaskCustomEvent()),this._imMask.AttachInput(this.element.get(0)),this._attachKeyEventForDropDownList(),this._advanceMode=!0);if(t instanceof RegExp){var r=t;this._imMask.SetFormatPattern(r.source)}else this._imMask.SetFormatPattern(t);this._syncProperties()}else this._advanceMode&&(this._imMask.DetachInput(),this._detachEventForDropDownList(),n.prototype._attachInputEvent.call(this)),this._advanceMode=!1},r.prototype._attachKeyEventForDropDownList=function(){this.element.bind({"keydown.wijinput":t.proxy(this._onKeyDownForDropDownList,this)})},r.prototype._detachEventForDropDownList=function(){this.element.unbind(".wijinput")},r.prototype._onKeyDownForDropDownList=function(e){n.prototype._processKeyForDropDownList.call(this,e)},r.prototype._syncProperties=function(){this._imMask.SetEnabled(!this.options.disabled),this._imMask.SetReadOnly(!!this.options.disableUserInput),this._imMask.SetExitOnLastChar(!!this.options.blurOnLastChar),this._imMask.SetImeMode(this.options.imeMode),this._imMask.SetExitOnLeftRightKey(this._convertExistOnLeftRightKey(this.options.blurOnLeftRightKey)),this._imMask.SetTabAction(this._convertTabAction(this.options.tabAction)),this._imMask.SetDisplayNull(this.options.nullText),this._imMask.SetHideEnter(!!this.options.hideEnter),this._imMask.SetPromptChar(this.options.promptChar),this._imMask.SetAutoConvert(!!this.options.autoConvert),this._imMask.SetHidePromptOnLeave(!!this.options.hidePromptOnLeave),this._imMask.SetHighlightText(this._convertHighlightText(this.options.highlightText))},r.prototype._convertExistOnLeftRightKey=function(e){e||(e="none"),e=e.toLowerCase();if(e==="none")return 0;if(e==="left")return 1;if(e==="right")return 2;if(e==="both")return 3},r.prototype._convertHighlightText=function(e){return e?(e=e.toLowerCase(),e==="field"?1:e==="all"?2:0):0},r.prototype._convertTabAction=function(e){return e||(e="control"),e=e.toLowerCase(),e==="control"?0:1},r.prototype._addimMaskCustomEvent=function(){var e=this;this._imMask.OnInvalidInput(function(t){e._fireIvalidInputEvent("")}),this._imMask.OnTextChanged(function(t){e._raiseTextChanged()}),this._imMask.OnEditingTextChanged(function(t){e._updateText(!0)}),this._imMask.OnKeyExit(function(t){e._trigger("keyExit")})},r.prototype._processClearButton=function(){this._textProvider.clear(new e.wijInputResult),this._updateText();var t=this._textProvider.findEditPositionFrom(0,!0);this.selectText(t,t)},r.prototype._resetData=function(){var e=this.element.data("defaultText");if(e===undefined||e===null)e=this.element.data("elementValue");if(e===undefined||e===null)e="";this.setText(e)},r.prototype._isPassword=function(){return!!this.element.data("isPassword")},r.prototype._getTextWithPrompts=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!1):this.element.val()},r.prototype._getTextWithLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},r.prototype._getTextWithPromptAndLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!0):this.element.val()},r.prototype._getTextWithPromptAndLiteralsAndPassword=function(){return this._isInitialized()?this._textProvider.toString(!1,!0,!0):this.element.val()},r.prototype._onChange=function(){if(!this.element)return;var e=this.element.val();this.getText()!==e&&this._getTextWithPrompts()!==e&&this._getTextWithPromptAndLiterals()!==e&&(this._textProvider.getPasswordChar()!==""?this._getTextWithPromptAndLiteralsAndPassword()!==e&&this.setText(e):this.setText(e))},r.prototype._onMouseDown=function(e){n.prototype._onMouseDown.call(this,e),this.element.data("prevSelection",null)},r.prototype._afterFocused=function(){(this._isNullText()||!!this.options.hidePromptOnLeave)&&this._doFocus();if(this.options.highlightText==="none"){var e=this.element.data("prevSelection");e&&this.element.wijtextselection(e.start,e.end)}else if(this.options.highlightText==="field"){var t=this._getCurrentField(),n=t.currentField,r=t.fieldList;n>=r.length&&(n=r.length-1);var i=r[n];i&&this.selectText(i.start,i.end+1)}else if(this.options.highlightText==="all"){var s=this.element.get(0);this.selectText(0,s.value.length)}},r.prototype._processTabKey=function(e){var t=this,n=this.options.tabAction;return n=n?n.toLowerCase():"control",n==="control"?(setTimeout(function(){t._trigger("keyExit")},0),!1):this._moveField(!e.shiftKey)},r.prototype._getCurrentField=function(){var e=this._textProvider._getFieldList(),t=this.element.wijtextselection(),n=t.start,r=-1;e.length>0&&n>e[e.length-1].end&&(r=e.length);if(r===-1)for(var i=0;i<e.length;i++){if(n>=e[i].start&&n<=e[i].end){r=i;break}if(n<e[i].start){i!=0?r=i:r=-1;break}}var s={};return s.currentField=r,s.fieldList=e,s},r.prototype._moveField=function(e){var t=this._getCurrentField(),n=t.currentField,r=t.fieldList;if(e){if(n===r.length-1)return!1;this.element.wijtextselection(r[n+1].start,r[n+1].start)}else{if(n<=0)return!1;this.element.wijtextselection(r[n-1].start,r[n-1].start)}return!0},r.prototype._processLeftRightKey=function(e){var t=this.element.wijtextselection(),n=this.options.blurOnLeftRightKey?this.options.blurOnLeftRightKey.toLowerCase():"none";if(e&&t.start===0){if(n==="both"||n==="left")return this._moveControl(this.element.get(0),!1,!0),!0}else{var r=n==="both"||n==="right",i=!1;this._textProvider.noMask&&t.start===this.options.text.length?i=!0:!this._textProvider.noMask&&t.start===this._textProvider.testString.length&&(i=!0);if(!e&&r&&i)return this._moveControl(this.element.get(0),!0,!0),!0}return!1},r.prototype._onKeyPress=function(e){if(!this._textProvider.noMask&&this.options.blurOnLastChar)var t=this._textProvider._isLastCharAssigned();n.prototype._onKeyPress.call(this,e);if(!this._textProvider.noMask&&this.options.blurOnLastChar){var r=this._textProvider._isLastCharAssigned();!t&&r&&this._moveControl(this.element.get(0),!0,!0)}},r.prototype.setText=function(e){if(e===undefined)return;this._advanceMode?e==this.options.textWithPromptAndLiterals?(this.options.textWithPromptAndLiterals=undefined,this._imMask.SetText(e)):this._imMask.SetValue(e):n.prototype.setText.call(this,e)},r.prototype.getText=function(){return this._advanceMode?this._imMask.GetTextOnSimpleMode():n.prototype.getText.call(this)},r.prototype.selectText=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this.getText().length),isNaN(e)&&(e=0),isNaN(t)&&(t=0),this._advanceMode?(this._imMask.SetSelectionStart(e),this._imMask.SetSelectionLength(Math.abs(t-e)),this._imMask.SetFocus()):n.prototype.selectText.call(this,e,t)},r.prototype.getSelectedText=function(){return this._advanceMode?this._imMask.GetSelectedText():n.prototype.getSelectedText.call(this)},r.prototype._attachInputEvent=function(){this._advanceMode?this._imMask.AttachInput(this.element.get(0)):n.prototype._attachInputEvent.call(this)},r.prototype._detachInputEvent=function(){this._advanceMode?this._imMask.DetachInput():n.prototype._detachInputEvent.call(this)},r.prototype.getPostValue=function(){return this._advanceMode?this._imMask.GetPostValueOnSimpleMode():n.prototype.getPostValue.call(this)},r.prototype._initialize=function(){this.options.maskFormat&&(this.options.mask=this.options.maskFormat),n.prototype._initialize.call(this)},r.prototype._init=function(){n.prototype._init.call(this);var t=this.options.text||this.element.val();this.options.mask&&this._setOption("mask",this.options.mask),t&&t!==this._getNullText()&&this._setOption("text",t),e.CoreUtility.IsIE()||this.element.data("prevSelection",{start:0,end:0})},r.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this.element.data("initialized"))if(this.options.mask instanceof RegExp||this.options.formatMode==="advanced")return;if(this._advanceMode){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;var t=this._imMask.GetTextOnSimpleMode();this.options.advancedText=this._imMask.GetText(),t!==this.options.text&&(this.options.text=t,this._raiseTextChanged())}else n.prototype._updateText.call(this,e),this.options.text===this._getNullText()&&(this.options.text="")},r.prototype.isFocused=function(){return this._advanceMode?this._imMask.IsFocused():n.prototype.isFocused.call(this)},r.prototype._getAllowPromptAsInput=function(){return this.options.allowPromptAsInput},r.prototype._getPasswordChar=function(){return this.options.passwordChar},r.prototype._getResetOnPrompt=function(){return this.options.resetOnPrompt},r.prototype._getResetOnSpace=function(){return this.options.resetOnSpace},r.prototype._getSkipLiterals=function(){return this.options.skipLiterals},r.prototype._getHidePromptOnLeave=function(){return this.options.hidePromptOnLeave},r.prototype._getPromptChar=function(){return this.options.promptChar},r.prototype._getAutoConvert=function(){return this.options.autoConvert},r.prototype._getNullText=function(){return this.options.nullText},r._imMaskAssociatedoptions=["disabled","disableUserInput","blurOnLastChar","imeMode","blurOnLeftRightKey","tabAction","nullText","placeholder","readonly","promptChar","autoConvert","showNullText","hideEnter","hidePromptOnLeave","highlightText"],r}(e.wijinputcore);e.wijinputmask=n;var r=function(){function t(){this.wijCSS={wijinputmask:e.wijinputcore.prototype.options.wijCSS.wijinput+"-mask"},this.autoConvert=!0,this.text=null,this.highlightText="none",this.mask="",this.maskFormat="",this.promptChar="_",this.hidePromptOnLeave=!1,this.resetOnPrompt=!0,this.allowPromptAsInput=!1,this.passwordChar="",this.resetOnSpace=!0,this.skipLiterals=!0,this.blurOnLastChar=!1,this.tabAction="control",this.imeMode="auto",this.allowSpinLoop=!1,this.spinnerAlign="verticalRight",this.showSpinner=!1}return t}();n.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new r),t.wijmo.registerWidget("wijinputmask",n.prototype)})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){"use strict";function r(t,r,s){n||(n=new e.wijNumberFormat),r||(r="numeric"),s||(typeof r=="string"?s={}:s=r);if(n._showNullText(s)&&t===null)return s.nullText;if(t===null||t===undefined)return"";n._currentValueInString=t.toString();var o=Globalize.findClosestCulture(s.culture);return s.type=s.type||r,s.showGroup=s.showGroup||!1,typeof s.decimalPlaces!="number"&&(s.decimalPlaces=2),i(o,s),n.getFormattedValue(0,!1,o,s.positivePrefix,s.positiveSuffix,s.negativePrefix,s.negativeSuffix,s)}function i(e,t){var n=e.numberFormat,r=n[t.type]||n,i=r.pattern[0],s=r.pattern[1]||"n",o=i.split("n"),u=s.split("n"),a=n.percent.symbol;t.currencySymbol===undefined&&(t.currencySymbol=n.currency.symbol),t.negativePrefix=(t.negativePrefix?t.negativePrefix:o[0]).replace(/%/g,a).replace(/\$/g,t.currencySymbol),t.negativeSuffix=(t.negativeSuffix?t.negativeSuffix:o[1]).replace(/%/g,a).replace(/\$/g,t.currencySymbol),t.positivePrefix=(t.positivePrefix?t.positivePrefix:u[0]).replace(/%/g,a).replace(/\$/g,t.currencySymbol),t.positiveSuffix=(t.positiveSuffix?t.positiveSuffix:u[1]).replace(/%/g,a).replace(/\$/g,t.currencySymbol)}function o(e,t){var n=Globalize.findClosestCulture(t),r=n.numberFormat,i=r.currency,s=r.percent,o=r.pattern,u=i.pattern,a=s.pattern,f,l=[];for(var c in u){var h=new RegExp(u[c].replace(/n/g,"\\d*\\.?\\d+"));l.push(h)}for(var c in l){var p=e.replace(new RegExp(i[","],"g"),"");f=p.match(l[c]);if(f)return Globalize.parseFloat(f[0],t)}var d=[];for(var c in a){var h=new RegExp(a[c].replace(/n/g,"\\d*\\.?\\d+"));d.push(h)}for(var c in d){var v=e.replace(new RegExp(s[","],"g"),"");f=v.match(d[c]);if(f)return Globalize.parseFloat(f[0],t)/100}var m=[];for(var c in o){var h=new RegExp(o[c].replace(/n/g,"\\d*\\.?\\d+"));m.push(h)}var g=e.replace(new RegExp(r[","],"g"),"");for(var c in m){f=g.match(m[c]);if(f)return Globalize.parseFloat(f[0],t)}return f=g.match(/\d*\.?\d+/),f?Globalize.parseFloat(f[0],t):Globalize.parseFloat(e,t)}function u(e,t,n,r){var i=o(e,r);return i>=t&&i<=n}var t=function(){function e(){this._currentValueInString="0",this._currentText="0",this._strippedText="0",this._groupSeparator=" "}return e.prototype._isNegtive=function(e){return e.indexOf("-")!==-1||e.indexOf("(")!==-1},e.prototype._stripValue=function(e,t,n){var r=t.numberFormat,i=r[n.type]||r,s=this._isNegtive(e),o=i[","],u=i["."],a=new RegExp("["+o+r.percent.symbol+n.currencySymbol+" ]","g"),f;return this._groupSeparator=o,e=this._removeNegativeSign(e),e=e.replace(a,""),e=e.replace(u,"."),f=/([\d\.])+/.exec(e),f&&(e=f[0]),s&&(e="-"+e),e},e.prototype.tryParseValue=function(e,t,n){try{var r=parseFloat(this._stripValue(e,t,n));return isNaN(r)&&(r=null),r}catch(i){return null}},e.prototype.deFormatValue=function(e,t,n,r,i,s,o){e=this._stripValue(e,t,o),this._currentValueInString=e,this._currentText=this._formatValue(e,t,n,r,i,s,o)},e.prototype._formatValue=function(e,t,n,r,i,s,o){var u=o,a=t.numberFormat,f=a[u.type]||a,l=u.decimalPlaces,c=f[","],h=f["."],p=l!==-2?l:f.decimals,d=u.showGroup?f.groupSizes:[0],v;e=this._removeLeadingZero(e),v=this._formatDigit(e,c,h,p,d),v=this._removeLeadingZero(v,u.showGroup?c:""),v.indexOf(h)===0&&(v="0"+v),v===""&&(v="0"),this._currentValueInString=e,this._strippedText=v;var m=this.isNegative()?i:n,g=this.isNegative()?s:r;return this._currentText=m+v+g,this._currentText},e.prototype._showNullText=function(e){return!!e.nullText||e.nullText===""},e.prototype.getFormattedValue=function(e,t,n,r,i,s,o,u){return!this._showNullText(u)&&t&&(this._currentValueInString=e+""),this._formatValue(this._currentValueInString,n,r,i,s,o,u)},e.prototype.getJSFloatValue=function(){try{return this._currentValueInString===""||this._currentValueInString==="."?0:parseFloat(this._currentValueInString)}catch(e){return Number.NaN}},e.prototype.clear=function(){this._currentValueInString="0",this._currentText="0",this._strippedText="0"},e.prototype.setValueFromJSFloat=function(e,t,n,r,i,s,o){var u=e.toFixed(o.decimalPlaces+1);try{return this._currentValueInString=u,this._formatValue(u,t,n,r,i,s,o),!0}catch(a){return!1}},e.prototype.isZero=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=this._removeNegativeSign(e),n;return t?(n=parseFloat(t),!isNaN(n)&&!n):!0},e.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},e.prototype._removeNegativeSign=function(e){return e.replace(/[()\-]/g,"")},e.prototype._removeLeadingZero=function(e,t){typeof t=="undefined"&&(t="");var e=e.replace(/^0+/,"");while(t.length>0&&e.indexOf(t)===0){e=e.substr(t.length);var e=e.replace(/^0+/,"")}return e},e.prototype.isNegative=function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},e.prototype.invertSign=function(e,t,n,r,i,s){var o=this.isNegative();o?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=o?"0":"-0"),this._formatValue(this._currentValueInString,e,t,n,r,i,s)},e.prototype.checkDigitsLimits=function(e){var t=this._currentValueInString.split("."),n="";if(!t.length||t.length===1&&t[0]==="")return;t.length>1&&(n=t[1]),n=n.substring(0,e);while(n.length<e)n+="0";this._currentValueInString=t[0],n&&(this._currentValueInString+="."+n)},e.prototype.checkMinValue=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=!0,i,s,o,u,a;try{i=this._currentValueInString.split("."),s=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),o=0,i.length>1&&parseFloat(i[1])>=0&&(o=parseFloat("1."+i[1]));if(s<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")o*=-1;e=""+e.toFixed(12)+"",i=e.split("."),u=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),a=0,i.length>1&&parseFloat(i[1])>=0&&(a=parseFloat("1."+i[1]));if(u<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")a*=-1;if(s>u)return!0;s<u||n&&s===u&&o<=a?r=!1:s===u&&s<0&&o<a?r=!1:s===u&&s>=0&&o<a&&(r=!1),!r&&t&&(this._currentValueInString=""+e+"")}catch(f){}return r},e.prototype.checkMaxValue=function(e,t){var n=!0,r,i,s,o,u;try{r=this._currentValueInString.split("."),i=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),s=0,r.length>1&&parseFloat(r[1])>=0&&(s=parseFloat("1."+r[1]));if(i<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")s*=-1;e=""+e.toFixed(12)+"",r=e.split("."),o=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),u=0,r.length>1&&parseFloat(r[1])>=0&&(u=parseFloat("1."+r[1]));if(o<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")u*=-1;if(i<o)return!0;i>o&&(n=!1),i===o&&i>=0&&s>u&&(n=!1),i===o&&i<0&&s>u&&(n=!1),!n&&t&&(this._currentValueInString=""+e+"")}catch(a){}return n},e.prototype._formatDigit=function(e,t,n,r,i){var s=this._removeNegativeSign(e),o,u,a,f,l,c;o=s.indexOf("."),o===-1&&(o=s.length),u="",a=0,f=0;for(c=s.length-1;c>=0;c--)l=s.charAt(c),c<o&&(u=l+u,f++,f===i[a]*1&&i[a]*1&&c&&(u=t+u,f=0,i.length-1>a&&a++));if(r>0){u+=n;for(c=0;c<r;c++)l="0",c+o+1<s.length&&(l=s.charAt(c+o+1)),u+=l}return r===-1&&o<s.length-1&&(u+=n,u+=s.substr(o+1)),u},e}();e.wijNumberFormat=t;var n,s=jQuery;s.wijinputcore=s.wijinputcore||{},s.wijinputcore.formatnumber=s.wijinputcore.formatnumber||r,s.wijinputcore.parseNumber=s.wijinputcore.parseNumber||o,s.wijinputcore.validateNumber=s.wijinputcore.validateNumber||u})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments),this._initialValue=0}return __extends(i,e),i.prototype._init=function(){e.prototype._init.call(this),this._initUserCultureOptions(),this._updateCultureRelatedOptions(),this._updateText(),this.element.data("changed",!1)},i.prototype._initUserCultureOptions=function(){this.options.negativePrefix!==null&&(this._userNegativePrefix=this.options.negativePrefix),this.options.negativeSuffix!==null&&(this._userNegativeSuffix=this.options.negativeSuffix),this.options.positivePrefix!==null&&(this._userPositivePrefix=this.options.positivePrefix),this.options.positiveSuffix!==null&&(this._userPositiveSuffix=this.options.positiveSuffix),this.options.currencySymbol!==null&&(this._userCurrencySymbol=this.options.currencySymbol)},i.prototype._updateCultureRelatedOptions=function(){var e=this._getCulture().numberFormat,t=e[this.options.type]||e,n=t.pattern[0],r=t.pattern[1]||"n",i=n.split("n"),s=r.split("n"),o=this._getPercentSymbol(),u=this._getCulture().numberFormat.currency.symbol;this._userNegativePrefix===undefined&&(this.options.negativePrefix=i[0].replace(/%/g,o).replace(/\$/g,u)),this._userNegativeSuffix===undefined&&(this.options.negativeSuffix=i[1].replace(/%/g,o).replace(/\$/g,u)),this._userPositivePrefix===undefined&&(this.options.positivePrefix=s[0].replace(/%/g,o).replace(/\$/g,u)),this._userPositiveSuffix===undefined&&(this.options.positiveSuffix=s[1].replace(/%/g,o).replace(/\$/g,u)),this._userCurrencySymbol===undefined&&(this.options.currencySymbol=e.currency.symbol)},i.prototype._createTextProvider=function(){if(this._textProvider)return this._textProvider;this._textProvider=new o(this,this.options.type),this._textProvider.setNullValue(this.element.val()===""&&this.options.value===null)},i.prototype._beginUpdate=function(){this._initialValue=0;var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||this._initialValue})},i.prototype.focus=function(){this._doFocus()},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"minValue":this.element.attr("aria-valuemin",n),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",n),this._updateText();break;case"value":this.setValue(n),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._updateCultureRelatedOptions(),this._updateText();break;case"positivePrefix":this._userPositivePrefix=n,this._updateText();break;case"negativePrefix":this._userNegativePrefix=n,this._updateText();break;case"positiveSuffix":this._userPositiveSuffix=n,this._updateText();break;case"negativeSuffix":this._userNegativeSuffix=n,this._updateText();break;case"currencySymbol":this._userCurrencySymbol=n,this._updateCultureRelatedOptions(),this._updateText();break;case"type":this._updateCultureRelatedOptions(),this._updateText()}},i.prototype._setData=function(e){this.setValue(e)},i.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===0){var t=this.element.data("elementValue");t!==undefined&&t!==null&&t!==""&&(e=t)}(e!==this._textProvider.getValue()||this._textProvider._nullvalue&&e===0)&&this.setValue(e)},i.prototype._validateData=function(){!this._textProvider.checkAndRepairBounds(!0,!1)&&this.options.value!==null&&this._updateText()},i.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},i.prototype._onChange=function(){},i.prototype._getPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix:this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix},i.prototype._getInvertPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix:this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix},i.prototype._getSuffix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativeSuffix!==undefined?this._userNegativeSuffix:this.options.negativeSuffix:this._userPositiveSuffix!==undefined?this._userPositiveSuffix:this.options.positiveSuffix},i.prototype._getCurrencySymbol=function(){return this._userCurrencySymbol!==undefined?this._userCurrencySymbol:this._getCulture().numberFormat.currency.symbol},i.prototype._getPercentSymbol=function(){return this._getCulture().numberFormat.percent.symbol},i.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},i.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,e===null||typeof e=="undefined"||isNaN(e)?e=null:typeof e=="boolean"?e=e?1:0:typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n=this.getText();this.setText(e);var r=this.getText().trim();e=e.trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},i.prototype._isLastValueNull=function(){return e.prototype._isLastValueNull.call(this)&&!this._textProvider._nullvalue},i.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isValueNull())return"0";var t=this.options.value?this.options.value:0;return this.options.type==="percent"&&(t=(t/100).toFixed(10)),t.toString()},i.prototype._updateText=function(t){typeof t=="undefined"&&(t=!1);if(!this._isInitialized())return;this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),this._textProvider._nullvalue?this.options.value=null:this.options.value=this._textProvider.getValue(),e.prototype._updateText.call(this,t),this._textProvider.checkAndRepairBounds(!0,!1)||(this._trigger("valueBoundsExceeded"),this.isFocused()||(this._textProvider.setNullValue(!1),this.options.value=this._textProvider.getValue(),this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),e.prototype._updateText.call(this,t)))},i.prototype._doSpin=function(e,r,i){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var s=this.element.wijtextselection(),o=new t.wijInputResult;this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevSelection",{start:0,end:0})),this.element.data("prevSelection")===null?this.element.data("prevSelection",{start:s.start,end:s.start}):s.start=this.element.data("prevSelection").start,o.testPosition=s.start;if(this.options.increment<0){var u=this.options.increment;this.options.increment*=-1,this._textProvider.spinEnumPart(s.start,o,this.options.increment,!e),this.options.increment=u}else this._textProvider.spinEnumPart(s.start,o,this.options.increment,e);e?this._trigger("spinUp",null):this._trigger("spinDown",null),this._updateText(),this.element.data("prevSelection",{start:o.testPosition,end:o.testPosition}),i||this.selectText(o.testPosition,o.testPosition);if(r&&!this.element.data("breakSpinner")){var a=window.setTimeout(n.proxy(function(){this._doSpin(e,!0)},this),this._calcSpinInterval());this.element.data("spintimer",a)}return!0},i.prototype._deleteSelText=function(t){typeof t=="undefined"&&(t=!1);var n=this.element.wijtextselection(),r=n.start===0&&n.end===this.element.val().length,i;if(n.start===n.end&&!t){i=this._textProvider._stringFormat._currentText;if(i.charAt(n.end)===this._textProvider.getGroupSeparator()||i.charAt(n.end)===this._textProvider.getDecimalSeparator()){n.start++,n.end++,this.element.wijtextselection(n);return}}var s=this._textProvider.getEditingValue();e.prototype._deleteSelText.call(this,t),s===0&&(r||this._textProvider.getEditingValue()===0)&&(this._textProvider.setNullValue(!0),this._updateText(!0),this.options.value=null)},i.prototype._processClearButton=function(){this._setOption("value",null)},i.prototype._processLeftRightKey=function(e){if(e){if(this.element.wijtextselection().start===0&&(this.options.blurOnLeftRightKey.toLowerCase()==="left"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.CoreUtility.MoveFocus(this.element.get(0),!1),!0}else if(this.element.wijtextselection().start===this.element.val().length&&(this.options.blurOnLeftRightKey.toLowerCase()==="right"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.CoreUtility.MoveFocus(this.element.get(0),!0),!0;return!1},i.prototype._processTabKey=function(e){var t=e.keyCode||e.which;switch(t){case r.TAB:if(this.options.tabAction!=="field"){this._trigger("keyExit");break}var n=this.element.val().indexOf(".");n===-1&&(n=this.element.val().length);var i=this.element.wijtextselection();return e.shiftKey?i.start>n&&this._toPrevField():i.start<n&&this._toNextField(),!0}return!1},i.prototype._toPrevField=function(){var e=this._getPrefix();this.element.wijtextselection(e.length,e.length)},i.prototype._toNextField=function(){var e=this.element.val().indexOf(".");e===-1?this._toPrevField():this.element.wijtextselection(e+1,e+1)},i.prototype.spinUp=function(){this._doSpin(!0,!1,!0)},i.prototype.spinDown=function(){this._doSpin(!1,!1,!0)},i.prototype._getRealNegativePrefix=function(){return this._userNegativePrefix!==undefined?this._userNegativePrefix.replace(/\$/g,this.options.currencySymbol):this.options.negativePrefix===null?"":this.options.negativePrefix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealPositivePrefix=function(){return this._userPositivePrefix!==undefined?this._userPositivePrefix.replace(/\$/g,this.options.currencySymbol):this.options.positivePrefix===null?"":this.options.positivePrefix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealNegativeSuffix=function(){return this._userNegativeSuffix!==undefined?this._userNegativeSuffix.replace(/\$/g,this.options.currencySymbol):this.options.negativeSuffix===null?"":this.options.negativeSuffix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealPositiveSuffix=function(){return this._userPositiveSuffix!==undefined?this._userPositiveSuffix.replace(/\$/g,this.options.currencySymbol):this.options.positiveSuffix===null?"":this.options.positiveSuffix.replace(/\$/g,this.options.currencySymbol)},i.prototype._afterFocused=function(){this._isNullText()?e.prototype._doFocus.call(this):this._doFocus()},i.prototype._doFocus=function(){e.prototype.focus.call(this);if(this.options.highlightText)this.element.wijtextselection(0,this.element.val().length);else{var t=this.element.data("prevSelection");t&&this.element.wijtextselection(t.start,t.end)}this.element.data("isFocusSelecting",!0)},i}(t.wijinputcore);t.wijinputnumber=i;var s=function(){function e(){this.wijCSS={wijinputnumber:t.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric",wijinputnumberNegative:"ui-state-negative"},this.type="numeric",this.value=0,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.currencySymbol=null,this.negativePrefix=null,this.negativeSuffix=null,this.positivePrefix=null,this.positiveSuffix=null,this.imeMode="",this.highlightText=!1,this.valueChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null,this.negativeClass=this.wijCSS.wijinputnumberNegative}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputnumber",i.prototype);var o=function(){function e(e,n){this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=e,this._type=n,this._stringFormat=new t.wijNumberFormat,this._stringFormat.setValueFromJSFloat(this.getValue(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)}return e.prototype.getEditingValue=function(){return this._stringFormat.tryParseValue(this._stringFormat._strippedText,this.inputWidget._getCulture(),this.inputWidget.options)},e.prototype._getCulture=function(){return this.inputWidget._getCulture()},e.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},e.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},e.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e,this.inputWidget._getCulture(),this.inputWidget.options)},e.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this.isValueNull()?"":this._stringFormat.getFormattedValue(this.inputWidget._initialValue,this.isValueNull(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)},e.prototype.isValueNull=function(){var e=this.inputWidget.options;return null===e.value||undefined===e.value||this._nullvalue},e.prototype.setText=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},e.prototype.clear=function(){this._stringFormat.clear()},e.prototype.checkAndRepairBounds=function(e,t,n){typeof n=="undefined"&&(n=!1);if(this._nullvalue)return!0;var r=!0,i,s;typeof e=="undefined"&&(e=!1),i=this.inputWidget.options.minValue,s=this.inputWidget.options.maxValue;if(typeof t!="undefined"&&t)return this._stringFormat.checkMinValue(i,!1,!0);var o=!0;return this._stringFormat.checkMinValue(i,e,!1)||(r=!1,n&&(o=!1,this._stringFormat._currentValueInString=s.toString())),o&&!this._stringFormat.checkMaxValue(s,e)&&(r=!1,n&&(this._stringFormat._currentValueInString=i.toString())),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),r},e.prototype._countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},e.prototype._getAdjustedPositionFromLeft=function(e){var t=this._stringFormat._strippedText,r,i;for(r=0;r<t.length;r++){i=t.charAt(r);if(!(!n.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},e.prototype._getDecimalSeparatorPos=function(){var e=this._stringFormat._strippedText;return e.indexOf(this.getDecimalSeparator())},e.prototype._removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this.inputWidget.options.currencySymbol)&&t++;var n=Globalize.findClosestCulture(this.inputWidget.options.culture),r=n.numberFormat,i=r[this.inputWidget.options.type]||r;while(e.charAt(t)==="0"&&e.charAt(t+1)!==i["."])e=e.substr(0,t)+e.substr(t+1);return e},e.prototype.insertAt=function(e,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v=this._stringFormat._strippedText,m=this.inputWidget._getPrefix(),g=this.inputWidget._getInvertPrefix();r<m.length?r=m.length:r>m.length+v.length&&(r=m.length+v.length),r-=m.length,i||(i=new t.wijInputResult);var y=this._nullvalue;this.setNullValue(!1);if(e.length===1){if(e==="+"){var b=this._stringFormat.isNegative();this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1);var w=b!==this._stringFormat.isNegative();return w?i.testPosition=g.length+r-1:i.testPosition=m.length+r-1,!0}if(e==="-"||e===")"||e==="("){var E=this._stringFormat.isNegative();return this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1),this._stringFormat.isNegative()===E?(i.testPosition=m.length+r-1,!0):(i.testPosition=g.length+r-1,!0)}if(!n.wij.charValidator.isDigit(e)){if(e===this.getDecimalSeparator()){o=this._getDecimalSeparatorPos()+m.length;if(o>=0)return i.testPosition=o,!0}if(e!==this.getGroupSeparator()&&e!==this.getDecimalSeparator()&&e!==")"&&e!=="+"&&e!=="-"&&e!=="("&&e!==this.getDecimalSeparator())return this._type==="percent"&&e===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&e===this.inputWidget.options.currencySymbol?(i.testPosition=r,!0):(this.setNullValue(y),!1)}}r=this._getAdjustedPositionFromLeft(r),u=r,u>v.length&&(u=v.length-1),a=this._removeLeadingZero(v.substring(0,u)),f=v.substring(u,v.length),this._stringFormat.isZero()&&(f=f.replace(/0/,""));var S=e,x="";while(S.charAt(0)==="+"||S.charAt(0)==="-"||S.charAt(0)===")"||S.charAt(0)==="(")x=S.charAt(0),S=S.substring(1);S=S.replace(/[^0-9\.]/gi,"");var T=S.indexOf(".");if(T!==-1){var N=S.split("."),C,k;C=N.shift();var L=N;k=L.join(""),S=C+"."+k}else S=S;x==="+"&&(this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1));if(x==="-"||x===")"||x==="(")this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1);i.testPosition=m.length+a.length+S.length-1,this._stringFormat.deFormatValue((this._stringFormat.isNegative()?"-":"")+a+S+f,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),l=this._stringFormat._strippedText;try{this.inputWidget.options.showGroup?(c=this._countSubstring(a,this._stringFormat._groupSeparator),h=this._countSubstring(l.substring(0,a.length+S.length),this._stringFormat._groupSeparator),i.testPosition+=h-c):S.length===1&&(p=a.charAt(a.length-1),d=l.charAt(a.length-1),d!==p&&i.testPosition--)}catch(A){}return!0},e.prototype.removeAt=function(e,n,r,i){typeof r=="undefined"&&(r=new t.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=e;try{o=this._stringFormat._currentText;if(e===n&&o.substring(e,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,e),a=u,f=o.slice(e,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),a=this._stringFormat._currentText,this.setNullValue(!1);if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this._countSubstring(u,this._stringFormat._groupSeparator),c=this._countSubstring(a.substring(0,Math.max(0,e-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(this.inputWidget.options.currencySymbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},e.prototype.replaceWith=function(e,n){if(n==="."&&this.inputWidget.options.decimalPlaces<=0){var r=new t.wijInputResult;return r.testPosition=e.start-1,r}var i=!1;this._stringFormat.isNegative()&&n==="-"&&e.text.length===this._stringFormat._currentText.length&&(i=!0);var s=this.superReplaceWith(e,n);return i&&this.insertAt("-",this.inputWidget.element.wijtextselection().start,s),s},e.prototype.superReplaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},e.prototype._parseNumber=function(e){typeof e=="undefined"&&(e=this._stringFormat._currentValueInString);var t=e.split(".",2),n={integer:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0,isNegative:t[0].indexOf("-")!==-1};return n.integer===0&&n.fraction===0&&(n.isNegative=!1),n},e.prototype._doSpin=function(e,t){var n=this._parseNumber(),r=e>=0?1:-1,i=Math.abs(e)>=1?"integer":"decimal",s=this.inputWidget.options.increment;s>=Math.pow(10,this.inputWidget.options.decimalPlaces)&&(i==="integer"?s=Math.abs(e):s=Math.abs(e)*Math.pow(10,this.inputWidget.options.decimalPlaces));var o=r*s,u="",a,f,l=n.integer,c=n.fraction;if(i==="integer")l=n.integer+o,l<0&&(u="-",l=-l);else if(i==="decimal"){var h=n.isNegative?-n.fraction:n.fraction;l=n.integer,h<0?(c=-Math.abs(h+o),h*(h+o)<0&&(l=Math.abs(l),u="-")):c=h+o,h===0&&n.isNegative&&(c=-Math.abs(c),u="-",r===1&&(l=Math.abs(l))),c<=0&&(l>0?(l-=1,c=Math.pow(10,this.inputWidget.options.decimalPlaces)+c):(l=Math.abs(n.integer),c=Math.abs(c),u="-"))}a=l.toString(),f=c.toString(),parseInt(this.inputWidget.options.decimalPlaces)>0&&f.length>parseInt(this.inputWidget.options.decimalPlaces)&&(l++,f=f.substring(1),a=l.toString());while(f.length<this.inputWidget.options.decimalPlaces)f="0"+f;a.indexOf("-")!==-1&&(u=""),parseInt(a)===0&&parseInt(f)===0&&(u=""),t?e>=0?this._stringFormat._currentValueInString=this.inputWidget.options.minValue.toString():this._stringFormat._currentValueInString=this.inputWidget.options.maxValue.toString():this._stringFormat._currentValueInString=u+a+"."+f},e.prototype.spinUp=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(e,t)},e.prototype.spinDown=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(-e,t)},e.prototype.spinEnumPart=function(e,n,r,i){n||(n=new t.wijInputResult),r=parseInt(r.toString());var s=this.inputWidget._getPrefix(),o=this._stringFormat._currentText.indexOf(this._getCulture().numberFormat["."]),u=this._stringFormat._currentValueInString.replace("-",""),a=u.indexOf("."),f=!0;o===-1&&(f=!1,o=this._stringFormat._currentText.length),a===0?a=1:a===-1&&(a=o);var l=Math.pow(10,this.inputWidget.options.decimalPlaces);if(n.testPosition>o&&f){var c=r;r/=l,Math.abs(r)>=1&&(i?this.spinUp(parseInt(r),this._nullvalue):this.spinDown(parseInt(r),this._nullvalue),r=(c-parseInt(r)*l)/l)}i?this.spinUp(r,this._nullvalue):this.spinDown(r,this._nullvalue),this.setNullValue(!1);var h=this.inputWidget.options.allowSpinLoop;this.checkAndRepairBounds(!0,!1,h);var p=this._stringFormat._currentValueInString.replace("-",""),d=p.indexOf(".");d===-1&&(f=!1,d=p.length);var v=this.inputWidget._getPrefix();d!==a&&f?n.testPosition=n.testPosition-s.length+v.length+d-a:n.testPosition=n.testPosition-s.length+v.length},e.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},e.prototype.setValue=function(e){try{return e===null?(this.setNullValue(!0),e=this.inputWidget._initialValue):this.setNullValue(!1),this._stringFormat.setValueFromJSFloat(e,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},e.prototype.setNullValue=function(e){this._nullvalue=e},e}();t.wijNumberTextProvider=o})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){var t=function(){function e(){this.DBCS_UpperAlphabet=2147483650,this.SBCS_UpperAlphabet=1073741825,this.DBCS_LowerAlphabet=2147483656,this.SBCS_LowerAlphabet=1073741828,this.DBCS_Number=2147483680,this.SBCS_Number=1073741840,this.DBCS_Binary=2147483776,this.SBCS_Binary=1073741888,this.DBCS_Hexadecimal=2147484160,this.SBCS_Hexadecimal=1073742080,this.DBCS_Symbol=2147485696,this.SBCS_Symbol=1073742848,this.DBCS_NumberSymbol=2147491840,this.SBCS_NumberSymbol=1073745920,this.DBCS_Katakana=2147516416,this.SBCS_Katakana=1073758208,this.DBCS_Space=2147614720,this.SBCS_Space=1073807360,this.TwoBytes=2148007936,this.FourBytes=2147745792,this.DBCS_ShiftJIS=2148532224,this.DBCS_JISX0208=2149580800,this.Emoji=4194304,this.IVS=8388608,this.DBCS_Hiragana=2164260864,this.Upper_SBCS_Katakana=1207959552,this.Upper_DBCS_Katakana=2415919104,this.Upper_DBCS_Hiragana=2684354560,this.All=3321888768,this.DBCS_All=2214592512,this.SBCS_All=1107296256,this.DBCS=2147483648,this.SBCS=1073741824}return e}(),n=function(){function n(n,r){this.charType=new t,this.format=r,this.includeFormat="",this.excludeFormat="",this.includeNormalChar="",this.excludeNormalChar="",this.allowTypes=this.charType.All,this.excludeTypes=this.charType.All,this.include=!0,this.autoConvert=n,this.charExInstance=e.CharProcess.CharEx,this.isInputValid=!0,this.ParseFormat(this.format)}return n.prototype.allowDBCS=function(){return!((this.allowTypes&this.charType.DBCS_All)!=0^this.include)},n.prototype.allowSBCS=function(){return!((this.allowTypes&this.charType.SBCS_All)!=0^this.include)},n.prototype.GetIncludeFormat=function(e){if(e==null||e.GetLength()==0)return"";var t="";for(var n=0;n<e.GetLength();n++){var r=e.Substring(n,n+1);if(r=="\\"){if(n==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";t+=r,t+=e.Substring(n+1,n+2),n++}else{if(r=="^")return t;t+=r}}return t},n.prototype.GetExcludeFormat=function(e){if(e==null||e.GetLength()==0)return"";var t=0,n="";for(var r=0;r<e.GetLength();r++){var i=e.Substring(r,r+1);if(i=="\\"){if(r==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";t!=0&&(n+=i,n+=e.Substring(r+1,r+2)),r++}else if(i=="^"){t++;if(t>1)throw"Exception.TextFilter.Format.DuplicatedChar"}else t!=0&&(n+=i)}return t==1&&(n="^"+n),n},n.prototype.ParseIncludeFormat=function(e){if(e==null||e.GetLength()==0){this.allowTypes=this.charType.All,this.includeNormalChar="",this.includeFormat="";return}this.allowTypes=0,this.includeNormalChar="";for(var t=0;t<e.GetLength();t++)switch(e.charCodeAt(t)){case 94:break;case 92:if(t==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.includeNormalChar=this.includeNormalChar+e.Substring(t+1,t+2),t++;break;case 65313:(this.allowTypes&this.charType.DBCS_UpperAlphabet)!=(this.charType.DBCS_UpperAlphabet|0)&&(this.allowTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.allowTypes&this.charType.SBCS_UpperAlphabet)!=this.charType.SBCS_UpperAlphabet&&(this.allowTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.allowTypes&this.charType.DBCS_LowerAlphabet)!=(this.charType.DBCS_LowerAlphabet|0)&&(this.allowTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.allowTypes&this.charType.SBCS_LowerAlphabet)!=this.charType.SBCS_LowerAlphabet&&(this.allowTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.allowTypes&this.charType.DBCS_Katakana)!=(this.charType.DBCS_Katakana|0)&&(this.allowTypes|=this.charType.DBCS_Katakana);break;case 75:(this.allowTypes&this.charType.SBCS_Katakana)!=this.charType.SBCS_Katakana&&(this.allowTypes|=this.charType.SBCS_Katakana);break;case 65305:(this.allowTypes&this.charType.DBCS_Number)!=(this.charType.DBCS_Number|0)&&(this.allowTypes|=this.charType.DBCS_Number);break;case 57:(this.allowTypes&this.charType.SBCS_Number)!=this.charType.SBCS_Number&&(this.allowTypes|=this.charType.SBCS_Number);break;case 65283:(this.allowTypes&this.charType.DBCS_NumberSymbol)!=(this.charType.DBCS_NumberSymbol|0)&&(this.allowTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.allowTypes&this.charType.SBCS_NumberSymbol)!=this.charType.SBCS_NumberSymbol&&(this.allowTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.allowTypes&this.charType.DBCS_Symbol)!=(this.charType.DBCS_Symbol|0)&&(this.allowTypes|=this.charType.DBCS_Symbol);break;case 64:(this.allowTypes&this.charType.SBCS_Symbol)!=this.charType.SBCS_Symbol&&(this.allowTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.allowTypes&this.charType.DBCS_Binary)!=(this.charType.DBCS_Binary|0)&&(this.allowTypes|=this.charType.DBCS_Binary);break;case 66:(this.allowTypes&this.charType.SBCS_Binary)!=this.charType.SBCS_Binary&&(this.allowTypes|=this.charType.SBCS_Binary);break;case 65336:(this.allowTypes&this.charType.DBCS_Hexadecimal)!=(this.charType.DBCS_Hexadecimal|0)&&(this.allowTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.allowTypes&this.charType.SBCS_Hexadecimal)!=this.charType.SBCS_Hexadecimal&&(this.allowTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.allowTypes&this.charType.DBCS_Hiragana)!=(this.charType.DBCS_Hiragana|0)&&(this.allowTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.allowTypes&this.charType.DBCS_All)!=(this.charType.DBCS_All|0)&&(this.allowTypes|=this.charType.DBCS_All);break;case 65325:(this.allowTypes&this.charType.DBCS_ShiftJIS)!=(this.charType.DBCS_ShiftJIS|0)&&(this.allowTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.allowTypes&this.charType.DBCS_JISX0208)!=(this.charType.DBCS_JISX0208|0)&&(this.allowTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.allowTypes&this.charType.SBCS_All)!=this.charType.SBCS_All&&(this.allowTypes|=this.charType.SBCS_All);break;case 78:(this.allowTypes&this.charType.Upper_SBCS_Katakana)!=this.charType.Upper_SBCS_Katakana&&(this.allowTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.allowTypes&this.charType.Upper_DBCS_Katakana)!=this.charType.Upper_DBCS_Katakana&&(this.allowTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.allowTypes&this.charType.Upper_DBCS_Hiragana)!=this.charType.Upper_DBCS_Hiragana&&(this.allowTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.allowTypes&this.charType.DBCS_Space)!=this.charType.DBCS_Space&&(this.allowTypes|=this.charType.DBCS_Space);break;case 83:(this.allowTypes&this.charType.SBCS_Space)!=this.charType.SBCS_Space&&(this.allowTypes|=this.charType.SBCS_Space);break;case 65332:(this.allowTypes&this.charType.FourBytes)!=this.charType.FourBytes&&(this.allowTypes|=this.charType.FourBytes);break;case 65316:(this.allowTypes&this.charType.TwoBytes)!=this.charType.TwoBytes&&(this.allowTypes|=this.charType.TwoBytes);break;case 65317:this.allowTypes|=this.charType.Emoji;break;case 65334:this.allowTypes|=this.charType.IVS;break;default:this.includeNormalChar=this.includeNormalChar+e.Substring(t,t+1)}},n.prototype.ParseExcludeFormat=function(e){if(e==null||e.GetLength()==0){this.excludeTypes=this.excludeTypes.All,this.excludeNormalChar="",this.excludeFormat="";return}if(e=="^"){this.excludeTypes=this.charType.All,this.excludeNormalChar="",this.excludeFormat="^";return}this.excludeTypes=0,this.excludeNormalChar="";for(var t=0;t<e.GetLength();t++)switch(e.charCodeAt(t)){case 94:break;case 92:if(t==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.excludeNormalChar=this.excludeNormalChar+e.Substring(t+1,t+2),t++;break;case 65313:(this.excludeTypes&this.charType.DBCS_UpperAlphabet)!=(this.charType.DBCS_UpperAlphabet|0)&&(this.excludeTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.excludeTypes&this.charType.SBCS_UpperAlphabet)!=this.charType.SBCS_UpperAlphabet&&(this.excludeTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.excludeTypes&this.charType.DBCS_LowerAlphabet)!=(this.charType.DBCS_LowerAlphabet|0)&&(this.excludeTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.excludeTypes&this.charType.SBCS_LowerAlphabet)!=this.charType.SBCS_LowerAlphabet&&(this.excludeTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.excludeTypes&this.charType.DBCS_Katakana)!=(this.charType.DBCS_Katakana|0)&&(this.excludeTypes|=this.charType.DBCS_Katakana);break;case 75:(this.excludeTypes&this.charType.SBCS_Katakana)!=this.charType.SBCS_Katakana&&(this.excludeTypes|=this.charType.SBCS_Katakana);break;case 65305:if((this.excludeTypes&this.charType.DBCS_Number)==(this.charType.DBCS_Number|0))return;this.excludeTypes|=this.charType.DBCS_Number;break;case 57:(this.excludeTypes&this.charType.SBCS_Number)!=this.charType.SBCS_Number&&(this.excludeTypes|=this.charType.SBCS_Number);break;case 65283:(this.excludeTypes&this.charType.DBCS_NumberSymbol)!=(this.charType.DBCS_NumberSymbol|0)&&(this.excludeTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.excludeTypes&this.charType.SBCS_NumberSymbol)!=this.charType.SBCS_NumberSymbol&&(this.excludeTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.excludeTypes&this.charType.DBCS_Symbol)!=(this.charType.DBCS_Symbol|0)&&(this.excludeTypes|=this.charType.DBCS_Symbol);break;case 64:(this.excludeTypes&this.charType.SBCS_Symbol)!=this.charType.SBCS_Symbol&&(this.excludeTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.excludeTypes&this.charType.DBCS_Binary)!=(this.charType.DBCS_Binary|0)&&(this.excludeTypes|=this.charType.DBCS_Binary);break;case 66:(this.excludeTypes&this.charType.SBCS_Binary)!=this.charType.SBCS_Binary&&(this.excludeTypes|=this.charType.SBCS_Binary);break;case 65336:(this.excludeTypes&this.charType.DBCS_Hexadecimal)!=(this.charType.DBCS_Hexadecimal|0)&&(this.excludeTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.excludeTypes&this.charType.SBCS_Hexadecimal)!=this.charType.SBCS_Hexadecimal&&(this.excludeTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.excludeTypes&this.charType.DBCS_Hiragana)!=(this.charType.DBCS_Hiragana|0)&&(this.excludeTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.excludeTypes&this.charType.DBCS_All)!=(this.charType.DBCS_All|0)&&(this.excludeTypes|=this.charType.DBCS_All);break;case 65325:(this.excludeTypes&this.charType.DBCS_ShiftJIS)!=(this.charType.DBCS_ShiftJIS|0)&&(this.excludeTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.excludeTypes&this.charType.DBCS_JISX0208)!=(this.charType.DBCS_JISX0208|0)&&(this.excludeTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.excludeTypes&this.charType.SBCS_All)!=this.charType.SBCS_All&&(this.excludeTypes|=this.charType.SBCS_All);break;case 78:(this.excludeTypes&this.charType.Upper_SBCS_Katakana)!=this.charType.Upper_SBCS_Katakana&&(this.excludeTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.excludeTypes&this.charType.Upper_DBCS_Katakana)!=this.charType.Upper_DBCS_Katakana&&(this.excludeTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.excludeTypes&this.charType.Upper_DBCS_Hiragana)!=this.charType.Upper_DBCS_Hiragana&&(this.excludeTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.excludeTypes&this.charType.DBCS_Space)!=this.charType.DBCS_Space&&(this.excludeTypes|=this.charType.DBCS_Space);break;case 83:(this.excludeTypes&this.charType.SBCS_Space)!=this.charType.SBCS_Space&&(this.excludeTypes|=this.charType.SBCS_Space);break;case 65332:(this.excludeTypes&this.charType.FourBytes)!=this.charType.FourBytes&&(this.excludeTypes|=this.charType.FourBytes);break;case 65316:(this.excludeTypes&this.charType.TwoBytes)!=this.charType.TwoBytes&&(this.excludeTypes|=this.charType.TwoBytes);break;case 65317:this.excludeTypes|=this.charType.Emoji;break;case 65334:this.excludeTypes|=this.charType.IVS;break;default:this.excludeNormalChar=this.excludeNormalChar+e.Substring(t,t+1)}},n.prototype.ParseFormat=function(e){this.includeFormat=this.GetIncludeFormat(e),this.excludeFormat=this.GetExcludeFormat(e),this.ParseIncludeFormat(this.includeFormat),this.ParseExcludeFormat(this.excludeFormat)},n.prototype.IsValidProcess=function(e,t,n){if(n.IndexOf(e)!=-1)return!0;if(e=="	"||e=="\r"||e=="\n")return!0;if(t==0)return!1;var r=!1;if(t==this.charType.All)return!0;if((t&this.charType.Emoji)==(this.charType.Emoji|0)&&this.IsEmoji(e))return!0;if((t&this.charType.IVS)==(this.charType.IVS|0)&&this.IsIVS(e))return!0;if((t&this.charType.FourBytes)==(this.charType.FourBytes|0)&&this.IsFourBytes(e))return!0;if(e.GetLength()==1&&e.length>1)return!1;if((t&this.charType.DBCS_ShiftJIS)==(this.charType.DBCS_ShiftJIS|0)&&this.IsShiftJIS(e))return!0;if(this.charExInstance.IsFullWidth(e)){if((t&this.charType.DBCS)!=(this.charType.DBCS|0))return!1;if((t&this.charType.DBCS_All)==(this.charType.DBCS_All|0)&&e!="\u3000")r=!0;else if((t&this.charType.DBCS_LowerAlphabet)==(this.charType.DBCS_LowerAlphabet|0)&&this.IsLower(e))r=!0;else if((t&this.charType.DBCS_UpperAlphabet)==(this.charType.DBCS_UpperAlphabet|0)&&this.IsUpper(e))r=!0;else if((t&this.charType.DBCS_Number)==(this.charType.DBCS_Number|0)&&this.IsNumber(e))r=!0;else if((t&this.charType.DBCS_Binary)==(this.charType.DBCS_Binary|0)&&this.IsBinary(e))r=!0;else if((t&this.charType.DBCS_Hexadecimal)==(this.charType.DBCS_Hexadecimal|0)&&this.IsHex(e))r=!0;else if((t&this.charType.DBCS_Symbol)==(this.charType.DBCS_Symbol|0)&&this.IsSymbol(e))r=!0;else if((t&this.charType.DBCS_NumberSymbol)==(this.charType.DBCS_NumberSymbol|0)&&this.IsNumberSymbol(e))r=!0;else if((t&this.charType.DBCS_Katakana)==(this.charType.DBCS_Katakana|0)&&this.IsKatakana(e)){var i=this.IsHiragana(e);i?this.include?r=!0:r=(t&this.charType.DBCS_Hiragana)==(this.charType.DBCS_Hiragana|0):r=!0}else if((t&this.charType.DBCS_Hiragana)==(this.charType.DBCS_Hiragana|0)&&this.IsHiragana(e)){var i=this.IsKatakana(e);i?this.include?r=!0:r=(t&this.charType.DBCS_Katakana)==(this.charType.DBCS_Katakana|0):r=!0}else(t&this.charType.DBCS_JISX0208)==(this.charType.DBCS_JISX0208|0)&&this.IsJISX0208(e)?r=!0:(t&this.charType.Upper_DBCS_Katakana)==(this.charType.Upper_DBCS_Katakana|0)&&this.IsKatakana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.Upper_DBCS_Hiragana)==(this.charType.Upper_DBCS_Hiragana|0)&&this.IsHiragana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.DBCS_Space)==(this.charType.DBCS_Space|0)&&this.IsFormatSpace(e)?r=!0:(t&this.charType.FourBytes)==(this.charType.FourBytes|0)&&this.IsFourBytes(e)?r=!0:(t&this.charType.TwoBytes)==(this.charType.TwoBytes|0)&&!this.IsFourBytes(e)&&e!="\u3000"&&(r=!0)}else{if((t&this.charType.SBCS)!=this.charType.SBCS)return!1;(t&this.charType.SBCS_All)==this.charType.SBCS_All&&e!=" "?r=!0:(t&this.charType.SBCS_LowerAlphabet)==this.charType.SBCS_LowerAlphabet&&this.IsLower(e)?r=!0:(t&this.charType.SBCS_UpperAlphabet)==this.charType.SBCS_UpperAlphabet&&this.IsUpper(e)?r=!0:(t&this.charType.SBCS_Number)==this.charType.SBCS_Number&&this.IsNumber(e)?r=!0:(t&this.charType.SBCS_Binary)==this.charType.SBCS_Binary&&this.IsBinary(e)?r=!0:(t&this.charType.SBCS_Hexadecimal)==this.charType.SBCS_Hexadecimal&&this.IsHex(e)?r=!0:(t&this.charType.SBCS_Symbol)==this.charType.SBCS_Symbol&&this.IsSymbol(e)?r=!0:(t&this.charType.SBCS_NumberSymbol)==this.charType.SBCS_NumberSymbol&&this.IsNumberSymbol(e)?r=!0:(t&this.charType.SBCS_Katakana)==this.charType.SBCS_Katakana&&this.IsKatakana(e)?r=!0:(t&this.charType.Upper_SBCS_Katakana)==this.charType.Upper_SBCS_Katakana&&this.IsKatakana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.SBCS_Space)==this.charType.SBCS_Space&&this.IsFormatSpace(e)&&(r=!0)}return r},n.prototype.IsIncludeValid=function(e){return this.IsValidProcess(e,this.allowTypes,this.includeNormalChar)},n.prototype.IsExcludeValid=function(e){return this.IsValidProcess(e,this.excludeTypes,this.excludeNormalChar)},n.prototype.IsValid=function(e){if(this.excludeFormat!=""){if(!!this.IsExcludeValid(e))return!1;if(this.includeFormat!="")return this.IsIncludeValid(e)}else if(this.includeFormat!="")return this.IsIncludeValid(e);return!0},n.prototype.IsFormatSpace=function(e){return e==" "||e=="\u3000"?!0:!1},n.prototype.IsFourBytes=function(t){var n=e.CharProcess.CharEx,r=t.Substring(0,1);if(r.length>1)for(var i=0;i<r.length;i++)if(n.IsSurrogate(r[i]))return!0;return!1},n.prototype.IsUpper=function(e){return this.charExInstance.IsUpper(e)},n.prototype.IsLower=function(e){return this.charExInstance.IsLower(e)},n.prototype.IsNumber=function(e){return this.charExInstance.IsDigit(e)},n.prototype.IsBinary=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,e=="0"||e=="1"},n.prototype.IsHex=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,e=="A"||e=="B"||e=="C"||e=="D"||e=="E"||e=="F"||e=="a"||e=="b"||e=="c"||e=="d"||e=="e"||e=="f"||this.IsDigit(e)},n.prototype.IsSymbol=function(e){return this.charExInstance.IsHalfWidthSymbol(e)||this.charExInstance.IsFullWidthSymbol(e)},n.prototype.IsNumberSymbol=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,this.IsDigit(e)||e=="+"||e=="-"||e=="$"||e=="%"||e=="\\"||e==","||e=="."},n.prototype.IsKatakana=function(e){return this.charExInstance.IsKatakana(e)},n.prototype.IsHiragana=function(e){return this.charExInstance.IsHiragana(e)},n.prototype.IsShiftJIS=function(e){return this.charExInstance.IsShiftJIS(e)},n.prototype.IsJISX0208=function(e){return this.charExInstance.IsJISX0208(e)},n.prototype.IsEmoji=function(e){var t={};return!1},n.prototype.IsIVS=function(e){var t={};return!1},n.prototype.IsDBCS=function(e){return this.IsFullWidth(e)},n.prototype.IsSBCS=function(e){return!this.IsFullWidth(e)},n.prototype.IsFullWidth=function(e){return this.charExInstance.IsFullWidth(e)},n.prototype.IsSurrogatePair=function(e){return this.charExInstance.IsSurrogatePair(e)},n.prototype.ToHalfWidth=function(e){return this.charExInstance.ToHalfWidth(e)},n.prototype.IsDigit=function(e){return this.charExInstance.IsDigit(e)},n.prototype.IsUpperKana=function(e){return this.charExInstance.IsUpperKana(e)},n.prototype.CheckValidSpace=function(e){return e==" "&&(this.allowTypes&this.charType.SBCS_Space)==(this.charType.SBCS_Space|0)?!0:e=="\u3000"&&(this.allowTypes&this.charType.DBCS_Space)==(this.charType.DBCS_Space|0)?!0:!1},n.prototype.Check=function(e,t){var n;t!=null?n=e.Substring(t,t+1):n=e;var r=this.IsValid(n);return r?n:this.autoConvert?t!=null?this.Convert(e,t):this.Convert(n):""},n.prototype.CheckText=function(e){var t=e.GetLength(),n={IsInputValid:!0,CheckedText:""};for(var r=0;r<t;){var i=e.Substring(r,r+1);if(i!="	"&&i!="\r"&&i!="\n"){var s=this.Check(e,r);s.index!=null?(r=s.index,i=s.strValue):(i=s,r++),i==""&&(n.IsInputValid=!1)}else r++;n.CheckedText+=i}return n},n.prototype.Convert=function(e,t){var n;t==null?n=e:n=e.Substring(t,t+1);var r=!1;if(this.charExInstance.IsAlphabet(n)){var i=this.charExInstance.IsLower(n)?n.toUpperCase():n.toLowerCase();return r=this.IsValid(i),r?i:(n=this.charExInstance.IsFullWidth(n)?this.charExInstance.ToHalfWidth(n):this.charExInstance.ToFullWidth(n).text,r=this.IsValid(n),r?n:(i=this.charExInstance.IsFullWidth(i)?this.charExInstance.ToHalfWidth(i):this.charExInstance.ToFullWidth(i).text,r=this.IsValid(i),r?i:""))}if(this.charExInstance.IsHiragana(n)){if(this.charExInstance.IsLowerKana(n)){var s=this.charExInstance.ToUpperKana(n);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(n)){var o=this.charExInstance.ToLowerKana(n);r=this.IsValid(o);if(r)return o}var i=this.charExInstance.ToKatakana(n);r=this.IsValid(i);if(r)return i;if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}var u=this.charExInstance.ToHalfWidthEx(i);r=this.IsValid(u);if(r)return u;if(this.charExInstance.IsLowerKana(u)){u=this.charExInstance.ToUpperKana(u),r=this.IsValid(u);if(r)return u}else if(this.charExInstance.HasLowerKana(u)){u=this.charExInstance.ToLowerKana(u),r=this.IsValid(u);if(r)return u}return""}if(this.charExInstance.IsKatakana(n)){if(this.charExInstance.IsLowerKana(n)){var s=this.charExInstance.ToUpperKana(n);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(n)){var o=this.charExInstance.ToLowerKana(n);r=this.IsValid(o);if(r)return o}var a=!1,i=n;if(this.charExInstance.IsFullWidth(n)){var f=this.charExInstance.ToHalfWidthEx(n);if(f.GetLength()>0){r=this.IsValid(f);if(r)return f}if(this.charExInstance.IsLowerKana(f)){f=this.charExInstance.ToUpperKana(f),r=this.IsValid(f);if(r)return f}else if(this.charExInstance.HasLowerKana(f)){f=this.charExInstance.ToLowerKana(f),r=this.IsValid(f);if(r)return f}}else{if(t==null){i=this.charExInstance.ToFullWidth(n).text;if(!this.charExInstance.IsKatakana(i))return"";r=this.IsValid(i);if(r)return i}else{if(t+1<e.GetLength()){var l=this.charExInstance.ToFullWidth(e.Substring(t,t+2));i=l.text,a=l.processedAll}else i=this.charExInstance.ToFullWidth(n).text;if(!this.charExInstance.IsKatakana(i))return"";r=this.IsValid(i);if(r)return t++,a&&t++,{index:t,strValue:i}}if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}}i=this.charExInstance.ToHiragana(i),r=this.IsValid(i);if(r){if(t!=null){t++,a&&t++;var c={index:t,strValue:i};return i=="\u3094"&&(a?c.strValue="\u3046\u309b":c.strValue=""),c}return i=="\u3094"?"":i}if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}}return n=this.charExInstance.IsFullWidth(n)?this.charExInstance.ToHalfWidth(n):this.charExInstance.ToFullWidth(n).text,r=this.IsValid(n),r?n:""},n}();e.TextFilter=n})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),$.wijinputcore=$.wijinputcore||{},$.wijinputcore.validateText=$.wijinputcore.validateText||function(e,t,n){if(n===undefined){var r=new wijmo.input.TextFilter(!1,t),i=r.CheckText(e),s=i.CheckedText;return s===e?!0:!1}var o=e.length;return o<t||o>n?!1:!0};;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijinputtext",i=function(){function e(){}return e.None="none",e.EllipsisEnd="ellipsisEnd",e.EllipsisPath="ellipsisPath",e}(),s;(function(e){e[e.Append=0]="Append",e[e.Replace=1]="Replace"})(s||(s={}));var o=function(){function e(){}return e.Auto="auto",e.Active="active",e.Disabled="disabled",e.Inactive="inactive",e}(),u=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype._getIMTextBox=function(){return this.imtextbox===undefined&&(this.imtextbox=new l(this.element[0],this.outerDiv)),this.imtextbox},r.prototype._create=function(){n.prototype._create.call(this);var e=this;e.imtextbox=e._getIMTextBox()},r.prototype._init=function(){n.prototype._init.call(this),this.options.disableUserInput&&this.imtextbox.SetReadOnly(!0),this.imtextbox.placeHolder=this.options.nullText?this.options.nullText:"";var e=this;this.imtextbox.readingImeStringOutputEvent=function(t,n){e._trigger("readingImeStringOutput",null,n)},this.imtextbox.InvalidInputEvent=function(t,n){e._fireIvalidInputEvent(n)},this.imtextbox.SetAutoConvert(this.options.autoConvert),this.imtextbox.SetExitOnLastChar(this.options.blurOnLastChar),this.imtextbox.SetExitOnLeftRightKey(this.options.blurOnLeftRightKey),this.imtextbox.SetFormat(this.options.format),this.imtextbox.SetMaxLength(this.options.maxLength),this.imtextbox.SetHighlightText(this.options.highlightText),this.imtextbox.SetOverflowTip(this.options.showOverflowTip),this.imtextbox.SetMaxLineCount(this.options.maxLineCount),this.imtextbox.SetCountWrappedLine(this.options.countWrappedLine),this.options.invalidInput!==null&&this.imtextbox.OnInvalidInput(this.options.invalidInput),this.options.keyExit!==null&&this.imtextbox.OnKeyExit(this.options.keyExit),this.imtextbox.TextChangedEvent=function(t,n){e.options.text=n,e._trigger("textChanged",null,{text:n})};var t=this.element,r=this.options.wijCSS,i={input:!0,textarea:!0},s={text:!0,password:!0,email:!0,url:!0},o=t.get(0).nodeName.toLowerCase();if(!i.hasOwnProperty(o))return;if(o==="input"&&this.element.attr("type")&&!s.hasOwnProperty(this.element.attr("type").toLowerCase()))return;if(o==="input"){this.imtextbox.SetMultiLine(!1);if(this.element.attr("type")==="password"){var u;this.options.passwordChar?u=this.options.passwordChar:u=this.imtextbox.SystemPasswordChar(),this.imtextbox.SetPasswordChar(u)}}else o==="textarea"&&this.imtextbox.SetMultiLine(!0);this.imtextbox.SetLengthAsByte(this.options.lengthAsByte);if(this.options.text===null){var a=this.getText();a!=this.imtextbox.placeHolder&&(this.options.text=a)}(this.options.text!==this.imtextbox.placeHolder||!this.imtextbox.isNullText)&&this.setText(this.options.text),this.imtextbox.SetEllipsisString(this.options.ellipsisString),this.imtextbox.SetEllipsis(this.options.ellipsis),t.is(":disabled")?(this._setOption("disabled",!0),t.addClass(r.stateDisabled)):(this._setOption("disabled",!1),t.removeClass(r.stateDisabled)),this.options.passwordChar&&this.imtextbox.SetPasswordChar(this.options.passwordChar)},r.prototype.destroy=function(){var e=this,t=e.options.wijCSS;e.element.removeClass(t.widget).removeClass(t.stateDefault).removeClass(t.cornerAll).removeClass(t.stateHover).removeClass(t.stateActive).off("."+e.widgetName),e.element.off(".imtextbox"),n.prototype.destroy.call(this)},r.prototype.getSelectedText=function(){return this.imtextbox.GetSelectedText()},r.prototype._setOption=function(e,t){switch(e){case"nullText":case"placeholder":this.imtextbox.placeHolder=t}n.prototype._setOption.call(this,e,t);switch(e){case"autoConvert":this.imtextbox.SetAutoConvert(t);break;case"blurOnLastChar":this.imtextbox.SetExitOnLastChar(t);break;case"blurOnLeftRightKey":this.imtextbox.SetExitOnLeftRightKey(t);break;case"showDropDownButton":var r=this.imtextbox.GetEllipsis();this.imtextbox.SetEllipsis(r);break;case"ellipsis":this.imtextbox.SetEllipsis(t);break;case"ellipsisString":this.imtextbox.SetEllipsisString(t);break;case"highlightText":this.imtextbox.SetHighlightText(t);break;case"showOverflowTip":this.imtextbox.SetOverflowTip(t);break;case"format":this.imtextbox.SetFormat(t);break;case"maxLineCount":this.imtextbox.SetMaxLineCount(t);break;case"countWrappedLine":this.imtextbox.SetCountWrappedLine(t);break;case"lengthAsByte":this.imtextbox.SetLengthAsByte(t);break;case"maxLength":this.imtextbox.SetMaxLength(t);break;case"readonly":case"disableUserInput":this.imtextbox.SetReadOnly(t);break;case"passwordChar":this.imtextbox.SetPasswordChar(t);break;case"text":this.setText(t);break;case"invalidInput":this.imtextbox.OnInvalidInput(t);break;case"keyExit":this.imtextbox.OnKeyExit(t);break;case"":}},r.prototype._updateTextOnLostFocus=function(){if(this.imtextbox.PasswordMode)return;n.prototype._updateTextOnLostFocus.call(this)},r.prototype._onMouseUp=function(e){},r.prototype._onCompositionStart=function(){},r.prototype._onCompositionEnd=function(){},r.prototype._onChange=function(){},r.prototype._onPaste=function(e){},r.prototype._onDrop=function(e){},r.prototype._onKeyDown=function(t){var n=this._getKeyCode(t),r=e.getKeyCodeEnum();if(this.options.disableUserInput){n===r.TAB?this._processTabKey(t)&&this._stopEvent(t):this._stopEvent(t);return}if(this._processKeyForDropDownList(t))return;n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyPress=function(t){if(this.options.disableUserInput)return;var n=this._getKeyCode(t),r=e.getKeyCodeEnum();n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyUp=function(e){if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}},r.prototype._createTextProvider=function(){this._textProvider=new f(this)},r.prototype.selectText=function(e,n){typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=this.getText().length),isNaN(e)&&(e=0),isNaN(n)&&(n=0);if(this.element.is(":disabled"))return;t.CoreUtility.IsFireFox4OrLater()&&this.focus(),this.imtextbox.SetSelection(e,n)},r.prototype._updateText=function(){this.element.data("initialized")&&(n.prototype._updateText.call(this),this.imtextbox&&this.options.text===this.imtextbox.placeHolder&&(this.options.text=""))},r}(t.wijinputcore);t.wijinputtext=u;var a=function(){function e(){this.initSelector=":jqmData(role='wijinput')",this.wijCSS={},this.autoConvert=!0,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.ellipsis=i.None,this.ellipsisString=String.fromCharCode(8230),this.showOverflowTip=!1,this.highlightText=!1,this.format="",this.imeMode="auto",this.lengthAsByte=!1,this.maxLength=0,this.maxLineCount=0,this.countWrappedLine=!1,this.passwordChar="",this.text=null,this.allowSpinLoop=!1,this.spinnerAlign="verticalRight",this.showSpinner=!1,this.culture="",this.readingImeStringOutput=null}return e}();u.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new a),n.wijmo.registerWidget(r,u.prototype);var f=function(){function e(e){this.inputWidget=e}return e.prototype.toString=function(e){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?(this.inputWidget.element.data("isShowNullText",!0),this.inputWidget.options.nullText):(!this.inputWidget._showNullText()||this.inputWidget.isFocused())&&this.inputWidget.element.data("isShowNullText")?(this.inputWidget.element.data("isShowNullText",!1),""):this.inputWidget.imtextbox&&this.inputWidget.imtextbox.GetPasswordChar()?e?this.inputWidget.options.text:this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.imtextbox?this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.options.text!==undefined?this.inputWidget.options.text:this.inputWidget.element.val()},e.prototype.isValueNull=function(){return this.inputWidget.imtextbox?this.inputWidget.imtextbox.isNullText:!0},e.prototype.setText=function(e){this.inputWidget.imtextbox.SetText(e)},e.prototype.replaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},e.prototype.insertAt=function(e,t,n){},e.prototype.removeAt=function(e,t,n,r){},e}();t.wijInputTextProvider=f;var l=function(){function e(e,n){this.ToolTip=null,this.placeHolder="",this.Focused=!1,this.InputElement=e,this._container=n,this.InputElement.id===""&&(this.InputElement.id="wijmo_input_"+t.Utility.IdCounter++),this.ScrollBarMode=1,this.IsControlInPreview=null,this.AddressObj=null,this.KeyActionList=null,this.UseSystemPasswordChar=!1,this.Overwrite=!1,this.Format="",this.ShowHistory=!1,this.ReadOnly=!1,this.AutoConvert=!0,this.CausesValidation=!1,this.ValidationGroup="",this.LengthAsByte=!1,this.MaxLength=0,this.MaxHistoryCount=10,this.MultiLine=!1,this.AcceptsCrLf=0,this.AcceptReturn=!0,this.AcceptTab=!1,this.HighlightText=!1,this.Ellipsis=i.None,this.EllipsisString=String.fromCharCode(8230),this.ExitOnLastChar=!1,t.CoreUtility.IPad?this.TouchDropDownScale=1:this.TouchDropDownScale=1.5,this.ExitOnLeftRightKey=0,this.EditMode=0,this.__editModeInternal=0,this.AutoPostBack=!1,this.PasswordMode=!1,this.PasswordChar="",this.OverflowTip=!1,this.MaxLineCount=0,this.CountWrappedLine=!1,this.IsInUpdatePanelAndAsyncPostBack=!1,this.UseClipboard=!0,this.ReadingImeStringOutput=new Object,this.ReadingImeStringOutput.OutputMode=0,this.ReadingImeStringOutput.TargetControl=null,this.ScrollBars=0,this.prevval="",this.RubyText="",this.FocusType=0,this.SelectionStart=0,this.SelectionEnd=0,this.SelectionLength=0,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd;var r=this,s=r!=null;this.IsInUpdatePanelAndAsyncPostBack?s&&(this.OldText=r.GetOldValue()):this.OldText=this.Text,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,this.Text="",this.LastText=this.Text,this.BuffText="",this.IsUndoAfterDel=!1,this.MouseButton=0,this.EnableOnSelectStartEvent=!0,this.isLeftMouseButtonPressed=!1,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.DragEdit=!1,this.DropEdit=!1,this.isFuncKeyPressed=!1,this.SystemChange=!0,this.ImeMode=!1,this.KeyDownAction=!1,this.FocusExit=!1,this.lastValue="",this.truePosition=-1,this.mouseupTimes=0,this.LastInputText="",this.BeforeDragSelectionStart=0,this.BeforeDragSelectionEnd=0,this.IsMouseDown=!1,this.Type="Edit",this.ToolTip=null;if(!this.MultiLine&&this.OverflowTip){var u=this;t.Utility.AttachEvent(document,"mousemove",function(e){t.GlobalEventHandler.OnMouseMove(u,e)},!1)}this.HasFocus=!1;var a={SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd,Text:this.Text,OldSelectionStart:this.OldSelectionStart,OldSelectionEnd:this.OldSelectionEnd,OldText:this.OldText,LastStart:this.LastStart,LastEnd:this.LastEnd,LastText:this.LastText,BuffText:this.BuffText};this.DropDownEditData=a,this.IsChangedByDropDownEdit=!1,this.DropText="",this.isTextEllipsis=!1,this.TextHeadLength=0,this.IsJapanConvertKeyPress=!1,this.NeedReCalCursorPos=!0,t.CoreUtility.IsIE()||(this.IsActive=!1),this.HasValidatedImeInput=!0,this.IsFocusToDropDownEdit=!1,this.IsCausedByClickingDropDownBt=!1,this.IsCausedByImplementingDrop=!1,t.CoreUtility.IsIE()||(this.MaxLineCount=0,this.Ellipsis=i.None,this.OverflowTip=!1,this.IsImplementImeInput=!1),this.Create(),this.AddAllEventsHandler(),this.EditStatusChangedEvent=null,this.InvalidInputEvent=null,this.KeyExitEvent=null,this.TextChangedEvent=null,this.DropDownCloseEvent=null,this.DropDownOpenEvent=null,this.readingImeStringOutputEvent=null,this.IsjQueryControl=!0,this.UIProcess=new c(this.AutoConvert,this.Format,this.PasswordMode,this.PasswordChar,this.IsjQueryControl,this),this.Text="",this.isPasting=!1,this.WordWrap=!0,this.Enabled=!0,this.AutoCompleteType="None",this.InputElement.style.imeMode===""&&this.SetImeMode(o.Auto),this._autoComplete=new h(this),this.IsFromServer=!1,this._historyList=[],this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled,this._lines=[],this.tempIMEMode="auto",this.HeightChangedBySet=!1,this.Width="",this.Height="",this.LastPassWordChar="",t.Utility.AttachFocusEventOfDocument(),this.ShouldShowClearButton=!0,this.switchPasswordChar=!1,this.InputElement.value===""?this.isNullText=!0:this.isNullText=!1}return e.prototype.GetId=function(){return this.InputElement.id},e.prototype.GetContainer=function(){return this._container},e.prototype.GetJQueryInputElement=function(){return n(this.InputElement)},e.prototype.GetInputElement=function(){return this.InputElement},e.prototype.Create=function(){t.CoreUtility.IsIE10OrLater()&&this.CreateHideMSClearButtonForIE10Class()},e.prototype.CreateHideMSClearButtonForIE10Class=function(){if(e.HideMSClearButtonForIE10ClassName===undefined){e.HideMSClearButtonForIE10ClassName="gcsh_HideMSClearButtonForIE10";var n=t.Utility.CreateClassStyle(e.HideMSClearButtonForIE10ClassName+"::-ms-clear");n.style.display="none"}},e.prototype.IsNullFormat=function(){return!1},e.prototype.IsNeedFishEyeButton=function(){return t.CoreUtility.IsIE10OrLater()&&!this.MultiLine&&this.PasswordMode},e.prototype.SetAddressObj=function(e){this.AddressObj=e},e.prototype.ShowClearButton=function(){this.InputElement.className=this.InputElement.className.replace(e.HideMSClearButtonForIE10ClassName,"")},e.prototype.HideClearButton=function(){this.InputElement.className!=null&&this.InputElement.className.indexOf(e.HideMSClearButtonForIE10ClassName)==-1&&(this.InputElement.className+=" "+e.HideMSClearButtonForIE10ClassName)},e.prototype.HandleClearButton=function(e){if(t.CoreUtility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&e.target==this.InputElement&&!this.MultiLine){var n=document.activeElement==e.target,r=t.CoreUtility.IsMouseDownOnClearButton(e);if(this.MouseUpHasValue&&n&&r){var i=this;setTimeout(function(e){i.Clear()},0)}}},e.prototype.GetAcceptsTab=function(){return this.AcceptTab},e.prototype.SetAcceptsTab=function(e){e=t.Utility.CheckBool(e),this.AcceptTab=e},e.prototype.GetAcceptsCrlf=function(){return this.AcceptsCrLf},e.prototype.SetAcceptsCrlf=function(e){e=t.Utility.CheckEnum(t.CrLfMode,e),this.AcceptsCrLf=e},e.prototype.GetAutoConvert=function(){return this.AutoConvert},e.prototype.SetAutoConvert=function(e){e=t.Utility.CheckBool(e),this.AutoConvert=e,this.UIProcess.Reset()},e.prototype.GetCountWrappedLine=function(){return this.CountWrappedLine},e.prototype.SetCountWrappedLine=function(e){e=t.Utility.CheckBool(e),this.CountWrappedLine=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEditMode=function(){return this.EditMode},e.prototype.SetEditMode=function(e){var n=e;n=t.Utility.CheckEnum(t.EditMode,n),n===0||n===2?this.Overwrite=!1:this.Overwrite=!0;if(n!==this.EditMode){var r=!1;this._isinsertGroup(n)&&this._isOverwriteGroup(this.EditMode)?r=!0:this._isinsertGroup(this.EditMode)&&this._isOverwriteGroup(n)&&(r=!0),this.EditMode=n,this.__editModeInternal=n,r&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},e.prototype._getEditModeInternal=function(){return this.__editModeInternal},e.prototype._setEditModeInternal=function(e){e=t.Utility.CheckEnum(t.EditMode,e),e===0||e===2?this.Overwrite=!1:this.Overwrite=!0,e!==this.__editModeInternal&&(this.__editModeInternal=e)},e.prototype.GetEllipsis=function(){return this.Ellipsis},e.prototype.SetEllipsis=function(e){var n=e;n=t.Utility.CheckEnum(i,n),this.Ellipsis=n,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEllipsisString=function(){return this.EllipsisString},e.prototype.SetEllipsisString=function(e){e=t.Utility.CheckString(e),this.EllipsisString=e,this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetExitOnLastChar=function(){return this.ExitOnLastChar},e.prototype.SetExitOnLastChar=function(e){e=t.Utility.CheckBool(e),this.ExitOnLastChar=e},e.prototype.GetExitOnLeftRightKey=function(){switch(this.ExitOnLeftRightKey){case 0:return"none";case 3:return"both";case 1:return"left";case 2:return"right";default:}},e.prototype.SetExitOnLeftRightKey=function(e){t.Utility.CheckString(e);switch(e.toLowerCase()){case"none":this.ExitOnLeftRightKey=0;break;case"both":this.ExitOnLeftRightKey=3;break;case"left":this.ExitOnLeftRightKey=1;break;case"right":this.ExitOnLeftRightKey=2;break;default:}},e.prototype.GetFormat=function(){return this.Format},e.prototype.SetFormat=function(e){e=t.Utility.CheckString(e),this.Format=e,this.UIProcess.Reset();var n=this.InternalSetText(this.GetText());this.Text=n,this.DropDownEditData.Text=n,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetHighlightText=function(){return this.HighlightText},e.prototype.SetHighlightText=function(e){e=t.Utility.CheckBool(e),this.HighlightText=e},e.prototype.GetHistoryList=function(){return this._historyList},e.prototype.SetHistoryList=function(e){if(e===null)return;var t;arguments[0]instanceof Array?t=arguments[0]:t=Array.prototype.slice.call(arguments);if(t.length===0||t.length===1&&t[0]==="")return;this.IsFromServer=!1,this._historyList=[];for(var n=0;n<t.length;n++)this._historyList.push(t[n])},e.prototype.GetImeMode=function(){return this.InputElement!==null?this.InputElement.style.imeMode||"auto":""},e.prototype.SetImeMode=function(e){t.Utility.CheckString(e),this.InputElement!==null&&(this.InputElement.style.imeMode=e)},e.prototype.GetLengthAsByte=function(){return this.LengthAsByte},e.prototype.SetLengthAsByte=function(e){e=t.Utility.CheckBool(e),this.LengthAsByte=e,this.SetText(this.UIProcess.Filter.CheckText(this.GetText()).CheckedText)},e.prototype.GetLines=function(){var e=new Array,n=this.GetText(),r="\r\n";if(!t.CoreUtility.IsIE()||t.CoreUtility.IsIE9OrLater())r="\n";var i=n.IndexOf(r),s=0;while(i!=-1)e[s++]=n.Substring(0,i),n=n.Substring(i+r.GetLength(),n.GetLength()),i=n.IndexOf(r);return e[s]=n,e},e.prototype.SetLines=function(e){if(e===null)return;var n;arguments[0]instanceof Array?n=arguments[0]:n=Array.prototype.slice.call(arguments);if(n.length===0||n.length===1&&n[0]==="")return;this._lines=[];for(var r=0;r<n.length;r++)this._lines.push(n[r]);var i="";if(this.MultiLine)for(var s=0;s<this._lines.length;s++)s>0&&(t.CoreUtility.IsIE()?i+="\r\n":i+="\n"),i+=this._lines[s];else for(var s=0;s<this._lines.length;s++)i+=this._lines[s];this.SetText(i)},e.prototype.GetMaxHistoryCount=function(){return this.MaxHistoryCount},e.prototype.SetMaxHistoryCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxHistoryCount=e},e.prototype.GetMaxLength=function(){return this.MaxLength},e.prototype.SetMaxLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLength=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetMaxLineCount=function(){return this.MaxLineCount},e.prototype.SetMaxLineCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLineCount=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetMultiLine=function(){return this.MultiLine},e.prototype.SetMultiLine=function(e){e=t.Utility.CheckBool(e);if(e===this.MultiLine)return;this.MultiLine=e,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetOverflowTip=function(){return this.OverflowTip},e.prototype.SetOverflowTip=function(e){e=t.Utility.CheckBool(e),this.OverflowTip=e},e.prototype.GetOverwrite=function(){return this.Overwrite},e.prototype.GetPasswordChar=function(){return this.PasswordChar},e.prototype.SetPasswordChar=function(e){if(e!==""){e=t.Utility.CheckChar(e);if(this.PasswordChar===this.SystemPasswordChar()&&this.GetUseSystemPasswordChar()){this.LastPassWordChar=e;return}this.LastPassWordChar=this.PasswordChar,this.PasswordChar=e,this.PasswordMode=!0,this.isNullText||this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled)}else{this.UseSystemPasswordChar===!1&&(this.PasswordMode=!1,this.SetText(this.hideText),this.tempIMEMode!==""&&this.SetImeMode(this.tempIMEMode));if(this.PasswordChar===this.SystemPasswordChar()&&!this.GetUseSystemPasswordChar()&&this.LastPassWordChar!==""){this.PasswordChar=t.Utility.CheckChar(this.LastPassWordChar),this.PasswordMode=!0,this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);return}this.PasswordChar=e}this.switchPasswordChar=!0,this.UIProcess.Reset(),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetReadingImeStringOutputMode=function(){return this.ReadingImeStringOutput.OutputMode},e.prototype.SetReadingImeStringOutputMode=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.OutputMode=e},e.prototype.GetReadingImeStringOutputTargetControl=function(){return this.ReadingImeStringOutput.TargetControl},e.prototype.SetReadingImeStringOutputTargetControl=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.TargetControl=e},e.prototype.GetReadOnly=function(){return this.ReadOnly},e.prototype.SetReadOnly=function(e){e=t.Utility.CheckBool(e),this.InputElement!=null&&(this.InputElement.readOnly=e),this.ReadOnly=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&e:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&e},e.prototype.GetScrollBarMode=function(){return this.ScrollBarMode},e.prototype.SetScrollBarMode=function(e){e=t.Utility.CheckEnum(t.ScrollBarMode,e),this.ScrollBarMode=e,this._CheckScrollBar(this.GetScrollBars(),e)},e.prototype.GetScrollBars=function(){return this.ScrollBars},e.prototype.SetScrollBars=function(e){e=t.Utility.CheckEnum(t.ScrollBars,e),this.ScrollBars=e,this._CheckScrollBar(e,this.GetScrollBarMode());var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10)},e.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},e.prototype.SetSelectionStart=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";if(e==null)return;var n=e.toString(),r=parseInt(n);if(t.Utility.FilterText("0123456789",n)==n)if(r>this.GetText().GetLength())this.SelectionStart=this.GetText().GetLength(),this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.DropDownEditData.Text.GetLength(),this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength());else{var i=this.GetSelectionLength();this.SelectionStart=r,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,r)),r-0+i<=this.GetText().GetLength()?(this.SelectionEnd=r-0+i,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,r+i))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetSelectedText=function(){return this.GetText().Substring(Math.min(this.SelectionStart,this.SelectionEnd),Math.max(this.SelectionStart,this.SelectionEnd))},e.prototype.SetSelectedText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText();var n=this.SelectionStart,r=this.SelectionEnd,s=this.GetText();this.MultiLine||(this.DropDownEditData.OldText=this.DropDownEditData.Text,n=this.DropDownEditData.SelectionStart,r=this.DropDownEditData.SelectionEnd,s=this.DropDownEditData.Text);var o=this.UIProcess.TextBoxPaste(n,r,s,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!0);o==null,o.Text!=null&&(this.DirectSetText(o.Text),this.MultiLine||(this.DropDownEditData.Text=o.Text)),o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=o.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionStart))),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=o.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionEnd)));var u=this.OldText;this.OldText=this.GetText(),this.LastText=this.OldText,this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},e.prototype.SetSelectionLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";e==null,e=e.toString();if(t.Utility.FilterText("0123456789",e)==e){var n=this.GetSelectionStart();this.SelectionStart=n,n+(e-0)<=this.GetText().GetLength()?(this.SelectionEnd=n+(e-0),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,n+parseInt(e)))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetShowHistory=function(){return this.ShowHistory},e.prototype.SetShowHistory=function(e){e=t.Utility.CheckBool(e),this.ShowHistory=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled},e.prototype.GetText=function(){var e=this._getInputValueWithPlaceHolder();this.isTextEllipsis&&!this.DragEdit&&(e=this.Text);if(this.PasswordMode){var n=this.hideText,r=n.LastIndexOf(":true"),i;return r==-1?i=n:i=n.Substring(0,r),i}return!t.CoreUtility.IsIE()&&this.FFDragFlag&&(e=this.Text),e},e.prototype.SetText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText(),this.switchPasswordChar=!1,this.InternalSetText(e,!1),this.GetText()!=this.OldText&&(this.OldText=this.GetText(),this.SetHideText(this.GetText())),this.LastText=this.GetText();var n=this.GetText().GetLength();this.SelectionStart=n,this.SelectionEnd=n,this.BuffText=this.LastText,this.DropDownEditData.Text=this.GetText(),this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=n,this.DropDownEditData.SelectionEnd=n,this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetTouchDropDownScale=function(){return this.TouchDropDownScale},e.prototype.SetTouchDropDownScale=function(e){e=t.Utility.CheckFloat(e,.25,4),this.TouchDropDownScale=e},e.prototype.GetUseClipboard=function(){return this.UseClipboard},e.prototype.SetUseClipboard=function(e){e=t.Utility.CheckBool(e),this.UseClipboard=e},e.prototype.GetUseSystemPasswordChar=function(){return this.UseSystemPasswordChar},e.prototype.SetUseSystemPasswordChar=function(e){e=t.Utility.CheckBool(e),this.UseSystemPasswordChar=e,e===!0?(this.PasswordMode=!0,this.SetPasswordChar(this.SystemPasswordChar())):this.SetPasswordChar(""),this.UIProcess.Reset()},e.prototype.GetWordWrap=function(){return this.WordWrap},e.prototype.SetWordWrap=function(e){e=t.Utility.CheckBool(e),this.WordWrap=e,e===!1?this.InputElement.style.wordWrap="normal":this.InputElement.style.wordWrap="break-word";var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10),this._CheckScrollBar(this.GetScrollBars(),this.GetScrollBarMode())},e.prototype.Drop=function(){},e.prototype.Clear=function(){this.SetText("")},e.prototype.SetFocus=function(){},e.prototype.OnDropDownClose=function(e){e=t.Utility.CheckFunction(e),this.DropDownCloseEvent=e},e.prototype.OnDropDownOpen=function(e){e=t.Utility.CheckFunction(e),this.DropDownOpenEvent=e},e.prototype.OnEditStatusChanged=function(e){e=t.Utility.CheckFunction(e),this.EditStatusChangedEvent=e},e.prototype.OnInvalidInput=function(e){e=t.Utility.CheckFunction(e),this.InvalidInputEvent=e,this.UIProcess.InvalidInputEvent=e},e.prototype.OnKeyExit=function(e){e=t.Utility.CheckFunction(e),this.KeyExitEvent=e},e.prototype.OnTextChanged=function(e){e=t.Utility.CheckFunction(e),this.TextChangedEvent=e},e.prototype.Undo=function(){var e=this.GetText(),t=this.BuffText,n=this.LastText,r=this.LastSelectionStart,i=this.LastSelectionEnd;this.MultiLine||(e=this.DropDownEditData.Text,t=this.DropDownEditData.BuffText,n=this.DropDownEditData.LastText,r=this.DropDownEditData.LastSelectionStart,i=this.DropDownEditData.LastSelectionEnd);var s=this.UIProcess.TextBoxUndo(e,t,n,r,i);if(s==null)return!1;s.Text!=null&&(s.DelInclude?(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)):(this.LastText=this.Text,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text)),this.InternalSetText(s.Text,!0)),s.SelectionStart!=null&&(this.LastSelectionStart=this.SelectionStart,this.SelectionStart=s.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(s.Text,s.SelectionStart))),s.SelectionEnd!=null&&(this.LastSelectionEnd=this.SelectionEnd,this.SelectionEnd=s.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(s.Text,s.SelectionEnd))),s.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Cut=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Cut(n,e,t);if(r==null)return!1;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.DelInclude&&(this.IsUndoAfterDel=!0,this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type)},e.prototype.Copy=function(){this.PasswordMode||this.UIProcess.Copy(this.GetText(),this.SelectionStart,this.SelectionEnd)},e.prototype.Delete=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Delete(this.MultiLine,n,e,t);if(r==null)return!1;r.DelInclude&&(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Paste=function(e){var t=this.SelectionStart,n=this.SelectionEnd,r=this.GetText();this.MultiLine||(t=this.DropDownEditData.SelectionStart,n=this.DropDownEditData.SelectionEnd,r=this.DropDownEditData.Text);var i=this.UIProcess.TextBoxPaste(t,n,r,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!1);if(i==null)return!1;i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(i.Text,i.SelectionStart))),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(i.Text,i.SelectionEnd))),i.Text!=null&&(this.DirectSetText(i.Text),this.MultiLine||(this.DropDownEditData.Text=i.Text)),i.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd);if(i.EventInfo!=null)for(var s=0;s<i.EventInfo.length;s++)i.EventInfo[s]!=null&&this.UIProcess.FireEvent(this,i.EventInfo[s].Name,i.EventInfo[s].Args,i.EventInfo[s].Type)},e.prototype.SelectAll=function(){var e=this.GetText();this.MultiLine||(e=this.DropDownEditData.Text);var t=this.UIProcess.TextBoxSelectAll(e);if(t==null)return!1;t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(e,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(e,t.SelectionEnd))),t.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype._CheckScrollBar=function(e,n){switch(e){case 3:n==0?(this.InputElement.style.overflowX="auto",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll",this.InputElement.style.overflowY="scroll");break;case 0:this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="hidden";break;case 2:n==0?(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="scroll");break;case 1:this.InputElement.style.overflowY="hidden",n==0?this.InputElement.style.overflowX="auto":this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll"}if(t.CoreUtility.safari||t.CoreUtility.chrome){var r=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-1+"px";var i=this;setTimeout(function(){i.InputElement.style.width=r},0)}t.CoreUtility.IPad&&(this.InputElement.style.webkitOverflowScrolling="touch"),this.InternalSetText(this.GetText())},e.prototype.Select=function(){if(this._isInnerKeyPressCall){delete this._isInnerKeyPressCall;return}this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype._IMSetSelection=function(e,n,r,i){var s={start:n,end:r};if(n>r){var o=n;n=r,r=o}if(t.CoreUtility.IsIE())try{var u=e.createTextRange();if(!i){var a=e.value.GetStandardPosition(n);r=e.value.GetStandardPosition(r,a-n),n=a,r=e.value.length-r,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}else{var f=e.value,l=0,c=0,h=0,p=f.lastIndexOf("\r\n");while(p!=-1)l++,p>=n&&c++,p>=r&&h++,f=f.substring(0,p),p=f.lastIndexOf("\r\n");c=l-c;var a=n;r=r,n=a-c,r=e.value.length-r-h,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}}catch(d){}else{var a=n;r=r,n=a;try{var v=parseInt(n),m=parseInt(r);(e.selectionStart!=v||e.selectionEnd!=m)&&e.setSelectionRange(v,m)}catch(d){}}var g=e.value.substring(0,v),y=t.CoreUtility.MeasureText(g,e).Width,b=e.scrollHeight,w=e.clientWidth,E=e.currentStyle||window.getComputedStyle(e,null);w-=parseInt(E.paddingLeft)+parseInt(E.paddingRight);var S=e.clientHeight;return S-=parseInt(E.paddingTop)+parseInt(E.paddingBottom),t.CoreUtility.IsIE10OrLater()&&(w-=S),e.scrollLeft>y?e.scrollLeft=y:y>e.scrollLeft+w&&(e.scrollLeft=y-w+parseInt(E.paddingLeft)),e.scrollTop>b?e.scrollTop=b:b>e.scrollTop+S&&(e.scrollTop=b-S+parseInt(E.paddingTop)),s},e.prototype.SetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):this._IMSetSelection(this.InputElement,e,t),this.SelectionStart=e,this.SelectionEnd=t,this.DropDownEditData.SelectionStart=e,this.DropDownEditData.SelectionEnd=t},e.prototype.InternalSetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):(this._IMSetSelection(this.InputElement,e,t),this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,e),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t)),this.SelectionStart=e,this.SelectionEnd=t},e.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e,this.DropDownEditData.SelectionStart=e},e.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e,this.DropDownEditData.SelectionEnd=e},e.prototype.GetTrueSelection=function(e,t,n,r){var i=new Object;return i.SelectionStart=e,i.SelectionEnd=t,this.isTextEllipsis?(i.SelectionStart=this.GetTruePosition(e,n,r,this.TextHeadLength),e==t?i.SelectionEnd=i.SelectionStart:i.SelectionEnd=this.GetTruePosition(t,n,r,this.TextHeadLength),i):i},e.prototype.DropDownListValidate=function(e){var t=e,n=new Array;for(var r=0,i=0;r<t.length;r++){var s=t[r];if(this.UIProcess.ListValidateCheck(t[r])){this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(s,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);s==t[r]&&(n[i]=t[r],i++)}}return n},e.prototype.SystemPasswordChar=function(){var e=t.CoreUtility.GetClientOS();switch(e.toLowerCase()){case"win2000":return"*";case"win2003":case"winxp":case"vista":case"win7":case"win8":return"\u25cf";default:return"*"}},e.prototype.InternalSetText=function(e,n,r){var i=this.UIProcess.FormatCheck(e,this.AcceptTab,this.AcceptReturn),s=i;this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(i,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);return r&&(t.CoreUtility.firefox||t.CoreUtility.chrome)?this.DirectSetText(s,!0):this.DirectSetText(s),!this.MultiLine&&n&&(this.DropDownEditData.Text=s),s},e.prototype.DirectSetText=function(e,n){this.SystemChange=!1;var r=e;this.PasswordMode&&(r=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),!this.MultiLine&&!t.CoreUtility.IsIE()&&(r=r.replace(/\r\n/g,""),r=r.replace(/\n/g,""),r=r.replace(/\r/g,"")),this.Text!=e&&(this.Text=e,this.switchPasswordChar||(this.switchPasswordChar=!1)),n||this._setInputValueWithPlaceHolder(r),this.SetHideText(e)},e.prototype.InternalDirectSetText=function(e){var t=e;this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),this._setInputValueWithPlaceHolder(t)},e.prototype._setInputValueWithPlaceHolder=function(e){if(e==="")this.isNullText=!0,this.Focused===!1&&(e=this.placeHolder);else if(e!==this.placeHolder||!this.isNullText)this.isNullText=!1;this.InputElement.value=e},e.prototype._getInputValueWithPlaceHolder=function(){return this.isNullText?"":this.InputElement.value},e.prototype.SetHideText=function(e){this.hideText!==e&&this.TextChangedEvent!=""&&this.TextChangedEvent!=null&&this.UIProcess.FireEvent(this,this.TextChangedEvent,e,"textChanged"),this.hideText=e},e.prototype.GetSingleCurPosition=function(e,t){if(t<0)return-1;var n=t;t>=e.GetLength()&&(n=e.GetLength());var r=e.Substring(0,n);for(;;){var i=r.GetLength();r=r.replace(/\r/g,""),r=r.replace(/\n/g,"");if(i==r.GetLength())break}return r.GetLength()},e.prototype.GetSingleText=function(e){var t=e;for(;;){var n=t.GetLength();t=t.replace(/\r/g,""),t=t.replace(/\n/g,"");if(t.GetLength()==n)break}return t},e.prototype.GetMultiPosition=function(e,t){if(t<=0)return 0;if(t>=e.GetLength())return e.GetLength();var n=t;while(n<e.GetLength()){var r=e.Substring(0,n);r=this.GetSingleText(r);if(r.GetLength()==t)break;n+=1}return n},e.prototype.GetOldValue=function(){return this.OldText},e.prototype.GetValue=function(){return this.GetText()},e.prototype.SetInnerText=function(e){this.SetText(e)},e.prototype.GetDisPlayText=function(e){var t=e;return this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),t},e.prototype.Focus=function(){this._destoryOverflowTip(),this.oldTextValue=this._getInputValueWithPlaceHolder();var e=this.oldTextValue;t.CoreUtility.IsIE()||(this.IsActive=!0),this.HasFocus=!0;if(!this._autoComplete.GetIsFocusOnList()){this._autoComplete.HideDropdown();var n;this.AutoCompleteType!="None"?n=this.GetItem(this.AutoCompleteType):n=this.GetItem(this.GetId(),"focus");var r=n!=null?n.sort():null;t.Utility.LoadComplete==1&&this._autoComplete.SetDataList(r)}else this._autoComplete.SetIsFocusOnList(!1);var i=this.UIProcess.TextBoxFocus(this.FocusType,this.InputElement,this.GetText(),this.MultiLine,this.HighlightText,!1);t.Utility.CurrentActiveControlId=this.GetId();if(i==null)return;this.isTextEllipsis&&this.InternalDirectSetText(this.Text),i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart));if(i.SelectionStart!=null&&i.SelectionEnd!=null){var s=this.GetTrueSelection(this.SelectionStart,this.SelectionEnd,this.Text,e);this.isTextEllipsis&&(this.SelectionStart=s.SelectionStart,this.SelectionEnd=s.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionEnd))}if(this.UIProcess.japInput==1)this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),this.UIProcess.japInput=!1;else if(this.FocusType!=2&&this.FocusType!=3&&this.FocusType!=7&&this.FocusType!=11){this.OldText=this.GetText(),this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.LastSelectionStart=this.OldSelectionStart,this.LastSelectionEnd=this.OldSelectionEnd;if(!this.MultiLine){this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.OldSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.OldSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.OldSelectionStart,this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.OldSelectionEnd;var o=this;setTimeout(function(){o.DropDownEditData.SelectionStart=o.SelectionStart,o.DropDownEditData.SelectionEnd=o.SelectionEnd},0)}}this.ReadOnly==1&&this.FocusType==0&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),(i.SetSelection==1||this.isTextEllipsis)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),this.IsCausedByImplementingDrop&&(this.IsCausedByImplementingDrop=!1),this.FocusExit&&(this.UIProcess.MoveControl(this.InputElement,!0),this.FocusExit=!1),this.isTextEllipsis&&(this.isTextEllipsis=!1)},e.prototype.SetInnerFocus=function(e){e!==null&&e!==undefined?this.FocusType=e:this.FocusType=3,this.InputElement.focus(),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype.LoseFocus=function(e){t.CoreUtility.IsIE()||(this.IsActive=!1),this.FireKeyExit(),t.CoreUtility.IsIE()&&this.ImeMode&&this.ReadingImeOperation();if(t.CoreUtility.IsIE())this.ImeMode?(this.ImeInput("LoseFocusInput",undefined,e),this.ImeSelectTimes=0):this.Text!=this.GetText()&&this.InternalSetText(this.Text,!0);else{this.ImeMode&&this.ImeInput("ReInput",!0,e);if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){var n=this.Text;n=n.replace(/\\/g,"\\\\"),this.MultiLine?(n=n.replace(/\r/g,"\\r"),n=n.replace(/\n/g,"\\n")):(n=n.replace(/\r\n/g,""),n=n.replace(/\r/g,""),n=n.replace(/\n/g,"")),this.InternalSetText(n,!0)}}this.HasFocus=!1;if(this._autoComplete.IsVisible()){if(this._autoComplete.GetIsMouseOnList())return;this._autoComplete.HideDropdown()}this.FocusType!=7&&(this.FocusType=0);var r;t.CoreUtility.IsIE()?r=this.GetText():r=this.hideText;if(this.OldText!=r&&!this.UIProcess.japInput){this.OldText=this.Text,t.CoreUtility.IsIE()&&(this.Text=this.GetText(),this.SetHideText(this.GetText())),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);if(!this.SystemChange||this.oldTextValue!=this.GetText())this.SystemChange=!0}else this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.hideText!=this.GetText()&&t.CoreUtility.IsIE()&&this.SetHideText(this.GetText())},e.prototype.FireKeyExit=function(){this.EventInfo!=null&&this.EventInfo.Type=="KeyExit"&&(this.UIProcess.FireEvent(this,this.EventInfo.Name,this.EventInfo.Args,this.EventInfo.Type),this.FocusType=4,this.EventInfo=null)},e.prototype.GetTruePosition=function(e,t,n,r){var i=this.EllipsisString.GetLength();if(e<=r)return e;if(e>=r+i)return t.GetLength()-n.GetLength()+e;var s=t.GetLength()-n.GetLength()+i,o=Math.floor((e-r)*s/i)+r;return o},e.prototype.DealEllipsis=function(e,n,r,s){this.isTextEllipsis=!1;if(e||n==i.None)return;this.InternalDirectSetText(this.Text);var o=n,u=0,a=0,f=0,l=0,c=s.value,h=s.value,p="",d="",v=0,m=!0;s.value=c;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth){this.isTextEllipsis=!0,s.value=r;var g=r;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth)g="",c=r,h=r;else if(o==i.EllipsisPath){var y=h.LastIndexOf("\\");y!=-1&&(s.value=g+h.substr(y),t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)<=s.clientWidth&&(g=s.value,c=h.Substring(0,y),o=i.EllipsisEnd))}s.value=c+g;do u=s.value.GetLength(),a=Math.ceil(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)/u),f=t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)-s.clientWidth,l=Math.ceil(f/a),o==i.EllipsisEnd?(s.value=c.Substring(0,c.GetLength()-l)+g,c=c.Substring(0,c.GetLength()-l)):o==i.EllipsisPath&&(v=Math.ceil((c.GetLength()-l)/2),p=c.substr(0,v),d=c.substr(v+l),s.value=p+g+d,c=p+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth);var b=c.GetLength();do o==i.EllipsisEnd?(s.value=h.Substring(0,b+1)+g,b+=1):o==i.EllipsisPath&&(m?(d=h.substr(h.GetLength()-d.GetLength()-1),m=!1):(p=h.substr(0,p.GetLength()+1),m=!0),s.value=p+g+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)==s.clientWidth);o==i.EllipsisEnd?(s.value=h.Substring(0,b-1)+g,this.TextHeadLength=b-1):o==i.EllipsisPath&&(m?p=h.substr(0,p.GetLength()-1):d=h.substr(h.GetLength()-d.GetLength()+1),s.value=p+g+d,this.TextHeadLength=p.GetLength())}},e.prototype.ImeInput=function(e,n,r,i){if(i)var s=this.Text,o=this.SelectionEnd,u=this.SelectionStart;var a;e=="DirectInput"&&!n?a=this.InputElement.value:e=="LoseFocusInput"&&this._getInputValueWithPlaceHolder()!=this.GetText()?a=this._getInputValueWithPlaceHolder():a=this.GetText();if(a==this.Text)return this.lastValue=this.Text,r!=null&&t.Utility.PreventDefault(r),this.ImeMode=!1,!1;if(t.CoreUtility.IsIE()&&this.HasValidatedImeInput){this.InternalSetText(a,!0);if(i){var f=this.Text;if(s!==f){var l=u+f.length-(s.length-(o-u));this.SetSelection(l,l)}}return!1}var c;if(this.Text!=""){var h=Math.min(this.SelectionStart,this.SelectionEnd),p=Math.max(this.SelectionStart,this.SelectionEnd),d=this.Text;t.CoreUtility.IsIE()||(d=this.GetDisPlayText(this.Text));if(p<d.GetLength()){var v=d.Substring(p,d.GetLength()),m=a.IndexOf(v);m!=-1?c=a.Substring(h,a.GetLength()-v.GetLength()):c=""}else c=a.Substring(h,a.GetLength())}else c=a;c!=""&&!this.MultiLine&&!this._autoComplete.IsDataListEmpty()&&this.EnableAutoComplete&&this._autoComplete.KeyUp(null,!0),e=="ReInput"&&(n?c=c.Substring(0,c.GetLength()):c=c.Substring(0,c.GetLength()-1));if(e=="Record")return c;var g=!1;if(e=="LoseFocusInput"){if(c==""){this.GetText()!=this.Text&&this._setInputValueWithPlaceHolder(this.Text);return}g=!0,this.UIProcess.japInput=!0}this.UIProcess.keypressResponse=!0,this.UIProcess.inputJap=!0,e=="ReInput"||!t.CoreUtility.IsIE()&&e=="ClickInput"?this.InnerKeyPress(c,!0,g):this.InnerKeyPress(c,!1,g),this.HasValidatedImeInput=!0,this.UIProcess.inputJap=!1,this.UIProcess.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(e=="ReInput"||e=="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=8},e.prototype.CanUndo=function(){return this.IsChangedByDropDownEdit?(this.IsUndoAfterDel?this.BuffText=this.GetText():this.LastText=this.GetText(),this.IsChangedByDropDownEdit=!1,!0):this.IsUndoAfterDel?this.GetText()!=this.BuffText:this.GetText()!=this.LastText},e.prototype.GetCookie=function(e){var t=document.cookie.split("; ");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(e==r[0]&&r[1]!=null)return window.unescape(r[1])}return null},e.prototype.SetCookie=function(e,t){var n=new Date(2020,8,20);if(document.cookie.IndexOf(e)==-1){if(t!="")while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");document.cookie=e+"="+window.escape(t)+"; expires="+n.toGMTString()}else{var r=document.cookie.split("; "),i="";for(var s=0;s<r.length;s++){var o=r[s].split("=");if(e==o[0]){if(o[1]!=null){i=window.unescape(o[1]);break}document.cookie=e+"="+window.escape(t.replace(",","@#GCD#@"))+"; expires="+n.toGMTString();return}}if(t!=""){while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");var u=i.split(","),a=!1;for(var f=0;f<u.length;f++)u[f]==t&&(a=!0);if(!a){i=t+","+i;var l=i.split(",");if(l.length>this.MaxHistoryCount){var c="";for(var h=0;h<this.MaxHistoryCount;h++)h!=this.MaxHistoryCount-1?c+=l[h]+",":c+=l[h];i=c}document.cookie=e+"="+window.escape(i)+"; expires="+n.toGMTString()}}}},e.prototype.DelCookie=function(e){document.cookie=e+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},e.prototype.DeleteItem=function(e){while(e.IndexOf("&nbsp;")!=-1)e=e.replace("&nbsp;"," ");var t=new Date(2020,8,20),n;this.AutoCompleteType!="None"?n=this.GetCookie(this.AutoCompleteType):n=this.GetCookie(this.GetId());if(n!=null)try{var r=n.split(","),i=n.split(",");if(r.length>0){var s;for(s=0;s<r.length;s++){while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(r[s].IndexOf("&")!=-1){var o=r[s],u="";while(o.IndexOf("&")!=-1){o=o.replace("&","&amp;");var a=o.IndexOf("&");u+=o.Substring(0,a+5),o=o.Substring(a+5,o.GetLength())}o.IndexOf("&")==-1&&o!=""&&(u+=o),r[s]=u}while(r[s].IndexOf("<")!=-1)r[s]=r[s].replace("<","&lt;");while(r[s].IndexOf(">")!=-1)r[s]=r[s].replace(">","&gt;");if(r[s]==e)break}if(s<i.length&&i.length>1){var f;for(f=s;f<i.length-1;f++)i[f]=i[f+1];i[r.length-1]=null;var l="";for(f=0;f<i.length-1;f++)f!=i.length-2?l+=i[f]+",":l+=i[f];if(this.AutoCompleteType!="None"){document.cookie=this.AutoCompleteType+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.AutoCompleteType).sort();for(s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}else{document.cookie=this.GetId()+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.GetId()).sort();for(s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}}else this._autoComplete.SetDataList([]),this.AutoCompleteType!="None"?document.cookie=this.AutoCompleteType+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;":document.cookie=this.GetId()+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"}}catch(h){}},e.prototype.GetItem=function(e,t){if(this.IsFromServer){var n;this.AutoCompleteType!="None"&&(n=this.GetCookie(this.AutoCompleteType));if(n!=null)try{var r=n.split(","),i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;for(var s=0;s<i;s++)while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null}var r=this._historyList;r=r.sort();if(r!=null)try{var i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;t!==undefined&&t==="focus"&&(i=r.length);if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null},e.prototype.ResetData=function(e){this.SetText(e.ResetData)},e.prototype.ReadingImeOperation=function(){if(this.RubyText=="")return;t.Utility.FireEvent(this,this.readingImeStringOutputEvent,{readingString:this.RubyText},"readingImeStringOutput"),this.prevval="",this.RubyText=""},e.prototype.ReadingImeKeyUpProcess=function(e,n,r){var i=this.ImeMode?this.InputElement.value:this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}var u=s.Substring(this.SelectionStart,s.GetLength()),a=u,f;for(f=this.prevval.length;f>=0;f--)if(u.substring(0,f)==this.prevval.substring(0,f)){a=u.substring(f);break}this.prevval=u;if(i==this.Text&&e!=13&&!r.altKey)this.prevval="",this.RubyText="";else if(e!=32&&e!=229&&!(e>=112&&e<=123)&&e!=37&&e!=39&&e!=38&&e!=40&&e!=27&&e!=28&&e!=29&&e!=8){var l=this.ConvertReadingIMEString(a,n);t.CoreUtility.IsIE()&&(this.ImeMode?((e==192||e==219||e==221)&&a.length==1&&l.length==2&&this.RubyText.charAt(this.RubyText.length-1)==l.charAt(0)&&(l=l.charAt(1)),this.RubyText+=l):this.ReadingImeOperation())}},e.prototype.IsValidReadingString=function(e){if(e===undefined||e===null||e.length===0)return!1;for(var t=0;t<e.length;t++)if(!this.IsValidCharacter(e[t]))return!1;return!0},e.prototype.IsValidCharacter=function(e){var n=t.CharProcess.CharEx;if(n.IsSpace(e))return!0;var r=n.GetCharType(e),i=r&~n.Ctype.FullWidth;return i==n.Ctype.Hiragana||i==n.Ctype.Katakana||i==n.Ctype.UpperCase||i==n.Ctype.LowerCase||i==n.Ctype.Numeric||i==n.Ctype.Symbol||i==n.Ctype.MathSymbol||i==n.Ctype.Punctuation||n.CharCategory._jpnMixed.indexOf(e)!==-1?!0:!1},e.prototype.UpdateReadingIME=function(e){this.RubyText=this.ConvertReadingIMEString(e),this.ReadingImeOperation()},e.prototype.ConvertReadingIMEString=function(e,n){n===undefined&&(n=t.CharProcess.CharEx);var r="";for(var i=0;i<e.length;i++){var s=e.charAt(i),o=n.ToHalfKatakana(s);s=="\u309b"&&(o="\uff9e"),s=="\u309c"&&(o="\uff9f"),o=="\uff65"&&(o=""),r+=o}return r},e.prototype.AddAllEventsHandler=function(){var e=this;if(this.GetInputElement()!=null){var r=function(n){t.GlobalEventHandler.OnMouseDown(e,n)},i=function(n){t.GlobalEventHandler.OnMouseUp(e,n)},s=function(n){t.GlobalEventHandler.OnMouseOver(e,n)},o=function(n){t.GlobalEventHandler.OnSelectStart(e,n)},u=function(n){t.GlobalEventHandler.OnKeyDown(e,n)},a=function(n){t.GlobalEventHandler.OnKeyPress(e,n)},f=function(n){t.GlobalEventHandler.OnKeyUp(e,n)},l=function(n){t.GlobalEventHandler.OnDblClick(e,n)},c=function(n){t.GlobalEventHandler.OnHTML5BeforeCopy(e,n)},h=function(n){t.GlobalEventHandler.OnHTML5Cut(e,n)},p=function(n){t.GlobalEventHandler.OnHTML5Paste(e,n)},d=function(n){t.GlobalEventHandler.OnDragStart(e,n)},v=function(n){t.GlobalEventHandler.OnDragEnd(e,n)},m=function(n){t.GlobalEventHandler.OnMouseOut(e,n)},g=function(n){t.GlobalEventHandler.OnDrop(e,n)},y=function(n){t.GlobalEventHandler.OnTouchStart(e,n)},b=function(n){t.GlobalEventHandler.OnTouchEnd(e,n)},w=function(n){t.GlobalEventHandler.OnSelect(e,n)};if(t.CoreUtility.safari){var E=function(t){e._safariDropText=getSelection().toString()},S=function(t){e._safariDropText=null};this.GetJQueryInputElement().on({"dragenter.imtextbox":E,"dragleave.imtextbox":S})}var x=function(n){t.GlobalEventHandler.OnDragEnter(e,n)},T=function(n){t.GlobalEventHandler.OnDragLeave(e,n)};if(t.CoreUtility.IsIE7OrLater()&&!t.CoreUtility.IsIE11OrLater()){var N=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"onpropertychange.imtextbox":N})}else{var C=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"propertychange.imtextbox":C})}var k=function(n){t.GlobalEventHandler.OnCompositionStart(e,n)},L=function(n){t.GlobalEventHandler.OnCompositionUpdate(e,n)},A=function(n){t.GlobalEventHandler.OnCompositionEnd(e,n)};if(t.CoreUtility.IsIE10OrLater()){var O=function(n){t.GlobalEventHandler.OnMSPointerUp(e,n)},M=function(n){t.GlobalEventHandler.OnMSPointerDown(e,n)},_=function(n){t.GlobalEventHandler.OnMSGestureTap(e,n)};this.GetJQueryInputElement().on({"MSPointerUp.imtextbox":O,"MSPointerDown.imtextbox":M,"MSGestureTap.imtextbox":_})}var D=function(n){t.GlobalEventHandler.OnEditFieldLoseFocus(e,n)},P=function(n){t.GlobalEventHandler.OnFocusOut(e,n)},H=function(n){t.GlobalEventHandler.OnEditFieldFocus(e,n)},B=function(n){t.GlobalEventHandler.OnActivate(e,n)},j=function(n){t.GlobalEventHandler.OnDeActivate(e,n)};if(t.CoreUtility.IsPad()){var F=function(n){t.GlobalEventHandler.OnInput(e,n)};this.GetJQueryInputElement().on({"input.imtextbox":F})}this.GetJQueryInputElement().on({"mousedown.imtextbox":r,"mouseup.imtextbox":i,"selectstart.imtextbox":o,"keydown.imtextbox":u,"keypress.imtextbox":a,"keyup.imtextbox":f,"dblclick.imtextbox":l,"beforecopy.imtextbox":c,"cut.imtextbox":h,"paste.imtextbox":p,"dragstart.imtextbox":d,"dragend.imtextbox":v,"mouseout.imtextbox":m,"drop.imtextbox":g,"touchstart.imtextbox":y,"touchend.imtextbox":b,"select.imtextbox":w,"dragenter.imtextbox":x,"dragleave.imtextbox":T,"compositionstart.imtextbox":k,"compositionupdate.imtextbox":L,"compositionend.imtextbox":A,"blur.imtextbox":D,"focusout.imtextbox":P,"focus.imtextbox":H,"activate.imtextbox":B,"deactivate.imtextbox":j}),n(this.GetJQueryInputElement()[0].parentElement).on("mouseover",s)}},e.prototype.Input=function(e){try{this.ImeInput("DirectInput")}finally{this.ImeMode=!1}},e.prototype.KeyDown=function(e){var n=this,r=e.keyCode,i=new Object;i.Shift=!1,i.Ctrl=!1,i.Alt=!1,e.shiftKey&&(i.Shift=!0),e.ctrlKey&&(i.Ctrl=!0),e.altKey&&(i.Alt=!0),this.LastInputText=this.GetText(),this.isFuncKeyPressed=!1;if(!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete){var s=this._autoComplete.KeyDown(e);if(s!=null&&s==0)return}this.KeyDownAction=!0;if(r==229&&!this.IsJapanConvertKeyPress||r==13&&this.GetText()!=this.Text)return this.ImeMode=!0,!0;if(this.ImeMode){var o=i.Shift||i.Ctrl||r==20||r>=112&&r<=123;o=o||r==8&&!t.CoreUtility.IsIE(),o||(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1)}r==229&&this.IsJapanConvertKeyPress&&(this.IsJapanConvertKeyPress=!1);var u=new Object;i.Shift&&(r|=65536),i.Ctrl&&(r|=131072);if(i.Alt&&r===40)var a="DropDown";i.Alt&&(r|=262144);var f=!1,l;if(this.KeyActionList!=null)for(l=0;l<this.KeyActionList.length;l++)if(this.KeyActionList[l]==r.toString()){f=!0;break}if(a=="DropDown"||(r==262182||r==262184)&&!f)return!1;95<r&&r<106&&(r-=48);var c=this.SelectionStart,h=this.SelectionEnd,p=this.GetText(),d=this.BuffText,v=this.LastText,m=this.LastSelectionStart,g=this.LastSelectionEnd;this.MultiLine||(c=this.DropDownEditData.SelectionStart,h=this.DropDownEditData.SelectionEnd,p=this.DropDownEditData.Text,d=this.DropDownEditData.BuffText,v=this.DropDownEditData.LastText,m=this.DropDownEditData.LastSelectionStart,g=this.DropDownEditData.LastSelectionEnd),u=this.UIProcess.TextBoxKeyDown(r,i,this._getEditModeInternal(),this.Overwrite,c,h,this.ReadOnly,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.ExitOnLastChar,this.ExitOnLeftRightKey,this.MultiLine,this.PasswordMode,p,this.AcceptTab,this.AcceptReturn,d,v,m,g,a,e);if(u==null)return!1;if(u.inputChar!=null)return!0;u.InputTab==1&&(this.Text=this.GetText(),this.InnerKeyPress("	")),u.DelInclude&&(this.IsUndoAfterDel=!0,u.SerialDel||(this.BuffText=this.GetText(),this.LastSelectionStart=this.BuffText.GetLength(),this.LastSelectionEnd=this.BuffText.GetLength(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.BuffText.GetLength(),this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.BuffText.GetLength()))),u.Text!=null&&(u.Undo==1&&(this.LastText=this.Text,this.BuffText=this.LastText,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.BuffText=this.DropDownEditData.LastText)),this.DirectSetText(u.Text),this.MultiLine||(this.DropDownEditData.Text=u.Text));var y=this.GetSelectionLength();u.SelectionStart!=null&&(u.Undo==1&&(this.isFuncKeyPressed=!0,this.LastSelectionStart=this.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart)),this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionStart))),u.SelectionEnd!=null&&(u.Undo==1&&(this.LastSelectionEnd=this.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd)),this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionEnd)));var b=this.GetSelectionLength();if(u.KeyCode!=null){var w=new Object;return w.KeyCode=u.KeyCode,w}u.FocusType!=null&&(this.FocusType=u.FocusType),u.Overwrite!=null&&this.GetOverwrite()!=u.Overwrite&&(this._getEditModeInternal()==0?this._setEditModeInternal(1):this._getEditModeInternal()==1&&this._setEditModeInternal(0));if(u.EventInfo!=null)for(l=0;l<u.EventInfo.length;l++)u.EventInfo[l]!=null&&(u.EventInfo[l].Type=="KeyExit"?this.EventInfo=u.EventInfo[l]:this.UIProcess.FireEvent(this,u.EventInfo[l].Name,u.EventInfo[l].Args,u.EventInfo[l].Type));return u.System!=null?(setTimeout(function(){u.System&&n.InputElement.value===""&&n.Clear()},0),u.System):(u.SetSelection==1&&(y==0&&b!=0?t.Utility.ShouldFireOnSelectStart=!0:t.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),t.Utility.ShouldFireOnSelectStart=!1),!1)},e.prototype.KeyPress=function(e,n,r){var i=e;if(!t.CoreUtility.IsIE()&&this.ImeMode){var s=n.keyCode==192&&n.altKey;if(s){this.ImeInput("ReInput",!0,n),this.ImeSelectTimes=0,this.ImeMode=!1;return}}if(!t.CoreUtility.IsIE()&&n.charCode==0){var o=n.keyCode||n.charCode;if(o=!this.MultiLine||!this.AcceptReturn&&this.MultiLine&&!n.ctrlKey)return!0}return this.InnerKeyPress(i,r)},e.prototype.KeyUp=function(e){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&(e.keyCode!=8&&e.keyCode!=46&&e.keyCode!=9||this.GetText()!=""?this.isFuncKeyPressed?this._autoComplete.HideDropdown():this.LastInputText!=this.GetText()&&this.GetText()!=""&&this._autoComplete.KeyUp(e):this._autoComplete.GetIsDeleteItem()||this._autoComplete.HideDropdown(),this._autoComplete.SetIsDeleteItem(!1)),this.KeyDownAction=!1;var n=e.keyCode,r=t.CharProcess.CharEx;n==13&&this._getInputValueWithPlaceHolder()!=this.Text&&(t.CoreUtility.IsIE()&&this.ImeMode?this.HasValidatedImeInput=!1:t.CoreUtility.IsIE()||(this.ImeMode=!0));if(this.ImeMode==1){var i=this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength()),n==13?(this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0):n>=48&&n<=57||n>=96&&n<=105?(n>=96&&(n-=48),s=r.ToHalfWidth(s),s!=String.fromCharCode(n)&&!this.ImeSelect?this.HasValidatedImeInput=!1:s==String.fromCharCode(n)&&this.ImeSelectTimes<1?this.HasValidatedImeInput=!1:this.ImeSelect||(this.ImeInput("ReInput",undefined,e),this.HasValidatedImeInput=!1,this.ImeMode=!0),this.ImeSelectTimes=0):n==32?this.ImeSelect==0&&(this.ImeSelectTimes==1?this.ImeSelect=!0:r.ToHalfWidth(s)!=String.fromCharCode(n)?this.ImeSelectTimes++:this.HasValidatedImeInput&&(this.UIProcess.inputJap=!0,t.CoreUtility.IsIE()&&(this.HasValidatedImeInput=!1),this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0)):n>=65&&n<=90?(this.ImeSelectTimes=0,this.HasValidatedImeInput=!1):n==32||n==106||n==107||n==109||n==173&&t.CoreUtility.IsFireFox4OrLater()||n==110||n==111||n==219||n==220||n==221||n==222||n>=186&&n<=192||n==226?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput",undefined,e),this.ImeSelectTimes=0,t.CoreUtility.IsIE()&&(this.HasValidatedImeInput=!1)):n==40||n==38?this.ImeSelect==0&&this.ImeSelectTimes==1&&(this.ImeSelect=!0):n==8||n==46?this.ImeSelectTimes=0:n==27?this.ImeSelectTimes=0:n==244?this.IsJapanConvertKeyPress=!0:!t.CoreUtility.IsIE()&&n==243?(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1):t.CoreUtility.IsIE()&&n==229&&(this.HasValidatedImeInput=!1)}n==242&&this.ImeInput("ReInput",!0,e),this.ReadingImeKeyUpProcess(n,r,e);if(this.UIProcess.keyupResponse==1){this.UIProcess.keyupResponse=!1;var u=this.UIProcess.TextBoxKeyUp(this.InputElement,this.MultiLine,this.SelectionStart,this.SelectionEnd,this.GetText()),a=this.SelectionStart,f=this.SelectionEnd,l=!1,c=!1;this.MultiLine||(a=this.DropDownEditData.SelectionStart,f=this.DropDownEditData.SelectionEnd),u.SelectionStart!=null&&this.SelectionStart!=u.SelectionStart&&(l=!0,this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),u.SelectionEnd!=null&&this.SelectionEnd!=u.SelectionEnd&&(this.SelectionEnd=u.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),c=!0,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)));var h=this._getInputValueWithPlaceHolder(),p=this.MultiLine?this.Text:this.GetSingleText(this.Text),d=p.GetLength()-h.GetLength(),v;this.MultiLine?this.PasswordMode?d!=0&&(v=this.Text,l&&c?p=v.Substring(0,this.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.SelectionStart+d,p=v.Substring(0,a)+v.Substring(f,v.GetLength()))):p=this.GetText():(d!=0&&(v=this.DropDownEditData.Text,l&&c?this.DropDownEditData.Text=v.Substring(0,this.DropDownEditData.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.GetMultiPosition(v,this.SelectionStart+d),this.DropDownEditData.Text=v.Substring(0,a)+v.Substring(f,v.GetLength()))),p=this.GetSingleText(this.DropDownEditData.Text)),u.SystemEdit==1&&(this.Text=p,this.SetHideText(p)),u.Text!=null&&this.InternalSetText(u.Text,!0),u.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}},e.prototype.PropertyChange=function(e){e!=null&&t.CoreUtility.IsIE10OrLater()&&e.propertyName=="value";if(this.DragEdit)this.DragEdit=!1,this.MultiLine||this.Text!=this.GetText()&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionEnd,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart),this.OldText=this.Text,this.Text=this.GetText(),this.SetHideText(this.GetText()),this.SystemChange=!0,this.LastText=this.OldText,this.SetSelectionLength(0);else if(this.DropEdit){this.DropEdit=!1,this.FocusType=11,this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength();var n=this._getInputValueWithPlaceHolder();if(!this.MultiLine){var r,i=this.GetSingleText(this.DropDownEditData.Text),s=n.GetLength()-i.GetLength();this.PasswordMode?r=this.DropText:r=n.Substring(this.SelectionEnd-s,this.SelectionEnd),s!=0&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd-s),this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+r+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionStart,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart+s),this.PasswordMode&&(n=this.GetSingleText(this.DropDownEditData.Text))}else if(this.PasswordMode){var o=this.SelectionEnd-this.DropText.GetLength();n=this.Text.Substring(0,o)+this.DropText+this.Text.Substring(o,this.Text.GetLength())}this.OldText=this.Text,this.Text=n,this.SetHideText(n),this.SystemChange=!0,this.LastText=this.OldText}else!this.MultiLine&&!this.isTextEllipsis&&!this.PasswordMode&&this.SetHideText(this.GetText());return!1},e.prototype.MouseDown=function(e){this._isInnerKeyPressCall=!1;var n=t.Utility.GetMouseButton(e);this.FocusedWhenMouseDown=document.activeElement==e.target,this.MouseDownOnClearButton=t.CoreUtility.IsMouseDownOnClearButton(e),t.CoreUtility.IsIE()||(this.IsActive=!0,this.ImeMode&&n==0&&(this.IsImplementImeInput=!0)),this.MouseButton=n,this.BeforeDragSelectionStart=this.SelectionStart,this.BeforeDragSelectionEnd=this.SelectionEnd;if(this.MouseButton==2)this.FocusType!=3&&(this.FocusType=1);else{this.isLeftMouseButtonPressed=!0,this.FocusType!=3&&(this.FocusType=1);try{var r=t.Utility.GetSelectionText(this.InputElement);r!=""&&(this.IsMouseDown=!0,t.Utility.ClearSelection(this.InputElement))}catch(i){}}var s=this.UIProcess.TextBoxMouseDown(this.InputElement,n);if(s==null)return;s.SelectionStart!=null&&(this.SelectionStart=s.SelectionStart),s.SelectionEnd!=null&&(this.SelectionEnd=s.SelectionEnd)},e.prototype.MouseUp=function(e){var n=null;t.CoreUtility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),this.IsMouseDown=!1;if(t.CoreUtility.IsIE()&&(this.ImeMode||this.Text!=this.GetText()))this.ImeMode?(this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0):this.InternalSetText(this.Text,!0);else if(!t.CoreUtility.IsIE()&&(this.ImeMode||this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder())){if(!this.IsImplementImeInput)return;this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0;if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){this.IsImplementImeInput=!1;var r=this.Text;this.MultiLine?(r=r.replace(/\r/g,"\\r"),r=r.replace(/\n/g,"\\n")):(r=r.replace(/\r\n/g,""),r=r.replace(/\r/g,""),r=r.replace(/\n/g,""));var i=this;window.setTimeout(function(){i.InternalSetText(r,!0)},0),this.Select()}}else{this.isLeftMouseButtonPressed=!1,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd;var s=this.SelectionStart,o=this.SelectionEnd,u=this.GetText(),a=null;n!=null&&n.Ctrl!=null&&(a=n.Ctrl);var f=this.UIProcess.TextBoxMouseUp(this.InputElement,s,o,this.MouseButton,this.MultiLine,u,a,this.HighlightText,e);if(f==null)return;f.SelectionStart!=null&&(this.SelectionStart=f.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),f.SelectionEnd!=null&&(this.SelectionEnd=f.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),f.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}this.MouseButton=0,this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=e.target.value.length>0),this.HandleClearButton(e)},e.prototype.MouseWheel=function(e){},e.prototype.ShouldCancelMouseWheelDefaultBehavior=function(){return!1},e.prototype.MouseOut=function(){if(this.IsMouseDown!=1)return;if(this.MouseUpPointerType!==4&&this.MouseUpPointerType!=undefined&&this.MouseUpPointerType!=="mouse")return;var e=Math.min(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),n=Math.max(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),r=this.GetText().Substring(e,n);r!=""&&(this.SetSelection(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),t.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},e.prototype.DoubleClick=function(){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly&&this._autoComplete.ShowDropdown();var e=this.UIProcess.TextBoxDoubleClick(this.InputElement,this.SelectionStart,this.GetText());return e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)),this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),e.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),!0},e.prototype.DragStart=function(e){this.PasswordMode?e.dataTransfer.effectAllowed="none":this.DragEdit=!0},e.prototype.DragEnd=function(){this.DragEdit=!0},e.prototype.DragEnter=function(){this.isTextEllipsis&&this.InternalDirectSetText(this.GetText())},e.prototype.DragLeave=function(){this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.MouseMove=function(e){},e.prototype.MouseOver=function(){var e=!(this.HasFocus||this.MultiLine||!this.OverflowTip);if(e){var r=this.InputElement,i=this.GetText();this.isTextEllipsis&&(i=this.Text);if(this.PasswordMode){var s="";for(var o=0;o<i.GetLength();o++)s+=this.PasswordChar;i=s}var u=t.CoreUtility.MeasureText(i,r).Width;u>r.clientWidth?(this.ToolTip=n(this.InputElement.parentElement).wijtooltip({content:i,position:{my:"left bottom",at:"left+1 top"}}),n(this.InputElement.parentElement).wijtooltip("show")):e=!1}e||this._destoryOverflowTip()},e.prototype._destoryOverflowTip=function(){this.ToolTip!=null&&(this.ToolTip=null,n(this.InputElement.parentElement).wijtooltip("destroy"))},e.prototype._isinsertGroup=function(e){return e==0||e==2},e.prototype._isOverwriteGroup=function(e){return e==1||e==3},e.prototype.InnerKeyPress=function(e,t,n){var r=e,i;this.ImeMode||this.isPasting?i=this.Text:(i=this._getInputValueWithPlaceHolder(),i!=""&&(i=this.GetText())),this.isPasting=!1;var s=this.SelectionStart,o=this.SelectionEnd;this.MultiLine||(s=this.DropDownEditData.SelectionStart,o=this.DropDownEditData.SelectionEnd);var u=this.UIProcess.TextBoxKeyPress(s,o,r,i,this.MaxLength,this.LengthAsByte,this.ExitOnLastChar,this.Overwrite,this.MultiLine,this.MaxLineCount,this.CountWrappedLine);u.Text!=null&&(u.DelInclude&&(this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),this.DirectSetText(u.Text,t),this.MultiLine||(this.DropDownEditData.Text=u.Text)),u.SelectionStart!=null&&(this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(u.Text,u.SelectionStart))),u.SelectionEnd!=null&&(this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(u.Text,u.SelectionEnd))),u.SetSelection==1&&!t&&!n&&(this._isInnerKeyPressCall=!0,this.SetSelection(this.SelectionStart,this.SelectionEnd));if(u.EventInfo!=null)for(var a=0;a<u.EventInfo.length;a++)u.EventInfo[a]!=null&&this.UIProcess.FireEvent(this,u.EventInfo[a].Name,u.EventInfo[a].Args,u.EventInfo[a].Type);return u.SystemEdit==1?!0:!1},e.prototype._isSupportClipBoard=function(){if(!this.GetUseClipboard())return!0;if(t.CoreUtility.IsIE())return!0;if(t.CoreUtility.IsFireFox4OrLater())try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return;var n=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!n)return;n.addDataFlavor("text/unicode"),e.getData(n,e.kGlobalClipboard);var r=new Object,i=new Object;try{n.getTransferData("text/unicode",r,i)}catch(s){return null}r&&(Components.interfaces.nsISupportsWString?r=r.value.QueryInterface(Components.interfaces.nsISupportsWString):Components.interfaces.nsISupportsString?r=r.value.QueryInterface(Components.interfaces.nsISupportsString):r=null);if(r)return r.data.substring(0,i.value/2)}catch(o){return!1}return!1},e.prototype.MSPointerUp=function(e){e!=null&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},e.prototype.CompositionStart=function(e){this.ImeMode=!0,this._lastCompositionText="",this._lastCompositionOffset=0,this._convertedOnLastUpdate=!1,this._cachedReadingString="",this._readingString="",this._compositionUpdateFired=!1},e.prototype.CompositionUpdate=function(e){this._compositionUpdateFired=!0;if(e.originalEvent.data===undefined||e.originalEvent.data.length===0)return;var t=this.InputElement.selectionStart-e.originalEvent.data.length;if(t>this._lastCompositionOffset){if(!this._convertedOnLastUpdate){var n=this._lastCompositionText.substring(0,t-this._lastCompositionOffset);this.IsValidReadingString(n)?this._cachedReadingString+=n:this._cachedReadingString+=this._readingString,this._readingString="",this._convertedOnLastUpdate=!0}}else this._convertedOnLastUpdate&&(this._convertedOnLastUpdate=!1);if(!this.IsValidReadingString(e.originalEvent.data))return;this._readingString=e.originalEvent.data},e.prototype.CompositionEnd=function(e){var n=this.HasValidatedImeInput;this.ImeMode=!0,this.HasValidatedImeInput=!1;var r=this,i=function(){try{r.ImeInput("DirectInput",undefined,e)}finally{r.ImeMode=!1}};t.CoreUtility.IsIE9OrLater()?i():setTimeout(i,0),this._compositionUpdateFired||this.CompositionUpdate(e),this._convertedOnLastUpdate=!1;var s=this._cachedReadingString+this._readingString;this._cachedReadingString="",this._readingString="";if(e.originalEvent.data.length===0||s.length===0)return;this.UpdateReadingIME(s);if(t.CoreUtility.IPad&&t.CoreUtility.safari||t.CoreUtility.chrome&&t.CoreUtility.GetClientOS()==="Android")this.HasValidatedImeInput=n,this.ImeMode=!1},e.prototype.SelectStart=function(e){if(this.ImeMode)return!1;if(this.isLeftMouseButtonPressed){var t=this.UIProcess.SelectStart(this.InputElement,e,this.MultiLine);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionEnd)))}},e.prototype.DragDrop=function(e){if(!t.CoreUtility.IsIE()&&this.ReadOnly)return!1;this.FFDragFlag=!1,t.CoreUtility.IsIE()||(this.FFDragFlag=!0),!t.CoreUtility.IsIE()&&!t.CoreUtility.safari&&this.SetInnerFocus();var n=t.Utility.GetSelectionStartPosition(this.InputElement),r=n,i=this.UIProcess.DragDrop(e,this.ExitOnLastChar,n,r,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,this.GetText());if(i==null)return;if(i.DropText!=null){var s,o;if(this.PasswordMode){var u=this.UIProcess.GetPasswordText(i.DropText,this.PasswordChar,this.MultiLine);t.CoreUtility.IsIE()?(window.event.dataTransfer.setData("Text",u),u!=window.event.dataTransfer.getData("Text")&&(s=this.GetText(),o=s+i.DropText,this.InternalSetText(o,!0),t.Utility.PreventDefault(window.event))):(s=this.GetText(),o=s+i.DropText,this.InternalSetText(o,!0,!0)),this.DropText=i.DropText}else if(t.CoreUtility.IsIE()){event.dataTransfer.setData("Text",i.DropText);if(i.DropText!=event.dataTransfer.getData("Text"))s=this.GetText(),o=s+i.DropText,this.InternalSetText(o,!0),t.Utility.PreventDefault(event);else{var a=this;setTimeout(function(){var e=a.GetText();a.InternalSetText(e,!0)},0)}}else s=this.GetText(),o=s+i.DropText,this.InternalSetText(o,!0,!0);this.DropEdit=!0}if(i.EventInfo!=null)for(var f=0;f<i.EventInfo.length;f++)i.EventInfo[f]!=null&&i.EventInfo[f].Name!=null&&(this.UIProcess.FireEvent(this,i.EventInfo[f].Name,i.EventInfo[f].Args,i.EventInfo[f].Type),i.EventInfo[f].Name==this.KeyExitEvent&&(this.FocusExit=!0));this.FFDragFlag=!1;var l=this,c=this.MultiLine,h=this.Ellipsis,p=this.EllipsisString,d=this.InputElement;return setTimeout(function(){l.InternalSetText(l.GetText()),l.DealEllipsis(c,h,p,d)},0),!0},e.prototype.MSGestureTap=function(e){if(this.Focused&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=this;setTimeout(function(){t.Focused&&t._autoComplete.ShowDropdown()},400)}},e.prototype.MSPointerDown=function(e){if(this.Focused&&(e.pointerType===e.MSPOINTER_TYPE_TOUCH||e.pointerType==="touch")&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=new MSGesture;t.target=e.target,t.addPointer(e.pointerId)}},e.prototype.GetShowLiterals=function(){return 1},e}();t.IMTextBox=l;var c=function(e){function r(n,r,i,s,o,u){e.call(this),this.isMulSelected=!1,this.isOverWrite=!1,this.ForwardSelection="None",this.isCtrlPress=!1,this.isCtrlClick=!1,this.isDblClick=!1,this.isTriClick=!1,this.isInputValid=!0,this.ctrlDelete=!1,this.ctrlBackspace=!1,this.IsDelInclude=!1,this.IsSerialDel=!1,this.StartPos=null,this.LastKey=null,this.keypressResponse=!1,this.systemEdit=!1,this.keyupResponse=!1,this.japInput=!1,this.inputJap=!1,this.IsKeyDown=!1,this.CurStart=0,this.CurEnd=0,this.control=u,this.Owner=u,this.Filter=new t.TextFilter(n,r),this.IsjQueryControl=o,this.PasswordMode=i,this.PasswordChar=s}return __extends(r,e),r.prototype.Reset=function(){this.Filter=new t.TextFilter(this.control.AutoConvert,this.control.Format),this.PasswordMode=this.control.PasswordMode,this.PasswordChar=this.control.GetPasswordChar()},r.prototype.TextBoxKeyDown=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){n.Ctrl?this.isCtrlPress=!0:this.isCtrlPress=!1;var N=new Object;switch(r){case 0:this.isOverWrite=!1;break;case 1:this.isOverWrite=!0;break;case 2:this.isOverWrite=!1;break;case 3:this.isOverWrite=!0}s!=o?this.isMulSelected=!0:this.isMulSelected=!1;var C;switch(x){case"Clear":return u||(N.SelectionStart=0,N.SelectionEnd=0,N.Text="",N.DelInclude=!0,this.IsDelInclude=!0),N;case"NextControl":return C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N;case"PreviousControl":return C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N}if(u&&e!=131117&&e!=131139&&e!=9&&e!=65545&&e!=131081&&e!=196617&&e!=131137&&e!=37&&e!=39&&e!=38&&e!=40)return N;var k;switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 117:case 65657:case 116:case 121:case 123:N.System=!0;break;case 45:var L;if(r===2)L=!1;else if(r===3)L=!0;else{L=!i;if(this.EditStatusChangedEvent!=""&&this.EditStatusChangedEvent!=null){var A=new Object;A.Name=this.EditStatusChangedEvent,A.Args=null,A.Type="EditStatusChanged",N.EventInfo=new Array,N.EventInfo[0]=A}}N.Overwrite=L;break;case 13:d&&y?(this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0):d&&!y?(N.System=!1,N.IsDoPostBack=!0):(this.keypressResponse=!0,this.keyupResponse=!1,N.System=!0);break;case 131085:d&&(this.systemEdit=!0,this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0);break;case 9:case 65545:d&&g&&!u?(this.keypressResponse=!0,N.InputTab=!0):(N.System=!0,C=new Object,this.Owner.KeyExitEvent!=""&&this.Owner.KeyExitEvent!=null&&(C.Name=this.Owner.KeyExitEvent,C.Args={Key:e==9?1:2},C.Type="KeyExit"),N.EventInfo=new Array,N.EventInfo[0]=C,d&&(N.SelectionStart=m.GetLength(),N.SelectionEnd=m.GetLength()));break;case 131081:C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 196617:C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 8:case 65544:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 46:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 131080:case 196616:this.isMulSelected?(this.keyupResponse=!0,this.ctrlBackspace=!0):(this.systemEdit=!0,this.keyupResponse=!0,N.System=!0),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131118:this.keyupResponse=!0,N.System=!0,this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0,N.KeyCode=39,this.ctrlDelete=!0;break;case 131139:case 131117:if(!v){var O;this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?this.Copy(m,s,o):N.System=!0}else N.System=!1;break;case 65581:case 131158:this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.TextBoxPaste(s,o,m,h,g,y,a,f,l,c,d):N.System=!0;break;case 131160:v?N.System=!1:(this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.Cut(m,s,o):N.System=!0);break;case 65582:s!=o?N=this.Cut(m,s,o):(this.systemEdit=!0,this.keyupResponse=!0,N.KeyCode=8),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131137:N=this.TextBoxSelectAll(m);break;case 131162:N=this.TextBoxUndo(m,b,w,E,S,s,o);break;case 65573:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65575:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65574:d?(this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0):(o>0&&(N.SelectionEnd=o-1),N.SetSelection=!0);break;case 65576:d?(this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0):(o<m.GetLength()&&(N.SelectionEnd=o+1),N.SetSelection=!0);break;case 65569:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65570:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 196645:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 196647:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65572:case 196644:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65571:case 196643:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 37:case 131109:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===0&&this.CurEnd==0&&(p===3||p===1)){var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart-=1,this.CurEnd=this.CurStart;if(s!==0||o!==0||p!==3&&p!==1)u||(this.keyupResponse=!0),N.System=!0;else{var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 39:case 131111:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===m.GetLength()&&this.CurEnd===m.GetLength()&&(p===3||p===2)){var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart+=1,this.CurEnd=this.CurStart;if(s!==m.GetLength()||o!==m.GetLength()||p!==3&&p!==2)u||(this.keyupResponse=!0),N.System=!0;else{var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 33:case 131105:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 34:case 131106:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 38:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 40:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 131108:case 36:this.keyupResponse=!0,N.System=!0;break;case 131107:case 35:this.keyupResponse=!0,N.System=!0;break;case 131112:case 131110:this.keyupResponse=!0,N.System=!0;break;case 27:this.control.Clear();break;case 393266:case 393267:case 393268:case 393269:case 393271:case 393272:case 393273:case 393264:case 393403:case 393285:case 393442:case 393293:case 393402:this.keypressResponse=!0,N.System=!0;break;default:}if(e!==undefined&&e!==null){if(e>=48&&e<=57||e>=65&&e<=90||e>=96&&e<=105||e==229||e==0||e==231)return this.keypressResponse=!0,N==null&&(N={}),N.System=!0,N.inputChar=!0,N;if(e==32||e==106||e==107||e==109||e==173&&t.CoreUtility.IsFireFox4OrLater()||e==110||e==111||e==219||e==220||e==221||e==222||e>=186&&e<=192||e==226||e==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.CoreUtility.IsIE()&&(e===61||e===59))return this.keypressResponse=!0,N.System=!0,N;if(T.shiftKey)var _=e-65536;if(_>=48&&_<=57||_>=65&&_<=90||_>=96&&_<=105||_==229)return this.keypressResponse=!0,N.System=!0,N;if(_==32||_==106||_==107||_==109||e==173&&t.CoreUtility.IsFireFox4OrLater()||_==110||_==111||_==219||_==220||_==221||_==222||_>=186&&_<=192||_==226||_==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.CoreUtility.IsIE()&&(_==61||_==59))return this.keypressResponse=!0,N.System=!0,N}return N},r.prototype.TextBoxKeyPress=function(e,r,i,s,o,u,a,f,l,c,h){if(this.keypressResponse==1){this.keypressResponse=!1,this.isInputValid=!0;var p=new Object,d=new Object,v="\r\n";if(!t.CoreUtility.IsIE()||parseInt(n.browser.version)>=9)v="\n";var m="";if(i=="	")m=i;else if(i=="\r"||i=="\n"){if(!l)return p.SystemEdit=!0,p;m=v}else if(i.GetLength()==1)m=this.Filter.Check(i);else{var g=this.Filter.CheckText(i);m=g.CheckedText,this.isInputValid=g.IsInputValid}if(e==r){if(o!=0){var y=o-this.GetLength(s,u);if(m==v)y<v.GetLength()&&o!=0&&(m="");else if(!f||f&&e==s.GetLength())o>this.GetLength(s,u)?m=this.MaxLengthCheck(m,y,u):m="";else if(f){var b=s.Substring(0,e),w=s.Substring(e,s.GetLength()),E=w.IndexOf(v);E!=-1&&(b+=w.Substring(E,w.GetLength())),y=o-this.GetLength(b,u),m=this.MaxLengthCheck(m,y,u)}}}else{var S=s.Substring(Math.min(e,r),Math.max(e,r));if(o!=0){var y=o-this.GetLength(s,u)+this.GetLength(S,u);m==v?y<v.GetLength()&&(m=""):m=this.MaxLengthCheck(m,y,u)}}if(c!=0&&l)if(c>=this.GetLinesCount(s,h)){var x=s.Substring(0,e),T=s.Substring(r,s.GetLength());if(this.PasswordMode){x=this.GetPasswordText(x,this.PasswordChar,l),T=this.GetPasswordText(T,this.PasswordChar,l);var N=this.GetPasswordText(m,this.PasswordChar,l);N=this.MaxLineCheck(x,T,N,c,h),m=m.Substring(0,N.GetLength())}else m=this.MaxLineCheck(x,T,m,c,h)}else m="";i!=""&&m==""&&(this.isInputValid=!1);var C=s;if(!f||m==v||e!=r){if(e>r){var k=e;e=r,r=k}e!=r&&(p.DelInclude=!0,this.IsDelInclude=!0),m!=""&&(C=s.Substring(0,e)+m+s.Substring(r,s.GetLength()))}else if(m!="")if(e==s.GetLength())C=s+m;else if(e+v.GetLength()<=s.GetLength()&&s.Substring(e,e+v.GetLength())==v)C=s.Substring(0,e)+m+s.Substring(e,s.GetLength());else{var L;if(o==0||!u)L=s.Substring(e,e+m.GetLength());else{var A=m.GetLength(),O=s.Substring(e,e+A),M=this.GetLength(O,u),_=this.GetLength(m,u);while(_>M&&A<=s.GetLength())A+=1,O=s.Substring(e,e+A),M=this.GetLength(O,u);L=s.Substring(e,e+A)}var E=L.IndexOf(v);E!=-1?C=s.Substring(0,e)+m+s.Substring(e+E,s.GetLength()):C=s.Substring(0,e)+m+s.Substring(e+L.GetLength(),s.GetLength())}p.Text=C,p.SetSelection=!0;if(this.isInputValid!=0||m.GetLength()>0)p.SelectionStart=e+m.GetLength(),p.SelectionEnd=p.SelectionStart;p.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=i,g.Type="invalidInput",p.EventInfo[0]=g}if(p.Text!=null&&a&&o!=0){var D=this.GetLength(p.Text.Substring(0,p.SelectionStart),u);if(D==o&&m!=""){var g=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");g!=null&&(p.EventInfo[1]=g.EventInfo,p.FocusType=g.FocusType,p.FocusExit=!0,p.SetSelection=!1)}}return p}return!1},r.prototype.TextBoxKeyUp=function(e,n,r,i,s){var o=new Object;this.IsKeyDown=!1,o.SelectionStart=t.Utility.GetSelectionStartPosition(e),o.SelectionEnd=o.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),this.systemEdit==1&&(this.systemEdit=!1,o.SystemEdit=!0);if(this.ctrlDelete||this.ctrlBackspace){var u;this.ctrlDelete?(u=o.SelectionStart,this.ctrlDelete=!1):this.ctrlBackspace&&(u=i,this.ctrlBackspace=!1),o.Text=s.Substring(0,r)+s.Substring(u,s.GetLength()),o.SelectionStart=o.SelectionEnd=r,o.SetSelection=!0}return o},r.prototype.TextBoxMouseDown=function(e,t){return this.isFocusing=!1,new Object},r.prototype.TextBoxMouseUp=function(e,n,r,i,s,o,u,a,f){var l=new Object;if(this.isFocusing){this.isFocusing=!1;if(a)return l}if(i==0){if(this.isDblClick&&!t.Utility.GrapeCityTimeout){this.isDblClick=!1,this.isTriClick=!0;if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength()}else t.Utility.GetSelectionText(this.control.InputElement)!=""||!s?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):t.Utility.GetSelectionText(this.control.InputElement)==""?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),document.selection&&f.y<document.selection.createRange().offsetTop&&(l.SelectionStart-=2),l.SelectionEnd=l.SelectionStart);if(!t.CoreUtility.IsIE()&&t.Utility.FuncKeysPressed.Ctrl)if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength();l.SelectionStart!=l.SelectionEnd&&(l.SetSelection=!0)}return l},r.prototype.GetLineEnds=function(e,r){var i=r,s=0,o="\r\n";if(!t.CoreUtility.IsIE()||parseInt(n.browser.version)>=9)o="\n";var u=i.IndexOf(o),a=new Object;while(u!=-1){if(e>=s&&e<s+u+o.GetLength())return a.start=s,a.end=s+u,a;s=s+u+o.GetLength(),i=i.Substring(u+o.GetLength(),i.GetLength()),u=i.IndexOf(o)}return a.start=s,a.end=r.GetLength(),a},r.prototype.ShowContextMenu=function(e,n){var r=new Object;return r.SelectionStart=t.Utility.GetSelectionStartPosition(e),r.SelectionEnd=r.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),r},r.prototype.TextBoxDoubleClick=function(e,n,r){this.isDblClick=!0,t.Utility.GrapeCityTimeout=!1,window.setTimeout(function(){t.Utility.GrapeCityTimeout=!0},500);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),i},r.prototype.SelectStart=function(e,n,r){this.isTriClick&&(this.isTriClick=!1);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart,i},r.prototype.Copy=function(e,n,r){if(n!=r){if(n>r){var i=n;n=r,r=i}var s=e.Substring(n,r),o=!0;this.Owner&&(this.Owner.MultiLine===!1&&(s=t.BaseUIProcess.UpdateCrLfString(s,this.Owner.AcceptsCrLf)),o=this.Owner.UseClipboard),t.CoreUtility.IsIE()?t.Utility.SetCopy(s,o):t.Utility.SetCopy(s,!1)}},r.prototype.TextBoxPaste=function(e,n,r,i,s,o,u,a,f,l,c,h,p){this.isInputValid=!0;var d=new Object,v=this.Owner?this.Owner.UseClipboard:!0;t.CoreUtility.IsIE()||(v=!1);var m=h==null?t.Utility.GetPasteData(v):h;t.CoreUtility.chrome&&(m=m.replace(/\r\n/g,"\n")),!p&&this.Owner&&this.Owner.MultiLine===!1&&(m=t.BaseUIProcess.UpdateCrLfString(m,this.Owner.AcceptsCrLf)),t.CoreUtility.IsIE9OrLater()&&this.Owner&&this.Owner.MultiLine===!0&&(m=t.BaseUIProcess.FilterReturnChar(m));if(m==null)return d;this.FireClientEvent("OnBeforePaste");var g=this.FormatCheck(m,s,o),y=g,b;if(u!=0){var w=this.GetLength(r.Substring(Math.min(e,n),Math.max(e,n)),a);b=u-this.GetLength(r,a)+w,y=this.MaxLengthCheck(g,b,a)}if(f!=0&&c)if(f>=this.GetLinesCount(r,l)){var E=r.Substring(0,e),S=r.Substring(n,r.GetLength());if(this.PasswordMode){E=this.GetPasswordText(E,this.PasswordChar,c),S=this.GetPasswordText(S,this.PasswordChar,c);var x=this.GetPasswordText(y,this.PasswordChar,c);x=this.MaxLineCheck(E,S,x,f,l),y=y.Substring(0,x.GetLength())}else y=this.MaxLineCheck(E,S,y,f,l)}else y="";var T=Math.min(e,n),N=Math.max(e,n);if(y!=""||p===!0)d.Text=r.Substring(0,T)+y+r.Substring(N,r.GetLength()),d.SelectionStart=T+y.GetLength(),d.SelectionEnd=d.SelectionStart;d.SetSelection=!0,e!=n&&(d.DelInclude=!0,this.IsDelInclude=!0),d.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var C=new Object;C.Name=this.control.InvalidInputEvent,C.Args=m,C.Type="invalidInput",d.EventInfo[0]=C}if(d.Text!=null)var k=this.GetLength(d.Text.Substring(0,d.SelectionStart),a);else var k=0;if(u!=0&&k==u&&i&&y!=""){var C=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");C!=null&&(d.EventInfo[1]=C.EventInfo,d.FocusType=C.FocusType,d.FocusExit=!0,d.SetSelection=!1)}return this.FireClientEvent("OnPaste"),d},r.prototype.Cut=function(e,t,n){var r=new Object;return t!=n&&this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),t<n?(r.SelectionStart=t,r.Text=e.Substring(0,t)+e.Substring(n,e.GetLength())):(r.SelectionStart=n,r.Text=e.Substring(0,n)+e.Substring(t,e.GetLength())),r.SelectionEnd=r.SelectionStart,r.SetSelection=!0,r.Text!=e&&(r.DelInclude=!0,this.IsDelInclude=!0),t!=n&&this.FireClientEvent("OnCut"),r},r.prototype.TextBoxUndo=function(e,t,n,r,i,s,o){var u=new Object;return this.IsDelInclude?e!=t&&(u.Text=t,u.SelectionStart=s,u.SelectionEnd=o,u.SetSelection=!0,u.DelInclude=!0,u.Undo=!0):e!=n&&(u.Text=n,u.SelectionStart=r,u.SelectionEnd=i,u.SetSelection=!0,u.Undo=!0),this.StartPos=null,this.LastKey=null,u},r.prototype.Delete=function(e,t,n,r){var i=new Object;return n<r?(i.SelectionStart=n,i.Text=t.Substring(0,n)+t.Substring(r,t.GetLength())):(i.SelectionStart=r,i.Text=t.Substring(0,r)+t.Substring(n,t.GetLength())),i.SelectionEnd=i.SelectionStart,i.SetSelection=!0,i.Text!=t&&(i.DelInclude=!0,this.IsDelInclude=!0),i},r.prototype.TextBoxSelectAll=function(e){var t=new Object;return t.SelectionStart=0,t.SelectionEnd=e.GetLength(),t.SetSelection=!0,t},r.prototype.DragDrop=function(e,t,n,r,i,s,o,u,a,f){this.isInputValid=!0;var l=new Object,c=this.FormatCheck(e),h=c,p=0;i!=0&&(p=i-this.GetLength(f,s),h=this.MaxLengthCheck(c,p,s));if(o!=0&&a)if(o>=this.GetLinesCount(f,u)){var d=f.Substring(0,n),v=f.Substring(r,f.GetLength());if(this.PasswordMode){d=this.GetPasswordText(d,this.PasswordChar,a),v=this.GetPasswordText(v,this.PasswordChar,a);var m=this.GetPasswordText(h,this.PasswordChar,a);m=this.MaxLineCheck(d,v,m,o,u),h=m.Substring(0,h.GetLength())}else h=this.MaxLineCheck(d,v,h,o,u)}else h="";l.DropText=h,l.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=c,g.Type="invalidInput",l.EventInfo[0]=g}if(this.GetLength(c,s)>=p&&i!=0&&t&&h!=""){var g=new Object;this.Owner.KeyExitEvent!=""&&this.Owner.KeyExitEvent!=null&&(g.Name=this.Owner.KeyExitEvent,g.Args=new Object,g.Args.Key=9,g.Type="KeyExit"),l.EventInfo[1]=g}return l},r.prototype.TextBoxFocus=function(e,n,r,i,s,o){var u=new Object;this.isFocusing=!0,e===9?(u.SelectionStart=0,u.SelectionEnd=0):e===10&&(u.SelectionStart=r.GetLength(),u.SelectionEnd=r.GetLength());if(!s){if(e===1||e==11)u.SelectionStart=t.Utility.GetSelectionStartPosition(n),u.SelectionEnd=u.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()}else o||(u.SelectionStart=0,u.SelectionEnd=r.GetLength());if(e!==1||s)u.SetSelection=!0;return u},r.prototype.MaxLengthCheck=function(e,t,n){var r="",i=0;if(e=="\r\n")t>=2&&(r=e);else if(n)for(var s=0;s<e.GetLength();s++){var o=e.Substring(s,s+1);o.length>=2?i+=2*o.length:this.Filter.IsFullWidth(o)?i+=2:i++;if(!(i<=t))break;r+=e.Substring(s,s+1)}else e.GetLength()<=t?r=e:r=e.Substring(0,t);var u=r.GetLength();return u!=0&&r.Substring(u-1,u)=="\r"&&(r=r.Substring(0,u-1)),r!=e&&(this.isInputValid=!1),r},r.prototype.MaxLineCheck=function(e,t,n,r,i){var s="",o=e+n+t,u=this.GetLinesCount(o,i);if(u<=r)s=n;else{var a=0,f=n.GetLength();do{var l=Math.floor((a+f)/2),c=n.Substring(0,l);o=e+c+t,u=this.GetLinesCount(o,i);if(u>r)f=l;else if(u<r)a=l;else if(u==r&&f>a+1)a=l;else if(u==r&&f==a+1)break}while(a<f);s=n.Substring(0,a)}return s!=n&&(this.isInputValid=!1),s},r.prototype.GetLinesCount=function(e,t){var r=1,i=t;if(e=="")return r;var s=this._testTextArea;if(this._testTextArea===undefined||this._testTextArea===null)this._testTextArea=n("<textarea/>"),this._testTextArea.css("visibility","hidden"),this._testTextArea.css("position","absolute"),this._testTextArea.css("left","-100000000px"),this._testTextArea.css("top","-100000000px"),this._testTextArea.attr("rows",1),this._testTextArea.appendTo(n(document.body)),s=this._testTextArea,i=!1;if(!i){var o=e,u=o,a=o.IndexOf("\r\n");r=1;while(a!=-1)u=u.replace("\r\n",""),r+=1,o=o.Substring(a+2,o.GetLength()),a=o.IndexOf("\r\n");o=u,a=o.IndexOf("\r");while(a!=-1)u=u.replace("\r",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\r");o=u,a=o.IndexOf("\n");while(a!=-1)u=u.replace("\n",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\n");return r}var f=e;f=f.replace(/\r\n/g,"\r"),f=f.replace(/\n/g,"\r");var a=f.IndexOf("\r");if(a!=-1){r=0;var l=f.Substring(0,a);return r+=this.GetLinesCount(l,t),f=f.Substring(a+1,f.GetLength()),r+=this.GetLinesCount(f,t),r}var c=n(this.control.InputElement);s.css("fontSize",c.css("fontSize")),s.css("fontFamily",c.css("fontFamily")),s.css("width",c.css("width")),s.css("borderWidth",c.css("borderWidth")),s.css("padding",c.css("padding")),s.css("wordWrap",c.css("wordWrap")),s.css("overflowY",c.css("overflowY"));if(s!=null){s.val(e),s=s.get(0);while(s.scrollHeight-s.clientHeight>1)s.rows++;return s.scrollTop=0,r=s.rows,s.rows>1&&(s.rows=1),r}},r.prototype.FormatCheck=function(e,t,n){this.Owner&&!this.Owner.MultiLine&&e&&(typeof e!="string"&&(e=e.toString()),e=e.replace(/[\r\n]/g,""));var r=this.Filter.CheckText(e),i=r.CheckedText;return this.isInputValid=r.IsInputValid,i},r.prototype.ListValidateCheck=function(e){var t=this.Filter.autoConvert;this.Filter.autoConvert=!1;var n=this.Filter.CheckText(e);return this.Filter.autoConvert=t,n.IsInputValid},r.prototype.GetLength=function(e,t){var n=0;if(t)for(var r=0;r<e.GetLength();r++){var i=e.Substring(r,r+1);i.length>=2?n+=2*i.length:this.Filter.IsFullWidth(i)?n+=2:n++}else n=e.GetLength();return n},r.prototype.TextBoxProcessBackSpace=function(e,t,n,r){var i=new Object;return this.systemEdit=!0,this.keyupResponse=!0,i.System=!0,i},r.prototype.GetRightWordPosition=function(e,t){if(e<t.GetLength()){var n=e,r=t.Substring(e,e+1),i=r;while(!(this.Filter.IsFormatSpace(i)&&!this.Filter.IsFormatSpace(r)||(r=="\r"||i=="\n")&&e!=n||(r=="	"||i=="	")&&e!=n)){n+=1;if(!(n<t.GetLength()))break;i=r,r=t.Substring(n,n+1)}return n}return e},r.prototype.DelOperation=function(e,t,n){this.IsDelInclude=!0;var r=Math.abs(n-t);switch(e){case 8:var i=!1;this.IsKeyDown?i=!0:(this.IsKeyDown=!0,this.CurStart=t-1);if(i){this.IsSerialDel=!0;break}this.CurStart==this.StartPos&&(this.IsSerialDel=!0,this.CurStart-=1);if(t!=n){if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}}else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}t-=1,this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 131080:case 196616:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65544:t!=n&&t<this.StartPos&&(this.StartPos-=r),this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65582:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}this.StartPos==t||this.StartPos==n?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 46:var s=null;this.LastKey==8&&(s=t,t-=1);if(this.StartPos==t||this.StartPos!=null&&Math.abs(this.StartPos-t)==1||this.StartPos==n)this.IsSerialDel=!0;else{this.IsSerialDel=!1;if(s!=null){this.StartPos=s;break}}this.StartPos=t;break;case 131118:if(t!=n)if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}t-=1,this.StartPos==t||t-this.StartPos==1?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t}this.LastKey=e},r.prototype.GetPasswordText=function(e,t,n){var r="";for(var i=0;i<e.GetLength();i++){var s=e.Substring(i,i+1);s!="\r"&&s!="\n"?r+=t:n&&(r+=s)}return r},r}(t.BaseUIProcess);t.GcTextBoxUIProcess=c;var h=function(){function e(e){this._hightlightIndex=-1,this._dataList=[],this._isDeleteItem=!1,this._isFocusOnList=!1,this._isMouseOnList=!1,this._owner=e;var t=5;this._maxItems=t,this._firstItemShowing=0,this._lastItemShowing=t-1,this._refreshElement(),this._createDropdown()}return e.prototype._refreshElement=function(){this._controlContainer=this._owner.GetContainer(),this._inputElement=this._owner.GetJQueryInputElement(),this._maxItems=this._owner.GetMaxHistoryCount(),this._inputElement&&this._inputElement.attr("autocomplete","off")},e.prototype._createDropdown=function(){var e=n("<div>");e.css({position:"absolute",zIndex:"999999",display:"none",backgroundColor:"white",border:"solid 1px black",overflowX:"hidden",overflowY:"auto"});var t=this;e.bind("focus",function(){t._isFocusOnList=!0,e.blur(),t._owner.SetInnerFocus(2)}),e.bind("mouseover",function(){t._isMouseOnList=!0}),e.bind("mouseout",function(){t._isMouseOnList=!1}),e.bind("contextmenu",function(e){e.preventDefault()}),this._dropDownElement=e},e.prototype.GetIsDeleteItem=function(){return this._isDeleteItem},e.prototype.SetIsDeleteItem=function(e){this._isDeleteItem=e},e.prototype.GetIsFocusOnList=function(){return this._isFocusOnList},e.prototype.SetIsFocusOnList=function(e){this._isFocusOnList=e},e.prototype.GetIsMouseOnList=function(){return this._isMouseOnList},e.prototype.ShowDropdown=function(){this._refreshElement(),this.IsVisible()&&this.HideDropdown(),this._dropDownElement.empty();var e;e=this._addDisplayItems();if(e===0)return;var r=t.Utility.GetElementPosition(this._controlContainer.get(0)).Left,i=t.Utility.GetElementPosition(this._controlContainer.get(0)).Top+this._controlContainer.outerHeight(),s=this._controlContainer.outerWidth(),o="";if(e>this._maxItems){var u=t.CoreUtility.MeasureText("WHQ",this._dropDownElement.get(0).firstChild).Height;o=this._maxItems*(u+2)+"px"}var a="";t.Utility.IsTouchMouseDown==1&&(a=this._owner.GetTouchDropDownScale()+""),s-=2,this._dropDownElement.css("left",r+"px"),this._dropDownElement.css("top",i+"px"),this._dropDownElement.css("width",s+"px"),this._dropDownElement.css("display",""),t.Utility.SetZoomStyle(this._dropDownElement,a),this._dropDownElement.css("height",o),n("body").append(this._dropDownElement);var f=this;this._docClickListerner=function(){f.HideDropdown()},n(document).bind("click",this._docClickListerner)},e.prototype._addDisplayItems=function(){var e=this._inputElement.val(),r=[];for(var i=0;i<this._dataList.length;++i)this._dataList[i].substr(0,e.GetLength())==e&&this._dataList[i].GetLength()>e.GetLength()&&r.push(this._dataList[i]);var s=this,o=r.length>this._maxItems?this._maxItems:r.length;for(i=0;i<o;++i){var u=n("<div>");u.attr("index",i),u.css({fontFamily:t.Utility.GetOSDefaultFontFamily(),fontSize:"10pt",whiteSpace:"nowrap",padding:"1px"}),u.bind("mouseover",function(e){var t=e.target||e.srcElement;s.HighlightItem(parseInt(t.getAttribute("index").toString()))}),u.bind("click",function(){s._isFocusOnList=!1,s.SetValue(),s.HideDropdown()}),u.html(t.Utility.EncodingToHTML(r[i])),this._dropDownElement.append(u)}return o},e.prototype.HideDropdown=function(){this.IsVisible()&&(this._dropDownElement.remove(),this._dropDownElement.css("display","none"),n("document").unbind("click",this._docClickListerner),this._dropDownElement.empty(),this._isMouseOnList=!1,this._hightlightIndex=-1)},e.prototype.SetDataList=function(e){if(e===null||e===undefined)e=[];this._dataList=e},e.prototype.IsDataListEmpty=function(){return this._dataList.length===0},e.prototype.HighlightItem=function(e){this.SetHighlighItem(e)},e.prototype.SetHighlighItem=function(e){var t=this._dropDownElement.get(0).childNodes[this._hightlightIndex];this._hightlightIndex!==-1&&(t.style.backgroundColor="",t.style.color=""),this._hightlightIndex=e,this._hightlightIndex!==-1&&(t.style.color="white")},e.prototype.Highlight=function(e){var t=!1;e>0&&this._hightlightIndex==this._dropDownElement.get(0).childNodes.length-1?(this.SetHighlighItem(-1),t=!0):e<0&&this._hightlightIndex==0&&(this.SetHighlighItem(-1),t=!0);if(this._hightlightIndex===-1)t==0&&(e>0&&this.SetHighlighItem(0),e<0&&this.SetHighlighItem(this._dropDownElement.get(0).childNodes.length-1));else{var n;e>1&&this._firstItemShowing+this._maxItems-1!==this._hightlightIndex&&(e=this._firstItemShowing+this._maxItems-this._hightlightIndex),e<-1&&this._firstItemShowing!=this._hightlightIndex&&(e=this._firstItemShowing-this._hightlightIndex),e>0?n=this._hightlightIndex+e>=this._dropDownElement.get(0).childNodes.length?this._dropDownElement.get(0).childNodes.length-1:this._hightlightIndex+e:n=this._hightlightIndex+e<0?0:this._hightlightIndex+e,e>1&&(n-=1),this.SetHighlighItem(n)}},e.prototype.SetValue=function(){var e=this._dropDownElement.get(0).childNodes[this._hightlightIndex],n=e.innerHTML;n=t.Utility.DecodingFromHTML(n),this._owner.InternalSetText(n,!0),this._owner.SetInnerFocus(2);var r=this._inputElement.val().GetLength(),i=Math.abs(this._owner.SelectionEnd-this._owner.SelectionStart);i!=0?this._owner.InternalSetSelection(0,r):this._owner.InternalSetSelection(r,r)},e.prototype.ScrollCheck=function(){if(this._hightlightIndex!==-1){this._hightlightIndex>this._lastItemShowing&&(this._firstItemShowing=this._hightlightIndex-(this._maxItems-1),this._lastItemShowing=this._hightlightIndex),this._hightlightIndex<this._firstItemShowing&&(this._firstItemShowing=this._hightlightIndex,this._lastItemShowing=this._hightlightIndex+(this._maxItems-1));var e=t.CoreUtility.MeasureText("WQH",this._dropDownElement.get(0).firstChild).Height+2;this._dropDownElement.get(0).scrollTop=this._firstItemShowing*e}},e.prototype.KeyDown=function(e){var n=e.keyCode,r={Shift:!1,Ctrl:!1,Alt:!1};e.shiftKey&&(r.Shift=!0),e.ctrlKey&&(r.Ctrl=!0),e.altKey&&(r.Alt=!0);var i=t.Key;switch(n){case 13:if(this._hightlightIndex!==-1)return this.SetValue(),this.HideDropdown(),e.stopPropagation(),e.preventDefault(),!1;break;case 46:if(this._hightlightIndex!==-1){var s=this._dropDownElement.get(0).childNodes[this._hightlightIndex],o=s.innerHTML;return this.HideDropdown(),this._owner.DeleteItem(o),this._isDeleteItem=!0,this._inputElement.focus(),this.IsVisible()||this.ShowDropdown(),e.stopPropagation(),e.preventDefault(),!1}break;case 27:this.HideDropdown(),e.stopPropagation(),e.preventDefault();break;case 38:if(r.Alt)break;return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1),this.ScrollCheck()):this.ShowDropdown(),!1;case 33:return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1*this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1;case 9:this.HideDropdown();break;case 40:if(r.Alt)break;return this.IsVisible()?(this.Highlight(1),this.ScrollCheck()):this.ShowDropdown(),!1;case 34:return this.IsVisible()?(this.Highlight(this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1}},e.prototype.KeyUp=function(e,n){if(n===!0){this.ShowDropdown();return}var r=e.keyCode,i=t.Key;switch(r){case 13:break;case 27:this.HideDropdown();break;case 38:case 40:break;default:this.ShowDropdown()}},e.prototype.IsVisible=function(){return this._dropDownElement.css("display")===""},e}();t.AutoComplete=h})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";function r(e,t){var r=n.extend(!0,{},e,t);return delete r.constructor,r}var n=jQuery;t.extendWidgetOptions=r;var i=function(r){function i(){r.apply(this,arguments),this.mDataOffset=0,this.mRowOuterHeight=-1,this._windowResizeTimer=0,this.mEditSkechRowIndex=-1,this.mCurrentCellLocker=!1}return __extends(i,r),i.prototype._createWidget=function(t,n){var i=t&&e.data.util.isClassInstance(t.data)&&!(typeof wijdatasource=="function"&&t.data instanceof wijdatasource)&&t.data;i&&(t._lateBindingFlag=!0,delete t.data),r.prototype._createWidget.apply(this,arguments),i&&(delete t._lateBindingFlag,t.data=i,this.option("data",i))},i.prototype._create=function(){var t=this;if(!this.element.is("table"))throw"invalid markup";this.mAdjustHeaderText=!0,this.mSplitDistanceX=0,this.mSplitDistanceY=0,this.mCurrentCellLocker=!1,this._windowResizeTimer=0,this.mDataOffset=0,this.mScrollingState={x:null,y:null,index:0},this.mRowOuterHeight=-1,this._initialized=!1,this.mDestroyed=!1,this._rendered=!1,this._eventUID=undefined,this.mDataViewWrapper=undefined,this._originalHtml=undefined,this._originalAttr=undefined,this._originalCssText=undefined,this.mAutoHeight=undefined,this._autoWidth=undefined,this.mRenderCounter=0,this.mSuperPanelHeader=undefined,this.mTopPagerDiv=undefined,this.mBottomPagerDiv=undefined,this.$groupArea=undefined,this.__uid=undefined,this.mWijDataView=undefined,this.mOuterDiv=undefined,this.mSketchTable=undefined,this.mCellFormatter=undefined,this.mRowStyleFormatter=undefined,this.mCellStyleFormatter=undefined,this._eventUID=e.grid.getUID(),this._spinnerActivated=!1,this.mDeficientFilters={};var r="data"in this.options,i=r&&this.options.data;r&&delete this.options.data,this.options=n.extend(!0,{},this.options),n.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(this.options),r&&(this.options.data=i),window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this._initialized=!1,this.mDestroyed=!1,this.mClosestCulture=n.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.mDataViewWrapper=new e.grid.dataViewWrapper(this),this._originalHtml=this.element.html(),this._originalAttr={},this._originalCssText=this.element[0].style.cssText,this.element.addClass(e.grid.wijgrid.CSS.root),this.element.wrap('<div class="'+this.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.wijgrid+" "+this.options.wijCSS.wijgrid+" "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>'),this.mOuterDiv=this.element.parent();var s=this.element[0].style.height,o=this.element[0].style.width;s&&this.mOuterDiv.css("height",s),this.mAutoHeight=s==""||s=="auto",o&&this.mOuterDiv.css("width",this.element[0].style.width),this._autoWidth=o==""||o=="auto",this.element.css({height:"",width:""}),this.options.disabled&&this.disable(),this.mCellFormatter=new e.grid.cellFormatterHelper,this.mRowStyleFormatter=new e.grid.rowStyleFormatterHelper(this),this.mCellStyleFormatter=new e.grid.cellStyleFormatterHelper(this),this._viewPortBounds({start:0,end:0}),this._allowVirtualScrolling()&&(this._viewPortBounds().start=this.mScrollingState.index,this._serverSideVirtualScrolling()&&(this.mDataOffset=this.mScrollingState.index)),this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(e){t._initialized&&!t.mDestroyed&&e.target!==t.mOuterDiv[0]&&t.setSize()},"wijgrid"),this._winOrientation=e.grid.getWindowOrientation(),this.mRenderCounter=0},i.prototype._destroy=function(){var t,r=this;try{this._view().dispose(),this._detachEvents(!0),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._dragndropui&&(this._dragndropui.dispose(),this._dragndropui=null),this.mDataViewWrapper.dispose(),this.mCellFormatter&&(this.mCellFormatter.dispose(),this.mCellFormatter=null),e.grid.remove$dataByPrefix(this.element,this.mDataPrefix),this.element.wijRemoveVisibilityObserver&&this.element.wijRemoveVisibilityObserver(),this.element.insertBefore(this.mOuterDiv),this.mOuterDiv.remove(),this.element.html(this._originalHtml),n.each(this._originalAttr,function(e,t){t===undefined?r.element.removeAttr(e):r.element.attr(e,t)}),this.element.removeClass(e.grid.wijgrid.CSS.root),this.element[0].style.cssText=this._originalCssText}finally{this.mDestroyed=!0}},i.prototype._init=function(){this.mSuperPanelHeader=null,this.mTopPagerDiv=null,this.mBottomPagerDiv=null,this.$groupArea=null,this._prevHoveredSketchRowIndex=-1,this.mClosestCulture=n.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.options.data||(this.mTHead||(this.mTHead=e.grid.readTableSection(this.element,1)),this.mTFoot||(this.mTFoot=e.grid.readTableSection(this.element,3))),this._initialized=this._initialized||!1,this.ensureControl(!0)},i.prototype._setOption=function(e,t){var n=this["_preset_"+e],i=this.options[e],s,o;n!==undefined&&(t=n.apply(this,[t,i])),s=t!==i||e.toLowerCase()==="columns",r.prototype._setOption.apply(this,[e,t]),s&&(o=this["_postset_"+e],o!==undefined&&o.apply(this,[t,i]))},i.prototype.columns=function(){return this.mVisibleLeaves||[]},i.prototype._setColumns=function(e){this.mVisibleLeaves=e},i.prototype.currentCell=function(t,n,r){var i,s=this._view(),o=this._rows();if(arguments.length===0)return i=this._currentCell(),i||this._currentCell(i=e.grid.cellInfo.outsideValue),i;i=typeof t!="number"?t._clone():new e.grid.cellInfo(t,n);if(!i.isEqual(e.grid.cellInfo.outsideValue)){if(!i._isValid())throw"invalid arguments";i._clip(this._getDataCellsRange(0));if(i.rowIndex()>=0){var u=s._getRowInfoBySketchRowIndex(i.rowIndex());if(!u||!(u.type&2))return}}return i._setGridView(this),this._changeCurrentCell(null,i,{changeSelection:r||!1,setFocus:!1}),this._currentCell()},i.prototype.data=function(){return this.mDataViewWrapper.dataView().getSource()},i.prototype.dataView=function(){return this.mDataViewWrapper.dataView()},i.prototype.doRefresh=function(r){var i=this;n.isPlainObject(r)||(r={});var s=this,o=r&&r.virtualScrollData;if(!this._initialized)try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this.mDataViewWrapper.getFieldsInfo(),!0,!0)}catch(u){throw u}finally{this._initialized=!0}if(!o){this._rebuildLeaves();var a=t.lazy(this.mDataViewWrapper.data,this.mDataViewWrapper),f=this.mDataViewWrapper.dataView(),l=this._prepareTotalsRequest();l.length&&n.each(this._leaves(),function(e,t){t.options._totalsValue=a().totals?a().totals[t.options.dataKey]:undefined});if(f.count()){var c=this._leaves(),h=new e.grid.LazySketchTable({count:function(){return f.count()},getRange:function(e,t,n,r){for(var s=0;s<t;s++){var o=e+s,u=f.item(o);n[r+s]=i._buildSketchRow(i.mDataViewWrapper._wrapDataItem(u,o),c)}}});(this._hasGrouping()||this._hasMerging())&&h.ensureNotLazy(),this.mSketchTable=h}else{this.mSketchTable=new e.grid.SketchTable;var p=a().emptyData;p&&n.each(p,function(e,t){s.mSketchTable.add(s._buildSketchRowEmptyDataItem(t,i._leaves(),e===p.length-1))})}}this._onRendering(r),o?this._refreshVirtual(r):this._refresh(r),r&&n.isFunction(r.beforeOnRendered)&&r.beforeOnRendered.apply(this,[r]);var d=this._view();if(this.mEditSkechRowIndex>=0&&d._isRowRendered(this.mEditSkechRowIndex)>=0){var v=d._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex);v&&v.state&16&&d._makeRowEditable(v)}this._onRendered(r),r&&n.isFunction(r.afterRefresh)&&r.afterRefresh.apply(this,[r])},i.prototype.beginEdit=function(){if(!this._allowCellEditing())throw'Can be used only if the editingMode option is set to "cell".';return this._beginEditInternal(null)},i.prototype.endEdit=function(e){return typeof e=="undefined"&&(e=!1),this._endEditInternal(null,e)},i.prototype.editRow=function(e){if(this.options.editingMode!=="row")throw'Can be used only if the editingMode option is set to "row".';this.mEditSkechRowIndex>=0&&this.cancelRowEditing();if(e>=0){var t=-1,n;for(var r=0;r<this.mSketchTable.count()&&t<0;r++)n=this.mSketchTable.row(r),n.isDataRow()&&n.dataItemIndex()===e&&(t=r);if(t>=0){var i=this._view();this.mEditSkechRowIndex=t,n.renderState|=16;if(i._isRowRendered(this.mEditSkechRowIndex)>=0){var s=i._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);s.state|=16,i._removeBodyRow(s.sectionRowIndex,!1),s=i._insertBodyRow(n,s.sectionRowIndex,s.dataItemIndex,-1),i._makeRowEditable(s),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}}},i.prototype.exportGrid=function(e,t,n,r){},i.prototype.updateRow=function(){if(this.mEditSkechRowIndex>=0){var n=e.grid.asEditableDataView(this.mDataViewWrapper.dataView()),r=!1;if(!n)throw"The provided DataView doesn't supports the editing operation.";try{var i=this.mSketchTable.row(this.mEditSkechRowIndex),s=this._view();if(!i||!i.isDataRow()||!(i.renderState&16))throw"Invalid row";if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var o=s._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1),u=this._visibleLeaves(),a=[],f=new e.grid.cellEditorHelper;for(var l=0;l<u.length;l++){var c=u[l];if(c instanceof t.c1field&&!c.options.readOnly){var h=o.$rows.children("td, th").eq(l);if(h.length){var p=s._changeCellRenderState(h,0,!0);if(p&16){var d=s.getAbsoluteCellInfo(h[0],!0),v=f.updateCell(this,d,null,!1);if(!(v&2)){r=!0;return}v&8||a.push(d)}}}}for(var l=0;l<a.length;l++)f.cellEditEnd(this,a[l],null);i.renderState&=-17,o.state&=-17,s._removeBodyRow(o.sectionRowIndex,!1),o=s._insertBodyRow(i,o.sectionRowIndex,o.dataItemIndex,-1),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}else i.renderState&=-17}finally{r||(this.mEditSkechRowIndex=-1)}}},i.prototype.cancelRowEditing=function(){if(this.mEditSkechRowIndex>=0)try{var e=this.mSketchTable.row(this.mEditSkechRowIndex),t=this._view();if(!e||!e.isDataRow()||!(e.renderState&16))throw"Invalid row.";e.renderState&=-17;if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var n=t._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);n.state&=-17,t._removeBodyRow(n.sectionRowIndex,!1),n=t._insertBodyRow(e,n.sectionRowIndex,n.dataItemIndex,-1),this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}finally{this.mEditSkechRowIndex=-1}},i.prototype.deleteRow=function(t){if(t>=0){var n=e.grid.asEditableDataView(this.mDataViewWrapper.dataView());if(!n||!n.canRemove())throw"The provided DataView doesn't supports the deleting operation.";this.mDataViewWrapper.ignoreChangeEvent(!0),n.remove(t),this.mDataViewWrapper.ignoreChangeEvent(!1),this.ensureControl(!0,{forceDataLoad:!0})}},i.prototype.ensureControl=function(t,r){this._loading(),n.isPlainObject(r)||(r={data:null,afterRefresh:null,beforeRefresh:null}),this._initialized||(this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this.mDataViewWrapper.isDataLoaded()&&this.mDataViewWrapper.getFieldsInfo(),this.mDataViewWrapper.isDataLoaded(),!1),this.mDataViewWrapper.isOwnDataView()||(new e.grid.settingsManager(this)).MapDVToWG()),this._initialized&&r&&n.isFunction(r.beforeRefresh)&&r.beforeRefresh.apply(this);if(!r||!r.virtualScrollData)this.mAllowVirtualScrolling=undefined,this.mEditSkechRowIndex=-1;t===!0?this.mDataViewWrapper.load(r):(this.doRefresh(r),this._loaded())},i.prototype.getCellInfo=function(e){var t=null;return e&&(e=this._findUntilOuterDiv(e,{td:!0,th:!0}))&&(t=this._view().getAbsoluteCellInfo(e,!1)),t},i.prototype.getFilterOperatorsByDataType=function(t){return(new e.grid.filterOperatorsCache(this)).getByDataType(t||"string")},i.prototype.pageCount=function(){return this._customPagingEnabled()?Math.ceil(this.options.totalRows/this.options.pageSize)||1:this.options.allowPaging?this.mDataViewWrapper.dataView().pageCount():1},i.prototype._closestCulture=function(){return this.mClosestCulture},i.prototype._serverShaping=function(){return!1},i.prototype._pageIndexForDataView=function(){return this.options.pageIndex},i.prototype.setSize=function(t,r){var i=this._view(),s=null,o=this.mOuterDiv,u=this._visibleLeaves(),a=[],f=n.browser&&n.browser.msie&&n.browser.version<9;try{f&&(e.grid.wijgrid.IGNORE_WIN_RESIZE=!0),i&&i.getScrollValue&&(s=i.getScrollValue());if(t||t===0)this._autoWidth=!1,o.width(t);if(r||r===0)this.mAutoHeight=!1,o.height(r);n.each(u,function(e,t){var r=i.getHeaderCell(e),s=i.getJoinedCols(e);n(r).css("width",""),n.each(s,function(e,t){n(t).css("width","")})}),this._setSizeInternal(s);var l=this._UIFrozener();l&&l.refresh()}finally{e.grid.wijgrid.IGNORE_WIN_RESIZE=!1}},i.prototype._setSizeInternal=function(e){this._view().updateSplits(e)},i.prototype.selection=function(){return this.mSelection||(this.mSelection=new e.grid.selection(this)),this.mSelection},i.prototype._leaves=function(){return this.mLeaves||(this.mLeaves=[]),this.mLeaves},i.prototype._visibleLeaves=function(){return this.mVisibleLeaves||(this.mVisibleLeaves=[]),this.mVisibleLeaves},i.prototype._allColumns=function(){return this.mAllColumns||(this.mAllColumns=[]),this.mAllColumns},i.prototype._findInstance=function(e){return e?this._allColumns()[e.travIdx]||null:null},i.prototype._currentCell=function(e){if(!arguments.length)return this.mCurrentCell;this.mCurrentCell=e},i.prototype._groupAreaColumns=function(){return this.mGroupAreaColumns||(this.mGroupAreaColumns=[]),this.mGroupAreaColumns},i.prototype._tHead=function(){return this.mTHead},i.prototype._onDataViewCurrentPositionChanged=function(e,t){var n=this._currentCellFromDataView(this.currentCell().cellIndex());n=this.currentCell(n,null,!0)},i.prototype._resetColumns=function(){e.grid.traverse(this.options.columns,function(e,t){if(e.dynamic){var r=n.inArray(e,t);r>=0&&t.splice(r,1)}else e.dataKey=e._originalDataKey,e.headerText=e._originalHeaderText}),this._initialized=!1},i.prototype._resetDataProperties=function(){this.options.pageIndex=0},i.prototype._resetVerticalBounds=function(){var e=this._viewPortBounds();e.start=0,this.mScrollingState.index=0,this.mScrollingState.y=0},i.prototype._onDataViewLoading=function(){this._activateSpinner(),this._trigger("dataLoading")},i.prototype._onDataViewReset=function(t,n){this.options._lateBindingFlag?delete this.options._lateBindingFlag:(this.mEditSkechRowIndex=-1,(new e.grid.settingsManager(this)).MapDVToWG(),this._trigger("dataLoaded"),n&&this._resetColumns(),this.doRefresh(t),this._loaded())},i.prototype._onDataViewLoaded=function(){},i.prototype._loading=function(){this._activateSpinner(),this._trigger("loading")},i.prototype._loaded=function(){this._deactivateSpinner(),this._trigger("loaded")},i.prototype._buildSketchRow=function(n,r){var i,s,o,u=e.data.Expando.getFrom(n.values,!1),a=u?u[e.grid.EXPANDO]:null,f=new t.SketchDataRow(n.originalRowIndex,1,a&&a.rowAttributes),l=a&&a.cellsAttributes;for(var c=0,h=r.length;c<h;c++){var p=r[c];if(p instanceof t.c1field){var d=p;i=l?l[d.options.dataKey]:null,s=this.mDataViewWrapper.getValue(n.values,d.options.dataKey),f.add(new t.ValueCell(this.parse(p.options,s),i))}else f.add(new t.ValueCell(null,{}))}return f},i.prototype._buildSketchRowEmptyDataItem=function(e,n,r){var i=new t.SketchRow(128,1,null),s=n.length;for(var o=0,u=e.length;o<u;o++)i.add(new t.HtmlCell(e[o],{colSpan:s>0&&r?this._visibleLeaves().length:1}));return i},i.prototype._prepareColumnOptions=function(r,i,s,o,u){var a=this;e.grid.traverse(r,function(e){e._originalDataKey=e.dataKey,e._originalHeaderText=e.headerText}),(new e.grid.bandProcessor).getVisibleHeight(r,!0),o&&(e.grid.columnsGenerator.generate(i,s,r),n.each(r,function(e,t){t.isLeaf=!n.isArray(t.columns)})),e.grid.setTraverseIndex(r),this._generateColumnInstancesFromOptions(r),o&&this.mDataViewWrapper&&this.mAdjustHeaderText&&n.each(this._leaves(),function(e,r){var i=a.mDataViewWrapper.isBoundedToDOM(),s=r.options,o=typeof s.dataKey=="number"?s.dataKey:s.leavesIdx;if(s.headerText===undefined&&(a.options.columnsAutogenerationMode==="merge"||s.dynamic)){var u=a._originalHeaderRowData();i&&u&&o<u.length?s.headerText=n.trim(u[o]):r instanceof t.c1field&&(s.headerText=s.dataKey+"")}var f=a._originalFooterRowData();i&&f&&o<f.length&&(s._footerTextDOM=n.trim(f[o]))})},i.prototype._rebuildLeaves=function(){var r=[];this._showRowHeader()&&r.push(t.c1rowheaderfield.getInitOptions()),n.each(this.options.columns,function(e,t){r.push(t)}),e.grid.setTraverseIndex(r),this._columnsHeadersTable((new e.grid.bandProcessor).generateSpanTable(r)),this._generateColumnInstancesFromOptions(r),this._onLeavesCreated()},i.prototype._generateColumnInstancesFromOptions=function(n){var r=this;this.mAllColumns=[],this.mLeaves=[],this.mVisibleLeaves=[],this.mGroupedLeaves=null;var i=0,s=0,o=0;e.grid.traverse(n,function(n){delete n.visLeavesIdx,delete n.leavesIdx,n.isLeaf&&(n.leavesIdx=s++,n.parentVis&&(n.visLeavesIdx=o++)),n.disabled=r.options.disabled===!0;var u=e.grid.asColumnInstance(r,n);r.mAllColumns.push(u),u instanceof t.c1field&&(n.dataIndex=i++),n.isLeaf&&(r.mLeaves.push(u),n.parentVis&&r.mVisibleLeaves.push(u))})},i.prototype._onLeavesCreated=function(){},i.prototype._allowEditing=function(){return this.options.allowEditing===!0||this.options.editingMode==="cell"||this.options.editingMode==="row"},i.prototype._allowCellEditing=function(){var e=this.options.editingMode;return e==="row"?!1:this.options.allowEditing===!0||e==="cell"},i.prototype._allowVirtualScrolling=function(){return this.mAllowVirtualScrolling===undefined&&(this.mAllowVirtualScrolling=!this.options.allowPaging&&this.options.allowVirtualScrolling&&this.options.staticRowIndex<0&&this.options.scrollMode!=="none"&&!this._hasMerging()),this.mAllowVirtualScrolling},i.prototype._headerRows=function(){return this._view().headerRows()},i.prototype._filterRow=function(){return this._view().filterRow()},i.prototype._rows=function(){return this._view().bodyRows()},i.prototype._localizeFilterOperators=function(t){var r=this,i=new e.grid.filterOperatorsCache(this);n.each(t,function(e,t){if(t.name){var n=i.getByName(t.name);n&&(n.displayName=t.displayName)}})},i.prototype._KeyDownEventListener=function(){if(!this.mKeyDownEventListener){var e=this._view(),n=e&&e.focusableElement();n&&(this.mKeyDownEventListener=new t.keyDownEventListener(this,n))}return this.mKeyDownEventListener},i.prototype._UIDragndrop=function(t){return!this._dragndropui&&t&&(this._dragndropui=new e.grid.uiDragndrop(this)),this._dragndropui},i.prototype._UIFrozener=function(t){return!this._frozenerui&&t&&(this._frozenerui=new e.grid.uiFrozener(this)),this._frozenerui},i.prototype._UIResizer=function(t){return!this._resizerui&&t&&(this._resizerui=new e.grid.uiResizer(this)),this._resizerui},i.prototype._UISelection=function(t){return!this._selectionui&&t&&(this._selectionui=new e.grid.uiSelection(this)),this._selectionui},i.prototype._postset_allowColMoving=function(e,t){var r=this;n.each(this.columns(),function(t,n){e?r._UIDragndrop(!0).attach(n):r._UIDragndrop(!0).detach(n)});var i=this._groupAreaColumns();i&&n.each(i,function(t,n){e?r._UIDragndrop(!0).attach(n):r._UIDragndrop(!0).detach(n)})},i.prototype._postset_allowEditing=function(e,t){this._postset_editingMode(this.options.editingMode,undefined)},i.prototype._postset_allowSorting=function(e,t){this.ensureControl(!1)},i.prototype._postset_columns=function(e,t){this._initialized=!1,this.ensureControl(!0)},i.prototype._postset_allowPaging=function(e,t){this.ensureControl(!0)},i.prototype._postset_freezingMode=function(e,t){this._frozenerui&&this._frozenerui.refresh()},i.prototype._postset_culture=function(e,t){this.mClosestCulture=n.wijGetCulture(this.options.culture,this.options.cultureCalendar),this.ensureControl(!1)},i.prototype._postset_customFilterOperators=function(e,t){var n=this.mDataViewWrapper.dataView()},i.prototype._postset_data=function(t,n){this._resetColumns(),this.mDataViewWrapper&&this.mDataViewWrapper.dispose(),this.mDataViewWrapper=new e.grid.dataViewWrapper(this),this.ensureControl(!0)},i.prototype._postset_disabled=function(t,n){var r=this,i=this._view();e.grid.iterateChildrenWidgets(this.mOuterDiv,function(e,n){n!==r&&n.option("disabled",t)});if(this.mEditSkechRowIndex>=0&&i._isRowRendered(this.mEditSkechRowIndex)>=0){var s=i._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);s&&s.$rows.find("."+e.grid.wijgrid.CSS.inputMarker).prop("disabled",t)}i&&i.ensureDisabledState()},i.prototype._postset_editingMode=function(e,t){this.mKeyDownEventListener&&(this.mKeyDownEventListener.dispose(),this.mKeyDownEventListener=null,this._KeyDownEventListener())},i.prototype._postset_groupIndent=function(e,t){this.ensureControl(!1)},i.prototype._postset_groupAreaCaption=function(e,t){var n=this._groupedLeaves();this.$groupArea&&(!n||!n.length)&&this.$groupArea.html(e||"&nbsp;")},i.prototype._postset_highlightCurrentCell=function(e,t){var n=this.currentCell();n&&n._isValid()&&this._highlightCellPosition(n,e)},i.prototype._preset_pageIndex=function(e,r){if(t.isNaN(e))throw"out of range";var i=this.pageCount(),s=function(e){return e>i-1&&(e=i-1),e<0&&(e=0),e};e=s(e);if(this.options.allowPaging&&e!==r){var o={newPageIndex:e};this._onPageIndexChanging(o)?e=s(o.newPageIndex):(e=r,n.each([this.mTopPagerDiv,this.mBottomPagerDiv],function(t,n){if(n&&n.length){var r=n.data("wijmo-wijpager");r&&(r.options.pageIndex=e)}}))}return e},i.prototype._postset_pageIndex=function(e,t){if(this.options.allowPaging){var n={newPageIndex:e};this._customPagingEnabled()?this._onPageIndexChanged(n):this.ensureControl(!0,{afterRefresh:function(){this._onPageIndexChanged(n)}})}},i.prototype._preset_pageSize=function(e,n){if(t.isNaN(e))throw"out of range";return e<=0&&(e=1),e},i.prototype._postset_pageSize=function(e,t){this._resetDataProperties(),this.options.allowPaging&&!this._customPagingEnabled()&&this.ensureControl(!0)},i.prototype._postset_pagerSettings=function(e,t){this.ensureControl(!1)},i.prototype._postset_rowHeight=function(e,t){this.mRowOuterHeight=-1,this.ensureControl(!1)},i.prototype._postset_scrollMode=function(e,t){this.ensureControl(!1)},i.prototype._postset_selectionMode=function(t,n){var r=this.selection(),i=this.currentCell(),s=this.selection().selectedCells().length();r.beginUpdate(),r.clear(),i&&i._isValid()&&s&&r._selectRange(new e.grid.cellInfoRange(i,i),!1,!1,0,null),r.endUpdate(),this._view().toggleDOMSelection(t==="none")},i.prototype._postset_showFilter=function(e,t){this.ensureControl(!1)},i.prototype._postset_showGroupArea=function(e,t){this.ensureControl(!1)},i.prototype._postset_showRowHeader=function(e,t){this.ensureControl(!1)},i.prototype._postset_staticRowIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},i.prototype._postset_staticColumnIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},i.prototype._postset_allowVirtualScrolling=function(e,t){this.ensureControl(!1)},i.prototype._preset_allowVirtualScrolling=function(e,n){if(t.isNaN(e)||e<0)throw"out of range";return e},i.prototype._activateSpinner=function(){if(!this._spinnerActivated){var t=e.grid.wijgrid.CSS,n=this.options.wijCSS,r=this.mOuterDiv.append('<div class="'+t.loadingOverlay+" "+n.wijgridLoadingOverlay+" "+n.overlay+'"></div>'+'<span class="'+t.loadingText+" "+n.wijgridLoadingText+" "+n.content+" "+n.cornerAll+'">'+'<span class="'+n.icon+" "+n.iconClock+'"></span>'+this.options.loadingText+"</span>").find("> ."+t.loadingText);r.position({my:"center",at:"center center",of:this.mOuterDiv,collision:"none"}),this._spinnerActivated=!0}},i.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0},i.prototype._deactivateSpinner=function(){if(this._spinnerActivated)try{var t=e.grid.wijgrid.CSS;this.mOuterDiv.find("> ."+t.loadingOverlay+", > ."+t.loadingText).remove()}finally{this._spinnerActivated=!1}},i.prototype._prepareTotalsRequest=function(){var e=this._leaves(),r;return!e||!this.options.showFooter?[]:(r=n.map(e,function(e,n){var r=e.options;return e instanceof t.c1field&&r.aggregate&&r.aggregate!=="none"?[e]:null}),r)},i.prototype._groupedLeaves=function(e){var r;e=!(r=this.mGroupedLeaves)||e;if(e){r=[];var i=this._leaves(),s=!1;n.each(i,function(e,n){t.c1field.isGroupedColumn(n)?(s=s||n.options.groupedIndex===undefined,s||r.push(n)):delete n.options.groupedIndex}),s?n.each(i,function(e,n){t.c1field.isGroupedColumn(n)&&(n.options.groupedIndex=r.length,r.push(n))}):(r.sort(function(e,t){return e.options.groupedIndex-t.options.groupedIndex}),n.each(r,function(e,t){t.options.groupedIndex=e})),this.mGroupedLeaves=r}return r||[]},i.prototype._ensureRenderableBounds=function(t){return e.grid.ensureBounds(t,this._renderableRowsCount()-1)},i.prototype._ensureTotalRowsBounds=function(t){return e.grid.ensureBounds(t,this._totalRowsCount()-1)},i.prototype._ensureViewPortBoundsVisible=function(e){var t=this._renderableRowsCount();return e.end>=t&&(e.start-=e.end-(t-1),e.end=t-1,e.start=Math.max(0,e.start),e.end=Math.max(0,e.end)),e},i.prototype._renderableBoundsCollection=function(){return this.mRenderableBoundsCollection},i.prototype._rebuildRenderBoundsCollection=function(){var t=-1,n=-1,r=!1,i=this._totalRowsCount();this.mRenderableBoundsCollection=new e.grid.renderBoundsCollection(i-1);if(this._allowVirtualScrolling()&&this._serverSideVirtualScrolling())this.mRenderableBoundsCollection.add({start:0,end:i-1});else if(!this._allowVirtualScrolling()||!this._hasGrouping())this.mRenderableBoundsCollection.add({start:0,end:i-1});else{for(var s=0;s<this.mSketchTable.count();s++){var o=this.mSketchTable.row(s);o.extInfo.state&1?(t>=0&&(this.mRenderableBoundsCollection.add({start:t,end:n}),r=!1),t=n=-1):t<0?(r=!0,t=n=s):n++}r&&this.mRenderableBoundsCollection.add({start:t,end:n})}},i.prototype._refresh=function(t){(new e.grid.grouper).group(this,this.mSketchTable),(new e.grid.merger).merge(this,this.mSketchTable),this._rebuildRenderBoundsCollection(),this.options.scrollMode!=="none"?this.mView=new e.grid.fixedView(this,this._viewPortBounds()):this.mView=new e.grid.flatView(this,this._viewPortBounds()),this._render(),this.options.allowPaging&&(this.mTopPagerDiv&&this.mTopPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5),this.mBottomPagerDiv&&this.mBottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5))},i.prototype._refreshVirtual=function(e){var t=e.virtualScrollData,n={top:0,bottom:0};t.data&&(n=this._processVirtualData(t)),this._updateRowInfos(t,n),this._renderVirtualIntoView(t)},i.prototype._updateRowInfos=function(e,t){var n=this._viewPortBounds(),r=this._view(),i=e.newBounds,s=this._view().bodyRows(),o,u,a,f;switch(e.mode){case 3:break;case 2:o={start:i.start-n.start,end:n.end-n.start},a=i.start-n.start;for(u=o.start;u<=o.end;u++)f=r._getRowInfo(s.item(u),!1),f.sectionRowIndex-=a,t.top!==0&&(f.dataItemIndex+=t.top),r._setRowInfo(f.$rows,f);break;case 1:o={start:n.start-n.start,end:i.end-n.start},a=n.start-i.start;for(u=o.start;u<=o.end;u++)f=r._getRowInfo(s.item(u),!1),f.sectionRowIndex+=a,t.top!==0&&(f.dataItemIndex+=t.top),r._setRowInfo(f.$rows,f)}},i.prototype._renderVirtualIntoView=function(e){var t=this._viewPortBounds(),n=this,r,i=this._view(),s,o,u;switch(e.mode){case 3:i._clearBody();var a=e.newBounds.end-e.newBounds.start+1;this._renderableBoundsCollection().forEachIndex(e.newBounds.start,a,function(e){r=n.mSketchTable.row(e-n.mDataOffset),i._insertBodyRow(r,-1,r.dataItemIndex(),e)}),i._rebuildOffsets();break;case 2:s={start:e.newBounds.start,end:t.end};for(o=0;o<s.start-t.start;o++)i._removeBodyRow(0);var a=e.newBounds.end-s.end;this._renderableBoundsCollection().forEachIndex(s.end+1,a,function(e){r=n.mSketchTable.row(e-n.mDataOffset),i._insertBodyRow(r,-1,r.dataItemIndex(),e)});break;case 1:s={start:t.start,end:e.newBounds.end};for(o=0;o<t.end-e.newBounds.end;o++)i._removeBodyRow(s.end-s.start+1);u=0;var a=t.start-e.newBounds.start;this._renderableBoundsCollection().forEachIndex(e.newBounds.start,a,function(e){r=n.mSketchTable.row(e-n.mDataOffset),i._insertBodyRow(r,u++,r.dataItemIndex(),e)});break;default:}},i.prototype._processVirtualData=function(e){var t=this.mDataViewWrapper,n=t.dataView().getSource(),r,i=this._leaves(),s,o,u,a=0,f={top:0,bottom:0},l=this._serverSideVirtualScrollingMargin();switch(e.mode){case 3:this.mSketchTable.clear(),t._unsafeSplice(0,n.length),this.mDataOffset=e.request.index;for(s=0;s<e.data.length;s++)t._unsafePush(r=e.data[s]),this.mSketchTable.add(this._buildSketchRow(t._wrapDataItem(r,s),i));break;case 2:for(s=0;s<e.data.length;s++)t._unsafePush(r=e.data[s]),this.mSketchTable.add(this._buildSketchRow(t._wrapDataItem(r,n.length-1),i));f.bottom=e.data.length;break;case 1:for(s=e.data.length-1;s>=0;s--)t._unsafeSplice(0,0,r=e.data[s]),this.mSketchTable.insert(0,this._buildSketchRow(t._wrapDataItem(r,s),i));this.mDataOffset=e.request.index,f.top=e.data.length}return o=this._ensureTotalRowsBounds({start:e.newBounds.start,end:e.newBounds.end}),u={start:this.mDataOffset,end:this.mDataOffset+n.length-1},a=u.end-o.end-l,a>0&&(f.bottom-=a,t._unsafeSplice(n.length-a,a),this.mSketchTable.removeLast(a)),a=o.start-u.start-l,a>0&&(f.top-=a,t._unsafeSplice(0,a),this.mSketchTable.removeFirst(a),this.mDataOffset+=a),this.mSketchTable.updateIndexes(),t._refreshSilent(),f},i.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===!0},i.prototype._isMobileEnv=function(){return this._isMobile},i.prototype._isTouchEnv=function(){return!!n.support.isTouchEnabled&&!!n.support.isTouchEnabled()},i.prototype._render=function(){var t=this._view(),r=this.options,i=e.grid.wijgrid.CSS,s=this.options.wijCSS,o;t.render(),o=this.mOuterDiv,r.scrollMode!=="none"&&(o=this.mOuterDiv.find("div."+i.scroller+":first")),this.mSuperPanelHeader=null,this.mTopPagerDiv&&(this.mTopPagerDiv.data("wijmo-wijpager")&&this.mTopPagerDiv.wijpager("destroy"),this.mTopPagerDiv.remove()),this.mTopPagerDiv=null,this._needToCreatePagerItem()&&(r.pagerSettings.position==="top"||r.pagerSettings.position==="topAndBottom")&&(this.mTopPagerDiv||(o.prepend(this.mSuperPanelHeader=n('<div class="wijmo-wijsuperpanel-header"></div>')),this.mSuperPanelHeader.prepend(this.mTopPagerDiv=n('<div class="'+i.headerArea+" "+s.wijgridHeaderArea+" "+s.header+" "+s.cornerTop+'"></div>')))),r.showGroupArea?this._processGroupArea(o):this.$groupArea=null,this.mBottomPagerDiv&&(this.mBottomPagerDiv.data("wijmo-wijpager")&&this.mBottomPagerDiv.wijpager("destroy"),this.mBottomPagerDiv.remove()),this.mBottomPagerDiv=null,this._needToCreatePagerItem()&&(r.pagerSettings.position==="bottom"||r.pagerSettings.position==="topAndBottom")&&(this.mBottomPagerDiv||o.append(this.mBottomPagerDiv=n('<div class="'+i.footerArea+" "+s.wijgridFooterArea+" wijmo-wijsuperpanel-footer "+s.stateDefault+" "+s.cornerBottom+'"></div>')))},i.prototype._processGroupArea=function(t){var r=this,i=this,s=this._groupedLeaves(),o=e.grid.wijgrid.CSS,u=this.options.wijCSS;this.mGroupAreaColumns=[],this.$groupArea=n('<div class="'+u.content+" "+u.helperClearFix+" "+o.groupArea+" "+u.wijgridGroupArea+'"></div>'),s.length>0?n.each(s,function(e,t){var s=n('<a href="#"></a>').appendTo(i.$groupArea);r.mGroupAreaColumns.push(r._createGroupAreaColumnHeader(s,t))}):this.$groupArea.addClass(o.groupAreaEmpty).css("padding",0).html(this.options.groupAreaCaption||"&nbsp;"),this.mSuperPanelHeader||t.prepend(this.mSuperPanelHeader=n('<div class="wijmo-wijsuperpanel-header"></div>')),this.mSuperPanelHeader.prepend(this.$groupArea),this._UIDragndrop(!0).attachGroupArea(this.$groupArea)},i.prototype._createGroupAreaColumnHeader=function(e,n){return new t.c1groupedfield(this,n.options,e)},i.prototype._pagerSettings2PagerWidgetSettings=function(){return n.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:n.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:n.proxy(this._onPagerWidgetPageIndexChanged,this)})},i.prototype._showRowHeader=function(){return this.options.showRowHeader===!0&&this.options.staticColumnsAlignment!=="right"},i.prototype._attachEvents=function(){var e=this._view(),t=e.focusableElement(),r=this;t.bind("keydown."+this.widgetName,n.proxy(this._onKeyDown,this)),t.bind("focusin."+this.widgetName,n.proxy(this._onFocusIn,this)),this._KeyDownEventListener(),n.each(e.subTables(),function(e,t){var i=t.element();i&&(i.tHead&&n(i.tHead).bind("click."+r.widgetName,n.proxy(r._onClick,r)),i.tBodies.length&&n(i.tBodies[0]).bind("click."+r.widgetName,n.proxy(r._onClick,r)).bind("dblclick."+r.widgetName,n.proxy(r._onDblClick,r)).bind("mousemove."+r.widgetName,n.proxy(r._onMouseMove,r)).bind("mouseout."+r.widgetName,n.proxy(r._onMouseOut,r)))}),n(window).bind("resize."+this.widgetName+"."+this._eventUID,n.proxy(this._onWindowResize,this))},i.prototype._detachEvents=function(e){var t=this._view(),r=this,i;this._windowResizeTimer=0,n(window).unbind("resize."+this.widgetName+"."+this._eventUID),t&&(i=t.focusableElement(),i.unbind("."+this.widgetName),n.each(t.subTables(),function(){var e=this.element();e&&(e.tHead&&n(e.tHead).unbind("."+r.widgetName),e.tBodies.length&&n(e.tBodies[0]).unbind("."+r.widgetName))}))},i.prototype._handleSort=function(e,r){var i=e.options,s=this.options.columns;if(this.options.allowSorting){var o=i.sortDirection==="none"?"ascending":i.sortDirection==="ascending"?"descending":"ascending",u={column:i,sortDirection:o,sortCommand:i.dataKey+" "+(o==="ascending"?"asc":"desc")};if(this._onColumnSorting(u)){i.sortDirection=u.sortDirection,r?i.sortOrder=this.mCustomSortOrder++:(this.mCustomSortOrder=1e3,n.each(this._allColumns(),function(n,r){r.options.sortOrder=0;if(r instanceof t.c1field){var i=r.options;r!==e&&(!i.groupInfo||i.groupInfo.position==="none")&&(i.sortDirection="none")}}));var a={column:i,sortDirection:i.sortDirection,sortCommand:i.dataKey+" "+(i.sortDirection==="ascending"?"asc":"desc")};this._customPagingEnabled()?this._onColumnSorted(a):this.ensureControl(!0,{afterRefresh:function(){this._onColumnSorted(a)}})}}},i.prototype._handleDragnDrop=function(e,t,r,i,s){var o=e.options,u=t&&t.options||null,a=i?"groupArea":"columns",f=s?"groupArea":"columns";if(s)this._onColumnGrouping({drag:o,drop:u,dragSource:a,dropSource:f,at:r})&&this.ensureControl(!0,{beforeRefresh:function(){if(!u)o.groupedIndex=0;else switch(r){case"left":o.groupedIndex=u.groupedIndex-.5;break;case"right":o.groupedIndex=u.groupedIndex+.5}i||n.extend(!0,o,{groupInfo:{position:"header"}})},afterRefresh:function(){this._onColumnGrouped({drag:o,drop:u,dragSource:a,dropSource:f,at:r})}});else{var l=this._allColumns(),c=o.parentIdx>=0?l[o.parentIdx].options.columns:this.options.columns,h=u.parentIdx>=0?l[u.parentIdx].options.columns:this.options.columns,p=c===this.options.columns&&this._showRowHeader()?1:0,d=h===this.options.columns&&this._showRowHeader()?1:0;this._onColumnDropping({drag:o,drop:u,at:r})&&this.ensureControl(!1,{beforeRefresh:function(){c.splice(o.linearIdx-p,1);switch(r){case"left":c===h&&o.linearIdx<u.linearIdx?h.splice(u.linearIdx-d-1,0,o):h.splice(u.linearIdx-d,0,o);break;case"right":c===h&&o.linearIdx<u.linearIdx?h.splice(u.linearIdx-d,0,o):h.splice(u.linearIdx-d+1,0,o);break;case"center":u.columns.push(o)}},afterRefresh:function(){this._onColumnDropped({drag:o,drop:u,at:r})}})}},i.prototype._handleFilter=function(n,r,i){var s=(new e.grid.filterOperatorsCache(this)).getByName(r),o,u;if(s){var a=n.options;s.arity>1?(o=this.parse(a,i),u=o!==null&&(e.grid.getDataType(a)==="string"||!t.isNaN(o))):u=!0;if(u){var f={column:a,operator:s.name,value:o};this._onColumnFiltering(f)&&(a.filterValue=f.value,a.filterOperator=f.operator,this._resetDataProperties(),this._resetVerticalBounds(),this._customPagingEnabled()?this._onColumnFiltered({column:a}):this.ensureControl(!0,{afterRefresh:function(){this._onColumnFiltered({column:a})}}))}}},i.prototype._handleUngroup=function(e){var t=e.options;this._onColumnUngrouping({column:t})&&this.ensureControl(!0,{beforeRefresh:function(){delete t.groupedIndex,n.extend(!0,t,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:t})}})},i.prototype._onVirtualScrolling=function(e,t,r,i,s,o){var u=this;this.ensureControl(this._serverSideVirtualScrolling(),{virtualScrollData:{newBounds:e,request:t,mode:r,data:o},beforeOnRendered:function(e){var t=u._viewPortBounds();n.extend(t,e.virtualScrollData.newBounds)},afterRefresh:function(e){u._view()._adjustRowsHeights(),s&&s(i)}})},i.prototype._handleVirtualScrolling=function(e,t,n){typeof t=="undefined"&&(t=null);var r=this._view(),i=this._viewPortBounds(),s=this._ensureRenderableBounds({start:e,end:e+r.getVirtualPageSize()-1}),o=this._ensureTotalRowsBounds({start:this.mDataOffset,end:this.mDataOffset+this.mDataViewWrapper.dataView().count()-1}),u=null,a,f=this._view().getVirtualPageSize();t?a=t:s.start>i.end||s.end<i.start?a=3:s.start>i.start?a=2:s.start<i.start?a=1:a=s.start!==i.start||s.end!==i.end?3:0;if(this._serverSideVirtualScrolling())switch(a){case 3:u={index:e,maxCount:f};break;case 2:s.end>o.end&&(u={index:o.end+1,maxCount:f});break;case 1:s.start<o.start&&(u={index:Math.max(0,o.start-f),maxCount:0},u.maxCount=o.start-u.index)}a!==0&&this._onVirtualScrolling(s,u,a,e,n)},i.prototype._serverSideVirtualScrolling=function(){return!1},i.prototype._serverSideVirtualScrollingMargin=function(){var e=this._view().getVirtualPageSize()*2;return e<20&&(e=20),e},i.prototype._onColumnDropping=function(e){return this._trigger("columnDropping",null,e)},i.prototype._onColumnDropped=function(e){this._trigger("columnDropped",null,e)},i.prototype._onColumnGrouping=function(e){return this._trigger("columnGrouping",null,e)},i.prototype._onColumnGrouped=function(e){this._trigger("columnGrouped",null,e)},i.prototype._onColumnUngrouping=function(e){return this._trigger("columnUngrouping",null,e)},i.prototype._onColumnUngrouped=function(e){this._trigger("columnUngrouped",null,e)},i.prototype._onColumnFiltering=function(e){return this._trigger("filtering",null,e)},i.prototype._onColumnFiltered=function(e){this._trigger("filtered",null,e)},i.prototype._onFilterOperatorsListShowing=function(e){this._trigger("filterOperatorsListShowing",null,e)},i.prototype._onColumnSorting=function(e){return this._trigger("sorting",null,e)},i.prototype._onColumnSorted=function(e){this._trigger("sorted",null,e)},i.prototype._onCurrentCellChanged=function(t,r){var i=this,s=this.options,o=this.currentCell(),u=o.row(),a=function(){var s=i.currentCell(),o=i._getDataCellsRange(0);if(i.options.highlightCurrentCell){var u=new e.grid.cellInfo(r.changingEventArgs.oldCellIndex,r.changingEventArgs.oldRowIndex,i);u._isValid&&o._containsCellInfo(u)&&i._highlightCellPosition(u,!1),i._highlightCellPosition(s,!0)}var a;r.setFocus&&(a=s.tableCell())&&i._setFocusOnCell(r.hasFocusedChild?n(t.target):n(a),r.hasFocusedChild,s.columnInst()),i._trigger("currentCellChanged"),r.changeSelection&&i._updateSelection(t,r.selectionExtendMode);var f=t&&(t.type||"").toLowerCase()||"";f==="click"&&i._editBySingleClick()&&i._beginEditInternal(t)};this.mCurrentCellLocker=!0,this.mDataViewWrapper.currentPosition(u&&u.type&2?u.dataItemIndex:-1);if(s.scrollMode!=="none"&&o&&!o.isEqual(e.grid.cellInfo.outsideValue)){var f=o,u=f.row();u&&!(u.type&2)&&!f.tableCell()&&(f=o._clone(),f.cellIndex(0)),this._view().scrollTo(f,function(){try{a()}finally{i.mCurrentCellLocker=!1}},r)}else try{a()}finally{this.mCurrentCellLocker=!1}},i.prototype._onPageIndexChanging=function(e){return this._trigger("pageIndexChanging",null,e)},i.prototype._onPageIndexChanged=function(e){this._trigger("pageIndexChanged",null,e)},i.prototype._onPagerWidgetPageIndexChanging=function(e,t){t.handled=!0},i.prototype._onPagerWidgetPageIndexChanged=function(e,t){this._setOption("pageIndex",t.newPageIndex)},i.prototype._onRendering=function(t){var n=this._view();this._rendered=!1;if(!t.virtualScrollData){var r=this._currentCell();this.mCurrentCellPrevCycle=r?{x:r.cellIndex(),y:r.rowIndex(),dataItemIndex:r.row()?r.row().dataItemIndex:-1}:{x:-1,y:-1,dataItemIndex:-1},this._currentCell(null),n&&n.dispose(),this._detachEvents(!1),this.mRenderCounter===0&&e.grid.emptyTable(this.element[0]),this.mOuterDiv[0].style.height||(this._isHeightTemporaryFixed=!0,this.mOuterDiv.height(this.mOuterDiv.height())),this.element.detach(),this.element.css({"table-layout":"",width:""}),this.element.empty(),this.mOuterDiv.empty(),this.mOuterDiv.append(this.element),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null),this.mKeyDownEventListener&&(this.mKeyDownEventListener.dispose(),this.mKeyDownEventListener=null)}this._trigger("rendering")},i.prototype._onRendered=function(t){var r=this._view(),i,s=this.selection().selectedCells().length()>0;this._rendered=!0,this.mRenderCounter++;if(!t.virtualScrollData){this._isHeightTemporaryFixed&&(this._isHeightTemporaryFixed=!1,this.mOuterDiv[0].style.height=""),this.mSelection=null,this._attachEvents(),this._setAttr(r.focusableElement(),"tabIndex",0),i=this._currentCellFromDataView(this.mCurrentCellPrevCycle.x),!i._isValid()&&this.options.showSelectionOnRender&&(i=this._getFirstDataRowCell(0)),this.currentCell(i,null,!0),this._UISelection(!0);var o=new e.grid.uiResizer(this);n.each(this.columns(),function(e,t){var n=t.options;n.visible&&n.parentVis&&n.isLeaf&&o.addElement(t)}),this._resizerui=o,this._setSizeInternal(this.mScrollingState),this.options.scrollMode!=="none"&&(this._frozenerui=new e.grid.uiFrozener(this))}else{var i=this.currentCell();this.currentCell(i,null,!1),i._isEdit()&&!i.row()&&i._isEdit(!1),this.selection()._ensureSelection()}this._trigger("rendered")},i.prototype._onClick=function(t){if(!this._canInteract()||!t.target)return;var r=this._view(),i=this._findUntilOuterDiv(t.target,{td:!0,th:!0}),s,o,u=0,a,f,l=!1,c=!!t&&t.type==="click";if(i){if(c&&n(t.target).hasClass(e.grid.wijgrid.CSS.groupToggleVisibilityButton))return this._onGroupBtnClick(t),t.stopPropagation(),!1;s=n(i).closest("tr");if(!s.length)return;o=r.getAbsoluteCellInfo(i,!1);if(s.hasClass(e.grid.wijgrid.CSS.dataRow)||s.hasClass(e.grid.wijgrid.CSS.headerRow)){if(o.cellIndex()<0||o.rowIndex()<0)o.rowIndex()>=0?(o=new e.grid.cellInfo(0,o.rowIndex()),u=2,l=!0):o.cellIndex()>=0&&(o=this._getFirstDataRowCell(o.cellIndex()),u=1,l=!0);l||(o=r.getAbsoluteCellInfo(i,!0)),this._changeCurrentCell(t,o,{changeSelection:!0,setFocus:c,selectionExtendMode:u})}if(c){var h={cell:o};this._trigger("cellClicked",null,h)}}},i.prototype._onDblClick=function(e){this._editBySingleClick()||this._beginEditInternal(e)},i.prototype._onGroupBtnClick=function(t){if(!this._canInteract())return;var r=n(t.target).closest("tr"),i=e.grid.groupHelper,s=i.getGroupInfo(r[0]),o=this;if(s){var u=i.getColumnByGroupLevel(this._leaves(),s.level);if(u){var a=u.options.groupInfo.expandInfo[s.index];a.isExpanded?a.collapse(this,u):a.expand(this,u,t.shiftKey),this._allowVirtualScrolling()&&(this._rebuildRenderBoundsCollection(),this._view().vsUI._changeVisibleRowsCount(this._renderableBoundsCollection().capacity()),this._ensureViewPortBoundsVisible(this._viewPortBounds()),this._handleVirtualScrolling(this._viewPortBounds().start,3)),this.setSize()}}},i.prototype._onKeyDown=function(t){var r=this._KeyDownEventListener().isHiddenInput(n(t.target));if(!this._canInteract()||r&&this._KeyDownEventListener().canHandle(t))return!0;var i=t.target.tagName.toLowerCase(),s=n(t.target),o=this.currentCell(),u=e.getKeyCodeEnum();if(!!r||i!=="input"&&i!=="option"&&i!=="select"&&i!=="textarea"||s.closest("tr.wijmo-wijgrid-datarow").length!==0){if(this._allowCellEditing()){if((t.which===u.ESCAPE||t.which===113)&&o._isValid()&&o._isEdit())return this._endEditInternal(t,t.which===u.ESCAPE),!1;if(t.which===113)return this._beginEditInternal(t),!1}if(!this.options.allowKeyboardNavigation)return!0;var a;switch(t.which){case u.DOWN:case u.PAGE_DOWN:case u.UP:case u.PAGE_UP:case u.LEFT:case u.RIGHT:case u.HOME:case u.END:case u.TAB:if(t.which===u.TAB){var f=this._visibleLeaves();if(!f||!f.length)return!0}if(r||this._canMoveToAnotherCell(t.target,t.which)){var l=this._getDataCellsRange(2);a=this._getNextCurrentCell(l,o,t.keyCode,t.shiftKey)}}return a?(this._changeCurrentCell(t,a,{changeSelection:!0,setFocus:!0}),!1):!0}return!0},i.prototype._onFocusIn=function(e){this.options.allowKeyboardNavigation&&e&&e.target&&n(e.target).is(":input")&&!this._KeyDownEventListener().isHiddenInput(n(e.target))&&this._onClick(e)},i.prototype._onMouseMove=function(t){var r=this._view(),i=this._frozenerui,s,o,u,a,f,l=e.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||i&&i.inProgress())return;s=this._findUntilOuterDiv(t.target,{td:!0,th:!0});if(s){o=n(s).closest("tr");if(!o.length||!o.hasClass(e.grid.wijgrid.CSS.dataRow)&&!o.hasClass(e.grid.wijgrid.CSS.headerRow))return;u=r.getAbsoluteCellInfo(s,!0);var c=u.rowIndex();c!==this._prevHoveredSketchRowIndex&&(this._prevHoveredSketchRowIndex!==undefined&&r._isRowRendered(this._prevHoveredSketchRowIndex)>=0&&(f=r._getRowInfoBySketchRowIndex(this._prevHoveredSketchRowIndex),f&&(r._changeRowRenderState(f,4,!1),this.mRowStyleFormatter.format(f))),this._prevHoveredSketchRowIndex=c,c>=0&&(f=r._getRowInfoBySketchRowIndex(c),f&&(r._changeRowRenderState(f,4,!0),this.mRowStyleFormatter.format(f))))}},i.prototype._onMouseOut=function(t){if(!this._canInteract())return;var r=this._findUntilOuterDiv(t.relatedTarget,{tr:!0});if(!r||!n(r).hasClass(e.grid.wijgrid.CSS.dataRow)){var i=this._prevHoveredSketchRowIndex,s=this._view();if(i>=0){var o=s._getRowInfoBySketchRowIndex(i);o&&o.$rows&&(s._changeRowRenderState(o,4,!1),this.mRowStyleFormatter.format(o)),this._prevHoveredSketchRowIndex=-1}}},i.prototype._onWindowResize=function(t){var n=this;if(e.grid.wijgrid.IGNORE_WIN_RESIZE)return;this._windowResizeTimer>0&&(window.clearTimeout(this._windowResizeTimer),this._windowResizeTimer=0),this._windowResizeTimer!==-1&&(this._windowResizeTimer=window.setTimeout(function(){n._windowResizeTimer=-1;try{if(!n.mDestroyed&&n._initialized&&n.element.parent().length){var t=e.grid.getWindowOrientation(),r=!e.grid.isAndroid()||t!==n._winOrientation;n._winOrientation=t,r&&n.setSize()}}finally{n._windowResizeTimer=0}},e.grid.wijgrid.WIN_RESIZE_TIMEOUT))},i.prototype._fieldResized=function(e,n,r){n<0&&(n=0),r<=0&&(r=1);var i={column:e.options,oldWidth:n,newWidth:r};if(this._trigger("columnResizing",null,i)!==!1){if(t.isNaN(i.newWidth)||i.newWidth<0)i.newWidth=1;e.option("width",i.newWidth);var s={column:e.options};this._trigger("columnResized",null,s)}},i.prototype._setFocusOnCell=function(e,t,n){t||this._KeyDownEventListener().focus(e,n)},i.prototype._findFocusedChild=function(e){var t=e.find(":focus");return t.length?t:null},i.prototype._changeCurrentCell=function(t,r,i){if(this.mCurrentCellLocker)return;var s=this.currentCell(),o=this._getDataCellsRange(0);if(o._isValid()&&o._containsCellInfo(r)||r.isEqual(e.grid.cellInfo.outsideValue)){var u=t&&t.target&&n(t.target),a=r.tableCell(),f=r.container(),l=null;i.hasFocusedChild=!!(a&&u&&u[0]!==a&&u[0]!==f[0]&&!this._KeyDownEventListener().isHiddenInput(u)&&(l=this._findFocusedChild(f)));if(s.cellIndex()!==r.cellIndex()||s.rowIndex()!==r.rowIndex()){var c={cellIndex:r.cellIndex(),rowIndex:r.rowIndex(),oldCellIndex:s.cellIndex(),oldRowIndex:s.rowIndex()};if(!this._trigger("currentCellChanging",null,c))return!1;var h=!1;if(!this._allowCellEditing()||!s._isEdit()||(h=this._endEditInternal(null)))i.changingEventArgs=c,s=r._clone(),s._setGridView(this),this._currentCell(s),this._onCurrentCellChanged(t,i)}else this.options.highlightCurrentCell&&this._highlightCellPosition(s,!0),i.changeSelection&&this.selection()._multipleEntitiesAllowed()&&this._updateSelection(t,i.selectionExtendMode),a&&!s._isEdit()&&(t&&this._editBySingleClick()?(this.mCurrentCellLocker=!0,this._beginEditInternal(t),this.mCurrentCellLocker=!1):i.setFocus&&this._setFocusOnCell(i.hasFocusedChild?l:n(a),i.hasFocusedChild,s.columnInst()))}return!0},i.prototype._highlightCellPosition=function(t,r){if(t&&t._isValid()){var i=t.cellIndexAbs(),s=t.rowIndexAbs(),o=e.grid.renderState,u=this._view(),a,f,l;f=u.getHeaderCell(i),f&&(a=u._getRowInfo(this._headerRows().item(t.column().thY)),f=n(f),l=u._changeCellRenderState(f,2,r),this.mCellStyleFormatter.format(f,i,t.columnInst(),a,l)),t._isRendered()&&(f=u.getJoinedRows(s,0),f&&(a=u._getRowInfo(f),u._changeRowRenderState(a,2,r),this.mRowStyleFormatter.format(a)),f=u.getCell(i,s),f&&(f=n(f),l=u._changeCellRenderState(f,2,r),this.mCellStyleFormatter.format(f,i,t.columnInst(),a,l)))}},i.prototype._beginEditInternal=function(t){if(this._canInteract()&&this._allowCellEditing()){var n=this.currentCell(),r=n.column(),i;if(r&&!r.readOnly)return i=(new e.grid.cellEditorHelper).cellEditStart(this,n,t),i,i}return!1},i.prototype._endEditInternal=function(t,r){typeof r=="undefined"&&(r=!1);if(this._canInteract()&&this._allowCellEditing()){var i=this.currentCell(),s=new e.grid.cellEditorHelper,o=s.updateCell(this,i,t,r);if(o&2){if(o&8)return!0;s.cellEditEnd(this,i,t),i=this.currentCell();var u=i.tableCell();return u?this._KeyDownEventListener().focus(n(u),i.columnInst()):n(this._view().focusableElement()).focus(),this._allowVirtualScrolling()||this._view().ensureHeight(i.rowIndex()),!0}}return!1},i.prototype._onViewInsertEmptyRow=function(e,t,n,r,i,s,o){return null},i.prototype._onViewCreateEmptyCell=function(e,t,n){return null},i.prototype._onViewCellRendered=function(e,t,n,r){},i.prototype._onViewRowRendered=function(e,t,n){},i.prototype._getDataParser=function(t){return t.dataParser||e.data.defaultParsers[t.dataType]||e.data.defaultParsers.string},i.prototype._needParseColumnDOM=function(t){return e.grid.getDataType(t)!=="string"&&e.grid.validDataKey(t.dataKey)},i.prototype.parse=function(t,r){var i=e.grid.getDataType(t),s=e.grid.getDataType(t);return n.isFunction(r)&&(r=r()),r=e.data.convert(r,i,s,{culture:this.mClosestCulture,format:t.dataFormatString,nullString:this.options.nullString,parser:t.dataParser}),r},i.prototype.toStr=function(t,n){var r=this.mDataViewWrapper.dataView(),i=e.grid.getDataType(t),s="string";return n=e.data.convert(n,i,s,{culture:this.mClosestCulture,format:t.dataFormatString,nullString:this.options.nullString,parser:t.dataParser}),n},i.prototype.parseFailed=function(e,t,n,r){return t},i.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]},i.prototype._canInteract=function(){return!this.options.disabled},i.prototype._canMoveToAnotherCell=function(t,r){var i=t.tagName.toLowerCase(),s,o,u,a;switch(i){case"input":if(n(t).hasClass(e.grid.wijgrid.CSS.inputMarker)){var f=t;return f.type==="text"?(s=f.value.length,o=(new e.grid.domSelection(f)).getSelection(),u=e.getKeyCodeEnum(),a=r===u.TAB||r===u.UP||r===u.DOWN||r===u.PAGE_DOWN||r===u.PAGE_UP||o.length===0&&(o.start===0&&(r===u.LEFT||r===u.HOME)||o.end>=s&&(r===u.RIGHT||r===u.END)),a):!0}return!1;case"textarea":case"select":return!1}return!0},i.prototype._editBySingleClick=function(){var e=(this.options.editingInitOption||"").toLowerCase();switch(e){case"click":case"doubleclick":break;case"auto":default:e=this._isMobileEnv()?"click":"doubleclick"}return e==="click"},i.prototype._getDataToAbsOffset=function(){var e=0,t=0,n=this._headerRows();return this._showRowHeader()&&e++,n&&(t+=n.length()),this._filterRow()&&t++,{x:e,y:t}},i.prototype._currentCellFromDataView=function(t){var n=this.mDataViewWrapper.currentPosition(),r=new e.grid.cellInfo(t,this._dataViewDataRowIndexToGrid(n),null);return r.rowIndex()<0?r.cellIndex(-1):r.cellIndex()<0&&r.cellIndex(0),r},i.prototype._dataViewDataRowIndexToGrid=function(e){if(e>=0&&this.mSketchTable)for(var t=0;t<this.mSketchTable.count();t++){var n=this.mSketchTable.row(t);if(n.isDataRow()&&n.dataItemIndex()===e)return t}return-1},i.prototype._getDataCellsRange=function(t,n){typeof n=="undefined"&&(n=!1);var r=0,i=0,s=this._visibleLeaves().length-1,o;switch(t){case 1:if(this._rendered){o=this._rows().length()-1;break};case 0:o=this._totalRowsCount()-1;break;case 2:o=this._renderableRowsCount()-1}this._showRowHeader()&&s--,n&&o>0&&o--;if(s<0||o<0)r=i=s=o=-1;return new e.grid.cellInfoRange(new e.grid.cellInfo(r,i,null),new e.grid.cellInfo(s,o,null))},i.prototype._getDataItem=function(e){return this.dataView().item(e)},i.prototype._getFirstDataRowCell=function(t){var n,r,i,s=this._view(),o=this._rows(),u=e.grid.rowType;for(n=0,r=o.length();n<r;n++){i=s._getRowInfo(o.item(n));if(i.type&2)return new e.grid.cellInfo(t,n)}return e.grid.cellInfo.outsideValue},i.prototype._getNextCurrentCell=function(t,n,r,i){var s=n.cellIndex(),o=n.rowIndex(),u=e.getKeyCodeEnum(),a=this.mSketchTable,f=this._renderableBoundsCollection().getRenderedIndex(o),l=this._renderableBoundsCollection(),c,h=r===u.TAB,p=this,d=p._serverSideVirtualScrolling(),v=function(e,t,n,r){typeof r=="undefined"&&(r=!1);var i=e?l.forEachIndex:l.forEachIndexBackward,s=0,o=null;return i.call(l,t,-1,function(e){var t=e-p.mDataOffset;if(d&&(t<0||t>=a.count()))return o=e,!1;var i=a.row(t),u=i.isDataRow();if((!r||u)&&!(i.extInfo.state&1)){o=e;if(++s>=n)return!1}}),o};switch(r){case u.ENTER:case u.DOWN:(c=v(true,f+1,1))!=null&&(o=c);break;case u.PAGE_DOWN:(c=v(true,f+1,this.mPageSizeKey))!=null&&(o=c);break;case u.UP:(c=v(false,f-1,1))!=null&&(o=c);break;case u.PAGE_UP:(c=v(false,f-1,this.mPageSizeKey))!=null&&(o=c);break;case u.TAB:i?(s--,s<t.topLeft().cellIndex()&&(s=t.bottomRight().cellIndex(),(c=v(false,f-1,1,true))!=null?o=c:(c=v(false,l.capacity()-1,1,true))!=null&&(o=c))):(s++,s>t.bottomRight().cellIndex()&&(s=t.topLeft().cellIndex(),(c=v(true,f+1,1,true))!=null?o=c:(c=v(true,0,1,true))!=null&&(o=c)));break;case u.END:s=t.bottomRight().cellIndex();break;case u.HOME:s=t.topLeft().cellIndex();break;case u.LEFT:s>t.topLeft().cellIndex()&&s--;break;case u.RIGHT:s<t.bottomRight().cellIndex()&&s++}return new e.grid.cellInfo(s,o,this)},i.prototype._findUntilOuterDiv=function(e,t){var n=e,r=this.mOuterDiv[0],i,s,o=null;for(;n;n=n.parentNode){s=n.nodeName&&n.nodeName.toLowerCase();if(s){if(n===r){i=n;break}t[s]&&(o=n)}}return i?o:null},i.prototype._getStaticIndex=function(e){var t,n=this._getDataCellsRange(1);return this._hasSpannedCells()?-1:(e?t=Math.min(this.options.staticRowIndex,n.bottomRight().rowIndex()):t=Math.min(this.options.staticColumnIndex,n.bottomRight().cellIndex()),t<-1&&(t=-1),t)},i.prototype._getStaticOffsetIndex=function(e){var t=0;return e?this._showRowHeader()&&t++:(t=this._columnsHeadersTable().length,this.options.showFilter&&t++),t},i.prototype._getRealStaticColumnIndex=function(){var t=this._getStaticOffsetIndex(!0),n=this._getStaticIndex(!1),r=n+t;if(n>=0){var i=this._visibleLeaves(),s=this._allColumns(),o=i.length;t>0&&(s=s.slice(t-1,-1));if(r<o-1){var u=e.grid.getTompostParent(i[r],s);if(u)for(r++;r<o;r++){var a=e.grid.getTompostParent(i[r],s);if(a!==u){r--;break}}}r>=o&&(r=o-1)}return r},i.prototype._getRealStaticRowIndex=function(){var e=this._getStaticOffsetIndex(!1);return this._getStaticIndex(!0)+e},i.prototype._hasMerging=function(){var e=this._leaves(),t=!1;if(e)for(var n=0,r=e.length;n<r&&!t;n++){var i=e[n].options;t=t||i.parentVis&&i.rowMerge&&i.rowMerge!=="none"}return t},i.prototype._hasGrouping=function(){var e=this._leaves(),t=!1;for(var n=0,r=e.length;n<r&&!t;n++){var i=e[n].options;t=i.groupInfo&&i.groupInfo.position!=="none"}return t},i.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()},i.prototype._columnsHeadersTable=function(e){return arguments.length&&(this.mColumnsHeadersTable=e),this.mColumnsHeadersTable},i.prototype._view=function(){return this.mView},i.prototype._originalFooterRowData=function(){var e=this.mTFoot;return e&&e.length?e[0]:null},i.prototype._originalHeaderRowData=function(){var e=this.mTHead;return e&&e.length?e[e.length-1]:null},i.prototype._setAttr=function(e,t,r){var i=this;return e===this.element?arguments.length===2?(n.each(t,function(t,n){t in i._originalAttr||(i._originalAttr[t]=e.attr(t))}),e.attr(t)):(t in this._originalAttr||(this._originalAttr[t]=e.attr(t)),e.attr(t,r)):arguments.length===3?e.attr(t,r):e.attr(t)},i.prototype._totalRowsCount=function(){return this.mSketchTable.count()},i.prototype._renderableRowsCount=function(){return this._renderableBoundsCollection().capacity()},i.prototype._trackScrollingPosition=function(e,t){this.mScrollingState.x=e,this.mScrollingState.y=t},i.prototype._trackScrollingIndex=function(e){this.mScrollingState.index=e},i.prototype._uid=function(){return this.__uid===undefined&&(this.__uid=e.grid.getUID()),"wijgrid"+this.__uid},i.prototype._updateSelection=function(t,n){var r=t&&(t.type||"").toLowerCase()||"",i=this.selection(),s=this.currentCell();n=n||0,i.beginUpdate();if(r){if(s._isValid())switch(r){case"focusin":case"click":(!t.shiftKey||!i._multipleEntitiesAllowed())&&i._startNewTransaction(s),t.shiftKey&&t.ctrlKey?i._clearRange(new e.grid.cellInfoRange(s,s),n):i._selectRange(new e.grid.cellInfoRange(i._anchorCell(),s),t.ctrlKey,t.shiftKey,n,null);break;case"keydown":(!t.shiftKey||!i._multipleEntitiesAllowed())&&i._startNewTransaction(s),i._selectRange(new e.grid.cellInfoRange(i._anchorCell(),s),!1,t.shiftKey,0,null)}}else i.clear(),s._isValid()&&(i._startNewTransaction(s),i._selectRange(new e.grid.cellInfoRange(s,s),!1,!1,0,null));i.endUpdate()},i.prototype._viewPortBounds=function(e){return arguments.length&&(this.mViewPortBounds=e),this.mViewPortBounds},i.prototype._viewPortBoundsOfEntirelyShownRows=function(){var e=this._viewPortBounds(),t=!1,r=e.end-e.start+1;if(this._allowVirtualScrolling()){var i=this._view();r<i.getVirtualPageSize()&&(t=!0)}return t||(e=n.extend({},e),e.end--),e},i.WIN_RESIZE_TIMEOUT=200,i.IGNORE_WIN_RESIZE=!1,i.CSS={wijgrid:"wijmo-wijgrid",root:"wijmo-wijgrid-root",editedCellMarker:"wijmo-wijgrid-cell-edit",inputMarker:"wijgridinput",table:"wijmo-wijgrid-table",TH:"wijgridth",TD:"wijgridtd",cellContainer:"wijmo-wijgrid-innercell",aggregateContainer:"wijmo-wijgrid-aggregate",rowHeader:"wijmo-wijgrid-rowheader",currentRowHeaderCell:"wijmo-wijgrid-current-rowheadercell",currentHeaderCell:"wijmo-wijgrid-current-headercell",currentCell:"wijmo-wijgrid-current-cell",cellAlignLeft:"wijalign-left",cellAlignRight:"wijalign-right",cellAlignCenter:"wijalign-center",filterList:"wijmo-wijgrid-filterlist",filter:"wijmo-wijgrid-filter",filterInput:"wijmo-wijgrid-filter-input",filterTrigger:"wijmo-wijgrid-filter-trigger",filterNativeHtmlEditorWrapper:"wijgrid-input-wrapper",headerArea:"wijmo-wijgrid-header",footerArea:"wijmo-wijgrid-footer",headerRow:"wijmo-wijgrid-headerrow",row:"wijmo-wijgrid-row",dataRow:"wijmo-wijgrid-datarow",altRow:"wijmo-wijgrid-alternatingrow",emptyDataRow:"wijmo-wijgrid-emptydatarow",filterRow:"wijmo-wijgrid-filterrow",groupHeaderRow:"wijmo-wijgrid-groupheaderrow",groupFooterRow:"wijmo-wijgrid-groupfooterrow",groupHeaderRowCollapsed:"wijmo-wijgrid-groupheaderrow-collapsed",groupHeaderRowExpanded:"wijmo-wijgrid-groupheaderrow-expanded",footerRow:"wijmo-wijgrid-footerrow",loadingOverlay:"wijmo-wijgrid-overlay",loadingText:"wijmo-wijgrid-loadingtext",groupArea:"wijmo-wijgrid-group-area",groupAreaEmpty:"wijmo-wijgrid-group-area-empty",groupAreaButton:"wijmo-wijgrid-group-button",groupAreaButtonSort:"wijmo-wijgrid-group-button-sort",groupAreaButtonClose:"wijmo-wijgrid-group-button-close",groupToggleVisibilityButton:"wijmo-wijgrid-grouptogglebtn",fixedView:"wijmo-wijgrid-fixedview",scroller:"wijmo-wijgrid-scroller",dndHelper:"wijmo-wijgrid-dnd-helper",dndArrowTopContainer:"wijmo-wijgrid-dnd-arrow-top",dndArrowBottomContainer:"wijmo-wijgrid-dnd-arrow-bottom",freezingHandleV:"wijmo-wijgrid-freezing-handle-v",freezingHandleH:"wijmo-wijgrid-freezing-handle-h",freezingHandleContent:"wijmo-wijgrid-freezing-handle-content",resizingHandle:"wijmo-wijgrid-resizehandle",headerCellSortIcon:"wijmo-wijgrid-sort-icon",headerCellText:"wijmo-wijgrid-headertext",c1basefield:"wijmo-c1basefield",c1band:"wijmo-c1band",c1field:"wijmo-c1field"},i}(e.wijmoWidget);t.wijgrid=i,i.prototype.widgetEventPrefix="wijgrid",i.prototype.mDataPrefix="wijgrid",i.prototype.mCustomSortOrder=1e3,i.prototype.mPageSizeKey=10;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c",stateHighlight:"ui-btn-down-e"},this.wijCSS={wijgrid:"",wijgridTable:"",wijgridTH:"",wijgridTD:"",wijgridCellContainer:"",wijgridRowHeader:"",wijgridCurrentRowHeaderCell:"",wijgridCurrentHeaderCell:"",wijgridCurrentCell:"",wijgridCellAlignLeft:"",wijgridCellAlignRight:"",wijgridCellAlignCenter:"",wijgridFilterList:"",wijgridFilter:"",wijgridFilterInput:"",wijgridFilterTrigger:"",wijgridFilterNativeHtmlEditorWrapper:"",wijgridHeaderArea:"",wijgridFooterArea:"",wijgridHeaderRow:"",wijgridRow:"",wijgridDataRow:"",wijgridAltRow:"",wijgridEmptyDataRow:"",wijgridFilterRow:"",wijgridGroupHeaderRow:"",wijgridGroupFooterRow:"",wijgridGroupHeaderRowCollapsed:"",wijgridGroupHeaderRowExpanded:"",wijgridFooterRow:"",wijgridLoadingOverlay:"",wijgridLoadingText:"",wijgridGroupArea:"",wijgridGroupAreaButton:"",wijgridGroupAreaButtonSort:"",wijgridGroupAreaButtonClose:"",wijgridGroupToggleVisibilityButton:"",wijgridFixedView:"",wijgridScroller:"",wijgridDndHelper:"",wijgridDndArrowTopContainer:"",wijgridDndArrowBottomContainer:"",wijgridFreezingHandleV:"",wijgridFreezingHandleH:"",wijgridResizingHandle:"",wijgridHeaderCellSortIcon:"",wijgridHeaderCellText:""},this.allowColMoving=!1,this.allowColSizing=!1,this.allowEditing=!1,this.allowKeyboardNavigation=!0,this.allowPaging=!1,this.allowSorting=!1,this.allowVirtualScrolling=!1,this.cellStyleFormatter=undefined,this.columns=[],this.columnsAutogenerationMode="merge",this.culture="",this.cultureCalendar="",this.customFilterOperators=[],this.data=null,this.editingInitOption="auto",this.editingMode="none",this.ensureColumnsPxWidth=!1,this.filterOperatorsSortMode="alphabeticalCustomFirst",this.freezingMode="none",this.groupAreaCaption="Drag a column here to group by that column.",this.groupIndent=10,this.highlightCurrentCell=!1,this.highlightOnHover=!0,this.loadingText="Loading...",this.nullString="",this.pageIndex=0,this.pageSize=10,this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"},this.readAttributesFromData=!1,this.rowHeight=-1,this.rowStyleFormatter=undefined,this.scrollMode="none",this.selectionMode="singleRow",this.showFilter=!1,this.showFooter=!1,this.showGroupArea=!1,this.showSelectionOnRender=!0,this.showRowHeader=!1,this.staticColumnIndex=-1,this.staticColumnsAlignment="left",this.staticRowIndex=-1,this.totalRows=-1,this.afterCellEdit=null,this.afterCellUpdate=null,this.beforeCellEdit=null,this.beforeCellUpdate=null,this.cellClicked=null,this.columnDragging=null,this.columnDragged=null,this.columnDropping=null,this.columnDropped=null,this.columnGrouping=null,this.columnGrouped=null,this.columnResizing=null,this.columnResized=null,this.columnUngrouping=null,this.columnUngrouped=null,this.currentCellChanging=null,this.currentCellChanged=null,this.filterOperatorsListShowing=null,this.filtering=null,this.filtered=null,this.groupAggregate=null,this.groupText=null,this.invalidCellValue=null,this.pageIndexChanging=null,this.pageIndexChanged=null,this.selectionChanged=null,this.sorting=null,this.sorted=null,this.dataLoading=null,this.dataLoaded=null,this.loading=null,this.loaded=null,this.rendering=null,this.rendered=null}return e}();i.prototype.options=e.grid.extendWidgetOptions(e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijgrid",i.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function e(e){e&&(this.__attr=e)}return e.prototype.attrs=function(){return this.__attr},e.prototype.ensureAttr=function(){return this.__attr=this.__attr||{},this.__attr},e.prototype.attr=function(e,t){if(arguments.length==0)return this.__attr;if(arguments.length==1)return this.__attr?this.__attr[e]:null;this.ensureAttr()[e]=t},e.prototype.style=function(e,t){if(arguments.length==0)return this.__style;if(arguments.length==1)return this.__style&&this.__style[e];this.ensureStyle()[e]=t},e.prototype.deleteAttr=function(e){this.__attr&&delete this.__attr[e]},e.prototype.deleteStyle=function(e){this.__style&&delete this.__style[e]},e.prototype.ensureStyle=function(){return this.__style=this.__style||{},this.__style},e}();e.SketchObject=n;var r=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.visible=function(e){if(arguments.length==0)return this._visible!==!1;this._visible=e},t}(n);e.SketchCell=r;var i=function(e){function t(t,n){e.call(this,n),this.value=t}return __extends(t,e),t}(r);e.ValueCell=i;var s=function(e){function t(t,n){e.call(this,n),this.html=t||""}return __extends(t,e),t.nbsp=function(){return new t("&nbsp;",null)},t}(r);e.HtmlCell=s;var o=function(e){function t(t,n,r){e.call(this,r),this.rowType=t,this.renderState=n,this.extInfo={state:0}}return __extends(t,e),t.prototype.isDataRow=function(){return(this.rowType&2)==2},t.prototype.dataItemIndex=function(e){return typeof e=="undefined"&&(e=0),-1},t.prototype.cellCount=function(){return this._cells?this._cells.length:0},t.prototype._ensureCells=function(){this._cells=this._cells||[]},t.prototype.add=function(e){this._ensureCells(),this._cells.push(e)},t.prototype.insert=function(e,t){this._ensureCells(),this._cells.splice(e,0,t)},t.prototype.cell=function(e){return this._cells[e]},t.prototype.valueCell=function(e){return this.cell(e)},t.prototype.removeAt=function(e){if(!this._cells)throw"Wrong index";this._cells.splice(e,1)},t.prototype.clear=function(){},t.prototype.getRowInfo=function(){return{type:this.rowType,state:this.renderState,sectionRowIndex:null,dataRowIndex:null,virtualDataItemIndex:null,dataItemIndex:this.dataItemIndex(),$rows:null,_extInfo:this.extInfo}},t}(n);e.SketchRow=o;var u=function(e){function t(t,n,r){e.call(this,2|(t%2==1?4:0),n,r),this.originalRowIndex=t}return __extends(t,e),t.prototype.dataItemIndex=function(e){return typeof e=="undefined"&&(e=0),e+this.originalRowIndex},t.prototype.isDataRow=function(){return!0},t}(o);e.SketchDataRow=u;var a=function(e){function t(t,n){var r=t?16:32;e.call(this,r,1,n)}return __extends(t,e),t.prototype.getRowInfo=function(){var t=e.prototype.getRowInfo.call(this);return this.groupByValue!==undefined&&(t.groupByValue=this.groupByValue),t},t}(o);e.SketchGroupRow=a;var f=function(){function e(){this._table=[]}return e.prototype.getRawTable=function(){return this._table},e.prototype.row=function(e){return this._table[e]},e.prototype.valueAt=function(e,t){return this.row(e).valueCell(t).value},e.prototype.count=function(e){return typeof e=="number"&&(this._table.length=e),this._table.length},e.prototype.add=function(e){this._table.push(e)},e.prototype.insert=function(e,t){this._table.splice(e,0,t)},e.prototype.clear=function(){this._table.length=0},e.prototype.removeFirst=function(e){typeof e=="undefined"&&(e=1),this._table.splice(0,e)},e.prototype.removeLast=function(e){typeof e=="undefined"&&(e=1),this._table.splice(this._table.length-e,e)},e.prototype.replace=function(e,t){var n=this._table.splice(e,1,t);n&&n.length&&t&&(t.extInfo=n[0].extInfo)},e.prototype.updateIndexes=function(){for(var e=0;e<this._table.length;e++){var t=this._table[e];this._table[e].isDataRow()&&(t.originalRowIndex=e)}},e.prototype.isLazy=function(){return!1},e.prototype.ensureNotLazy=function(){},e}();e.SketchTable=f;var l=function(e){function t(t){e.call(this),this.mIsLazy=!0,this.pageSize=30;if(t==null)throw"Row source is null";this.mSource=t,this._table.length=t.count()}return __extends(t,e),t.prototype.isLazy=function(){return this.mIsLazy},t.prototype.ensureNotLazy=function(){if(!this.isLazy())return;this.ensureRange(),this.mIsLazy=!1},t.prototype.invalidate=function(){this._table=new Array(this.mSource.count()),this.isLazy()||this.updateRange()},t.prototype.row=function(t){return e.prototype.row.call(this,t)||this.ensureRange(Math.max(0,t-this.pageSize/2),this.pageSize),e.prototype.row.call(this,t)},t.prototype.ensureRange=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this._table.length-e);if(!this.isLazy())return;if(e<0)throw"Wrong range start";this._table.length=this.mSource.count();if(this._table.length==0){if(t>0)throw"Wrong range length";return}while(e<this._table.length&&this._table[e])e++;if(e>=this._table.length)return;var n=Math.min(e+t-1,this._table.length-1);while(n>=e&&this._table[n])n--;t=n-e+1,t>0&&this.updateRange(e,t)},t.prototype.updateRange=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this._table.length-e);if(this.mSource==null)throw"Cannot create sketch row because source is null";this.mSource.getRange(e,t,this._table,e)},t}(f);e.LazySketchTable=l})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function e(e,t){var n=t.split(".");this.namespace=n[0],this.widgetName=n[1],this.widgetFullName=this.namespace+"-"+this.widgetName,this.options=e||{},this._destroyed=!1,this._provideDefaults()}return e.prototype.option=function(e,t){var n=e;if(!arguments.length)return this.options;if(typeof e=="string"){if(t===undefined)return this.options[e];n={},n[e]=t,this._setOptions(n)}return this},e.prototype.enable=function(){this._setOption("disabled",!1)},e.prototype.disable=function(){this._setOption("disabled",!0)},e.prototype.destroy=function(){try{this._destroyed||(this._destroy(),this.element.unbind("."+this.widgetName),this.element.removeData(this.widgetFullName))}finally{this._destroyed=!0}},e.prototype.widget=function(){return this.element},e.prototype._destroy=function(){},e.prototype._setOptions=function(e){var n=this;t.each(e,function(e,t){n._setOption(e,t)})},e.prototype._attachToElement=function(t){var n=this;this.element=t,this.element&&(this.options.disabled&&this.disable(),this.element.data(e.DATA_INSTANCE_PROP,this),this.element.bind("remove."+this.widgetName,function(){n.destroy()}))},e.prototype._provideDefaults=function(){this.options.disabled=this.options.disabled||!1},e.prototype._setOption=function(e,t){var n=this["_preset_"+e],r=this.options[e];n&&(t=n.apply(this,[t,r]));if(t!==r){var i=this["_postset_"+e];this.options[e]=t,this._prepostsetOption(e,t),i&&i.apply(this,[t,r])}},e.prototype._prepostsetOption=function(e,t){},e.prototype._postset_disabled=function(e,t){this.element&&this.element[e?"addClass":"removeClass"](this.widgetFullName+"-disabled ui-state-disabled").attr("aria-disabled",e)},e.prototype._eventKey=function(e){return e+"."+this.widgetName},e.DATA_INSTANCE_PROP="wijemuinstance",e}();e.widgetEmulator=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){"use strict";function n(e){if(!$.isFunction(e))throw"'factory' must be a function.";t.push(e)}function r(e,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e,n);if(i)return i}throw"Unsupported column."}var t=[];e.registerColumnFactory=n,e.asColumnInstance=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function r(e,n,i){t.call(this,n,i||r.WIDGET_NAME),this.mFirstVisible=undefined,this.mWijgrid=e}return __extends(r,t),r.test=function(e){return!0},r.prototype._destroy=function(){var e=this._owner(),n=this._defCSS(),r=this._wijCSS();this.element&&(this.element.find("*").unbind("."+this.widgetName),this.element.removeClass(r.widget+" "+n.c1basefield+" "+r.c1basefield+" "+r.stateDefault).html(this.element.find("."+n.headerCellText).html())),e&&e._UIDragndrop()&&e._UIDragndrop(!1).detach(this),t.prototype._destroy.apply(this,arguments)},r.prototype._owner=function(){return this.mWijgrid},r.prototype._attachToElement=function(e){t.prototype._attachToElement.apply(this,arguments);var n=this._owner();n.options.allowColMoving&&this._draggable()&&n._UIDragndrop(!0).attach(this)},r.prototype._provideDefaults=function(){t.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,r.prototype.options)},r.prototype._defCSS=function(){return e.grid.wijgrid.CSS},r.prototype._wijCSS=function(){return this.mWijgrid?this.mWijgrid.options.wijCSS:{}},r.prototype._initializeCell=function(t,r,i,s,o){var u=e.grid.rowType,a=!0,f={$cell:t,$container:i,column:this.options,formattedValue:s,row:o,afterDefaultCallback:null};if((o.type&2||o.type===32||o.type===16)&&this.mWijgrid._allowVirtualScrolling()){var l=this.mWijgrid._view().getDefaultRowHeight();i.css({overflow:"hidden",height:l})}n.isFunction(this.options.cellFormatter)&&(a=!this.options.cellFormatter(f));if(a){var u=e.grid.rowType;switch(o.type&-5){case 2:this._initializeDataCell(t,i,s,o);break;case 64:this._initializeFooterCell(t,i);break;case 1:this._initializeHeaderCell(t,i);break;case 8:this._initializeFilterCell(t,i);break;case 16:this._initializeGroupHeaderCell(t,r,i,s,o);break;default:this._updateHTML(i,s)}n.isFunction(f.afterDefaultCallback)&&f.afterDefaultCallback(f)}},r.prototype._initializeDataCell=function(e,t,n,r){this._setupDataCell(t,n,r)},r.prototype._initializeFooterCell=function(e,t){this._setupFooterCell(t)},r.prototype._initializeHeaderCell=function(e,t){this._attachToElement(e);var n=this._defCSS(),r=this._wijCSS();e.addClass(r.widget+" "+n.c1basefield+" "+r.stateDefault),this._setupHeaderCell()},r.prototype._initializeFilterCell=function(e,t){var n=this._defCSS(),r=this._wijCSS();t.addClass(r.widget+" "+r.stateDefault),this._setupFilterCell(t)},r.prototype._initializeGroupHeaderCell=function(e,t,n,r,i){var s=this.mWijgrid;if(t===(s.options.showRowHeader?1:0)){var o=this.mWijgrid._groupedLeaves()[i._extInfo.groupLevel-1];if(o){var u=o.options.groupInfo;if(u&&u.outlineMode!=="none"){var a=this._defCSS(),f=s.options.wijCSS,l=i._extInfo.state&2?u.collapsedImageClass||f.iconArrowRight:u.expandedImageClass||f.iconArrowRightDown;r='<div class="'+f.icon+" "+l+" "+a.groupToggleVisibilityButton+" "+f.wijgridGroupToggleVisibilityButton+'">&nbsp;</div>'+r}}}this._updateHTML(n,r)},r.prototype._updateHTML=function(e,t){this.mWijgrid.mCellFormatter.updateHTML(e,t,!1)},r.prototype._getHeaderContent=function(){return this.options.headerText||"&nbsp;"},r.prototype._createHeaderContent=function(e){e.html(this._getHeaderContent())},r.prototype._decorateHeaderContent=function(e){var t=this._defCSS(),n=this._wijCSS();e.wrapInner('<span class="'+t.headerCellText+" "+n.wijgridHeaderCellText+'" />')},r.prototype._setupHeaderCell=function(){var e=this.element.children("."+this._defCSS().cellContainer).empty();this._createHeaderContent(e),this._decorateHeaderContent(e)},r.prototype._setupFilterCell=function(e){},r.prototype._setupDataCell=function(e,t,n){this._updateHTML(e,t)},r.prototype._setupFooterCell=function(e){this._updateHTML(e,this.options.footerText||this.options._footerTextDOM)},r.prototype._postset_headerText=function(e,t){this._setupHeaderCell()},r.prototype._postset_visible=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_width=function(e,t){this.options.ensurePxWidth=!0,this._owner().setSize()},r.prototype._draggable=function(){return!0},r.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},r.prototype._canDrag=function(){return this.options.allowMoving===!0},r.prototype._canDropTo=function(t){return e.grid.isChildOf(this._owner()._allColumns(),t,this)?!1:!0},r.prototype._canDropToGroupArea=function(){return!1},r.prototype._visible=function(){return this.options.visLeavesIdx>=0},r.prototype._isFirstVisible=function(){return this.mFirstVisible===undefined&&(this.mFirstVisible=this.options.visLeavesIdx===(this.mWijgrid._showRowHeader()?1:0)),this.mFirstVisible},r.WIDGET_NAME="wijmo.c1basefield",r}(t.widgetEmulator);t.c1basefield=r;var i=function(){function e(){this.allowMoving=!0,this.allowSizing=!0,this.cellFormatter=undefined,this.ensurePxWidth=undefined,this.footerText=undefined,this.headerText=undefined,this.textAlignment=undefined,this.visible=!0,this.width=undefined}return e}();t.c1basefield_options=i,r.prototype.options=e.grid.extendWidgetOptions({},new i),e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(n,r,i){e.call(this,n,r,i||t.WIDGET_NAME)}return __extends(t,e),t.getInitOptions=function(){return{clientType:t.CLIENT_TYPE,parentVis:!0}},t.test=function(e){return e.clientType===t.CLIENT_TYPE},t.prototype._provideDefaults=function(){e.prototype._provideDefaults.call(this),this.options.allowMoving=!1,this.options.allowSizing=!1,this.options.dataKey=null},t.prototype._initializeCell=function(t,n,r,i,s){var o=this._defCSS(),u=this._wijCSS();e.prototype._initializeCell.apply(this,arguments),t.attr({role:"rowheader",scope:"row"}).addClass(u.stateDefault+" "+u.content+" "+o.rowHeader+" "+u.wijgridRowHeader)},t.prototype._draggable=function(){return!1},t.prototype._isFirstVisible=function(){return!1},t.CLIENT_TYPE="c1rowheaderfield",t.WIDGET_NAME="wijmo.c1rowheaderfield",t.COLUMN_WIDTH=22,t}(t.c1basefield);t.c1rowheaderfield=r,r.prototype.options=e.grid.extendWidgetOptions({},new t.c1basefield_options),e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(r){function i(e,t,n){r.call(this,e,t,n||i.WIDGET_NAME),this.mFilterEditorInitialized=!1}return __extends(i,r),i.test=function(t){return e.grid.validDataKey(t.dataKey)},i.isGroupedColumn=function(t){var n=t.options;return e.grid.c1field.test(n)&&n.groupInfo&&n.groupInfo.position&&n.groupInfo.position!=="none"},i.prototype._destroy=function(){if(this.element){var e=this._defCSS();this.element.removeClass(e.c1field)}try{if(this.mFilterEditor){this.mFilterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType()){case"date":this.mFilterEditor.data("wijmo-wijinputdate")&&this.mFilterEditor.wijinputdate("destroy");break;case"text":this.mFilterEditor.data("wijmo-wijinputtext")&&this.mFilterEditor.wijinputtext("destroy");break;case"numberCurrency":case"numberNumber":case"numberPercent":this.mFilterEditor.data("wijmo-wijinputnumber")&&this.mFilterEditor.wijinputnumber("destroy")}}this._removeDropDownFilterList()}finally{this.mFilterEditor=null,this.mDropDownFilterList}r.prototype._destroy.apply(this,arguments)},i.prototype._provideDefaults=function(){r.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,i.prototype.options),n.isFunction(this.options.dataParser)&&(this.options.dataParser=new this.options.dataParser),this.options.groupInfo=this.options.groupInfo||{},e.grid.shallowMerge(this.options.groupInfo,i.prototype.options.groupInfo)},i.prototype._initializeHeaderCell=function(e,t){r.prototype._initializeHeaderCell.apply(this,arguments);var n=this._defCSS();e.addClass(n.c1field)},i.prototype._updateHTML=function(e,t){this._owner().mCellFormatter.updateHTML(e,t,this.options.encodeHtml)},i.prototype._isSortable=function(){return!0},i.prototype._isSortableUI=function(){var e=this._owner();return e.options.allowSorting&&this.options.allowSort&&this._isSortable()},i.prototype._canDropTo=function(e){return r.prototype._canDropTo.apply(this,arguments)?this.options.groupedIndex!==undefined&&e instanceof t.c1groupedfield?!1:!0:!1},i.prototype._canDropToGroupArea=function(){return this.options.groupedIndex===undefined},i.prototype._decorateHeaderContent=function(t){var i=this._owner(),s=e.grid.wijgrid.CSS,o=i.options.wijCSS;if(!this._isSortable())r.prototype._decorateHeaderContent.apply(this,arguments);else{var u=this._isSortableUI();u?t.wrapInner('<a class="'+s.headerCellText+" "+o.wijgridHeaderCellText+'" href="#" role="button" />').children("a").bind("click."+this.widgetName,this,n.proxy(this._onSortableElementClick,this)):r.prototype._decorateHeaderContent.apply(this,arguments);var a=s.headerCellSortIcon+" "+o.wijgridHeaderCellSortIcon+" "+o.icon,f=null;switch(this.options.sortDirection){case"ascending":t.append(f=n('<span class="'+a+" "+o.iconArrowUp+'"></span>'));break;case"descending":t.append(f=n('<span class="'+a+" "+o.iconArrowDown+'"></span>'))}f&&u&&f.css("cursor","pointer").bind("click."+this.widgetName,this,n.proxy(this._onSortableElementClick,this))}},i.prototype._onSortableElementClick=function(e){var t=e.data;return t.options.disabled?!1:(t.options.allowSort&&t._owner()._handleSort(t,e.ctrlKey),!1)},i.prototype._setupFilterCell=function(e){if(this.options.showFilter){var t=this._defCSS(),n=this._wijCSS();e.html('<table cellPadding="0" cellSpacing="0" class="'+t.filter+" "+n.wijgridFilter+" "+n.cornerAll+'">'+"<tr>"+'<td style="width:100%">'+'<input type="text" class="'+t.filterInput+" "+n.wijgridFilterInput+'" style="width:100%" />'+"</td>"+'<td class="'+t.filterTrigger+" "+n.wijgridFilterTrigger+" "+n.cornerRight+" "+n.stateDefault+'">'+'<span class="'+n.icon+" "+n.iconArrowDown+'"></span>'+"</td>"+"</tr>"+"</table>"),this._createFilterCellEditor(e)}},i.prototype._createFilterCellEditor=function(t){var r=this,i=this._owner(),s=e.grid.HTML5InputSupport.getDefaultInputType(i._isMobileEnv(),this.options),o=this._defCSS(),u=this._wijCSS(),a=this;t.find("."+o.filterTrigger).attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(e){a.options.disabled||n(this).addClass(u.stateDefault+" "+u.stateHover)}).bind("mouseleave."+this.widgetName,function(e){a.options.disabled||n(this).removeClass(u.stateDefault+" "+u.stateHover+" "+u.stateActive)}).bind("mouseup."+this.widgetName,this,function(e){a.options.disabled||n(this).removeClass(u.stateDefault+" "+u.stateActive)}).bind("mousedown."+this.widgetName,{column:this},n.proxy(this._onFilterBtnClick,this)).bind("click."+this.widgetName,function(e){e.preventDefault()});var f=i.parse(this.options,e.grid.filterHelper.getSingleValue(this.options.filterValue));if(f===null||f==="undefined")switch(e.grid.getDataType(this.options)){case"boolean":f=!1;break;case"number":case"currency":f=0;break;case"datetime":f=new Date;break;default:f=""}var l={culture:i.options.culture,cultureCalendar:i.options.cultureCalendar,disabled:i.options.disabled,decimalPlaces:function(e){var t=/^(n|p|c){1}(\d*)$/.exec(e);return t&&t[2]?parseInt(t[2],10):(t=/^(d){1}(\d*)$/.exec(e),t?0:2)}(this.options.dataFormatString),imeMode:this.options.imeMode,triggerMouseUp:function(e){r._closeAllDropdownsAndTestForThis()}};this.mFilterEditor=t.find("input").bind("keypress."+this.widgetName,n.proxy(this._onFilterEditorKeyPress,this));var c=function(e){r.mFilterEditorInitialized&&r._onFilterEditorValueChanged(e)};switch(this._getInputEditorType()){case"date":s==="text"?this.mFilterEditor.wijinputdate(n.extend(l,{date:f,dateFormat:this.options.dataFormatString||undefined,showTrigger:!0,dateChanged:function(e,t){c({value:t.data})}})):this._createHtmlEditor(this.mFilterEditor,s,e.grid.HTML5InputSupport.toStr(f,s));break;case"text":this.mFilterEditor.wijinputtext(n.extend(l,{text:f+"",textChanged:function(e,t){c({value:t.text})}}));break;case"numberCurrency":this.mFilterEditor.wijinputnumber(n.extend(l,{type:"currency",value:f,valueChanged:function(e,t){c({value:t.value})}}));break;case"numberNumber":s==="text"?this.mFilterEditor.wijinputnumber(n.extend(l,{value:f,valueChanged:function(e,t){c({value:t.value})}})):this._createHtmlEditor(this.mFilterEditor,s,e.grid.HTML5InputSupport.toStr(f,s));break;case"numberPercent":this.mFilterEditor.wijinputnumber(n.extend(l,{type:"percent",value:f*100,valueChanged:function(e,t){c({value:t.value/100})}}));break;default:throw"Unsupported editor type"}this.mFilterEditorInitialized=!0},i.prototype._createHtmlEditor=function(t,n,r){var i=e.grid.wijgrid.CSS,s=this._owner().options.wijCSS;return t[0].type=n,t.addClass(s.stateDefault).wrap('<span class="'+i.filterNativeHtmlEditorWrapper+" "+s.wijgridFilterNativeHtmlEditorWrapper+'"></span').val(r)},i.prototype._closeAllDropdownsAndTestForThis=function(){var e=this,t=this._owner(),r=!1;return t&&n.each(t._visibleLeaves(),function(t,n){var i=n;i.mDropDownFilterList&&(!r&&e===n&&(r=!0),i._removeDropDownFilterList())}),r},i.prototype._onFilterBtnClick=function(t){var r=this,s=t.data.column,o=s._owner();if(s.options.disabled||this._closeAllDropdownsAndTestForThis())return!1;t.target.focus();var u=e.grid.filterHelper.getSingleOperatorName(s.options.filterOperator).toLowerCase(),a=o.getFilterOperatorsByDataType(e.grid.getDataType(s.options)),f={operators:n.extend(!0,[],a),column:s.options},l=[];o._onFilterOperatorsListShowing(f),f.operators&&n.each(f.operators,function(e,t){l.push({label:t.displayName||t.name,value:t.name,selected:t.name.toLowerCase()===u})}),s.mDropDownFilterList=n("<div />").addClass(e.grid.wijgrid.CSS.filterList+" "+o.options.wijCSS.wijgridFilterList).appendTo(document.body).wijlist({autoSize:!0,maxItemsCount:i.DROPDOWN_FILTERS_MAX,selected:function(e,t){var n=r._getFilterValueFromEditor();s._removeDropDownFilterList(),o._handleFilter(s,t.item.value,n)}}).css("z-index",e.grid.getZIndex(o.mOuterDiv,9999)).wijlist("setItems",l).wijlist("renderList");var c=s.mDropDownFilterList.width()|150;s.mDropDownFilterList.width(l.length>i.DROPDOWN_FILTERS_MAX?c+20:c).wijlist("refreshSuperPanel").position({of:n(t.currentTarget),my:"left top",at:"left bottom"}),s.mDropDownFilterList.$button=n(t.currentTarget);var h=s.mDropDownFilterList.eventUID=e.grid.getUID();n(document).bind("mousedown."+s.widgetName+"."+h,{column:s},s._onDocMouseDown)},i.prototype._onFilterEditorKeyPress=function(t){if(t&&t.which===13){var n=this._owner(),r=this._getFilterValueFromEditor(),i=(this.options.filterOperator||"").toLowerCase();if(!r)r=undefined,i="nofilter";else if(!i||i==="nofilter")i=e.grid.getDataType(this.options)==="string"?"contains":"equals";this._removeDropDownFilterList(),n._handleFilter(this,i,r)}},i.prototype._onDocMouseDown=function(t){var r=t.data.column,i=n(t.target),s=e.grid.wijgrid.CSS,o=i.parents("."+s.filterList+":first"),u=i.is("."+s.filterTrigger)?i:i.parents("."+s.filterTrigger+":first");u.length&&u[0]===r.mDropDownFilterList.$button[0]||o.length&&o[0]===r.mDropDownFilterList[0]||r._removeDropDownFilterList()},i.prototype._removeDropDownFilterList=function(){if(this.mDropDownFilterList){var e=this.mDropDownFilterList.eventUID;this.mDropDownFilterList.remove(),this.mDropDownFilterList=null,n(document).unbind("mousedown."+this.widgetName+"."+e,this._onDocMouseDown)}},i.prototype._getInputEditorType=function(){switch(e.grid.getDataType(this.options)){case"number":return this.options.dataFormatString&&this.options.dataFormatString.indexOf("p")===0?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"text"}},i.prototype._getFilterValueFromEditor=function(){var t=this._owner(),n=e.grid.HTML5InputSupport.getDefaultInputType(t._isMobileEnv(),this.options),r;switch(this._getInputEditorType()){case"date":n==="text"?r=this.mFilterEditor.wijinputdate("option","date")||new Date:r=e.grid.HTML5InputSupport.parse(this.mFilterEditor.val(),n)||new Date;break;case"text":r=this.mFilterEditor.wijinputtext("option","text");break;case"numberNumber":if(n!=="text"){r=e.grid.HTML5InputSupport.parse(this.mFilterEditor.val(),n)||0;break};case"numberCurrency":r=this.mFilterEditor.wijinputnumber("option","value");break;case"numberPercent":r=this.mFilterEditor.wijinputnumber("option","value")/100}return r},i.prototype._setupFooterCell=function(t){var n=this.options;n.aggregate&&n.aggregate!=="none"?this._updateHTML(t,e.grid.stringFormat(n.footerText||"{0}",n._totalsValue||"")):r.prototype._setupFooterCell.apply(this,arguments)},i.prototype._postset_aggregate=function(e,t){this._owner().ensureControl(!1)},i.prototype._postset_allowSort=function(e,t){this._setupHeaderCell()},i.prototype._postset_dataType=function(e,t){throw"read-only"},i.prototype._postset_dataParser=function(e,t){this._owner().ensureControl(!1)},i.prototype._postset_disabled=function(e,t){this.mFilterEditor&&n.each(this.mFilterEditor.data(),function(t,n){n&&n.widgetName&&n.option&&n.option("disabled",e)})},i.prototype._postset_dataFormatString=function(e,t){this._owner().ensureControl(!1)},i.prototype._postset_filterOperator=function(e,t){this._owner().ensureControl(!0)},i.prototype._postset_filterValue=function(e,t){this._owner().ensureControl(!0)},i.prototype._postset_groupInfo=function(e,t){this._owner().ensureControl(!0)},i.prototype._postset_rowMerge=function(e,t){this._owner().ensureControl(!1)},i.prototype._postset_showFilter=function(e,t){this._owner().ensureControl(!1)},i.prototype._postset_sortDirection=function(e,t){this.options.sortOrder=0,this._owner().ensureControl(!0)},i.prototype._onFilterEditorValueChanged=function(e){},i.WIDGET_NAME="wijmo.c1field",i.DROPDOWN_FILTERS_MAX=8,i}(t.c1basefield);t.c1field=r;var i=function(e){function t(){e.apply(this,arguments),this.aggregate="none",this.allowSort=!0,this.dataKey=undefined,this.dataType=undefined,this.dataParser=undefined,this.dataFormatString=undefined,this.encodeHtml=!1,this.filterOperator="nofilter",this.filterValue=undefined,this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:!0,collapsedImageClass:undefined,expandedImageClass:undefined,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined},this.imeMode="auto",this.inputType=undefined,this.readOnly=!1,this.rowMerge="none",this.showFilter=!0,this.sortDirection="none",this.valueRequired=!1}return __extends(t,e),t}(t.c1basefield_options);t.c1field_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i),e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(r){function i(e,t,n){r.call(this,e,t,n||i.WIDGET_NAME)}return __extends(i,r),i.test=function(e){return t.c1field.test(e)&&e.dataType==="boolean"},i.prototype._setupDataCell=function(t,r,i){var s=this._owner(),o=this.options,u=this._defCSS(),a=s._allowCellEditing()&&o.readOnly!==!0,f=e.getKeyCodeEnum(),l=n('<input class="'+u.inputMarker+'" type="checkbox" />');a||l.prop("disabled",!0),s.parse(o,s.mDataViewWrapper.getValue(i.data,o.dataKey))===!0&&l.prop("checked","checked"),t.empty().append(l),a&&t.children("input").bind("mousedown",function(e){var n=t.parent()[0],r=s.currentCell();r.tableCell()!==n&&s._onClick({target:n}),r._isEdit()||s.beginEdit()}).bind("keydown",function(e){if(e.which===f.ENTER)return s._endEditInternal(e),!1})},i.WIDGET_NAME="wijmo.c1booleanfield",i}(t.c1field);t.c1booleanfield=r,e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function n(e,r,i){t.call(this,e,r,i||n.WIDGET_NAME)}return __extends(n,t),n.test=function(e){return!!e&&!!e.columns},n.prototype._provideDefaults=function(){t.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,n.prototype.options),this.options.dataKey=null},n.WIDGET_NAME="wijmo.c1bandfield",n}(t.c1basefield);t.c1bandfield=r;var i=function(e){function t(){e.apply(this,arguments),this.columns=[]}return __extends(t,e),t}(t.c1basefield_options);t.c1bandfield_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i),e.grid.registerColumnFactory(function(e,t){return!t||!t.columns?null:new r(e,t)})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function r(e,n,i,s){t.call(this,n,s||r.WIDGET_NAME),this.mWijgrid=e,this._attachToElement(i),this._createContent(),this.mWijgrid.options.allowColMoving&&this.mWijgrid._UIDragndrop(!0).attach(this)}return __extends(r,t),r.prototype._destroy=function(){this.mWijgrid._UIDragndrop()&&this.mWijgrid._UIDragndrop(!1).detach(this),this.mWijgrid=null,t.prototype._destroy.apply(this,arguments)},r.prototype._owner=function(){return this.mWijgrid},r.prototype._createContent=function(){var t=e.grid.wijgrid.CSS,r=this.mWijgrid.options.wijCSS,i=n('<span class="'+t.groupAreaButtonClose+" "+r.wijgridGroupAreaButtonClose+" "+r.stateDefault+" "+r.cornerAll+'"><span class="'+r.icon+" "+r.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.addClass(t.groupAreaButton+" "+r.wijgridGroupAreaButton+" "+r.stateDefault+" "+r.cornerAll).html(this.options.headerText||"").prepend(i),this._isSortableUI()&&this.element.bind("click."+this.widgetName,this,n.proxy(this._onSortableElementClick,this));if(this._isSortable()){var s=t.groupAreaButtonSort+" "+r.wijgridGroupAreaButtonSort+" "+r.icon;switch(this.options.sortDirection){case"ascending":this.element.append(n('<span class="'+s+" "+r.iconArrowUp+'"></span>'));break;case"descending":this.element.append(n('<span class="'+s+" "+r.iconArrowDown+'"></span>'))}}},r.prototype._onCloseClick=function(e){var t=e.data;return t.options.disabled||t.mWijgrid._handleUngroup(t),!1},r.prototype._onSortableElementClick=function(e){var t=e.data;return t.options.disabled?!1:(t.options.allowSort&&t.mWijgrid._handleSort(t,e.ctrlKey),!1)},r.prototype._canDrag=function(){return this.options.allowMoving===!0},r.prototype._canDropTo=function(e){return e instanceof r},r.prototype._canDropToGroupArea=function(){return this.options.groupedIndex!==this.mWijgrid._groupedLeaves().length-1},r.prototype._isSortable=function(){return e.grid.c1field.test(this.options)},r.prototype._isSortableUI=function(){return this.mWijgrid.options.allowSorting&&this.options.allowSort&&this._isSortable()},r.WIDGET_NAME="wijmo.c1groupedfield",r}(t.widgetEmulator);t.c1groupedfield=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){this.element.css("display","inline").addClass(this.options.wijCSS.widget)},t.prototype._destroy=function(){this.mBtnElement=null},t.prototype._init=function(){var e=this;this.mBtnElement=this._createElement(this.options).addClass("wijmo-wijgrid-commandbutton").click(function(t){!e.options.disabled&&n.isFunction(e.options.click)&&e.options.click.call(self,t)}),this.element.append(this.mBtnElement),this._attachWidget(this.mBtnElement,this.options)},t.prototype._setOption=function(t,n){var r=this.options[t];e.prototype._setOption.apply(this,[t,n]),r!==n&&t==="disabled"&&this._onDisabledChanged(n===!0)},t.prototype._createElement=function(e){throw"not implemented"},t.prototype._attachWidget=function(e,t){throw"not implemented"},t.prototype._btnElement=function(){return this.mBtnElement},t.prototype._onDisabledChanged=function(e){},t}(e.wijmoWidget);t.wijgridcommandbuttonbase=r;var i=function(){function e(){this.text=undefined,this.click=undefined,this.iconClass=undefined,this.disabled=!1}return e}();t.wijgridcommandbuttonbase_options=i,r.prototype.options=e.grid.extendWidgetOptions(e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijgridcommandbuttonbase",r.prototype);var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createElement=function(e){var t=n('<a href="#" />').text(e.text||"");return e.disabled&&t.prop("disabled","disabled"),t},t.prototype._attachWidget=function(e,t){},t.prototype._onDisabledChanged=function(e){var t=this._btnElement();t&&t.prop("disabled",e)},t}(r);t.wijgridcommandlink=s,n.wijmo.registerWidget("wijgridcommandlink",n.wijmo.wijgridcommandbuttonbase,s.prototype);var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createElement=function(e){return n('<input type="button" />').val(e.text)},t.prototype._attachWidget=function(e,t){e.button({disabled:t.disabled})},t.prototype._onDisabledChanged=function(e){var t=this._btnElement();t&&t.button({disabled:e})},t}(r);t.wijgridcommandbutton=o,n.wijmo.registerWidget("wijgridcommandbutton",n.wijmo.wijgridcommandbuttonbase,o.prototype);var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createElement=function(e){var t=n("<button />"),r=!!e.text;return r?t.text(e.text):t.html("&nbsp;"),t},t.prototype._attachWidget=function(e,t){var n=!!t.text;e.button({disabled:t.disabled,icons:{primary:t.iconClass},text:n})},t.prototype._onDisabledChanged=function(e){var t=this._btnElement();t&&t.button({disabled:e})},t}(r);t.wijgridcommandimagebutton=u,n.wijmo.registerWidget("wijgridcommandimagebutton",n.wijmo.wijgridcommandbuttonbase,u.prototype);var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createElement=function(e){var t=n("<button />").html("&nbsp;");return t},t.prototype._attachWidget=function(e,t){e.button({disabled:t.disabled,icons:{primary:t.iconClass},text:!1})},t.prototype._onDisabledChanged=function(e){var t=this._btnElement();t&&t.button({disabled:e})},t}(r);t.wijgridcommandimage=a,n.wijmo.registerWidget("wijgridcommandimage",n.wijmo.wijgridcommandbuttonbase,a.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.test=function(e){return!!e&&!!e.buttonType},r.prototype._provideDefaults=function(){t.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,r.prototype.options),this.options.dataKey=null},r.prototype._createCommand=function(e,t,r,i){var s=n.extend({},{text:t.text,iconClass:t.iconClass,disabled:this._owner().options.disabled,click:function(e){var s=!0;if(n.isFunction(t.click)){var o=t.click.apply(this,[e,{row:r,column:this.options}]);s=o!==!1&&!e.isDefaultPrevented()}s&&i&&i.apply(this,[e,{row:r}]),e.preventDefault()}}),o=n("<div />");e.append(o);switch(this.options.buttonType){case"link":o.wijgridcommandlink(s);break;case"imageButton":o.wijgridcommandimagebutton(s);break;case"button":o.wijgridcommandbutton(s);break;case"image":o.wijgridcommandimage(s);break;default:throw"Unknown buttonType"}},r}(t.c1basefield);t.c1buttonbasefield=r;var i=function(e){function t(){e.apply(this,arguments),this.buttonType="button"}return __extends(t,e),t}(t.c1basefield_options);t.c1buttonbasefield_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(n){function r(e,t,i){n.call(this,e,t,i||r.WIDGET_NAME)}return __extends(r,n),r.test=function(e){return!!t.c1buttonbasefield.test(e)||!!e.command},r.prototype._provideDefaults=function(){n.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,t.c1basefield.prototype.options),this.options.command=this.options.command||{},e.grid.shallowMerge(this.options.command,r.prototype.options.command)},r.prototype._setupDataCell=function(e,t,n){this._createCommand(e,this.options.command,n,null)},r.WIDGET_NAME="wijmo.c1buttonfield",r}(t.c1buttonbasefield);t.c1buttonfield=r;var i=function(e){function t(){e.apply(this,arguments),this.command=undefined}return __extends(t,e),t}(t.c1buttonbasefield_options);t.c1buttonfield_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1buttonbasefield.prototype.options,new i),e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function n(e,r,i){t.call(this,e,r,i||n.WIDGET_NAME)}return __extends(n,t),n.test=function(e){return!!(e.showDeleteButton&&e.showDeleteButton!==!1||e.showEditButton&&e.showEditButton!==!1||e.cancelCommand||e.deleteCommand||e.editCommand||e.updateCommand)},n.prototype._provideDefaults=function(){t.prototype._provideDefaults.call(this),e.grid.shallowMerge(this.options,n.prototype.options),this.options.cancelCommand=this.options.cancelCommand||{},e.grid.shallowMerge(this.options.cancelCommand,n.prototype.options.cancelCommand),this.options.deleteCommand=this.options.deleteCommand||{},e.grid.shallowMerge(this.options.deleteCommand,n.prototype.options.deleteCommand),this.options.editCommand=this.options.editCommand||{},e.grid.shallowMerge(this.options.editCommand,n.prototype.options.editCommand),this.options.updateCommand=this.options.updateCommand||{},e.grid.shallowMerge(this.options.updateCommand,n.prototype.options.updateCommand)},n.prototype._setupDataCell=function(e,t,n){var r=this.options,i=this._owner();n.state&16?r.showEditButton&&(this._createCommand(e,r.updateCommand,n,function(e,t){i.updateRow()}),e.append(document.createTextNode("\u00a0")),this._createCommand(e,r.cancelCommand,n,function(e,t){i.cancelRowEditing()})):(r.showEditButton&&this._createCommand(e,r.editCommand,n,function(e,t){i.editRow(n.dataItemIndex)}),r.showDeleteButton&&(r.showEditButton&&e.append(document.createTextNode("\u00a0")),this._createCommand(e,r.deleteCommand,n,function(e,t){i.deleteRow(n.dataItemIndex)}))),e.addClass("wijmo-wijgrid-innercell-command")},n.WIDGET_NAME="wijmo.c1commandbuttonfield",n}(t.c1buttonbasefield);t.c1commandbuttonfield=r;var i=function(e){function t(){e.apply(this,arguments),this.showDeleteButton=!1,this.showEditButton=!1,this.cancelCommand={text:"Cancel",iconClass:"ui-icon-close",click:undefined},this.deleteCommand={text:"Delete",iconClass:"ui-icon-trash",click:undefined},this.editCommand={text:"Edit",iconClass:"ui-icon-pencil",click:undefined},this.updateCommand={text:"Update",iconClass:"ui-icon-disk",click:undefined}}return __extends(t,e),t}(t.c1buttonbasefield_options);t.c1commandbuttonfield_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1buttonbasefield.prototype.options,new i),e.grid.registerColumnFactory(function(e,t){return r.test(t)?new r(e,t):null})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";function i(t){var n=[];return e.grid.traverse(t,function(e){n.push(e)}),n}function s(t,n){if(!t||!n||t.options.parentIdx===-1)return null;var r=n[t.options.parentIdx];return r.options.parentIdx===-1?r:e.grid.getTompostParent(r,n)}function o(e,t,r){if(n.isArray(r.options.columns)&&t.options.parentIdx>=0){if(t.options.parentIdx===r.options.travIdx)return!0;if(t.options.parentIdx>r.options.travIdx)for(;;){t=e[t.options.parentIdx];if(t.options.travIdx===r.options.travIdx)return!0;if(t.options.parentIdx===-1)break}}return!1}function u(e){return a(e,0,-1)}function a(e,t,n){var r,i,s;if(e)for(r=0,i=e.length;r<i;r++)s=e[r],s.options&&(s=s.options),s.linearIdx=r,s.travIdx=t++,s.parentIdx=n,s.columns&&(t=a(s.columns,t,t-1));return t}function f(t,r){var i,s,o;if(t&&n.isFunction(r))for(i=0;i<t.length;i++){o=t[i],o.options&&(o=o.options),s=t.length,r(o,t);if(t.length!==s){i--;continue}o.columns&&e.grid.traverse(o.columns,r)}}var n=jQuery,r=function(){function t(){}return t.prototype.generateSpanTable=function(e){return this._height=this._width=this._inc=this._shift=0,this._table=[],this._traverseList=[],this._savedXPos=[],this._generateSpanTable(e,!0)},t.prototype._generateSpanTable=function(t,n){this._height=this.getVisibleHeight(t,n),this._traverseList=e.grid.flatten(t),this._width=this._traverseList.length;for(var r=0;r<this._height;r++){this._table[r]=[];for(var i=0;i<this._width;i++)this._table[r][i]={column:null,colSpan:0,rowSpan:0}}return this._setTableValues(t,0,0),this._table},t.prototype.getVisibleHeight=function(e,t){var r,i,s,o,u=0;if(n.isArray(e))for(r=0,i=e.length;r<i;r++)o=this.getVisibleHeight(e[r],t),u=Math.max(u,o);else{s=e.visible===undefined?!0:e.visible,e.parentVis=s&&t;if(n.isArray(e.columns)){for(r=0,i=e.columns.length;r<i;r++)o=this.getVisibleHeight(e.columns[r],e.parentVis),u=Math.max(u,o);if(!e.parentVis)return u;e.isLeaf=u===0,u++}else e.isLeaf=!0,e.parentVis&&(u=1)}return u},t.prototype._getVisibleParent=function(e){while(e){e=this._traverseList[e.parentIdx];if(e&&(e.parentVis||e.parentVis===undefined))return e}return null},t.prototype._setTableValues=function(e,t,r){var i,s,o,u,a,f;if(n.isArray(e))for(i=0,s=e.length;i<s;i++)this._setTableValues(e[i],t,r);else{if(e.travIdx===undefined)throw"undefined travIdx";o=r+this._shift,e.parentVis&&(u=o+this._inc,this._table[t][u].column=e,this._savedXPos[e.travIdx]=u);if(n.isArray(e.columns))for(i=0,s=e.columns.length;i<s;i++)this._setTableValues(e.columns[i],t+1,r);e.parentVis?this._shift-o===0?(this._table[t][this._savedXPos[e.travIdx]].rowSpan=this._height-t,this._shift++):this._table[t][this._savedXPos[e.travIdx]].colSpan=this._shift-o:!n.isArray(e.columns)&&this._height>0&&(f=this._getVisibleParent(e),a=f?f.isLeaf:!1,a&&this._inc++,t>=this._height&&(t=this._height-1),u=r+this._shift+this._inc,this._table[t][u].column=e,a||(f&&this._savedXPos[f.travIdx]===u&&this._shiftTableElements(u,t),this._inc++))}},t.prototype._shiftTableElements=function(e,t){var n;for(n=0;n<t;n++)this._table[n][e+1]=this._table[n][e],this._table[n][e]={column:null,colSpan:0,rowSpan:0},this._table[n][e+1].column&&this._savedXPos[this._table[n][e+1].column.travIdx]++},t}();t.bandProcessor=r,t.flatten=i,t.getTompostParent=s,t.isChildOf=o,t.setTraverseIndex=u,t.traverse=f})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(t){this._dvFilteringSettings=undefined,this._dvPagingSettings=undefined,this._dvSortingSettings=undefined,this._wgFilteringSettings=undefined,this._wgPagingSettings=undefined,this._wgSortingSettings=undefined;if(!t)throw"exception";this._wijgrid=t,this._dataView=t.mDataViewWrapper.dataView(),this._filterCache=new e.grid.filterOperatorsCache(t)}return r.prototype.compareSettings=function(){var t=!0,n,r,i,s;t=(n=this.DVPagingSettings())===(r=this.WGPagingSettings()),!t&&n&&r&&(t=n.pageSize===r.pageSize&&n.pageIndex===r.pageIndex);if(t){t=(n=this.DVSortingSettings())===(r=this.WGSortingSettings());if(!t&&n&&r&&(s=n.length)===r.length){t=!0;for(i=0;i<s&&t;i++)t=n[i].dataKey===r[i].dataKey&&n[i].sortDirection===r[i].sortDirection}}return t&&(n=this.DVFilteringSettings(),r=this.WGFilteringSettings(),t=e.grid.compareObj(n,r)),t},r.prototype.DVFilteringSettings=function(){function e(t,r){var i;n.each(t,function(t,s){if(typeof s=="string")i=s;else if(n.isArray(s))e(s,r);else{var o=s;r.filterValue.push(o.value),r.filterOperator.push({name:o.customProps&&o.customProps.originalOperator||o.operator,condition:i})}})}if(this._dvFilteringSettings===undefined){var t=[],r=this._dataView.filter();r&&n.each(r,function(r,i){var s={dataKey:r};if(n.isArray(i))s.filterValue=[],s.filterOperator=[],e(i,s);else if(n.isPlainObject(i)){var o=i;s.filterValue=o.value,s.filterOperator=o.customProps&&o.customProps.originalOperator||i.operator||"Equals",s.customProps=o.customProps}else s.filterValue=i,s.filterOperator="Equals";t.push(s)}),this._dvFilteringSettings=t.length?t:null}return this._dvFilteringSettings},r.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var t=e.grid.asPagedDataView(this._dataView);if(t){var n=t.pageSize();this._dvPagingSettings=n>0?{pageSize:t.pageSize(),pageIndex:t.pageIndex()}:null}}return this._dvPagingSettings},r.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var t=[],r=e.data.sorting.compile(this._dataView.sort()).normalized;r&&n.each(r,function(e,n){n!==null&&t.push({dataKey:typeof n=="string"?n:n.property,sortDirection:n.asc||n.asc===undefined?"ascending":"descending",sortOrder:undefined,customProps:n.customProps})}),this._dvSortingSettings=t.length?t:null}return this._dvSortingSettings},r.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var r=[],i=this._wijgrid._leaves(),s=this;i&&n.each(i,function(n,i){if(i instanceof t.c1field){var o=i.options,u=e.grid.deepExtend({},{foo:o.filterValue}).foo,a=e.grid.deepExtend({},{foo:o.filterOperator}).foo,f=e.grid.filterHelper.verify(a,u,o.dataType,s._filterCache);f&&r.push({owner:i,dataKey:o.dataKey,filterValue:f.filterValue,filterOperator:f.filterOperator,customProps:{travIdx:o.travIdx}})}}),this._wgFilteringSettings=r.length?r:null}return this._wgFilteringSettings},r.prototype.WGPagingSettings=function(){return this._wgPagingSettings===undefined&&(this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null),this._wgPagingSettings},r.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var e={},r=[],i=this._wijgrid._groupedLeaves(!0),s=this._wijgrid._leaves(),o=0;n.each(i,function(t,n){if(n._isSortable()){var r=n.options;r.sortDirection==="none"&&(r.sortDirection="ascending"),e[r.dataKey]={dataKey:r.dataKey,sortDirection:r.sortDirection,sortOrder:o++,customProps:{travIdx:r.travIdx}}}}),o++,n.each(s,function(n,r){if(r instanceof t.c1field&&r._isSortable()){var i=r.options;if(i.sortDirection==="ascending"||i.sortDirection==="descending")e[i.dataKey]||(e[i.dataKey]={dataKey:i.dataKey,sortDirection:i.sortDirection,sortOrder:(i.sortOrder||0)+o,customProps:{travIdx:i.travIdx}})}}),n.each(e,function(e,t){r.push(t)}),r.sort(function(e,t){return e.sortOrder-t.sortOrder}),n.each(r,function(e,t){delete t.sortOrder}),this._wgSortingSettings=r.length?r:null}return this._wgSortingSettings},r.prototype.MapWGToDV=function(){var e=this,r={},i,s;this._mapPagingParams()&&(i=this.WGPagingSettings())?(r.pageIndex=i.pageIndex,r.pageSize=i.pageSize):r.pageSize=-1;if(this._mapSortingParams()){r.sort=[];if(i=this.WGSortingSettings())r.sort=[],n.each(i,function(e,t){r.sort.push({property:t.dataKey,asc:t.sortDirection==="ascending",customProps:t.customProps})})}this._wijgrid.mDeficientFilters={};if(this._mapFilteringParams()){n.each(this._wijgrid._leaves(),function(n,r){if(r instanceof t.c1field){var i=r.options;i.filterOperator===undefined^i.filterValue===undefined&&(e._wijgrid.mDeficientFilters[i.dataKey]={filterOperator:i.filterOperator,filterValue:i.filterValue})}}),r.filter={};if(i=this.WGFilteringSettings())r.filter=this._convertFilterToDV(i);n.isEmptyObject(r.filter)&&(r.filter=null)}return r},r.prototype.MapDVToWG=function(){var r,i={},s={},o=this._mapSortingParams(),u=this._mapPagingParams(),a=this._mapFilteringParams(),f=e.grid.asPagedDataView(this._dataView),l=this;n.each(this._wijgrid._leaves(),function(e,n){if(n instanceof t.c1field){var r=n.options;o&&(r.sortOrder=0,r.sortDirection="none"),a&&(r.filterOperator="nofilter",r.filterValue=undefined),i[r.dataKey]=n,r.travIdx>=0&&(s[r.travIdx]=n)}}),u&&f&&(this._wijgrid.options.pageSize=f.pageSize(),this._wijgrid.options.pageIndex=f.pageIndex()),o&&(r=this.DVSortingSettings())&&n.each(r,function(e,t){var n;t.customProps&&t.customProps.travIdx>=0&&(n=s[t.customProps.travIdx]);if(!n||n.options.dataKey!==t.dataKey)n=i[t.dataKey];n&&(n.options.sortDirection=t.sortDirection,n.options.sortOrder=e)}),a&&((r=this.DVFilteringSettings())&&n.each(r,function(e,t){var r;t.customProps&&t.customProps.travIdx>=0&&(r=s[t.customProps.travIdx]);if(!r||r.options.dataKey!==t.dataKey)r=i[t.dataKey];if(r){var o=r.options;o.filterValue=t.filterValue,o.filterOperator=t.filterOperator,n.isPlainObject(o.filterOperator)&&(o.filterOperator=o.filterOperator.name),delete l._wijgrid.mDeficientFilters[o.dataKey]}}),n.each(this._wijgrid.mDeficientFilters,function(e,t){var n=i[e].options;n.filterOperator=t.filterOperator,n.filterValue=t.filterValue}))},r.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()},r.prototype._mapSortingParams=function(){return!this._wijgrid._serverShaping()},r.prototype._mapFilteringParams=function(){return!this._wijgrid._serverShaping()},r.prototype.makeProxyFilter=function(t,r,i,s){i=i.toLowerCase();var o=this,u=t.options,a=u.dataType==="datetime",f={property:r,operator:i,value:s,customProps:{travIdx:u.travIdx}},l=this._filterCache.getByNameInt(i),c=e.data.filtering.ops[i];if(i!=="nofilter"&&(l.isCustom||a)){f.customProps.originalOperator=f.operator;if(l.isCustom)f.operator=n.extend(!0,{},l.op),f.operator.apply=f.operator.operator;else{f.operator=n.extend(!0,{},c);var h=u.inputType?e.grid.TimeUnitConverter.convertInputType(u.inputType):e.grid.TimeUnitConverter.convertFormatString(u.dataFormatString||"d");f.operator.apply=function(t,n){return t instanceof Date||(t=o._wijgrid.parse(u,t)),n instanceof Date||(n=o._wijgrid.parse(u,n)),e.grid.TimeUnitConverter.cutDate(t,h),e.grid.TimeUnitConverter.cutDate(n,h),c.apply(t,n)}}}return f},r.prototype._convertFilterToDV=function(e){var t={},r=this;return n.each(e,function(e,i){var s=i.dataKey,o=[],u="and",a,f,l,c;if(!n.isPlainObject(i))return;f=i.filterOperator,l=i.filterValue;if(f==null)return;n.isArray(f)||(f=[f]),n.isArray(l)||(l=[l]);if(f.length!=l.length)throw"The number of filter operators must match the number of filter values";if(f.length==0)return;n.each(f,function(e,t){function h(){c.length>1?c.splice(0,0,"or"):c=c[0]}function p(){u==null&&(u=a,o.splice(0,0,a))}var f;typeof t=="string"&&(t={name:t});if(!n.isPlainObject(t)||!t.name)throw"Invalid filter operator";f=l[e],n.isArray(f)||(f=[f]),c=n.map(f,function(e){return r.makeProxyFilter(i.owner,s,t.name,e)}),u=null,a=t.condition||"or",o.length<=1||u==a?c.length==1||o.length<=1||u=="or"?(o=o.concat(c),p()):(h(),o.push(c),p()):(h(),o=[o,c],p())}),n.each(o,function(e,t){n.isArray(t)&&t.length==2&&(o[e]=t[1])}),o.length==2&&typeof (o[0]==="string")&&o.shift(),o.length==1&&(o=o[0]),t[s]=o}),t},r}();t.settingsManager=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";function i(e){return e&&"pageCount"in e?e:null}function s(e){return e&&"commitEdit"in e?e:null}var n=jQuery,r=function(){function t(e){this._domSource=null,this._ignoreAllEvents=!1,this._ignoreChangeEvent=!1,this._ignoreCurrentChangedEvent=!1,this._userData=null,this._totals=null,this._changeTimer=0,this._toDispose=[],this._isOwnDataView=!1,this._isWijdatasource=!1,this._isKODataView=!1,this._isDynamicWijdatasource=!1,this._wijgrid=e,this._createDataViewWrapper()}return t.prototype.data=function(){var t=this._getDataViewInst(),n=e.grid.asPagedDataView(t);return{totalRows:n!=null?n.totalItemCount():(t.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}},t.prototype.dataView=function(){return this._getDataViewInst()},t.prototype.dispose=function(){var e=this._getDataViewInst();n.each(this._toDispose,function(e,t){t.dispose()}),e&&this._isOwnDataView&&e.dispose(),this._wijgrid.mWijDataView=null},t.prototype.ignoreChangeEvent=function(e){if(!arguments.length)return this._ignoreChangeEvent;this._ignoreChangeEvent=e===!0},t.prototype.ignoreCurrentChangedEvent=function(e){if(!arguments.length)return this._ignoreCurrentChangedEvent;this._ignoreCurrentChangedEvent=e===!0},t.prototype.isDataLoaded=function(){var e=this._getDataViewInst();return e.isLoaded()},t.prototype.isOwnDataView=function(){return this._isOwnDataView},t.prototype.getFieldsInfo=function(){var e=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(e.getProperties())},t.prototype._propDescriptorsToFieldsInfo=function(e){var t={};return e&&n.each(e,function(e,n){if(n.name==="$$hash"||n.name==="$$hashKey")return;t[n.name]={name:n.name,type:n.type||"string"}}),t},t.prototype.isBoundedToDOM=function(){return this._domSource!==null},t.prototype.load=function(t){this._userData=t;var n=this._getDataViewInst();n||(this._createDataViewWrapper(),n=this._getDataViewInst()),this._onDataViewLoading();var r=new e.grid.settingsManager(this._wijgrid);if(t&&t.forceDataLoad||this._needToLoad(r)){var i=r.MapWGToDV(),s=!1;this._isWijdatasource&&!this._isDynamicWijdatasource&&n.isLoaded()&&(s=!0);var o=e.grid.asPagedDataView(n),u=-1;if(o&&i.pageSize>=0&&(u=o.totalItemCount())>=0){if(this._isOwnDataView&&!this._isKODataView&&!this._isDynamicWijdatasource&&o.pageSize()>0){var a=o.getSource();a&&a.length<u&&(u=a.length)}var f=Math.ceil(u/i.pageSize)||1,l=i.pageIndex;l>=f&&(l=Math.max(0,f-1)),i.pageIndex=l}this.ignoreCurrentChangedEvent(!0),n.refresh(i,s)}else this.isDataLoaded()&&(this._onDataViewLoaded(),this._onDataViewReset())},t.prototype.currentPosition=function(e){var t=this._getDataViewInst();if(!arguments.length)return t.currentPosition();this.ignoreCurrentChangedEvent(!0);try{t.currentPosition(e)}finally{this.ignoreCurrentChangedEvent(!1)}},t.prototype.getValue=function(e,t){var n=this._getDataViewInst();return typeof t=="number"&&(t+=""),n.getProperty(e,t)},t.prototype.setValue=function(e,t,n){var r=this._getDataViewInst();this.ignoreChangeEvent(!0);try{typeof t=="number"&&(t+=""),r.setProperty(e,t,n)}finally{this.ignoreChangeEvent(!1)}},t.prototype.makeDirty=function(){this._totals=null},t.prototype._createDataViewWrapper=function(){var t,r=this._wijgrid.options.data,i=this._getDataViewInst(),s=!1;if(i)return;r||(this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData),r=this._domSource.items),s=typeof wijdatasource!="undefined"&&r instanceof wijdatasource,this._isKODataView=r instanceof e.grid.koDataView,this._isOwnDataView=n.isArray(r)||s||this._isKODataView,this._isWijdatasource=!!this._isOwnDataView&&!!s,this._isDynamicWijdatasource=!!(this._isOwnDataView&&s&&r.dynamic);if(this._isOwnDataView&&!this._isKODataView){!this._domSource&&this._wijgrid.options.readAttributesFromData&&this._moveAttributesToExpando(r);var o=this.isBoundedToDOM()&&e.grid.getTableSection(this._wijgrid.element,2);i=e.grid.GridDataView.create(e.data.asDataView(this._parseOwnData(r,o)))}else i=r;this._wijgrid.mWijDataView=i,this._toDispose.push(i.isLoading.subscribe(n.proxy(this._onDataViewLoadingInternal,this))),this._toDispose.push(i.isLoaded.subscribe(n.proxy(this._onDataViewLoadedInternal,this))),this._toDispose.push(i.subscribe(n.proxy(this._onDataViewChangeInternal,this))),this._toDispose.push(i.currentPosition.subscribe(n.proxy(this._onDataViewCurrentChangedInternal,this)))},t.prototype._parseOwnData=function(t,r){if(t&&t.length){var i=n.extend(!0,[],this._wijgrid.options.columns),s=this._wijgrid,o=e.data.ArrayDataViewBase._getProps(t[0])||[],u=this._propDescriptorsToFieldsInfo(o),a=[];s._prepareColumnOptions(i,"merge",u,!0,!0),e.grid.traverse(i,function(e){s._needParseColumnDOM(e)&&a.push(e)}),a.length&&r&&n.each(t,function(t,n){e.grid.dataViewWrapper._parseDataItem(s,n,r&&r.rows[t],a)})}return t},t._parseDataItem=function(t,r,i,s){return n.each(s,function(n,s){var o=r[s.dataKey],u=t.parse(s,o,r,i.cells[s.dataKey]);if(e.grid.isNaN(u)){var a=null;i&&(a=i.cells[s.dataKey]),u=t.parseFailed(s,o,r,a)}r[s.dataKey]=u}),r},t.prototype._getDataViewInst=function(){return this._wijgrid.mWijDataView},t.prototype._needToLoad=function(e){var t=this._getDataViewInst();return this._isDynamicWijdatasource||this._isWijdatasource&&!t.isLoaded()?!0:this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()?!0:this.isDataLoaded()||t.isLoading()?!e.compareSettings():!0},t.prototype._validateSettings=function(e){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&(e.DVPagingSettings()||{}).pageSize!==(e.WGPagingSettings()||{}).pageSize)throw"The pageSize option of the external dataView can't be changed."},t.prototype._onDataViewLoadingInternal=function(e){if(this._ignoreAllEvents)return;e&&(this._userData||this._onDataViewLoading())},t.prototype._onDataViewLoadedInternal=function(e){if(this._ignoreAllEvents)return;e&&this._onDataViewLoaded()},t.prototype._onDataViewChangeInternal=function(e){var t=this;if(this._ignoreAllEvents||this._ignoreChangeEvent)return;if(e.changes){if(e.length&&e[0].entityState()==="detached")return;n.each(e.changes,function(e,t){switch(t.changeType){case"remove":break;case"add":}})}this._onDataViewChange.apply(this,arguments)},t.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent)return;this._onDataViewCurrentChanged.apply(this,arguments)},t.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(!1),this.makeDirty(),this._wijgrid._onDataViewReset(this._userData,this._isKODataView)}finally{this._userData=null}},t.prototype._onPropertyChanged=function(e){var t=this;this._changeTimer>0&&(window.clearTimeout(this._changeTimer),this._changeTimer=0),this._changeTimer!=-1&&(this._changeTimer=window.setTimeout(function(){t._changeTimer=-1,t._wijgrid.mDestroyed||t._onDataViewChange(),t._changeTimer=0},100))},t.prototype._onDataViewChange=function(e){this._onDataViewReset()},t.prototype._onDataViewCurrentChanged=function(e,t){this._wijgrid._onDataViewCurrentPositionChanged(e,t)},t.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()},t.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()},t.prototype._getTotals=function(){if(!this._totals){var e=this._getDataViewInst();this._totals=this._prepareTotals(e,this._wijgrid._prepareTotalsRequest())}return this._totals||(this._totals={}),this._totals},t.prototype._prepareTotals=function(t,n){if(!n||n.length===0)return{};var r=[],i={};for(var s=0,o=n.length;s<o;s++)r.push(new e.grid.tally(this._wijgrid));for(var s=0,o=t.count();s<o;s++)for(var u=0,a=r.length;u<a;u++){var f=n[u].options;r[u].add(this._wijgrid.parse(f,this.getValue(s,f.dataKey)))}for(var s=0,o=r.length;s<o;s++){var f=n[s].options;i[f.dataKey]=r[s].getValueString(n[s],this._wijgrid)}return i},t.prototype._processDOM=function(t,r){var i={items:[],emptyData:[],header:e.grid.readTableSection(t,1)};return e.grid.getTableSectionLength(t,2)===1&&n(e.grid.getTableSectionRow(t,2,0)).hasClass(e.grid.wijgrid.CSS.emptyDataRow)?i.emptyData=e.grid.readTableSection(t,2):i.items=e.grid.readTableSection(t,2,r),i},t.prototype._moveAttributesToExpando=function(t){n.each(t,function(t,r){var i=e.data.Expando.getFrom(r,!0),s;s=i[e.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}},r.rowAttributes&&(s.rowAttributes=r.rowAttributes,delete r.rowAttributes),n.each(r,function(e,t){n.isArray(t)&&(s.cellsAttributes[e]=t[1],r[e]=t[0])})})},t.prototype._wrapDataItem=function(e,t){return{values:e,originalRowIndex:t}},t.prototype._refreshSilent=function(){var e=this._getDataViewInst();if(e)try{this._ignoreAllEvents=!0,e.refresh()}finally{this._ignoreAllEvents=!1}},t.prototype._unsafeReplace=function(t,n){var r=this._getDataViewInst();r instanceof e.grid.GridDataView||"operation is not supported",r._unsafeReplace(t,n)},t.prototype._unsafeSplice=function(t,n,r){var i=this._getDataViewInst();i instanceof e.grid.GridDataView||"operation is not supported",arguments.length===2?i._unsafeSplice(t,n):i._unsafeSplice(t,n,r)},t.prototype._unsafePush=function(t){var n=this._getDataViewInst();n instanceof e.grid.GridDataView||"operation is not supported",n._unsafePush(t)},t}();t.dataViewWrapper=r,t.asPagedDataView=i,t.asEditableDataView=s;var o=function(){function e(e){this._subscriptions=[],this._callback=e}return e.prototype.insert=function(e,t){var r=null,i=this;return n.each(t,function(e,t){i._isValidPropName(e)&&t&&n.isFunction(t.subscribe)&&(r=r||[],r.push(t.subscribe(i._callback)))}),r?(this._subscriptions.length<e&&(this._subscriptions.length=e),this._subscriptions.splice(e,0,r),!0):!1},e.prototype.remove=function(e){var t=this._subscriptions[e];t&&n.each(t,function(e,n){n.dispose(),t[e]=null}),this._subscriptions[e]=null,this._subscriptions.splice(e,1)},e.prototype.removeAll=function(){var e,t;while(e=this._subscriptions.length)this.remove(e-1);this._subscriptions=[]},e.prototype.dispose=function(){this.removeAll()},e.prototype._isValidPropName=function(e){return e&&typeof e=="string"?e.match(/^entityState|jQuery/)===null:!0},e}();t.propChangeListener=o})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(t,n,r,i,s){this.cr=new e.grid.cellRange(-1,-1),this.isExpanded=!1,this.position="none",this._sum=-1,this._hasHeaderOrFooter=!0,t!==undefined&&(this.isExpanded=t),n!==undefined&&(this.cr=n),r!==undefined&&(this._sum=r),i!==undefined&&(this.position=i),s!==undefined&&(this._hasHeaderOrFooter=s)}return t.prototype.isSubRange=function(e){return this.cr.r1>=e.cr.r1&&this.cr.r2<=e.cr.r2},t.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2},t.prototype.collapse=function(t,n){var r=n.options.groupInfo,i=t._leaves();if(e.grid.groupHelper.isParentExpanded(i,this.cr,r.level)&&r.position!=="footer"&&r.outlineMode!=="none"){var s=e.grid.groupHelper.getGroupedColumnsCount(i);this._collapse(t,n,t._rows(),i,this,s,t._allowVirtualScrolling())}},t.prototype.expand=function(t,n,r){var i=n.options.groupInfo,s=t._leaves();if(e.grid.groupHelper.isParentExpanded(s,this.cr,i.level)){var o=e.grid.groupHelper.getGroupedColumnsCount(s);this._expand(t,n,t._rows(),s,this,o,r,!0,t._allowVirtualScrolling())}},t.prototype._collapse=function(t,n,r,i,s,o,u){var a=n.options.groupInfo,f=s.cr.r1,l=s.cr.r2;switch(a.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(t.mSketchTable.row(s.cr.r1),undefined,!1),u||this._toggleRowVisibility(t,r.item(s.cr.r1),undefined,!1),f++}for(var c=f;c<=l;c++)this._toggleSketchRowVisibility(t.mSketchTable.row(c),!1,undefined),u||this._toggleRowVisibility(t,r.item(c),!1,undefined);s.isExpanded=!1;for(var c=a.level+1;c<=o;c++){var h=e.grid.groupHelper.getChildGroupRanges(i,s.cr,c-1);if(h){var p=h.ranges;for(var d=0,v=p.length;d<v;d++){var m=p[d];m.isExpanded=!1;switch(h.column.options.groupInfo.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(t.mSketchTable.row(m.cr.r1),!1,!1),u||this._toggleRowVisibility(t,r.item(m.cr.r1),!1,!1)}}}}},t.prototype._expand=function(t,n,r,i,s,o,u,a,f){var l=n.options.groupInfo,c=s.cr.r1,h=s.cr.r2;switch(l.position){case"header":this._toggleSketchRowVisibility(t.mSketchTable.row(c),!0,a||u),f||this._toggleRowVisibility(t,r.item(c),!0,a||u),c++;break;case"footer":this._toggleSketchRowVisibility(t.mSketchTable.row(h),!0,undefined),f||this._toggleRowVisibility(t,r.item(h),!0,undefined),h--;break;case"headerAndFooter":this._toggleSketchRowVisibility(t.mSketchTable.row(c),!0,a||u),f||this._toggleRowVisibility(t,r.item(c),!0,a||u),a&&(this._toggleSketchRowVisibility(t.mSketchTable.row(h),!0,undefined),f||this._toggleRowVisibility(t,r.item(h),!0,undefined)),c++,h--}if(!a)return;s.isExpanded=!0;if(l.level===o)for(var p=c;p<=h;p++)this._toggleSketchRowVisibility(t.mSketchTable.row(p),!0,undefined),f||this._toggleRowVisibility(t,r.item(p),!0,undefined);else{var d=e.grid.groupHelper.getChildGroupRanges(i,s.cr,l.level);if(d){var v=d.ranges,m=d.column;if(v.length&&c!==v[0].cr.r1)for(p=c;p<v[0].cr.r1;p++)this._toggleSketchRowVisibility(t.mSketchTable.row(p),!0,undefined),f||this._toggleRowVisibility(t,r.item(p),!0,undefined);if(u)for(var p=0,g=v.length;p<g;p++){var y=v[p];this._expand(t,m,r,i,y,o,u,!0,f)}else for(var p=0,g=v.length;p<g;p++){var y=v[p],b=m.options.groupInfo.position==="footer"||m.options.groupInfo.outlineMode==="none";this._expand(t,m,r,i,y,o,!1,b,f)}}}},t.prototype._toggleRowVisibility=function(t,n,r,i){if(n){var s=e.grid.renderStateEx,o=t._view(),u=o._getRowInfo(n,!1);r!==undefined&&(r?u._extInfo.state&=-2:u._extInfo.state|=1),i!==undefined&&(i?u._extInfo.state&=-3:u._extInfo.state|=2),o._setRowInfo(u.$rows,u),t.mRowStyleFormatter._groupFormatter(u)}},t.prototype._toggleSketchRowVisibility=function(t,n,r){if(t){var i=e.grid.renderStateEx;n!==undefined&&(n?t.extInfo.state&=-2:t.extInfo.state|=1),r!==undefined&&(r?t.extInfo.state&=-3:t.extInfo.state|=2)}},t}();t.groupRange=r;var i=function(){function r(){this.mGroupRowIdx=0,this.mFirstVisbileLeafIndex=0}return r.prototype.group=function(e,t){var r=this;this.mGrid=e,this.mLeaves=e._leaves(),this.mSketchTable=t,this.mGroupRowIdx=0;var i=!1;n.each(this.mLeaves,function(e,t){var n=t.options;n.groupInfo&&(delete n.groupInfo.level,delete n.groupInfo.expandInfo),!i&&(i=t._isFirstVisible())&&(r.mFirstVisbileLeafIndex=e)}),this._group()},r.prototype._group=function(){var e=this,r=this.mGrid._groupedLeaves(!0),i=1;if(r.length==0)return;this.mSketchTable.ensureNotLazy(),n.each(r,function(n,r){e.mGroupRowIdx=0;if(t.c1field.isGroupedColumn(r)){var s=r.options;s.groupInfo.level=i,s.groupInfo.expandInfo=[],e._processRowGroup(r,i++)}})},r.prototype._processRowGroup=function(t,n){var r=!0,i=e.grid.renderStateEx;for(var s=0;s<this.mSketchTable.count();s++){var o=this.mSketchTable.row(s);if(!o.isDataRow())continue;var u=this._getGroupCellRange(s,t,n),a=!0,f=t.options.groupInfo.outlineMode==="startCollapsed",l,c,h,p;if(f||e.grid.groupHelper.isParentCollapsed(this.mLeaves,u,n)){if(t.options.groupInfo.groupSingleRow===!1&&u.r1===u.r2)continue;a=!1}if(n&&this.mGrid.options.groupIndent)for(var d=u.r1;d<=u.r2;d++)this._addIndent(this.mSketchTable.row(d).cell(this.mFirstVisbileLeafIndex),n);r=t.options.groupInfo.groupSingleRow!==!1||u.r1!==u.r2;switch(t.options.groupInfo.position){case"header":h=this._addGroupRange(t.options.groupInfo,u,a,r);for(var v=u.r1;v<=u.r2;v++)o=this.mSketchTable.row(v),o.extInfo.groupLevel=n+1,a||(o.extInfo.state|=1);if(!r)break;this._updateByGroupRange(h,n),p=e.grid.groupHelper.isParentCollapsed(this.mLeaves,h.cr,n),l=this._buildGroupRow(t,h,u,!0,p),this.mSketchTable.insert(u.r1,l),l.extInfo.groupLevel=n,a||(l.extInfo.state|=2),p&&(l.extInfo.state|=1),s=u.r2+1;break;case"footer":h=this._addGroupRange(t.options.groupInfo,u,!0,r);if(!r)break;this._updateByGroupRange(h,n),c=this._buildGroupRow(t,h,u,!1,!1),c.extInfo.groupLevel=n,this.mSketchTable.insert(u.r2+1,c),s=u.r2+1,p=e.grid.groupHelper.isParentCollapsed(this.mLeaves,h.cr,n),p&&(c.extInfo.state|=1);break;case"headerAndFooter":h=this._addGroupRange(t.options.groupInfo,u,a,r);for(v=u.r1;v<=u.r2;v++)o=this.mSketchTable.row(v),o.extInfo.groupLevel=n+1,a||(o.extInfo.state|=1);if(!r)break;this._updateByGroupRange(h,n),p=e.grid.groupHelper.isParentCollapsed(this.mLeaves,h.cr,n),l=this._buildGroupRow(t,h,u,!0,p),c=this._buildGroupRow(t,h,u,!1,!1),this.mSketchTable.insert(u.r2+1,c),c.extInfo.groupLevel=n;if(p||!a)c.extInfo.state|=1;this.mSketchTable.insert(u.r1,l),l.extInfo.groupLevel=n,a||(l.extInfo.state|=2),p&&(l.extInfo.state|=1),s=u.r2+2;break;default:throw e.grid.stringFormat('Unknown Position value: "{0}"',t.options.groupInfo.position)}this.mGroupRowIdx++}},r.prototype._buildGroupRow=function(n,r,i,s,o){var u=n.options,a=u.groupInfo,f=new t.SketchGroupRow(s,null),l=undefined,c="",h="",p=e.grid.wijgrid.CSS;f.extInfo.groupIndex=this.mGroupRowIdx,(l=this.mSketchTable.valueAt(i.r1,u.leavesIdx))!==null&&(c=this.mGrid.toStr(u,l)),f.groupByValue=l,this.mGrid._showRowHeader()&&f.add(t.HtmlCell.nbsp());var d=new t.HtmlCell("",null);f.add(d),u.aggregate&&u.aggregate!=="none"&&(h=this._getAggregate(i,n,n,s,c));var v=s?a.headerText:a.footerText;if(v==="custom"){var m={data:this.mSketchTable.getRawTable(),column:u,groupByColumn:u,groupText:c,text:"",groupingStart:i.r1,groupingEnd:i.r2,isGroupHeader:s,aggregate:h};this.mGrid._trigger("groupText",null,m)&&(v=m.text)}else{if(v===undefined||v===null){s&&(v="{1}: {0}");if(h||h===0)v=v?v+" {2}":"{2}"}v=e.grid.stringFormat(v,u.encodeHtml?e.htmlEncode(c):c,u.headerText?u.headerText:"",this._wrapAggregateValue(h))}v||(v="&nbsp;"),d.html+="<span>"+v+"</span>",this._addIndent(d,a.level-1);var g=1,y=this.mGrid._showRowHeader()?1:0,b=!0;for(;y<this.mLeaves.length;y++){var w=this.mLeaves[y].options;if(w.parentVis){if(b){b=!1;continue}if(w.dynamic!==!0&&w.aggregate&&w.aggregate!=="none")break;g++}}for(;y<this.mLeaves.length;y++){var E=this.mLeaves[y],S="";E.options.parentVis&&(E instanceof t.c1field&&(S=this._getAggregate(i,E,n,s,c)),S=S||"&nbsp;",f.add(new t.HtmlCell(this._wrapAggregateValue(S),{groupInfo:{leafIndex:E.options.leavesIdx,purpose:1}})))}return d.ensureAttr().colSpan=g,d.ensureAttr().groupInfo={leafIndex:u.leavesIdx,purpose:0},f},r.prototype._getAggregate=function(t,n,r,i,s){var o="";if(!n.options.aggregate||n.options.aggregate==="none")return o;if(n.options.aggregate==="custom"){var u={data:this.mSketchTable.getRawTable(),column:n.options,groupByColumn:r.options,groupText:s,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:i},a=n.options.dataIndex;try{n.options.dataIndex=n.options.leavesIdx,this.mGrid._trigger("groupAggregate",null,u)&&(o=u.text)}finally{n.options.dataIndex=a}}else{var f=new e.grid.tally(this.mGrid);for(var l=t.r1;l<=t.r2;l++)f.add(this.mSketchTable.valueAt(l,n.options.leavesIdx));o=f.getValueString(n,this.mGrid)}return o},r.prototype._getGroupCellRange=function(t,n,r){var i=n.options.leavesIdx,s,o=new e.grid.cellRange(t,i),u=e.grid.groupHelper.getParentGroupRange(this.mLeaves,o,r),a,f,l;s=this.mSketchTable.row(t);if(s.isDataRow()){a=s.valueCell(n.options.leavesIdx).value,a instanceof Date&&(a=a.getTime());for(o.r2=t,l=this.mSketchTable.count()-1;o.r2<l;o.r2++){if(!this.mSketchTable.row(o.r2+1).isDataRow()||u&&o.r2+1>u.cr.r2)break;f=this.mSketchTable.valueAt(o.r2+1,n.options.leavesIdx),f instanceof Date&&(f=f.getTime());if(a!==f)break}}return o},r.prototype._addGroupRange=function(t,n,r,i){var s=null,o=e.grid.groupHelper.getChildGroupIndex(n,t.expandInfo),u,a,f,l;return o>=0&&o<t.expandInfo.length?s=t.expandInfo[o]:(u=new e.grid.cellRange(n.r1,n.r1,n.r2,n.r2),a=t.position==="footer"||!i?!0:r&&t.outlineMode!=="startCollapsed",s=new e.grid.groupRange(a,u,-1,t.position,i),t.expandInfo.push(s)),s&&i&&(f=n.r1,l=n.r2,t.position==="headerAndFooter"&&(l+=2),t.position!=="headerAndFooter"&&l++,s.cr.r2=l),s},r.prototype._updateByGroupRange=function(e,t){for(var n=0,r=this.mLeaves.length;n<r;n++){var i=this.mLeaves[n].options.groupInfo;if(i&&i.level<t){var s=i.expandInfo?i.expandInfo.length:0;for(var o=0;o<s;o++){var u=i.expandInfo[o],a=e.position==="headerAndFooter"?2:1;u.cr.r1>=e.cr.r1&&(u.cr.r1!==e.cr.r1||u.position!=="footer")&&(u.cr.r1+=a),u.cr.r2>=e.cr.r1&&(u.cr.r2+=a)}}}},r.prototype._addIndent=function(e,t){var n;t>0&&(n=this.mGrid.options.groupIndent)&&(e.ensureStyle().paddingLeft=n*t+"px")},r.prototype._wrapAggregateValue=function(t){return"<span class='"+e.grid.wijgrid.CSS.aggregateContainer+"'>"+t.toString()+"</span>"},r}();t.grouper=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(){}return t.getGroupInfo=function(t){if(t){var n=e.grid.groupHelper._getGroupInfoRegExp.exec(t.id),r,i,s;if(n)return r=parseInt(n[3],10),i=parseInt(n[2],10),s=n[1]==="H",{level:r,index:i,isHeader:s,toString:function(){return(s?"GH":"GF")+i+"-"+r}}}return null},t.getColumnByGroupLevel=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n],s=e[n].options;if(s.groupInfo&&s.groupInfo.level===t)return i}return null},t.getGroupedColumnsCount=function(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e[n].options.groupInfo;i&&(i.position==="header"||i.position==="headerAndFooter"||i.position==="footer")&&t++}return t},t.getChildGroupIndex=function(e,t){var n=0,r=t.length-1,i,s;while(n<=r){i=(r-n>>1)+n,s=t[i].cr.r1-e.r1;if(s===0)return i;s<0?n=i+1:r=i-1}return n},t.getParentGroupIndex=function(t,n){var r=e.grid.groupHelper.getChildGroupIndex(t,n);r>0&&r--;if(r<n.length){var i=n[r];if(t.r1>=i.cr.r1&&t.r2<=i.cr.r2)return r}return-1},t.getChildGroupRanges=function(t,n,r){var i=[],s=e.grid.groupHelper.getColumnByGroupLevel(t,r+1);if(s){var o=s.options.groupInfo.expandInfo,u=e.grid.groupHelper.getChildGroupIndex(n,o);for(var a=u,f=o.length;a<f;a++){var l=o[a];if(!(l.cr.r2<=n.r2))break;i.push(l)}return{column:s,ranges:i}}return null},t.getParentGroupRange=function(t,n,r){r===undefined&&(r=65535);if(n&&r-2>=0)for(var i=t.length-1;i>=0;i--){var s=t[i].options.groupInfo;if(!s||!s.expandInfo||s.level<0||s.level!==r-1)continue;var o=e.grid.groupHelper.getParentGroupIndex(n,s.expandInfo);if(o>=0)return s.expandInfo[o]}return null},t.isParentCollapsed=function(t,n,r){if(r===1)return!1;for(var i=r;i>1;i--){var s=e.grid.groupHelper.getParentGroupRange(t,n,i);if(!s)return!1;if(!s.isExpanded)return!0;n=s.cr}return!1},t.isParentExpanded=function(t,n,r){if(r===1)return!0;for(var i=r;i>1;i--){var s=e.grid.groupHelper.getParentGroupRange(t,n,i);if(!s||s&&s.isExpanded)return!0;n=s.cr}return!1},t._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$"),t}();t.groupHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function e(e,t,n,r){switch(arguments.length){case 2:this.r1=this.r2=e,this.c1=this.c2=t;break;case 4:this.r1=e,this.r2=n,this.c1=t,this.c2=r;break;default:this.r1=0,this.r2=0,this.c1=0,this.c2=0}}return e.prototype.isSingleCell=function(){return this.r1===this.r2&&this.c1===this.c2},e}();t.cellRange=r;var i=function(){function n(){}return n.prototype.merge=function(e,t){this._leaves=e._visibleLeaves(),this._data=t,this._merge()},n.prototype._merge=function(){var e=!0;for(var n=0,r=this._leaves.length;n<r;n++)if(this._leaves[n]instanceof t.c1field){var i=this._leaves[n];if(i.options.rowMerge==="free"||i.options.rowMerge==="restricted")e&&(this._data.ensureNotLazy(),e=!1),this._mergeColumn(i)}},n.prototype._mergeColumn=function(e){var t=e.options.leavesIdx;for(var n=0,r=this._data.count();n<r;n++){var i=this._data.row(n);if(!i.isDataRow())continue;var s=this._getCellRange(n,e);if(s.r1!==s.r2){var o=s.r2-s.r1+1;this._data.row(s.r1).cell(t).ensureAttr().rowSpan=o;for(var u=s.r1+1;u<=s.r2;u++)this._data.row(u).cell(t).visible(!1)}n=s.r2}},n.prototype._getCellRange=function(t,n){var r=n.options.leavesIdx,i=new e.grid.cellRange(t,r),s=(this._data.valueAt(t,r)||"").toString(),o=this._data.count();for(i.r2=t;i.r2<o-1;i.r2++){var u=this._data.row(i.r2+1);if(!u.isDataRow()||(u.valueCell(r).value||"").toString()!==s)break}var a=n.options.leavesIdx;if(a>0&&n.options.rowMerge==="restricted"){var f=this._leaves[a-1];if(f instanceof e.grid.c1field){var l=this._getCellRange(t,f);i.r1=Math.max(i.r1,l.r1),i.r2=Math.min(i.r2,l.r2)}}return i},n}();t.merger=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";function h(e){if(e){while(e.rows.length){var t;while((t=e.rows[0]).cells.length){var n=t.cells[0];while(n.firstChild)n.removeChild(n.firstChild);t.deleteCell(0),t=n=null}e.deleteRow(0)}while(e.firstChild)e.removeChild(e.firstChild)}e=null}function p(t,r){var i,s,o;if(n.isArray(t)&&n.isArray(r)){if(t.length===r.length){o=!0;for(i=0,s=t.length;i<s&&o;i++)o=e.grid.compareObj(t[i],r[i]);return o}}else{if(n.isPlainObject(t)&&n.isPlainObject(r)){for(i in t)if(t.hasOwnProperty(i)&&!e.grid.compareObj(t[i],r[i]))return!1;for(i in r)if(r.hasOwnProperty(i)&&!e.grid.compareObj(t[i],r[i]))return!1;return!0}t instanceof Date&&(t=t.getTime()),r instanceof Date&&(r=r.getTime())}return t===r}function d(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];var r,i;if(!e)return"";for(r=0,i=t.length;r<i;r++)e=e.replace(new RegExp("\\{"+r+"\\}","gm"),t[r]);return e}function v(e){return e&&!(e<0)||e===0}function m(e){return e&&e instanceof Date?!N(e.getTime()):!1}function g(e){return e.dataType||"string"}function y(e,t){e&&t&&e.find(".ui-widget").each(function(e,r){return n.each(n(r).data(),function(n,r){r.widgetName&&t(e,r)}),!0})}function b(e,t){var r=[];n.each(e.data(),function(e){e.indexOf(t)===0&&r.push(e)}),n.each(r,function(t,n){e.removeData(n)})}function E(e){return n.extend(!0,{dynamic:!0,isLeaf:!0},e)}function S(e,t){if(e){var r=e.nodeType?n(e):e,i=r.offset();if(i)return t?{top:i.top,left:i.left,width:r[0].clientWidth||0,height:r[0].clientHeight||0}:{top:i.top,left:i.left,width:r.outerWidth(),height:r.outerHeight()}}return null}function x(e,t){return e&&(e.start<0&&(e.start=0),e.end<0&&(e.end=0),e.start=Math.min(e.start,t),e.end=Math.min(e.end,t)),e}function T(t,n,r){if(!r&&t.nodeType===3){var i=(t.nodeValue||"").replace(/[\r\t\n]+/g,"");return i}if(t&&n!==0){if(!r&&t.nodeType===3)return t.nodeValue;if(t.nodeType===1){switch(t.type){case"button":case"text":case"textarea":case"select-one":return t.value;case"checkbox":return t.checked.toString()}var s="",o=0,u;while(u=t.childNodes[o++])s+=e.grid._getDOMText(u,n-1,r);return s}}return""}function N(e){return e!==e}function C(e,t,r,i){var s=e.jquery||n.isArray(e),o,u,a,f=t+r;if(arguments.length===3)return s?n.data(e[0],f):n.data(e,f);if(s){for(o=0,u=e.length;o<u;o++)a=n.data(e[o],f,i);return a}return n.data(e,f,i)}function k(e,t){if(t&&e){var n,r,i;for(n in t)t.hasOwnProperty(n)&&(r=t[n],i=typeof r,(i==="string"||i==="boolean"||i==="number")&&e[n]===undefined&&(e[n]=r))}}function L(e,t){if(e){var n,r,i=0,s={},o,u;for(n=0,r=e.attributes.length;n<r;n++)u=e.attributes[n].name,u&&(!t||!t(u))&&(o=e.getAttribute(u),u==="style"&&(o=typeof o=="object"?o.cssText:o),!o&&u==="class"&&(o=e.getAttribute("className")),o&&typeof o!="function"&&(s[u]=o,i++));if(i)return s}return null}function A(t,r){var i,s,o,u,a;if(t){typeof r!="object"&&!n.isFunction(r)&&(r={});for(i in t){s=t[i],o=r[o];if(s===r)continue;s&&(n.isPlainObject(s)||(u=n.isArray(s)))?(u?(u=!1,a=o&&n.isArray(o)?o:[]):a=o&&n.isPlainObject(o)?o:{},r[i]=e.grid.deepExtend(s,a)):r[i]=s}}return r}function O(e,t){return e&&e.jquery&&(e=e[0]),e?arguments.length===1?n.data(e,"wijgridwidgetName"):n.data(e,"wijgridwidgetName",t):undefined}function _(e,t){typeof t=="undefined"&&(t=99);var r=0;return e&&n.ui&&n.fn.zIndex&&(r=e.zIndex(),r&&r++),Math.max(r,t)}function D(e,t,n){return e>t&&e<t+n}function P(t,n,r,i,s,o){return e.grid.isOverAxis(t,r,s)&&e.grid.isOverAxis(n,i,o)}function B(){return"uid"+H++}function j(){return!!navigator&&!!navigator.userAgent&&navigator.userAgent.match(/Mobile.*Safari/)!==null}function F(){return!!(navigator&&(navigator.userAgent||"").toLowerCase().indexOf("android")>=0)}function I(){return window.orientation||0}function q(e){return!!e&&typeof e=="string"&&e[e.length-1]==="%"}function U(){if(!(R>0)){if(document&&document.body&&n.support.isTouchEnabled&&n.support.isTouchEnabled()){var e;try{e=n("<div></div>").css({overflow:"scroll",width:30,height:30,position:"absolute",visibility:"hidden"}).append(n("<div></div>").css({width:100,height:100})).appendTo(document.body),R=e[0].offsetWidth-e[0].clientWidth}catch(t){}finally{e&&e.remove()}}R>0||(R=18)}return R}var n=jQuery;t.EXPANDO="__wijgrid",function(e){e[e.header=1]="header",e[e.data=2]="data",e[e.dataAlt=4]="dataAlt",e[e.filter=8]="filter",e[e.groupHeader=16]="groupHeader",e[e.groupFooter=32]="groupFooter",e[e.footer=64]="footer",e[e.emptyDataRow=128]="emptyDataRow"}(t.rowType||(t.rowType={}));var r=t.rowType;(function(e){e[e.none=0]="none",e[e.rendering=1]="rendering",e[e.current=2]="current",e[e.hovered=4]="hovered",e[e.selected=8]="selected",e[e.editing=16]="editing"})(t.renderState||(t.renderState={}));var i=t.renderState;(function(e){e[e.none=0]="none",e[e.hidden=1]="hidden",e[e.collapsed=2]="collapsed"})(t.renderStateEx||(t.renderStateEx={}));var s=t.renderStateEx;(function(e){e[e.table=0]="table",e[e.head=1]="head",e[e.body=2]="body",e[e.foot=3]="foot"})(t.rowScope||(t.rowScope={}));var o=t.rowScope;(function(e){e[e.none=0]="none",e[e.column=1]="column",e[e.row=2]="row"})(t.cellRangeExtendMode||(t.cellRangeExtendMode={}));var u=t.cellRangeExtendMode;(function(e){e[e.createIfNull=0]="createIfNull",e[e.createAlways=1]="createAlways",e[e.dispose=2]="dispose"})(t.objectMode||(t.objectMode={}));var a=t.objectMode;(function(e){e[e.groupCell=0]="groupCell",e[e.aggregateCell=1]="aggregateCell"})(t.groupRowCellPurpose||(t.groupRowCellPurpose={}));var f=t.groupRowCellPurpose;(function(e){e[e.sketch=0]="sketch",e[e.rendered=1]="rendered",e[e.renderable=2]="renderable"})(t.dataRowsRangeMode||(t.dataRowsRangeMode={}));var l=t.dataRowsRangeMode;(function(e){e[e.none=0]="none",e[e.overlapTop=1]="overlapTop",e[e.overlapBottom=2]="overlapBottom",e[e.reset=3]="reset"})(t.intersectionMode||(t.intersectionMode={}));var c=t.intersectionMode;t.emptyTable=h,t.compareObj=p,t.stringFormat=d,t.validDataKey=v,t.validDate=m,t.getDataType=g,t.iterateChildrenWidgets=y,t.remove$dataByPrefix=b;var w=function(){function e(e){this._dom=e}return e.prototype.getSelection=function(){var e=0,t=0,n;return this._dom.selectionStart!==undefined?(e=this._dom.selectionStart,t=this._dom.selectionEnd):document.selection&&(n=document.selection.createRange().duplicate(),t=n.text.length,e=Math.abs(n.moveStart("character",-this._dom.value.length)),t+=e),{start:e,end:t,length:t-e}},e.prototype.setSelection=function(e){if(this._dom.selectionStart!==undefined)this._dom.setSelectionRange(e.start,e.end);else{var t=this._dom.createTextRange();t.collapse(!0),t.moveStart("character",e.start),t.moveEnd("character",e.end),t.select()}},e.prototype.toggleSelection=function(e){var t=n(this._dom),r="onselectstart"in this._dom;e?r?t.unbind(".wijgrid-disableSelection"):t.css({MozUserSelect:"",WebkitUserSelect:""}):r?t.bind("selectstart.wijgrid-disableSelection",function(e){e.preventDefault()}):t.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})},e}();t.domSelection=w,t.createDynamicField=E,t.bounds=S,t.ensureBounds=x,t._getDOMText=T,t.isNaN=N,t.dataPrefix=C,t.shallowMerge=k,t.getAttributes=L,t.deepExtend=A,t.widgetName=O;var M=function(){function t(){}return t.isExtendSupportRequired=function(t){return t=(t||"").toLowerCase(),t in e.grid.HTML5InputSupport._requiresExtendedSupport},t.getDefaultInputType=function(n,r){var i=(r.inputType||"").toLowerCase();if(!i&&n)switch(e.grid.getDataType(r)){case"number":case"currency":i="number";break;case"datetime":i="datetime"}if(!i||i!=="text"&&!t._isSupportedByBrowser(i))i="text";return i},t.toStr=function(t,n){var r=t;n=(n||"").toLowerCase();if(e.grid.HTML5InputSupport.isExtendSupportRequired(n))switch(n){case"datetime":r=t?r=Globalize.format(t,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":r=t?r=Globalize.format(t,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":r=t?r=Globalize.format(t,"yyyy-MM-dd"):"";break;case"month":r=t?r=Globalize.format(t,"yyyy-MM"):"";break;case"time":r=t?r=Globalize.format(t,"HH:mm:ss"):""}else r=t+"";return r},t.parse=function(t,n){var r,i=function(t){return t=new Date(t),e.grid.validDate(t)||(t=null),t};n=(n||"").toLowerCase();if(e.grid.HTML5InputSupport.isExtendSupportRequired(n))switch(n){case"datetime":r=Globalize.parseDate(t,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(t,"yyyy-MM-ddTHH:mmZ")||i(t);break;case"datetime-local":r=Globalize.parseDate(t,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(t,"yyyy-MM-ddTHH:mm")||i(t);break;case"date":r=Globalize.parseDate(t,"yyyy-MM-dd")||i(t);break;case"month":r=Globalize.parseDate(t,"yyyy-MM");break;case"time":r=Globalize.parseDate(t,"HH:mm:ss")||Globalize.parseDate(t,"HH:mm");break;case"number":r=parseFloat(t)}else r=t;return r},t.extend=function(e,t,n){if(!e)e=t;else{n=(n||"").toLowerCase();switch(n){case"date":e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());break;case"month":e.setFullYear(t.getFullYear(),t.getMonth());break;case"time":e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds());break;default:e=t}}return e},t._isSupportedByBrowser=function(e){if(e){if(this._supportedInputTypesCache[e]===undefined){var t;try{var r=n("<input type='"+e+"' style='display:none' />");t=!0}catch(i){t=!1}this._supportedInputTypesCache[e]=t&&r[0].type===e}return this._supportedInputTypesCache[e]}return!1},t._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""},t._supportedInputTypesCache={},t}();t.HTML5InputSupport=M,t.getZIndex=_,t.isOverAxis=D,t.isOver=P;var H=0;t.getUID=B,t.isMobileSafari=j,t.isAndroid=F,t.getWindowOrientation=I,t.isPercentage=q;var R=0;t.getSuperPanelScrollBarSize=U,n.extend(n.wijmo.wijgrid,{rowType:e.grid.rowType,renderState:e.grid.renderState,bounds:e.grid.bounds})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function i(e,t){var n=!1,r;return function(){return n||(r=t?e.call(t):e(),n=!0),r}}(function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=2]="Second",e[e.Minute=4]="Minute",e[e.Hour=8]="Hour",e[e.Day=16]="Day",e[e.Month=32]="Month",e[e.Year=64]="Year",e[e.DATE=112]="DATE",e[e.TIME=15]="TIME",e[e.ALL=e.DATE|e.TIME]="ALL"})(t.TimeUnit||(t.TimeUnit={}));var n=t.TimeUnit,r=function(){function t(){}return t.convertInputType=function(t){var n=e.grid.TimeUnitConverter.convertInputTypeToFormatString(t),r=e.grid.TimeUnitConverter.convertFormatString(n);return r},t.convertInputTypeToFormatString=function(e){switch((e||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""},t.convertFormatString=function(e){var t=0;if(e){if(e.length===1)switch(e[0]){case"t":return 12;case"T":return n.TIME;case"d":case"D":return n.DATE;case"Y":return 96;case"M":return 48;case"f","F","S":return n.ALL}var r,i;(r=e.indexOf("'"))>=0&&(i=e.lastIndexOf("'"))>=0&&r!==i&&(e=e.substr(0,r)+e.substring(i+1,e.length-1));for(var s=0,o=e.length;s<o;s++)switch(e[s]){case"d":t|=16;break;case"M":t|=32;break;case"y":t|=64;break;case"m":t|=4;break;case"h":case"H":t|=8;break;case"s":t|=2;break;case"f":t|=1}}return t||n.ALL},t.cutDate=function(e,t){return e&&(t=~t,t&1&&e.setMilliseconds(0),t&2&&e.setSeconds(0),t&4&&e.setMinutes(0),t&8&&e.setHours(0),t&16&&e.setDate(1),t&32&&e.setMonth(0),t&64&&e.setFullYear(0)),e},t}();t.TimeUnitConverter=r,t.lazy=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function e(){}return e.NoFilterOp={applicableTo:null,name:"NoFilter",displayName:"No filter",arity:1,operator:function(){return!0}},e}(),i=function(){function t(t){this._cache={};var i=this;this._wijgrid=t,this._addOperator(null,r.NoFilterOp),n.each(e.data.filtering.ops,function(e,t){i._addOperator(e,t)}),n.each(t.options.customFilterOperators,function(e,t){i._addOperator(null,t,!0)})}return t.prototype.getByName=function(e){var t=this.getByNameInt(e);return t?t.op:null},t.prototype.getByNameInt=function(e){return this._cache[(e||"").toLowerCase()]},t.prototype.getByDataType=function(e){var t=[],r;n.each(this._cache,function(r,i){var s=i.op;(!s.applicableTo||n.inArray(e,s.applicableTo)>=0)&&t.push(i)});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":t.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":t.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":t.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:}return r=n.map(t,function(e,t){return e.op}),r},t.prototype._addOperator=function(e,t,n){typeof n=="undefined"&&(n=!1),e&&!t.name&&(t.name=e),e=(e||t.name).toLowerCase(),this._cache[e]||(this._cache[e]={op:t,isCustom:n===!0})},t.prototype._sortAlpha=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}return n===r?0:n<r?-1:1},t.prototype._sortAlphaEmbeddedFirst=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}if(e.isCustom!==t.isCustom){if(e.isCustom)return 1;if(t.isCustom)return-1}return n===r?0:n<r?-1:1},t.prototype._sortAlphaCustomFirst=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}if(e.isCustom!==t.isCustom){if(e.isCustom)return-1;if(t.isCustom)return 1}return n===r?0:n<r?-1:1},t}();t.filterOperatorsCache=i;var s=function(){function t(){}return t.getSingleValue=function(e){return n.isArray(e)&&(e=e[0],n.isArray(e)&&(e=e[0])),e},t.getSingleOperatorName=function(e){return n.isArray(e)&&(e=e[0]),e.name||e||""},t.verify=function(t,r,i,s){if(t)if(n.isArray(t)){var o,u,a=[],f=[];n.isArray(r)||(r=[r]);for(o=0,u=t.length;o<u;o++)e.grid.filterHelper._verifySingleOp(t[o],r[o],i,s)&&(a.push({name:t[o].name||t[o],condition:t[o].condition||"or"}),f.push(r?r[o]:undefined));if(a.length)return{filterOperator:a,filterValue:f}}else if(e.grid.filterHelper._verifySingleOp(t,r,i,s))return{filterOperator:t,filterValue:r};return null},t._verifySingleOp=function(t,r,i,s){if(t&&(t=t.name||t)){var o;t=(t||"").toLowerCase();if((t!=="nofilter"||r!==undefined)&&(o=s.getByName(t)))if(o.applicableTo===null||n.inArray(i||"string",o.applicableTo)>=0)if(o.arity===1||o.arity>1&&e.grid.filterHelper.getSingleValue(r)!==undefined)return!0}return!1},t.marker="_wijgrid",t}();t.filterHelper=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";function r(e,t){e&&!e.nodeType&&(e=e[0]);if(e)switch(t){case 1:return e.tHead;case 2:if(e.tBodies)return e.tBodies[0]||null;break;case 3:return e.tFoot;default:return e}return null}function i(e,t){var n;return e&&!e.nodeType&&(e=e[0]),e&&(n=this.getTableSection(e,t))?n.rows.length:0}function s(e,t,n){var r;return e&&!e.nodeType&&(e=e[0]),e&&(r=this.getTableSection(e,t))?r.rows[n]||null:null}function o(t,r,i){var s,o,u,a,f,l,c,h,p=[],d=function(e){return e=e.toLowerCase(),e==="rowspan"||e==="colspan"},v;t&&!t.nodeType&&(t=t[0]);if(t&&(v=this.getTableSection(t,r)))for(s=0,o=v.rows.length;s<o;s++){f=v.rows[s],l=[],i&&(c=e.data.Expando.getFrom(l,!0),h=c[e.grid.EXPANDO]={cellsAttributes:{},rowAttributes:e.grid.getAttributes(f)||{}});for(u=0,a=f.cells.length;u<a;u++){var m=n.trim(f.cells[u].innerHTML);m=="&nbsp;"&&(m=""),l[u]=m,i&&(h.cellsAttributes[u]=e.grid.getAttributes(f.cells[u],d)||{})}p[s]=l}return p}function u(e){var t=e.parentNode.parentNode;switch(t.tagName.toLowerCase()){case"thead":return 1;case"tbody":return 2;case"tfoot":return 3}return null}var n=jQuery;t.getTableSection=r,t.getTableSectionLength=i,t.getTableSectionRow=s,t.readTableSection=o,t.determineSection=u;var a=function(){function t(e,t,n,r){this._width=0,this._table=e,this._offsets=[],r&&this.ensureColGroup(),n&&this.ensureTBody(),t||this._buildOffsets()}return t.prototype.element=function(){return this._table},t.prototype.width=function(){return this._width},t.prototype.getCellIdx=function(e,t){return e<this._width&&t>=0&&t<this._offsets.length?this._offsets[t][e].cellIdx:-1},t.prototype.getColumnIdx=function(e,t){if(typeof e!="number"){var n=e;e=n.cellIndex,t=n.parentNode.rowIndex}return e<this._width?this._offsets[t][e].colIdx:-1},t.prototype.clearSection=function(t){var n,r,i=e.grid.getTableSection(this._table,t);switch(t){case 2:n=this.getSectionLength(0),r=n+this.getSectionLength(t)-1;break;case 3:n=this.getSectionLength(0)+this.getSectionLength(1),r=n+this.getSectionLength(t)-1;break;default:n=0,r=this.getSectionLength(t)-1}while(i.rows.length)i.deleteRow(0);this._offsets.splice(n,r-n+1)},t.prototype.getSectionLength=function(t){return e.grid.getTableSectionLength(this._table,t)},t.prototype.getSectionRow=function(t,n){return e.grid.getTableSectionRow(this._table,n,t)},t.prototype.forEachColumnCellNatural=function(e,t,n){var r,i,s,o;for(r=0,i=this._table.rows.length;r<i;r++){s=this._table.rows[r];if(e<s.cells.length){o=t(s.cells[e],r,n);if(o!==!0)return o}}return!0},t.prototype.forEachColumnCell=function(e,t,n){var r,i,s,o,u;for(r=0,i=this._offsets.length;r<i;r++){s=this._table.rows[r],o=this.getCellIdx(e,r);if(o>=0){u=t(s.cells[o],r,n);if(u!==!0)return u}}return!0},t.prototype.forEachRowCell=function(e,t,n){var r=this._table.rows[e],i,s,o;for(i=0,s=r.cells.length;i<s;i++){o=t(r.cells[i],i,n);if(o!==!0)return o}return!0},t.prototype.colGroupTag=function(){var e=this._table.getElementsByTagName("colgroup");return e&&e[0]||null},t.prototype.colTags=function(){var e=this.colGroupTag();return e&&e.getElementsByTagName("col")||[]},t.prototype.ensureTBody=function(){return this._table.tBodies&&this._table.tBodies[0]||this._table.appendChild(document.createElement("tbody"))},t.prototype.ensureTHead=function(){return this._table.tHead&&this._table.tHead[0]||this._table.createTHead()},t.prototype.ensureTFoot=function(){return this._table.tFoot&&this._table.tFoot[0]||this._table.createTFoot()},t.prototype.ensureColGroup=function(){var e=this._table.getElementsByTagName("colgroup");return e&&e[0]||this._table.appendChild(document.createElement("colgroup"))},t.prototype.appendCol=function(e){var t=this.ensureColGroup();return e&&t.appendChild(e)||t.appendChild(document.createElement("col"))},t.prototype.removeOffset=function(e){if(e>=0&&e<this._offsets.length){if(e<0||!e&&e!==0)e=this._offsets.length-1;this._offsets.splice(e,1)}},t.prototype.insertOffset=function(e){var t,n;if(this._width>0){t=[];for(n=0;n<this._width;n++)t.push({cellIdx:n,colIdx:n});if(e<0||!e&&e!==0)e=this._offsets.length;this._offsets.splice(e,0,t)}},t.prototype.rebuildOffsets=function(){this._offsets=[],this._width=0,this._buildOffsets()},t.prototype._buildOffsets=function(){var e=[],t,n,r,i,s,o,u,a,f,l;for(n=0,r=this._table.rows.length;n<r;n++){t=[],this._offsets[n]=t,i=this._table.rows[n];for(s=0,o=0,u=i.cells.length;s<u;s++,o++){a=i.cells[s];for(;e[o]>1;o++)e[o]--,t[o]={cellIdx:-1,colIdx:-1};e[o]>1||(e[o]=a.rowSpan),t[o]={cellIdx:s,colIdx:-1},t[s].colIdx=o,f=a.colSpan;for(;f>1;f--)t[++o]={cellIdx:-1,colIdx:-1}}l=e.length;for(;o<l;o++)e[o]--,t[o]={cellIdx:-1,colIdx:-1};this._width=Math.max(this._width,l)}},t}();t.htmlTableAccessor=a})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(e,t,n,r,i){typeof n=="undefined"&&(n=null),typeof r=="undefined"&&(r=!1),typeof i=="undefined"&&(i=!0),this.__isEdit=!1,this._wijgrid=n,this._virtualize=i,r?(this._ci=e-this._wijgrid._getDataToAbsOffset().x,this._ri=t-this._wijgrid._getDataToAbsOffset().y,this._virtualize&&(this._ri=this._wijgrid._renderableBoundsCollection().getAbsIndex(this._ri+this._wijgrid._viewPortBounds().start))):(this._ci=e,this._ri=t)}return r.prototype.cellIndexAbs=function(){return this._ci+this._wijgrid._getDataToAbsOffset().x},r.prototype.rowIndexAbs=function(){var e=this._virtualize?this._wijgrid._renderableBoundsCollection().getRenderedIndex(this._ri)-this._wijgrid._viewPortBounds().start:this._ri;return e+=this._wijgrid._getDataToAbsOffset().y,e},r.prototype.cellIndex=function(e){if(!arguments.length)return this._ci;this._ci=e},r.prototype.column=function(){var e=this.columnInst();return e?e.options:null},r.prototype.columnInst=function(){return this._wijgrid&&this._isValid()?this._wijgrid._visibleLeaves()[this.cellIndexAbs()]:null},r.prototype.container=function(){var t=this.tableCell(),r;if(t){r=n(t).children("div."+e.grid.wijgrid.CSS.cellContainer);if(r)return r}return null},r.prototype.isEqual=function(e){return e&&e.rowIndex()===this.rowIndex()&&e.cellIndex()===this.cellIndex()},r.prototype.row=function(){var e=null,t=null;return this._wijgrid&&(this._virtualize?t=this._wijgrid._view()._getRowInfoBySketchRowIndex(this.rowIndex()):(e=this._wijgrid._view().rows().item(this.rowIndexAbs()),e&&e.length&&(t=this._wijgrid._view()._getRowInfo(e)))),t},r.prototype.rowIndex=function(e){if(!arguments.length)return this._ri;this._ri=e},r.prototype.tableCell=function(){if(this._wijgrid&&this._isValid())if(!this._virtualize||this._isRendered())return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs());return null},r.prototype.value=function(n){var r,i,s;if(this._wijgrid&&this._isValid()){i=this.row();if(i.type&2){r=this.column();if(arguments.length===0)return s=this._wijgrid.mDataViewWrapper.getValue(i.data,r.dataKey),this._wijgrid.parse(r,s);n=this._wijgrid.parse(r,n);if(n===null&&r.valueRequired||e.grid.getDataType(r)!=="string"&&t.isNaN(n))throw"invalid value";this._wijgrid.mDataViewWrapper.setValue(i.dataItemIndex,r.dataKey,n);var o=this._wijgrid.mSketchTable.row(this.rowIndex()),u=o.cell(r.leavesIdx);u.value=n}}},r.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()},r.prototype._clip=function(e,t){typeof t=="undefined"&&(t=!1);var n=!1,r;return t?(this.cellIndexAbs()<(r=e.topLeft().cellIndexAbs())&&(n=!0,this._ci=e.topLeft().cellIndex()),this.cellIndexAbs()>(r=e.bottomRight().cellIndexAbs())&&(n=!0,this._ci=e.bottomRight().cellIndex()),this.rowIndexAbs()<(r=e.topLeft().rowIndexAbs())&&(n=!0,this._ri=e.topLeft().rowIndex()),this.rowIndexAbs()>(r=e.bottomRight().rowIndexAbs())&&(n=!0,this._ri=e.bottomRight().rowIndex())):(this.cellIndex()<(r=e.topLeft().cellIndex())&&(n=!0,this._ci=r),this.cellIndex()>(r=e.bottomRight().cellIndex())&&(n=!0,this._ci=r),this.rowIndex()<(r=e.topLeft().rowIndex())&&(n=!0,this._ri=r),this.rowIndex()>(r=e.bottomRight().rowIndex())&&(n=!0,this._ri=r)),n},r.prototype._clone=function(){return new e.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid,!1,this._virtualize)},r.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0},r.prototype._isRendered=function(){var e;if(this._wijgrid&&(e=this._wijgrid._view())&&this._isValid()){var t=e._isRowRendered(this.rowIndex());return t>=0}return!1},r.prototype._isEdit=function(t){var r=null,i=e.grid.wijgrid.CSS.editedCellMarker;if(this._isValid())try{r=this.tableCell()}catch(s){}if(!arguments.length)return r?n(r).hasClass(i):this.__isEdit;r&&n(r)[t?"addClass":"removeClass"](i),this.__isEdit=t},r.prototype._setGridView=function(e){this._wijgrid=e},r.outsideValue=new r(-1,-1,null),r}();t.cellInfo=r;var i=function(){function e(e,t){if(!e||!t)throw"invalid arguments";this._topLeft=e._clone(),this._bottomRight=t._clone()}return e.prototype.bottomRight=function(){return this._bottomRight},e.prototype.isEqual=function(e){return e&&this._topLeft.isEqual(e.topLeft())&&this._bottomRight.isEqual(e.bottomRight())},e.prototype.topLeft=function(){return this._topLeft},e.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()},e.prototype._isIntersect=function(e){var t,n,r,i;if(e){t=e.bottomRight().rowIndex()-e.topLeft().rowIndex()+1,n=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if(e.topLeft().rowIndex()+t-this._topLeft.rowIndex()<t+n)return r=e.bottomRight().cellIndex()-e.topLeft().cellIndex()+1,i=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1,e.topLeft().cellIndex()+r-this._topLeft.cellIndex()<r+i}return!1},e.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()},e.prototype._clip=function(e,t){typeof t=="undefined"&&(t=!1);var n=this._topLeft._clip(e,t),r=this._bottomRight._clip(e,t);return n||r},e.prototype._clone=function(){return new e(this._topLeft._clone(),this._bottomRight._clone())},e.prototype._containsCellInfo=function(e){return e&&e.cellIndex()>=this._topLeft.cellIndex()&&e.cellIndex()<=this._bottomRight.cellIndex()&&e.rowIndex()>=this._topLeft.rowIndex()&&e.rowIndex()<=this._bottomRight.rowIndex()},e.prototype._containsCellRange=function(e){return e&&this._containsCellInfo(e.topLeft())&&this._containsCellInfo(e.bottomRight())},e.prototype._extend=function(e,t){return e===1?(this._topLeft.rowIndex(t.topLeft().rowIndex()),this._bottomRight.rowIndex(t.bottomRight().rowIndex())):e===2&&(this._topLeft.cellIndex(t.topLeft().cellIndex()),this._bottomRight.cellIndex(t.bottomRight().cellIndex())),this},e.prototype._normalize=function(){var e=this._topLeft.cellIndex(),t=this._topLeft.rowIndex(),n=this._bottomRight.cellIndex(),r=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(e,n)),this._topLeft.rowIndex(Math.min(t,r)),this._bottomRight.cellIndex(Math.max(e,n)),this._bottomRight.rowIndex(Math.max(t,r))},e.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()},e.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()},e}();t.cellInfoRange=i,n.extend(n.wijmo.wijgrid,{cellInfo:e.grid.cellInfo,cellInfoRange:e.grid.cellInfoRange})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(t,n){this.mIsRendered=!1,this._sizesAdjCache={th:0,col:0,subTable:0};if(!t)throw"'wijgrid' must be specified";this._wijgrid=t,this._bounds=n,this._wijgrid.element.addClass(e.grid.wijgrid.CSS.table).addClass(this._wijgrid.options.wijCSS.wijgridTable)}return r.prototype.dispose=function(){this.toggleDOMSelection(!0),this._wijgrid.element.removeClass(e.grid.wijgrid.CSS.table).removeClass(this._wijgrid.options.wijCSS.wijgridTable)},r.prototype.ensureDisabledState=function(){var e="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,t=this._wijgrid.options.disabled,r=this;n.each(this.subTables(),function(i,s){if(s){var o=n(s.element());t?(o.addClass(e),r._wijgrid._setAttr(o,"aria-disabled",!0)):(o.removeClass(e),r._wijgrid._setAttr(o,"aria-disabled",!1))}})},r.prototype.ensureWidth=function(e,t,n){this._setColumnWidth(e,t)},r.prototype.ensureHeight=function(e){},r.prototype.getScrollValue=function(){return null},r.prototype.getVisibleAreaBounds=function(e){throw"not implemented"},r.prototype.getVisibleContentAreaBounds=function(){throw"not implemented"},r.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"},r.prototype.isRendered=function(){return this.mIsRendered},r.prototype.render=function(){this._ensureRenderBounds(),this._preRender(),this._renderContent(),this._postRender()},r.prototype.toggleDOMSelection=function(t){n.each(this.subTables(),function(n,r){(new e.grid.domSelection(r.element())).toggleSelection(t)}),(new e.grid.domSelection(this._wijgrid.mOuterDiv)).toggleSelection(t)},r.prototype.updateSplits=function(e){throw"not implemented"},r.prototype.getInlineTotalWidth=function(){throw"not implemented"},r.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){if(!this.isRendered())throw"not rendered yet";this._bodyRowsAccessor=new e.grid.rowAccessor(this,2,0,0)}return this._bodyRowsAccessor},r.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){if(!this.isRendered())throw"not rendered yet";var t=new e.grid.rowAccessor(this,1,0,0);return t.item(t.length()-1)}return null},r.prototype.footerRow=function(){if(this._wijgrid.options.showFooter){if(!this.isRendered())throw"not rendered yet";var t=new e.grid.rowAccessor(this,3,0,0);return t.item(0)}},r.prototype.headerRows=function(){var t;if(!this._headerRowsAccessor){if(!this.isRendered())throw"not rendered yet";t=this._wijgrid.options.showFilter?1:0,this._headerRowsAccessor=new e.grid.rowAccessor(this,1,0,t)}return this._headerRowsAccessor},r.prototype.rows=function(){if(!this._rowsAccessor){if(!this.isRendered())throw"not rendered yet";this._rowsAccessor=new e.grid.rowAccessor(this,0,0,0)}return this._rowsAccessor},r.prototype.focusableElement=function(){return this._wijgrid.mOuterDiv},r.prototype.forEachColumnCell=function(e,t,n){throw"not implemented"},r.prototype.forEachRowCell=function(e,t,n){throw"not implemented"},r.prototype.getAbsoluteCellInfo=function(e,t){throw"not implemented"},r.prototype.getAbsoluteRowIndex=function(e){throw"not implemented"},r.prototype.getCell=function(e,t){throw"not implemented"},r.prototype.getColumnIndex=function(e){throw"not implemented"},r.prototype.getHeaderCell=function(e){throw"not implemented"},r.prototype.getJoinedCols=function(e){throw"not implemented"},r.prototype.getJoinedRows=function(e,t){throw"not implemented"},r.prototype.getJoinedTables=function(e,t){throw"not implemented"},r.prototype.subTables=function(){throw"not implemented"},r.prototype._getMappedScrollMode=function(){var e=this._wijgrid.options.scrollMode,t="auto",n="auto";switch(e){case"horizontal":t="hidden",n="visible";break;case"vertical":t="visible",n="hidden";break;case"both":t="visible",n="visible"}return{vScrollBarVisibility:t,hScrollBarVisibility:n}},r.prototype._postRender=function(){this.mIsRendered=!0,this.ensureDisabledState(),this._sizesAdjCache.col=0,this._sizesAdjCache.th=0,this._sizesAdjCache.subTable=0;var e=this._wijgrid._visibleLeaves();if(e.length>0){var t=this.getHeaderCell(0),r=this.getJoinedCols(0);t&&(this._sizesAdjCache.th=n(t).leftBorderWidth()+n(t).rightBorderWidth()),r&&r.length&&(this._sizesAdjCache.col=n(r[0]).leftBorderWidth()+n(r[0]).rightBorderWidth())}var i=this.subTables()[0];this._sizesAdjCache.subTable=n(i.element()).leftBorderWidth()+n(i.element()).rightBorderWidth()},r.prototype._preRender=function(){this.mIsRendered=!1},r.prototype._ensureRenderBounds=function(){var e=this._wijgrid._getDataCellsRange(0);this._bounds.start=0,this._bounds.end=e.bottomRight().rowIndex()},r.prototype._renderContent=function(){this._renderCOLS(),this._renderHeader(),this._wijgrid.options.showFilter&&this._renderFilter(),this._renderBody(),this._wijgrid.options.showFooter&&this._renderFooter()},r.prototype._renderCOLS=function(){var e=this._wijgrid._visibleLeaves();for(var t=0,n=e.length;t<n;t++){var r=e[t],i=this._createCol(r,t);this._appendCol(i,r,t)}},r.prototype._renderHeader=function(){var t=e.grid.rowType,n=e.grid.renderState,r=this._wijgrid._columnsHeadersTable(),i,s,o;if(r&&(s=r.length))for(i=0;i<s;i++)o=this._insertEmptyRow(1,1,i,-1,-1,-1,undefined,{}),this._renderRow(o,null,r[i])},r.prototype._renderFilter=function(){var e=this._insertEmptyRow(8,1,-1,-1,-1,-1,undefined,{});this._renderRow(e,this._wijgrid._leaves(),null)},r.prototype._renderBody=function(){var t=e.grid.renderState,n=this._wijgrid._leaves(),r=this._wijgrid.mSketchTable,i=-1,s=0,o=0,u=this._wijgrid.mDataOffset,a=this;this._bounds.start>=0&&this._bounds.end>=0&&this._wijgrid._renderableBoundsCollection().forEachIndex(this._bounds.start,this._bounds.end-this._bounds.start+1,function(e){var t=r.row(e-u),f=t.isDataRow(),l=t.groupByValue,c=a._insertEmptyRow(t.rowType,1,o++,f?++i:-1,t.dataItemIndex(),t.dataItemIndex(s),l,t.extInfo);a._renderRow(c,n,t)})},r.prototype._renderFooter=function(){var e=this._insertEmptyRow(64,1,-1,-1,-1,-1,undefined,{});this._renderRow(e,this._wijgrid._leaves(),null)},r.prototype._insertEmptyRow=function(e,t,n,r,i,s,o,u){var a=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),f=this._insertRow(e,n,a);return t===undefined&&(t=1),this._createRowInfo(f,e,t,n,r,i,s,o,u)},r.prototype._createEmptyCell=function(t,n,r){var i=e.grid.rowType,s=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(t.type,s)},r.prototype._insertRow=function(e,t,n){throw"not implemented"},r.prototype._createCell=function(t,r){var i=e.grid.rowType,s;r||(t===1?r=document.createElement("th"):r=document.createElement("td"));if(t!==8){s=document.createElement("div"),s.className=e.grid.wijgrid.CSS.cellContainer+" "+this._wijgrid.options.wijCSS.wijgridCellContainer;if(r.firstChild)while(r.firstChild)s.appendChild(r.firstChild);r.appendChild(s)}return n(r)},r.prototype._appendCell=function(e,t,n){throw"not implemented"},r.prototype._createCol=function(e,t){throw"not implemented"},r.prototype._appendCol=function(e,t,n){throw"not implemented"},r.prototype._renderRow=function(t,n,r){var i=e.grid.rowType,s,o;switch(t.type){case 8:this._renderFilterRow(t,n);break;case 64:this._renderFooterRow(t,n);break;case 1:this._renderHeaderRow(t,r);break;case 2:case 6:this._renderDataRow(t,n,r),s=r.attr(),o=r.style();break;case 128:case 16:case 32:this._renderSpannedRow(t,n,r),s=r.attr(),o=r.style();break;default:throw"unknown rowType"}this._rowRendered(t,s,o)},r.prototype._renderCell=function(e,t,r,i,s,o,u,a){var f=this._createEmptyCell(e,s.options.dataIndex,s),l=e.type===8?f:n(f[0].firstChild);this._appendCell(e,t,f),i?l.html(r):this._wijgrid.mCellFormatter.format(f,t,l,s,r,e),this._cellRendered(e,f,t,s,o,u,a)},r.prototype._renderDataRow=function(e,n,r){for(var i=0,s=n.length;i<s;i++){var o=n[i];if(o._visible()){var u=r.cell(i),a=u.attr(),f=u.style(),l,c=e.state;if(o instanceof t.c1field){if(!u||!u.visible())continue;l=this._wijgrid.toStr(o.options,u.value),a=u.attr(),f=u.style()}else l=null;o.options.readOnly&&(c&=-17),this._renderCell(e,i,l,!1,o,c,a,f)}}},r.prototype._renderFilterRow=function(t,n){for(var r=0,i=n.length;r<i;r++){var s=n[r];s._visible()&&this._renderCell(t,r,e.grid.filterHelper.getSingleValue(s.options.filterValue),!1,s,t.state)}},r.prototype._renderFooterRow=function(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];i._visible()&&this._renderCell(e,n,"",!1,t[n],e.state)}},r.prototype._renderHeaderRow=function(e,t){var n=0,r=this._wijgrid._showRowHeader()?-1:0;for(var i=0,s=t.length;i<s;i++){var o=t[i];if(o.column){o.column.thX2=r++;if(o.column.parentVis){o.column.thX=n++,o.column.thY=e.sectionRowIndex;var u=this._wijgrid._findInstance(o.column);this._renderCell(e,i,o.column.headerText,!1,u,e.state,{colSpan:o.colSpan,rowSpan:o.rowSpan})}}}},r.prototype._renderSpannedRow=function(e,t,n){var r=Math.min(t.length,n.cellCount());for(var i=0;i<r;i++){var s=t[i],o=e.type===128,u=n.cell(i);this._renderCell(e,i,u.html,o,s,e.state,u.attr(),u.style())}},r.prototype._cellRendered=function(e,t,n,r,i,s,o){this._wijgrid.mCellStyleFormatter.format(t,n,r,e,i,s,o),this._changeCellRenderState(t,i,!1),this._wijgrid._onViewCellRendered(e,t,n,r)},r.prototype._rowRendered=function(e,t,n){this._wijgrid.mRowStyleFormatter.format(e,t,n),e.state&=-2,this._setRowInfo(e.$rows,e),this._wijgrid._onViewRowRendered(e,t,n)},r.prototype._makeRowEditable=function(n){var r=this._wijgrid._visibleLeaves(),i=new e.grid.cellEditorHelper;if(r)for(var s=0;s<r.length;s++){var o=r[s];if(o instanceof t.c1field&&!o.options.readOnly){var u=n.$rows.children("td, th").eq(s);if(u.length){var a=this.getAbsoluteCellInfo(u[0],!0);this._changeCellRenderState(u,16,i.cellEditStart(this._wijgrid,a,null))}}}},r.prototype._isBodyRow=function(t){var n=e.grid.rowType,r=t.type;return r&2||r===16||r===32||r===128},r.prototype._changeRowRenderState=function(e,t,n){n?e.state|=t:e.state&=~t,this._setRowInfo(e.$rows,e)},r.prototype._changeCellRenderState=function(t,n,r){var i=e.grid.dataPrefix,s=this._wijgrid.mDataPrefix,o=i(t,s,"renderState");return r?(n=o|n,i(t,s,"renderState",n)):(n=o&~n,i(t,s,"renderState",n)),n},r.prototype._adjustWidthArray=function(e,t,r,i){var s=this._sumWidthArray(e),o=this._sumWidthArray(t),u=[],a,f=0,l,c,h=!0;if(s<=r){n.extend(!0,u,e);if(s===r||i)return u;a=r-s}else{n.extend(!0,u,t);if(o>=r)return u;a=r-o}return n.each(u,function(e,t){t.real||f++}),f!==0&&(l=Math.floor(a/f),c=a-l*f,n.each(u,function(e,t){t.real||(t.width+=l,h&&(t.width+=c,h=!1))})),u},r.prototype._getColumnWidth=function(r){var i=this._wijgrid._visibleLeaves()[r];if(i instanceof t.c1rowheaderfield)return{width:t.c1rowheaderfield.COLUMN_WIDTH,real:!0};if(i.options._realWidth!==undefined)return{width:i.options._realWidth,real:!0,realPercent:e.grid.isPercentage(i.options.width)};var s=0,o=this.getJoinedTables(!0,r),u=o[2];for(var a=0;a<2;a++){var f=o[a];if(f!==null){var l=f.element().rows,c=null,h=l.length;if(h>0){for(var p=h-1;p>=0;p--)if(l[p].cells.length===f.width()){c=l[p];if(c.style.display!=="none")break}if(c){var d=c.cells[u];s=Math.max(s,n(d).outerWidth())}}}}return{width:s,real:!1}},r.prototype._setColumnWidth=function(e,t){var r=this.getHeaderCell(e),i=this.getJoinedCols(e),s;if(t){var o=this;r&&(s=t-this._sizesAdjCache.th,s<0&&(s=0),r.style.width=s+"px"),n.each(i,function(e,n){n&&(s=t-o._sizesAdjCache.col,s<0&&(s=0),n.style.width=s+"px")})}},r.prototype._setTableWidth=function(e,t,r,i){var s,o,u=this;n.each(e,function(e,n){n[0].style.tableLayout="fixed",n[0].style.width=t-u._sizesAdjCache.subTable+"px"}),s=e[0].outerWidth(),o=s-t,o!==0&&this._setColumnWidth(i,r-o)},r.prototype._sumWidthArray=function(e,t,r){var i=0;return n.each(e,function(e,n){if(t!==undefined&&r!==undefined&&(e<t||e>r))return!0;i+=n.width}),i},r.prototype._clearBody=function(){n.each(this.subTables(),function(e,t){t.clearSection(2)})},r.prototype._rebuildOffsets=function(){n.each(this.subTables(),function(e,t){t.rebuildOffsets()})},r.prototype._removeBodyRow=function(t,n){typeof n=="undefined"&&(n=!0);var r=e.grid.rowType,i=this._wijgrid._rows(),s,o,u,a;if(t>=0&&t<(o=i.length())){u=this._getRowInfo(i.item(t),!1),a=this.getAbsoluteRowIndex(u.$rows[0]),u.$rows.remove();if(n){var f=this.getJoinedTables(!1,a),l;(l=f[0])&&l.removeOffset(f[2]),(l=f[1])&&l.removeOffset(f[2])}}},r.prototype._insertBodyRow=function(t,n,r,i){var s=this._wijgrid._leaves(),o=e.grid.rowType,u=this._wijgrid._view(),a=this._wijgrid._rows(),f=a.length(),l=t.isDataRow(),c,h;if(n<0||n>=f||!n&&n!==0)n=f;c=this._insertEmptyRow(t.rowType,t.renderState,n,-1,r,i,t.groupByValue,t.extInfo),this._renderRow(c,s,t),h=this.getAbsoluteRowIndex(c.$rows[0]);var p=this.getJoinedTables(!1,h),d;return(d=p[0])&&d.insertOffset(h),(d=p[1])&&d.insertOffset(h),c},r.prototype._findRowInfo=function(e){var t=this.bodyRows(),r=0,i=t.length(),s;if(n.isFunction(e))for(r=0;r<i;r++){s=this._getRowInfo(t.item(r));if(e(s)===!0)return s}return null},r.prototype._setRowInfo=function(t,n){var r="$rows"in n,i="data"in n,s,o;r&&(s=n.$rows,delete n.$rows),i&&(o=n.data,delete n.data),e.grid.dataPrefix(t,this._wijgrid.mDataPrefix,"rowInfo",n),r&&(n.$rows=s),i&&(n.data=o)},r.prototype._getRowInfo=function(t,r){typeof r=="undefined"&&(r=!0);var i=this._wijgrid,s=t[1]?n(t):n(t[0]),o=e.grid.dataPrefix(s,i.mDataPrefix,"rowInfo"),u;o.$rows=s;if(r&&o.dataItemIndex>=0&&o.type&2)try{o.data=i._getDataItem(o.dataItemIndex)}catch(a){o.data=null}return o},r.prototype._getRowInfoBySketchRowIndex=function(e,t){typeof t=="undefined"&&(t=!0);if(e>=0){var n=this._isRowRendered(e);if(!(n>=0)){var i=this._wijgrid.mSketchTable.row(e),s=null;if(i){s=i.getRowInfo();if(t&&s.dataItemIndex>=0&&i.isDataRow())try{s.data=this._wijgrid._getDataItem(s.dataItemIndex)}catch(o){s.data=null}}return s}var r=this.bodyRows().item(n);if(r)return this._getRowInfo(r,t)}return null},r.prototype._createRowInfo=function(e,t,r,i,s,o,u,a,f){var l,c={type:t,state:r,sectionRowIndex:i,dataRowIndex:s,dataItemIndex:o,virtualDataItemIndex:u,$rows:e?n(e):null,_extInfo:f};return a!==undefined&&(c.groupByValue=a),o>=0&&t&2&&(c.data=this._wijgrid._getDataItem(o)),c},r.prototype._isRowRendered=function(e){var t=this._wijgrid._renderableBoundsCollection().getRenderedIndex(e);return t>=0&&t>=this._bounds.start&&t<=this._bounds.end?t-this._bounds.start:-1},r}();t.baseView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function r(e,n){t.call(this,e,n),this._dataTable=null,this._contentArea=null}return __extends(r,t),r.prototype.ensureWidth=function(e,r,i){var s=n(this._dataTable.element()),o=s.width()+r-i;t.prototype.ensureWidth.call(this,e,r,i),this._setTableWidth([s],o,r,e)},r.prototype.getVisibleAreaBounds=function(t){var n=e.grid.bounds(this._dataTable.element(),t);return n},r.prototype.getVisibleContentAreaBounds=function(){return this.getVisibleAreaBounds()},r.prototype.updateSplits=function(t){var r=this,i=this._wijgrid,s=i.options,o=i.element,u=[],a=[],f=[],l=i._visibleLeaves(),c=i.mOuterDiv,h,p;o.css({"table-layout":"",width:"auto"}),n.each(l,function(t,n){var i=n.options.width;if(i||i===0){i=e.grid.isPercentage(i)?c.width()*parseFloat(i)/100:parseFloat(i);if(n.options.ensurePxWidth||s.ensureColumnsPxWidth)n.options._realWidth=i;r._setColumnWidth(t,i)}}),n.each(l,function(e,t){u.push(r._getColumnWidth(e))}),o.css("width","1px"),n.each(l,function(e,t){a.push(r._getColumnWidth(e))}),h=c.width(),f=this._adjustWidthArray(u,a,h,s.ensureColumnsPxWidth),n.each(f,function(e,t){var n=l[e];if(n.options._realWidth!==undefined){delete n.options._realWidth;return}r._setColumnWidth(e,t.width)}),o.css("table-layout","fixed"),p=f.length-1;if(p!==-1){var d=c.width()-h;f[p].width+=d,this._setTableWidth([o],this._sumWidthArray(f,0,p),f[p].width,p)}},r.prototype.getInlineTotalWidth=function(){var e=this._dataTable.element(),t=e.style.width;return t&&t!=="auto"?t:""},r.prototype.forEachColumnCell=function(e,t,n){return this._dataTable.forEachColumnCell(e,t,n)},r.prototype.forEachRowCell=function(e,t,n){return this._dataTable.forEachRowCell(e,t,n)},r.prototype.getAbsoluteCellInfo=function(t,n){return new e.grid.cellInfo(this.getColumnIndex(t),t.parentNode.rowIndex,this._wijgrid,!0,n)},r.prototype.getAbsoluteRowIndex=function(e){return e.rowIndex},r.prototype.getCell=function(e,t){var n=this._dataTable.getCellIdx(e,t),r;if(n>=0){r=this.getJoinedRows(t,0);if(r[0])return r[0].cells[n]}return null},r.prototype.getColumnIndex=function(e){return this._dataTable.getColumnIdx(e)},r.prototype.getHeaderCell=function(t){var n=this._wijgrid._visibleLeaves()[t],r;return n&&(r=this._wijgrid._headerRows())?e.grid.rowAccessor.getCell(r.item(n.options.thY),n.options.thX):null},r.prototype.getJoinedCols=function(e){var t=n(this._dataTable.element()).find("> colgroup");return t.length&&e<t[0].childNodes.length?[t[0].childNodes[e],null]:[null,null]},r.prototype.getJoinedRows=function(e,t){return[this._dataTable.getSectionRow(e,t),null]},r.prototype.getJoinedTables=function(e,t){return[this._dataTable,null,t]},r.prototype.subTables=function(){return[this._dataTable]},r.prototype._preRender=function(){t.prototype._preRender.call(this),this._dataTable=new e.grid.htmlTableAccessor(this._wijgrid.element[0],!0,!0,!0)},r.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content),this._dataTable=new e.grid.htmlTableAccessor(this._wijgrid.element[0]),this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"}),this._wijgrid.element.css("border-collapse","separate"),t.prototype._postRender.call(this)},r.prototype._insertRow=function(t,n,r){var i=e.grid.rowType,s;switch(t){case 1:case 8:s=this._dataTable.ensureTHead();break;case 64:s=this._dataTable.ensureTFoot();break;default:s=this._dataTable.ensureTBody()}return r?[s.appendChild(r)]:(n>s.rows.length&&(n=-1),[s.insertRow(n)])},r.prototype._rowRendered=function(e,n,r){var i=e.$rows[0];!i.cells.length&&this._isBodyRow(e)?i.parentNode.removeChild(i):t.prototype._rowRendered.call(this,e,n,r)},r.prototype._appendCell=function(e,t,n){e.$rows[0].appendChild(n[0])},r.prototype._createCol=function(e,t){return[document.createElement("col")]},r.prototype._appendCol=function(e,t,n){this._dataTable.appendCol(e[0])},r}(t.baseView);t.flatView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(t){function r(r,i){t.call(this,r,i),this._verScrollBarSize=e.grid.getSuperPanelScrollBarSize(),this._viewTables={},this._splitAreas={},this._superPanelElementsCache={},this.element=r.element,this._staticDataRowIndex=r._getStaticIndex(!0),this._staticRowIndex=r._getRealStaticRowIndex(),this._staticColumnIndex=r._getRealStaticColumnIndex(),this._staticAllColumnIndex=this._staticColumnIndex===-1?-1:r._visibleLeaves()[this._staticColumnIndex].options.leavesIdx,this._mouseWheelHandler=n.proxy(this._onMouseWheel,this)}return __extends(r,t),r.prototype.dispose=function(){t.prototype.dispose.call(this),this._wijgrid.mOuterDiv.unbind("mousewheel",this._mouseWheelHandler)},r.prototype.ensureWidth=function(e,r,i){var s=this._wijgrid,o=this._staticColumnIndex,u=e<=o,a=n(this._viewTables.nw.element()),f=n(this._viewTables.ne.element()),l=n(this._viewTables.sw.element()),c=n(this._viewTables.se.element()),h=u?[a,l]:[f,c],p=(u?a.width():f.width())+r-i,d=this.getScrollValue();this._destroySuperPanel(),t.prototype.ensureWidth.call(this,e,r,i),this._setTableWidth(h,p,r,e);try{o>=0?s.mSplitDistanceX=a[0].offsetWidth:s.mSplitDistanceX=0}catch(v){}this._updateSplitAreaBounds(0),this._adjustRowsHeights();try{this._staticRowIndex>=0?s.mSplitDistanceY=Math.max(a[0].offsetHeight,f[0].offsetHeight):s.mSplitDistanceY=0}catch(v){}this._updateSplitAreaBounds(1),this.refreshPanel(d);var m=s._UIFrozener();m&&m.refresh()},r.prototype.ensureHeight=function(e){var t=this._wijgrid,r=n(this._viewTables.nw.element()),i=n(this._viewTables.ne.element()),s=n(this._viewTables.sw.element()),o=n(this._viewTables.se.element()),u=this.getScrollValue();this._destroySuperPanel();if(arguments.length>0){var a=this.getJoinedRows(e,2);this._setRowHeight(a,this._getRowHeight(a))}o.css("height",""),s.css("height","");var f=Math.max(o.height(),s.height());o.height(f),s.height(f);try{this._staticRowIndex>=0?t.mSplitDistanceY=Math.max(r[0].offsetHeight,i[0].offsetHeight):t.mSplitDistanceY=0}catch(l){}this._updateSplitAreaBounds(1),this.refreshPanel(u);var c=t._UIFrozener();c&&c.refresh()},r.prototype.getScrollValue=function(){var e=this._getSuperPanel();return e?{x:e.options.hScroller.scrollValue,y:e.options.vScroller.scrollValue}:null},r.prototype.getVisibleAreaBounds=function(t){var n=this._isNativeSuperPanel()?e.grid.bounds(this._getSuperPanelStateContainer(),t):e.grid.bounds(this._getSuperPanelContentWrapper(),t);return n||(n=e.grid.bounds(this._wijgrid.mOuterDiv,t)),n},r.prototype.getVisibleContentAreaBounds=function(){var t=this.getVisibleAreaBounds(!0),n=e.grid.bounds(this._viewTables.nw.element())||{},r=e.grid.bounds(this._viewTables.ne.element())||{},i=e.grid.bounds(this._viewTables.sw.element())||{},s=e.grid.bounds(this._viewTables.se.element())||{},o={top:t.top,left:t.left,width:Math.max(n.width+r.width,i.width+s.width),height:Math.max(n.height+i.height,r.height+s.height)};return o.width=Math.min(t.width,o.width),o.height=Math.min(t.height,o.height),o},r.prototype.getRowAreaHeight=function(){var e=this._getSuperPanelContentWrapper();e.length==0&&(e=this._wijgrid.mOuterDiv);var t=e.height(),r=this._wijgrid.mSplitDistanceY;r&&(t-=r);if(this._wijgrid.options.showFooter){var i,s=this.isRendered()&&(i=this.footerRow())?n(i).height():this.getDefaultRowHeight();t-=s}return t},r.prototype.getVirtualPageSize=function(e){typeof e=="undefined"&&(e=!0);var t=this._wijgrid.mRowOuterHeight&&this._wijgrid.mRowOuterHeight>0?this._wijgrid.mRowOuterHeight:this.getDefaultRowHeight(),n=this.getRowAreaHeight()/t;return e?Math.ceil(n):Math.floor(n)},r.prototype.getFixedAreaVisibleBounds=function(){var t=this.getVisibleAreaBounds(),n=e.grid.bounds(this._splitAreas.ne),r=e.grid.bounds(this._splitAreas.nw),i=null,s=null;if(n.height||r.height)i={left:t.left,top:t.top,width:t.width,height:Math.min(n.height||r.height,t.height)};return r.width&&(s={left:r.left,top:t.top,width:Math.min(r.width,t.width),height:t.height}),[i,s]},r.prototype.getDefaultRowHeight=function(){return this._wijgrid.options.rowHeight>=0?this._wijgrid.options.rowHeight:r.DEFAULT_ROW_HEIGHT_VIRTUAL},r.prototype.refreshPanel=function(t){var r=this,i=this._wijgrid,s=i.options,o=this._getMappedScrollMode(),u=i._rows().item(0),a=!1;i.mRowOuterHeight=u&&u[0]?n(u[0]).outerHeight():this.getDefaultRowHeight();if(!this._scroller.data("wijmo-wijsuperpanel")){a=!0,this._wijgrid._allowVirtualScrolling()&&(this.vsUI=new e.grid.uiVirtualScroller(i,this._splitAreas.se,i.mSplitDistanceY,i.mRowOuterHeight)),t&&o.hScrollBarVisibility==="hidden"&&(t.x=0),this._scroller.wijsuperpanel({disabled:i.options.disabled,scroll:n.proxy(this._onScroll,this),bubbleScrollingEvent:!0,customScrolling:this._wijgrid._allowVirtualScrolling(),vScroller:{scrollBarVisibility:o.vScrollBarVisibility,scrollValue:t?t.y:null},hScroller:{scrollBarVisibility:o.hScrollBarVisibility,scrollValue:t?t.x:null},hScrollerActivating:n.proxy(this._onHScrollerActivating,this)});if(this._isNativeSuperPanel()){var f=this._getSuperPanelStateContainer();f.length&&f[0].offsetHeight!==f[0].clientHeight&&this._onHScrollerActivating(null,{contentLength:f[0].clientHeight})}this._isNativeSuperPanel()||this._getSuperPanelContentWrapper().bind("scroll",function(e){e.target.scrollLeft=0,e.target.scrollTop=0,e.preventDefault()}),this._wijgrid._allowVirtualScrolling()&&this.vsUI.attach(this._scroller)}else this._scroller.wijsuperpanel("paintPanel");var l=this._testNeedVBar(i.mOuterDiv,i.element,n(this._viewTables.ne.element()),s.scrollMode,i.mAutoHeight),c=l&&!this._testAutohiddenScrollbars(),h=this.getVisibleContentAreaBounds().width;this._splitAreas.ne.width(h-i.mSplitDistanceX);if(a&&t&&t.x){var p=this._scroller.wijsuperpanel("scrollValueToPx",t.x,"h");this._setFixedAreaPosition(this._splitAreas.ne,"h",p,null,!0)}s.staticColumnsAlignment==="right"&&(this._splitAreas.nw.css({left:"",right:c?this._verScrollBarSize:0}),this._splitAreas.sw.css({left:"",right:c?this._verScrollBarSize:0})),this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5),this._wijgrid._allowVirtualScrolling()&&this._wijgrid._handleVirtualScrolling(this._bounds.start)},r.prototype.scrollTo=function(e,t,r){var i=this._wijgrid,s=null;if(i._allowVirtualScrolling()){var o=i._renderableBoundsCollection().getRenderedIndex(e.rowIndex()),u,a=i._rows().length(),f,l=o-i._viewPortBounds().start>=a-1;if(!e._isRendered()||l&&(u=this.getVisibleAreaBounds(!0))&&(f=e.row().$rows)&&f.offset().top+f.outerHeight()>u.top+u.height)s=o,e.rowIndex()>r.changingEventArgs.oldRowIndex&&(s-=a-1,s+=1)}var c=this._getSuperPanel();if(s!==null)r.setFocus=!0,r.hasFocusedChild=!1,c?this.vsUI.scrollTo(s,function(){t()}):t();else{var h=n(e.tableCell()),p=null,d=null;if(c&&h.is(":visible")){var v=c.getContentElement(),m=v.parent(),g=parseInt((v.css("left")+"").replace("px",""),10)*-1,y=parseInt((v.css("top")+"").replace("px",""),10)*-1,b=m.outerWidth()-i.mSplitDistanceX,w=m.outerHeight()-i.mSplitDistanceY,E=h.position(),S=E.left,x=E.top,T=h.outerWidth(),N=h.outerHeight(),C=i._getStaticIndex(!0),k=i._getStaticIndex(!1),L=e.rowIndex(),A=e.cellIndex();L<=C?A<=k?(p=0,d=0):(S+=g,S+T>g+b&&(g=p=S+T-b),S<g&&(p=S),d=0):A<=k?(x+=this._splitAreas.sw.scrollTop(),x+N>y+w&&(y=d=x+N-w),x<y&&(d=x),p=0):(S-=i.mSplitDistanceX,x+N>y+w&&(y=d=x+N-w),S+T>g+b&&(g=p=S+T-b),x<y&&(d=x),S<g&&(p=S)),p!==null&&c.hScrollTo(p),d!==null&&c.vScrollTo(d)}t()}},r.prototype.updateSplits=function(t){var r=this._wijgrid,i=r.options,s,o=this,u=[],a=[],f=[],l=this._staticColumnIndex,c,h=r._visibleLeaves(),p=n(this._viewTables.se.element()),d=n(this._viewTables.ne.element()),v=n(this._viewTables.sw.element()),m=n(this._viewTables.nw.element()),g=r.mOuterDiv,y,b;this._destroySuperPanel(),g.unbind("mousewheel",this._mouseWheelHandler);if((y=o._viewTables.se.element().tBodies)&&(y=y[0])){b=!1;for(var w=0;w<y.rows.length;w++)if(!n(y.rows[w]).hasClass(e.grid.wijgrid.CSS.groupHeaderRow)){b=!0;break}b||r.element.css("width","100%")}n.each([p,d,v,m],function(e,t){t.css({"table-layout":"",width:""})}),n.each(h,function(t,n){var r=n.options.width;if(r||r===0){r=e.grid.isPercentage(r)?g.width()*parseFloat(r)/100:parseFloat(r);if(n.options.ensurePxWidth||i.ensureColumnsPxWidth)n.options._realWidth=r;o._setColumnWidth(t,r)}}),n.each(h,function(e,t){f.push(o._getColumnWidth(e))}),n.each([m,d,v,p],function(e,t){t.css({width:"1px"})}),n.each(h,function(e,t){a.push(o._getColumnWidth(e))}),s=g.width(),u=this._adjustWidthArray(f,a,s,i.ensureColumnsPxWidth),n.each(u,function(e,t){var n=h[e];if(n.options._realWidth!==undefined){delete n.options._realWidth;return}o._setColumnWidth(e,t.width)}),l>=0&&(c=l,this._setTableWidth([m,v],this._sumWidthArray(u,0,c),u[c].width,c));try{l>=0?r.mSplitDistanceX=m[0].offsetWidth:r.mSplitDistanceX=0}catch(E){}this._updateSplitAreaBounds(0),i.ensureColumnsPxWidth||d.parent().width(s-r.mSplitDistanceX),c=u.length-1,c!==-1&&this._setTableWidth([d,p],this._sumWidthArray(u,l+1,c),u[c].width,c),this._adjustRowsHeights();try{this._staticRowIndex>=0?r.mSplitDistanceY=Math.max(m[0].offsetHeight,d[0].offsetHeight):r.mSplitDistanceY=0}catch(E){}this._updateSplitAreaBounds(1);if(this._testNeedVBar(r.mOuterDiv,p,d,r.options.scrollMode,r.mAutoHeight)){var S=!1;s-=this._verScrollBarSize,i.ensureColumnsPxWidth?n.each(h,function(t,n){var r=n.options;e.grid.isPercentage(r.width)&&(f[t].width=a[t].width=s*parseFloat(r.width)/100,S=!0)}):S=!0;if(S){u=this._adjustWidthArray(f,a,s,i.ensureColumnsPxWidth),n.each(u,function(e,t){(!t.real||t.realPercent)&&o._setColumnWidth(e,t.width)}),l>=0&&(c=l,this._setTableWidth([m,v],this._sumWidthArray(u,0,c),u[c].width,c));try{r.mSplitDistanceX=l>=0?m[0].offsetWidth:0}catch(E){}this._updateSplitAreaBounds(0),d.parent().width(s-r.mSplitDistanceX),c=u.length-1,c!==-1&&this._setTableWidth([d,p],this._sumWidthArray(u,l+1,c),u[c].width,c),this._adjustRowsHeights();try{r.mSplitDistanceY=this._staticRowIndex>=0?Math.max(m[0].offsetHeight,d[0].offsetHeight):0}catch(E){}this._updateSplitAreaBounds(1)}}this.refreshPanel(t),g.bind("mousewheel",n.proxy(this._mouseWheelHandler,this))},r.prototype.getInlineTotalWidth=function(){if(this._scroller){var e=this._getSuperPanelStateContainer();if(e.length){var t=e[0].style.width;if(t&&t!=="auto")return t}}return""},r.prototype._clearBody=function(){t.prototype._clearBody.call(this)},r.prototype.bodyRows=function(){var e=t.prototype.bodyRows.call(this);return e},r.prototype.forEachColumnCell=function(e,t,n){var r=this.getJoinedTables(!0,e),i,s;if(r[0]!==null){i=r[2],s=r[0].forEachColumnCell(i,t,n);if(s!==!0)return s;if(r[1]!==null){s=r[1].forEachColumnCell(i,t,n);if(s!==!0)return s}}return!0},r.prototype.forEachRowCell=function(e,t,n){var r=this.getJoinedTables(!1,e),i=r[0],s=r[1],o,u;if(i!==null){o=r[2];if(o<i.element().rows.length){u=i.forEachRowCell(o,t,n);if(u!==!0)return u}if(s!==null&&o<s.element().rows.length){u=s.forEachRowCell(o,t,n);if(u!==!0)return u}}return!0},r.prototype.getAbsoluteCellInfo=function(t,n){return new e.grid.cellInfo(this.getColumnIndex(t),this.getAbsoluteRowIndex(t.parentNode),this._wijgrid,!0,n)},r.prototype.getAbsoluteRowIndex=function(e){var t=e.rowIndex,n=e.parentNode;while(n&&n.tagName&&n.tagName.toLowerCase()!=="table")n=n.parentNode;return n===this._viewTables.nw.element()||n===this._viewTables.ne.element()?t:t+this._staticRowIndex+1},r.prototype.getCell=function(e,t){var n=this.getJoinedTables(!1,t),r,i,s,o,u;if(n[0]!==null){r=this.getJoinedTables(!0,e);if(r[0]!==null){i=n[2],s=r[2],o=null,n[1]!==null?o=e===s?n[0]:n[1]:o=n[0],u=o.getCellIdx(s,i);if(u>=0)return o.element().rows[i].cells[u]}}return null},r.prototype.getColumnIndex=function(e){var t=null,n=null,r=!1,i;for(t=e.parentNode;t.tagName.toLowerCase()!=="table";t=t.parentNode);if(t!==null){t===this._viewTables.nw.element()?n=this._viewTables.nw:t===this._viewTables.ne.element()?(n=this._viewTables.ne,r=!0):t===this._viewTables.sw.element()?n=this._viewTables.sw:t===this._viewTables.se.element()&&(n=this._viewTables.se,r=!0);if(n!==null)return i=n.getColumnIdx(e),r&&(i+=this._staticColumnIndex+1),i}return-1},r.prototype.getHeaderCell=function(t){var n=this._wijgrid._visibleLeaves()[t],r;return n&&(r=this._wijgrid._headerRows())?e.grid.rowAccessor.getCell(r.item(n.options.thY),n.options.thX):null},r.prototype.getJoinedCols=function(e){var t=[],r=this.getJoinedTables(!0,e),i=r[2];return r.splice(r.length-1,1),n.each(r,function(e,r){t.push(r?n(r.element()).find("col")[i]:null)}),t},r.prototype.getJoinedRows=function(e,t){var n=null,r=null,i=null,s=null,o=this._staticRowIndex,u=this._staticColumnIndex,a=this._wijgrid._visibleLeaves().length-1,f=this._rowsCountRaw()-1,l=o===f,c=o<0,h=!l&&!c,p=0;if(l||h)u>=0&&u<a?(i=this._viewTables.nw,s=this._viewTables.ne):i=u<0?this._viewTables.ne:this._viewTables.nw,p=i.getSectionLength(t),e<p&&(n=i.getSectionRow(e,t),s!==null&&(r=s.getSectionRow(e,t)));if(c||h&&n===null)c||(e-=p),u>=0&&u<a?(i=this._viewTables.sw,s=this._viewTables.se):i=u<0?this._viewTables.se:this._viewTables.sw,n=i.getSectionRow(e,t),s!==null&&(r=s.getSectionRow(e,t));return n===null&&r===null?null:[n,r]},r.prototype.getJoinedTables=function(e,t){var n=null,r=null,i=t,s=this._wijgrid,o=this._staticRowIndex,u=this._staticColumnIndex;return e?(t<=u?(n=this._viewTables.nw,r=this._viewTables.sw):(n=this._viewTables.ne,r=this._viewTables.se,i-=u+1),o<0&&(n=null),o===this._rowsCountRaw()-1&&(r=null)):(t<=o?(n=this._viewTables.nw,r=this._viewTables.ne):(n=this._viewTables.sw,r=this._viewTables.se,i-=o+1),u<0&&(n=null),u===s._leaves().length-1&&(r=null)),n===null&&(n=r,r=null),[n,r,i]},r.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]},r.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null},r.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){var e=this.getVirtualPageSize();this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.end=this._bounds.start+e-1;if(this._wijgrid._serverSideVirtualScrolling()){var n=this._bounds.end-this._bounds.start+1-this._wijgrid.mSketchTable.count();n>0&&(this._bounds.end-=n)}this._wijgrid._ensureRenderableBounds(this._bounds);if(this._bounds.start>0&&this._bounds.end===this._wijgrid.mSketchTable.count()-1){e=this.getVirtualPageSize(!1);var r=this._bounds.end-this._bounds.start+1;r<e&&(this._bounds.start=this._bounds.end-e+1),this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.start!==this._wijgrid.mScrollingState.index&&(this._wijgrid.mScrollingState.index=this._wijgrid.mScrollingState.y=this._bounds.start)}}else t.prototype._ensureRenderBounds.call(this)},r.prototype._renderContent=function(){t.prototype._renderContent.call(this)},r.prototype._preRender=function(){t.prototype._preRender.call(this);var r=document.createDocumentFragment(),i=e.grid.htmlTableAccessor,s=e.grid.wijgrid.CSS,o=this._wijgrid.options.wijCSS;this._wijgrid.mOuterDiv.wrapInner('<div class="'+s.fixedView+" "+o.wijgridFixedView+'"><div class="'+s.scroller+" "+o.wijgridScroller+'"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>'),this._scroller=this._wijgrid.mOuterDiv.find("."+s.scroller),this._scroller.css("padding",0),this._scroller.after(this._splitAreas.nw=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.ne=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.sw=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first"),this._viewTables={nw:new i(r.appendChild(document.createElement("table")),!0,!0,!0),ne:new i(r.appendChild(document.createElement("table")),!0,!0,!0),sw:new i(r.appendChild(document.createElement("table")),!0,!0,!0),se:new i(r.appendChild(this._wijgrid.element[0]),!0,!0,!0)}},r.prototype._postRender=function(){var r,i,s,o,u=e.grid.htmlTableAccessor,a=this;this._viewTables={nw:new u(r=this._viewTables.nw.element()),ne:new u(i=this._viewTables.ne.element()),sw:new u(s=this._viewTables.sw.element()),se:new u(o=this._viewTables.se.element())},this._splitAreas.nw.empty().append(r),this._splitAreas.ne.empty().append(i),this._splitAreas.sw.empty().append(s),this._splitAreas.se.empty().append(o),n.each(this._viewTables,function(t,r){var i=n(r.element());a._wijgrid._setAttr(i,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"}),i.addClass(e.grid.wijgrid.CSS.table).addClass(a._wijgrid.options.wijCSS.wijgridTable).css("border-collapse","separate").find("> tbody").addClass(a._wijgrid.options.wijCSS.content)}),t.prototype._postRender.call(this)},r.prototype._rowsCountRaw=function(){var e=this._viewTables.nw.element(),t=this._viewTables.ne.element(),n=this._viewTables.sw.element(),r=this._viewTables.se.element(),i;return i=Math.max(e.rows.length,t.rows.length)+Math.max(n.rows.length,r.rows.length),i},r.prototype._createCol=function(e,t){return[document.createElement("col"),document.createElement("col")]},r.prototype._appendCol=function(e,t,n){n<=this._staticColumnIndex?(this._viewTables.nw.appendCol(e[0]),this._viewTables.sw.appendCol(e[1])):(this._viewTables.ne.appendCol(e[0]),this._viewTables.se.appendCol(e[1]))},r.prototype._insertRow=function(t,n,r){var i=e.grid.rowType,s,o,u=this._viewTables;switch(t){case 1:case 8:s=u.nw.ensureTHead(),o=u.ne.ensureTHead();break;case 64:s=u.sw.ensureTFoot(),o=u.se.ensureTFoot();break;default:n<=this._staticDataRowIndex?(s=u.nw.ensureTBody(),o=u.ne.ensureTBody()):(n-=this._staticDataRowIndex+1,s=u.sw.ensureTBody(),o=u.se.ensureTBody())}return r?[s.appendChild(r),o.appendChild(r.cloneNode(!1))]:[s.insertRow(n>s.rows.length?-1:n),o.insertRow(n>o.rows.length?-1:n)]},r.prototype._rowRendered=function(e,r,i){var s=e.$rows[0],o=e.$rows[1];!s.cells.length&&this._isBodyRow(e)&&(s.parentNode.removeChild(s),s=null),!o.cells.length&&this._isBodyRow(e)&&(o.parentNode.removeChild(o),o=null);if(s||o){if(!s||!o)e.$rows=s?n(s):n(o);t.prototype._rowRendered.call(this,e,r,i)}},r.prototype._appendCell=function(e,t,n){var r=e.type!==1?this._staticColumnIndex:this._staticAllColumnIndex;t<=r?e.$rows[0].appendChild(n[0]):e.$rows[1].appendChild(n[0])},r.prototype._getRowHeight=function(e,t){if(e[0]&&e[1]){var r=e[0],i=e[1],s=n(r),o=n(i),u,a,f,l=function(e){var t,r=e[0],i;for(t=0;t<r.cells.length;t++){i=r.cells[t];if(!i.rowSpan||i.rowSpan===1)return n(i).outerHeight()}return e.height()};return(f=n.data(r,"customHeight"))?u=a=parseInt(f):(s.css("height",""),o.css("height",""),t?(u=l(s),a=l(o)):(u=s.height(),a=o.height())),Math.max(u,a)}return null},r.prototype._setRowHeight=function(e,t){if(e[0]&&e[1]){var r=[n(e[0]),n(e[1])],i;if(t===null)return;t+=1,n.each(r,function(e,n){n.height(t),i=t-n.height(),i&&n.height(t+i)})}},r.prototype._adjustRowHeight=function(){var e=this._wijgrid,t=this._staticColumnIndex,n=e._visibleLeaves().length-1,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=[];if(t>-1&&t<n){r=this._staticRowIndex,i=this._rowsCountRaw()-1,s=this._viewTables;if(r>-1&&r<=i){o=s.ne.element(),u=o.parentNode,a=s.nw.element(),f=a.parentNode,g=a.rows,y=o.rows,d=g.length;for(v=0;v<d;v++)b.push(this._getRowHeight([g[v],y[v]],!0))}if(r>=-1&&r<i){l=s.se.element(),c=l.parentNode,h=s.sw.element(),p=h.parentNode,g=h.rows,y=l.rows,d=g.length;for(v=0;v<d;v++)b.push(this._getRowHeight([g[v],y[v]]))}r>-1&&r<=i&&(f.removeChild(a),u.removeChild(o)),r>=-1&&r<i&&(p.removeChild(h),c.removeChild(l));if(r>-1&&r<=i){g=a.rows,y=o.rows,d=g.length;for(v=0,m=0;v<d;v++)this._setRowHeight([g[v],y[v]],b[m++])}if(r>=-1&&r<i){g=h.rows,y=l.rows,d=g.length;for(v=0;v<d;v++)this._setRowHeight([g[v],y[v]],b[m++])}r>-1&&r<=i&&(f.appendChild(a),u.appendChild(o)),r>=-1&&r<i&&(p.appendChild(h),c.appendChild(l))}},r.prototype._adjustRowsHeights=function(){var e=n(this._viewTables.sw.element()),t=n(this._viewTables.se.element()),r;t.css("height",""),e.css("height",""),this._adjustRowHeight(),r=Math.max(t.height(),e.height()),e.height(r),t.height(r)},r.prototype._destroySuperPanel=function(){this._scroller.data("wijmo-wijsuperpanel")&&(this.vsUI&&this.vsUI.dispose(),this._superPanelElementsCache={},this._scroller.wijsuperpanel("destroy"))},r.prototype._onScroll=function(e,t){var n=this._getSuperPanel();this._wijgrid._allowVirtualScrolling()?t.dir==="h"&&(this._setFixedAreaPosition(n.getContentElement(),t.dir,t.position,t.animationOptions,!1),this._setFixedAreaPosition(this._splitAreas.ne,t.dir,t.position,t.animationOptions,!0)):this._setFixedAreaPosition(t.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,t.dir,t.position,t.animationOptions,!0),this._wijgrid._trackScrollingPosition(n.options.hScroller.scrollValue,n.options.vScroller.scrollValue)},r.prototype._onHScrollerActivating=function(e,t){if(this._wijgrid.mAutoHeight){var n=this._wijgrid.element.height()+this._wijgrid.mSplitDistanceY-t.contentLength;if(n>0)return this._scroller.height(this._scroller.height()+n),this._scroller.wijsuperpanel("paintPanel"),!1}this._splitAreas.sw.height(t.contentLength-this._wijgrid.mSplitDistanceY)},r.prototype._onMouseWheel=function(t,r){var i,s=r>0?"top":"bottom",o=!1,u;this._wijgrid._canInteract()&&(i=this.getFixedAreaVisibleBounds(),n.each(i,function(n,r){if(r&&e.grid.isOver(t.pageY,t.pageX,r.top,r.left,r.height,r.width))return o=!0,!1}),o&&this._scroller.data("wijmo-wijsuperpanel")&&(u=this._scroller.wijsuperpanel("option","vScroller").scrollValue,this._scroller.wijsuperpanel("doScrolling",s),u!==this._scroller.wijsuperpanel("option","vScroller").scrollValue&&(t.stopPropagation(),t.preventDefault())))},r.prototype._setFixedAreaPosition=function(e,t,n,r,i){var s={},o;t==="h"?o=i?"scrollLeft":"left":o=i?"scrollTop":"top",i||(n=-n),r?(s[o]=n,e.animate(s,r)):i?e[0][o]=n:e.css(o,n)},r.prototype._testNeedVBar=function(e,t,n,r,i){var s=!1,o=this._wijgrid,u=n.width()+o.mSplitDistanceX,a=t.height()+o.mSplitDistanceY,f=e.width(),l=e.height(),c,h=0,p=0;o.mSuperPanelHeader!==null&&(h=o.mSuperPanelHeader.outerHeight(!0)),o.mBottomPagerDiv!==null&&(p=o.mBottomPagerDiv.outerHeight(!0)),c=l-h-p;switch(r){case"both":case"vertical":s=!0;break;case"auto":s=a>c||!i&&u>f&&a>c-this._verScrollBarSize;if(!s&&this._wijgrid._allowVirtualScrolling()){var d=o._view().getVirtualPageSize();s=d>0&&d<o._totalRowsCount()}}return s},r.prototype._updateSplitAreaBounds=function(e){var t=this._wijgrid,n,r,i=0,s=0;if(e===0||e===2)this._splitAreas.nw.width(t.mSplitDistanceX),this._splitAreas.sw.width(t.mSplitDistanceX),t.options.staticColumnsAlignment==="right"?(this._splitAreas.se.css("marginRight",t.mSplitDistanceX),this._splitAreas.ne.css("marginRight",t.mSplitDistanceX)):(this._splitAreas.se.css("marginLeft",t.mSplitDistanceX),this._splitAreas.ne.css("marginLeft",t.mSplitDistanceX));if(e===1||e===2)this._scroller.css("height",""),this._splitAreas.se.css("marginTop",0),n=t.mOuterDiv.height(),t.mAutoHeight?this._scroller.height(n+t.mSplitDistanceY):this._scroller.height(n),this._splitAreas.nw.height(t.mSplitDistanceY),this._splitAreas.ne.height(t.mSplitDistanceY),t.mSuperPanelHeader!==null&&(i=t.mSuperPanelHeader.outerHeight(!0)),t.mBottomPagerDiv!==null&&(s=t.mBottomPagerDiv.outerHeight(!0)),r=n-i-s,t.mSuperPanelHeader!==null&&(this._splitAreas.nw.css("top",i+"px"),this._splitAreas.ne.css("top",i+"px")),t.mAutoHeight?this._splitAreas.sw.height(r):this._splitAreas.sw.height(r-t.mSplitDistanceY),this._splitAreas.sw.css("top",t.mSplitDistanceY+i),this._splitAreas.se.css("marginTop",t.mSplitDistanceY)},r.prototype._getSuperPanelContentWrapper=function(){if(!this._superPanelElementsCache.contentWrapper||!this._superPanelElementsCache.contentWrapper.length)this._superPanelElementsCache.contentWrapper=this._wijgrid.mOuterDiv.find(".wijmo-wijsuperpanel-contentwrapper:first");return this._superPanelElementsCache.contentWrapper},r.prototype._getSuperPanelStateContainer=function(){if(!this._superPanelElementsCache.stateContainer||!this._superPanelElementsCache.stateContainer.length)this._superPanelElementsCache.stateContainer=this._wijgrid.mOuterDiv.find(".wijmo-wijsuperpanel-statecontainer:first");return this._superPanelElementsCache.stateContainer},r.prototype._isNativeSuperPanel=function(){return this._wijgrid._isTouchEnv()},r.prototype._testAutohiddenScrollbars=function(){if(this._isNativeSuperPanel()){var e=this._getSuperPanelStateContainer();if(e.length)return e[0].offsetWidth===e[0].clientWidth}return!1},r.DEFAULT_ROW_HEIGHT_VIRTUAL=19,r}(t.baseView);t.fixedView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(e){this._updates=0,this._selectedColumns=null,this._selectedRows=null,this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!e)throw"invalid arguments";this._wijgrid=e,this._addedCells=new i(e),this._removedCells=new i(e),this._selectedCells=new i(e),this._addedDuringCurTransactionCells=new i(e)}return t.prototype.selectedCells=function(){return this._selectedCells},t.prototype.selectedRows=function(){return this._selectedRows||(this._selectedRows=new s(this._wijgrid)),this._selectedRows},t.prototype.addColumns=function(e,t){!t&&t!==0&&(t=e),this.addRange(e,0,t,16777215)},t.prototype.addRange=function(t,n,r,i){if(!t&&arguments.length===1)throw"invalid argument";var s=arguments.length===4?new e.grid.cellInfoRange(new e.grid.cellInfo(t,n),new e.grid.cellInfo(r,i)):t._clone();s._normalize();if(!s._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._currentCell()),this._selectRange(s,!1,!0,0,null),this.endUpdate()},t.prototype.addRows=function(e,t){!t&&t!==0&&(t=e),this.addRange(0,e,16777215,t)},t.prototype.removeRange=function(t,n,r,i){if(!t&&arguments.length===1)throw"invalid argument";var s=arguments.length===4?new e.grid.cellInfoRange(new e.grid.cellInfo(t,n),new e.grid.cellInfo(r,i)):t._clone();s._normalize();if(!s._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._currentCell()),this._clearRange(s,0),this.endUpdate()},t.prototype.removeColumns=function(e,t){!t&&t!==0&&(t=e),this.removeRange(e,0,t,16777215)},t.prototype.removeRows=function(e,t){!t&&t!==0&&(t=e),this.removeRange(0,e,16777215,t)},t.prototype.clear=function(){this.beginUpdate(),this._removedCells._clear(),this._removedCells._addFrom(this._selectedCells),this.endUpdate()},t.prototype.selectAll=function(){this.beginUpdate(),this._selectRange(this._wijgrid._getDataCellsRange(0),!1,!1,0,null),this.endUpdate()},t.prototype.beginUpdate=function(){this._updates++},t.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length())this._selectedColumns!==null&&this._selectedColumns.UnderlyingDataChanged(),this._selectedRows!==null&&this._selectedRows._setDirty(),this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells});this._addedCells=new e.grid.cellInfoOrderedCollection(this._wijgrid),this._removedCells._clear()}}},t.prototype._multipleRangesAllowed=function(){var e=this._wijgrid.options.selectionMode;return e&&((e=e.toLowerCase())==="multicolumn"||e==="multirow"||e==="multirange")},t.prototype._multipleEntitiesAllowed=function(){var e=this._wijgrid.options.selectionMode;return e&&((e=e.toLowerCase())==="multicolumn"||e==="multirow"||e==="multirange"||e==="singlerange")},t.prototype._anchorCell=function(){return this.__anchorCell},t.prototype._startNewTransaction=function(t){t&&(this.__anchorCell=t._clone(),this._addedDuringCurTransactionCells=new e.grid.cellInfoOrderedCollection(this._wijgrid))},t.prototype._clearRange=function(e,t){var n=this._wijgrid.options.selectionMode.toLowerCase(),r,i,s,o,u,a,f,l,c,h=this._wijgrid._getDataCellsRange(0);if(e._isValid()&&n!=="none"&&this._selectedCells.length()>0){r=e._clone(),r._normalize(),r._clip(h);if(!e._isValid())return;r._extend(this._extend_rules[n][t],h),this.beginUpdate();for(f=0,l=this._selectedCells.length();f<l;f++)c=this._selectedCells.item(f),r._containsCellInfo(c)&&this._removedCells._add(c);this.endUpdate()}},t.prototype._selectRange=function(t,n,r,i,s){var o=this._wijgrid.options.selectionMode.toLowerCase(),u,a=this._wijgrid._getDataCellsRange(0);if(o!=="none"&&t._isValid()){u=t._clone(),u._normalize(),u._clip(a);if(!u._isValid())return;this.beginUpdate(),this._multipleRangesAllowed()?n||r?r&&(this._removedCells._clear(),this._removedCells._addFrom(this._addedDuringCurTransactionCells)):this.clear():this.clear();switch(o){case"singlecell":case"singlecolumn":case"singlerow":u=s===null?new e.grid.cellInfoRange(u.topLeft(),u.topLeft()):new e.grid.cellInfoRange(s,s)}u._extend(this._extend_rules[o][i],a),this.doRange(u,!0),this.endUpdate()}},t.prototype._ensureSelection=function(){var e=this._wijgrid._view(),t=-2,n;for(var r=0;r<this._selectedCells.length();r++){var i=this._selectedCells.item(r);i._isRendered()&&(t!==i.rowIndex()&&(n=i.row(),t=i.rowIndex()),this.selectCell(i,n,e,!0))}},t.prototype._ensureSelectionInRow=function(e){var t=this,n=this._wijgrid._view();if(n._isRowRendered(e)>=0){var r=n._getRowInfoBySketchRowIndex(e,!1),i=this.selectedCells();r&&i&&i.length()>0&&r.$rows.children("td, th").each(function(s,o){var u=i.indexOf(s,e);u>=0&&t.selectCell(i.item(u),r,n,!0)})}},t.prototype.doSelection=function(){var t=this._wijgrid._view(),n,r,i,s,o,u,a=e.grid.renderState,f,l,c=-1;for(n=0,r=this._removedCells.length();n<r;n++)i=this._removedCells.item(n),this._addedCells.indexOf(i)<0?(c!==i.rowIndex()&&(f=i.row(),c=i.rowIndex()),this.selectCell(i,f,t,!1),this._selectedCells._remove(i),this._addedDuringCurTransactionCells._remove(i)):(this._removedCells._removeAt(n),n--,r--);c=-1;for(n=0,r=this._addedCells.length();n<r;n++)i=this._addedCells.item(n),u=this._selectedCells.indexOf(i),u<0?(c!==i.rowIndex()&&(f=i.row(),c=i.rowIndex()),this.selectCell(i,f,t,!0),this._selectedCells._insertUnsafe(i,~u),this._addedDuringCurTransactionCells._add(i)):(this._addedCells._removeAt(n),n--,r--)},t.prototype.selectCell=function(e,t,r,i){if(e._isRendered()){var s=this._wijgrid._viewPortBounds(),o=r.getCell(e.cellIndexAbs(),e.rowIndexAbs());if(o){var u=n(o),a=r._changeCellRenderState(u,8,i===!0);this._wijgrid.mCellStyleFormatter.format(u,e.cellIndex(),e.columnInst(),t,a)}}},t.prototype.doRange=function(t,n){var r=t.topLeft().cellIndex(),i=t.topLeft().rowIndex(),s=t.bottomRight().cellIndex(),o=t.bottomRight().rowIndex(),u,a,f,l,c=this._wijgrid._view(),h,p,d=this._wijgrid._viewPortBounds();if(n){u=this._addedCells.length(),p=this._wijgrid._rows();for(a=i;a<=o;a++){h=c._getRowInfoBySketchRowIndex(a);if(h.type&2)for(f=r;f<=s;f++)l=new e.grid.cellInfo(f,a),u===0?this._addedCells._appendUnsafe(l):this._addedCells._add(l)}}else{u=this._removedCells.length();for(a=i;a<=o;a++)for(f=r;f<=s;f++)l=new e.grid.cellInfo(f,a),u===0?this._removedCells._appendUnsafe(l):this._removedCells._add(l)}},t}();t.selection=r;var i=function(){function t(e){if(!e)throw"invalid arguments";this._wijgrid=e,this._list=[]}return t.prototype.item=function(e){return this._list[e]},t.prototype.length=function(){return this._list.length},t.prototype.indexOf=function(e,t){arguments.length===1&&(t=e.rowIndex(),e=e.cellIndex());var n=0,r=this._list.length-1,i,s,o;while(n<=r){i=n+(r-n>>1),s=this._list[i],o=s.rowIndex()-t,o===0&&(o=s.cellIndex()-e);if(o<0)n=i+1;else{if(!(o>0))return i;r=i-1}}return~n},t.prototype.toString=function(){var e="",t,n;for(t=0,n=this._list.length;t<n;t++)e+=this._list[t].toString()+"\n";return e},t.prototype._add=function(e){var t=this.indexOf(e);return t<0?(this._list.splice(~t,0,e),e._setGridView(this._wijgrid),!0):!1},t.prototype._addFrom=function(e){if(e){var t=e.length(),n=this._list.length,r;if(n===0){this._list.length=t;for(r=0;r<t;r++)this._list[r]=e.item(r),this._list[r]._setGridView(this._wijgrid)}else for(r=0;r<t;r++)this._add(e.item(r))}},t.prototype._appendUnsafe=function(e){this._list[this._list.length]=e,e._setGridView(this._wijgrid)},t.prototype._insertUnsafe=function(e,t){this._list.splice(t,0,e)},t.prototype._clear=function(){this._list.length=0},t.prototype._remove=function(e){var t=this.indexOf(e);return t>=0?(this._list.splice(t,1),!0):!1},t.prototype._removeAt=function(e){this._list.splice(e,1)},t.prototype._getColumnsIndicies=function(){var e=[],t=this._list.length,n,r,i;if(t){n=[];for(r=0;r<t;r++)n[this._list[r].cellIndex()]=1;t=n.length,i=0;for(r=0;r<t;r++)n[r]&&(e[i++]=r)}return e},t.prototype._getSelectedRowsIndicies=function(){var e=[],t=this._list.length,n,r,i;if(t){n=[];for(r=0;r<t;r++)n[this._list[r].rowIndex()]=1;t=n.length,i=0;for(r=0;r<t;r++)n[r]&&(e[i++]=r)}return e},t.prototype._rectangulate=function(){var t=this._list.length,n=4294967295,r=4294967295,i=0,s=0,o,u;if(t){for(o=0;o<t;o++)u=this._list[o],n=Math.min(n,u.cellIndex()),r=Math.min(r,u.rowIndex()),i=Math.max(i,u.cellIndex()),s=Math.max(s,u.rowIndex());return new e.grid.cellInfoRange(new e.grid.cellInfo(n,r),new e.grid.cellInfo(i,s))}return null},t}();t.cellInfoOrderedCollection=i;var s=function(){function e(e){this.mLength=0,this.mDirty=!0,this.mRowIndicies=[],this.mWijgrid=e}return e.prototype.length=function(){return this._ensure(),this.mLength},e.prototype.item=function(e){this._ensure();var t=this.mWijgrid._view()._getRowInfoBySketchRowIndex(this.mRowIndicies[e]);return t},e.prototype._ensure=function(){this.mDirty&&(this.mRowIndicies=this.mWijgrid.selection().selectedCells()._getSelectedRowsIndicies(),this.mLength=this.mRowIndicies.length,this.mDirty=!1)},e.prototype._setDirty=function(){this.mDirty=!0},e}();t.selectedRowsAccessor=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(t){this._gap_to_start=10,this._inProgress=!1,this._additionalEventsAttached=!1,this._wijgrid=t,this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui",this._addedCells=new e.grid.cellInfoOrderedCollection(this._wijgrid),this._view=this._wijgrid._view(),this._rootElement=this._view.focusableElement(),this._visLeavesLen=this._wijgrid._visibleLeaves().length,this._rootElement.bind(this._eventKey("mousedown"),n.proxy(this._onGridMouseDown,this))}return t.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown),this._detachAdditionalEvents()},t.prototype._onGridMouseDown=function(t){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none")return;var r=this._view.getVisibleContentAreaBounds(),i={x:t.pageX,y:t.pageY},s=t.target&&t.target.tagName!==undefined?t.target.tagName.toLowerCase():undefined,o=n(t.target),u=e.grid.wijgrid.CSS;(!s||o.is("td."+u.TD+", th."+u.TD+", div."+u.cellContainer))&&i.x>r.left&&i.x<r.left+r.width&&i.y>r.top&&i.y<r.top+r.height&&(this._attachAdditionalEvents(),this._startPos=i,this._startCellInfo=this._coordToDataCellInfo(this._startPos))},t.prototype._onDocumentMouseMove=function(t){if(!this._startCellInfo||!this._startCellInfo._isValid())return;var r={x:t.pageX,y:t.pageY},i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=this._wijgrid._view(),b=this._wijgrid._rows(),w=e.grid.renderState;this._inProgress||(this._inProgress=Math.abs(this._startPos.x-r.x)>this._gap_to_start||Math.abs(this._startPos.y-r.y)>this._gap_to_start);if(this._inProgress){i=this._coordToDataCellInfo(r);if(!i._isValid())return;this._endCellInfo=i,o=new e.grid.cellInfoRange(this._startCellInfo,this._endCellInfo),o._normalize(),o._clip(this._wijgrid._getDataCellsRange(0));if(o._isValid()&&!o.isEqual(this._prevMouseMoveRange)){this._prevMouseMoveRange=o,u=new e.grid.cellInfoOrderedCollection(this._wijgrid),a=o.bottomRight().rowIndex(),f=o.bottomRight().cellIndex();for(l=o.topLeft().rowIndex();l<=a;l++){v=y._getRowInfoBySketchRowIndex(l);if(v.type&2)for(c=o.topLeft().cellIndex();c<=f;c++)u._appendUnsafe(new e.grid.cellInfo(c,l))}m=-1;for(h=0,p=this._addedCells.length();h<p;h++)s=this._addedCells.item(h),u.indexOf(s)<0&&(this._wijgrid.selection().selectedCells().indexOf(s)<0&&(c=this._view.getCell(s.cellIndexAbs(),s.rowIndexAbs()),c&&(m!==s.rowIndex()&&(v=s.row(),m=s.rowIndex()),d=n(c),g=y._changeCellRenderState(d,8,!1),this._wijgrid.mCellStyleFormatter.format(d,s.cellIndex(),s.columnInst(),v,g))),this._addedCells._removeAt(h),h--,p--);m=-1;for(h=0,p=u.length();h<p;h++)s=u.item(h),this._addedCells.indexOf(s)<0&&this._wijgrid.selection().selectedCells().indexOf(s)<0&&this._addedCells._add(s)&&(c=this._view.getCell(s.cellIndexAbs(),s.rowIndexAbs()),c&&(m!==s.rowIndex()&&(v=s.row(),m=s.rowIndex()),d=n(c),g=y._changeCellRenderState(d,8,!0),this._wijgrid.mCellStyleFormatter.format(d,s.cellIndex(),s.columnInst(),v,g)))}}},t.prototype._onDocumentMouseUp=function(t){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=!1;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(t,this._endCellInfo,{changeSelection:!1,setFocus:!1}),(!t.shiftKey||!this._wijgrid.selection()._multipleEntitiesAllowed())&&this._wijgrid.selection()._startNewTransaction(this._startCellInfo),this._wijgrid.selection().beginUpdate(),this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,t.shiftKey,t.ctrlKey,0,this._endCellInfo),this._wijgrid.selection().endUpdate();var r=this._wijgrid._view(),i=-1,s,o=e.grid.renderState;for(var u=0,a=this._addedCells.length();u<a;u++){var f=this._addedCells.item(u);if(this._wijgrid.selection().selectedCells().indexOf(f)<0){var l=r.getCell(f.cellIndexAbs(),f.rowIndexAbs());if(l!==null){i!==f.rowIndex()&&(s=f.row(),i=f.rowIndex());var c=n(l),h=r._changeCellRenderState(c,8,!1);this._wijgrid.mCellStyleFormatter.format(c,f.cellIndex(),f.columnInst(),s,h)}}}return this._addedCells._clear(),this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null,!1}}},t.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached)try{this._view.toggleDOMSelection(!1),n(document).bind(this._eventKey("mousemove"),n.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),n.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=!0}},t.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached)try{this._view.toggleDOMSelection(!0),n(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=!1}},t.prototype._eventKey=function(t){return e.grid.stringFormat(this._evntFormat,t)},t.prototype._coordToDataCellInfo=function(t){var n=0,r=this._visLeavesLen-1,i=0,s=-1,o,u=new e.grid.rowAccessor(this._view,2,0,0),a,f,l,c;while(n<=r){i=(r-n>>1)+n,o=e.grid.bounds(this._view.getHeaderCell(i)),o||(f=u.item(0),o=e.grid.bounds(e.grid.rowAccessor.getCell(f,i)));if(!o)break;if(t.x<o.left)r=i-1;else{if(!(t.x>o.left+o.width)){s=i;break}n=i+1}}if(s===-1)return e.grid.cellInfo.outsideValue;u=new e.grid.rowAccessor(this._view,0,0,0),a=-1,n=0,r=u.length()-1,i=0;while(n<=r){i=(r-n>>1)+n,f=u.item(i),o=e.grid.bounds(e.grid.rowAccessor.getCell(f,0));if(t.y<o.top)r=i-1;else{if(!(t.y>o.top+o.height)){a=i;break}n=i+1}}return a===-1?e.grid.cellInfo.outsideValue:(c=new e.grid.cellInfo(s,a,this._wijgrid,!0),c)},t}();t.uiSelection=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(e,t,n,r){this._view=e,this._scope=t,this._offsetBottom=r,this._offsetTop=n}return t.prototype.item=function(e){var t=this.length();return e>=0&&e<t?this._view.getJoinedRows(e+this._offsetTop,this._scope):null},t.prototype.length=function(){var e=this._view.getJoinedTables(!0,0),t=0,n;if(n=e[0])t=n.getSectionLength(this._scope);if(n=e[1])t+=n.getSectionLength(this._scope);return t-=this._offsetTop+this._offsetBottom,t<0&&(t=0),t},t.iterateCells=function(e,t,n){if(e&&t){var r=0,i,s,o,u,a,f;for(i=0,s=e.length;i<s;i++){o=e[i];if(o)for(u=0,a=o.cells.length;u<a;u++){f=t(o.cells[u],r++,n);if(f!==!0)return}}}},t.getCell=function(e,t){var n,r;if(e&&(n=e[0])){r=n.cells.length;if(t<r)return n.cells[t];t-=r;if(n=e[1]){r=n.cells.length;if(t<r)return n.cells[t]}}return null},t.getCell$=function(t,r){var i=e.grid.rowAccessor.getCell(t,r);return i?n(i):n([])},t.cellsCount=function(e){var t=0,n;if(e&&(n=e[0])){t=n.cells.length;if(n=e[1])t+=n.cells.length}return t},t}();t.rowAccessor=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery;(function(e){e[e.error=0]="error",e[e.continueEditing=1]="continueEditing",e[e.success=2]="success",e[e.cancel=4]="cancel",e[e.notEdited=8]="notEdited"})(t.updateCellResult||(t.updateCellResult={}));var r=t.updateCellResult,i=function(){function t(){this._timeout=25}return t.prototype.cellEditStart=function(t,r,i){var s=!1,o=t._view();if(r._isValid()&&!r._isEdit()&&r.columnInst()instanceof e.grid.c1field){var u=r.row();if(u){var a=u.type;if(a&2){var f={cell:r,event:i,handled:!1};if(s=t._trigger("beforeCellEdit",null,f)||t.options.editingMode==="row")f.handled||(s=this._defaultBeforeCellEdit(t,f));if(s){r._isEdit(!0);if(t._showRowHeader()){var l=n(u.$rows[0].cells[0]).children("div."+e.grid.wijgrid.CSS.cellContainer);l.length&&(l.empty(),l.append(n("<div>&nbsp;</div>").addClass(t.options.wijCSS.icon+" "+t.options.wijCSS.iconPencil)))}}}}}return s},t.prototype.updateCell=function(t,n,r,i){var s;if(n&&!n._isEdit())return 10;if(!n||!n._isValid()||!(s=n.row())||!(s.type&2))return 0;if(i||!n._isRendered())return 6;var o=2,u=n.column(),a={cell:n,value:undefined};if(!t._trigger("beforeCellUpdate",null,a)&&t.options.editingMode!=="row")return 1;a.value===undefined&&(a.value=this._getCellValue(t,n));var f=a.value,l=n.value();try{var c=this._getHTMLInputElementType(n);e.grid.HTML5InputSupport.isExtendSupportRequired(c)?(a.value=e.grid.HTML5InputSupport.parse(a.value,c),a.value=e.grid.HTML5InputSupport.extend(l,a.value,c)):a.value=t.parse(n.column(),a.value),f=a.value}catch(h){a.value=f}e.grid.getDataType(u)==="datetime"&&(f instanceof Date&&(f=f.getTime()),l instanceof Date&&(l=l.getTime()));if(f!==l){try{n.value(a.value)}catch(h){var p={cell:n,value:a.value};o=0,t._trigger("invalidCellValue",null,p)}if(o&2){var d={cell:n};t._trigger("afterCellUpdate",null,d)}}return o},t.prototype.cellEditEnd=function(t,r,i){var s=r.row(),o={cell:r,event:i,handled:!1};r._isEdit(!1),r._isRendered()&&(t._trigger("afterCellEdit",null,o),o.handled||this._defaultAfterCellEdit(t,o),t._showRowHeader()&&n(s.$rows[0].cells[0]).children("div."+e.grid.wijgrid.CSS.cellContainer).html("&nbsp;"))},t.prototype._defaultBeforeCellEdit=function(t,r){var i=r.cell.column(),s=!1,o,u;if(i.dataIndex>=0){var a=r.cell.value(),f=e.getKeyCodeEnum(),l=e.grid.HTML5InputSupport.getDefaultInputType(t._isMobileEnv(),i),c=t._allowCellEditing(),h=!1;s=!0;try{o=r.cell.container();if(e.grid.getDataType(i)==="boolean"){var p=o.children("span");if(h=!!p.length&&!!p.prop("disabled"))n.data(p[0],"serverSideCheckbox",!0),p.prop("disabled",!1);u=o.find(":checkbox"),(h||!c)&&u.prop("disabled",!1),r.event&&r.event.type==="keypress"&&u.one("keyup",function(e){e.which===f.SPACE&&(e.preventDefault(),u[0].checked=!a)})}else{u=n("<input type='"+l+"' />").css("ime-mode",i.imeMode||"auto").addClass(e.grid.wijgrid.CSS.inputMarker).addClass("wijmo-wijinput "+t.options.wijCSS.stateFocus).bind("keydown",t,n.proxy(this._checkBoxOrInputKeyDown,this)),u.bind(n.support.selectstart?"selectstart":"mousedown",function(e){e.stopPropagation()});if(!r.event||r.event.type!=="keydown"||r.event.which===113)switch(e.grid.getDataType(i)){case"currency":case"number":if(a!==null){u.val(a);break};case"datetime":if(e.grid.HTML5InputSupport.isExtendSupportRequired(l)){u.val(e.grid.HTML5InputSupport.toStr(a,l));break};default:u.val(t.toStr(i,a))}o.empty().append(u);if(c){var d=u.val().length;l==="text"&&(new e.grid.domSelection(u[0])).setSelection({start:d,end:d})}}c&&(u.focus(),setTimeout(function(){u.focus()},this._timeout*2))}catch(v){alert(v.message),s=!1}}return s},t.prototype._defaultAfterCellEdit=function(t,r){var i=r.cell.columnInst(),s=i.options,o=!1;if(s.dataIndex>=0){o=!0;var u=t._view();try{var a=r.cell.container(),f=t.toStr(s,r.cell.value()),l=u._getRowInfoBySketchRowIndex(r.cell.rowIndex());if(e.grid.getDataType(s)==="boolean"){var c=a.children("span"),h=c.length&&n.data(c[0],"serverSideCheckbox"),p=a.find(":checkbox");p.prop("checked",f==="true"),h&&(c.prop("disabled",!0),p.prop("disabled",!0))}else t.mCellFormatter.format(n(r.cell.tableCell()),r.cell.cellIndex(),a,i,f,l)}catch(d){alert("defaultAfterCellEdit: "+d.message),o=!1}}return o},t.prototype._checkBoxOrInputKeyDown=function(t){var n=e.getKeyCodeEnum();if(t.which===n.ENTER){var r=t.data;if(r)return r._endEditInternal(t),!1}},t.prototype._getCellValue=function(e,t){var n=t.container().find(":input:first"),r=null;return n.length&&(r=n.attr("type")==="checkbox"?n[0].checked:n.val()),r},t.prototype._getHTMLInputElementType=function(e){return e.container().find(":input:first").attr("type")},t}();t.cellEditorHelper=i;var s=function(){function r(t,r){this.mGrid=t,this.mWrapper=n("<div />"),this.mGrid._allowCellEditing()?this.mHiddenElement=n('<input type="text" />').keydown(n.proxy(this._onKeyDown,this)):this.mHiddenElement=n('<input type="button" />'),this.mHiddenElement.css({position:"relative",border:0,padding:0,margin:0,width:1,height:1,"font-size":e.grid.isMobileSafari()?"0em":"1px"}),this.mFakeFocusable=n('<input type="button" />').css({position:"relative",width:1,height:1,border:0,padding:0,margin:0}),this.mWrapper.append(this.mHiddenElement).append(this.mFakeFocusable).css({position:"absolute",width:"0px",height:"0px",overflow:"hidden","z-index":999999}),r.append(this.mWrapper)}return r.prototype.dispose=function(){if(this.mWrapper)try{this.mWrapper.remove()}catch(e){}finally{this.mWrapper=null,this.mHiddenElement=null,this.mGrid=null}},r.prototype.focus=function(e,n){if(e&&e.length){var r=e.offset();this.mWrapper.offset({top:r.top,left:r.left}),this.mFakeFocusable.focus(),this.mHiddenElement.css("ime-mode",n&&n instanceof t.c1field&&n.options.imeMode||"auto").focus()}},r.prototype.isHiddenInput=function(e){return e&&(e[0]===this.mHiddenElement[0]||e[0]===this.mFakeFocusable[0])},r.prototype.canHandle=function(e){return this.mGrid._allowCellEditing()&&this.isPrintableKeyCode(e)},r.prototype.isPrintableKeyCode=function(e){var t=e.keyCode;return!e.ctrlKey&&!e.altKey&&(t>=65&&t<=90||t>=48&&t<=57||t>=96&&t<=105||t>=186&&t<=192||t>=220&&t<=222||t===219||t>=106&&t<=111||t===32||t===61||t===173||t===229||e.keyCode===0)},r.prototype._onKeyDown=function(t){if(this.canHandle(t))this.mGrid._beginEditInternal(t);else{var n=e.getKeyCodeEnum();switch(t.keyCode){case n.ESCAPE:case n.ENTER:t.preventDefault()}}},r}();t.keyDownEventListener=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function e(){this._div=document.createElement("div"),this._div.style.display="none",document&&document.body&&document.body.appendChild(this._div)}return e.prototype.dispose=function(){try{this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div)}catch(e){}finally{this._div=null}},e.prototype.format=function(e,t,n,r,i,s){r._initializeCell(e,t,n,i,s)},e.prototype.updateHTML=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=e[0];if(r.firstChild)while(r.firstChild)r.removeChild(r.firstChild);n?this._div.textContent!=undefined?this._div.textContent=t||"":this._div.innerText=t||"":this._div.innerHTML=t||"&nbsp;";while(this._div.firstChild)r.appendChild(this._div.firstChild)},e}();e.cellFormatterHelper=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(e){this.MIN_WIDTH=5,this._elements=[],this._gap=10,this._step=1,this._inProgress=!1,this._hoveredColumn=null,this._startLocation=null,this._lastLocation=null,this._proxy=null,this._wijgrid=e,this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}return t.prototype.addElement=function(e){e&&e.element&&(e.element.bind(this._eventKey("mousemove"),n.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),n.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),n.proxy(this._onMouseOut,this)),this._elements.push(e))},t.prototype.dispose=function(){var e=this;n.each(this._elements,function(t,n){n.element.unbind(e._eventKey("mousemove"),e._onMouseMove).unbind(e._eventKey("mousedown"),e._onMouseDown).unbind(e._eventKey("mouseout"),e._onMouseOut)}),this._detachDocEvents()},t.prototype.inProgress=function(){return this._inProgress},t.prototype._onMouseMove=function(e){if(!this._inProgress){var t=this._getFieldByPos({x:e.pageX,y:e.pageY});t&&t._canSize()&&this._wijgrid._canInteract()?(t.element.css("cursor","e-resize"),this._hoveredColumn=t,e.stopPropagation()):this._onMouseOut(e)}},t.prototype._onMouseOut=function(e){this._inProgress||this._hoveredColumn&&(this._hoveredColumn.element.css("cursor",""),this._hoveredColumn=null)},t.prototype._onMouseDown=function(t){this._hoveredColumn=this._getFieldByPos({x:t.pageX,y:t.pageY});if(this._hoveredColumn&&this._hoveredColumn._canSize()&&this._wijgrid._canInteract())try{var r=this._wijgrid.options.wijCSS,i=e.grid.wijgrid.CSS;this._hoveredColumn.element.css("cursor",""),this._docCursor=document.body.style.cursor,document.body.style.cursor="e-resize",this._startLocation=this._lastLocation=e.grid.bounds(this._hoveredColumn.element),this._proxy=n('<div class="'+i.resizingHandle+" "+r.wijgridResizingHandle+" "+r.stateHighlight+'">&nbsp;</div>');var s=this._wijgrid._view().getVisibleAreaBounds(!0);this._proxy.css({left:t.pageX,top:this._startLocation.top,height:s.height+s.top-this._startLocation.top}),n(document.body).append(this._proxy)}finally{this._attachDocEvents(),this._inProgress=!0,t.stopPropagation()}},t.prototype._onDocumentMouseMove=function(e){var t=this._step*Math.round((e.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+t,top:e.pageY,width:undefined,height:undefined},this._proxy.css("left",this._lastLocation.left)},t.prototype._onDocumentMouseUp=function(e){try{document.body.style.cursor=this._docCursor,this._proxy.remove(),this._startLocation!==this._lastLocation&&this._wijgrid._fieldResized(this._hoveredColumn,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}finally{this._hoveredColumn=null,this._proxy=null,this._detachDocEvents(),this._inProgress=!1}},t.prototype._onSelectStart=function(e){e.preventDefault()},t.prototype._attachDocEvents=function(){this._inProgress||(n(document).bind(this._eventKey("mousemove"),n.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),n.proxy(this._onDocumentMouseUp,this)),n.fn.disableSelection&&n(document.body).disableSelection(),"onselectstart"in document&&n(document.body).bind("selectstart",this._onSelectStart))},t.prototype._detachDocEvents=function(){this._inProgress&&(n(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp),n.fn.enableSelection&&n(document.body).enableSelection(),"onselectstart"in document&&n(document.body).unbind("selectstart",this._onSelectStart))},t.prototype._getFieldByPos=function(t){for(var n=0,r=this._elements.length;n<r;n++){var i=this._elements[n],s=e.grid.bounds(i.element),o=e.grid.isOver(t.y,t.x,s.top,s.left+s.width-this._gap,s.height,this._gap);if(o)return i}return null},t.prototype._eventKey=function(t){var n=this._wijgrid._isTouchEnv()?"wij":"";return n+e.grid.stringFormat(this._evntFormat,t)},t}();t.uiResizer=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(t){this._scope_guid="scope_"+e.grid.getUID(),this._dragEnd=!1,this.mZIndex=1e3;var n=e.grid.wijgrid.CSS;this._wijgrid=t,this._wijCSS=this._wijgrid.options.wijCSS,this._wrapHtml='<div class="'+this._wijCSS.widget+" "+n.wijgrid+" "+this._wijCSS.wijgrid+" "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'">'+'<table class="'+n.root+" "+n.table+" "+this._wijCSS.wijgridTable+'">'+'<tr class="'+n.headerRow+" "+this._wijCSS.wijgridHeaderRow+'">'+"</tr>"+"</table>"+"</div>"}return r.prototype.attachGroupArea=function(e){var t,r=this;if(!n.ui||!n.ui.droppable||!n.ui.draggable)return;e.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:!0,accept:function(e){if(r._wijgrid.options.allowColMoving){t=r._getColumnInstance(e);if(t)return t._canDropToGroupArea()}return!1},drop:function(e,n){!r._isInElement(e,n.draggable)&&(t=r._getColumnInstance(n.draggable))&&(r._dragEnd=!0)},over:function(t,n){var i=r._wijgrid._groupAreaColumns().length;r._dropTargetRedirected=i>0,r._droppableColumn=i>0?r._wijgrid._groupAreaColumns()[i-1]:e,e.data("thisDroppableWijField",r._droppableColumn)},out:function(t,n){r._droppableColumn===e.data("thisDroppableWijField")&&(r._droppableColumn=null)}})},r.prototype.attach=function(r){var i,s,o=e.grid.wijgrid.CSS,u=this;if(!n.ui.droppable||!n.ui.draggable)return;if(!r||!(i=r.element))return;i.draggable({helper:function(n){var s;return r instanceof t.c1groupedfield?s=i.clone():s=i.clone().wrap(u._wrapHtml).width(i.width()).height(i.height()).closest("."+o.wijgrid),s.addClass(o.dndHelper+" "+u._wijCSS.wijgridDndHelper).css("z-index",u.mZIndex=e.grid.getZIndex(u._wijgrid.mOuterDiv,1e3)),s},appendTo:"body",scope:u._scope_guid,drag:function(e,t){u._hideArrows();if(u._droppableColumn&&!u._isInElement(e,i)){var n=u._droppableColumn.element;n||(n=u._droppableColumn),u._showArrows(n,u._getPosition(r,u._droppableColumn,e,t))}},start:function(e,n){if(u._wijgrid._canInteract()&&u._wijgrid.options.allowColMoving&&(u._wijgrid._UIResizer()==null||!u._wijgrid._UIResizer().inProgress())){var i=r,s=r instanceof t.c1groupedfield,o=s?"groupArea":"columns";s&&(i=u._wijgrid._findInstance(r.options));var a=i.options;if(r._canDrag()&&u._wijgrid._trigger("columnDragging",null,{drag:a,dragSource:o}))return u._wijgrid._trigger("columnDragged",null,{drag:a,dragSource:o}),!0}return!1},stop:function(e,n){u._hideArrows();try{u._dragEnd&&(u._droppableColumn.element?u._wijgrid._handleDragnDrop(r,u._droppableColumn,u._getPosition(r,u._droppableColumn,e,n),r instanceof t.c1groupedfield,u._droppableColumn instanceof t.c1groupedfield):u._wijgrid._handleDragnDrop(r,null,"left",r instanceof t.c1groupedfield,!0))}finally{u._droppableColumn=null,u._dragEnd=!1}}}).droppable({hoverClass:u._wijCSS.stateHover,scope:u._scope_guid,tolerance:"pointer",greedy:!0,accept:function(e){if(u._wijgrid.options.allowColMoving&&i[0]!==e[0]){s=u._getColumnInstance(e);if(s)return s._canDropTo(r)}return!1},drop:function(e,t){if(s=u._getColumnInstance(t.draggable))u._dragEnd=!0},over:function(e,t){u._dropTargetRedirected=!1,u._droppableColumn=r,i.data("thisDroppableWijField",u._droppableColumn)},out:function(e,t){u._droppableColumn===r.element.data("thisDroppableWijField")&&(u._droppableColumn=null)}})},r.prototype.detach=function(e){var t;e&&(t=e.element)&&(t.data("ui-draggable")&&t.draggable("destroy"),t.data("ui-droppable")&&t.droppable("destroy"))},r.prototype.dispose=function(){this._$topArrow&&(this._$topArrow.remove(),this._$topArrow=null),this._$bottomArrow&&(this._$bottomArrow.remove(),this._$bottomArrow=null)},r.prototype._getColumnInstance=function(e){var n=e.data(t.widgetEmulator.DATA_INSTANCE_PROP);if(!n)throw"Unable to get a column instance";return n},r.prototype._showArrows=function(e,t){this._topArrow().css("z-index",this.mZIndex).show().position({my:"center",at:t+" top",of:e,collision:"none"}),this._bottomArrow().css("z-index",this.mZIndex).show().position({my:"center",at:t+" bottom",of:e,collision:"none"})},r.prototype._hideArrows=function(){this._topArrow().hide(),this._bottomArrow().hide()},r.prototype._topArrow=function(){return this._$topArrow||(this._$topArrow=n("<div />").addClass(e.grid.wijgrid.CSS.dndArrowTopContainer+" "+this._wijCSS.wijgridDndArrowTopContainer).append(n("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickDown)).hide().appendTo(document.body)),this._$topArrow},r.prototype._bottomArrow=function(){return this._$bottomArrow||(this._$bottomArrow=n("<div />").addClass(e.grid.wijgrid.CSS.dndArrowBottomContainer+" "+this._wijCSS.wijgridDndArrowBottomContainer).append(n("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickUp)).hide().appendTo(document.body)),this._$bottomArrow},r.prototype._isInElement=function(t,n){var r=e.grid.bounds(n,!1);return t.pageX>r.left&&t.pageX<r.left+r.width&&t.pageY>r.top&&t.pageY<r.top+r.height},r.prototype._getPosition=function(n,r,i,s){if(!r.element)return"left";if(this._dropTargetRedirected)return"right";var o=e.grid.bounds(r.element,!1),u=o.width/6,a=o.left+o.width/2,f="right",l;return i.pageX<a&&(f="left"),r instanceof t.c1groupedfield?(n instanceof t.c1groupedfield&&(l=r.options.groupedIndex-n.options.groupedIndex,Math.abs(l)===1&&(f=l<0?"left":"right")),f):(l=r.options.linearIdx-n.options.linearIdx,t.c1bandfield.test(r.options)&&n.options.parentIdx!==r.options.travIdx&&Math.abs(i.pageX-a)<u?"center":(n.options.parentIdx===r.options.parentIdx&&Math.abs(l)===1&&(f=l<0?"left":"right"),f))},r}();t.uiDragndrop=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(e){if(!e)throw"invalid arguments";this._wijgrid=e}return t.prototype.format=function(t,r,i,s,o,u,a){var f=e.grid.renderState,l=e.grid.rowType,c=s.type,h=null;r===0&&this._wijgrid._showRowHeader()&&(i=null);if(c===16||c===32)i=null,u&&(h=u.groupInfo)&&(i=this._wijgrid._leaves()[h.leafIndex]);var p={$cell:t,state:o,row:s,column:i&&i.options,_cellIndex:r,_purpose:h?h.purpose:undefined};o&1?this._renderingStateFormatter(p,u,a):(this._currentStateFormatter(p,o&2),this._selectedStateFormatter(p,o&8),c!==1&&(o&2||o&8?p.$cell.addClass(this._wijgrid.options.wijCSS.stateDefault):p.$cell.removeClass(this._wijgrid.options.wijCSS.stateDefault))),n.isFunction(this._wijgrid.options.cellStyleFormatter)&&this._wijgrid.options.cellStyleFormatter(p)},t.prototype._renderingStateFormatter=function(t,n,r){var i=e.grid.rowType,s,o,u=t.column,a=t.row.type,f=e.grid.wijgrid.CSS,l=this._wijgrid.options.wijCSS;switch(a){case 1:t.$cell.addClass(f.TH+" "+l.wijgridTH);break;default:t.$cell.addClass(f.TD+" "+l.wijgridTD)}if(a&2&&u&&u.textAlignment)switch(u.textAlignment.toLowerCase()){case"left":t.$cell.addClass(f.cellAlignLeft+" "+l.wijgridCellAlignLeft);break;case"right":t.$cell.addClass(f.cellAlignRight+" "+l.wijgridCellAlignRight);break;case"center":t.$cell.addClass(f.cellAlignCenter+" "+l.wijgridCellAlignCenter)}if(n)for(s in n)if(n.hasOwnProperty(s)){o=n[s];if(!(s!=="groupInfo"&&s!=="colSpan"&&s!=="rowSpan"||o>1))continue;s==="class"?t.$cell.addClass(o):t.$cell.attr(s,o)}if(r)for(s in r)if(r.hasOwnProperty(s)){if(s==="paddingLeft"){t.$cell.children("."+f.cellContainer).css(s,r[s]);continue}t.$cell.css(s,r[s])}if(t._cellIndex===0&&this._wijgrid._showRowHeader())t.$cell.attr({role:"rowheader",scope:"row"}).addClass(l.stateDefault+" "+l.content+" "+f.rowHeader+" "+l.wijgridRowHeader);else switch(a){case 1:t.$cell.attr({role:"columnheader",scope:"col"});break;case 64:t.$cell.attr({role:"columnfooter",scope:"col"});break;default:t.$cell.attr("role","gridcell")}a&2&&t._cellIndex>=0&&u&&(t.$cell.attr("headers",window.escape(u.headerText)),u.readOnly&&t.$cell.attr("aria-readonly",!0),u.dataIndex>=0&&t.$cell.addClass("wijdata-type-"+e.grid.getDataType(u))),(a===16||a===32)&&u&&t._purpose===1&&t.$cell.addClass("wijdata-type-"+e.grid.getDataType(u))},t.prototype._currentStateFormatter=function(t,n){var r=e.grid.rowType,i=e.grid.wijgrid.CSS,s=this._wijgrid.options.wijCSS;n?(t.$cell.addClass(s.stateActive),t.row.type===1?t.$cell.addClass(i.currentHeaderCell+" "+s.wijgridCurrentHeaderCell):t.$cell.addClass(i.currentCell+" "+s.wijgridCurrentCell)):(t.$cell.removeClass(s.stateActive),t.row.type===1?t.$cell.removeClass(i.currentHeaderCell+" "+s.wijgridCurrentHeaderCell):t.$cell.removeClass(i.currentCell+" "+s.wijgridCurrentCell))},t.prototype._hoveredStateFormatter=function(e,t){t},t.prototype._selectedStateFormatter=function(e,t){var n=this._wijgrid.options.wijCSS;t?e.$cell.addClass(n.stateHighlight).attr("aria-selected","true"):e.$cell.removeClass(n.stateHighlight).removeAttr("aria-selected")},t}();t.cellStyleFormatterHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(e){if(!e)throw"invalid arguments";this._wijgrid=e}return t.prototype.format=function(t,r,i){var s=e.grid.renderState,o=e.grid.rowType,u=t.state,a=t;u&1?this._renderingStateFormatter(a,r,i):(this._currentStateFormatter(a,(u&2)!==0),this._hoveredStateFormatter(a,(u&4)!==0),this._selectedStateFormatter(a,(u&8)!==0)),n.isFunction(this._wijgrid.options.rowStyleFormatter)&&this._wijgrid.options.rowStyleFormatter(a)},t.prototype._groupFormatter=function(t){var n=e.grid.renderStateEx,r=t._extInfo,i=e.grid.wijgrid.CSS,s=this._wijgrid.options.wijCSS;r.state&1?t.$rows.css("display","none"):t.$rows.css("display","");if(t.type&16){var o=this._wijgrid._groupedLeaves()[t._extInfo.groupLevel-1].options.groupInfo,u=o.expandedImageClass||s.iconArrowRightDown,a=o.collapsedImageClass||s.iconArrowRight,f=e.grid.rowAccessor.getCell$(t.$rows,this._wijgrid._showRowHeader()?1:0).find("."+i.groupToggleVisibilityButton);r.state&2?(t.$rows.attr("aria-expanded",!1),t.$rows.removeClass(i.groupHeaderRowExpanded+" "+s.wijgridGroupHeaderRowExpanded).addClass(i.groupHeaderRowCollapsed+" "+s.wijgridGroupHeaderRowCollapsed),f.removeClass(u).addClass(a)):(t.$rows.attr("aria-expanded",!0),t.$rows.removeClass(i.groupHeaderRowCollapsed+" "+s.wijgridGroupHeaderRowCollapsed).addClass(i.groupHeaderRowExpanded+" "+s.wijgridGroupHeaderRowExpanded),f.removeClass(a).addClass(u))}},t.prototype._renderingStateFormatter=function(t,r,i){var s=e.grid.wijgrid.CSS,o=this._wijgrid.options.wijCSS,u,a=s.row+" "+o.wijgridRow+" "+o.content,f=e.grid.rowType,l=e.grid.renderStateEx,c;t.$rows.attr("role","row");if(r)for(c in r)r.hasOwnProperty(c)&&(c==="class"?t.$rows.addClass(r[c]):(t.$rows.attr(c,r[c]),t.$rows[0].style.height&&t.$rows.each(function(){return n.data(this,"customHeight",this.style.height),!0})));if(i)for(c in i)i.hasOwnProperty(c)&&t.$rows.css(c,i[c]);t._extInfo.groupLevel&&t.$rows.attr("aria-level",t._extInfo.groupLevel),t._extInfo.state&1&&t.$rows.css("display","none");switch(t.type&-5){case 1:u=s.headerRow+" "+o.wijgridHeaderRow;break;case 2:u=a+" "+s.dataRow+" "+o.wijgridDataRow,t.type&4&&(u+=" "+s.altRow+" "+o.wijgridAltRow);break;case 128:u=a+" "+s.emptyDataRow+" "+o.wijgridEmptyDataRow;break;case 8:u=s.filterRow+" "+o.wijgridFilterRow;break;case 16:t.$rows.attr({id:"GH"+t._extInfo.groupIndex+"-"+t._extInfo.groupLevel,"aria-expanded":(t._extInfo.state&2)===0}),u=a+" "+s.groupHeaderRow+" "+o.wijgridGroupHeaderRow+" ",u+=t._extInfo.state&2?s.groupHeaderRowCollapsed+" "+o.wijgridGroupHeaderRowCollapsed:s.groupHeaderRowExpanded+" "+o.wijgridGroupHeaderRowExpanded;break;case 32:t.$rows.attr("id","GF"+t._extInfo.groupIndex+"-"+t._extInfo.groupLevel),u=a+" "+s.groupFooterRow+" "+o.wijgridGroupFooterRow;break;case 64:u=s.footerRow+" "+o.wijgridFooterRow+" "+o.stateDefault+" "+o.stateHighlight;break;default:throw e.grid.stringFormat("unknown rowType: {0}",t.type)}t.$rows.addClass(u)},t.prototype._currentStateFormatter=function(t,r){if(this._wijgrid._showRowHeader()){var i=this._wijgrid.options.wijCSS,s=e.grid.wijgrid.CSS;r?n(t.$rows[0].cells[0]).addClass(i.stateActive+" "+s.currentRowHeaderCell+" "+i.wijgridCurrentRowHeaderCell):n(t.$rows[0].cells[0]).removeClass(i.stateActive+" "+s.currentRowHeaderCell+" "+i.wijgridCurrentRowHeaderCell)}},t.prototype._hoveredStateFormatter=function(e,t){var n=this._wijgrid.options.wijCSS;t?e.$rows.addClass(n.stateDefault+" "+n.stateHover):(e.$rows.removeClass(n.stateDefault+" "+n.stateHover),e.type&2&&e.$rows.addClass(n.wijgridDataRow))},t.prototype._selectedStateFormatter=function(e,t){t},t}();t.rowStyleFormatterHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(e){this._sum=0,this._sum2=0,this._cntNumbers=0,this._cntStrings=0,this._cntDates=0,this._max=0,this._min=0,this._minDate=0,this._maxDate=0,this._parser=e}return r.prototype.add=function(t){if(t===null)return;var n=t instanceof Date?"datetime":typeof t,r=t.toString();this._cntStrings++===0&&(this._minString=this._maxString=r),r<this._minString&&(this._minString=r),r>this._maxString&&(this._maxString=r);var i=this._parseValue(t);typeof i=="number"&&!e.grid.isNaN(i)?(t=i,this._cntNumbers++===0&&(this._min=this._max=t),this._sum+=t,this._sum2+=t*t,t<this._min&&(this._min=t),t>this._max&&(this._max=t)):n==="datetime"&&(r=t.getTime(),this._cntDates++===0&&(this._minDate=this._maxDate=r),r<this._minDate&&(this._minDate=r),r>this._maxDate&&(this._maxDate=r))},r.prototype.getValueString=function(e,t){var n=e.options;if(!this._cntNumbers||n.dataType!=="number"&&n.dataType!=="currency"&&this._cntNumbers!=this._cntStrings){if(this._cntDates&&n.dataType==="datetime")switch(n.aggregate){case"max":return t.toStr(n,new Date(this._maxDate));case"min":return t.toStr(n,new Date(this._minDate));case"count":return this._cntStrings+""}if(this._cntStrings)switch(n.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}return""}var r=this._getValue(n.aggregate);return t.toStr(n,r)},r.prototype._parseValue=function(e){var r=typeof e;if(r==="number")return e;if(r==="string"&&n.trim(e)==="")return 0;if(this._parser){var i;try{i=this._parser.parse({dataType:"currency"},e)}catch(s){i=NaN}t.isNaN(i)&&(i=parseFloat(e));if(!t.isNaN(i))return i}return e},r.prototype._getValue=function(e){switch(e){case"average":return this._cntNumbers===0?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1)return 0;return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1)return 0;return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1)return 0;return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1)return 0;var t=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-t*t}return 0},r}();t.tally=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function t(t){this._docEventsUID="wijgridfrozener"+e.grid.getUID(),this._docEventsAttached=!1,this._newStaticIndex=-1,this._staticColumnIndex=-1,this._staticRowIndex=-1,this._staticOffsetH=0,this._staticOffsetV=0,this._inProgress=!1,this._wijgrid=t,this.refresh()}return t.prototype.inProgress=function(){return this._inProgress},t.prototype.refresh=function(){this.dispose();var t=this._wijgrid.options.freezingMode;if(t!=="none"){this._$outerDiv=this._wijgrid.mOuterDiv.find("."+e.grid.wijgrid.CSS.fixedView),this._superPanel=this._wijgrid._view()._getSuperPanel(),this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(!1),this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(!0),this._staticColumnIndex=this._wijgrid._getStaticIndex(!1),this._staticRowIndex=this._wijgrid._getStaticIndex(!0),this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();var n=e.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),r=e.grid.bounds(this._$outerDiv);(t==="both"||t==="columns")&&(this._wijgrid.options.staticColumnsAlignment!=="right"||this._staticColumnIndex>=0)&&this._createVBar(this._visibleBounds,n,r),(t==="both"||t==="rows")&&!this._wijgrid._serverSideVirtualScrolling()&&this._createHBar(this._visibleBounds,n,r)}},t.prototype.dispose=function(){this._$hBar&&(this._$hBar.remove(),this._$hBar=null),this._$vBar&&(this._$vBar.remove(),this._$vBar=null),this._$proxy&&(this._$proxy.remove(),this._$proxy=null),this._$outerDiv=null,this._superPanel=null,this._detachDocEvents()},t.prototype._createVBar=function(t,r,i){var s=this._wijgrid.options.staticColumnsAlignment!=="right",o=s?r.width+r.left:r.left-2,u=this,a=e.grid.wijgrid.CSS,f=this._wijgrid.options.wijCSS;o<=t.left+t.width&&(this._$vBar=n("<div><div></div></div>").addClass(a.freezingHandleV+" "+f.wijgridFreezingHandleV).addClass(s?"":"not-allowed").css({left:o-i.left,top:r.top-i.top,height:t.height+t.top-r.top}).bind("mousedown",function(e){e.data=!0,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$vBar.find("div").addClass(a.freezingHandleContent+" "+f.header))},t.prototype._createHBar=function(t,r,i){var s=r.top+r.height,o=this._wijgrid.options.staticColumnsAlignment!=="right",u=this,a=e.grid.wijgrid.CSS,f=this._wijgrid.options.wijCSS;s<=t.top+t.height&&(this._$hBar=n("<div><div></div></div>").addClass(a.freezingHandleH+" "+f.wijgridFreezingHandleH).css({left:o?r.left-i.left:0,top:s-i.top,width:o?t.width+t.left-r.left:t.width}).bind("mousedown",function(e){e.data=!1,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$hBar.find("div").addClass(a.freezingHandleContent+" "+f.header))},t.prototype._onBarMouseDown=function(t){if(this._wijgrid.options.disabled||this._wijgrid.options.staticColumnsAlignment==="right"&&t.data)return!1;var r=e.grid.wijgrid.CSS,i=this._wijgrid.options.wijCSS;this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds(),this._newStaticIndex=t.data?this._staticColumnIndex:this._staticRowIndex,this._$proxy=n('<div class="'+r.resizingHandle+" "+i.wijgridResizingHandle+" "+i.header+'"></div>').appendTo(document.body),this._attachDocEvents(t.data),this._inProgress=!0,t.stopPropagation()},t.prototype._onDocumentMouseMove=function(e){e.data&&this._superPanel.options.hScroller.scrollValue?this._superPanel.hScrollTo(0):!e.data&&this._superPanel.options.vScroller.scrollValue&&this._superPanel.vScrollTo(0),this._showPosition(e)},t.prototype._onDocumentMouseUp=function(e){try{this._$proxy&&this._$proxy.remove(),this._detachDocEvents(),e.data?this._newStaticIndex!==this._staticColumnIndex&&this._wijgrid.option("staticColumnIndex",this._newStaticIndex):this._newStaticIndex!==this._staticRowIndex&&this._wijgrid.option("staticRowIndex",this._newStaticIndex)}finally{this._$proxy=null,this._inProgress=!1}},t.prototype._attachDocEvents=function(e){if(!this._docEventsAttached)try{n.fn.disableSelection&&n(document.body).disableSelection(),this._wijgrid._view().toggleDOMSelection(!1),n(document).bind(this._docEventKey("mousemove"),e,n.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),e,n.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=!0}},t.prototype._detachDocEvents=function(){if(this._docEventsAttached)try{n.fn.enableSelection&&n(document.body).enableSelection(),this._wijgrid._view().toggleDOMSelection(!0),n(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=!1}},t.prototype._docEventKey=function(t){return e.grid.stringFormat("{0}.{1}",t,this._docEventsUID)},t.prototype._showPosition=function(t){var n,r,i,s,o,u,a,f,l=this._wijgrid.options.staticColumnsAlignment!=="right";if(t.data){f=e.grid.bounds(this._$vBar);if(Math.abs(t.pageX-(f.left+f.width/2))<f.width){this._$proxy.hide();return}if(n=this._getFieldByPos({x:t.pageX,y:t.pageY})){r=e.grid.bounds(n.element),i=r.left+r.width/2,s=n.options.visLeavesIdx-this._staticOffsetV,o=Math.max(s-1,-1),u=t.pageX<i?o!==this._staticColumnIndex:s===this._staticColumnIndex,a=u?r.left:r.left+r.width;if(!e.grid.isOverAxis(a,this._visibleBounds.left-1,this._visibleBounds.width+2))return;this._newStaticIndex=u?o:s,this._$proxy.show().css({left:a,top:r.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-r.top})}}else{f=e.grid.bounds(this._$hBar);if(Math.abs(t.pageY-(f.top+f.height/2))<f.height){this._$proxy.hide();return}if(n=this._getRowByPos({x:t.pageX,y:t.pageY})){r=e.grid.bounds(n),i=r.top+r.height/2,s=this._wijgrid._view().getAbsoluteRowIndex(n)-this._staticOffsetH,o=Math.max(s-1,-1),u=t.pageY<i?o!==this._staticRowIndex:s===this._staticRowIndex,a=u?r.top:r.top+r.height;if(!e.grid.isOverAxis(a,this._visibleBounds.top-1,this._visibleBounds.height+2))return;this._newStaticIndex=u?o:s,this._$proxy.show().css({left:l?r.left:this._visibleBounds.left,top:a,width:l?this._visibleBounds.width+this._visibleBounds.left-r.left:this._visibleBounds.width,height:3})}}},t.prototype._getFieldByPos=function(t){var n=this._wijgrid.columns();for(var r=0,i=n.length;r<i;r++){var s=n[r],o=s.options;if(o.isLeaf){var u=e.grid.bounds(s.element);if(e.grid.isOverAxis(t.x,u.left,u.width))return s}}return null},t.prototype._getRowByPos=function(t){var r=this._wijgrid._rows(),i,s,o,u;for(i=0,s=r.length();i<s;i++){o=r.item(i)[0],u=e.grid.bounds(n(o));if(e.grid.isOverAxis(t.y,u.top,u.height))return o}return null},t}();t.uiFrozener=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function r(){}return r.generate=function(t,n,i){t=(t||"").toLowerCase();switch(t){case"append":r._processAppendMode(n,i);break;case"merge":r._processMergeMode(n,i);break;case"none":break;default:throw e.grid.stringFormat('Unsupported value: "{0}"',t)}},r._processAppendMode=function(t,i){var s={};e.grid.traverse(i,function(t){t.dynamic&&e.grid.validDataKey(t.dataKey)&&(s[t.dataKey]=!0)}),n.each(t,function(e,t){"name"in t&&!s[t.name]&&i.push(r._createAutoField(t))})},r._processMergeMode=function(t,i){var s=[];e.grid.traverse(i,function(n){if(n.isLeaf&&r._isBindableColumn(n)){var i=n.dataKey;e.grid.validDataKey(i)?t[i]!==undefined&&delete t[i]:i!==null&&s.push(n)}});if(s.length){var o=0;n.each(t,function(e,n){var r=s[o++];r&&(r.dataKey=n.name,delete t[e])})}n.each(t,function(e,t){i.push(r._createAutoField(t))})},r._createAutoField=function(t){return e.grid.createDynamicField({dataKey:t.name})},r._isBindableColumn=function(e){return!t.c1bandfield.test(e)&&!t.c1rowheaderfield.test(e)&&!t.c1buttonbasefield.test(e)&&!t.c1buttonfield.test(e)&&!t.c1commandbuttonfield.test(e)},r}();t.columnsGenerator=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function e(e,t,n,r){this._timer=0,this._timeout=50,this._ignoreScrollEvents=!1,this._debounceScrolledEvent=!0,this._wijgrid=e,this._$content=t,this._view=this._wijgrid._view(),this._N=this._wijgrid._renderableRowsCount(),this._rowOuterHeight=r,this._updateContentHeight();var i=this._wijgrid.mOuterDiv.height()+this._N*this._rowOuterHeight;this._view._splitAreas.sw.height(i)}return e.prototype.scrollTo=function(e,t){this._debounceScrolledEvent=!1,this._completeListener=t,this._panelInst.vScrollTo(e*this._panelInst.options.vScroller.scrollSmallChange,!0)},e.prototype._updateContentHeight=function(){this._$content.height(this._rowOuterHeight*this._N)},e.prototype.attach=function(e){this._$scroller=e,this._panelInst=e.data("wijmo-wijsuperpanel"),this._updateContentHeight(),this._updateVerticalScroller(),e.bind("wijsuperpanelscrolled.wijgrid",t.proxy(this._onSuperpanelScrolled,this)),e.bind("wijsuperpanelscrolling.wijgrid",t.proxy(this._onSuperpanelScrolling,this)),e.bind("wijsuperpanelscrolled.wijgrid",t.proxy(this._onSuperpanelPostScrolled,this))},e.prototype._updateVerticalScroller=function(){var e=Math.max(0,this._N-(this._view.getVirtualPageSize()-1));this._setVerticalScrollerOptions(1,e)},e.prototype._setVerticalScrollerOptions=function(e,t){var n=this._panelInst.options.vScroller;n.scrollSmallChange=e,n.scrollLargeChange=e*4,t+=n.scrollLargeChange-1,n.scrollMax=t,this._panelInst.option("vScroller",n);if(!this._view._isNativeSuperPanel()&&this._panelInst._scrollDrag!=undefined){var r=this._panelInst._fields(),i=r.vbarContainer,s=r.vbarDrag;this._panelInst._scrollDrag("v",i,s,!1)}},e.prototype._changeVisibleRowsCount=function(e){this._N=e,this._updateContentHeight(),this._updateVerticalScroller()},e.prototype.dispose=function(){this._$scroller.unbind(".wijgrid"),this._clearTimer()},e.prototype._clearTimer=function(){window.clearTimeout(this._timer),this._timer=0},e.prototype._onSuperpanelScrolling=function(e,t){if(this._ignoreScrollEvents||t.dir!=="v")return;if(this._timer===-1)return!1},e.prototype._onSuperpanelScrolled=function(e,n){var r=this;if(this._ignoreScrollEvents||n.dir!=="v")return;this._timer>0&&this._clearTimer(),this._timer!==-1&&(this._timer=window.setTimeout(function(){r._timer=-1;var e=Math.floor(n.newValue/r._panelInst.options.vScroller.scrollSmallChange),i=r._view._bounds.start;e<0&&(e=0),e>=r._N&&(e=r._N-1),e!==i?(r._debounceScrolledEvent=!0,r._wijgrid._handleVirtualScrolling(e,null,t.proxy(r._scrollingCompleted,r))):(r._debounceScrolledEvent=!0,r._log(),r._clearTimer())},this._debounceScrolledEvent?this._timeout:0))},e.prototype._scrollingCompleted=function(e){this._wijgrid._trackScrollingIndex(e),this._log(),this._completeListener&&(this._completeListener(),this._completeListener=null),this._clearTimer()},e.prototype._onSuperpanelPostScrolled=function(){t.isFunction(this._postScrolled)&&this._postScrolled.apply(this,arguments)},e.prototype._log=function(){},e}();e.uiVirtualScroller=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=function(){function e(e){this._items=[],this._capacity=null,this._maxRowIndex=e}return e.prototype.add=function(e){this._capacity=null;var t=this._items.length,n;if(!t||(n=this._items[t-1]).end<e.start)t&&e.start-n.end===1?n.end=e.end:this._items.push(e);else{var r=this._binSearchByStartVal(e.start),i=this._binSearchByEndVal(e.end),s=r<0?~r:r,o=i<0?~i:i,u=r>=0||s>0&&e.start<=this._items[s-1].end,a=i>=0||o<t&&e.end<=this._items[o].end&&e.end>=this._items[o].start,f;u?a?r>=0?(this._items[o].start=this._items[s].start,(f=o-s)&&this._items.splice(s,f)):(this._items[o].start=this._items[s-1].start,(f=o-s+1)&&this._items.splice(s-1,f)):r>=0?(this._items[s].end=e.end,(f=o-s-1)&&this._items.splice(s,f)):(this._items[s-1].end=e.end,(f=o-s)&&this._items.splice(s,f)):a?(this._items[o].start=e.start,(f=o-s)&&this._items.splice(s,f)):this._items.splice(s,o-s,e)}},e.prototype.item=function(e){return this._items[e]},e.prototype.forEachIndex=function(e,t,n){if(e<0)return;var r=this._items.length,i=this._getIteratorStateFor(e),s=0,o=!0,u=!1;if(i){var a=i.j;for(var f=i.i;f<r&&!u;f++){var l=this._items[f];o||(a=l.start);for(a;a<=l.end&&!u;a++){if(++s>t&&t!==-1)return;u=n(a)===!1}o=!1}}},e.prototype.forEachIndexBackward=function(e,t,n){if(e<0)return;var r=this._items.length,i=this._getIteratorStateFor(e),s=0,o=!0,u=!1;if(i){var a=i.j;for(var f=i.i;f>=0&&!u;f--){var l=this._items[f];o||(a=l.end);for(a;a>=l.start&&!u;a--){if(++s>t&&t!==-1)return;u=n(a)===!1}o=!1}}},e.prototype._getIteratorStateFor=function(e){var t=this._items.length,n=0;for(var r=0;r<t;r++){var i=this._items[r];n+=i.end-i.start+1;var s=n-e;if(s>=0)return{i:r,j:i.end-s+1}}return null},e.prototype.getAbsIndex=function(e){for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t],i=r.end-r.start;if(e<=i)return r.start+e;e-=i+1}return-1},e.prototype.getRenderedIndex=function(e){var t=this.hasAbsIndex(e);if(t>=0){var n=0;for(var r=0;r<t;r++){var i=this._items[r];n+=i.end-i.start+1}return n+(e-this._items[t].start)}return-1},e.prototype.hasAbsIndex=function(e){if(this._items.length){var t=this._binSearchByStartVal(e);if(t>=0)return t;t=~t;if(t>0&&e<=this._items[t-1].end)return t-1}return-1},e.prototype.length=function(){return this._items.length},e.prototype.capacity=function(){if(this._capacity===null){var e=0;for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];e+=r.end-r.start+1}this._capacity=e}return this._capacity},e.prototype.truncateByStart=function(e,t){var n=this._binSearchByStartVal(e),r=this._items.length;n<0?(n=~n,n<r?n>0&&this._items[n-1].end>=e?(this._items[n-1].start=e,this._items.splice(0,n-1)):(t&&(this._items[n].start=e),this._items.splice(0,n)):this._items=[]):this._items.splice(0,n)},e.prototype._binSearchByStartVal=function(e){var t=0,n=this._items.length-1;while(t<=n){var r=n+t>>1,i=this._items[r].start-e;if(i===0)return r;i<0?t=r+1:n=r-1}return~t},e.prototype._binSearchByEndVal=function(e){var t=0,n=this._items.length-1;while(t<=n){var r=n+t>>1,i=this._items[r].end-e;if(i<0)t=r+1;else{if(!i)return r;n=r-1}}return~t},e}();e.renderBoundsCollection=t})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(n,r,i,s){function u(t){return s.parser=s.parser||e.defaultParsers[t],!s.parser&&n!=null&&e.errors.noParser(t),s.parser}var o=n;s=t.extend({nullString:"",format:""},s),r=r||n!=null&&typeof n,i=i||r;if(!i)return n;if(i=="string")return u(r),s.parser?s.parser.toStr(n,s.culture,s.format,s.nullString,!0):n;u(i);if(!s.parser)return n;n=s.parser.parse(n,s.culture,s.format,s.nullString,!0);if(isNaN(n)&&n!=null&&e.util.isNumeric(n)){if(s.ignoreError)return o;e.errors.cantConvert(i,o)}return n}function i(t){return function(){return n||e.util.logError(e.errors.noGlobalize.create().message),t.apply(this,arguments)}}var t=jQuery,n=Globalize;e.convert=r,e.defaultParsers={string:{parse:function(e,t,n,r,i){switch(e){case null:return null;case r:if(i)return null;case undefined:case"&nbsp":return"";default:return""+e}},toStr:function(e,t,n,r,i){return e===null&&i?r:""+e}},number:{parse:function(e,t,r,i,s){var o=typeof e;return o==="number"?isNaN(e)?NaN:e:!e&&e!==0||e==="&nbsp;"||e===i&&s?null:n.parseFloat(e,10,t)},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"n",t)}},currency:{parse:function(e,t,r,i,s){var o=typeof e;return o==="number"?isNaN(e)?NaN:e:!e&&e!==0||e==="&nbsp;"||e===i&&s?null:(o==="string"&&(e=e.replace(t.numberFormat.currency.symbol,"")),n.parseFloat(e,10,t))},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"c",t)}},datetime:{parse:function(e,t,r,i,s){var o;if(e instanceof Date)return e;if(!e||e==="&nbsp;"||e===i&&s)return null;o=/^\/Date\((\d+)\)\/$/.exec(e);if(o)return new Date(parseInt(o[1],10));var u=n.parseDate(e,r||"d",t);if(u==null||isNaN(u))u=Date.parse(e),u=isNaN(u)?NaN:new Date(u);return u},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"d",t)}},"boolean":{parse:function(e,n,r,i,s){var o=typeof e;if(o==="number")return e!=0;if(o==="boolean")return e;o==="string"&&(e=t.trim(e));if(!e||e==="&nbsp;"||e===i&&s)return null;switch(e.toLowerCase()){case"true":return!0;case"false":return!1}return NaN},toStr:function(e,t,n,r,i){return e===null&&i?r:e?"true":"false"}}},t.each(e.defaultParsers,function(e,t){t.parse=t.parse&&i(t.parse),t.toStr=t.toStr&&i(t.toStr)})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){(function(n){function r(r){function i(r){var s=[];if(r.length===0)return s;var o=n.Connective.AND;return e.util.each(r,function(r,u){if(r==0&&e.util.isString(u)){var a=u.toLowerCase();if(a==n.Connective.AND||a==n.Connective.OR){o=a;return}}if($.isArray(u)){u=i(u);if(!u)return;if(u[0]===o||u.length==2){u.shift(),s=s.concat(u);return}}else{var f=t.normalizeCondition(u);if(!f)return;f.property=u.property,u=f}s.push(u)}),s.length==0?null:(s.unshift(o),s)}return i(r)}function i(t){if(!$.isArray(t))return null;var i={isEmpty:!0,original:t,normalized:r(t),func:null};return i.normalized==null?i.func=function(e){return!0}:(i.isEmpty=!1,i.func=function(t){function r(i){var s=i[0]===n.Connective.AND,o=s?e.util.every:e.util.some;return o(i,function(n,i){if(i===0)return s;if($.isArray(n))return r(n);var o=e.util.getProperty(t,n.property);return n.op.apply(o,n.value)})}return r(i.normalized)}),i}function s(e){return i(e)||t.compile(e)}n.Connective={AND:"and",OR:"or"},n.compile=s})(t.extended||(t.extended={}));var n=t.extended})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=e.data,i=e.data.filtering.extended,s=function(){function e(e){this.real=e,this._updatingFilter=!1,this._overrideFilter(),this._makeMemberProxies()}return e.prototype._overrideFilter=function(){var e=this;this.filter=r.observable(this.real.filter()),this.filter.subscribe(function(t){e.real.filter()!==t&&!e._updatingFilter&&e.refresh({filter:t})}),this.real.filter.subscribe(function(t){t!==e._lastSetFilter&&e.filter(t)})},e.prototype.refresh=function(e,t){typeof t=="undefined"&&(t=!1),e=n.extend({},e);var r=e.filter;e.filter=this._coerceFilter(e.filter),this._lastSetFilter=e.filter,this._updatingFilter=!0;try{n.isFunction(e.filter)&&!n.isFunction(r)?this.filter(r):this.filter(e.filter)}finally{this._updatingFilter=!1}return this.real.refresh(e,t)},e.prototype._makeMemberProxies=function(){var e=this;r.util.each(this.real,function(t,r){if(!n.isFunction(r)||e[t]||t.charAt(0)==="_")return;e[t]=n.isFunction(r.subscribe)?r:function(){return r.apply(e.real,arguments)}})},e.create=function(t){return new e(t)},e.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(e){var t=[];return n.each(e,function(e,s){if(!n.isArray(s))s=[s];else{var o=r.util.isString(s[0])&&s[0].toLowerCase();if(o===i.Connective.AND||o===i.Connective.OR){t.push(s);return}}var u=[];n.each(s,function(t,n){var i=r.filtering.normalizeCondition(n);i&&(i.property=e,u.push(i))}),u.length>0&&t.push(u)}),t.length>0?t:null},e.prototype._coerceFilter=function(e){if(n.isArray(e))return i.compile(e).func;if(!n.isPlainObject(e))return e;e=n.extend(!0,{},e);var t={};n.each(e,function(i,s){n.isArray(s)||(s=[s]);if(t){var o=r.util.isString(s[0])&&s[0].toLowerCase();if(s.length==1||s.length==2&&(o==="and"||o==="or")){t[i]=s[s.length-1];return}}e[i]=s,t=null});if(t)return t;var s=this._convertComplexPropertyFilterToExtendedFilterFormat(e);return i.compile(s).func},e.prototype._unsafeReplace=function(e,t){this.real.sourceArray[e]=t,this.real.local[e]=t},e.prototype._unsafeSplice=function(e,t,n){arguments.length===2?(this.real.sourceArray.splice(e,t),this.real.local.splice(e,t)):(this.real.sourceArray.splice(e,t,n),this.real.local.splice(e,t,n))},e.prototype._unsafePush=function(e){this.real.sourceArray.push(e),this.real.local.push(e)},e}();t.GridDataView=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=function(t){function n(e){this.mObservableArray=e;var n=ko.utils.unwrapObservable(this.mObservableArray);t.call(this,n,null)}return __extends(n,t),n.validSource=function(e){return!!(ko&&ko.isObservable(e)&&$.isFunction(e.slice))},n.prototype.refresh=function(n,r){typeof r=="undefined"&&(r=!1),this.sourceArray=ko.utils.unwrapObservable(this.mObservableArray),this.mPlainArray=ko.toJS(this.sourceArray);var i=n&&n.pageSize!==undefined?n.pageSize:this.pageSize(),s=n&&n.pageIndex!==undefined?n.pageIndex:this.pageIndex();if(i>0&&s>0){var o=e.data.util.pageCount(this.sourceArray.length,i);s>=o&&(s=Math.max(0,o-1),n||(n={}),n.pageIndex=s)}return t.prototype.refresh.apply(this,[n,r])},n.prototype.getPlainSource=function(){return this.mPlainArray},n.prototype.dispose=function(){this.mObservableArray=null,this.mPlainArray=null,t.prototype.dispose.apply(this,arguments)},n}(e.data.ArrayDataView);t.koDataView=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));;
var wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.prototype.round=function(e,t){if(!e)return 0;var n=Math.pow(10,t||2);return Math.round(e*n)/n},e.prototype.toOADate=function(e){var t=864e5,n=null;return e&&e.valueOf&&(n=e.valueOf()-(new Date(1900,0,1)).valueOf()+2*t),n},e.prototype.fromOADate=function(e){var t=864e5,n=new Date(e-2*t+(new Date(1900,0,1)).getTime());return n},e.prototype.arrayClone=function(e){var n=[];return t.each(e,function(e,r){n.push(t.extend(!0,{},r))}),n},e}(),r=function(){function e(){}return e.prototype.isSVGElem=function(e){var t="http://www.w3.org/2000/svg";return e.nodeType===1&&e.namespaceURI===t},e.prototype.addClass=function(e,n){n=n||"";var r=this;t.each(e,function(){if(r.isSVGElem(this)){var e=this;t.each(n.split(/\s+/),function(n,r){var i=e.className?e.className.baseVal:e.getAttribute("class");t.inArray(r,i.split(/\s+/))===-1&&(i+=(i?" ":"")+r,e.className?e.className.baseVal=i:e.setAttribute("class",i))})}else t(this).addClass(n)})},e.prototype.clearRaphaelCache=function(){},e.prototype.getPositionByAngle=function(e,t,n,r){var i={x:0,y:0},s=Raphael.rad(r);return i.x=e+n*Math.cos(-1*s),i.y=t+n*Math.sin(-1*s),i},e.prototype.hasClass=function(e,n){if(!n||n.length===0)return!1;if(this.isSVGElem(e)){var r=e.className?e.className.baseVal:e.getAttribute("class"),i=!1;return t.each(r.split(/\s+/),function(e,t){if(t===n)return i=!0,!1}),i}return t(e).hasClass(n)},e.prototype.sector=function(e,t,n,r,i){var s=this.getPositionByAngle(e,t,n,r),o=this.getPositionByAngle(e,t,n,i);return["M",e,t,"L",s.x,s.y,"A",n,n,0,+(i-r>180),0,o.x,o.y,"z"]},e}();t.extend(n.prototype),t.extend({wijraphael:r.prototype});var i="[\\x20\\t\\r\\n\\f]",s=t.expr.filter.CLASS,o=function(e,t){var n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length),s=0,o,u,a;for(o=0;o<i;o++){u=n[o]?parseInt(n[o]):0,a=r[o]?parseInt(r[o]):0;if(u>a){s=1;break}if(u<a){s=-1;break}}return s};t.expr.filter.CLASS=function(e,n){if(o(t.fn.jquery,"1.8")<0){var r=!t.wijraphael||!t.wijraphael.isSVGElem(e)?e.className:e.className?e.className.baseVal:e.getAttribute("class");return(" "+r+" ").indexOf(n)>-1}var s=new RegExp("(^|"+i+")"+e+"("+i+"|$)");return function(e){var n=!t.wijraphael||!t.wijraphael.isSVGElem(e)?e.className:e.className?e.className.baseVal:e.getAttribute("class");return s.test(n)}},o(t.fn.jquery,"1.8")<0&&(t.expr.preFilter.CLASS=function(e,n,r,i,s,o){var u=0,a=null,f=null,l;e=" "+e[1].replace(/\\/g,"")+" ";if(o)return e;for(u=0,a={};a;u++){a=n[u];if(!a)try{a=n.item(u)}catch(c){}a&&(f=!t.wijraphael||!t.wijraphael.isSVGElem(a)?a.className:(a.className?a.className.baseVal:"")||a.getAttribute("class"),l=f&&(" "+f+" ").indexOf(e)>-1,s^l?r||i.push(a):r&&(n[u]=!1))}return!1}),Raphael.fn.tri=function(e,t,n){var r=e,i=t-n,s=Math.cos(30*Math.PI/180)*n,o=Math.tan(60*Math.PI/180)*s,u=e+s,a=t+o,f=e-s,l=t+o,c=["M",r.toString(),i.toString(),"L",u.toString(),a.toString(),"L",f.toString(),l.toString(),"z"];return this.path(c.join(" "))},Raphael.fn.invertedTri=function(e,t,n){var r=e,i=t+n,s=Math.cos(30*Math.PI/180)*n,o=Math.tan(60*Math.PI/180)*s,u=e+s,a=t-o,f=e-s,l=t-o,c=["M",r.toString(),i.toString(),"L",u.toString(),a.toString(),"L",f.toString(),l.toString(),"z"];return this.path(c.join(" "))},Raphael.fn.box=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=["M",e-r,t-r,"L",e+r,t-r,"L",e+r,t+r,"L",e-r,t+r,"z"];return this.path(i.join(" "))},Raphael.fn.diamond=function(e,t,n){var r=["M",e,t-n,"L",e+n,t,"L",e,t+n,"L",e-n,t,"z"];return this.path(r.join(" "))},Raphael.fn.cross=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=["M",e-r,t-r,"L",e+r,t+r,"M",e-r,t+r,"L",e+r,t-r];return this.path(i.join(" "))},Raphael.fn.paintMarker=function(e,t,n,r){var i=this,s=null;e||(e="circle");switch(e){case"circle":s=i.circle(t,n,r);break;case"tri":s=i.tri(t,n,r);break;case"invertedTri":s=i.invertedTri(t,n,r);break;case"box":s=i.box(t,n,r);break;case"diamond":s=i.diamond(t,n,r);break;case"cross":s=i.cross(t,n,r)}return s},Raphael.fn.htmlText=function(e,n,r,i,s,o){var u=function(e,t,n){var r=/<(b|strong)>/,i=/<(i|em)>/,s=/href=[\"\']([^\"\']+)[\"\']/,o=/<a/;n&&e.attr(n),r.test(t)&&e.attr("font-weight","bold"),i.test(t)&&e.attr("font-style","italic"),o.test(t)&&t.match(s)[1]&&e.attr("href",t.match(s)[1])},a=r.toString().split(/<br\s?\/>|\\r/i),f=this,l=f.set(),c=0,h=0;return s=s||3,o=o||5,t.each(a,function(e,n){var r=0,a=n.split("|||");n=n.replace(/<([A-Za-z]+(.|\n)*?)>/g,"|||<$1>").replace(/<\/([A-Za-z]*)>/g,"</$1>|||"),t.each(a,function(e,n){var o=null,a=null,p=0,d,v=0;n!==""&&(o=n,o=t.trim(o.replace(/<(.|\n)*?>/g,"")),d=f.text(0,0,o),u(d,n,i),a=d.wijGetBBox(),p=a.width/2+c,v=-a.height/2+h,c=c+a.width+s,d.translate(p,v),l.push(d),r<a.height&&(r=a.height))}),h+=r+o,c=r=0}),h=0,l.transform(Raphael.format("...t{0},{1}",e-l.getBBox().x,n-l.getBBox().y)),l},Raphael.fn.line=function(e,t,n,r){return this.path(["M",e.toString(),t.toString(),"L",n.toString(),r.toString()])},Raphael.fn.roundRect=function(e,n,r,i,s,o,u,a){var f=[],l=[-1,1,1,1,1,-1,-1,-1],c=["v","h","v","h"],h=null,p=null;return t.each([s,o,u,a],function(e,t){typeof t=="number"?f=f.concat([{x:t,y:t}]):typeof t=="object"?f=f.concat(t):f=f.concat([{x:0,y:0}])}),h=["M",e+f[0].x,n],p=[i-f[0].y-f[1].y,r-f[1].x-f[2].x,f[2].y+f[3].y-i,f[3].x+f[0].x-r],t.each(f,function(e,t){t.x&&t.y&&(h=h.concat("a",t.x,t.y,0,0,0,l[2*e]*t.x,l[2*e+1]*t.y)),h=h.concat(c[e],p[e])}),h.push("z"),this.path(h)},Raphael.fn.wrapText=function(e,n,r,i,s,o){function v(e,t,n){var r=null,i=null,s=e.toString().split(" "),o=[],a=[],f="";while(s.length)f+=" "+s[0],r=u.text(-1e3,-1e3,f),r.attr(n),i=r.wijGetBBox(),i.width>t?(a.length&&(o.push(a),f=s[0]),a=[s.shift()]):a.push(s.shift()),s.length===0&&o.push(a),r.wijRemove(),r=null;return o}var u=this,a=o.rotation,f=a?t.extend(!0,{},o,{rotation:0}):o,l=n,c=u.set(),h=null,p=null,d=[];return typeof r=="undefined"&&(r=""),t.each(v(r,i,f),function(t,n){var r=n.join(" "),o=s||"near",p=u.text(e,l,r),v=0,m=0;p.wijAttr(f,null),h=p.wijGetBBox();switch(o){case"near":v=i-h.width/2;break;case"center":v+=i/2;break;case"far":v+=h.width/2}a?(m+=h.height/2/Math.abs(Math.sin(a)),l+=h.height/Math.abs(Math.sin(a))):(m+=h.height/2,l+=h.height),h.x+=v,h.y+=m,a?p.attr({x:p.attr("x")+v,y:p.attr("y")+m}):p.transform(Raphael.format("...T{0},{1}",v,m)),c.push(p),d.push(h)}),a&&(h=c.wijGetBBox(),c.length>1?(t.each(c,function(e,t){t.attr({y:t.attr("y")-h.height/2}),d[e].y-=h.height/2}),p={x:h.x+h.width/2,y:h.y+h.height/2},t.each(c,function(e,n){var r=Math,i=d[e],s={x:i.x+i.width/2,y:i.y+i.height/2},o=r.sqrt(r.pow(s.x-p.x,2)+r.pow(s.y-p.y,2)),u=0,f=null,l=null;n.attr({rotation:a});if(o===0)return!0;f=n.wijGetBBox(),u=Raphael.deg(r.asin(r.abs(s.y-p.y)/o)),s.y>p.y?s.x>p.x?u-=360:u=-1*(u+180):s.x>p.x?u*=-1:u=-1*(180-u),l=t.wijraphael.getPositionByAngle(p.x,p.y,o,-1*(a+u)),n.attr({y:n.attr("y")+l.y-f.y-f.height/2})})):c[0].transform(Raphael.format("...R{0}",a))),c},Raphael.fn.getSVG=function(){function e(e,n){var r="<"+e+" ",i=null,s=!1;return t.each(n,function(e,t){if(e==="text"||e==="opacity"||e==="transform"||e==="path"||e==="w"||e==="h"||e==="translation")return!0;t&&(e==="stroke"&&t===0&&(t="none"),r+=e+"='"+t+"' ")}),n.opacity&&(i=n.opacity,r+="opacity='"+i+"' style='opacity:"+i+";",s=!0),n.transform&&n.transform.length>0&&(i=n.transform,s?r+="transform:"+i:(r+="style='transform:"+i,s=!0)),s&&(r+="'"),n.text?(i=n.text,r+="><tspan>"+i+"</tspan>"):r+=">",r+="</"+e+">",r}var n=this,r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+n.canvas.offsetWidth+'" height="'+n.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',i,s="",o,u,a,f=0,l=0,c=0,h=0;for(i=n.bottom;i;i=i.next)if(i&&i.type)switch(i.type){case"path":for(f=0,l=i.attrs.path.length;f<l;f++){u=i.attrs.path[f];for(c=0,h=u.length;c<h;c++)a=u[c],c<1?s+=a:c===h-1?s+=a:s+=a+","}s&&s.length>0&&(i.attrs.d=s.replace(/,/g," "));break;case"text":i.attrs["text-anchor"]||(i.attrs["text-anchor"]="middle");break;case"image":o=i.transformations,i.attrs.transform=o?o.join(" "):"";break;case"ellipse":case"rect":r+=e(i.type,i.attrs)}return r+="</svg>",r},Raphael.fn.group=function(){function n(){var n,r=e.set(),i=e.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");return e.canvas.appendChild(i),n={type:"group",node:i,paper:e,attrs:{},_:{},id:Raphael.createUUID(),push:function(e){function n(e){var t;if(e.type==="set")for(t=0;t<e.length;t++)n(e[t]);else i.appendChild(e.node),r.push(e)}return arguments.length>1?t.each(arguments,function(e,t){n(t)}):n(e),this},getBBox:function(){return r.getBBox()}},t.each(["attr","stop","animate","wijAnimate","remove","wijRemove"],function(e,t){n[t]=function(){if(Raphael.el[t])return Raphael.el[t].apply(this,arguments)}}),n}var e=this;return n()},Raphael.el.wijRemove=function(){var e=this,n;if(e.removed)return;e.node.parentNode&&(n=t(e.node),e.stop().remove(),n.remove())},Raphael.el.wijGetBBox=function(){return this.getBBox()},Raphael.el.wijAnimate=function(e,n,r,i){if(!e||t.isEmptyObject(e))return;var s=this.shadow,o=0,u={easeInCubic:">",easeOutCubic:"<",easeInOutCubic:"<>",easeInBack:"backIn",easeOutBack:"backOut",easeOutElastic:"elastic",easeOutBounce:"bounce"};u[r]&&(r=u[r]),this.animate(e,n,r,i),u=null,s&&s.offset&&(o=s.offset,e.x&&(e.x+=o),e.y&&(e.y+=o),this.shadow.animate(e,n,r,i))},Raphael.el.wijAttr=function(e,n){t.isPlainObject(e)?t.each(e,function(t,n){f(t,n,e)}):typeof e=="string"&&(e=f(e,n)),this.attr(e,n);if(this.shadow)if(typeof e=="object"){var r=t.extend(!0,{},e);r.fill&&delete r.fill,r.stroke&&delete r.stroke,r["stroke-width"]&&delete r["stroke-width"],this.shadow.attr(r,n)}else if(typeof e=="string")switch(e){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(e,n);break;case"x":this.shadow.attr(e,n),this.shadow.attr("transform","...t1,0");break;case"y":this.shadow.attr(e,n),this.shadow.attr("transform","...t0,1");break;default:}},Raphael.st.wijRemove=function(){t.each(this,function(e,t){t.wijRemove&&!t.removed&&t.wijRemove()})},Raphael.st.wijAttr=function(e,n){return t.each(this.items,function(t,r){r.wijAttr(e,n)}),this},Raphael.st.wijAnimate=function(e,t,n,r){var i=0,s=0,o=null;for(i=0,s=this.items.length;i<s;i++)o=this.items[i],o.removed||o.wijAnimate(e,t,n,r);return this},Raphael.st.wijGetBBox=function(){var e=[],t=[],n=[],r=[],i,s,o=Math.max,u=Math.min,a="push",f="apply",l=null,c=0;for(c=this.items.length-1;c>=0;c--)l=this.items[c].wijGetBBox(),e[a](l.x),t[a](l.y),n[a](l.x+l.width),r[a](l.y+l.height);return i=u[f](0,e),s=u[f](0,t),{x:i,y:s,x2:undefined,y2:undefined,width:o[f](0,n)-i,height:o[f](0,r)-s}};var u=Raphael.el.attr,a=function(e,n){if(e==="width"||e==="height"||e==="r"){if(!isNaN(n)&&n<0)return 0}else e==="clip-rect"&&t.isArray(n)&&t.each(n,function(e,t){!isNaN(t)&&t<0&&(n[e]=0)});return n},f=function(e,t,n){var r=e.toLowerCase().replace(/^(font|stroke|clip|arrow|text|fill)(\w+)$/,"$1-$2");return n&&r!==e&&(delete n[e],n[r]=t),r};Raphael.el.attr=function(e,n){return t.isPlainObject(e)?t.each(e,function(t,n){e[t]=a(t,n)}):n=a(e,n),u.apply(this,arguments)}})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=jQuery,r=function(){function e(){}return e.strPolynom="polynom",e.strExponent="exponent",e.strLogarithmic="logarithmic",e.strPower="power",e.strFourier="fourier",e.strMinX="minX",e.strMinY="minY",e.strMaxX="maxX",e.strMaxY="maxY",e.strAverageX="averageX",e.strAverageY="averageY",e}();t.TrendlineFitType=r;var i=function(){function e(){}return e.strTrendline="trendLine",e}();t.ChartConsts=i;var s=function(){function e(){}return e.getDiffAttrs=function(e,t){var r={};return n.each(t,function(n,i){if(typeof e=="undefined")return!0;typeof e[n]=="undefined"?r[n]=t[n]:e[n]!==t[n]&&(r[n]=t[n])}),r},e.paintShadow=function(e,t,r){if(e.removed||n(e.node).parent().length===0)return;var i=e.clone(),s=t||1,o=r||"#cccccc";i.insertBefore(e),i.attr({transform:Raphael.format("...T{0},{1}",s,s),stroke:o,fill:"none","stroke-width":s}),i.toBack(),i.offset=s,e.shadow=i},e.getScaling=function(e,t,n,r){var i=t-n;return i===0&&(i=1),e&&(i=-i),r/i},e.getTranslation=function(e,t,n,r,i){var s=0;return e?(s=t.y,s-=i*n):(s=t.x,s-=i*r),s},e.getXSortedPoints=function(e){function u(e,t){return e-t}var t=e.data.x,r=[].concat(t),i=[].concat(e.data.y),s=[],o=t;if(t===undefined||t.length===0)return;return typeof t[0]=="number"&&(o=[].concat(t).sort(u)),n.each(o,function(e,t){n.each(r,function(n,o){if(t===o)return typeof o!="number"&&(o=e),s.push({x:o,y:i[n]}),r.splice(n,1),i.splice(n,1),!1})}),s},e.sector=function(e,t,r,i,s){var o=n.wijraphael.getPositionByAngle(e,t,r,i),u=n.wijraphael.getPositionByAngle(e,t,r,s),a,f,l,c;return s>i?(l=s-i,c=l>180,c?(a=1,f=0):(a=+c,f=+c)):(l=i-s,c=l>180,c?(a=1,f=1):(a=+c,f=+!c)),["M",e,t,"L",o.x,o.y,"A",r,r,0,a,f,u.x,u.y,"z"]},e.donut=function(e,t,r,i,s,o){var u=n.wijraphael.getPositionByAngle(e,t,r,s),a=n.wijraphael.getPositionByAngle(e,t,r,o),f=n.wijraphael.getPositionByAngle(e,t,i,s),l=n.wijraphael.getPositionByAngle(e,t,i,o),c=o-s>180,h,p,d,v,m,g;return o>s?(m=o-s,g=m>180,g?(h=1,p=0,d=1,v=1):(h=0,p=0,d=0,v=1)):(m=s-o,g=m>180,g?(h=1,p=1,d=1,v=0):(h=0,p=1,d=0,v=0)),["M",u.x,u.y,"A",r,r,0,h,p,a.x,a.y,"L",l.x,l.y,"A",i,i,0,d,v,f.x,f.y,"L",u.x,u.y,"z"]},e.isDate=function(e){return e?typeof e=="object"&&e.constructor===Date:!1},e.getNumberValues=function(t){var r=[],i,s=e.getFirstValidListValue(t);if(typeof s=="number")return t;i=e.isDate(s);for(var o=0;o<t.length;o++)i?r.push(n.toOADate(t[o])):r.push(o);return r},e.getFirstValidListValue=function(e){var t;return n.each(e,function(e,n){return n===null?!0:typeof n=="undefined"?!0:typeof n=="number"&&isNaN(n)?!0:(t=n,!1)}),t},e.getLastValidListValue=function(t){var n=[].concat(t).reverse();return e.getFirstValidListValue(n)},e.isHolefunction=function(e,t){return e===null?!0:typeof e=="undefined"?!0:typeof e=="number"&&isNaN(e)?!0:t===null?!1:typeof e!="undefined"?e-t===0?!0:!1:!1},e.toHexColor=function(e){if({hs:1,rg:1}.hasOwnProperty(e.toLowerCase().substring(0,2))||e.substring(0,1)==="#")return e;try{var t=new ActiveXObject("htmlfile"),n,r,i;return t.write("<body>"),t.close(),n=t.body,r=n.createTextRange(),n.style.color=e,i=r.queryCommandValue("ForeColor"),i=(i&255)<<16|i&65280|(i&16711680)>>>16,i=i.toString(16),"#000000".slice(0,7-i.length)+i}catch(s){return e}},e}();t.ChartUtil=s;var o=function(){function e(){}return e.roundTime=function(e,t,r){var i=this,s=t,o=n.fromOADate(e),u,a,f,l;return s>0?(u={year:o.getFullYear(),month:o.getMonth(),day:o.getDate(),hour:o.getHours(),minute:o.getMinutes(),second:o.getSeconds()},s<i.tmInc.minute?(u.second=i.tround(u.second,s,r),i.getTimeAsDouble(u)):(u.second=0,s<i.tmInc.hour?(s/=i.tmInc.minute,u.minute=i.tround(u.minute,s,r),i.getTimeAsDouble(u)):(u.minute=0,s<i.tmInc.day?(s/=i.tmInc.hour,u.hour=i.tround(u.hour,s,r),i.getTimeAsDouble(u)):(u.hour=0,s<i.tmInc.month?(s/=i.tmInc.day,u.day=i.tround(u.day,s,r),i.getTimeAsDouble(u)):(u.day=1,s<i.tmInc.year?(s/=i.tmInc.month,u.month=i.tround(u.month,s,r),i.getTimeAsDouble(u)):(u.month=0,s/=i.tmInc.year,u.year=i.tround(u.year,s,r),i.getTimeAsDouble(u))))))):(a=o,f=a-s,l=parseInt((f/t).toString(),10)*t,r&&l!==f&&(l+=t),a=s+l,a)},e.tround=function(e,t,n){var r=parseInt((e/t*t).toString(),10);return n&&r!==e&&(r+=parseInt(t,10)),r},e.getTimeAsDouble=function(e){var t=0,r=0,i=null;return e.day<1?(r=-1-e.day,e.day=1):e.day>28&&(r=e.day-28,e.day=28),e.month<0?(t=-1-e.day,e.month=0):e.month>11&&(t=e.month-11,e.month=11),i=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second),i.setDate(i.getDate()+r),i.setMonth(i.getMonth()+t),n.toOADate(i)},e.getTimeDefaultFormat=function(e,t){var n=this,r=e-t,i="d";return r>2*n.tmInc.year?i="yyyy":r>n.tmInc.year?i="MMM yy":r>3*n.tmInc.month?i="MMM":r>2*n.tmInc.week?i="MMM d":r>2*n.tmInc.day?i="ddd d":r>n.tmInc.day?i="ddd H:mm":r>n.tmInc.hour?i="H:mm":r>=1e3&&(i="H:mm:ss"),i},e.niceTimeUnit=function(e,t){var n=this,r=e;return r=n.niceTimeSpan(r,t),r},e.niceTimeSpan=function(e,t){var n=this,r=n.manualTimeInc(t),i=0,s=0;i=Math.ceil(e);if(i===0)return n.timeSpanFromTmInc(r);s=1;if(r<n.tmInc.minute){if(i<n.tmInc.minute){s=n.getNiceInc([1,2,5,10,15,30],i,r);if(s!==0)return s}r=n.tmInc.minute}if(r<n.tmInc.hour){if(i<n.tmInc.hour){s=n.getNiceInc([1,2,5,10,15,30],i,r);if(s!==0)return s}r=n.tmInc.hour}if(r<n.tmInc.day){if(i<n.tmInc.day){s=n.getNiceInc([1,3,6,12],i,r);if(s!==0)return s}r=n.tmInc.day}if(r<n.tmInc.month){if(i<n.tmInc.month){s=n.getNiceInc([1,2,7,14],i,r);if(s!==0)return s}r=n.tmInc.month}if(r<n.tmInc.year){if(i<n.tmInc.year){s=n.getNiceInc([1,2,3,4,6],i,r);if(s!==0)return s}r=n.tmInc.year}return s=100*n.tmInc.year,i<s&&(s=n.getNiceInc([1,2,5,10,20,50],i,r),s===0&&(s=100*n.tmInc.year)),s},e.getNiceInc=function(e,t,n){var r=0,i=0,s=e.length;for(r=0;r<s;r++){i=e[r]*n;if(t<=i)return i}return 0},e.timeSpanFromTmInc=function(e){var t=1e3,n=e,r=1;if(e!==this.tmInc.maxtime)if(e>this.tmInc.tickf1)t=e;else{e+=7;while(n>0)r*=10,n--;t=r}return t},e.manualTimeInc=function(e){var t=this,n=t.tmInc.second;return!e||e.length===0?n:(e.indexOf("s")>=0?n=t.tmInc.second:e.indexOf("m")>=0?n=t.tmInc.minute:e.indexOf("h")>=0||e.indexOf("H")>=0?n=t.tmInc.hour:e.indexOf("d")>=0?n=t.tmInc.day:e.indexOf("M")>=0?n=t.tmInc.month:e.indexOf("y")>=0&&(n=t.tmInc.year),n)},e.niceTickNumber=function(e){if(parseFloat(e)===0)return e;e<0&&(e=-e);var t=Math.log(e)/Math.log(10),n=parseInt(this.signedFloor(t).toString(),10),r=e/Math.pow(10,n),i=10;return r<=1?i=1:r<=2?i=2:r<=5&&(i=5),i*Math.pow(10,n)},e.niceNumber=function(e,t,n){if(parseFloat(e)===0)return e;e<0&&(e=-e);var r=e/Math.pow(10,t),i=10;return n?r<1.5?i=1:r<3?i=2:r<7&&(i=5):r<=1?i=1:r<=2?i=2:r<=5&&(i=5),i*Math.pow(10,t)},e.nicePrecision=function(e){if(e<=0||typeof e!="number")return 0;var t=Math.log(e)/Math.log(10),n=parseInt(this.signedFloor(t).toString(),10),r=e/Math.pow(10,n);return r<3&&(n=-n+1),n},e.precCeil=function(e,t){var n=Math.pow(10,e),r=t/n;return r=Math.ceil(r),r*n},e.precFloor=function(e,t){var n=Math.pow(10,e),r=t/n;return r=Math.floor(r),r*n},e.signedCeiling=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.signedFloor=function(e){return e<0?Math.ceil(e):Math.floor(e)},e.powerTransform=function(e,t,n,r,i){var s,o=n[0]<0?-1:1;for(var u=0;u<e;u++){if(t[u]<=0)throw"Incompatible data: x values should be positive.";s=o*n[u];if(s<=0)throw"Incompatible data: y values must all have the same sign.";r[u]=Math.log(t[u]),i[u]=Math.log(s)}return o},e.expoTransform=function(e,t,n,r,i){var s,o=n[0]<0?-1:1;for(var u=0;u<e;u++)r[u]=t[u];for(var u=0;u<e;u++){s=o*n[u];if(s<=0)throw"Incompatible data: for expo fit all Y values must have the same sign";i[u]=Math.log(s)}return o},e.logTransform=function(e,t,n,r,i){var s,o=t[0]<0?-1:1;for(var u=0;u<e;u++)i[u]=n[u];for(var u=0;u<e;u++){s=o*t[u];if(s<=0)throw"Incompatible data: for log fit all Y values must have the same sign";r[u]=Math.log(s)}return o},e.polyCreateBasisFunctions=function(e,t,n,r,i){for(var s=0;s<e;s++){i?(r[s][0]=n[s],t>1&&(r[s][1]=n[s]*n[s])):(r[s][0]=1,r[s][1]=n[s]);for(var o=2;o<t;o++)r[s][o]=n[s]*r[s][o-1]}},e.powerCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=1,n[r][1]=t[r]},e.expoCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=1,n[r][1]=t[r]},e.logCreateBasisFunctions=function(e,t,n){for(var r=0;r<e;r++)n[r][0]=t[r],n[r][1]=1},e.fourierCreateBasisFunctions=function(e,t,n,r){for(var i=0;i<e;i++){if(r[i]===null||r[i]===undefined)r[i]=new Array;r[i][0]=1,t>1&&(r[i][1]=Math.cos(n[i])),t>2&&(r[i][2]=Math.sin(n[i]));for(var s=3;s<t;s++){var o=(s+1)/2;s%2==1?r[i][s]=Math.cos(o*n[i]):r[i][s]=Math.sin(o*n[i])}}},e.createBasis=function(t,n,i,s,o,u,a,f){if(t<2)throw"Incompatible data: Less than 2 data points.";if(s<1)throw"Incompatible data: Less than 1 coefficient in the fit";if(s>t)throw"Incompatible data: Number of data points less than number of terms";for(var l=0;l<s;l++)o[l]=0;switch(a){case r.strPolynom:e.polyCreateBasisFunctions(t,s,n,u,f);break;case r.strPower:e.powerCreateBasisFunctions(t,n,u);break;case r.strExponent:e.expoCreateBasisFunctions(t,n,u);break;case r.strLogarithmic:e.logCreateBasisFunctions(t,n,u);break;case r.strFourier:e.fourierCreateBasisFunctions(t,s,n,u)}},e.solveGauss=function(e,t,n){var r=e.length,i,s,o,u,a,f=!0;if(t.length<r||e[0].length<r+1)throw"Dimension of matrix is not correct.";for(i=0;i<r;i++){o=i,u=Math.abs(e[i][i]);for(s=i+1;s<r;s++)u<Math.abs(e[s][i])&&(u=Math.abs(e[s][i]),o=s);if(!(Math.abs(u)>n)){f=!1;break}for(s=i;s<=r;s++)a=e[i][s],e[i][s]=e[o][s],e[o][s]=a;for(o=i+1;o<r;o++){a=e[o][i]/e[i][i],e[o][i]=0;for(s=i+1;s<=r;s++)e[o][s]-=a*e[i][s]}}if(f)for(i=r-1;i>=0;i--){t[i]=e[i][r];for(s=i+1;s<r;s++)t[i]-=e[i][s]*t[s];t[i]=t[i]/e[i][i]}return f},e.normalizeAndSolveGauss=function(t,n,r,i,s){var o=new Array(n);for(var u=0;u<n;u++)o[u]=e.createArray(n+1,0);e.computeNormalEquations(t,n,r,i,o);if(!e.solveGauss(o,s,0))throw"Incompatible data: No solution"},e.computeNormalEquations=function(e,t,n,r,i){var s;for(var o=0;o<t;o++){s=0;for(var u=0;u<e;u++)s+=r[u]*n[u][o];i[o][t]=s;for(var a=o;a<t;a++){s=0;for(var u=0;u<e;u++)s+=n[u][a]*n[u][o];i[a][o]=s,i[o][a]=s}}},e.solveLeastSquares=function(t,n,i,s,o,u,a){var f=0,l,c,h=new Array(t);if(u==r.strExponent||u==r.strLogarithmic||u==r.strPower){s=2,l=e.createArray(t,0),c=e.createArray(t,0);switch(u){case r.strPower:f=e.powerTransform(t,n,i,l,c);break;case r.strExponent:f=e.expoTransform(t,n,i,l,c);break;case r.strLogarithmic:f=e.logTransform(t,n,i,l,c)}}else l=n,c=i;a&&u==r.strPolynom&&(f=o[0],s--);for(var p=0;p<t;p++)h[p]=e.createArray(s,0);e.createBasis(t,l,c,s,o,h,u,a),e.normalizeAndSolveGauss(t,s,h,c,o);switch(u){case r.strPower:o[0]=f*Math.exp(o[0]);break;case r.strExponent:o[0]=f*Math.exp(o[0]);break;case r.strLogarithmic:o[1]=f*Math.exp(o[1]/o[0]);break;case r.strPolynom:if(a){for(var p=o.length-1;p>0;p--)o[p]=o[p-1];o[0]=f}}},e.aproximate=function(e,t,n){var i=0;switch(e){case r.strPolynom:var s=1;for(var o=0;o<t.length;o++)o>0&&(s*=n),i+=t[o]*s;break;case r.strPower:i=t[0]*Math.pow(n,t[1]);break;case r.strExponent:i=t[0]*Math.exp(n*t[1]);break;case r.strLogarithmic:i=t[0]*Math.log(n*t[1]);break;case r.strFourier:i=t[0];for(var o=1;o<t.length;o++){var u=(o+1)/2;o%2==1?i+=t[o]*Math.cos(u*n):i+=t[o]*Math.sin(u*n)}}return i},e.processSimpleValues=function(e,t,n){var i=e.length,s=e[0],o=s,u=t[0],a=u,f=0,l=0,c=[],h=[];for(var p=0;p<i;p++)s>e[p]&&(s=e[p]),o<e[p]&&(o=e[p]),u>t[p]&&(u=t[p]),a<t[p]&&(a=t[p]),f+=e[p],l+=t[p];f=f*1/i,l=l*1/i;switch(n){case r.strMinX:c=[].concat([s,s]),h=[].concat([u,a]);break;case r.strMaxX:c=[].concat([o,o]),h=[].concat([u,a]);break;case r.strMinY:c=[].concat([s,o]),h=[].concat([u,u]);break;case r.strMaxY:c=[].concat([s,o]),h=[].concat([a,a]);break;case r.strAverageX:c=[].concat([f,f]),h=[].concat([u,a]);break;case r.strAverageY:c=[].concat([s,o]),h=[].concat([l,l])}return{x:c,y:h}},e.getNumberSeriesData=function(e,t,r,i){var o=s.getNumberValues(e),u=s.getNumberValues(t),a=[],f=[];return n.each(t,function(e,t){if(e===o.length)return!1;if(s.isHolefunction(t,i)){if(r==="excludeHole")return!0;if(!!s.isHolefunction(i,undefined)||t!==i)return!0;if(o[e]===undefined)return!1;a.push(o[e]),f.push(u[e])}else a.push(o[e]),f.push(u[e])}),{x:a,y:f}},e.createArray=function(e,t){var n=[];for(var r=0;r<e;r++)n.push(t);return n},e.processValues=function(t,n,i,s,o,a,f,l,c,h,p){var d,v,m,g,y=[],b=[],w,E;if(l===null||l===undefined)l=2;else{if(typeof l!="number")return;if(l<1)return}if(c===null||c===undefined)c=100;else{if(typeof c!="number")return;if(c<1)return}if(i===null||i===undefined)i=r.strPolynom;if(!u.validateType(i))return;E=e.getNumberSeriesData(t,n,h,p);if(!E.x.length||!E.y.length)return;if(i==r.strMinX||i==r.strMaxX||i==r.strMinY||i==r.strMaxY||i==r.strAverageX||i==r.strAverageY)return e.processSimpleValues(E.x,E.y,i);m=E.x.length;for(var S=0;S<m;S++)S==0?(d=E.x[S],v=d):(d>E.x[S]&&(d=E.x[S]),v<E.x[S]&&(v=E.x[S]));l=Math.min(l,m),w=e.createArray(l,0),e.solveLeastSquares(m,E.x,E.y,l,w,i,!1),!s&&d<a&&(d=a),!o&&v>f&&(v=f),g=(v-d)/(c-1);for(var S=0;S<c;S++){var x=d+g*S;y.push(x),b.push(e.aproximate(i,w,x))}return{x:y,y:b}},e.tmInc={tickf7:-7e3,tickf6:-6e3,tickf5:-5e3,tickf4:-4e3,tickf3:-3e3,tickf2:-2e3,tickf1:-1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month28:24192e5,month29:25056e5,month30:2592e6,month:26784e5,year:31536e6,maxtime:2147483647},e}();t.ChartDataUtil=o;var u=function(){function e(e,t){this.options=t,this.element=e}return e.prototype.render=function(){var t=this.element,r=this.options,i=r.wijCSS,s=r.bounds,o=r.widgetName,u=r.canvas,a=r.animation,f=r.seriesTransition,l=r.mouseDown,c=r.mouseUp,h=r.mouseOver,p=r.mouseOut,d=r.mouseMove,v=r.click,m=[],g=[],y=[],b=r.disabled,w=u.set(),E=r.aniPathsAttr,S=[],x,T=t.data("fields")||{},N=[],C=r.widget,k=r.extremeValue,L={enable:!1,left:-10,top:-10,right:10,bottom:10};this.widget=C,this.renderTrendLineChart(r,S,E,g,y,w,m,N),!r.axis.x.autoMax&&r.axis.x.max<k.txx&&(L.enable=!0,L.right=0),!r.axis.x.autoMin&&r.axis.x.min>k.txn&&(L.enable=!0,L.left=0),!r.axis.y.autoMax&&r.axis.y.max<k.tyx&&(L.enable=!0,L.top=0),!r.axis.y.autoMin&&r.axis.y.min>k.tyn&&(L.enable=!0,L.bottom=0),a.enabled||f.enabled?e.playAnimation(a.duration,a.easing,f,w,s,g,E,L,r.axis,k):L.enable&&e.setClipRect(L,w,s),E.length=0,n.each(S,function(e,t){E.push(t)}),e.unbindLiveEvents(t,o,i),e.bindLiveEvents(t,o,l,c,h,p,d,v,b,i,!1),x={trendLines:g,trendLineShadows:y,trendLineAnimationSet:w},T.chartElements||(T.chartElements={}),T.seriesEles=N,n.extend(!0,T.chartElements,x),t.data("fields",T)},e.setClipRect=function(e,t,n){var r=n.endX-n.startX-e.left+e.right,i=n.endY-n.startY-e.top+e.bottom;t.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",n.startX+e.left,n.startY+e.top,r,i))},e.playAnimation=function(t,n,r,i,s,o,u,a,f,l){a||(a={enable:!1,left:-10,top:-10,right:10,bottom:10},!f.x.autoMax&&f.x.max<l.txx&&(a.enable=!0,a.right=0),!f.x.autoMin&&f.x.min>l.txn&&(a.enable=!0,a.left=0),!f.y.autoMax&&f.y.max<l.tyx&&(a.enable=!0,a.top=0),!f.y.autoMin&&f.y.min>l.tyn&&(a.enable=!0,a.bottom=0)),u&&u.length&&r.enabled&&(t=r.duration,n=r.easing),e.playHAnimation(t,n,i,s,o,a)},e.playHAnimation=function(e,t,r,i,s,o){n.each(s,function(e,t){t.tracker&&t.tracker.hide()});var u=o.enable,a=i.endX-i.startX-o.left+o.right,f=i.endY-i.startY-o.top+o.bottom;r.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",i.startX+o.left,i.startY+o.top,f)),r.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",i.startX+o.left,i.startY+o.top,a,f)},e,t,function(){this.tracker&&this.visible!==!1&&this.tracker.show();if(Raphael.vml&&!u){var e=null,t=null,r=this.node;r&&r.clipRect&&(e=this.attrs,delete e["clip-rect"],r.clipRect=null,t=n(r).parent(),t.before(r),t.remove(),this.attr(e),e.src&&e.src.length&&this.attr({src:e.src}),e.gradient&&e.gradient.length&&e.fill==="none"&&this.attr({fill:e.gradient}))}})},e.validateType=function(e){var t=!1;return e?(n.each(r,function(n,r){if(r===e)return t=!0,!1}),t):!0},e.renderSingleTrendLine=function(t,i,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x=a.x,T,N,C=!1,k,L,A,O,M,_,D=[],P=[];if(!t.isValid||!t.innerData)return;k=n.extend(!0,{display:"show",fitType:r.strPolynom,order:2,sampleCount:100,visible:!0},t),L=n.extend(!0,{stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},i);if(f!==undefined){O=[].concat(k.data.x),M=[].concat(k.data.y);try{_=o.processValues(O,M,k.fitType,x.autoMin,x.autoMax,x.min,x.max,k.order,k.sampleCount,k.display,f)}catch(H){return}O=_.x,M=_.y}else O=[].concat(t.innerData.x),M=[].concat(t.innerData.y);if(l.length<=p||c.enabled&&!h.enabled)C=!0;return C&&M.length>0&&(T=s.getFirstValidListValue(S?O:M),N=s.getLastValidListValue(S?O:M)),n.each(M,function(t,n){D=e.renderPoint(d,P,D,C,T,N,O[t],n,a,t,S)}),e.renderPath(v,d,k,m,g,u,y,D,b,P,L,p,w,a),A=m[m.length-1],E.push({path:A,shadowPath:g[g.length-1],isTrendline:!0}),A.tracker&&A.tracker.toFront(),A},e.prototype.renderTrendLineChart=function(t,r,i,s,o,u,a,f){var l=t.wijCSS,c=t.bounds,h=t.canvas,p=t.axis,d=t.animation,v=t.hole,m=t.seriesTransition,g=!1,y=t.seriesList,b=t.seriesStyles,w=t.seriesHoverStyles;n.each(y,function(t,n){e.renderSingleTrendLine(n,b[t],w[t],p,v,i,d,m,t,c,h,s,o,u,r,l,f)})},e.renderPath=function(t,r,o,u,a,f,l,c,h,p,d,v,m,g,y){var b,w,E,S,x,T,N,C,k=g.y.origin;C=r.endY,g&&g.y&&k!==null&&k!==undefined&&!isNaN(k)&&(C=e.calculatePoint(k,"y",g,r,y)),b=t.path(c.join(" ")),b.straight=p.join(" "),s.paintShadow(b,1,"#cccccc"),v===0&&(c.length>1?(w=c[1],E=c[c.length-2]):(w=r.startX,E=r.endX)),S=t.path(c.join(" ")),b.tracker=S,d["stroke-width"]?x=10+parseFloat(d["stroke-width"]):x=10,S.attr({"stroke-width":x,stroke:"#C0C0C0",opacity:.01}),n.wijraphael.addClass(n(S.node),Raphael.format("{0} {1} {2}",m.canvasObject,m.trendlineElement,m.trendlineTracker)),n(S.node).data("owner",n(b.node)),N=n.extend(!0,{},d),N.fill&&delete N.fill,b.wijAttr(N),f.fill&&delete f.fill,h.push({path:n.extend(!0,{},b.attr())}),u||(u=[]),u.push(b),b.shadow&&(a[v]=b.shadow),l.push(b);if(!o.visible||o.display==="hide")b.hide(),b.tracker&&b.tracker.hide(),b.shadow&&b.shadow.hide(),b.visible=!1;o.index=v,o.type=i.strTrendline,o.path=b,o.lineStyle=d,o.lineHoverStyle=f,n.wijraphael.addClass(n(b.node),Raphael.format("{0} {1}",m.canvasObject,m.trendlineElement)),n(b.node).data("wijchartDataObj",o)},e.calculatePoint=function(e,t,n,r,i){var s=n[t].min,o=n[t].max,u,a,f,l;return i&&(t==="x"?t="y":t="x"),t==="x"?(a=(r.endX-r.startX)/(o-s),r.startX+(e-s)*a):(a=(r.endY-r.startY)/(o-s),r.endY-(e-s)*a)},e.renderPoint=function(t,n,r,i,s,o,u,a,f,l,c){var h=(c?t.endX:t.endY)-(c?t.startX:t.startY),p=c?f.y.min:f.x.min,d=c?f.x.min:f.y.min,v=c?f.y.max:f.x.max,m=c?f.x.max:f.y.max,g=h/(m-d),y=0,b,w,E;return y=e.calculatePoint(u,"x",f,t,c),b=e.calculatePoint(a,"y",f,t,c),c&&(w=y,y=b,b=w),i&&(E=s+(o-s)/(v-p)*((c?a:u)-p),E=(c?t.endX:t.endY)-(E-d)*g,n.push(l?"L":"M"),n.push(y),n.push(E)),r=r.concat([l?"L":"M",y,b]),r},e.bindLiveEvents=function(e,t,r,s,o,u,a,f,l,c,h){var p="",d={element:e,mousedown:function(t){if(l)return;var i=n(t.target),s,o=null;i.data("owner")&&(i=i.data("owner")),s=i.data("wijchartDataObj"),r.call(e,t,s)},mouseup:function(t){if(l)return;var r=n(t.target),i,o=null;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),s.call(e,t,i)},mouseover:function(t){if(l)return;var r=n(t.target),s,u=null,a;r.data("owner")&&(r=r.data("owner")),s=r.data("wijchartDataObj"),!h&&s&&s.type===i.strTrendline&&(a=s.path,a&&!a.removed&&s.lineHoverStyle&&a.wijAttr(s.lineHoverStyle)),o.call(e,t,s)},mouseout:function(t){if(l)return;var r=n(t.target),s,o=null,a;r.data("owner")&&(r=r.data("owner")),s=r.data("wijchartDataObj"),!h&&s&&s.type===i.strTrendline&&(a=s.path,a&&!a.removed&&s.lineStyle&&(s.lineStyle.fill&&delete s.lineStyle.fill,a.wijAttr(s.lineStyle))),u.call(e,t,s)},mousemove:function(t){if(l)return;var r=n(t.target),i,s=null;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),a.call(e,t,i)},click:function(t){if(l)return;var r=n(t.target),i,s=null;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),f.call(e,t,i)}};n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(p="wij"),e.on(p+"mousedown."+t,"."+c.trendlineElement,n.proxy(d.mousedown,d)).on(p+"mouseup."+t,"."+c.trendlineElement,n.proxy(d.mouseup,d)).on(p+"mouseover."+t,"."+c.trendlineElement,n.proxy(d.mouseover,d)).on(p+"mouseout."+t,"."+c.trendlineElement,n.proxy(d.mouseout,d)).on(p+"mousemove."+t,"."+c.trendlineElement,n.proxy(d.mousemove,d)).on(p+"click."+t,"."+c.trendlineElement,n.proxy(d.click,d))},e.unbindLiveEvents=function(e,t,n){e.off("."+t,"."+n.trendlineElement)},e.paintLegendIcon=function(e,t,r,i,s,o,u,a,f,l,c){var h,p;return p=o.path(Raphael.format("M{0},{1}L{2},{3}",e,t+i/2,e+r,t+i/2)),n(p.node).data("legendIndex",f).data("index",l),a.push(p),s&&(u&&u.height&&(h=u.height),p.attr(n.extend(!0,{},s,{"stroke-width":h}))),n.wijraphael.addClass(n(p.node),c),p},e.showSerieEles=function(e){e.path&&(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.tracker&&e.path.tracker.show())},e.hideSerieEles=function(e){e.path&&(e.path.hide(),e.path.shadow&&e.path.shadow.hide(),e.path.tracker&&e.path.tracker.hide())},e.getSeriesChartType=function(e){if(!e)return;return e.isTrendline?i.strTrendline:e.type},e}();t.TrendlineRender=u,Raphael.fn.closeBtn=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=this.set(),s=["M",e-r,t-r,"L",e+r,t+r,"M",e-r,t+r,"L",e+r,t-r],o=this.path(s.join(" ")),u=null;return o.attr({cursor:"pointer"}),i.push(o),u=this.rect(e-n,t-n,n*2,n*2),u.attr({fill:"white","fill-opacity":0,cursor:"pointer",stroke:"none"}),i.push(u),i};var a=function(){function e(e,t,r){this.options={content:"",contentStyle:{},title:"",titleStyle:{},style:{fill:"white","fill-opacity":.5},closeBehavior:"auto",mouseTrailing:!0,triggers:"hover",animated:"fade",showAnimated:null,hideAnimated:null,duration:500,showDuration:500,hideDuration:500,easing:null,showEasing:null,hideEasing:null,showDelay:150,hideDelay:150,relativeTo:"mouse",compass:"east",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"black"},calloutLength:12,calloutOffset:0,calloutAnimation:{easing:null,duration:500},windowCollisionDetection:"flip",calloutSide:null,width:null,height:null,beforeShowing:null},this.paper=e,this.targets=t,n.extend(this.options,r),this.init()}return e.prototype.init=function(){var e=this.options;n.browser.msie&&document.documentMode<=8&&(e.style.fill&&(this.fillColorForIE8=s.toHexColor(e.style.fill)),e.style.stroke&&(this.strokeColorForIE8=s.toHexColor(e.style.stroke))),this.calloutOffset=e.calloutOffset,this.offsetLength=0,this.gapLength=e.calloutLength/2,this.width=e.width,this.height=e.height,this.offset={x:0,y:0},this.toolTipShown=!1,this.targets&&this._bindLiveEvent(this.targets),this.selector&&this._bindLiveEventBySelector(this.selector),this.isContentHtml=!1,n(this.paper.canvas).wijtooltip&&(this.isContentHtml=e.isContentHtml),this._initializeHTMLToolTips()},e.prototype._initializeHTMLToolTips=function(){var e=this;if(!this.isContentHtml)return;var t=this.options,r,i,s,o,u,a,f,l,c;this.toolTipTarget=n(this.paper.canvas),l=this._getHTMLTooltipPositionMY(t.compass),f=t.closeBehavior==="sticky"?"sticky":"none",r=t.showAnimated||t.animated,i=t.showDuration||t.duration,s=t.showEasing||t.easing,o=t.hideAnimated||t.animated,u=t.hideDuration||t.duration,a=t.hideEasing||t.easing,c={triggers:"custom",closeBehavior:f,showCallout:t.showCallout,position:{my:l,at:"center center"},animation:null,showDelay:t.showDelay,hideDelay:t.hideDelay,showAnimation:{animated:r,duration:i,easing:s},hideAnimation:{animated:o,duration:u,easing:a},shown:function(t,n){e._setHTMLToolTipMovingDuration(),e.toolTipShown=!0},hidden:function(t,n){e._revoverHTMLToolTipShowingDuration(),e.toolTipShown=!1}},this.toolTipTarget.wijtooltip(c)},e.prototype._setHTMLToolTipMovingDuration=function(){if(!this.isContentHtml)return;var e=this.options,t=this.toolTipTarget,r;this.toolTipShown||(r=t.wijtooltip("option","showAnimation"),r=n.extend(r,{duration:250}),t.wijtooltip("option","showAnimation",r))},e.prototype._revoverHTMLToolTipShowingDuration=function(){if(!this.isContentHtml)return;var e=this.options,t=this.toolTipTarget,r;this.toolTipShown&&(r=t.wijtooltip("option","showAnimation"),r=n.extend(r,{duration:e.showDuration||e.duration}),t.wijtooltip("option","showAnimation",r))},e.prototype._getHTMLTooltipPositionMY=function(e){var t="center bottom";switch(e){case"north":t="center bottom";break;case"south":t="center top";break;case"east":t="left center";break;case"west":t="right center";break;case"eastnorth":t="bottom left";break;case"northeast":t="left bottom";break;case"westnorth":t="bottom right";break;case"northwest":t="right bottom";break;case"eastsouth":t="top left";break;case"southeast":t="left top";break;case"westsouth":t="top right";break;case"southwest":t="right top"}return t},e.prototype._getShowPoint=function(e,t){var n=e.getBBox(),r={x:0,y:0};switch(t.toLowerCase()){case"east":r.x=n.x+n.width,r.y=n.y+n.height/2;break;case"eastnorth":r.x=n.x+n.width,r.y=n.y;break;case"eastsouth":r.x=n.x+n.width,r.y=n.y+n.height;break;case"west":r.x=n.x,r.y=n.y+n.height/2;break;case"westnorth":r.x=n.x,r.y=n.y;break;case"westsouth":r.x=n.x,r.y=n.y+n.height;break;case"north":r.x=n.x+n.width/2,r.y=n.y;break;case"northeast":r.x=n.x+n.width,r.y=n.y;break;case"northwest":r.x=n.x,r.y=n.y;break;case"south":r.x=n.x+n.width/2,r.y=n.y+n.height;break;case"southeast":r.x=n.x+n.width,r.y=n.y+n.height;break;case"southwest":r.x=n.x,r.y=n.y+n.height}return r},e.prototype._clearIntentTimer=function(e){e&&(window.clearTimeout(e),e=null)},e.prototype._removeSVGTooltip=function(t){var n=this,r=this,i=this.elements,s=r.options,o,u,a;if(i){if(s.hideAnimated||s.animated)o=s.hideAnimated,o||(o=s.animated),o&&e.animations[o]&&(a={animated:o,duration:s.hideDuration||s.duration,easing:s.hideEasing||s.easing,context:i,show:!1},e.animations[o](a));u=s.hideDuration||s.duration,t&&(u=t),window.setTimeout(function(){var e,t;n.content&&(n.content.wijRemove(),n.content=null),n.title&&(n.title.wijRemove(),n.title=null),n.container&&(n.container.wijRemove(),n.container=null);if(n.closeBtn){for(e=0,t=n.closeBtn.length;e<t;e++)n.closeBtn[e].unclick();n.closeBtn.wijRemove(),n.closeBtn=null}n.callout&&(n.callout.wijRemove(),n.callout=null),r.lastPoint=null,i=null},u)}},e.prototype._removeHTMLTooltip=function(){var e=this.options;e.closeBehavior!=="sticky"&&this.toolTipTarget.wijtooltip("hide")},e.prototype._removeTooltip=function(e){this.isContentHtml?this._removeHTMLTooltip():this._removeSVGTooltip(e)},e.prototype._clearTimers=function(){this.intentShowTimer&&this._clearIntentTimer(this.intentShowTimer),this.intentHideTimer&&this._clearIntentTimer(this.intentHideTimer)},e.prototype._hide=function(e){var t=this;t._clearTimers(),t.options.hideDelay?t.intentHideTimer=window.setTimeout(function(){t._removeTooltip()},t.options.hideDelay):t._removeTooltip()},e.prototype._convertCompassToPosition=function(e){var t="",n={x:0,y:0};switch(e.toLowerCase()){case"east":t="right-middle",n.x=2,n.y=0;break;case"eastnorth":t="right-top",n.x=2,n.y=-2;break;case"eastsouth":t="right-bottom",n.x=2,n.y=2;break;case"west":t="left-middle",n.x=-2,n.y=0;break;case"westnorth":t="left-top",n.x=-2,n.y=-2;break;case"westsouth":t="left-bottom",n.x=-2,n.y=2;break;case"north":t="top-middle",n.x=0,n.y=-2;break;case"northeast":t="top-right",n.x=2,n.y=-2;break;case"northwest":t="top-left",n.x=-2,n.y=-2;break;case"south":t="bottom-middle",n.x=0,n.y=2;break;case"southeast":t="bottom-right",n.x=2,n.y=2;break;case"southwest":t="bottom-left",n.x=-2,n.y=2}return this.offset=n,t},e.prototype._getCalloutArr=function(e,t){var n=[],r=this.options,i=r.compass;r.calloutSide&&(i=r.calloutSide);switch(i.toLowerCase()){case"east":case"eastsouth":case"eastnorth":n=["M",e.x+t,e.y+t,"l",-t,-t,"l",t,-t,"Z"];break;case"west":case"westsouth":case"westnorth":n=["M",e.x-t,e.y-t,"l",t,t,"l",-t,t,"Z"];break;case"north":case"northeast":case"northwest":n=["M",e.x-t,e.y-t,"l",t,t,"l",t,-t,"Z"];break;case"south":case"southeast":case"southwest":n=["M",e.x-t,e.y+t,"l",t,-t,"l",t,t,"Z"]}return n},e.prototype._getFuncText=function(e,t){if(n.isFunction(e)){var r=null,i,s={target:null,fmt:e},o;if(t&&t.target){o=t.target;if(!o.raphael||!o.raphaelid)o=o.parentNode;o.raphael&&o.raphaelid?(i=this.paper.getById(o.raphaelid),s.target=i):s.target=t.target}return r=n.proxy(s.fmt,s),r().toString()}return e},e.prototype._translateCallout=function(e){var t=this.options,n=this.width,r=this.height,i=this.gapLength,s=this.offsetLength,o=this.calloutOffset,u=this.tooltipElements.callout;if(t.calloutSide){var a=i||s;switch(t.calloutSide){case"south":case"north":e?u.animate({translation:-n/2+a+o+",0"},e):u.translate(-n/2+a+o,0);break;case"east":case"west":e?u.animate({translation:"0,"+(-r/2+a+o)},e):u.translate(0,-r/2+a+o)}}},e.replacer=function(e,t,n){var r=n,i=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return t.replace(i,function(e,t,n,i,s){t=t||i,r&&(r[t]!=="string"&&(r=r[t]),typeof r=="function"&&s&&(r=r()))}),r=(r===null||r===n?e:r).toString(),r},e.fill=function(t,n){var r=/\{([^\}]+)\}/g;return String(t).replace(r,function(t,r){return e.replacer(t,r,n)})},e.prototype._createPath=function(t,n,r){var i=n.split("-"),s=5,o=r.getBBox(),u=this.options,a=u.padding,f=this.gapLength,l=this.offsetLength,c=a&&!isNaN(a)?parseInt(a):0,h=Math.round(o.width+c*2),p=Math.round(o.height+c*2),d=Math.round(o.x-c)-s,v=Math.round(o.y-c)-s,m=0,g=0,y=0,b=0,w=null,E=null,S=null;u.width&&(h=h>u.width?h:u.width),u.height&&(p=p>u.height?p:u.height),this.width=h,this.height=p,m=Math.min(p/4,h/4,f),l&&(l=Math.min(p/4,h/4,l)),l?(g=l,w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{offset},0,-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{offset},0,{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom},0-{offset},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},0,{offset},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}):w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},E=[{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:0,right:h-m*2-g*2,top:0,bottom:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:h/2-m-g,right:h/2-m-g,top:p/2-m-g,bottom:p/2-m-g,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,right:0,left:h-m*2-g*2,bottom:0,top:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2}][i[1]==="middle"?1:(i[1]==="left"||i[1]==="top"?1:0)*2],S=this.paper.path(e.fill(w[i[0]],E));switch(i[0]){case"top":y=t.x-(d+s+E.left+m+l),b=t.y-(v+s+p+s+m+l);break;case"bottom":y=t.x-(d+s+E.left+m+l),b=t.y-(v-m-l);break;case"left":y=t.x-(d+s+h+s+m+l),b=t.y-(v+s+E.top+m+l);break;case"right":y=t.x-(d-m-g),b=t.y-(v+s+E.top+m+g)}return S.translate(y,b),r.transform(Raphael.format("...t{0},{1}",y,b)),S},e.prototype._isWindowCollision=function(e,t,r,i,s,o,u){var a=e.getBBox(),f=0,l=t.toLowerCase(),c=a.x+s,h=a.y+o,p=this.paper.width,d=this.paper.height,v=r,m=i,g=e.attr("stroke-width"),y=u===!0||u==="flip";return Raphael.vml&&(p=n(this.paper.canvas).width(),d=n(this.paper.canvas).height()),c-g<0&&(y?l.toLowerCase().indexOf("west")===-1?c+a.width/2+a.width-r<=p&&(f++,l=l.toLowerCase()+"east",v=0-r):c+a.width+a.width-r<=p&&(f++,l=l.toLowerCase().replace("west","east"),v=0-r):(f++,v=0-c+g+r)),h-g<0&&(y?l.toLowerCase().indexOf("north")===-1?h+a.height/2+a.height-i<=d&&(f++,l=l.toLowerCase()+"south",m=0-i):h+a.height+a.height-i<=d&&(f++,l=l.toLowerCase().replace("north","south"),m=0-i):(f++,m=0-h+g+i)),c+a.width+g>p&&(y?l.toLowerCase().indexOf("east")===-1?c-a.width/2-r>=0&&(f++,l=l.toLowerCase()+"west",v=0-r):c-a.width-r>=0&&(f++,l=l.toLowerCase().replace("east","west"),v=0-r):(f++,v=p-(c+a.width+g)+r)),h+a.height+g>d&&(y?l.toLowerCase().indexOf("south")===-1?h-a.height/2-i>=0&&(f++,l=l.toLowerCase()+"north",m=0-i):h-a.height-i>=0&&(f++,l=l.toLowerCase().replace("south","north"),m=0-i):(f++,m=d-(h+a.height+g)+i)),f?{compass:l,offsetX:v,offsetY:m}:!1},e.prototype._createHTMLTooltipEles=function(e,t,n,r,i,s,o){var u=this.options,a,f,l=this.toolTipTarget,c,h,p,d,v="",m="",g;f=this._getPointOffset(i),c={x:0,y:0},c.x=l.parent().offset().left,c.y=l.parent().offset().top,a={},a.x=e.x+c.x+f.x+s,a.y=e.y+c.y+f.y+o,h="",t&&t.length>0&&(p=t.replace(/(?:\r\n|\n|\r)/g,"<br>"),u.titleStyle&&(v="color:"+u.titleStyle.fill+";font-size:"+u.titleStyle["font-size"]),h+="<div style='"+v+"'>"+p+"</div>"),n&&n.length>0&&(d=n.replace(/(?:\r\n|\n|\r)/g,"<br>"),u.contentStyle&&(m="color:"+u.contentStyle.fill+";font-size:"+u.contentStyle["font-size"]+";font-family:"+u.contentStyle["font-family"]),h+="<div style='"+m+"'>"+d+"</div>"),l.wijtooltip("option","content",h),l.wijtooltip("showAt",a)},e.prototype._getPointOffset=function(e){var t=2,n={x:0,y:0};switch(e){case"north":n.x=0,n.y=-t;break;case"south":n.x=0,n.y=t;break;case"east":n.x=t,n.y=0;break;case"west":n.x=-t,n.y=0;case"northeast":case"eastnorth":n.x=t,n.y=-t;break;case"northwest":case"westnorth":n.x=-t,n.y=-t;break;case"southeast":case"eastsouth":n.x=t,n.y=t;break;case"southwest":case"westsouth":n.x=-t,n.y=t}return n},e.prototype._createSVGTooltipEles=function(t,r,i,s,o,u,a){var f=this,l,c,h,p=this.paper.set(),d=null,v=null,m=this.options,g=this.closeBtnLength,y=this.calloutOffset,b=null,w=0,E=0,S=250,x=0,T=0,N,C={x:t.x,y:t.y},k=this.offset,L=null,A=null;n.wijraphael.clearRaphaelCache(),h=this._convertCompassToPosition(o),C.x+=u+k.x,C.y+=a+k.y,this.elements=this.paper.set(),this.title&&(n.each(this.title,function(e,t){n(t.node).unbind(".Rtooltip")}),this.title.wijRemove()),r&&r.length>0?(this.title=this.paper.htmlText(-1e3,-1e3,r,m.titleStyle),this.elements.push(this.title),l=this.title.getBBox()):l={left:-1e3,top:-1e3,width:0,height:0},this.content&&(n.each(this.content,function(e,t){n(t.node).unbind(".Rtooltip")}),this.content.wijRemove()),i&&i.length>0?(this.content=this.paper.htmlText(-1e3,-1e3,i,m.contentStyle),this.elements.push(this.content),c=this.content.getBBox()):c={left:-1e3,top:-1e3,width:0,height:0};if(this.closeBtn){for(x=0,T=this.closeBtn.length;x<T;x++)this.closeBtn[x].unclick();this.closeBtn.wijRemove()}this.content&&this.content.transform(Raphael.format("T0,{0}",l.height/2+c.height/2)),this.title&&this.title.transform(Raphael.format("T0,{0}",0)),m.closeBehavior==="sticky"&&(this.closeBtn=this.paper.closeBtn(-1e3,-1e3,g),this.elements.push(this.closeBtn),m.width&&m.width>l.width+g*2&&m.width>c.width+g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",m.width-g,g)):l.width>=c.width-g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",l.width+g,g)):this.closeBtn.transform(Raphael.format("T{0},{1}",c.width-g,g)),n.each(this.closeBtn,function(e,t){var n=f;t.click(function(e){n._hide(e)})})),this.title&&(p.push(this.title),m.relatedElement&&this.title.insertBefore(m.relatedElement)),this.content&&(p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.closeBtn&&(p.push(this.closeBtn),m.relatedElement&&this.closeBtn.insertBefore(m.relatedElement)),m.showCallout||(this.gapLength=0);if(m.calloutSide||m.calloutFilled)this.gapLength=0,this.offsetLength=m.calloutLength/2,m.calloutSide&&(h=this._convertCompassToPosition(m.calloutSide));m.calloutSide&&p.length===0&&(this.content=this.paper.htmlText(-1e3,-1e3," "),p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.callout&&(n(this.callout.node).unbind(".Rtooltip"),this.callout.wijRemove()),this.container&&(n(this.container.node).unbind(".Rtooltip"),this.container.wijRemove());if(this.lastPoint){m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(this.lastPoint,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(this.lastPoint,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,C.x-this.lastPoint.x,C.y-this.lastPoint.y,s);if(N){this._createTooltipEles(t,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container),w=C.x-this.lastPoint.x,E=C.y-this.lastPoint.y,A=Raphael.format("...T{0},{1}",w,E),L=Raphael.animation({transform:A},S),this.container&&(m.showAnimated||m.animated?this.container.animate(L):this.container.attr("transform",A)),this.title&&(m.showAnimated||m.animated?this.title.animate(L):this.title.attr("transform",A)),this.content&&(m.showAnimated||m.animated?this.content.animate(L):this.content.attr("transform",A)),this.closeBtn&&(m.showAnimated||m.animated?this.closeBtn.animate(L):this.closeBtn.attr("transform",A)),this.callout&&(m.showAnimated||m.animated?this.callout.animate(L):this.callout.attr("transform",A))}else{m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(C,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(C,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,0,0,s);if(N){this._createTooltipEles(t,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container);if(m.showAnimated||m.animated)v=m.showAnimated,v||(v=m.animated),v&&e.animations[v]&&(b={animated:v,duration:m.showDuration||m.duration,easing:m.showEasing||m.easing,context:this.elements,show:!0},e.animations[v](b))}this.lastPoint=C,n.browser.msie&&document.documentMode<=8?this.container.attr(n.extend({},m.style,{fill:this.fillColorForIE8,stroke:this.strokeColorForIE8})):this.container.attr(m.style),m.relatedElement?(this.title&&this.title.insertBefore(m.relatedElement),this.content&&this.content.insertBefore(m.relatedElement),this.closeBtn&&this.closeBtn.insertBefore(m.relatedElement)):p.toFront()},e.prototype._createTooltipEles=function(e,t,n,r,i,s,o){this.isContentHtml?this._createHTMLTooltipEles(e,t,n,r,i,s,o):this._createSVGTooltipEles(e,t,n,r,i,s,o)},e.prototype._createTooltip=function(e,t){var r=null,i=null,s=null,o=null,u=this.options,a,f;if(n.isFunction(u.beforeShowing)){s=null,o={target:null,options:u,fmt:u.beforeShowing};if(t&&t.target){f=t.target;if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid?(a=this.paper.getById(f.raphaelid),o.target=a):(a=t.target,o.target=a)}s=n.proxy(o.fmt,o);if(s()===!1)return}r=u.title,i=u.content,r=this._getFuncText(r,t),i=this._getFuncText(i,t);if(!r&&!i)return;this._createTooltipEles(e,r,i,u.windowCollisionDetection,u.compass,u.offsetX,u.offsetY)},e.prototype._showAt=function(e,t){var n=this.options,r=this;this._clearTimers(),n.showDelay?this.intentShowTimer=window.setTimeout(function(){r._createTooltip(e,t)},n.showDelay):this._createTooltip(e,t)},e.prototype._show=function(e){var t=n(this.paper.canvas.parentNode).offset(),r=t.left,i=t.top,s=this.options,o=s.relativeTo,u={x:0,y:0},a=null,f=e.target;switch(o){case"mouse":u.x=e.pageX-r,u.y=e.pageY-i;break;case"element":if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid&&(a=this.paper.getById(f.raphaelid),u=this._getShowPoint(a,s.compass))}this._showAt(u,e)},e.prototype._bindEvent=function(e){var t=this.options,r=this;switch(t.triggers){case"hover":n(e.node).bind("mouseover.Rtooltip",function(e){r._show(e)}).bind("mouseout.Rtooltip",function(e){t.closeBehavior==="auto"&&r._hide(e)}),t.mouseTrailing&&t.relativeTo==="mouse"&&n(e.node).bind("mousemove.Rtooltip",function(e){r._show(e)});break;case"click":n(e.node).bind("click.Rtooltip",function(e){r._show(e)});break;case"custom":}},e.prototype._bindLiveEvent=function(e){var t,n;if(e)if(e.length)for(t=0,n=e.length;t<n;t++)this._bindEvent(e[t]);else this._bindEvent(e)},e.prototype._bindLiveEventBySelector=function(e){var t=this.options,n=this;if(e)switch(t.triggers){case"hover":e.on("mouseover.Rtooltip",function(e){n._show(e)}).on("mouseout.Rtooltip",function(e){t.closeBehavior==="auto"&&n._hide(e)}),t.mouseTrailing&&t.relativeTo==="mouse"&&e.on("mousemove.Rtooltip",function(e){n._show(e)});break;case"click":e.on("click.Rtooltip",function(e){n._show(e)});break;case"custom":}},e.prototype._unbindLiveEvent=function(e,t){var r,i;if(e)if(e.length)for(r=0,i=e.length;r<i;r++)n(e[r].node).unbind(".Rtooltip");else n(e.node).unbind(".Rtooltip");t&&t.off("Rtooltip").off(".Rtooltip")},e.prototype._destroy=function(){this._unbindLiveEvent(this.targets,this.selector),this._removeTooltip(0),this.isContentHtml&&n(this.paper.canvas).wijtooltip("destroy")},e.prototype.hide=function(){this._hide()},e.prototype.showAt=function(e,t){this._showAt(e,t)},e.prototype.resetCalloutOffset=function(e){var t=this.options,n=t.calloutOffset,r=t.calloutSide,i=t.calloutAnimation,s=this.tooltipElements;s.callout&&(r==="south"||r==="north"?s.callout.animate({translation:e-n+",0"},i.duration,i.easing):(r==="east"||r==="west")&&s.callout.animate({translation:"0,"+(e-n)},i.duration,i.easing)),t.calloutOffset=e},e.prototype.destroy=function(){this._destroy()},e.prototype.getOptions=function(){return this.options},e.prototype.setTargets=function(e){this.targets=e,this._bindLiveEvent(e)},e.prototype.setSelector=function(e){this.selector=e,this._bindLiveEventBySelector(e)},e.prototype.setOptions=function(e){n.extend(!0,this.options,e)},e.animations={fade:function(e){var t=e.context;e.show?(t.attr({opacity:0}),t.wijAnimate({opacity:1},e.duration,e.easing)):t.wijAnimate({opacity:0},e.duration,e.easing)}},e}();t.ChartTooltip=a,Raphael.fn.tooltip={animations:a.animations};var f=function(){function e(e){this.labels=[],this.crossLabels={},this.bBox=e}return e.prototype.push=function(e){var t=e.wijGetBBox();this.labels.push({ele:e,x:t.x,y:t.y,width:t.width,height:t.height,overlaps:[],bakBBox:t})},e.prototype.pushCross=function(e,t){var n,r,i,s,o;!this.crossLabels[Raphael.format("{0}-{1}",e,t)]&&!this.crossLabels[Raphael.format("{0}-{1}",t,e)]&&(n=this.labels[e],r=this.labels[t],this.crossLabels[Raphael.format("{0}-{1}",e,t)]={label1:n,label2:r,dx:this._getAdjust(n,r,"h"),dy:this._getAdjust(n,r,"v")})},e.prototype._detect=function(e,t){return(e.x+e.width>t.x&&e.x<t.x||t.x+t.width>e.x&&t.x<e.x)&&(e.y+e.height>t.y&&e.y<t.y||t.y+t.height>e.y&&t.y<e.y)},e.prototype._resetOverlaps=function(){this.crossLabels={}},e.prototype._detects=function(){var e=this.labels.length,t,n;for(var r=0;r<e;r++)for(var i=r+1;i<e;i++)t=this.labels[r],n=this.labels[i],this._detect(t,n)&&this.pushCross(r,i)},e.prototype._getAdjust=function(e,t,n){var r={dx:0,needRevert:!1};return n==="h"?e.x<t.x?r.dx=e.x+e.width-t.x:(r.dx=t.x+t.width-e.x,r.needRevert=!0):e.y<t.y?r.dx=e.y+e.height-t.y:(r.dx=t.y+t.height-e.y,r.needRevert=!0),r},e.prototype._adjustlabel=function(e,t,n,r){r==="h"?(e.x-=n/2,t.x+=n/2,this.bBox&&(e.x<this.bBox.x?(e.x=this.bBox.x,t.x=t.x+(this.bBox.x-e.x)):t.x>this.bBox.x+this.bBox.width&&(t.x=this.bBox.x+this.bBox.width,e.x-=t.x-this.bBox.x+this.bBox.width))):(e.y-=n/2,t.y+=n/2,this.bBox&&(e.y<this.bBox.y?(e.y=this.bBox.y,t.y=t.y+(this.bBox.y-e.y)):t.y>this.bBox.y+this.bBox.height&&(t.y=this.bBox.y+this.bBox.height,e.y-=t.y-this.bBox.y+this.bBox.height)))},e.prototype._adjustInternal=function(){var e=this;n.each(this.crossLabels,function(t,n){var r=n.label1,i=n.label2,s=n.dx,o=n.dy;s.dx<o.dx?o.needRevert?e._adjustlabel(i,r,o.dx,"v"):e._adjustlabel(r,i,o.dx,"v"):s.needRevert?e._adjustlabel(i,r,s.dx,"h"):e._adjustlabel(r,i,s.dx,"h")})},e.prototype._adjustTheEdge=function(){var e=this;this.bBox&&n.each(this.labels,function(t,n){n.x<e.bBox.x?n.x=e.bBox.x:n.x+n.width>e.bBox.x+e.bBox.width&&(n.x=e.bBox.x+e.bBox.width-n.width),n.y<e.bBox.y?n.y=e.bBox.y:n.y+n.height>e.bBox.y+e.bBox.height&&(n.y=e.bBox.y+e.bBox.height-n.height)})},e.prototype._translateLabels=function(){n.each(this.labels,function(e,t){t.x!==t.bakBBox.x&&(t.ele.attr("x",t.x+t.width/2),t.bakBBox.x=t.x),t.y!==t.bakBBox.y&&(t.ele.attr("y",t.y+t.height/2),t.bakBBox.y=t.y)})},e.prototype.adjust=function(){var e=1e3;while(e>0){this._resetOverlaps(),this._adjustTheEdge(),this._detects();if(n.isEmptyObject(this.crossLabels))break;e--,this._adjustInternal()}this._translateLabels()},e}();t.AdjustLabel=f;var l=function(e){function t(){e.apply(this,arguments),this.innerState={}}return __extends(t,e),t.prototype._setOption=function(r,i){var s=this,o=s.options,u=null,a=0,f=0,l=o.axis.x.tickMajor.factor,c=o.axis.x.tickMinor.factor,h,p,d,v,m,g=t.prototype.options.axis,y,b;if(r==="dataSource")s.seriesTransition=!0,o.dataSource=i,s.seriesList&&(o.seriesList=n.arrayClone(s.seriesList)),s._init();else if(r==="data")s.seriesTransition=!0,o.data=i,s.seriesList&&(o.seriesList=n.arrayClone(s.seriesList)),s._init();else if(r==="seriesList"){i||(i=[]),u=n.Event("beforeserieschange");if(s._trigger("beforeSeriesChange",u,{oldSeriesList:o.seriesList,newSeriesList:i})===!1)return!1;o.seriesList=i,s.seriesList=n.arrayClone(i),s._trigger("seriesChanged",null,i),s.seriesTransition=!0,s._seriesListSeted(),s._init()}else n.isPlainObject(o[r])?(r==="axis"&&(n.isArray(o.axis.y)?d=n.arrayClone([].concat(o.axis.y)):d=n.extend(!0,{},o.axis.y)),r==="axis"?(b=n.extend(!0,{},i),s._verifyAxisAutoMinMax(b),n.extend(!0,o.axis.x,b.x||{}),n.isArray(o.axis.y)||n.isArray(b.y)?y={}:y=o.axis.y,n.isArray(b.y)?(n.each(b.y,function(e,t){b.y[e]=n.extend(!0,{},g.y,y,t)}),o.axis.y=b.y):o.axis.y=n.extend(!0,{},g.y,y,b.y)):n.extend(!0,o[r],i),r==="indicator"&&(this._unbindCanvasEvents(),this._bindCanvasEvents()),r==="axis"&&(v=o.axis.y,o.axis.x.tickMajor.factor<0&&(o.axis.x.tickMajor.factor=l),o.axis.x.tickMinor.factor<0&&(o.axis.x.tickMinor.factor=c),n.isArray(v)?(n.isArray(d)||(d=[d]),n.each(v,function(e,t){var n=d[e]||{};n.tickMajor&&n.tickMajor.factor&&t.tickMajor&&t.tickMajor.factor&&t.tickMajor.factor<0&&(t.tickMajor.factor=n.tickMajor.factor),n.tickMinor&&n.tickMinor.factor&&t.tickMinor&&t.tickMinor.factor&&t.tickMinor.factor<0&&(t.tickMinor.factor=n.tickMinor.factor)})):(n.isArray(d)?(h=d[0].tickMajor.factor,p=d[0].tickMinor.factor):(l=d.tickMajor.factor,c=d.tickMinor.factor),o.axis.y.tickMajor&&o.axis.y.tickMajor.factor!==undefined&&o.axis.y.tickMajor.factor<0&&(o.axis.y.tickMajor.factor=h),o.axis.y.tickMinor&&o.axis.y.tickMinor.factor!==undefined&&o.axis.y.tickMinor.factor<0&&(o.axis.y.tickMinor.factor=p)))):e.prototype._setOption.call(this,r,i);r==="disabled"&&s._handleDisabledOption(i,s.chartElement),r==="autoResize"&&(s._unbindResizeEvent(),s._bindResizeEvent());if(r==="seriesTransition"||r==="animation")return;if(r==="hint"){s._resetTooltip();return}a=o.seriesList.length;if(r==="seriesList"||r==="seriesStyles"||r==="seriesHoverStyles")r!=="seriesList"&&s._handleChartStyles(),s.styles={style:[].concat(o.seriesStyles.slice(0,o.seriesStyles.length)),hoverStyles:[].concat(o.seriesHoverStyles.slice(0,o.seriesHoverStyles.length))},s._initStyles();if(r==="seriesList"||r==="seriesHoverStyles"){m=o.seriesHoverStyles.length;for(f=m;f<a;f++)o.seriesHoverStyles[f]=o.seriesHoverStyles[f%m]}(r==="height"||r==="width")&&s.chartElement[r](i);if(r==="culture"||r==="cultureCalendar")s._innerCulture=null,s._resetCulture();s.redraw()},t.prototype._isTrendline=function(e){return e.isTrendline||e.type===i.strTrendline?!0:!1},t.prototype._preHandleSeriesData=function(){var e=this,t=e.options,r=t.seriesList,i=t.axis;n.each(r,function(t,r){var s=r.data,u=[],a=[],f,l,c;if(!e._isTrendline(r))return!0;if(s.xy&&n.isArray(s.xy)&&s.xy.length){f=s.xy.length;while(l<f)u.push(s.xy[l++]),a.push(s.xy[l++]);s.x=u,s.y=a}else s.x||(u=[],n.each(a,function(e){u.push(e)}),s.x=u);try{c=o.processValues(s.x,s.y,r.fitType,i.x.autoMin,i.x.autoMax,i.x.min,i.x.max,r.order,r.sampleCount,r.display,undefined)}catch(h){c=undefined}c===undefined?r.isValid=!1:(r.isValid=!0,r.innerData=c)})},t.prototype._seriesListSeted=function(){},t.prototype._initStyles=function(){var e=this.options,t=e.seriesStyles,n=e.seriesHoverStyles,r,i,s,o;e.seriesList&&(i=e.seriesList.length||0),e.seriesStyles&&(r=e.seriesStyles.length||0),e.seriesHoverStyles&&(s=e.seriesHoverStyles.length||0);if(i>r&&r)for(o=r;o<i;o++)t[o]=t[o%r];if(i>s&&s)for(o=s;o<i;o++)n[o]=n[o%s]},t.prototype._verifyAxisAutoMinMax=function(e){var t=function(e){return e===null||typeof e=="undefined"};e.x&&(t(e.x.min)?e.x.autoMin=!0:e.x.autoMin=!1,t(e.x.max)?e.x.autoMax=!0:e.x.autoMax=!1);if(e.y)if(n.isArray(e.y))n.each(e.y,function(e,n){t(n.min)?n.autoMin=!0:n.autoMin=!1,t(n.max)?n.autoMax=!0:n.autoMax=!1});else{var r=e.y;t(r.min)?r.autoMin=!0:r.autoMin=!1,t(r.max)?r.autoMax=!0:r.autoMax=!1}},t.prototype._create=function(){var e=this,t=e.options,r=t.width||e.element.width(),i=t.height||e.element.height(),s=null,o;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._verifyAxisAutoMinMax(t.axis),e.updating=0,e.innerState={},e.axisCompass={},e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.redraw(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijchart"),n.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(t),e.styles={style:[].concat(t.seriesStyles.slice(0,t.seriesStyles.length)),hoverStyles:[].concat(t.seriesHoverStyles.slice(0,t.seriesHoverStyles.length))},t.hint&&typeof t.hint.content=="string"&&window[t.hint.content]&&(t.hint.content=window[t.hint.content]),t.hint&&typeof t.hint.title=="string"&&window[t.hint.title]&&(t.hint.title=window[t.hint.title]),e.headerEles=[],e.footerEles=[],e.legendEles=[],e.axisEles=[],e.legends=[],e.legendIcons=[],e.legendDots=[],e.chartLabelEles=[],e.seriesEles=[];if(e.element.length>0){e.element.is("table")?(e._parseTable(),s=n("<div></div>"),r&&s.css("width",r),i&&s.css("height",i),e.element.after(s),e.chartElement=s):e.chartElement=e.element,e.chartElement.addClass("ui-widget");try{o=Raphael(e.chartElement[0],r,i)}catch(u){var a=e.chartElement.css("display");s=n("<div></div>").insertBefore(e.chartElement).append(e.chartElement),e.chartElement.addClass("ui-helper-hidden-accessible").appendTo(n("body")),a==="none"&&e.chartElement.css("display","block"),o=Raphael(e.chartElement[0],r,i),e.chartElement.appendTo(s).unwrap().removeClass("ui-helper-hidden-accessible"),a==="none"&&e.chartElement.css("display","none")}e.canvas=o,i===0&&t.height!==0&&e.element.height(o.height),t.disabled&&e.disable(),o.customAttributes.rotation=function(e){this.transform("...R"+e)},o.customAttributes.scale=function(e){this.transform("...S"+e)},o.customAttributes.translation=function(e,t){this.transform(Raphael.format("...T{0},{1}",e,t))},e._bindLiveEvents()}},t.prototype._handleChartStyles=function(){this._extendArrayFromBase("seriesStyles"),this._extendArrayFromBase("seriesHoverStyles");var e=this.options,t=this._getDefFill();n.each(e.seriesStyles,function(e,n){n.fill||(n.fill=t[e])})},t.prototype._extendArrayFromBase=function(e){var r=n.extend(!0,{},t.prototype.options[e],this.options[e]),i=[];n.each(r,function(e,t){i.push(t)}),this.options[e]=i},t.prototype._getDefFill=function(){var e=["#00cc00","#0099cc","#0055cc","#2200cc","#8800cc","#d9007e","#ff0000","#ff6600","#ff9900","#ffcc00","#ffff00","#ace600"];return e},t.prototype._getCulture=function(e){return this._innerCulture||this._resetCulture(e),this._innerCulture},t.prototype._resetCulture=function(e){var t=n.wijGetCulture(e||this.options.culture,this.options.cultureCalendar);this._innerCulture=t},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=t.options,i=e||t.element,s=i.offset(),o=r.width||i.outerWidth(),u=r.height||i.outerHeight(),a;return a=n("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),Raphael.vml&&a.addClass(r.wijCSS.stateDisabled).css("background-color","#fff"),a},t.prototype._bindData=function(){var e=this,t=this,r=t.options,i=r.dataSource,s=r.seriesList,o=r.data,u={};n.each(s,function(t,n){var r=n.dataSource||i;(r&&n.data||n.type==="sharedPie")&&e._bindSeriesData(r,n,u)})},t.prototype._bindSeriesData=function(e,t,n){var r=t.data,i=r.x,s=r.y,o=this.options.data;i&&i.bind?r.x=this._getBindData(e,i.bind):o&&o.x&&o.x.bind&&(n.sharedXList===undefined&&(n.sharedXList=this._getBindData(e,o.x.bind)),r.x=n.sharedXList),s&&s.bind&&(r.y=this._getBindData(e,s.bind))},t.prototype._getBindData=function(e,t){if(n.isArray(e)){var r=[];return n.each(e,function(e,n){n&&n[t]!==undefined&&r.push(n[t])}),r}return null},t.prototype._hanldSharedXData=function(){var e=this,t=e.options,r=t.seriesList,i=t.data;i&&n.each(r,function(e,t){var r=t.data;if(r.x===undefined||r.x===null&&n.isArray(i.x))r.x=i.x})},t.prototype._init=function(){var e=this,t=e.options;e.rendered||(e.seriesList=n.arrayClone(t.seriesList)),e._bindData(),e._hanldSharedXData(),n.each(t.seriesList,function(e,r){var i=r.data,s;if(typeof i=="undefined"||i===null)s=n.inArray(r,t.seriesList),t.seriesList.splice(s,1)}),e.rendered||e._paint()},t.prototype.destroy=function(){var t=this,r=t.options;t._unbindLiveEvents(),t._clearChartElement(),t.chartElement.removeClass("ui-widget"),n("."+r.wijCSS.canvasObject,t.chartElement[0]).off(t.widgetName).off("."+t.widgetName),t.element!==t.chartElement&&t.chartElement.remove(),t.element.empty(),t.styles&&(t.styles=null),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.exportChart=function(e,t,n,r){},t.prototype.addSeriesPoint=function(e,t,n){var r=this.options.seriesList,i=null,s=null;if(e>=r.length)return;i=r[e],s=i.data||[],s.x.push(t.x),s.y.push(t.y),n&&(s.x.shift(),s.y.shift()),this._setOption("seriesList",r)},t.prototype.beginUpdate=function(){var e=this;e.updating++},t.prototype.endUpdate=function(){var e=this;e.updating--,e.redraw()},t.prototype.redraw=function(e){var t=this,n=t.options,r=0,i=0;if(t.updating>0)return;if(e&&t.rendered)return;r=n.width||t.element.width(),i=n.height||t.element.height();if(r<1||i<1)return;t.canvas.setSize(r,i),t._paint()},t.prototype._parseTable=function(){if(!this.element.is("table"))return;var e=this,t=e.element,r=e.options,i=n("caption",t),s=n("thead th",t),o=[],u=n("tbody tr",t);i.length&&(r.header=n.extend({visible:!0,text:n.trim(n(i[0]).text())},r.header),i.length>1&&(r.footer=n.extend({visibel:!0,text:n.trim(n(i[1]).text())},r.footer))),r.legend=n.extend({visible:!0},r.legend),e._getSeriesFromTR(s,u,o),e.options.seriesList=o},t.prototype._getSeriesFromTR=function(e,t,r){var i=[],s=null,o=null;e.length&&e.each(function(){s=n.trim(n(this).text()),i.push(s)}),t.length&&t.each(function(){var e=n("th",n(this)),t=n.trim(e.text()),s=[],u=n("td",n(this));u.length&&u.each(function(e,t){var r=n(this);s.push(parseFloat(n.trim(r.text())))}),o={label:t,legendEntry:!0,data:{x:i,y:s}},r.push(o)})},t.prototype._destroyRaphaelArray=function(e){if(!e)return;var t=e.length,r=0,i,s;for(;t&&r<t;r++)i=e[r],i&&i[0]&&(s=n(i.node),s.unbind().removeData(),i.wijRemove(),s.remove(),s=null),e[r]=null},t.prototype._clearChartElement=function(){var e=this,t=e.chartElement.data("fields");e._destroyRaphaelArray(e.headerEles),e._destroyRaphaelArray(e.footerEles),e._destroyRaphaelArray(e.legendEles),e._destroyRaphaelArray(e.legends),e._destroyRaphaelArray(e.legendIcons),e._destroyRaphaelArray(e.legendDots),e._destroyRaphaelArray(e.axisEles),e._destroyRaphaelArray(e.chartLabelEles),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null),e.dataPoints=null,e.pointXs=null,t&&t.trackers&&(e._destroyRaphaelArray(t.trackers),t.trackers=null),e.headerEles=[],e.footerEles=[],e.legendEles=[],e.legends=[],e.legendIcons=[],e.legendDots=[],e.axisEles=[],e.chartLabelEles=[],t&&t.chartElements&&(n.each(t.chartElements,function(t,n){e._destroyRaphaelArray(n)}),t.chartElements=null),t&&t.seriesEles&&(t.seriesEles=null),e.seriesEles&&(e.seriesEles=[]),e.canvas.clear(),e.innerState=null,e.axisInfo=null,e.seriesGroup=null,e.lastAxisOffset=null,e.innerState={}},t.prototype._text=function(e,t,n){var r=this.canvas.text(e,t,n);return this.options.disableDefaultTextStyle&&(r.node.style.cssText=""),r},t.prototype._paint=function(){var e=this,t=e.options,n=e.element,r=n.css("display")==="none"||n.css("visibility")==="hidden",i,s=null;r&&(i=n.css("left"),s=n.css("position"),n.css("left","-10000px"),n.css("position","absolute"),n.show());if(n.is(":hidden")){r&&(n.css("left",i),n.css("position",s),n.hide());return}e._clearChartElement();if(e._trigger("beforePaint")===!1)return;e._initStyles(),e._preHandleSeriesData(),e.canvasBounds={startX:0,endX:t.width||n.width(),startY:0,endY:t.height||n.height()},e._paintHeader(),e._paintFooter(),e._paintLegend(),e._paintChartArea(),t.indicator&&t.indicator.visible&&this.pointXs&&(this.pointXs=this.pointXs.sort(function(e,t){return e-t})),e._paintTooltip(),e._trigger("painted"),e.rendered=!0,e.styles&&(t.seriesStyles=e.styles.style,t.seriesHoverStyles=e.styles.hoverStyles),r&&(n.css("left",i),n.css("position",s),n.hide())},t.prototype._paintIndicater=function(){},t.prototype._calculatePosition=function(e,t,n){var r={x:0,y:0},i=5,s=5,o=this.canvasBounds;switch(e){case"north":r.x=(o.endX-o.startX)/2,r.y=o.startY+n/2+s,o.startY=o.startY+s*2+n;break;case"south":r.x=(o.endX-o.startX)/2,r.y=o.endY-n/2-s,o.endY=o.endY-s*2-n;break;case"east":r.x=o.endX-t/2-i,r.y=(o.endY-o.startY)/2,o.endX=o.endX-i*2-t;break;case"west":r.x=o.startX+t/2+i,r.y=(o.endY-o.startY)/2,o.startX=o.startX+i*2+t}return r},t.prototype._paintHeader=function(){var e=2,t=this,r=t.options,i=r.header,s=null,o=null,u=null,a=null,f=null,l=null,c=0,h=null;i.text&&i.text.length>0&&i.visible&&(s=i.compass,o=t._text(0,0,i.text),n.wijraphael.addClass(n(o.node),r.wijCSS.headerText),c=t._getRotationByCompass(s),u=n.extend(!0,{},r.textStyle,i.textStyle),o.attr(u),o.transform("...R"+c),a=o.wijGetBBox(),f=t._calculatePosition(s,a.width,a.height),o.transform(Raphael.format("...T{0},{1}",f.x,f.y)),l=o.wijGetBBox(),h=t.canvas.rect(l.x-e,l.y-e,l.width+2*e,l.height+2*e),n.wijraphael.addClass(n(h.node),r.wijCSS.headerContainer),h.attr(i.style),h.toBack(),t.headerEles.push(o),t.headerEles.push(h))},t.prototype._paintFooter=function(){var e=2,t=this,r=t.options,i=r.footer,s=null,o=null,u=null,a=null,f=null,l=null,c=0,h=null;i.text&&i.text.length>0&&i.visible&&(s=i.compass,o=t._text(0,0,i.text),n.wijraphael.addClass(n(o.node),r.wijCSS.footerText),c=t._getRotationByCompass(s),u=n.extend(!0,{},r.textStyle,i.textStyle),o.attr(u),o.transform("...R"+c),a=o.wijGetBBox(),f=t._calculatePosition(s,a.width,a.height),o.transform(Raphael.format("...T{0},{1}",f.x,f.y)),l=o.wijGetBBox(),h=t.canvas.rect(l.x-e,l.y-e,l.width+2*e,l.height+2*e),n.wijraphael.addClass(n(h.node),r.wijCSS.footerContainer),h.attr(i.style),h.toBack(),t.footerEles.push(o),t.footerEles.push(h))},t.prototype._getRotationByCompass=function(e){var t=0;return e==="east"?t=90:e==="west"&&(t=-90),t},t.prototype._paintLegendIcon=function(e,t,r,i,s,o,a,f,l,c){var h=this,p;return h._isTrendline(l)?p=u.paintLegendIcon(e,t,r,i,s,h.canvas,h.options.legend.size,h.legendIcons,o,a,f):(p=h.canvas.rect(e,t,r,i),n(p.node).data("legendIndex",o).data("index",a),h.legendIcons.push(p),s&&p.attr(s),n.wijraphael.addClass(n(p.node),f)),p},t.prototype._paintLegend=function(){if(!this.options.legend.visible)return;var e=this,t=e.options,r=n.extend(!0,{size:{width:22,height:10}},t.legend),i=2,s=t.seriesStyles,o=[].concat(t.seriesList),u=r.compass,a=r.orientation,f,l,c,h,p=e.canvasBounds,d=p.endX-p.startX,v=p.endY-p.startY,m=r.size.width,g=r.size.height,y,b=0,w=0,E=0,S=0,x=0,T=0,N=1,C=0,k=0,L=0,A=0,O=0,M,_,D,P,H=[],B=0,j=0,F=0,I=[];r.text&&r.text.length&&(f=e._text(0,0,r.text),n.wijraphael.addClass(n(f.node),t.wijCSS.legendTitle),l=n.extend(!0,{},t.textStyle,r.textStyle,r.titleStyle),f.wijAttr(l),e.legendEles.push(f)),r.reversed&&(o=o.reverse()),F=o.length,e.widgetName==="wijcompositechart"&&(F=0,n.each(o,function(e,t){t.type==="pie"?F+=t.data.length:t.type==="sharedPie"?t.sharedPieLegends&&(F+=t.sharedPieLegends.length):F++})),n.each(o,function(i,o){function u(i){var o=r.reversed?F-1-B:B,u=e._getLegendStyle(s[o]),a=n.extend(!0,{fill:"none",opacity:1,stroke:"black"},u),f,l,c,h=!1,p=i.type,d;i.legendEntry&&i.display!=="exclude"&&(l=n.extend(!0,{},t.textStyle,r.textStyle),r.textWidth?f=e.canvas.wrapText(0,0,i.label,r.textWidth,"far",l):(f=e._text(0,0,i.label),f.wijAttr(l)),n.wijraphael.addClass(n(f.node),t.wijCSS.legendText+" "+t.wijCSS.legend),e.legends.push(f),c=a,parseInt(a["stroke-width"])!==0&&(c=n.extend(c,{"stroke-width":1})),H.push(c),I.push(i),e.widgetName==="wijcompositechart"?h=p==="line"||p==="spline"||p==="bezier"||p==="area":h=e.widgetName==="wijlinechart",r.textWidth?n.each(f,function(e,r){i.visible===!1&&(!h||h&&(!i.markers||!i.markers.visible))&&(n(r.node).data("hidden",!0).data("textOpacity",r.attr("opacity")||1),r.attr("opacity",.3)),n.wijraphael.addClass(n(r.node),t.wijCSS.legendText+" "+t.wijCSS.legend),n(r.node).data("legendIndex",j).data("index",B)}):(i.visible===!1&&(!h||h&&(!i.markers||!i.markers.visible))&&(n(f.node).data("hidden",!0).data("textOpacity",f.attr("opacity")||1),f.attr("opacity",.3)),n.wijraphael.addClass(n(f.node),t.wijCSS.legendText+" "+t.wijCSS.legend),n(f.node).data("legendIndex",j).data("index",B)),j++),B++}o=n.extend(!0,{legendEntry:!0,display:"show"},o),o.type==="pie"&&o.legendEntry?n.each(o.data,function(e,t){t=n.extend({legendEntry:o.legendEntry},t),u(t)}):o.type==="sharedPie"?o.sharedPieLegends&&n.each(o.sharedPieLegends,function(e,t){t=n.extend({legendEntry:o.legendEntry},t),u(t)}):e._isPieChart()?u(o):e._checkSeriesDataEmpty(o)||u(o)}),c=e.legends.length,h=r.textMargin,f&&(y=f.wijGetBBox(),b=y.height,w=y.width),n.each(e.legends,function(e,t){var n=t.wijGetBBox();n.width>E&&(E=n.width),n.height>S&&(S=n.height)});if(u==="east"||u==="west")a==="horizontal"?(x=c*(E+m+i)+c*(h.left+h.right),x>d/2?(N=Math.floor(d/2/E),N<1&&(N=1)):N=c):a==="vertical"&&(T=S*c+b+c*(h.top+h.bottom),T>v?N=Math.ceil(T/v):N=1);else if(u==="south"||u==="north")a==="horizontal"?(x=(E+m+i)*c+c*(h.left+h.right),x>d?(N=Math.floor(c/x*d),N<1&&(N=1)):N=c):a==="vertical"&&(T=S*c+b+c*(h.top+h.bottom),T>v/2?(C=Math.floor(v-b)/2/S,N=Math.ceil(c/C)):N=1);N===0&&(N=1),k=N*(E+m+i)+N*(h.left+h.right),L=S*Math.ceil(c/N)+b+Math.ceil(c/N)*(h.top+h.bottom),k=k>w?k:w,M=e._calculatePosition(u,k,L),_=M.x-k/2,D=M.y-L/2,P=e.canvas.rect(_-i,D-i,k+2*i,L+2*i),n.wijraphael.addClass(n(P.node),t.wijCSS.legendContainer),P.attr(r.style),P.toBack(),e.legendEles.push(P),f&&f.transform(Raphael.format("...T{0},{1}",_+k/2,D+b/2)),A=b,n.each(e.legends,function(s,o){d=H[s];var u=o.wijGetBBox(),a,f=d["stroke-width"]||0,l=_+O*(m+f*2+E+i)+(O+1)*h.left+O*h.right,c=D+A+u.height/2+h.top+S/2-u.height/2,p=c-g/2-f,d,v,y=o;r.textWidth&&(y=o[0]),a=e._paintLegendIcon(l,p,m,g,d,n(y.node).data("legendIndex"),n(y.node).data("index"),t.wijCSS.legendIcon+" "+t.wijCSS.legend,I[n(y.node).data("legendIndex")],y),n(y.node).data("hidden")===!0&&(n(y.node).data("iconOpacity",a.attr("opacity")||1),a.attr("opacity",.3)),r.textStyle["text-anchor"]==="start"&&(l-=u.width/2),r.textWidth?o.transform(Raphael.format("...T{0},{1}",l+m+i,c-u.height/2)):o.transform(Raphael.format("...T{0},{1}",l+m+i+u.width/2,c)),Raphael.vml&&(v=e.canvas.rect(l+m+i,c-u.height/2,u.width,u.height).attr({stroke:"none",fill:"#000000",opacity:.01}),n.wijraphael.addClass(n(v.node),t.wijCSS.legendTextCover+" "+t.wijCSS.legend),n(v.node).data("legendIndex",n(y.node).data("legendIndex")),n(v.node).data("index",n(y.node).data("index")),e.legendEles.push(v)),o.toFront(),O++,O===N&&(O=0,A+=S+h.top+h.bottom)})},t.prototype._getLegendStyle=function(e){return e},t.prototype._hasAxes=function(){return this.widgetName==="wijpiechart"?!1:!0},t.prototype._applyAxisText=function(e,t){var r=this,i=e.text,s=null,o=null,u=null,a=0,f=0,l=t.bounds||r.canvasBounds;if(i!==null&&i!==undefined&&i.length>0){o=r._text(-100,-100,i),u=n.extend(!0,{},r.options.textStyle,e.textStyle),o.attr(u),s=o.wijGetBBox(),u["margin-left"]&&(f+=parseFloat(u["margin-left"])),u["margin-top"]&&(a+=parseFloat(u["margin-top"])),u["margin-right"]&&(f+=parseFloat(u["margin-right"])),u["margin-bottom"]&&(a+=parseFloat(u["margin-bottom"]));switch(e.compass){case"north":l.startY+=s.height+a;break;case"south":l.endY-=s.height+a;break;case"east":l.endX-=s.height+f;break;case"west":l.startX+=s.height+f}o.wijRemove(),o=null}return s},t.prototype._isSeriesListDataEmpty=function(){var e=this,t=this,r=t.options.seriesList,i=!0;return n.each(r,function(t,n){if(!e._checkSeriesDataEmpty(n))return i=!1,!1}),i},t.prototype._checkEmptyData=function(e){return!e||!n.isArray(e)?!0:!1},t.prototype._checkSeriesDataEmpty=function(e){var t=this._checkEmptyData,n=e.data;return!n||(t(n.x)||t(n.y))&&t(n.xy)?!0:this._isTrendline(e)&&(!e.isValid||!e.innerData)?!0:!1},t.prototype._setTooltipContent=function(e){var t=this,r,i,s,o=t.tooltip,u,a={},f=t.options.hint,l=n.isFunction;o&&(r=[],n.each(e,function(e,t){var i=t.valX,s=t.valY;i&&s?r.push(n.extend({},t,{x:i,y:s})):r.push(t)}),u=o.getOptions(),i=f.title,s=f.content,l(i)&&(a.title=function(){return i.call(r)}),l(s)&&(a.content=function(){return s.call(r)}),o.setOptions(a))},t.prototype._setTooltip=function(){var e=this,t=e.options,n=e.tooltip,r;n&&(r={closeBehavior:"none",style:{stroke:t.indicator.style.stroke},animated:!1,showDelay:0,hideDelay:0,windowCollisionDetection:"fit",beforeShowing:function(t,n){if(this.target&&e.indicatorLine)return!1}},t.horizontal&&(r.compass="east"),n.setOptions(r))},t.prototype._resetTooltip=function(){var e=this,t=e.options,r=t.hint,i=r.title,s=r.content,o=e.tooltip,u=n.isFunction,a=n.extend(!0,{},this.options.hint);o&&(a.animated=r.animated,a.showDelay=r.showDelay,a.hideDelay=r.hideDelay,a.title=r.title,a.content=r.content,a.closeBehavior=r.closeBehavior||"auto",a.windowCollisionDetection="fit",u(i)&&(a.title=function(){return e._getTooltipText(i,this.target)}),u(s)&&(a.content=function(){return e._getTooltipText(s,this.target)}),a.beforeShowing=function(){e._onBeforeTooltipShowing(this)},o.setOptions(a))},t.prototype._fotmatTooltip=function(e){var t=this;return t._isDate(e)?Globalize.format(e,"f",t._getCulture()):isNaN(e)?e:Globalize.format(parseFloat(e),"n",t._getCulture())},t.prototype._setDefaultTooltipText=function(e){var t=e.label;return e.lineSeries&&e.lineSeries.label&&(t=e.lineSeries.label),t+":"+this._fotmatTooltip(e.y)},t.prototype._paintTooltip=function(){var e=this,t=e.options,r=t.hint,i=!t.disabled&&r.enable,s=r,o,u,f=n.isFunction;i&&!e.tooltip&&(s=n.extend(!0,{},r,{}),o=r.title,u=r.content,u||(u=r.content=function(){var t;if(n.isArray(this)){var r="";return n.each(this,function(t,n){r+=e._setDefaultTooltipText(n)+"\n"}),r}return e._setDefaultTooltipText(this)}),f(o)&&(s.title=function(){return e._getTooltipText(o,this.target)}),f(u)&&(s.content=function(){return e._getTooltipText(u,this.target)}),s.beforeShowing=function(){e._onBeforeTooltipShowing(this)},e.tooltip=new a(e.canvas,null,s))},t.prototype._getTooltipText=function(e,t){var r=n(t.node).data("wijchartDataObj"),i={data:r,label:r.label,x:r.x,y:r.y,target:t,fmt:e};return n.proxy(e,i)()},t.prototype._onBeforeTooltipShowing=function(e){var t=e.target,n=this.options.hint.style;t&&(e.options.style.stroke=n.stroke||t.attrs.stroke||t.attrs.fill)},t.prototype._paintChartArea=function(){var e=this,t=e.options,r=t.axis,i=2,s=null,o=null,u={},a=5,f=0,l=0,h=n.isArray(r.y),p=0,d,v,m,g,y,b,w,E;e._applyMargins(),e.isMultiYAxis=h;if(e._isSeriesListDataEmpty())return;h&&n.each(r.y,function(e,t){r.y[e]=n.extend(!0,(new c).axis.y,t)});if(e._hasAxes()){if(e.innerState.axisInfo)e.axisInfo=e.innerState.axisInfo,e.canvasBounds=e.innerState.canvasBounds;else{s=e._applyAxisText(r.x,{}),b={id:"x",tprec:0,isTime:!1,height:0,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:s,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.x.annoMethod,valueLabels:r.x.valueLabels||[],bounds:null},E=new Array,e.axisInfo={x:b,y:E},e.axisCompass[r.x.compass]=!0,h?n.each(r.y,function(t,n){o=e._applyAxisText(n,{}),w={id:"y"+t,height:0,tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:n.annoMethod,valueLabels:n.valueLabels||[],bounds:null},e.axisInfo.y[t.toString()]=w,e.axisCompass[n.compass]||(e.axisCompass[n.compass]=!0)}):(o=e._applyAxisText(r.y,{}),e.axisInfo.y[0]={id:"y",tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,originalMax:0,originalMin:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.y.annoMethod,valueLabels:r.y.valueLabels||[]},e.axisCompass[r.y.compass]||(e.axisCompass[r.y.compass]=!0)),e._getSeriesGroup(h),u=e._getDataExtreme(h),e.extremeValue=u,r.x.autoMin&&e.axisInfo.x.autoMin?(r.x.min=u.txn,g=r.x.origin,g!==null&&typeof g!="undefined"&&!e.axisInfo.x.isTime&&g<r.x.min&&(r.x.min=g)):r.x.min&&e._isDate(r.x.min)&&(r.x.min=n.toOADate(r.x.min)),r.x.autoMax&&e.axisInfo.x.autoMax?r.x.max=u.txx:r.x.max&&e._isDate(r.x.max)&&(r.x.max=n.toOADate(r.x.max)),n.each(u.y,function(e,t){p++});for(d=0;d<(r.y.length||1);d++){v=r.y[d]||r.y,m=d.toString(),v.autoMin&&e.axisInfo.y[m].autoMin&&u.y[m]?(v.min=u.y[m].tyn,y=v.origin,y!==null&&typeof y!="undefined"&&!e.axisInfo.y[m].isTime&&y<v.min&&(v.min=y)):v.min&&e._isDate(v.min)&&(v.min=n.toOADate(v.min)),v.autoMax&&e.axisInfo.y[m].autoMax&&u.y[m]?v.max=u.y[m].tyx||0:v.max&&e._isDate(v.max)&&(v.max=n.toOADate(v.max));do{l=e._autoPosition(e.axisInfo,r,"y",m),f=e._autoPosition(e.axisInfo,r,"x",m);if(l===e.axisInfo.y[m].offset&&f===e.axisInfo.x.offset){a=0;break}!isNaN(f)&&!isNaN(l)&&(l!==e.axisInfo.y[m].offset&&l!==0&&(e.axisInfo.y[m].offset=l,e.axisInfo.y[m].vOffset=f),f!==e.axisInfo.x.offset&&f!==0&&(e.axisInfo.x.offset=f,e.axisInfo.x.vOffset=l)),a--}while(a>0)}e._adjustPlotArea(r.x,e.axisInfo.x),e._adjustPlotArea(r.y,e.axisInfo.y,!0),e.innerState.axisInfo=e.axisInfo,e.innerState.canvasBounds=e.canvasBounds}e._paintAxes(),e._paintPlotArea()}else e._paintPlotArea()},t.prototype._getSeriesGroup=function(e){var t=this,r=t.options,i={};n.each(r.seriesList,function(t,n){n.yAxis&&e?i[n.yAxis.toString()]?i[n.yAxis.toString()].push(n):i[n.yAxis.toString()]=[n]:i[0]?i[0].push(n):i[0]=[n]}),t.seriesGroup=i},t.prototype._adjustPlotArea=function(e,t,r){var i=this.canvasBounds,s,o={east:Number.MIN_VALUE,west:Number.MIN_VALUE,south:Number.MIN_VALUE,north:Number.MIN_VALUE};if(r)n.each(t,function(e,t){s=e}),n.each(t,function(t,n){var r=e[t]||e,i=r.compass;r.max=n.max,r.min=n.min;switch(i){case"north":o.north=Math.max(n.offset,o.north);break;case"south":o.south=Math.max(n.offset,o.south);break;case"east":o.east=Math.max(n.offset,o.east);break;case"west":o.west=Math.max(n.offset,o.west)}}),o.north!==Number.MIN_VALUE&&(i.startY+=o.north),o.south!==Number.MIN_VALUE&&(i.endY-=o.south),o.east!==Number.MIN_VALUE&&(i.endX-=o.east),o.west!==Number.MIN_VALUE&&(i.startX+=o.west);else{e.max=t.max,e.min=t.min;switch(e.compass){case"north":i.startY+=t.offset;break;case"south":i.endY-=t.offset;break;case"east":i.endX-=t.offset;break;case"west":i.startX+=t.offset}}},t.prototype._autoPosition=function(e,t,n,r){return this._autoPositionCartesianAxis(e,t,n,r)},t.prototype._autoPositionCartesianAxis=function(e,t,r,i){var s=this,o=null,u,a,f,l,c,h,p,d,v=s.lastAxisOffset||{},m,g;r==="y"?(u=e.y[i],a=t.y[i]||t.y,l=t.x,f=e.x):(u=e.x,a=t.x,f=e.y[i],l=t.y[i]||t.y),c=a.compass,h=l.origin,p=f.max,d=f.min,h!==null&&s._isDate(h)&&(h=n.toOADate(h)),s._calculateParameters(u,a),o=s._getMaxExtents(u,a);switch(c){case"north":case"south":m=o.height,u.maxExtent=m;break;case"east":case"west":m=o.width,u.maxExtent=m}return r==="y"&&v[c]&&(n.each(v[c],function(e,t){e!==i&&(g=t)}),g&&!u.isPartAxis&&(u.preStartOffset=g,m+=g)),r==="y"&&(v[c]===undefined&&(v[c]={}),v[c][i]=m+s._getAxisLabelBox(a).width,s.lastAxisOffset=v),m},t.prototype._getAxisLabelBox=function(e){var t=this,r=t.options,i=e.text,s=0,o=0,u=0,a=0,f,l,c=t._isVertical(e.compass),h=n.extend(!0,{},r.textStyle,e.textStyle);return h["margin-top"]&&(s=parseFloat(h["margin-top"])),h["margin-left"]&&(u=parseFloat(h["margin-left"])),h["margin-right"]&&(o=parseFloat(h["margin-right"])),h["margin-bottom"]&&(a=parseFloat(h["margin-bottom"])),f=t._text(0,0,i),f.attr(h),c&&f.transform("...R-90"),l=f.wijGetBBox(),f.wijRemove(),f=null,{width:l.width+u+o,height:l.height+a+s}},t.prototype._getMaxExtents=function(e,t,r){var i=this,s=i.options,o=null,u={width:0,height:0},a=e.min,f=e.max,l=e.isTime,c=t.annoFormatString,h=s.is100Percent,p=0,d=t.compass,v=t.labels,m,g=!1,y=e.bounds||i.canvasBounds,b,w;e.majorTickRect=i._getTickRect(e,t,!0,!0,r),e.minorTickRect=i._getTickRect(e,t,!1,!0,r),o=i._getMajorTickValues(e,t),e.id==="x"&&(o=this._adjustTickValuesForCandlestickChart(o));if(!t.textVisible)return u;if(!c||c.length===0)c=e.annoFormatString;return m=n.extend(!0,{},s.textStyle,t.textStyle,v.style),w=m.transform,g=w&&/r/i.test(w),m=n.extend(!0,m,e.textStyle),b=y.endX-y.startX-e.vOffset-e.axisTextOffset,o&&o.length&&(b/=o.length-1,n.each(o,function(t,r){var s,o,y;if(r<a||r>f)return!0;if(e.annoMethod==="valueLabels"){if(r<0)return!0;if(p>=e.valueLabels.length)return!1;r=e.valueLabels[p],r.text?r=r.text:typeof r.value!="undefined"&&(r=r.value,c&&c.length&&(r=Globalize.format(r,c,i._getCulture())))}else e.annoMethod==="values"&&(e.id==="x"&&(r=i._getXTickText(r)),c&&c.length?(l&&(r=n.fromOADate(r)),r=Globalize.format(r,c,i._getCulture())):h&&e.id==="y"&&(r=Globalize.format(r,"p0",i._getCulture())));v.width?s=i.canvas.wrapText(-100,-100,r,v.width,v.textAlign,m):s=i._text(-100,-100,r).attr(m),o=s.wijGetBBox(),!i._isVertical(d)&&!g&&e.annoMethod==="valueLabels"&&o.width>b&&(s.attr({transform:"r-45"}),o=s.wijGetBBox(),t===0&&(m.transform="r-45",e.textStyle={transform:"r-45"},y=s.clone(),y.attr({transform:"r0"}),o=y.wijGetBBox(),Math.sqrt(2)*o.height>b&&(s.attr({transform:"r-90"}),m.transform="r-90",e.textStyle={transform:"r-90"}),y.wijRemove(),y=null,o=s.wijGetBBox())),s.wijRemove(),s=null,o.width>u.width&&(u.width=o.width),o.height>u.height&&(u.height=o.height),p++})),u.width<v.width&&(u.width=v.width),e.labelWidth=u.width,u},t.prototype._getMajorTickValues=function(e,t){var r=[],i=t.autoMajor,s=t.unitMajor,o,u,a=e.valueLabels;return a&&a.length>0&&n.each(a,function(e,t){if(typeof t.text!="undefined"||typeof t.value!="undefined")return!1;typeof t=="string"?a[e]={text:t,gridLine:!1}:a[e]={value:t,gridLine:!1}}),e.annoMethod==="valueLabels"&&a&&a.length>0&&typeof a[0].value!="undefined"?(r=this._getSortedDataValues(e,t),r):(e.id==="x"?(o=i?e.max:e.originalMax,u=i?e.min:e.originalMin):(o=e.max,u=e.min),r=this._getTickValues(o,u,s,e.tprec,!e.isTime,i),r)},t.prototype._getSortedDataValues=function(e,t){var r=this,i=[],s=e.valueLabels;return n.each(s,function(e,t){var s=t.value;r._isDate(s)?i.push(n.toOADate(s)):typeof s=="number"?i.push(s):i.push(e)}),i},t.prototype._getMinorTickValues=function(e,t){var n=[],r=t.autoMinor,i=t.unitMinor,s,o;return e.id==="x"?(s=r?e.max:e.originalMax,o=r?e.min:e.originalMin):(s=e.max,o=e.min),n=this._getTickValues(s,o,i,e.tprec,!e.isTime,r),n},t.prototype._getTickValues=function(e,t,r,i,s,u){var a=this,f=[],l=t,c=0,h=0,p=0,d=0,v=0,m=0;try{if(r===0)f=[e,t];else{u?(i+1<0?i=-1:i+1>15&&(i=14),m=n.round(o.signedCeiling(t/r)*r,i+1),m<e&&(t=m),p=parseInt(n.round(e/r,5).toString(),10),d=parseInt(n.round(t/r,5).toString(),10),v=parseInt((p-d+1).toString(),10),v>1&&(h=d*r,h<t&&(v--,t+=r),h=t+(v-1)*r,h>e&&v--),v<1&&(v=2,t=l,r=e-t)):(v=parseInt(((e-t)/r+1).toString(),10),v>1&&(h=t+(v-1)*r,h>e&&v--),v<1&&(v=2,r=e-t));for(c=0;c<v;c++)s?u?f[c]=n.round(t+c*r,i+1):f[c]=t+c*r:f[c]=t+c*r}}catch(g){}return f},t.prototype._getTickRect=function(e,t,n,r,i){var s=t.compass,o=0,u=null,a=3,f=2,l=2,c=t.tickMajor.factor,h=t.tickMinor.factor,p={x:0,y:0,width:0,height:0};n?(u=t.tickMajor.position,c=c>0?c:1,o=a*c):(u=t.tickMinor.position,h=h>0?h:1,o=f*h);if(u==="none"||u==="inside"&&r)o=0;return s==="east"||s==="west"?(p={x:0,y:-1,width:o*l,height:l},s==="east"&&(u==="outside"||u==="cross"&&r)||s==="west"&&u==="inside"?p.width+=2:r||(u==="cross"&&(p.width<<=1),p.width+=2)):(p={x:-1,y:0,width:l,height:o*l},s==="south"&&(u==="outside"||u==="corss"&&r)||s==="north"&&u==="inside"?p.height+=2:r||(u==="cross"&&(p.height<<=1),p.height+=2)),p},t.prototype._applyMargins=function(){var e=this,t=e.options,n=e.canvasBounds;n.startX+=t.marginLeft,n.endX-=t.marginRight,n.startY+=t.marginTop,n.endY-=t.marginBottom},t.prototype._paintAxes=function(){var e=this,t=e.options.axis,r=e.axisInfo,i=t.x,s=t.y,o=r.x,u=r.y,a;a=e._paintAxis(i,o),n.each(u,function(t,n){var r=s[t]||s;r.origin!==null&&e._translateAxisIfNeeded(a,i.compass,r.origin,r.compass,n.max,n.min)}),n.each(u,function(t,n){var r=s[t]||s;a=e._paintAxis(r,n),i.origin!==null&&e._translateAxisIfNeeded(a,r.compass,i.origin,i.compass,o.max,o.min)})},t.prototype._translateAxisIfNeeded=function(e,t,r,i,s,o){var u=this,a=i==="west"||i==="east",f=u.canvasBounds,l=r,c;u._isDate(l)&&(l=n.toOADate(l)),a?(t==="south"?c=(o-l)/(s-o)*(f.endY-f.startY):c=(s-l)/(s-o)*(f.endY-f.startY),n.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",0,c))})):(t==="west"?c=(l-o)/(s-o)*(f.endX-f.startX):c=(l-s)/(s-o)*(f.endX-f.startX),n.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",c,0))}))},t.prototype._paintAxis=function(e,t){var r=this,i=r.options,s=t.bounds||r.canvasBounds,o={x:0,y:0},u={x:0,y:0},a=e.compass,f=2,l=!0,c=null,h=[],p=[],d=[],v=t.max,m=t.min,g=e.unitMajor,y=e.unitMinor,b=e.tickMajor.position,w=e.tickMinor.position,E=t.maxExtent,S=e.tickMajor.style,x=e.tickMinor.style,T=t.majorTickRect,N=t.minorTickRect,C=t.axisTextOffset,k=e.gridMajor,L=e.gridMinor,A=e.labels,O=0,M=[],_=0,D=e.annoFormatString,P=null,H=[];T=r._getTickRect(t,e,!0,!1),N=r._getTickRect(t,e,!1,!1);if(!D||D.length===0)D=t.annoFormatString;h=r._getMajorTickValues(t,e),p=r._getMinorTickValues(t,e),d=r._resetMinorTickValues(p,h),t.id==="x"&&(h=this._adjustTickValuesForCandlestickChart(h));switch(a){case"south":o.x=s.startX,o.y=s.endY,u.x=s.endX,u.y=s.endY,l=!1;break;case"north":o.x=s.startX,o.y=s.startY-f,u.x=s.endX,u.y=s.startY-f,l=!1;break;case"east":o.x=s.endX-f,o.y=s.endY,u.x=s.endX-f,u.y=s.startY+r._getOffsetOfAxis(e),t.preStartOffset&&(o.x+=t.preStartOffset,u.x+=t.preStartOffset);break;case"west":o.x=s.startX,o.y=s.endY,u.x=s.startX,u.y=s.startY+r._getOffsetOfAxis(e),t.preStartOffset&&(o.x-=t.preStartOffset,u.x-=t.preStartOffset)}return e.visible&&(c=r.canvas.line(o.x,o.y,u.x,u.y).attr(e.style),n.wijraphael.addClass(n(c.node),i.wijCSS.axis),r.axisEles.push(c),H.push(c)),n.each(h,function(s,f){var l=f,c=t.isTime,h=i.is100Percent,p,d,y=!1,w={};if(f<m||f>v)return _++,!0;if(t.annoMethod==="valueLabels"){if(_>=t.valueLabels.length)return!1;l=t.valueLabels[_],y=l.gridLine,w=l.gridLineStyle,l.text?l=l.text:typeof l.value!="undefined"&&(l=l.value,D&&D.length&&(l=Globalize.format(l,D,r._getCulture())))}else t.annoMethod==="values"&&(t.id==="x"&&(l=r._getXTickText(l)),D&&D.length?(c&&(l=n.fromOADate(f)),l=Globalize.format(l,D,r._getCulture())):h&&t.id==="y"&&(l=Globalize.format(f,"p0",r._getCulture())));P=n.extend(!0,{},i.textStyle,e.textStyle,A.style,t.textStyle),p=r._paintMajorMinor(e.origin,v,m,f,b,g,T,a,o,u,E,C,S,l,k,e.textVisible,P,A.textAlign,A.width?t.labelWidth:null,y,w),p&&(p.elements&&(H=H.concat(p.elements)),d=p.textInfo),d&&(M.push(d),O<d.len&&(O=d.len)),_++}),A.width||n.each(M,function(e,t){var n=t.text,r=(t.len-O)/2;r=A.textAlign==="near"?r*-1:r,l?n.transform(Raphael.format("...T{0},{1}",r,0)):n.transform(Raphael.format("...T{0},{1}",0,r))}),n.each(d,function(n,i){var s;i>m&&i<v&&(s=r._paintMajorMinor(e.origin,v,m,i,w,y,N,a,o,u,E,C,x,null,L,e.textVisible,P,A.textAlign,A.width?t.labelWidth:null),s&&s.elements&&(H=H.concat(s.elements)))}),e.text&&e.text.length>0&&H.push(r._paintAxisText(e,t)),t.isPartAxis&&!t.isLastAxis&&H.push(r.canvas.path(["M",o.x.toString(),(o.y+t.vOffset/2).toString(),"H",(o.x+t.maxExtent*2).toString()].join())),H},t.prototype._paintAxisText=function(e,t){if(!e.text||e.text.length===0)return;var r=this,i=r.options,s=e.text,o=e.compass,u=e.alignment,a=t.bounds||r.canvasBounds,f=a.startX,l=a.startY,c=a.endX,h=a.endY,p=f,d=l,v=t.textBounds,m=r._isVertical(o),g=t.axisTextOffset,y=t.majorTickRect,b=e.tickMajor.position,w=m?y.width:y.height,E=null,S=null,x=0,T=0,N=0,C=0;E=n.extend(!0,{},r.options.textStyle,e.textStyle),E["margin-top"]&&(x=parseFloat(E["margin-top"])),E["margin-left"]&&(T=parseFloat(E["margin-left"])),E["margin-right"]&&(N=parseFloat(E["margin-right"])),E["margin-bottom"]&&(C=parseFloat(E["margin-bottom"])),b==="cross"?w/=2:b==="inside"&&(w=0);if(m){switch(u){case"near":d=h-v.width/2;break;case"center":d=(l+h)/2;break;case"far":d=l+v.width/2}o==="west"?p=f-(t.offset+g+w+v.height/2+N):p=c+t.offset+g+w+v.height/2+T}else{switch(u){case"near":p=f+v.width/2;break;case"center":p=(f+c)/2;break;case"far":p=c-v.width/2}o==="north"?d=l-(t.offset+g+w+v.height/2+C):d=h+t.offset+g+w+v.height/2+x}return S=r._text(p,d,s),n.wijraphael.addClass(n(S.node),i.wijCSS.axisText),r.axisEles.push(S),S.attr(E),m&&S.transform("...R-90"),S},t.prototype._resetMinorTickValues=function(e,t){var n=0,r=0,i=null,s=null;for(n=e.length-1;n>=0;n--){i=e[n];for(r=t.length-1;r>=0;r--)s=t[r],i===s&&e.splice(n,1)}return e},t.prototype._getXTickText=function(e){return e},t.prototype._adjustTickValuesForCandlestickChart=function(e){return e},t.prototype._paintMajorMinor=function(e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=this,x=f.x,T=f.y,N=S.options,C=-1,k=-1,L=!0,A=S.canvasBounds,O=null,M=null,_=[],D=[],P=null,H={"stroke-width":2},B={text:null,len:0},j=null,F={},I=[],q=S.axisCompass;switch(a){case"south":s==="inside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T+h+u.height:k=T+h+u.height+c/2,L=!1;break;case"west":s==="outside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x-(h+c):C=x-(h+c/2);break;case"north":s==="outside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T-(h+c):k=T-(h+c/2),L=!1;break;case"east":s==="inside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x+h+u.width:C=x+h+u.width+c/2}return L?(T+=(i-r)/(t-r)*(l.y-f.y),D=["M",A.startX,T,"H",A.endX],v.visible&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(n.extend(!0,{},v.style,E)),S.axisEles.push(P)),k=T,s!=="none"&&(_=["M",x,T,"h",u.width],p["stroke-width"]=u.height)):(x+=(i-r)/(t-r)*(l.x-f.x),D=["M",x,A.startY,"V",A.endY],v.visible&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),n.wijraphael.addClass(n(P.node),N.wijCSS.axisGridLine),P.attr(n.extend(!0,{},v.style,E)),S.axisEles.push(P)),b?C=x-b/2:C=x,s!=="none"&&(_=["M",x,T,"v",u.height],p["stroke-width"]=u.width)),s!=="none"&&(M=S.canvas.path(_.join(" ")),n.wijraphael.addClass(n(M.node),N.wijCSS.axisTick),H=n.extend(H,p),M.attr(H),S.axisEles.push(M),I.push(M)),d!==null&&m&&(b?(B=S.canvas.wrapText(C,k,d.toString(),b,y,g),n.wijraphael.addClass(n(B.node),N.wijCSS.axisLabel)):(B=S._text(C,k,d.toString()),n.wijraphael.addClass(n(B.node),N.wijCSS.axisLabel),B.attr(g)),S.axisEles.push(B),I.push(B),m||B.hide(),y!=="center"&&(j=B.getBBox(),O={text:B,len:L?j.width:j.height})),F={textInfo:O,elements:I},F},t.prototype._paintPlotArea=function(){},t.prototype._paintChartLabels=function(){var e=this,t=e.options.chartLabels;t&&t.length&&n.each(t,function(t,r){var i;r=n.extend(!0,{compass:"east",attachMethod:"coordinate",attachMethodData:{seriesIndex:-1,pointIndex:-1,x:-1,y:-1},offset:0,visible:!1,text:"",connected:!1},r);if(r.visible){i=e._getChartLabelPointPosition(r);if(typeof i.x!="number"||typeof i.y!="number")return!1;e._setChartLabel(r,i)}})},t.prototype._getChartLabelPointPosition=function(e){},t.prototype._setChartLabel=function(e,t,r,i){var s=this,o=e.compass,u=s.options,a=n.extend(!0,{},u.textStyle,u.chartLabelStyle),f=s._text(0,0,e.text).attr(a),l=e.offset,c=0,h=0,p=null,d=null;n.wijraphael.addClass(n(f.node),u.wijCSS.labelText),s.chartLabelEles.push(f),p=s._getCompassTextPosition(o,f.wijGetBBox(),l,t,r),l&&e.connected&&(d=s.canvas.path("M"+t.x+" "+t.y+"L"+p.endPoint.x+" "+p.endPoint.y),n.wijraphael.addClass(n(d.node),u.wijCSS.labelConnect),d.attr(i),s.chartLabelEles.push(d)),c=p.endPoint.x+p.offsetX,h=p.endPoint.y+p.offsetY,f.transform(Raphael.format("...T{0},{1}",c,h)).toFront()},t.prototype._getCompassTextPosition=function(e,t,r,i,s){var o=0,u=0,a={x:0,y:0};switch(e.toLowerCase()){case"east":s=0;break;case"west":s=180;break;case"north":s=90;break;case"south":s=270;break;case"northeast":s=45;break;case"northwest":s=135;break;case"southeast":s=315;break;case"southwest":s=225}return s>=0&&s<22.5||s>337.5&&s<360?o=t.width/2:s>=22.5&&s<67.5?(o=t.width/2,u=-1*t.height/2):s>=67.5&&s<112.5?u=-1*t.height/2:s>=112.5&&s<157.5?(o=-1*t.width/2,u=-1*t.height/2):s>=157.5&&s<202.5?o=-1*t.width/2:s>=202.5&&s<247.5?(o=-1*t.width/2,u=t.height/2):s>=247.5&&s<292.5?u=t.height/2:(o=t.width/2,u=t.height/2),a=n.wijraphael.getPositionByAngle(i.x,i.y,r,s),{endPoint:a,offsetX:o,offsetY:u}},t.prototype._isTouchEnabled=function(){return n.support.isTouchEnabled&&n.support.isTouchEnabled()},t.prototype._mouseDown=function(e,t){this._trigger("mouseDown",e,t)},t.prototype._mouseUp=function(e,t){this._trigger("mouseUp",e,t)},t.prototype._mouseOver=function(e,t){this._trigger("mouseOver",e,t)},t.prototype._mouseOut=function(e,t){this._trigger("mouseOut",e,t)},t.prototype._mouseMove=function(e,t){this._trigger("mouseMove",e,t)},t.prototype._click=function(e,t){this._trigger("click",e,t)},t.prototype._mouseMoveInsidePlotArea=function(e,t){var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=0,c=[],h=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(h?u=this._calculatePositionByX(t.top):u=this._calculatePositionByX(t.left),u&&this.indicatorLine&&u.x!==this.lastIndicatorPosition&&(n.each(u.data,function(e,t){t.visible&&c.push(t)}),c.length>0&&(a=r.canvasBounds,h?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(c),h?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY}),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(c),this.lastIndicatorObjects=c)))},t.prototype._calculatePositionByX=function(e){var t=this,n=t.pointXs,r,i=t.dataPoints;return n&&n.length>0&&(r=this._calculatePositionByXInternal(e,n)),i?{x:r,data:i[r.toString()]}:null},t.prototype._calculatePositionByXInternal=function(e,t){var n=t.length,r,i;return n===1?t[0]:n===2?Math.abs(e-t[0])>Math.abs(e-t[1])?t[1]:t[0]:(r=parseInt((n/2).toString()),e>t[r]?i=t.slice(r):i=t.slice(0,r+1),this._calculatePositionByXInternal(e,i))},t.prototype._mouseMoveOutsidePlotArea=function(e,t){this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip())},t.prototype._mouseDownInsidePlotArea=function(e,t){this.isPlotAreaMouseDown=!0;var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=[],c=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(r._setTooltip(),c?u=this._calculatePositionByX(t.top):u=this._calculatePositionByX(t.left),u&&(n.each(u.data,function(e,t){t.visible&&l.push(t)}),l.length>0&&(a=r.canvasBounds,c?f=["M",a.startX,0,"H",a.endX]:f=["M",0,a.startY,"V",a.endY],this.indicatorLine&&this.indicatorLine.wijRemove(),this.indicatorLine=o.path(f),this.indicatorLine.attr(s.style),c?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(l),c?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY}),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(l),this.lastIndicatorObjects=l)),e.preventDefault())},t.prototype._indicatorLineShowing=function(e){this.lastIndicatorObjects&&this._removeIndicatorStyles(this.lastIndicatorObjects)},t.prototype._removeIndicatorStyles=function(e){},t.prototype._mouseUpInsidePlotArea=function(e,t){this.isPlotAreaMouseDown=!1,this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip()),this.lastIndicatorObjects&&(this._removeIndicatorStyles(this.lastIndicatorObjects),this.lastIndicatorObjects=null)},t.prototype._bindLiveEvents=function(){this._bindLegendEvents(),this._bindCanvasEvents(),this._bindResizeEvent()},t.prototype._bindResizeEvent=function(){var e=this;this.resizeIntent=250,this.options.autoResize&&this.chartElement.on("resize."+this.widgetName,function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.redraw()},e.resizeIntent)})},t.prototype._unbindResizeEvent=function(){this.chartElement.off("resize."+this.widgetName)},t.prototype._bindCanvasEvents=function(){var e=this,t=e.chartElement,r="",i="."+this.widgetName;n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?t.css("touch-action","none"):window.navigator.msPointerEnabled&&t.css("-ms-touch-action","none")),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(r="wij"),t.bind(r+"mousemove"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseMoveInsidePlotArea(n,s)}),t.bind(r+"mouseout"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e.options.disabled;if(o)return;if(s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY)return;e._mouseMoveOutsidePlotArea(n,s)}),e.options.indicator&&e.options.indicator.visible&&t.bind(r+"mousedown"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseDownInsidePlotArea(n,s)}).bind(r+"mouseup"+i,function(n){var r=t.offset(),i=e.canvasBounds,s={left:(document.compatMode==="CSS1Compat"?n.pageX:n.clientX)-r.left,top:(document.compatMode==="CSS1Compat"?n.pageY:n.clientY)-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseUpInsidePlotArea(n,s)})},t.prototype._unbindCanvasEvents=function(){n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action",""):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","")),this.element.unbind("."+this.widgetName)},t.prototype._bindLegendEvents=function(){var e=this,t=e.chartElement;t.delegate("."+e.options.wijCSS.legend,"click.wijchartcore",function(t){if(e.options.disabled)return;var r=n(t.target);r[0].tagName&&r[0].tagName==="tspan"&&(r=r.parent()),e._legendClick(r)})},t.prototype._legendClick=function(e){if(typeof e.data("index")=="undefined")return;var t=this,r=t.options.legend,i=e.data("index"),s=e.data("legendIndex"),o=t.chartElement.data("fields"),u=t.seriesEles,a,f=t.legendIcons[s],l=t.legends[s],c=r.textWidth?n(l[0].node):n(l.node),h=i,p;o&&o.seriesEles&&(u=o.seriesEles),t.legendDots&&t.legendDots.length>i&&(p=t.legendDots[i]),r.reversed&&(h=t.legends.length-1-i),a=u[h],t.legends.length&&(c.data("hidden")?(a&&t._showSerieEles(a),l.attr("opacity",c.data("textOpacity")),f.attr("opacity",c.data("iconOpacity")),p&&p.attr("opacity",c.data("dotOpacity")),c.data("hidden",!1)):(a&&t._hideSerieEles(a),c.data("textOpacity")||(r.textWidth?c.data("textOpacity",l[0].attr("opacity")||1):c.data("textOpacity",l.attr("opacity")||1)),c.data("iconOpacity")||c.data("iconOpacity",f.attr("opacity")||1),p&&!c.data("dotOpacity")&&c.data("dotOpacity",f.attr("opacity")||1),l.attr("opacity","0.3"),f.attr("opacity","0.3"),p&&p.attr("opacity","0.3"),c.data("hidden",!0)))},t.prototype._showSerieEles=function(e){},t.prototype._hideSerieEles=function(e){},t.prototype._unbindLiveEvents=function(){var e=this,t=e.options,n=this.chartElement,r=e.widgetName;n.undelegate("."+t.wijCSS.legend,".wijchartcore").undelegate("."+t.wijCSS.legend,"wijchartcore"),this._unbindCanvasEvents(),this._unbindResizeEvent()},t.prototype._isBarChart=function(){return!1},t.prototype._isPieChart=function(){},t.prototype._validateSeriesData=function(e){return!1},t.prototype._getOffsetOfAxis=function(e){return 0},t.prototype._calculateParameters=function(e,t){var n=this,r=t.max,i=t.min,s=t.autoMax&&e.autoMax,u=t.autoMin&&e.autoMin,a=t.autoMajor&&e.autoMajor,f=t.autoMinor&&e.autoMinor,l=null,c=null,h=e.annoMethod==="valueLabels",p=0,d=0,v=0,m=0,g=0,y=e.isTime,b=n.options.adjustMinValue;s&&r!==Number.MIN_VALUE&&e.id!=="x"&&n._isBarChart()&&r<0&&.5*(r-i)>-r&&(r=0),u&&i!==Number.MAX_VALUE&&e.id!=="x"&&n._isBarChart()&&i>0&&.5*(r-i)>i&&(i=0),r===i&&(i!==0&&(i-=1),r+=1),m=r-i;if(y){l=t.annoFormatString;if(!l||l.length===0)l=o.getTimeDefaultFormat(r,i),e.annoFormatString=l;g=o.niceTimeUnit(0,l)}c=o.nicePrecision(m),e.tprec=c,s&&(y?(d=o.roundTime(r,g,!0),d<r?r=d+g:r=d):(d=o.precCeil(-c,r),typeof d=="number"&&(r=d))),u&&(y?(v=o.roundTime(i,g,!1),v>i?i=v-g:i=v):(v=o.precFloor(-c,i),typeof v=="number"&&(i=v))),e.max=r,e.min=i,e.originalMax=r,e.originalMin=i,e.annoFormatString=l,e.tinc=g;if(a||f)m=r-i,n._calculateMajorMinor(t,e),p=t.unitMajor,s&&p!==0&&!y&&!h&&(m=r-parseInt((r/p).toString(),10)*p,m!==0&&(r+=p-m,r=o.precCeil(-c,r))),u&&p!==0&&!y&&!h&&(m=i-parseInt((i/p).toString(),10)*p,m!==0&&(m<0&&(m+=p),i-=Math.abs(m),i=o.precFloor(-c,i))),u&&p!==0&&!h&&(typeof b=="undefined"||b===!1)&&u&&i===t.min&&i-p>=0&&e.id==="y"&&(i-=p);e.max=r,e.min=i,e.originalMax=r,e.originalMin=i},t.prototype._supportStacked=function(){return!1},t.prototype._getDataExtreme=function(e){var t={txx:0,txn:0,tyx:0,tyn:0},n;return n=this._getDataExtremes(t,e),n?(n.txn>n.txx&&(n.txn=0,n.txx=1),n):(t.txn>t.txx&&(t.txn=0,t.txx=1),t)},t.prototype._getDataExtremes=function(e,t){var r=this,i=r.options,o=i.seriesList,u=i.stacked&&r._supportStacked(),a=i.is100Percent,f=i.axis,l=r.axisInfo,c=[],h=[],p=[],d=[],v,m={y:{}},g=f.x.valueLabels,y=l.x.annoMethod,b=l.y.annoMethod,w=0;return!o||o.length===0?e:(n.each(o,function(e,t){var r=t.data,i=[],s=[],o,u=0;if(r.xy&&n.isArray(r.xy)){o=r.xy.length;while(u<o)i.push(r.xy[u]),s.push(r.xy[u+1]),u+=2;r.x=i,r.y=s}}),r.seriesGroup&&n.each(r.seriesGroup,function(t,i){var o=[],g=[],y=parseInt(t,10);n.each(i,function(t,i){var s,a=0,f=0,l,d,v,m,y,b,E;if(i.type==="pie"||i.type==="sharedPie")return!0;i=n.extend(!0,{display:"show"},i);if(i.display==="exclude")return!0;E=r._isTrendline(i);if(!E){s=i.data,l=[].concat(s.xy),d=l.length,c=[].concat(s.x),o=[].concat(s.y);if(s.xy&&d){c=[],o=[];while(f<d)c[a]=l[f],o[a]=l[f+1],f+=2,a++,s.x=c,s.y=o}else s.x||(c=[],n.each(o,function(e){c.push(e)}),s.x=c);u&&t>0&&n.each(o,function(e){o[e]+=p[e]}),p=o}else{if(!i.isValid||!i.innerData)return!0;h=i.innerData.x,g=i.innerData.y}v=r._getMinMaxValue(E?h:c),m=r._getMinMaxValue(E?g:o),t===0?(e.tyx=m.max,e.tyn=m.min):(e.tyx<m.max&&(e.tyx=m.max),e.tyn>m.min&&(e.tyn=m.min)),w===0?(e.txx=v.max,e.txn=v.min):(e.txx<v.max&&(e.txx=v.max),e.txn>v.min&&(e.txn=v.min)),w++}),a&&(e.tyx=1,e.tyn=0),m.y[t]={tyx:e.tyx,tyn:e.tyn},m.txx=e.txx,m.txn=e.txn,e.tyx=0,e.tyn=0;if(o.length){v=s.getFirstValidListValue(o);if(r._isDate(v))l.y[t].isTime=!0;else{if(typeof v=="undefined")return!0;typeof v!="number"&&(n.each(o,function(e,t){var n=f.y.annoFormatString,i=t;n&&n.length>0?i=Globalize.format(i,n,r._getCulture()):i=i.toString(),d.push({text:i,value:t,gridLine:!1})}),l.y[t].annoMethod="valueLabels",!f.y[y].valueLabels&&f.y[y].valueLabels.length===0?l.y[t].valueLabels=d:l.y[t].valueLabels=f.y[y].valueLabels,f.x.max=o.length-1,f.x.min=0,f.y[y].unitMajor=1,f.x.unitMinor=.5,l.y[t].autoMax=!1,l.y[t].autoMin=!1,l.y[t].autoMajor=!1,l.y[t].autoMinor=!1)}}}),c.length&&(v=s.getFirstValidListValue(c),y==="valueLabels"&&g&&g.length>0&&(l.x.valueLabels=g),r._isDate(v)?l.x.isTime=!0:typeof v!="number"&&(n.each(c,function(e,t){var i={},s,o;if(y==="valueLabels"&&g&&g.length&&e<g.length){s=g[e],o=typeof s;if(o==="string")s={text:s};else if(o==="number"||r._isDate(s))s={value:s}}i=n.extend({text:t,value:e,gridLine:!1},s),d.push(i)}),f.x.max=c.length-1,f.x.min=0,f.x.unitMajor=1,f.x.unitMinor=.5,l.x.annoMethod="valueLabels",l.x.valueLabels=d,l.x.autoMax=!1,l.x.autoMin=!1,l.x.autoMajor=!1,l.x.autoMinor=!1)),m)},t.prototype._isVertical=function(e){return e==="west"||e==="east"},t.prototype._isDate=function(e){return e?typeof e=="object"&&e.constructor===Date:!1},t.prototype._getMinMaxValue=function(e){var t=this,r={min:0,max:0},i=0,o;if(!e.length)return r;o=s.getFirstValidListValue(e);if(typeof o!="number"){if(!t._isDate(o))return r.min=0,r.max=e.length-1,r;r.min=o,r.max=o}else r.min=o,r.max=o;for(i=0;i<e.length;i++){if(e[i]===null||typeof e[i]=="undefined")continue;if(typeof e[i]=="number"&&isNaN(e[i]))continue;e[i]<r.min?r.min=e[i]:e[i]>r.max&&(r.max=e[i])}return t._isDate(r.min)&&(r.min=n.toOADate(r.min),r.max=n.toOADate(r.max)),r},t.prototype._getTickTextForCalculateUnit=function(e,t,r){var i=t.isTime,s=t.annoFormatString;return i?Globalize.format(n.fromOADate(e),s,this._getCulture()):n.round(e,r).toString()},t.prototype._calculateMajorMinor=function(e,t){var r=this,i=r.options,s=t.bounds||r.canvasBounds,u=e.autoMajor,a=e.autoMinor,f=t.max,l=t.min,c=t.isTime,h=t.tinc,p=t.annoFormatString,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=f-l,T=0,N=0,C=0,k=0;if(u){S=n.extend(!0,{},i.textStyle,e.textStyle,e.labels.style);if(!c){w=o.nicePrecision(x),E=w+1;if(E<0||E>15)E=0}d=this._getTickTextForCalculateUnit(f,t,w),v=this._getTickTextForCalculateUnit(l,t,w),y=r._text(-1e3,-1e3,d).attr(S),b=r._text(-1e3,-1e3,v).attr(S),m=y.wijGetBBox(),g=b.wijGetBBox(),y.wijRemove(),y=null,b.wijRemove(),b=null,m.width<g.width&&(m.width=g.width),m.height<g.height&&(m.height=g.height),r._isVertical(e.compass)?(N=s.endY-s.startY-t.vOffset-t.axisTextOffset,k=N/m.height,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)):(T=s.endX-s.startX-t.vOffset-t.axisTextOffset,k=T/m.width,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)),k=x,C>0&&(x/=C,c?x<h?k=h:k=o.niceTimeUnit(x,t.annoFormatString):(t.tprec=o.nicePrecision(x),k=o.niceNumber(2*x,-w,!0),k<x&&(k=o.niceNumber(x,-w+1,!1)),k<x&&(k=o.niceTickNumber(x)))),e.unitMajor=k}a&&e.unitMajor&&!isNaN(e.unitMajor)&&(e.unitMinor=e.unitMajor/2)},t}(e.wijmoWidget);t.wijchartcore=l;var c=function(){function e(){this.width=null,this.height=null,this.wijCSS=new h,this.culture="",this.cultureCalendar="",this.autoResize=!0,this.seriesList=[],this.seriesStyles=[{stroke:"#00cc00",opacity:.9,"stroke-width":1},{stroke:"#0099cc",opacity:.9,"stroke-width":1},{stroke:"#0055cc",opacity:.9,"stroke-width":1},{stroke:"#2200cc",opacity:.9,"stroke-width":1},{stroke:"#8800cc",opacity:.9,"stroke-width":1},{stroke:"#d9007e",opacity:.9,"stroke-width":1},{stroke:"#ff0000",opacity:.9,"stroke-width":1},{stroke:"#ff6600",opacity:.9,"stroke-width":1},{stroke:"#ff9900",opacity:.9,"stroke-width":1},{stroke:"#ffcc00",opacity:.9,"stroke-width":1},{stroke:"#ffff00",opacity:.9,"stroke-width":1},{stroke:"#ace600",opacity:.9,"stroke-width":1}],this.seriesHoverStyles=[{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5}],this.marginTop=25,this.marginRight=25,this.marginBottom=25,this.marginLeft=25,this.textStyle={fill:"#888","font-size":10,stroke:"none"},this.header={text:"",style:{fill:"none",stroke:"none"},textStyle:{"font-size":18,fill:"#666",stroke:"none"},compass:"north",visible:!0},this.footer={text:"",style:{fill:"#fff",stroke:"none"},textStyle:{fill:"#000",stroke:"none"},compass:"south",visible:!1},this.legend={text:"",textMargin:{left:2,top:2,right:2,bottom:2},style:{fill:"none",stroke:"none"},textWidth:null,textStyle:{fill:"#333",stroke:"none"},titleStyle:{"font-weight":"bold",fill:"#000",stroke:"none"},compass:"east",orientation:"vertical",visible:!0,reversed:!1,size:{}},this.axis={x:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!0,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"near",width:null},compass:"south",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]},y:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!1,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"center",width:null},compass:"west",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!0,style:{stroke:"#999999","stroke-width":.5,"stroke-dasharray":"none"}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]}},this.hint={enable:!0,content:null,contentStyle:{fill:"#d1d1d1","font-size":16},title:null,titleStyle:{fill:"#d1d1d1","font-size":16},style:{fill:"#000000","stroke-width":2},animated:"fade",showAnimated:"fade",hideAnimated:"fade",duration:120,showDuration:120,hideDuration:120,easing:"",showEasing:"",hideEasing:"",showDelay:0,hideDelay:150,compass:"north",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"#000"},beforeShowing:null,closeBehavior:"auto",relativeTo:"mouse",isContentHtml:!1},this.indicator={visible:!1,style:{stroke:"#000000"}},this.showChartLabels=!0,this.chartLabelStyle={},this.chartLabelFormatString="",this.disableDefaultTextStyle=!1,this.shadow=!0,this.dataSource=null,this.data=null,this.beforeSeriesChange=null,this.seriesChanged=null,this.beforePaint=null,this.painted=null,this.seriesTransition={enabled:!0,duration:400,easing:">"}}return e}();t.wijchartcore_options=c;var h=function(e){function t(){e.apply(this,arguments),this.headerText="wijchart-header-text",this.headerContainer="wijchart-header-container",this.footerText="wijchart-footer-text",this.footerContainer="wijchart-footer-container",this.legendTitle="wijchart-legend-title",this.legendText="wijchart-legend-text",this.legend="wijchart-legend",this.legendDot="chart-legend-dot",this.legendIcon="wijchart-legend-icon",this.legendContainer="wijchart-legend-container",this.legendTextCover="wijchart-legend-textCover",this.axis="wijchart-axis",this.axisText="wijchart-axis-text",this.axisGridLine="wijchart-axis-gridline",this.axisTick="wijchart-axis-tick",this.axisLabel="wijchart-axis-label",this.labelText="wijchart-label-text",this.labelConnect="wijchart-label-connect",this.canvasObject="wijchart-canvas-object",this.stateDisabled="ui-state-disabled",this.trendlineElement="trendlineElement",this.trendlineTracker="trendlinetracker"}return __extends(t,e),t}(e.wijmo_css);t.wijchartcore_css=h,l.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new c)})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var t=this,n=t.options,r=t._getDefFill(),i;n.horizontal&&(i=n.axis.y.compass||"south",n.axis.y.compass=n.axis.x.compass||"west",n.axis.x.compass=i),$.extend(!0,{compass:"east"},n.hint),t._handleChartStyles(),r=null,e.prototype._create.call(this),t.chartElement.addClass(n.wijCSS.barChart)},n.prototype._setOption=function(t,n){if(t==="horizontal"){var r=this.options.axis;r.x.compass=n?"west":"south",r.y.compass=n?"south":"west"}e.prototype._setOption.call(this,t,n)},n.prototype.destroy=function(){var t=this,n=t.options,r=t.chartElement,i=r.data("fields"),s=i&&i.bars;r.removeClass(n.wijCSS.barChart),e.prototype.destroy.call(this),s&&s.length&&$.each(s,function(e,t){t=null}),r.data("fields",null)},n.prototype._clearChartElement=function(){var t=this,n=t.options,r=t.chartElement.data("fields");e.prototype._clearChartElement.call(this),t.element.removeData("plotInfos"),n.seriesTransition.enabled||r&&r.aniBarsAttr&&(r.aniBarsAttr=null)},n.prototype._isBarChart=function(){return!0},n.prototype.getBar=function(e){var t=this.chartElement,n=t.data("fields");return n.chartElements.bars[e]},n.prototype._paintTooltip=function(){var t=this,n=t.chartElement,r=n.data("fields");e.prototype._paintTooltip.call(this),t.tooltip&&r&&r.trackers&&r.trackers.length&&(t.tooltip.setTargets(r.trackers),t.tooltip.setOptions({relatedElement:r.trackers[0]}))},n.prototype._getTooltipText=function(e,t){var n=$(t.node),r,i;return n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i={data:r,value:r.value,label:r.label,total:r.total,target:t,fmt:e,x:r.x,y:r.y},$.proxy(e,i)()},n.prototype._preHandleSeriesData=function(){e.prototype._preHandleSeriesData.call(this);var t=this,n=t.options,r=n.seriesList;$.each(r,function(e,n){var r=n.data;r.y&&$.each(r.y,function(e,n){try{t._isDate(n)||(r.y[e]=parseFloat(n))}catch(i){r.y[e]=1}})})},n.prototype._paintPlotArea=function(){var e=this,t=e.options;this.barchartRender=new o(this.chartElement,{canvas:e.canvas,bounds:e.canvasBounds,tooltip:e.tooltip,widgetName:e.widgetName,horizontal:t.horizontal,stacked:t.stacked,axis:t.axis,seriesList:t.seriesList,seriesStyles:t.seriesStyles,seriesHoverStyles:t.seriesHoverStyles,seriesTransition:t.seriesTransition,showChartLabels:t.showChartLabels,textStyle:t.textStyle,chartLabelStyle:t.chartLabelStyle,chartLabelFormatString:t.chartLabelFormatString,shadow:t.shadow,disabled:t.disabled,clusterOverlap:t.clusterOverlap,clusterWidth:t.clusterWidth,clusterSpacing:t.clusterSpacing,is100Percent:t.is100Percent,clusterRadius:t.clusterRadius,animation:t.animation,culture:e._getCulture(),isYTime:e.axisInfo.y[0].isTime,isXTime:e.axisInfo.x.isTime,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),wijCSS:t.wijCSS,widget:this}),this.barchartRender.render()},n.prototype._showSerieEles=function(e){var n=this.options.stacked;if(e.isTrendline){t.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t&&t.bar&&(t.bar.show(),t.bar.shadow&&t.bar.shadow.show(),t.bar.tracker&&t.bar.tracker.show(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!0)),t&&t.dcl&&t.dcl.show(),t&&t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.show()}),n&&this.stackedSeriesObjs&&this._handleStackedVisible(e.length)},n.prototype._hideSerieEles=function(e){var n=this.options.stacked,r=e.length;if(e.isTrendline){t.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t&&t.bar&&(t.bar.hide(),t.bar.shadow&&t.bar.shadow.hide(),t.bar.tracker&&t.bar.tracker.hide(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!1)),t&&t.dcl&&t.dcl.hide(),t&&t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.hide()}),n&&this.stackedSeriesObjs&&this._handleStackedVisible(e.length)},n.prototype._handleStackedVisible=function(e){function n(e){return $(e.bar.node).data("wijchartDataObj").visible!==!1}function r(e,t,n){e&&(e.bar&&(e.bar.attr("x",t),e.bar.attr("width",n)),e.bar.shadow&&(e.bar.shadow.attr("x",t),e.bar.shadow.attr("width",n)),e.bar.tracker&&(e.bar.tracker.attr("x",t),e.bar.tracker.attr("width",n)))}function i(e,t,n){e&&(e.bar&&(e.bar.attr("y",t),e.bar.attr("height",n)),e.bar.shadow&&(e.bar.shadow.attr("y",t),e.bar.shadow.attr("height",n)),e.bar.tracker&&(e.bar.tracker.attr("y",t),e.bar.tracker.attr("height",n)))}function s(e){if(e){var t=e.rect.x,n=e.rect.width;e.bar&&(e.bar.attr("x",t),e.bar.attr("width",n)),e.bar.shadow&&(e.bar.shadow.attr("x",t),e.bar.shadow.attr("width",n)),e.bar.tracker&&(e.bar.tracker.attr("x",t),e.bar.tracker.attr("width",n))}}function o(e){if(e){var t=e.rect.y,n=e.rect.height;e.bar&&(e.bar.attr("y",t),e.bar.attr("height",n)),e.bar.shadow&&(e.bar.shadow.attr("y",t),e.bar.shadow.attr("height",n)),e.bar.tracker&&(e.bar.tracker.attr("y",t),e.bar.tracker.attr("height",n))}}var t=this;if(this.stackedSeriesObjs){$.each(this.stackedSeriesObjs,function(e,n){t.options.horizontal?s(n):o(n)});var u=[],a=this.stackedSeriesCount;for(var f=0;f<a;f++)u.push(n(this.stackedSeriesObjs[f+"0"]));var l=[],c=-1,h=-1,p=-1;for(var f=u.length-1;f>=0;f--)u[f]&&(p-f>1&&l.push({start:p,end:f+1}),p=f);p>0&&l.push({start:p,end:0}),$.each(l,function(n,s){var o=s.start,u=s.end,a,f,l,c,h,p;for(var d=0;d<e;d++)a=t.stackedSeriesObjs[o+""+d],f=t.stackedSeriesObjs[u+""+d],t.options.horizontal?(l=f.rect.x,h=a.rect.width+a.rect.x-f.rect.x,r(a,l,h)):(l=a.rect.y,h=f.rect.height+f.rect.y-a.rect.y,i(a,l,h))})}},n.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.bar&&t.bar.attr(t.hoverStyle)})},n.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.bar&&t.bar.attr(t.style)})},n.prototype._supportStacked=function(){return!0},n.prototype._calculateParameters=function(t,n){e.prototype._calculateParameters.call(this,t,n);if(t.id==="x"){var r=n.unitMinor,i=this._getBarAdjustment(t);i===0?i=r:r<i&&r!==0&&(i=Math.floor(i/r)*r),t.min-=i,t.max+=i,this._calculateMajorMinor(n,t)}},n.prototype._getBarAdjustment=function(e){var t=0,n=this.options,r=e.max,i=e.min,s=n.seriesList,o=0,u=0;for(o=0;o<s.length&&s[o].data.x;o++)u=s[o].data.x.length,t<u&&(t=u);return t>1?(r-i)/t*n.clusterWidth*.0125:t===1?(i===0&&r===1&&(i=-1,e.min=i),(r-i)*.0125):0},n}(t.wijchartcore);t.wijbarchart=n;var r=function(e){function t(){e.apply(this,arguments),this.barChart="wijmo-wijbarchart",this.barLabel="wijbarchart-label",this.barElement="wijbarchart",this.barTracker="bartracker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijbarchart_css=r;var i=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijbarchart')",this.wijCSS=new e.chart.wijbarchart_css,this.horizontal=!0,this.stacked=!1,this.is100Percent=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.animation={enabled:!0,duration:400,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);n.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new i),n.prototype.widgetEventPrefix="wijbarchart",$.wijmo.registerWidget("wijbarchart",n.prototype);var s=function(){function e(e){this.x=e,this.paSpec=[]}return e.prototype.stackValues=function(){var e=this,t=e.paSpec.length,n;t>1&&(n=e.paSpec[0],$.each(e.paSpec,function(e,t){if(e===0)return!0;t.y+=n.y,n=t}))},e}(),o=function(){function e(e,t){this.options=t,this.element=e,this._init()}return e.prototype._init=function(){var e=this.options,n=e.horizontal,r=e.axis.x,i=e.bounds;this.startLocation={x:i.startX,y:i.startY},this.width=i.endX-this.startLocation.x,this.height=i.endY-this.startLocation.y,this.nSeries=e.seriesList.length,this.seriesList=$.arrayClone(e.seriesList),this.seriesStyles=[].concat(e.seriesStyles.slice(0,this.nSeries)),this.seriesHoverStyles=[].concat(e.seriesHoverStyles.slice(0,this.nSeries)),this.xscale=t.ChartUtil.getScaling(n,r.max,r.min,n?this.height:this.width),this.xlate=t.ChartUtil.getTranslation(n,this.startLocation,r.max,r.min,this.xscale),this.fields=this.element.data("fields")||{},this.chartElements=this.fields.chartElements||{},this.aniBarsAttr=this.fields.aniBarsAttr,this.canvas=e.canvas,this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]},e.prototype._paintShadow=function(e,n,r){this.options.shadow&&t.ChartUtil.paintShadow(e,n,r)},e.prototype.getMinDX=function(e){var t=Number.MAX_VALUE,n=e.length,r,i;n==1&&(t=Math.min(e[0].x-this.options.axis.x.min,this.options.axis.x.max-e[0].x));for(r=1;r<n;r++)i=e[r].x-e[r-1].x,i<t&&i>0&&(t=i);return t===Number.MAX_VALUE?2:t},e.prototype.stackValues=function(e){return $.each(e,function(e,t){t.stackValues()}),e},e.prototype.barPointList=function(e,n,r,i){function c(e,t){var n=l(t),r=t.length,i=null,u=0,a=0,f=0,c=!0,h=0,p=!1;n&&(u=n.length),o&&(f=o.length);if(n===undefined)return;$.each(n,function(t,n){c?(c=!1,h=n.x):(h===n.x?p=!0:p=!1,h=n.x);while(a<f&&o[a].x<n.x)a++;a<f?o[a].x!==n.x?(i=new s(n.x),o.splice(a,0,i),f=o.length):i=o[a]:(i=new s(n.x),o.push(i),f=o.length),i.paSpec.push({y:n.y,sIdx:e,pIdx:t,dupl:p})})}var o=[],u=[],a=this,f=a.options.canvas.set(),l=t.ChartUtil.getXSortedPoints;return $.each(e,function(e,s){var o;s.isTrendline?(o=[],t.TrendlineRender.renderSingleTrendLine(s,a.seriesStyles[e],a.seriesHoverStyles[e],a.options.axis,null,a.fieldsAniPathAttr,a.options.animation,a.options.seriesTransition,e,a.options.bounds,a.canvas,a.paths,u,a.animationSet,a.aniPathsAttr,a.options.wijCSS,o,i),o.length&&(n[e]=o[0],r.push(o[0].path))):c(e,s)}),o},e.prototype.adjustToLimits=function(e,t,n){return e<t?t:e>n?n:e},e.prototype.transformPoints=function(e,t,n,r,i,s){return $.each(s,function(s,o){var u=o.x,a=o.y,f=0;o.x=t*u+r,o.y=n*a+i,e&&(f=o.x,o.x=o.y,o.y=f)}),s},e.prototype.paintDefaultChartLabel=function(e,t,n,r){var i=this.options,s=i.horizontal,o=i.canvas,u=i.wijCSS,a=i.culture,f=$.extend(!0,{},i.textStyle,i.chartLabelStyle),l=s?{x:e.x+e.width,y:e.y+e.height/2}:{x:e.x+e.width/2,y:e.y},c=i.chartLabelFormatString,h,p,d=this.options.widget,v=t;return r&&(f=$.extend(!0,f,r)),n&&(v=$.fromOADate(t)),c&&c.length?v=Globalize.format(v,i.chartLabelFormatString,a):n||(v=$.round(v,2)),p=d._text.call(d,l.x,l.y,v).attr(f),$.wijraphael.addClass($(p.node),u.barLabel),h=p.getBBox(),s?p.attr({x:l.x+h.width/2}):p.attr({y:l.y-h.height/2}),p},e.prototype.paintBar=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=this.options,m=v.stacked,g=v.horizontal,y=v.is100Percent,b=r.min,w=r.max,E=i.min,S=i.max,x=r.scale,T=r.late,N=i.scale,C=i.late,k,L,A,O,M=null,_,D=s,P=s["stroke-width"],H=s.stroke,B,j,F,I,q=-1;d.origin!==null&&(q=N*d.origin+C);if(m)if(y){c>0&&(e.height=t/c);if(l||l===0)e.y=l/c,e.height-=e.y}else{e.height=t;if(l||l===0)e.height-=l,e.y=l}else if(l||l===0)e.x+=e.width*(1-f),e.height=t;L=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}],A=(b<=L[0].x&&L[0].x<=w||b<=L[1].x&&L[1].x<=w)&&(E<=L[0].y&&L[0].y<=S||E<=L[1].y&&L[1].y<=S),L[0].x=this.adjustToLimits(L[0].x,b,w),L[0].y=this.adjustToLimits(L[0].y,E,S),L[1].x=this.adjustToLimits(L[1].x,b,w),L[1].y=this.adjustToLimits(L[1].y,E,S),L=this.transformPoints(g,x,N,T,C,L),L[0].x>L[1].x&&(k=L[0].x,L[0].x=L[1].x,L[1].x=k),L[0].y>L[1].y&&(k=L[0].y,L[0].y=L[1].y,L[1].y=k),O={x:L[0].x,y:L[0].y,width:L[1].x-L[0].x,height:L[1].y-L[0].y},A&&!m&&(O.width===0&&(O.width=1),O.height===0&&(O.height=1,O.y-=1)),v.showChartLabels&&(M=this.paintDefaultChartLabel(O,t,h,p)),_=s.r?s.r:v.clusterRadius,_&&(D=$.extend(!0,{},s,{r:0})),H!=="none"&&P&&(P=parseInt(P,10));if(!P||isNaN(P))P=0;return j=O.width,F=O.height,P>1&&(P--,j=O.width-P,F=O.height-P/2,O.x+=P/2),j<0&&(j=0),F<0&&(F=0),o?(q===-1&&(g?q=a.x+P/2:q=a.y+n-P/2),_?(g?(t>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,0,0,_,_).hide():B=this.canvas.roundRect(O.x,O.y,j,F,_,_,0,0).hide(),I=this.canvas.rect(q,O.y,O.width,O.height)):(t>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,_,0,0,_).hide():B=this.canvas.roundRect(O.x,O.y,j,F,0,_,_,0).hide(),I=this.canvas.rect(O.x,q,O.width,O.height)),this._paintShadow(I,u),I.wijAttr(D),I.bar=B):(g?B=this.canvas.rect(q,O.y,O.width,F):B=this.canvas.rect(O.x,q,j,O.height),I=B),M&&(M.attr({opacity:0}),I.chartLabel=M),I.left=O.x,I.top=O.y,I.width=j,I.height=F,I.r=_):_?g?t>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,0,0,_,_):B=this.canvas.roundRect(O.x,O.y,j,F,_,_,0,0):t>d.origin?B=this.canvas.roundRect(O.x,O.y,j,F,_,0,0,_):B=this.canvas.roundRect(O.x,O.y,j,F,0,_,_,0):B=this.canvas.rect(O.x,O.y,j,F),this._paintShadow(B,u),o&&_&&B.shadow&&B.shadow.hide(),B.wijAttr(s),{rect:O,dcl:M,animatedBar:I,bar:B}},e.prototype.paintClusters=function(e,n,r,i,s,o,u,a,f,l){var c=this,h=c.options,p=h.clusterOverlap/100,d=h.clusterWidth/100,v=1,m=h.clusterSpacing+v,g=e.length,y=h.canvas,b=h.stacked,w=h.horizontal,E=h.axis.y,S=h.widget,x=h.wijCSS,T=h.animation&&h.animation.enabled,N,C,k,L=[],A=[],O=[],M=[],_=[],D=[],P=y.set(),H=[],B,j=0;return f||l?($.each(e,function(e,t){var n=$.extend(!0,{},t);n.data&&n.data.y&&n.data.y.length&&f&&$.each(n.data.y,function(e,t){n.data.y[e]=$.toOADate(t)}),n.data&&n.data.x&&n.data.x.length&&l&&$.each(n.data.x,function(e,t){n.data.x[e]=$.toOADate(t)}),_.push(n)}),N=c.barPointList(_,D,H,w)):N=c.barPointList(e,D,H,w),b&&(N=c.stackValues(N)),C=c.getMinDX(N)*d,$.each(n,function(e,t){t["stroke-width"]&&!isNaN(t["stroke-width"])&&(j!==0?j=Math.min(parseFloat(t["stroke-width"]),j):j=parseFloat(t["stroke-width"]))}),g-=H.length,g>1&&!b&&(p-=N.length*(g-1)*(m+j*2)/(w?u:o),C/=g*(1-p)+p),$.each(N,function(l,d){var m=d.paSpec,g=m.length,y,N,_,H;b?y=C:y=C*(g*(1-p)+p),N={x:d.x-y/2,y:0,width:C,height:m[0].y},$.each(m,function(l,d){if(N.height===undefined)return!0;var g=d.sIdx,y=d.pIdx,b=n[g],C=e[g],j,F=C.yAxis||0,I=E[F]||E,q=s[F]||s;M[g]||(M[g]=[]),D[g]||(D[g]=[]),c.yscale=t.ChartUtil.getScaling(!w,I.max,I.min,w?o:u),c.ylate=t.ChartUtil.getTranslation(!w,a,I.max,I.min,c.yscale),q.late=c.ylate,q.scale=c.yscale,H=c.paintBar(N,d.y,u,i,q,b,T,v,a,p,l>0?m[l-1].y:null,m[m.length-1].y,f,C.textStyle,I),_=H.bar,j=_.clone().attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}),C.visible===!1&&(_.hide(),H.dcl&&H.dcl.hide(),j.hide(),_.shadow&&_.shadow.hide()),$.wijraphael.addClass($(_.node),x.canvasObject+" "+x.barElement),B=$.extend(!1,{index:y,bar:_,type:"bar",style:b,hoverStyle:r[g],x:C.data.x[y],y:C.data.y[y],visible:!0},C),$(_.node).data("wijchartDataObj",B),S.dataPoints=S.dataPoints||{},S.pointXs=S.pointXs||[],h.horizontal?k=$.round(H.rect.y+H.rect.height/2,2):k=$.round(H.rect.x+H.rect.width/2,2),S.dataPoints[k.toString()]||(S.dataPoints[k.toString()]=[],S.pointXs.push(k)),S.dataPoints[k.toString()].push(B),$(j.node).data("owner",$(_.node)),$.wijraphael.addClass($(j.node),x.barElement+" "+x.barTracker),H.bar.tracker=j,P.push(j),A.push(_),H.animatedBar&&O.push(H.animatedBar),H.dcl&&L.push(H.dcl),M[g][y]=H.rect,D[g][y]=H,_=null,j=null})}),$.each(L,function(e,t){t.toFront()}),P.toFront(),{bars:A,animatedBars:O,rects:M,chartLabels:L,seriesEles:D,trackers:P,trendLines:H}},e.prototype.processStackedElement=function(e){var t={},n=0;$.each(e,function(e,r){if(!$.isArray(r))return!0;if(r.isTrendline)return!0;$.each(r,function(e,r){r.sIndex=n,r.stackIndex=e,t[n+""+e]=r}),n+=1}),this.options.widget.stackedSeriesObjs=t,this.options.widget.stackedSeriesCount=n},e.prototype.playAnimation=function(e){var n=this,r=n.options,i=r.animation,s=i&&i.enabled,o=r.horizontal,u=n.fields.trendLines,a=r.seriesTransition,f,l,c=[],h,p=r.chartLabelStyle,d={txx:r.widget.extremeValue.txx,txn:r.widget.extremeValue.txn,tyx:r.widget.extremeValue.y[0].tyx,tyn:r.widget.extremeValue.y[0].tyn};s&&(f=i.duration||2e3,l=i.easing||"linear",e&&$.each(e,function(e,r){var i;o?(r.wijAttr({width:0}),i={width:r.width,x:r.left}):(r.wijAttr({height:0}),i={height:r.height,y:r.top}),n.aniBarsAttr&&a.enabled&&n.aniBarsAttr.length>e&&(h=t.ChartUtil.getDiffAttrs(n.aniBarsAttr[e],r.attr()),o?(h.x=n.aniBarsAttr[e].x,h.width=n.aniBarsAttr[e].width):(h.y=n.aniBarsAttr[e].y,h.height=n.aniBarsAttr[e].height),h.path&&delete h.path,r.attr(h),f=a.duration,l=a.easing),c.push($.extend(!0,{},r.attr(),i)),r.tracker&&r.tracker.hide(),r.stop().wijAnimate(i,f,l,function(){var e=this,t=e.r,n=e;e.chartLabel&&(p&&p.opacity?e.chartLabel.wijAnimate({opacity:p.opacity},250):e.chartLabel.wijAnimate({opacity:1},250)),e.tracker&&(e.tracker.show(),e.tracker.attr({width:e.width,height:e.height,x:e.attr("x"),y:e.attr("y")})),t&&(n=e.bar,n.show(),n.shadow&&n.shadow.show(),e.shadow&&(e.shadow.wijRemove(),e.shadow=null),e.wijRemove(),e=null)})}),u&&u.length&&t.TrendlineRender.playAnimation(f,l,a,n.animationSet,r.bounds,n.paths,n.fieldsAniPathAttr,null,r.axis,d),n.aniBarsAttr=c)},e.prototype.bindLiveEvents=function(){var e=this.options,n=e.wijCSS,r=e.widgetName,i=e.disabled,s=e.mouseDown,o=e.mouseUp,u=e.mouseOver,a=e.mouseOut,f=e.mouseMove,l=e.click,c=this.element,h=$.isFunction,p="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(p="wij"),$("."+n.barElement,c[0]).on(p+"mousedown."+r,function(e){if(i)return;if(h(s)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),s.call(c,e,n),n=null}}).on(p+"mouseup."+r,function(e){if(i)return;if(h(o)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),o.call(c,e,n),n=null}}).on(p+"mouseover."+r,function(e){if(i)return;if(h(u)){var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,n.hoverStyle?(n.initTransform=r.matrix.toTransformString(),r.wijAttr(n.hoverStyle)):r&&r.wijAttr({opacity:"0.8"}),u.call(c,e,n),n=null}}).on(p+"mouseout."+r,function(e){if(i)return;var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,n.hoverStyle?(r.transform(""),r.shadow&&r.shadow.transform(""),r.wijAttr(n.style)):r&&r.wijAttr({opacity:"1"}),h(a)&&a.call(c,e,n),n=null}).on(p+"mousemove."+r,function(e){if(i)return;var t=$(e.target),n,r;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),r=n.bar,h(f)&&f.call(c,e,n),n=null}).on(p+"click."+r,function(e){if(i)return;if(h(l)){var t=$(e.target),n;t.data("owner")&&(t=t.data("owner")),n=t.data("wijchartDataObj"),l.call(c,e,n)}if($.support.isTouchEnabled&&$.support.isTouchEnabled())return e.preventDefault(),e.stopPropagation(),!1}),t.TrendlineRender.bindLiveEvents(c,r,s,o,u,a,f,l,i,n,!1)},e.prototype.unbindLiveEvents=function(){var e=this.options,n=e.widgetName,r=e.wijCSS,i=this.element;$("."+r.barElement,i[0]).off(n).off("."+n),t.TrendlineRender.unbindLiveEvents(i,n,r)},e.prototype.render=function(){var e=this.options,t=e.horizontal,n=e.stacked,r=this.seriesList,i=this.seriesStyles,s=this.seriesHoverStyles,o=e.axis.x,u=e.axis.y,a=e.isYTime,f=e.isXTime,l;this.unbindLiveEvents(),t&&!n&&(r.reverse(),i.reverse(),s.reverse());if(this.nSeries===0)return;l=this.paintClusters(r,i,s,{min:o.min,max:o.max,late:this.xlate,scale:this.xscale},u,this.width,this.height,this.startLocation,a,f),this.element.data("plotInfos",{xscale:this.xscale,xlate:this.xlate,yscale:this.yscale,ylate:this.ylate,rects:l.rects}),this.fields.trendLines=l.trendLines,this.playAnimation(l.animatedBars),this.chartElements.bars=l.bars,this.chartElements.animatedBars=l.animatedBars,this.chartElements.chartLabels=l.chartLabels,this.fields.seriesEles=l.seriesEles,this.fields.trackers=l.trackers,this.fields.chartElements||(this.fields.chartElements={}),t&&!n&&this.fields.seriesEles.reverse(),n&&this.processStackedElement(this.fields.seriesEles),$.extend(!0,this.fields.chartElements,this.chartElements),this.fields.aniBarsAttr=this.aniBarsAttr,this.element.data("fields",this.fields),this.bindLiveEvents()},e}();t.BarChartRender=o})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var t=this.options;this._handleChartStyles(),e.prototype._create.call(this),this.chartElement.addClass(t.wijCSS.lineChart),t.type==="area"&&this.chartElement.addClass(t.wijCSS.areaChart)},n.prototype.destroy=function(){var t=this.options;this.chartElement.removeClass(t.wijCSS.lineChart),t.type==="area"&&this.chartElement.removeClass(t.wijCSS.areaChart),e.prototype.destroy.call(this),this.aniPathsAttr&&this.aniPathsAttr.length&&($.each(this.aniPathsAttr,function(e,t){t=null}),this.aniPathsAttr=null)},n.prototype.getLinePath=function(e){var t=this.chartElement.data("fields"),n,r;if(t&&t.chartElements){n=t.chartElements;if(n.paths&&n.paths.length)return n.paths[e]}return r},n.prototype.getLineMarkers=function(e){var t=this.options,n=this.chartElement.data("fields"),r,i;if(t.seriesList&&t.seriesList[e].markers&&t.seriesList[e].markers.visible&&n&&n.chartElements){r=n.chartElements;if(r.markersSet&&r.markersSet.length)return r.markersSet[e]}return i},n.prototype._showSerieEles=function(e){var t=this.options,n;e.markers&&$.each(e.markers,function(e,t){var n=$(t.node).data("wijchartDataObj");if(n&&n.lineSeries&&n.lineSeries.markers&&!n.lineSeries.markers.visible)return!0;t.show()}),e.dcl&&$.each(e.dcl,function(e,n){t.showChartLabels&&n.show()}),e.path&&(n=$(e.path.node).data("wijchartDataObj"),!n.visible&&n.markers&&n.markers.visible||(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.area&&e.path.area.show(),e.path.tracker&&e.path.tracker.show()),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!0}))},n.prototype._hideSerieEles=function(e){e.markers&&$.each(e.markers,function(e,t){t.hide()}),e.dcl&&$.each(e.dcl,function(e,t){t.hide()}),e.path&&(e.path.hide(),e.path.shadow&&e.path.shadow.hide(),e.path.area&&e.path.area.hide(),e.path.tracker&&e.path.tracker.hide(),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!1}))},n.prototype._supportStacked=function(){return!0},n.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.marker&&t.marker.attr(t.markerHoverStyle)})},n.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.marker&&(t.marker.attr(t.markerStyle),t.marker.transform("s1"))})},n.prototype._mouseDownInsidePlotArea=function(t,n){e.prototype._mouseDownInsidePlotArea.call(this,t,n),this._clearHoverState(!0)},n.prototype._mouseDown=function(t,n){e.prototype._mouseDown.call(this,t,n)},n.prototype._mouseUp=function(t,n){e.prototype._mouseUp.call(this,t,n)},n.prototype._mouseOver=function(n,r){if(!r||r.type!=="line"&&r.type!=="marker"&&r.type!==t.ChartConsts.strTrendline)return;if(this.indicatorLine)return;e.prototype._mouseOver.call(this,n,r),r.type==="marker"&&(r=r.lineSeries);if(r.path.removed)return;if(this.hoverLine!==r||this.hoverLine===null)this.isNewLine=!0,this.hoverLine&&(this.hoverLine.path.removed||((this.options.type==="line"||r.type===t.ChartConsts.strTrendline)&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),r.lineHoverStyle&&r.path.wijAttr(r.lineHoverStyle),this.hoverLine=r,this.hoverPoint=null,this.hoverVirtualPoint=null},n.prototype._mouseOut=function(t,n){e.prototype._mouseOut.call(this,t,n)},n.prototype._mouseMove=function(t,n){e.prototype._mouseMove.call(this,t,n)},n.prototype._click=function(t,n){e.prototype._click.call(this,t,n)},n.prototype._mouseMoveInsidePlotArea=function(n,r){var i=this,s=this.tooltip,o=this.options.hint,u,a,f=0,l,c,h,p,d=null,v=null,m=null,g=o.title,y=o.content,b=$.isFunction(g),w=$.isFunction(y),E=0;s&&(m=s.getOptions());if(this.hoverLine&&!this.indicatorLine){this.isNewLine&&(o.enable&&s&&s.hide(),this.isNewLine=!1);if(this.hoverLine.type!==t.ChartConsts.strTrendline){u=this.hoverLine.lineMarkers,a=this.hoverLine.virtualMarkers,f=-1,l={x:0,y:0};if(u&&u.length){$.each(u,function(e,t){if(t.removed)return!0;var n=t.wijGetBBox(),i=n.x+n.width/2,s=Math.abs(i-r.left);if(e===0||s<E)E=s,f=e,l={x:i,y:n.y+n.height/2}});if(this.hoverPoint&&this.hoverPoint.index===f)return;if(f>-1){if(u[f].removed)return;c=$(u[f].node).data("wijchartDataObj"),c&&(this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.removed||(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1"))),c.isSymbol||c.marker.removed||c.marker.wijAttr(c.markerHoverStyle)),this.hoverPoint=c,this.hoverVirtualPoint=a[f]}}else{$.each(a,function(e,t){var n=Math.abs(t.x-r.left);if(e===0||n<E)E=n,f=e,l={x:t.x,y:t.y}});if(this.hoverVirtualPoint&&this.hoverVirtualPoint.index===f)return;f>-1&&(this.hoverPoint=null,this.hoverVirtualPoint=a[f])}if(s){v=this.hoverVirtualPoint,h=v.valX,p=v.valY;if(b||w)b&&(m.title=function(){var e={pointIndex:f,lineIndex:i.hoverLine.index,x:h,y:p,label:i.hoverLine.label,data:v,fmt:g},t=$.proxy(e.fmt,e),n=t();return n}),w&&(m.content=function(){var e={pointIndex:f,lineIndex:i.hoverLine.index,x:h,y:p,label:i.hoverLine.label,data:v,fmt:y},t=$.proxy(e.fmt,e),n=t();return n});d=$.extend({stroke:this.hoverLine.path.attr("stroke")},o.style),m.style.stroke=d.stroke,s.showAt(l)}}}e.prototype._mouseMoveInsidePlotArea.call(this,n,r)},n.prototype._mouseMoveOutsidePlotArea=function(t,n){this._clearHoverState(!1),e.prototype._mouseMoveOutsidePlotArea.call(this,t,n)},n.prototype._clearHoverState=function(e){var n=this.tooltip,r=this.options.hint;r.enable&&n&&!e&&n.hide(),this.hoverLine&&(this.hoverLine.path.removed||((this.options.type==="line"||this.hoverLine.type===t.ChartConsts.strTrendline)&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},n.prototype._paintLegendIcon=function(t,n,r,i,s,o,u,a,f,l){var c=this,h,p,d;if(f.isTrendline)return e.prototype._paintLegendIcon.call(this,t,n,r,i,s,o,u,a,f,l);h=this.options,p=c.canvas.path(Raphael.format("M{0},{1}L{2},{3}",t,n+i/2,t+r,n+i/2)),$(p.node).data("legendIndex",o).data("index",u),c.legendIcons.push(p);if(s){var v=h.legend.size.height;p.attr($.extend(!0,{},s,{"stroke-width":v}))}$.wijraphael.addClass($(p.node),a);var m=f.markerStyle;m=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},m),s["stroke-dasharray"]&&p.attr({"stroke-width":1,"stroke-dasharray":s["stroke-dasharray"]});if(f.markers&&f.markers.visible){var g=f.markers.type;g||(g="circle"),d=this.canvas.paintMarker(g,t+r/2,n+i/2,3),$.wijraphael.addClass($(d.node),Raphael.format("{0} {1} {2}",h.wijCSS.legend,h.wijCSS.legendDot,h.wijCSS.canvasObject)),d.attr(m),$(d.node).data("index",u).data("legendIndex",o),this.legendDots.push(d)}return p},n.prototype._paintLegend=function(){var t=this.options,n=0,r=0,i=0,s=null,o=t.seriesList,u=t.seriesStyles,a=null,f=null,l=null,c=0,h=0,p=null,d=null,v=null;$.extend(!0,t,{legend:{size:{width:30,height:3}}}),e.prototype._paintLegend.call(this)},n.prototype._paintPlotArea=function(){var e=this.options,t;this.aniPathsAttr||(this.aniPathsAttr=[]),this.linechartRender=new s(this.chartElement,{bounds:this.canvasBounds,widgetName:this.widgetName,canvas:this.canvas,tooltip:this.tooltip,wijCSS:e.wijCSS,stacked:e.stacked,hole:e.hole,type:e.type,axis:e.axis,animation:e.animation,seriesTransition:e.seriesTransition,seriesList:e.seriesList,seriesStyles:e.seriesStyles,seriesHoverStyles:e.seriesHoverStyles,showChartLabels:e.showChartLabels,chartLabelStyle:e.chartLabelStyle,chartLabelFormatString:e.chartLabelFormatString,isXTime:this.axisInfo.x.isTime,isYTime:this.axisInfo.y[0].isTime,disabled:e.disabled,culture:this._getCulture(),hint:e.hint,aniPathsAttr:this.aniPathsAttr,chartLabelEles:this.chartLabelEles,mouseDown:$.proxy(this._mouseDown,this),mouseUp:$.proxy(this._mouseUp,this),mouseOver:$.proxy(this._mouseOver,this),mouseOut:$.proxy(this._mouseOut,this),mouseMove:$.proxy(this._mouseMove,this),click:$.proxy(this._click,this),widget:this,extremeValue:{txx:this.extremeValue.txx,txn:this.extremeValue.txn,tyx:this.extremeValue.y[0].tyx,tyn:this.extremeValue.y[0].tyn}}),this.linechartRender.render()},n.prototype._clearChartElement=function(){e.prototype._clearChartElement.call(this),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},n}(t.wijchartcore);t.wijlinechart=n;var r=function(e){function t(){e.apply(this,arguments),this.lineChart="wijmo-wijlinechart",this.areaChart="wijmo-wijareachart",this.lineLabel="wijlinechart-label",this.lineElement="wijlinechart",this.areaElement="wijlinechart-area",this.lineTracker="linetracker",this.canvasMarker="wijchart-canvas-marker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijlinechart_css=r;var i=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijlinechart')",this.wijCSS=new e.chart.wijlinechart_css,this.stacked=!1,this.hole=null,this.type="line",this.animation={enabled:!0,direction:"horizontal",duration:2e3,easing:"easeInCubic"},this.seriesTransition={enabled:!0,duration:2e3,easing:"easeInCubic"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);n.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new i),$.wijmo.registerWidget("wijlinechart",n.prototype);var s=function(){function e(e,t){this.options=t,this.element=e}return e.prototype.render=function(){var e=this.element,t=this.options,n=t.wijCSS,r=t.bounds,i=t.widgetName,s=t.canvas,o=t.animation,u=t.seriesTransition,a=t.hint,f=t.tooltip,l=t.mouseDown,c=t.mouseUp,h=t.mouseOver,p=t.mouseOut,d=t.mouseMove,v=t.click,m=[],g=[],y=[],b=[],w=[],E=t.disabled,S=s.set(),x=t.aniPathsAttr,T=[],N,C=e.data("fields")||{},k=[],L=t.culture,A=t.widget,O=t.extremeValue,M={enable:!1,left:-10,top:-10,right:10,bottom:10};this.widget=A,this.renderLineChart(t,T,x,b,w,m,S,g,y,k,L),!t.axis.x.autoMax&&t.axis.x.max<O.txx&&(M.enable=!0,M.right=0),!t.axis.x.autoMin&&t.axis.x.min>O.txn&&(M.enable=!0,M.left=0),!t.axis.y.autoMax&&t.axis.y.max<O.tyx&&(M.enable=!0,M.top=0),!t.axis.y.autoMin&&t.axis.y.min>O.tyn&&(M.enable=!0,M.bottom=0),o.enabled||u.enabled?this.playAnimation(o,u,S,r,b,x,M):M.enable&&this.setClipRect(M,S,r),x.length=0,$.each(T,function(e,t){x.push(t)}),this.unbindLiveEvents(e,i,n),this.bindLiveEvents(e,s,r,i,l,c,h,p,d,v,E,a,y,f,n),N={paths:b,shadowPaths:w,markersSet:m,animationSet:S,symbols:g},C.chartElements||(C.chartElements={}),C.seriesEles=k,$.extend(!0,C.chartElements,N),e.data("fields",C)},e.prototype.setClipRect=function(e,t,n){var r=n.endX-n.startX-e.left+e.right,i=n.endY-n.startY-e.top+e.bottom;t.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",n.startX+e.left,n.startY+e.top,r,i))},e.prototype.playAnimation=function(e,t,n,r,i,s,o){var u=this,a=e.duration,f=e.easing;e.direction==="horizontal"?(s&&s.length&&t.enabled&&(a=t.duration,f=t.easing),this.playHAnimation(a,f,n,r,i,o)):(o.enable&&this.setClipRect(o,n,r),$.each(i,function(e,n){if(typeof n=="undefined"||n===null)return!0;s&&s.length>e&&t.enabled?(a=t.duration,f=t.easing,u.playVAnimation(n,s,e,a,f)):n.straight&&u.playVStraightAnimation(n,a,f)}))},e.prototype.playVAnimation=function(e,n,r,i,s){var o,u;e.shadow&&e.shadow.hide(),e.tracker&&e.tracker.hide(),o=n[r],o&&o.path&&(u=t.ChartUtil.getDiffAttrs(o.path,e.attr())),$.isEmptyObject(u)||(e.attr(o.path),e.wijAnimate(u,i,s,function(){e.shadow&&e.visible!==!1&&e.shadow.show(),e.tracker&&e.visible!==!1&&e.tracker.show()})),$.each(e.markers,function(e,n){var r=t.ChartUtil.getDiffAttrs(o.markers[e],n.attr());$.isEmptyObject(r)||(n.attr(o.markers[e]),n.wijAnimate(r,i,s))}),e.labels&&$.each(e.labels,function(e,n){var r=t.ChartUtil.getDiffAttrs(o.labels[e],n.attr()),u=o.labels[e];u&&u.text&&delete u.text,$.isEmptyObject(r)||(n.attr(u),n.wijAnimate(r,i,s))}),e.area&&(u=t.ChartUtil.getDiffAttrs(o.area,e.area.attr()),$.isEmptyObject(u)||(e.area.attr(o.area),e.area.wijAnimate(u,i,s)))},e.prototype.playVStraightAnimation=function(e,t,n){var r,i,s;e.shadow&&e.shadow.hide(),e.tracker&&e.tracker.hide(),r=e.straight,i=e.attr().path,e.attr({path:r}),e.wijAnimate({path:i},t,n,function(){e.shadow&&e.visible!==!1&&e.shadow.show(),e.tracker&&e.visible!==!1&&e.tracker.show()}),$.each(e.markers,function(e,r){if(r.straight){var i=r.attr().cy;r.attr({cy:r.straight}),r.wijAnimate({cy:i},t,n)}}),e.area&&(s=e.area,r=s.straight,i=s.attr().path,s.attr({path:r}),s.wijAnimate({path:i},t,n))},e.prototype.playHAnimation=function(e,t,n,r,i,s){$.each(i,function(e,t){t.tracker&&t.tracker.hide()});var o=s.enable,u=r.endX-r.startX-s.left+s.right,a=r.endY-r.startY-s.top+s.bottom;n.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",r.startX+s.left,r.startY+s.top,a)),n.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",r.startX+s.left,r.startY+s.top,u,a)},e,t,function(){this.tracker&&this.visible!==!1&&this.tracker.show();if(Raphael.vml&&!o){var e=null,t=null,n=this.node;n&&n.clipRect&&(e=this.attrs,delete e["clip-rect"],n.clipRect=null,t=$(n).parent(),t.before(n),t.remove(),this.attr(e),e.src&&e.src.length&&this.attr({src:e.src}),e.gradient&&e.gradient.length&&e.fill==="none"&&this.attr({fill:e.gradient}))}})},e.prototype.renderLineChart=function(e,n,r,i,s,o,u,a,f,l,c){var h=this,p=e.wijCSS,d=e.bounds,v=e.canvas,m=e.stacked,g=e.hole,y=e.type,b=e.axis,w=e.animation,E=e.seriesTransition,S=!1,x=e.seriesList,T=e.seriesStyles,N=e.seriesHoverStyles,C=e.showChartLabels,k=e.chartLabelStyle,L=e.chartLabelFormatString,A=e.isXTime,O=e.isYTime,M=e.chartLabelEles,_,D,P,H,B,j,F=[],I=[],q,R,U,z,W;$.each(x,function(e,X){var V=[],J=[],K=[],Q,G,Y,Z,et,tt,nt=[];if(X.display==="exclude")return!0;tt=T[e],Y=N[e];if(X.isTrendline)return t.TrendlineRender.renderSingleTrendLine(X,tt,Y,b,g,r,w,E,e,d,v,i,s,u,n,p,l),!0;X=$.extend(!0,{display:"show",fitType:"line",markers:{visible:!1,type:"circle"},visible:!0},X),Q=X.data,G=$.extend({stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},tt),Z=X.markerStyle,Z=$.extend({fill:G.stroke,stroke:G.stroke,opacity:1,width:3},Z),et=$.extend(!0,{},Y,{transform:"s1.5","stroke-width":1},x.markerHoverStyle),B=[].concat(Q.x),j=[].concat(Q.y),U=v.set(),R=[],H=X.fitType,z=!1,X.markers.symbol&&X.markers.symbol.length&&(z=!0),_=v.set();if(!r||r.length<=e||w.enabled&&!E.enabled)S=!0;S&&j.length>0&&(D=t.ChartUtil.getFirstValidListValue(j),O&&(D=$.toOADate(D)),P=t.ChartUtil.getLastValidListValue(j),O&&(P=$.toOADate(P))),W=h.processYValues(j,X.display,g,m,F),$.each(j,function(e,t){q=B[e],A&&(q=$.toOADate(q)),t=j[e];if(W[e].isHole){if(X.display==="excludeHole")return!0;if(!W[e].isValue)return!0}O&&(t=$.toOADate(t));if(q===undefined)return!1;R=h.renderPoint(d,v,K,R,U,V,u,_,J,M,L,S,D,P,q,t,Q.y[e],b,H,A,O,e,Z,et,X,z,C,a,B,j,W,X.display,m,nt,c,p)}),h.renderPath(v,d,X,i,s,f,Y,Z,et,U,o,u,R,n,K,G,k,V,J,_,e,y,I,m,nt,p),l.push({markers:U,path:i[i.length-1],shadowPath:s[s.length-1],dcl:_})}),$.each($.merge([],i).reverse(),function(e,t){t.toFront(),t.area&&t.area.toFront()}),$.each(i,function(e,t){t.tracker&&t.tracker.toFront()}),$.each(i,function(e,t){t.markers&&t.markers.toFront()})},e.prototype.renderPath=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){var k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z=this.options.axis.y.origin;U=n.endY,this.options.axis&&this.options.axis.y&&z!==null&&z!==undefined&&!isNaN(z)&&(U=this._calculatePoint(z,"y")),k=e.path(p.join(" ")),k.straight=v.join(" "),t.ChartUtil.paintShadow(k,1,"#cccccc"),E===0&&(x.length=0,p.length>1?(_=p[1],D=p[p.length-2]):(_=n.startX,D=n.endX),$.merge(x,["L",_,U,"L",D,U])),P=e.path(p.join(" ")),k.tracker=P,m["stroke-width"]?H=10+parseFloat(m["stroke-width"]):H=10,P.attr({"stroke-width":H,stroke:"#C0C0C0",opacity:.01}),$.wijraphael.addClass($(P.node),Raphael.format("{0} {1} {2}",C.canvasObject,C.lineElement,C.lineTracker)),$(P.node).data("owner",$(k.node)),S==="area"?(m.fill&&m.fill!=="none"?(L=m.fill,delete m.fill):L=m.stroke,A=.5,O=1,m["fill-opacity"]&&m["fill-opacity"]!=="none"&&(A=m["fill-opacity"]),m.opacity&&m.opacity!=="none"&&(O=m.opacity),k.wijAttr(m),p.length>1?_=p[1]:_=n.startX,T?(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z")):(I=Raphael.parsePathString(k.attr("path")),I&&I.length>0&&(p=[],$.each(I,function(e,t){$.each(t,function(e,t){p.push(t)}),t[0]==="M"&&(_=t[1]),e<I.length-1&&I[e+1][0]==="M"&&(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z")),e===I.length-1&&(p.push("V"),p.push(U),p.push("H"),p.push(_),p.push("Z"))}))),M=e.path(p.join(" ")),$.wijraphael.addClass($(M.node),C.areaElement),M.wijAttr({fill:L,opacity:O,"fill-opacity":A,stroke:"none"}),v.push("V"),v.push(U),v.push("H"),v.push(_),v.push("Z"),M.straight=v.join(" "),k.area=M,h.push(M),d.push({path:$.extend(!0,{},k.attr()),area:$.extend(!0,{},M.attr()),markers:y,labels:b})):(R=$.extend(!0,{},m),R.fill&&delete R.fill,k.wijAttr(R),u.fill&&delete u.fill,d.push({path:$.extend(!0,{},k.attr()),markers:y,labels:b})),k.markers=l,i.push(k),k.shadow&&(s[E]=k.shadow),h.push(k),o[E]={lineStyle:m,lineHoverStyle:u,markerStyle:a,markerHoverStyle:f},(!r.markers.visible||r.display==="hide")&&l.hide();if(!r.visible||r.display==="hide")k.hide(),k.tracker&&k.tracker.hide(),k.shadow&&k.shadow.hide(),k.area&&k.area.hide(),k.visible=!1;r.markers.style&&l.attr(r.markers.style),l.toFront(),w.length&&(B=$.extend(!0,{},g),r.textStyle&&(B=$.extend(!0,B,r.textStyle)),w.attr(B),w.toFront(),k.labels=w),c[E]=l,r.index=E,r.type="line",r.path=k,r.lineMarkers=l,r.lineStyle=m,r.lineHoverStyle=u,r.virtualMarkers=N,$.wijraphael.addClass($(k.node),Raphael.format("{0} {1}",C.canvasObject,C.lineElement)),$(k.node).data("wijchartDataObj",r)},e.prototype._calculatePoint=function(e,t){var n=this.options.axis,r=$.isArray(n[t])?n[t][0]:n[t],i=this.options.bounds,s=r.min,o=r.max,u,a;return t==="x"?(a=(i.endX-i.startX)/(o-s),i.startX+(e-s)*a):(a=(i.endY-i.startY)/(o-s),i.endY-(e-s)*a)},e.prototype.renderPoint=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H){var B=e.endX-e.startX,j=e.endY-e.startY,F=g.x.min,I=g.y.min,q=g.x.max,R=g.y.max,U=B/(q-F),z=j/(R-I),W,X,V,J=0,K,Q,G,Y,Z=T.markers.visible,et=this.widget,tt;return isNaN(d)||typeof d=="string"?V=E:V=d,J=this._calculatePoint(V,"x"),K=this._calculatePoint(v,"y"),O[E].x=J,O[E].y=K,c&&(Q=h+(p-h)/(q-F)*(V-F),Q=e.endY-(Q-I)*z,n.push(O[E].idx?"L":"M"),n.push(J),n.push(Q)),O[E].isHole?r:(r=this.getPathArrByFitType(r,y,E,A.length,e,L,A,J,K,b,w,d,v,O,M,_),C&&(Y=this.renderChartLabel(t,w,v,l,J,K,P,H),f.push(Y),u.push(Y),a.push($.extend(!0,{},Y.attr()))),Z&&(W=this.renderMarker(t,k,N,T.markers,E,J,K,S,H),X=W.dot,c&&(X.straight=Q)),G={},G.valX=L[E],G.valY=m,G.index=E,G.type="marker",G.lineSeries=T,G.x=J,G.y=K,G.markerStyle=S,G.markerHoverStyle=x,G.visible=!0,Z&&(G.marker=X,G.isSymbol=W.isSymbol,$(X.node).data("wijchartDataObj",G),i.push(X),s.push($.extend(!0,{},X.attr())),o.push(X)),et.dataPoints=et.dataPoints||{},et.pointXs=et.pointXs||[],tt=$.round(J,2),et.dataPoints[tt.toString()]||(et.dataPoints[tt.toString()]=[],et.pointXs.push(tt)),et.dataPoints[tt.toString()].push(G),D.push(G),r)},e.prototype.processYValues=function(e,n,r,i,s){var o=[],u=0,a=0;return $.each(e,function(f,l){u||(a=f);var c={isHole:!1,isValue:!0,idx:u,firstYIdx:a,x:0,y:0};u++,t.ChartUtil.isHolefunction(l,r)&&(i?e[f]=0:(c.isHole=!0,n==="excludeHole"?(u--,c.idx=0):(u=0,c.idx=0),!t.ChartUtil.isHolefunction(r,undefined)&&l===r?c.isValue=!0:c.isValue=!1)),o.push(c),i&&f<s.length&&(e[f]+=s[f])}),s.length=0,$.merge(s,e),o},e.prototype.renderMarker=function(e,t,n,r,i,s,o,u,a){var f,l=null,c=!1,h,p;return n&&(f=r.symbol,$.each(f,function(n,r){if(r.index===i)return l=e.image(r.url,s-r.width/2,o-r.height/2,r.width,r.height),t.push(l),c=!0,!1})),l===null&&(h=r.type,p=u.width,l=e.paintMarker(h,s,o,p),r.visible&&l.attr(u)),$.wijraphael.addClass($(l.node),Raphael.format("{0} {1} {2}",a.canvasObject,a.lineElement,a.canvasMarker)),{dot:l,isSymbol:c}},e.prototype.renderChartLabel=function(e,t,n,r,i,s,o,u){var a,f,l,c=this.options.widget;return a=t?$.fromOADate(n):n,r&&r.length&&(a=Globalize.format(a,r,o)),f=c._text.call(c,i,s,a),$.wijraphael.addClass($(f.node),u.lineLabel),l=f.wijGetBBox(),f.transform(Raphael.format("...T{0},{1}",0,-l.height)),f},e.prototype.getAnchors=function(e,t,n,r,i,s){var o=(n-e)/2,u=(i-n)/2,a=Math.atan((n-e)/Math.abs(r-t)),f=Math.atan((i-n)/Math.abs(r-s)),l=0,c=0,h=0,p=0,d=0;return a=t<r?Math.PI-a:a,f=s<r?Math.PI-f:f,l=Math.PI/2-(a+f)%(Math.PI*2)/2,c=o*Math.sin(l+a),h=o*Math.cos(l+a),p=u*Math.sin(l+f),d=u*Math.cos(l+f),{x1:n-c,y1:r+h,x2:n+p,y2:r+d}},e.prototype.getPathArrByFitType=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=null,g=0,y=0,b=0,w=0,E=null,S=null,x=p[n],T=!1,N=x.idx,C,k=n-1,L=n+1;if(d==="excludeHole"&&!v){if(n>0&&n<r-1){L=-1,k=-1;for(C=n+1;C<r;C++){T=!0;if(p[C].isHole)continue;L=C,T=!1;break}for(C=n-1;C>=0;C--){if(p[C].isHole)continue;k=C;break}k>-1&&(b=p[k].x,g=p[k].y)}}else n<r-1&&(T=p[L].isHole),n>0&&n<r-1&&(b=p[k].x,g=p[k].y);return v&&(t="line"),t==="line"?e=e.concat([N?"L":"M",u,a]):t==="spline"?N?N&&n<r-1&&!T?(m=o[L],l&&(m=$.toOADate(m)),y=this._calculatePoint(m,"y"),isNaN(c)||typeof c=="string"?w=this._calculatePoint(L,"x"):(E=s[L],f&&(E=$.toOADate(E)),w=this._calculatePoint(E,"x")),S=this.getAnchors(b,g,u,a,w,y),e=e.concat([S.x1,S.y1,u,a,S.x2,S.y2])):e=e.concat([u,a,u,a]):n===r-1?e=e.concat(["M",u,a]):T?e=e.concat(["M",u,a]):e=e.concat(["M",u,a,"C",u,a]):t==="bezier"&&(N?n<r-1&&p[n+1].isHole&&N%2===1||n===r-1&&N%2===1?e=e.concat(["Q",u,a,u,a]):N%2===0?e=e.concat([u,a]):e=e.concat(["Q",u,a]):e=e.concat(["M",u,a])),e},e.prototype.bindLiveEvents=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m="",g={element:e,mousedown:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?s.call(e,t,r):s.call(e,t,i)):s.call(e,t,r)},mouseup:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?o.call(e,t,r):o.call(e,t,i)):o.call(e,t,r)},mouseover:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?u.call(e,t,r):u.call(e,t,i)):u.call(e,t,r)},mouseout:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?a.call(e,t,r):a.call(e,t,i)):a.call(e,t,r)},mousemove:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?f.call(e,t,r):f.call(e,t,i)):f.call(e,t,r)},click:function(t){if(c)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(v.canvasMarker)?(i=r.lineSeries,i.markers.visible?l.call(e,t,r):l.call(e,t,i)):l.call(e,t,r)}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(m="wij"),e.on(m+"mousedown."+i,"."+v.lineElement,$.proxy(g.mousedown,g)).on(m+"mouseup."+i,"."+v.lineElement,$.proxy(g.mouseup,g)).on(m+"mouseover."+i,"."+v.lineElement,$.proxy(g.mouseover,g)).on(m+"mouseout."+i,"."+v.lineElement,$.proxy(g.mouseout,g)).on(m+"mousemove."+i,"."+v.lineElement,$.proxy(g.mousemove,g)).on(m+"click."+i,"."+v.lineElement,$.proxy(g.click,g)),t.TrendlineRender.bindLiveEvents(e,i,s,o,u,a,f,l,c,v,!0)},e.prototype.unbindLiveEvents=function(e,n,r){e.off("."+n,"."+r.lineElement),t.TrendlineRender.unbindLiveEvents(e,n,r)},e}();t.LineChartRender=s})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=180,r=360,i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){this._handleChartStyles(),e.prototype._create.call(this),this.chartElement.addClass(this.options.wijCSS.pieChart)},t.prototype.destroy=function(){var t=this.options.wijCSS,n=this.chartElement,r=n.data("fields"),i=r&&r.sectors,s=r&&r.labels;n.removeClass(t.pieChart),e.prototype.destroy.call(this),i&&i.length&&$.each(i,function(e,t){t=null}),s&&s.length&&$.each(s,function(e,t){t=null}),n.data("fields",null)},t.prototype._isPieChart=function(){return!0},t.prototype.getSector=function(e){var t=this.chartElement.data("fields");return t&&t.chartElements?t.chartElements.sectors[e]:null},t.prototype._bindData=function(){var e=this.options,t=e.dataSource,n=e.data,r=[],i,s,o;t&&n&&(i=n.label,s=n.value,o=n.offset,i&&i.bind&&(i=this._getBindData(t,i.bind)),s&&s.bind&&(s=this._getBindData(t,s.bind)),o&&o.bind&&(o=this._getBindData(t,o.bind)),i&&$.isArray(i)&&i.length&&s&&$.isArray(s)&&s.length&&($.each(s,function(e,t){var n,u=0;e>=0&&e<i.length&&(n=i[e]),o&&$.isArray(s)&&o.length&&e>=0&&e<o.length&&(u=typeof o[e]=="undefined"?0:o[e]),r.push({data:t,label:n,offset:u,legendEntry:!0})}),e.seriesList=r))},t.prototype._hanldSharedXData=function(){},t.prototype._checkSeriesDataEmpty=function(e){return isNaN(e.data)},t.prototype._getSeriesFromTR=function(e,t,n){var r=null,i=null,s=null,o=null,u=null;t.length&&t.each(function(){i=$("th",$(this)),r=$.trim(i.text()),s=$("td",$(this)),s.length&&(o=parseFloat($.trim($(s[0]).text()))),u={label:r,legendEntry:!0,data:o},n.push(u)})},t.prototype._showSerieEles=function(e){var t=this.options.showChartLabels;e.sector&&(e.sector.show(),e.sector.shadow&&e.sector.shadow.show(),e.sector.tracker&&e.sector.tracker.show()),e.label&&t&&(e.label.show(),e.label.connector&&e.label.connector.show(),$(e.label.node).data("legendHide",!1))},t.prototype._hideSerieEles=function(e){e.sector&&(e.sector.hide(),e.sector.shadow&&e.sector.shadow.hide(),e.sector.tracker&&e.sector.tracker.hide()),e.label&&(e.label.hide(),e.label.connector&&e.label.connector.hide(),$(e.label.node).data("legendHide",!0))},t.prototype._hasAxes=function(){return!1},t.prototype._mouseMoveInsidePlotArea=function(t,i){e.prototype._mouseMoveInsidePlotArea.call(this,t,i);if(this.isTapAndHold){var s=this.previousAngle,o=0,u="",a=this.chartElement,f=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},l=f.pieID||"",c=a.data("fields").chartElements["sectors"+l],h=this.canvasBounds,p=(h.startX+h.endX)/2,d=(h.startY+h.endY)/2,v=Raphael.angle(i.left,i.top,p,d);s&&(o=Math.round(v-s),Math.abs(v-s)>n&&(v>s?o-=r:o+=r),o&&(u=Raphael.format("...r{0},{1},{2}",o,p,d),$.each(c,function(e,t){t.transform(u)}),this.tooltip&&this._setTouchTooltip(null))),this.previousAngle=v}},t.prototype._mouseMoveOutsidePlotArea=function(t,n){e.prototype._mouseMoveOutsidePlotArea.call(this,t,n),this.isTapAndHold&&this._rotateToSectorCenter(null)},t.prototype._rotateToSectorCenter=function(e){var t=this,i=this.options.animation,s=this.chartElement,o=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},u=o.pieID||"",a=s.data("fields").chartElements["sectors"+u],f=s.data("fields").chartElements["labels"+u],l=this.canvasBounds,c=(l.startX+l.endX)/2,h=(l.startY+l.endY)/2,p,d,v,m=this;this._hideSectorElements(a,f),this.tooltip&&(d=this._getTouchttSector(e)),this.touchttSector&&this.touchttSector===d&&Math.abs(this.targetCenterAngle)>=.01?(this.targetCenterAngle>n?v=this.targetCenterAngle-r:this.targetCenterAngle<-n?v=this.targetCenterAngle+r:v=this.targetCenterAngle,p=Raphael.animation({transform:Raphael.format("...r{0},{1},{2}",v,c,h)},i.duration,i.easing,function(){m._rotateCallback(this,f)}),$.each(a,function(e,t){t.animate(p)})):$.each(a,function(e,n){t._rotateCallback(n,f)}),this.previousAngle=null,this.isTapAndHold=!1,this.tapTarget=null},t.prototype._rotateCallback=function(e,t){var n=this.canvasBounds,i=(n.startX+n.endX)/2,s=(n.startY+n.endY)/2,o=e.index,u=0,a=e.attr("transform"),f,l;$.each(a,function(e,t){if(t[0]!=="r")return!0;t.length>=4&&(u+=t[1])}),f=Raphael.format("r{0},{1},{2}",u,i,s),i>0&&(u%=r,f=Raphael.format("r{0},{1},{2}",u,i,s),e.attr("transform",f)),e.tracker&&(e.tracker.attr("transform",f),e.tracker.show()),e.shadow&&(e.shadow.attr("transform",f),e.shadow.show());if(t&&t.length&&t.length>o){l=t[o],l.attr("transform",Raphael.format("r{0},{1},{2}r{3}",u,i,s,0-u)),l.connector&&l.connector.attr("transform",f);if($(l.node).data("legendHide"))return;l.show(),l.connector&&l.connector.show()}},t.prototype._getTouchttSector=function(e){var t=this,i=this.chartElement,s=this.tapTarget?this.tapTarget.data("wijchartDataObj"):{},o=s.pieID||"",u=i.data("fields").chartElements["sectors"+o],a=this.tooltip.getOptions(),f=a.compass,l=90,c;switch(f){case"east":l=0;break;case"south":l=270;break;case"west":l=n;break;case"north":default:l=90}return $.each(u,function(n,i){var s=i.attr("transform"),o=0,u=i.angles;$.each(s,function(e,t){if(t[0]!=="r")return!0;t.length>=4&&(o+=t[1])}),o%=r,o<0&&(o=r+o),o=(l+o)%r;if(e){if(i===e)return t.targetCenterAngle=(u.start+u.end)/2-o,c=e,!1}else if(u.start<=o&&u.end>=o)return t.targetCenterAngle=(u.start+u.end)/2-o,c=i,!1}),c},t.prototype._setTouchTooltip=function(e){var t=this.tooltip.getOptions(),n=t.compass,r=this._getTouchttSector(e),i=this.options.hint,s=i.title,o=i.content,u=$.isFunction(s),a=$.isFunction(o),f,l;if(!r||this.touchttSector&&this.touchttSector===r)return;f=$(r.node).data("wijchartDataObj"),l={data:f,value:f.value,label:f.label,total:f.total,y:f.value};if(u||a)u&&(t.title=function(){l.fmt=s;var e=$.proxy(l.fmt,l),t=e();return t}),a&&(t.content=function(){l.fmt=o;var e=$.proxy(l.fmt,l),t=e();return t});this._showTouchTooltip(n),this.touchttSector=r},t.prototype._showTouchTooltip=function(e){var t=this.chartElement,n=this.canvasBounds,r={x:0,y:0};switch(e){case"east":r={x:t.width(),y:(n.startY+n.endY)/2};break;case"south":r={x:(n.startX+n.endX)/2,y:t.height()};break;case"west":r={x:0,y:(n.startY+n.endY)/2};break;case"north":default:r={x:(n.startX+n.endX)/2,y:0}}this.tooltip.showAt(r)},t.prototype._isTouchBehaviorEnabled=function(){return this.options.enableTouchBehavior&&this._isTouchEnabled()},t.prototype._mouseDown=function(t,n){var r=$(t.target),i=this.chartElement,s,o,u;e.prototype._mouseDown.call(this,t,n),this._isTouchBehaviorEnabled()&&(this.isTapAndHold=!0,r.data("owner")&&(r=r.data("owner")),this.tapTarget=r,s=n.pieID||"",o=i.data("fields").chartElements["sectors"+s],u=i.data("fields").chartElements["labels"+s],this._hideSectorElements(o,u))},t.prototype._hideSectorElements=function(e,t){$.each(e,function(e,n){n.stop(),n.tracker&&n.tracker.hide(),n.shadow&&n.shadow.hide();if(t&&t.length){var r=t[e];r.hide(),r.connector&&r.connector.hide()}})},t.prototype._mouseUp=function(t,n){e.prototype._mouseUp.call(this,t,n),this._isTouchBehaviorEnabled()&&this.isTapAndHold&&this._rotateToSectorCenter(null)},t.prototype._mouseOver=function(t,n){e.prototype._mouseOver.call(this,t,n)},t.prototype._mouseOut=function(t,n){e.prototype._mouseOut.call(this,t,n)},t.prototype._mouseMove=function(t,n){e.prototype._mouseMove.call(this,t,n)},t.prototype._click=function(t,n){var r=this.chartElement,i,s,o;e.prototype._click.call(this,t,n),this._isTouchBehaviorEnabled()&&this.tooltip&&(i=n.pieID||"",s=r.data("fields").chartElements["sectors"+i],s.length&&s.length>n.index&&(o=s[n.index],this._setTouchTooltip(o),this._rotateToSectorCenter(o)))},t.prototype._paintTooltip=function(){var t=this.options.wijCSS,n=this.chartElement,r=n.data("fields");e.prototype._paintTooltip.call(this),this.tooltip&&r&&(this._isTouchBehaviorEnabled()?(this.tooltip.setOptions({closeBehavior:"none",mouseTrailing:!1,animated:null,showAnimated:null,windowCollisionDetection:"fit"}),this._setTouchTooltip(null),this._rotateToSectorCenter(null)):r.trackers&&r.trackers.length&&(this.tooltip.setSelector($("."+t.canvasObject,n[0])),this.tooltip.setOptions({relatedElement:r.trackers[0]})))},t.prototype._paintPlotArea=function(){var e=this.options,t=this.canvasBounds,n=t.endX-t.startX,r=t.endY-t.startY,i=e.radius;i?(n<2*i&&(i=n/2),r<2*i&&(i=r/2)):i=Math.min(n,r)/2,t.startX+=n/2-i,t.endX=t.startX+2*i,t.startY+=r/2-i,t.endY=t.startY+2*i,this.chartElement.data("fields")&&(this.chartElement.data("fields").seriesEles=null),this.piechartRender=new a(this.chartElement,{canvas:this.canvas,tooltip:this.tooltip,bounds:t,wijCSS:e.wijCSS,radius:i,startAngle:e.startAngle,widgetName:this.widgetName,innerRadius:e.innerRadius,seriesList:e.seriesList,seriesStyles:e.seriesStyles,seriesHoverStyles:e.seriesHoverStyles,seriesTransition:e.seriesTransition,showChartLabels:e.showChartLabels,disabled:e.disabled,textStyle:e.textStyle,chartLabelStyle:e.chartLabelStyle,chartLabelFormatString:e.chartLabelFormatString,chartLabelFormatter:e.chartLabelFormatter,labels:e.labels,shadow:e.shadow,animation:e.animation,culture:this._getCulture(),mouseDown:$.proxy(this._mouseDown,this),mouseUp:$.proxy(this._mouseUp,this),mouseOver:$.proxy(this._mouseOver,this),mouseOut:$.proxy(this._mouseOut,this),mouseMove:$.proxy(this._mouseMove,this),click:$.proxy(this._click,this),widget:this,enableTouchBehavior:e.enableTouchBehavior,availableWidth:n,availableHeight:r,direction:e.direction,isTouchBehaviorEnable:this._isTouchBehaviorEnabled()}),this.piechartRender.render(!e.radius)},t.prototype._getTooltipText=function(e,t){var n=$(t.node),r,i;return n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i={data:r,value:r.value,label:r.label,total:r.total,target:t,y:r.value,fmt:e},$.proxy(e,i)()},t}(t.wijchartcore);t.wijpiechart=i;var s=function(){function e(){}return e.clockwise="clockwise",e.counterClockwise="counterClockwise",e}(),o=function(e){function t(){e.apply(this,arguments),this.pieChart="wijmo-wijpiechart",this.pieLabel="wijpiechart-label",this.pieElement="wijpiechart",this.pieTracker="pietracker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijpiechart_css=o;var u=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijpiechart')",this.wijCSS=new e.chart.wijpiechart_css,this.startAngle=0,this.radius=null,this.innerRadius=0,this.chartLabelFormatter=null,this.labels={style:{},formatString:"",formatter:null,connectorStyle:{},position:"inside",offset:10},this.animation={enabled:!0,duration:400,easing:"easeInCubic",offset:10},this.seriesTransition={enabled:!0,duration:1e3,easing:"bounce"},this.seriesList=[],this.enableTouchBehavior=!0,this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null,this.direction=s.counterClockwise}return __extends(n,t),n}(t.wijchartcore_options);i.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new u),$.wijmo.registerWidget("wijpiechart",i.prototype);var a=function(){function e(e,t){this.options=t,this.element=e}return e.prototype.render=function(e){var n=this.element,i=this.options,o=function(e,n,r){i.shadow&&t.ChartUtil.paintShadow(e,n,r)},u=t.ChartUtil.getDiffAttrs,a=i.canvas,f=$.wijraphael.getPositionByAngle,l=i.seriesList,c=i.seriesStyles,h=i.seriesHoverStyles,p=c.length,d=i.textStyle,v=i.labels||{style:{},formatString:"",formatter:null,connectorStyle:{},position:"inside",offset:10},m=$.extend(!0,{},d,i.chartLabelStyle,v.style),g=v.formatString||i.chartLabelFormatString,y=v.formatter||i.chartLabelFormatter,b=i.culture,w=i.bounds,E=w.startX,S=w.startY,x=i.radius,T=i.showChartLabels,N=i.animation,C=i.seriesTransition,k=i.innerRadius,L=n.data("fields")||{},A=L.chartElements||{},O=L.aniSectorAttrs,M=L.aniLabelAttrs,_=0,D=i.startAngle||0,P=i.wijCSS,H,B,j,F=[],I=[],q=[],R=[],U=[],z=[],W=a.set(),X=this.options.widget,V=D,J=i.availableWidth,K=i.availableHeight,Q=i.radius,G=i.direction;a.customAttributes.segment=function(e,n,i,s,o,u){var a=null,f=.01;return s-i>r-f?s-=f:s-i<f&&(s+=f),u?a=t.ChartUtil.donut(e,n,o,u,i,s):a=t.ChartUtil.sector(e,n,o,i,s),{path:a}},$.each(l,function(e,t){t&&typeof t.data=="number"&&(_+=Math.abs(t.data))}),e&&T&&v.position==="outside"&&($.each(l,function(e,t){var n,i,s,o,u,a,l=x,c=0,h=0,p=r*Math.abs(t.data)/_,d=p/2+V;t=$.extend(!0,{offset:0},t),i=$.extend(!0,{},i,m),t.textStyle&&(i=$.extend(!0,i,t.textStyle)),s=t.label,g&&g.length>0&&(s=Globalize.format(s,g,b)),y&&$.isFunction(y)&&(o={index:e,value:t.data,y:t.data,total:_,chartLabel:s,chartLabelFormatter:y},s=$.proxy(y,o)()),M&&C.enabled?e<M.length?(j=M[e],j.text=s,u=X._text.call(X,0,0,"").attr(j)):u=X._text.call(X,0,0,s).attr(i):u=X._text.call(X,0,0,s).attr(i),a=u.wijGetBBox(),n=f(0,0,t.offset+v.offset+x,d),c=a.width+Math.abs(n.x),h=a.height/2+Math.abs(n.y),c>J/2&&(x=l-(c-J/2)/Math.abs(Math.cos(Raphael.rad(d)))),h>K/2&&(x=Math.min(x,l-(K/2-h)/Math.abs(Math.sin(Raphael.rad(d))))),V+=p,u.remove();if(x<k)return x=k,!1}),x!=Q&&(i.bounds.startX=i.bounds.startX+Q-x,i.bounds.endX=i.bounds.startX+2*x,i.bounds.startY=i.bounds.startY+Q-x,i.bounds.endY=i.bounds.startY+2*x,E=w.startX,S=w.startY)),$.each(l,function(e,t){var n=$.extend({opacity:1,stroke:"gray","stroke-width":1},c[e%p]),i=r*Math.abs(t.data)/_,l=E+x,d=S+x,w,N,L,A,V,J,K,Q,Y,Z=v.position,et=v.connectorStyle,tt=v.offset,nt,rt,it,st=!1;H=t.pieID;var ot,ut,at=G==s.clockwise;at?(ot=D-i,ut=D-i/2):(ot=D+i,ut=D+i/2),t=$.extend(!0,{offset:0},t),t.offset&&(w=f(l,d,t.offset,ut),l=w.x,d=w.y),B=[l,d,D,ot,x,k],O&&C.enabled?(n.segment=B,e<O.length?j=O[e]:(j=$.extend(!0,{},n),j.segment=[l,d,0,r,x,k]),N=a.path().attr(j),n=u(j,n),N.removed||N.wijAnimate(n,C.duration,C.easing,function(){o(N,1,"#cccccc"),K&&!K.removed&&!N.removed&&K.attr({path:N.attr("path")}),delete n.segment})):(N=a.path().attr({segment:B}),o(N,1,"#ccccc"),N.wijAttr(n)),N.angles={start:D,end:ot},N.index=e,N.getOffset=function(e){var t=f(l,d,e,(N.angles.start+N.angles.end)/2);return{x:t.x-l,y:t.y-d}},N.center={x:l,y:d},N.radius=x,k&&(N.innerRadius=k),K=N.clone(),Raphael.vml?K.attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}):K.attr({opacity:.01,fill:"white","fill-opacity":.01}),$.wijraphael.addClass($(K.node),Raphael.format("{0} {1} {2} wijchart-tracker"+e,P.canvasObject,P.pieElement,P.pieTracker)),$(K.node).data("owner",$(N.node)),N.tracker=K,W.push(K),$.wijraphael.addClass($(N.node),Raphael.format("{0} {1} wijmo-wijpiechart-series-"+e,P.canvasObject,P.pieElement)),$(N.node).data("wijchartDataObj",t),T&&(Z==="outside"?(J=f(l,d,x,ut),A=f(l,d,x+tt,ut)):A=f(l,d,t.offset+x*2/3,ut),V=$.extend(!0,{},V,m),t.textStyle&&(V=$.extend(!0,V,t.textStyle)),Q=t.label,g&&g.length>0&&(Q=Globalize.format(Q,g,b)),y&&$.isFunction(y)&&(Y={index:e,value:t.data,y:t.data,total:_,chartLabel:Q,chartLabelFormatter:y},Q=$.proxy(y,Y)()),M&&C.enabled?e<M.length?(st=!0,j=M[e],j.text=Q,L=X._text.call(X,0,0,"").attr(j),V=u(j,V),V.x=A.x,V.y=A.y,L.wijAnimate(V,C.duration,C.easing,function(){it&&it.show()})):L=X._text.call(X,A.x,A.y,Q).attr(V):L=X._text.call(X,A.x,A.y,Q).attr(V),Z==="outside"&&(nt=ut%r,rt=L.wijGetBBox(),nt>=90&&nt<=270?L.transform(Raphael.format("T{0},{1}",-rt.width/2,0)):L.transform(Raphael.format("T{0},{1}",rt.width/2,0)),it=a.path(Raphael.format("M{0} {1}L{2} {3}",J.x,J.y,A.x,A.y)).attr(et),st&&it.hide(),L.connector=it),$.wijraphael.addClass($(L.node),Raphael.format("{0} {1} {2}",P.canvasObject,P.pieElement,P.pieLabel)),$(L.node).data("wijchartDataObj",t),U.push(L),R.push(L),I[e]=L.attr()),z.push({label:R[e],sector:N}),t.visible===!1&&(N.hide(),R[e]&&R[e].hide(),it&&it.hide(),N.shadow&&N.shadow.hide(),K.hide()),F[e]=N.attr(),q.push(N),U.push(N),t.style=n,t.hoverStyle=h[e],t.index=e,t.value=t.data,t.y=t.data,t.total=_,t.type="pie",D=ot}),R&&R.length&&$.each(R,function(e,t){t.toFront()}),A.sectors=q,H&&(A["sectors"+H]=q,A["labels"+H]=R),A.labels=R,L.chartElements||(L.chartElements={}),W.toFront(),$.extend(!0,L.chartElements,A),L.aniSectorAttrs=F,L.aniLabelAttrs=I,L.seriesEles=z,L.trackers=W,n.data("fields",L),this.unbindLiveEvents(),this.bindLiveEvents()},e.prototype.bindLiveEvents=function(){var e=this.options,t=e.widget._isTouchEnabled(),n=e.isTouchBehaviorEnable,r=this.element,i=e.tooltip,s={x:0,y:0},o="",u="",a=$.isFunction,f=e.disabled,l=e.animation;t&&(o="wij"),n&&(u="wij"),i&&i.setTargets(this.tooltipTars),r.on(o+"mousedown."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;var n=e.mouseDown,i=$(t.target),s;i.data("owner")&&(i=i.data("owner")),s=i.data("wijchartDataObj");if(!s)return;a(n)&&n.call(r,t,s)}).on(o+"mouseup."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;var n=e.mouseUp,i=$(t.target),s;i.data("owner")&&(i=i.data("owner")),s=i.data("wijchartDataObj");if(!s)return;a(n)&&n.call(r,t,s)}).on(u+"mouseover."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;var i=e.mouseOver,o=$(t.target),u=l&&l.enabled,c,h,p,d,v,m,g;o.data("owner")&&(o=o.data("owner")),c=o.data("wijchartDataObj");if(!c)return;h=c.pieID||"",p=c.index,d=r.data("fields").chartElements["sectors"+h][p],v=d.showAnimationTimer,m=d.hideAnimationTimer,g=d.explodeAnimationShowing,a(i)&&i.call(r,t,c);if(n)return;if(d.removed)return;d.wijAttr(c.hoverStyle);if(u){m&&(window.clearTimeout(m),m=null,d.hideAnimationTimer=m),v&&(window.clearTimeout(v),v=null,d.showAnimationTimer=null);if(g)return;v=window.setTimeout(function(){var e=l.duration,t=l.easing;if(d.removed)return;s=d.getOffset(l.offset||10),d.offset=s,d.shadow&&!d.shadow.removed&&d.shadow.hide(),d.wijAnimate({transform:Raphael.format("t{0},{1}",s.x,s.y)},e,t),d.tracker&&!d.tracker.removed&&d.tracker.wijAnimate({transform:Raphael.format("t{0},{1}",s.x,s.y)},e,t),g=!0,d.explodeAnimationShowing=g},150),d.showAnimationTimer=v}}).on(u+"mouseout."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;var i=e.mouseOut,o=$(t.target),u=l&&l.enabled,c,h,p,d,v,m,g;o.data("owner")&&(o=o.data("owner")),c=o.data("wijchartDataObj");if(!c)return;h=c.pieID||"",p=c.index,d=r.data("fields").chartElements["sectors"+h][p],v=d.showAnimationTimer,m=d.hideAnimationTimer,g=d.explodeAnimationShowing,a(i)&&i.call(r,t,c);if(n)return;if(d.removed)return;c.style.segment&&delete c.style.segment,d.wijAttr(c.style);if(u){m&&(window.clearTimeout(m),m=null,d.hideAnimationTimer=m),v&&(window.clearTimeout(v),v=null,d.showAnimationTimer=v);if(!g)return;m=window.setTimeout(function(){var e=l.duration,t=l.easing;s=d.offset,d.shadow&&!d.shadow.removed&&d.shadow.show(),d.removed||d.wijAnimate({transform:"t0,0"},e,t),d.tracker&&!d.tracker.removed&&d.tracker.wijAnimate({transform:"t0,0"},e,t),d.shadow&&!d.shadow.removed&&d.shadow.wijAnimate({transform:"t0,0"},e,t),s={x:0,y:0},g=!1,d.explodeAnimationShowing=g},150),d.hideAnimationTimer=m}}).on(o+"mousemove."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;var n=e.mouseMove,i=$(t.target),s;i.data("owner")&&(i=i.data("owner")),s=i.data("wijchartDataObj");if(!s)return;a(n)&&n.call(r,t,s)}).on(o+"click."+e.widgetName,"."+e.wijCSS.pieElement,function(t){if(f)return;if(window.navigator.userAgent.match(/iPhone|iPad|iPod/i)&&n&&!$.wijraphael.hasClass(t.target,e.wijCSS.pieTracker))return;var i=e.click,s=$(t.target),o;s.data("owner")&&(s=s.data("owner")),o=s.data("wijchartDataObj");if(!o)return;a(i)&&i.call(r,t,o)})},e.prototype.unbindLiveEvents=function(){var e=this.element,t=this.options;e.off("."+t.widgetName,"."+t.wijCSS.pieElement)},e}();t.PieChartRender=a})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n="wijcandlestickchart",r="ohlc",i="candlestick",s="hl",o="stroke-width",u=function(){function e(e){this.init(e)}return e.prototype.init=function(e){var t=[],n={},r,i;$.each(e,function(e,n){var r=$.toOADate(n);$.inArray(r,t)===-1&&t.push(r)}),this.count=r=t.length,this.times=t=t.sort(),this.timeDic=n;if(r<2){this.max=t[0]||0,this.min=t[0]||0,this.unit=864e5,r===1&&(n[t[0]]=0);return}for(i=0;i<r;i++)n[t[i]]=i;this._calculateUnit(),this.max=t[this.count-1],this.min=t[0]},e.prototype._calculateUnit=function(){var e=Number.MAX_VALUE,t=1;for(;t<this.count;t++)e=Math.min(e,this.times[t]-this.times[t-1]);this.unit=e},e.prototype.getOATime=function(e){var t=this.count,n=this.times,r;return e<0?this.min+e*this.unit:e>t-1?this.max+(e-t+1)*this.unit:(r=parseInt(e),n[r]+(e-r)*this.unit)},e.prototype.getTime=function(e){return $.fromOADate(this.getOATime(e))},e.prototype.getTimeIndex=function(e){var t=$.toOADate(e),n;return t>this.max?this.count-1+(t-this.max)/this.unit:t<this.min?(t-this.min)/this.unit:this.timeDic&&this.timeDic[t]!=null?this.timeDic[t]:($.each(this.times,function(e,r){if(r>t)return n=e-1,!1}),n+(t-this.times[n])/this.unit)},e.prototype.getCount=function(){return this.times.length},e.prototype.dispose=function(){this.times=null,this.timeDic=null},e}();t.datetimeUtil=u;var a=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._paintChartArea=function(){var t=this.options;if(this._isSeriesListDataEmpty())return;$.each(t.seriesList,function(e,t){var n=t.data;t.isTrendline||(n.y=[].concat(n.high).concat(n.low))}),e.prototype._paintChartArea.call(this),$.each(t.seriesList,function(e,t){t.isTrendline||delete t.data.y})},n.prototype._checkSeriesDataEmpty=function(e){var t=this.options.type,n=e.data,s=this._checkEmptyData;if(!n||s(n.x))return!0;if(e.isTrendline)return!e.isValid||!e.innerData?!0:s(n.y);if(s(n.high)||s(n.low))return!0;if(t===r||t===i)if(s(n.open)||s(n.close))return!0;return!1},n.prototype._getLegendStyle=function(e){var t=e.highLow;return t?(t=$.extend({},t),delete t.width,delete t.height,t.stroke||(t.stroke=t.fill),t):e},n.prototype._showHideSeries=function(e,t){var n=["highLow","open","close","path","high","low","openClose"];$.each(e,function(e,r){$.each(n,function(e,n){r[n]&&r[n][t]()}),r.path&&$(r.path.node).data("wijchartDataObj")&&($(r.path.node).data("wijchartDataObj").visible=t==="show")})},n.prototype._showSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.showSerieEles(e);return}this._showHideSeries(e,"show")},n.prototype._hideSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.hideSerieEles(e);return}this._showHideSeries(e,"hide")},n.prototype._paintPlotArea=function(){var e=this.options,t=new f(this.chartElement,{canvas:this.canvas,bounds:this.canvasBounds,tooltip:this.tooltip,widgetName:this.widgetName,axis:e.axis,seriesList:e.seriesList,seriesStyles:e.seriesStyles,seriesHoverStyles:e.seriesHoverStyles,seriesTransition:e.seriesTransition,showChartLabels:e.showChartLabels,textStyle:e.textStyle,chartLabelStyle:e.chartLabelStyle,chartLabelFormatString:e.chartLabelFormatString,shadow:e.shadow,disabled:e.disabled,animation:e.animation,culture:this._getCulture(),type:e.type,wijCSS:e.wijCSS,mouseDown:$.proxy(this._mouseDown,this),mouseUp:$.proxy(this._mouseUp,this),mouseOver:$.proxy(this._mouseOver,this),mouseOut:$.proxy(this._mouseOut,this),mouseMove:$.proxy(this._mouseMove,this),click:$.proxy(this._click,this),timeUtil:this.timeUtil,candlestickFormatter:e.candlestickFormatter,widget:this});t.render()},n.prototype._paintTooltip=function(){var t=this.chartElement.data("fields"),n;e.prototype._paintTooltip.call(this),this.tooltip&&t&&t.trackers&&(n=t.trackers,this.tooltip.setTargets(n),this.tooltip.setOptions({relatedElement:n[0]}))},n.prototype._getTooltipText=function(e,t){var n=$(t.node).data("wijchartDataObj"),r={data:n,label:n.label,x:n.x,high:n.high,low:n.low,open:n.open,close:n.close,target:t,fmt:e};return $.proxy(e,r)()},n.prototype._setDefaultTooltipText=function(e){var t=this.options.type,n;return n=e.label+" - "+Globalize.format(e.x,"d")+"\n High:"+e.high+"\n Low:"+e.low,t!==s&&(n+="\n Open:"+e.open+"\n Close:"+e.close+""),n},n.prototype._getStyles=function(e,n,i,u){function a(e,t,n,i,u){var a={},f=[];if(n===null||n===undefined)return;return e===s?f=["highLow"]:e===r?f=["open","close","highLow"]:f=["fallingClose","risingClose","unchangeClose","highLow"],$.each(f,function(e,r){u&&(t[r]=$.extend(!0,{},t,t[r])),a[r]=$.extend(!0,{},n,t[r]),i&&r=="risingClose"&&(!t[r]||!t[r].fill)&&(a[r].fill=null),r==="fallingClose"&&(!t[r]||!t[r][o])&&(a[r][o]=0);if(r==="open"||r==="close"||r==="highLow")if(!t[r]||!t[r].stroke)a[r].stroke=a[r].fill}),a}var f=i==="seriesStyles",l=t.wijchartcore.prototype._getDefFill(),c=n.length,h=0,p,d=[],v=0;h=Math.max(t.wijchartcore.prototype.options[i].length,f?l.length:0,c),p=$.extend(!0,new Array(h),t.wijchartcore.prototype.options[i]);for(v=0;v<h;v++)v>=c&&(n[v]={}),f&&v<l.length&&(p[v]||(p[v]={}),p[v].fill=l[v]),d.push(a(e,n[v],p[v],f,u));return d},n.prototype._handleChartStyles=function(){var e=this.options;e.seriesStyles=this._getStyles(e.type,e.seriesStyles,"seriesStyles",!1),e.seriesHoverStyles=this._getStyles(e.type,e.seriesHoverStyles,"seriesHoverStyles",!1)},n.prototype._create=function(){this._handleChartStyles(),this.bindXData=!1,this._handleXData(),e.prototype._create.call(this),this.chartElement.addClass(this.options.wijCSS.wijCandlestickChart)},n.prototype._setOption=function(t,n){t==="axis"?this._handleMaxMinInAxis(n):t==="type"&&(this.options.type=n,this._handleChartStyles()),e.prototype._setOption.call(this,t,n)},n.prototype._seriesListSeted=function(){this.timeUtil.dispose(),this.timeUtil=null,this._handleXData()},n.prototype._handleMaxMinInAxis=function(e){var t=this,n,r=this.options.axis,i=function(e){return t._isDate(e)?t.timeUtil.getTimeIndex(e):t.timeUtil.getTimeIndex($.fromOADate(e))};e&&e.x&&(n=e.x,$.each(["max","min"],function(e,t){if(!r||!r.x||r.x[t]!==n[t])n[t]=i(n[t])}))},n.prototype._handleXData=function(){var e=this,t=this.options,n=t.seriesList=$.arrayClone(t.seriesList),r=[],i=!1,s=function(e){return e.data&&e.data.x},o=function(t){var n=t.data.x;$.each(n,function(t,r){e._isDate(r)||(n[t]=e.timeUtil.getTime(r))})};if(this.timeUtil&&!this.bindXData)return;this.bindXData=!1,$.each(n,function(e,t){s(t)&&$.isArray(t.data.x)&&(r=r.concat(t.data.x))}),this.timeUtil&&($.each(r,function(t,n){if(e._isDate(n))return i=!0,!1}),i&&(r=[],$.each(n,function(e,t){s(t)&&(o(t),r=r.concat(t.data.x))}),this.timeUtil.dispose(),this.timeUtil=null)),this.timeUtil||(this.timeUtil=new u(r)),$.each(n,function(t,n){s(n)&&$.isArray(n.data.x)&&(n.data.x=$.map(n.data.x,function(t,n){return e.timeUtil.getTimeIndex(t)}))})},n.prototype._bindData=function(){e.prototype._bindData.call(this),this._handleXData()},n.prototype._bindSeriesData=function(t,n,r){var i=this,s=n.data;e.prototype._bindSeriesData.call(this,t,n,r),s.x&&$.isArray(s.x)&&(this.bindXData=!0),$.each(["high","low","open","close"],function(e,n){var r=s[n];r&&r.bind&&(s[n]=i._getBindData(t,r.bind))})},n.prototype.destroy=function(){var t=this.chartElement;t.removeClass(this.options.wijCSS.wijCandlestickChart),e.prototype.destroy.call(this),this.timeUtil&&this.timeUtil.dispose(),t.data("fields",null)},n.prototype.getCandlestick=function(e){var t=this.chartElement.data("fields");return t&&t.chartElements&&t.chartElements.candlestickEles?t.chartElements.candlestickEles[e]||null:null},n.prototype._clearChartElement=function(){var t=this.options,n=this.chartElement.data("fields"),r,i;n&&n.chartElements&&(r=n.chartElements,i=r.candlestickEles,$.each(i,function(e,t){$.each(t,function(e,n){n&&n[0]&&n.wijRemove(),t[e]=null}),i[e]=null}),r.candlestickEles=null,r.group&&r.group.wijRemove(),r.group=null,n.trackers&&n.trackers.wijRemove(),n.trackers=null),e.prototype._clearChartElement.call(this)},n.prototype._calculateParameters=function(t,n){e.prototype._calculateParameters.call(this,t,n);if(t.id==="x"){var r=n.unitMinor,i=n.autoMin,s=n.autoMax,o=this._getCandlestickAdjustment(t,r);i&&(t.min-=o),s&&(t.max+=o),this._calculateMajorMinor(n,t)}},n.prototype._calculateMajorMinor=function(n,r){r.id==="x"&&(!n.annoFormatString||n.annoFormatString.length===0?r.annoFormatString=t.ChartDataUtil.getTimeDefaultFormat(this.timeUtil.getOATime(r.max),this.timeUtil.getOATime(r.min)):r.annoFormatString=n.annoFormatString),e.prototype._calculateMajorMinor.call(this,n,r)},n.prototype._getCandlestickAdjustment=function(e,t){var n=0,r;return $.each(this.options.seriesList,function(e,t){t.data&&t.data.x&&$.isArray(t.data.x)&&(n=Math.max(t.data.x.length,n))}),r=(e.max-e.min)/n,r===0?r=t:t<r&&t!==0&&(r=Math.floor(r/t)*t),r},n.prototype._getXTickText=function(e){return this.timeUtil.getCount()===0?"":this.timeUtil.getTime(e)},n.prototype._adjustTickValuesForCandlestickChart=function(t){var n=this,r=this.options.axis.x.annoMethod==="valueLabels",i=[];return r&&t&&$.isArray(t)?($.each(t,function(e,t){i[e]=n.timeUtil.getTimeIndex($.fromOADate(t))}),i):e.prototype._adjustTickValuesForCandlestickChart.call(this,t)},n.prototype._getTickTextForCalculateUnit=function(t,n,r){return n.id==="x"?Globalize.format(this._getXTickText(t),n.annoFormatString,this._getCulture()):e.prototype._getTickTextForCalculateUnit.call(this,t,n,r)},n}(t.wijchartcore);t.wijcandlestickchart=a;var f=function(){function e(e,t){this.element=e,this.options=t,this.bounds=t.bounds,this.width=this.bounds.endX-this.bounds.startX,this.height=this.bounds.endY-this.bounds.startY,this.type=t.type,this.timeUtil=t.timeUtil,this.trackers=t.canvas.set(),this.isHover=!1,this.animationSet=t.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]}return e.prototype._paintCandlestickElements=function(e,t,n){var r=e.data,i=Math.min(r.x.length,r.high.length,r.low.length),o=this.options.wijCSS,u=$.extend({candlestickType:this.type,visible:!0},e),a=[],f=this.options.widget,l,c,h,p,d,v;u.type="candlestick",r.open&&r.close&&(i=Math.min(i,r.open.length,r.close.length)),l=this.width/i;for(c=0;c<i;c++)h=this._paintCandlestickGraphic(r,c,l,t,n),d=$.extend({},u),h.path&&(p=$(h.path.node),$.wijraphael.addClass(p,o.canvasObject+" "+o.candlestickChart+" "+o.candlestickChartTracker),p.css("opacity",0),this.type!==s&&$.extend(d,{open:r.open[c],close:r.close[c]}),$.extend(d,{high:r.high[c],low:r.low[c],index:c,x:this.timeUtil.getTime(r.x[c]),candlestickEles:h,style:t,hoverStyle:n}),p.data("wijchartDataObj",d)),e.visible===!1&&$.each(h,function(e,t){t&&t.hide&&t.hide()}),a.push(h),f.dataPoints=f.dataPoints||{},f.pointXs=f.pointXs||[],v=h.x,f.dataPoints[v.toString()]||(f.dataPoints[v.toString()]=[],f.pointXs.push(v)),f.dataPoints[v.toString()].push(d);return a},e.prototype._unbindLiveEvents=function(){var e=this.options.widgetName;this.element.off("."+e,".wijcandlestickchart"),t.TrendlineRender.unbindLiveEvents(this.element,e,this.options.wijCSS)},e.prototype._bindLiveEvents=function(){function s(e){var t=$(e.target);return t.data("wijchartDataObj")}function o(e,t,r){var s={mouseover:n.mouseOver,mouseout:n.mouseOut,mousedown:n.mouseDown,mouseup:n.mouseUp,mousemove:n.mouseMove,click:n.click};if($.isFunction(s[e]))return s[e].call(i,t,r)}var e=this,n=this.options,r="",i=this.element;$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(r="wij"),$.each(["mouseover","mouseout","mousedown","mouseup","mousemove","click"],function(t,i){e.element.on(r+i+"."+n.widgetName,".wijcandlestickchart",function(t){if(n.disabled)return;var r=s(t);o(i,t,r)!==!1&&(i==="mouseover"||i==="mouseout")&&e["_"+i](r),r=null})}),t.TrendlineRender.bindLiveEvents(i,n.widgetName,n.mouseDown,n.mouseUp,n.mouseOver,n.mouseOut,n.mouseMove,n.click,n.disabled,n.wijCSS,!1)},e.prototype._setCandlestickStyleForHover=function(e,t,n,r){var i=function(e,t){e&&t&&e.attr(t)};i(e.highLow,t.highLow),i(e.open,t.open),i(e.close,t.close),i(e.high,t.highLow),i(e.low,t.highLow),n!==undefined&&r!==undefined&&(n>r?i(e.openClose,t.fallingClose):n<r?i(e.openClose,t.risingClose):i(e.openClose,t.unchangeClose))},e.prototype._mouseover=function(e){e.hoverStyle&&(this.isHover=!0,this._setCandlestickStyleForHover(e.candlestickEles,e.hoverStyle,e.open,e.close))},e.prototype._mouseout=function(e){var t=e.style;this.isHover&&(this._setCandlestickStyleForHover(e.candlestickEles,t,e.open,e.close),this._formatCandlestick({high:e.high,low:e.low,open:e.open,close:e.close,hlStyle:t.highLow,oStyle:t.open,cStyle:t.close,index:e.index,eles:e.candlestickEles,fallingCloseStyle:t.fallingClose,risingCloseStyle:t.risingClose,unchangeCloseStyle:t.unchangeClose}),this.isHover=!1)},e.prototype._paintCandlestickGraphic=function(e,t,n,u,a){function G(e){return e?{fill:e.fill,stroke:e.stroke}:null}var f=this.options,l=e.x[t],c=e.high[t],h=e.low[t],p=e.open?e.open[t]:0,d=e.close?e.close[t]:0,v=this.bounds.startX,m=this.bounds.endY,g=this.type!==s,y=f.axis,b=y.x,w=y.y,E=b.min,S=w.min,x=b.max,T=w.max,N=0,C=0,k=this.width/(x-E),L=this.height/(T-S),A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q;return M=u.open,O=u.close,A=u.highLow,z=u.fallingClose,W=u.risingClose,V=u.unchangeClose,_=A[o]||0,j=(l-E)*k+this.bounds.startX,F=m-(c-S)*L,I=j,q=m-(h-S)*L,g&&(this.type===r?(N=M[o]||0,C=O[o]||0):(p>d?(N=C=z[o]||0,K=z.width||0,J=G(z),Q=z):p===d?(N=C=V[o]||0,K=V.width||0,J=G(V),Q=V):(N=C=W[o]||0,K=W.width||0,J=G(W),Q=W),A=$.extend({},J,A),n-=(N+C)/2,n<2&&(n=2)),U=n/2*.8,this.type===i&&(U=Math.min(K/2,U)),U<1&&(U=1),D=j-U,P=m-(p-S)*L,H=j+U,B=m-(d-S)*L,P=Math.max(P,F+N/2),P=Math.min(P,q-N/2),B=Math.max(B,F+C/2),B=Math.min(B,q-C/2)),this.type===r?(R=this._paintOHLC({h:{x:j,y:F},l:{x:I,y:q},o:{x:D,y:P},c:{x:H,y:B}}),R.open.attr(M),R.close.attr(O)):this.type===s?R=this._paintHL({h:{x:j,y:F},l:{x:I,y:q}}):(R=this._paintCandlestick({h:{x:j,y:F},l:{x:I,y:q},o:{x:D,y:P},c:{x:H,y:B}}),R.high.attr(A),R.low.attr(A),R.openClose.attr(Q)),R.highLow&&R.highLow.attr(A),this._formatCandlestick({high:c,low:h,open:p,close:d,hlStyle:A,oStyle:M,cStyle:O,index:t,eles:R,fallingCloseStyle:z,risingCloseStyle:W,unchangeCloseStyle:V}),R.path.attr({"stroke-width":Math.max(K||1,C||1,_||1,N||1),fill:"#000"}),this.trackers.push(R.path),R.x=$.round(j),u.highLow=A,R},e.prototype._formatCandlestick=function(e){var t=this.options.candlestickFormatter,n=e.index,s=e.high,o=e.low,u=e.open,a=e.close,f=e.hlStyle,l=e.oStyle,c=e.cStyle,h=e.fallingCloseStyle,p=e.risingCloseStyle,d=e.unchangeCloseStyle,v=this.type,m,g;t&&(m={high:s,low:o},g={highLow:f},v===r?($.extend(m,{open:u,close:a}),$.extend(g,{open:l,close:c})):v===i&&($.extend(m,{open:u,close:a}),$.extend(g,{fallingClose:h,risingClose:p,unchangeClose:d})),t.call(this,{data:m,eles:e.eles,style:g}))},e.prototype._paintTracker=function(e,t){var n=[],r=[],i,s,o,u;return $.each(e,function(e,t){n.push(t.x),r.push(t.y)}),i=Math.max.apply(null,n),s=Math.min.apply(null,n),o=Math.max.apply(null,r),u=Math.min.apply(null,r),t.rect(s,u,i-s,o-u)},e.prototype._paintOHLC=function(e){var t=e.h,n=e.l,r=e.o,i=e.c,s=this.options.canvas,o=["M",t.x,",",t.y,"V",n.y],u=["M",r.x,",",r.y,"H",t.x],a=["M",t.x,",",i.y,"H",i.x],f,l,c,h;return f=s.path(o.join("")),l=s.path(u.join("")),c=s.path(a.join("")),h=this._paintTracker(e,s),this._setTrackerForCandlestickEle([f,l,c],h),this.group.push(l,c,f),{highLow:f,open:l,close:c,path:h}},e.prototype._setTrackerForCandlestickEle=function(e,t){$.each(e,function(e,n){n.node.tracker=t})},e.prototype._paintHL=function(e){var t=e.h,n=e.l,r=this.options.canvas,i,s;return i=r.path(["M",t.x,",",t.y,"V",n.y].join("")),s=i.clone(),this._setTrackerForCandlestickEle([i],s),this.group.push(i),{highLow:i,path:s}},e.prototype._paintCandlestick=function(e){var t=e.h,n=e.l,r=e.o,i=e.c,s=this.options.canvas,o,u,a,f,l,c,h,p,d;return i.y<r.y?(f=i.y,l=r.y):(f=r.y,l=i.y),c=["M",t.x,",",t.y,"V",f],h=["M",n.x,",",n.y,"V",l],p=["M",r.x,",",f,"H",i.x,"V",l,"H",r.x,"V",f,"Z"],u=s.path(c.join("")),a=s.path(h.join("")),o=s.path(p.join("")),d=this._paintTracker(e,s),this.group.push(u,a,o),this._setTrackerForCandlestickEle([u,a,o],d),{high:u,low:a,openClose:o,path:d}},e.prototype._handleStyle=function(e,t){if(!e)return;return t!==!0&&$.each(["width","height"],function(t,n){e[n]&&(e["stroke-width"]=e[n],delete e[n])}),e},e.prototype._extendStyles=function(e){var t=$.extend(!0,{},e);return t&&(t.highLow=this._handleStyle(t.highLow),t.close=this._handleStyle(t.close),t.open=this._handleStyle(t.open),t.fallingClose=this._handleStyle(t.fallingClose,!0),t.risingClose=this._handleStyle(t.risingClose,!0),t.unchangeClose=this._handleStyle(t.unchangeClose,!0)),t},e.prototype._paintCandlesticks=function(){var e=[],n,r=this,i=r.options,s=i.seriesList,o=i.seriesStyles,u=i.seriesHoverStyles,a=r.element.data("fields")||{},f=a.chartElements||{},l=f.candlestickEles||[],c=i.animation,h=i.seriesTransition,p=i.wijCSS,d=[],v=[],m=i.canvas;$.each(s,function(s,a){var f=r._extendStyles(o[s]),g=r._extendStyles(u[s]);a.isTrendline?t.TrendlineRender.renderSingleTrendLine(a,f.highLow,g.highLow,i.axis,undefined,r.fieldsAniPathAttr,c,h,s,r.bounds,m,d,v,r.animationSet,r.aniPathsAttr,p,e):(n=r._paintCandlestickElements(a,f,g),l=l.concat(n),e.push(n))}),a.seriesEles=e,a.trackers=r.trackers,f.candlestickEles=l,f.group=r.group,a.trendLines=d,a.chartElements=f,r.fields=a,r.trackers.toFront()},e.prototype._playAnimation=function(){var e=this.options.animation,n=e&&e.enabled,r,i,s=this.fields.trendLines,o={txx:this.options.widget.extremeValue.txx,txn:this.options.widget.extremeValue.txn,tyx:this.options.widget.extremeValue.y[0].tyx,tyn:this.options.widget.extremeValue.y[0].tyn};n&&(r=e.duration||400,i=e.easing,this.group.attr("clip-rect",[this.bounds.startX,this.bounds.startY,0,this.height].join(",")),this.group.wijAnimate({"clip-rect":[this.bounds.startX,this.bounds.startY,this.width,this.height].join(",")},r,i),s&&s.length&&t.TrendlineRender.playAnimation(r,i,this.options.seriesTransition,this.animationSet,this.bounds,this.paths,this.fieldsAniPathAttr,null,this.options.axis,o))},e.prototype.render=function(){this.group=this.options.canvas.group(),this._paintCandlesticks(),this.element.data("fields",this.fields),this._unbindLiveEvents(),this._bindLiveEvents(),this._playAnimation()},e}();t.CandlestickChartRender=f;var l=function(e){function t(){e.apply(this,arguments),this.wijCandlestickChart="wijmo-wijcandlestickchart",this.candlestickChart="wijcandlestickchart",this.candlestickChartTracker="candlesticktracker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijcandlestickchart_css=l;var c=function(t){function n(){t.apply(this,arguments),this.type=i,this.animation={enabled:!0,duration:400,easing:">"},this.wijCSS=new e.chart.wijcandlestickchart_css,this.candlestickFormatter=null,this.showChartLabels=!0,this.chartLabelStyle={},this.chartLabelFormatString="",this.hint={contentStyle:{"font-size":12}},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);a.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new c),a.prototype.widgetEventPrefix=n,$.wijmo.registerWidget(n,a.prototype)})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijtree",i="wijtreenode",s=function(e,t){var r="",i=n.wijmo.wijtreenode.prototype.options;return n.each(e,function(e,o){if(!n.isPlainObject(o))return!0;var u=o.navigateUrl||"#",a=o.nodes&&o.nodes.length>0,f=o.expanded===null||o.expanded===undefined?i.expanded:o.expanded,l=o.wijCSS===null||o.wijCSS===undefined?i.wijCSS:o.wijCSS,c="<li class='"+(a?"wijmo-wijtree-parent":"wijmo-wijtree-item")+"'><div class='wijmo-wijtree-node "+l.stateDefault+(a?" wijmo-wijtree-header ":"")+(t&&a?f?"wijmo-state-expanded":"wijmo-state-collapsed":"")+"' role='treeitem' aria-expanded='false' aria-checked='false' aria-selected='false'><span class='wijmo-wijtree-inner "+l.helperClearFix+" "+l.cornerAll+"'>";a&&(c+="<span class='wijmo-wijtree-hitarea "+(t?l.icon+" "+(f?l.iconArrowRightDown:l.iconArrowRight):"")+"'></span>"),c+="<span class='wijmo-wijtree-nodeimage'></span><a href='"+u+"'>",typeof o.text=="string"&&o.text&&(c+="<span>"+o.text+"</span>"),c+="</a></span></div>",a&&(c+="<ul class='wijmo-wijtree-list wijmo-wijtree-child "+l.helperReset+"'",t&&!f&&(c+=" style='display: none' "),c+=">",c+=s(o.nodes,t),c+="</ul>"),c+="</li> ",r+=c}),r},o=function(e,t,r,i,s){return n.fn[i]&&(e.data("owner",r),!!t&&n.isPlainObject(t)?(n.extend(t,{treeClass:s}),e[i](t)):e[i]({treeClass:s})),e},u=function(e,t,r,i,s){if(!n.fn[i])return;return o(e,t,r,i,s),e.data(e.data("widgetName"))},a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this._useDOMInit=!0,this._initState(),this._createTree(),this._attachEvent(),this._attachNodeEvent()},t.prototype._setOption=function(t,n){var r=this,i=!1,s=r.options,o,u;switch(t){case"allowDrag":r._setAllowDrag(n);break;case"allowDrop":r._setAllowDrop(n);break;case"showCheckBoxes":r._setCheckBoxes(n);break;case"showExpandCollapse":r.options.showExpandCollapse!==n&&(i=!0);break;case"disabled":o=r.element.find(":wijmo-wijtreecheck"),o.length&&o.wijtreecheck("option","disabled",n),r._setAllowDrag(!n);break;default:}e.prototype._setOption.call(this,t,n),t==="nodes"&&(n&&n.length&&(r._useDOMInit=!1),r._createChildNodes()),i===!0&&r._setHitArea(n)},t.prototype._initState=function(){var e=this,t=e.options;e._selectedNodes=[],e._checkedNodes=[],t.nodes||(t.nodes=[]),t.nodes&&t.nodes.length&&(e._useDOMInit=!1),e._insertPosition="unKnown",e.nodeWidgetName="wijtreenode"},t.prototype._createTree=function(){var e=this,t=e.options,r=[],i=["wijmo-wijtree",t.wijCSS.widget,t.wijCSS.content,t.wijCSS.helperClearFix,t.wijCSS.cornerAll].join(" ");e.element.is("ul")?(e.$nodes=e.element,e.element.wrap("<div></div>"),e.widgetDom=e.element.parent()):e.element.is("div")&&(e.widgetDom=e.element,e.$nodes=e.widgetDom.children("ul").eq(0)),e.$nodes.length&&(e.widgetDom.addClass(i).attr({role:"tree","aria-multiselectable":!0}),e.$nodes.addClass("wijmo-wijtree-list "+t.wijCSS.helperReset+(t.showExpandCollapse?"":" wijmo-wijtree-allexpanded")),e._createChildNodes(),e.widgetDom.append(n("<div>").css("clear","both"))),t.disabled&&e.disable()},t.prototype._createChildNodes=function(){var e=this,t={nIndex:undefined},r=[],i=e.$nodes,o=e.options.nodes,a;i.detach(),!e._useDOMInit||o.length?(i.empty(),a=s(o,e.options.showExpandCollapse),i.html(a),e.htmlGenerated=!0,a=i.children("li"),a.each(function(i,s){var o,a=n(s);t.nIndex=i,o=u(a,t,e,e.nodeWidgetName,e.widgetFullName),r.push(o)}),e.htmlGenerated=!1):(a=i.children("li"),a.each(function(i,s){var a,f=n(s);a=u(f,t,e,e.nodeWidgetName,e.widgetFullName),r.push(a),!n.browser.safari&&a.$navigateUrl&&a.$navigateUrl.length&&a.$navigateUrl.is("a")&&a.$navigateUrl.addClass("wijmo-wijtree-link"),o.push(a.options)})),this.widgetDom.append(i),e._hasChildren=r.length>0,e._setField("nodes",r),e.nodes=r},t.prototype._createNodeWidget=function(e,t){return o(e,t,this,this.nodeWidgetName,this.widgetFullName)},t.prototype._attachEvent=function(){var e=this;e.element.bind(n.browser.msie?"focusin.":"focus."+e.widgetName,n.proxy(e._onFocus,e)).bind("mouseover."+this.widgetName,n.proxy(e._onMouseOver,e)),e.options.allowDrop&&e._attachDroppable()},t.prototype._attachDroppable=function(){var e=this,t=e.options,r={accept:"li",scope:"tree",drop:undefined},i=function(n){t.showCheckBoxes&&t.allowTriState&&!n.element.is(":"+e.widgetFullName)&&n._getField("nodes").length>0&&n._getField("nodes")[0]._setParentCheckState()},s=t.droppable;n.extend(r,s),r.drop=function(r,o){var u=o.draggable,a=e._getNodeWidget(u),f,l,c,h,p,d,v,m=-1;if(e._trigger("nodeBeforeDropped",r,o)===!1||!a||t.disabled){e._isDragging=!1;return}f=a._dropTarget,l=a._insertPosition;if(f&&l!=="unKnown"){c=a._getOwner(),c&&(v=u.index()),a._tree._isDragging=!1;if(l==="end")m=f._getField("nodes").length,h=f;else if(l==="before"||l==="after")h=f._getOwner(),p=h._getField("nodes"),d=n.inArray(f,p),d!==-1&&(m=l==="before"?d:d+1);s&&n.isFunction(s.drop)?(o.oldParent=c.element,o.newParent=h.element,o.oldIndex=v,o.newIndex=m,s.drop.call(e.element,r,o)):(c&&c.remove(u),m!==-1&&((l==="before"||l==="after")&&d!=n.inArray(f,p)&&m--,e.$nodes.children("li").length?h.add(u,m):e.add(u,m))),n("a",u).eq(0).blur(),a.options.selected&&a._setSelected(!1),i(c),i(h),n.extend(o,{sourceParent:c?c.element:null,sIndex:v,targetParent:h.element,tIndex:m,widget:a}),e._trigger("nodeDropped",r,o)}},n.fn.droppable&&e.widgetDom.droppable(r)},t.prototype._attachNodeEvent=function(){this.element.bind("click."+this.widgetName,n.proxy(this._onClick,this)).bind("mouseout."+this.widgetName,n.proxy(this._onMouseOut,this)).bind("keydown."+this.widgetName,n.proxy(this._onKeyDown,this))},t.prototype._onClick=function(e){this._callEvent(e,"_onClick"),n.browser.webkit&&this.widgetDom.focus()},t.prototype._onFocus=function(e){this._callEvent(e,"_onFocus")},t.prototype._onKeyDown=function(e){this._callEvent(e,"_onKeyDown")},t.prototype._onMouseOut=function(e){this._callEvent(e,"_onMouseOut")},t.prototype._onMouseOver=function(e){this._callEvent(e,"_onMouseOver")},t.prototype._callEvent=function(e,t){var n=e.target,r;if(n){r=this._getNodeWidgetByDom(n);if(r===null)return;r[t](e)}},t.prototype._nodeSelector=function(){return":wijmo-wijtreenode"},t.prototype.getSelectedNodes=function(){return this._selectedNodes},t.prototype.getCheckedNodes=function(){var e=this,t=[],r=e.nodeWidgetName;return n(e._nodeSelector(),e.element).each(function(e,i){n(i)[r]("option","checked")&&n(i)[r]("option","checkState")!=="indeterminate"&&t.push(n(i))}),t},t.prototype.destroy=function(){var t=this,r=t.$nodes,i=t.options,s=["wijmo-wijtree",i.wijCSS.widget,i.wijCSS.content,i.wijCSS.helperClearFix,i.wijCSS.cornerAll].join(" ");t.widgetDom.removeClass(s).removeAttr("role").removeAttr("aria-multiselectable"),t.widgetDom.data("ui-droppable")&&t.widgetDom.droppable("destroy"),t.element.unbind("."+t.widgetName),t.widgetDom.children("div[style]:last").remove(),r.removeData("nodes").removeClass("wijmo-wijtree-list "+i.wijCSS.helperReset),r.children("li").each(function(e,r){var i=t._getNodeWidget(n(r));i&&i.destroy()}),n.wijmo.wijtree.prototype.options.nodes=null,e.prototype.destroy.call(this)},t.prototype.add=function(e,t){var r=null,i={},s,o,u=this,a,f,l,c;n.browser.safari?l="<li><a href='{0}'>{1}</a></li>":l="<li><a href='{0}' class='wijmo-wijtree-link'>{1}</a></li>",typeof e=="string"?(s=n(l.replace(/\{0\}/,"#").replace(/\{1\}/,e)),u._createNodeWidget(s,i),r=s.data(s.data("widgetName"))):e.jquery?(e.data("widgetName")||u._createNodeWidget(e,i),r=e.data(e.data("widgetName")),r._setField("owner",u)):e.nodeType?(s=n(e),u._createNodeWidget(s,i),r=s.data(s.data("widgetName"))):n.isPlainObject(e)&&(s=n(l.replace(/\{0\}/,e.url?e.url:"#").replace(/\{1\}/,e.text)),u._createNodeWidget(s,e),r=s.data(s.data("widgetName")));if(r===null)return;o=u._getField("nodes"),(!t||t>o.length)&&t!==0&&(t=o.length),c=r._getField("nodes"),r._tree=u;for(a=0;a<c.length;a++)c[a]._tree=u;f=o.length,f>0&&f!==t?r.element.get(0)!==o[t].element.get(0)&&r.element.insertBefore(o[t].element):u.$nodes.append(r.element),u._changeCollection(t,r),r._initNodeClass()},t.prototype.remove=function(e){var t=-1,n,r;e&&e.jquery?t=e.index():typeof e=="number"&&(t=e),r=this._getField("nodes");if(t<0||t>=r.length)return;n=r[t],n.element.detach(),this._changeCollection(t)},t.prototype._changeCollection=function(e,t){var n=this._getField("nodes"),r=this.options.nodes;t?(n.splice(e,0,t),r.splice(e,0,t.options)):(n.splice(e,1),r.splice(e,1))},t.prototype.getNodes=function(){return this.nodes},t.prototype.findNodeByText=function(e){var t=n(".wijmo-wijtree-node a>span",this.$nodes).filter(function(){return n(this).text()===e});return t.length?this._getNodeWidgetByDom(t.get(0)):null},t.prototype._setAllowDrag=function(e){var t=this,r,i=t._nodeSelector(),s="wijmo-"+t.nodeWidgetName;if(!n.fn.draggable)return;e?(r=t.element.find(i),r.each(function(){var e=n(this).data(s);(!n(this).data("ui-draggable")&&!e.$navigateUrl.data("events")||!e.$navigateUrl.data("events").mousedown)&&e.$navigateUrl.one("mousedown",e,e._onMouseDown)})):(r=t.element.find(i+":ui-draggable"),r.draggable("destroy"))},t.prototype._setAllowDrop=function(e){if(!n.fn.droppable)return;e?this.widgetDom.data("ui-droppable")||this._attachDroppable():this.widgetDom.droppable&&this.widgetDom.droppable("destroy")},t.prototype._setCheckBoxes=function(e){var t=this;t.$nodes.children("li").each(function(r,i){var s=t._getNodeWidget(n(i));s!==null&&s._setCheckBoxes(e)})},t.prototype._setHitArea=function(e){var t=this;t.$nodes[e?"addClass":"removeClass"]("wijmo-wijtree-allexpanded"),t.$nodes.children("li").each(function(r,i){var s=t._getNodeWidget(n(i));s!==null&&s._setHitArea(e)})},t.prototype._getNodeWidget=function(e){if(e.is(this._nodeSelector())){var t=e.data(e.data("widgetName"));return t}return null},t.prototype._getNodeWidgetByDom=function(e){var t=this._getNodeByDom(e);return this._getNodeWidget(t)},t.prototype._getNodeByDom=function(e){return n(e).closest(this._nodeSelector())},t.prototype._refreshNodesClass=function(){var e=this._getField("nodes"),t;for(t=0;t<e.length;t++)e[t]._initNodeClass()},t.prototype._getField=function(e){return this.element.data(e)},t.prototype._setField=function(e,t){return this.element.data(e,t)},t}(e.wijmoWidget);t.wijtree=a;var f=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._setOption=function(e,r){var i=this,s,o;switch(e){case"accessKey":i.$navigateUrl!==null&&i.$navigateUrl.attr("accesskey",r);break;case"checked":i._checkState=r?"checked":"unChecked",i._setChecked(r);break;case"collapsedIconClass":case"expandedIconClass":case"itemIconClass":i.options[e]=r,i._initNodeImg();break;case"expanded":i._setExpanded(r);break;case"selected":i._setSelected(r);break;case"text":i._setText(r);break;case"toolTip":i._setToolTip(r);break;case"navigateUrl":i._setNavigateUrlHref(r);break;case"disabled":if(i._isClosestDisabled()&&r===!0)return;s=i.element.find(":wijmo-wijtreecheck"),s.length&&s.wijtreecheck("option","disabled",r);break;default:}e==="nodes"?(i.options.nodes.length=0,n.each(r,function(e,t){i.options.nodes.push(t)}),i.options.nodes.concat(),i._hasChildren=i._getChildren(),i._createChildNodes(i.element),i._initNodeClass()):t.prototype._setOption.call(this,e,r)},r.prototype._initState=function(){this._tree=null,this._dropTarget=null,this._checkState="unChecked",this._value=this._text="",this._insertPosition="unKnown",this._hasNodes=!1},r.prototype._create=function(){var e=this,t=e.options;e._initState(),e.element.data("widgetName","wijmo-wijtreenode"),e._createTreeNode(),e._initNode(),t.selected&&e._tree._selectedNodes.push(e),t.checked&&(e._checkState="checked",e.$checkBox&&(t.checkState==="indeterminate"?e.$checkBox.wijtreecheck("option","checkState","triState"):e.$checkBox.wijtreecheck("option","checkState","check")))},r.prototype._createTreeNode=function(){var e=this.element,t,r,i=this,s,o=i.options,u=[];i._tree===null&&(i._tree=i._getTree()),isNaN(o.nIndex)?o.nodes||(o.nodes=[]):(s=i._getOwner().options,r=s.nodes[o.nIndex],r&&!r.nodes&&(r.nodes=[]),n.extend(o,r),s.nodes[o.nIndex]=o),i.$nodeBody=null,i.$checkBox=null,i.$hitArea=null,i.$nodes=null,i.$subnodes=null,i._isHtmlGenerated()?(i.$nodeBody=e.children(".wijmo-wijtree-node"),i.$inner=i.$nodeBody.children(".wijmo-wijtree-inner"),i.$nodeImage=i.$inner.children(".wijmo-wijtree-nodeimage"),i._tree.options.showCheckBoxes===!0&&(i.$checkBox=n("<div>"),i.$checkBox.insertAfter(i.$nodeImage),i.$checkBox.wijtreecheck()),i.$navigateUrl=i.$inner.children("a"),i.$text=i.$navigateUrl.children("span").eq(0),n.browser.safari||i.$navigateUrl.addClass("wijmo-wijtree-link")):(i.$nodeImage=n("<span>"),i.$nodeBody=n("<div>").attr({role:"treeitem","aria-expanded":!1,"aria-checked":!1,"aria-selected":!1}),i._tree.options.showCheckBoxes===!0&&(i.$checkBox=n("<div>")),i.$navigateUrl=e.children("a"),i.$navigateUrl.length===0&&(i.$navigateUrl=e.children("div"),i.$navigateUrl.addClass("wijmo-wijtree-template"),i._isTemplate=!0),i.$navigateUrl.length===0&&(i.$navigateUrl=n("<a href='#'></a>")),i._isTemplate||(i.$text=i.$navigateUrl.children("span").eq(0),i.$text.length===0&&(i.$navigateUrl.wrapInner("<span></span>"),i.$text=i.$navigateUrl.children("span").eq(0))),i.$inner=n("<span></span>").addClass(o.wijCSS.helperClearFix+" wijmo-wijtree-inner "+o.wijCSS.cornerAll),i.$inner.append(i.$nodeImage),i.$checkBox!==null&&(i.$inner.append(i.$checkBox),i.$checkBox.wijtreecheck()),i.$inner.append(i.$navigateUrl),i.$nodeBody.append(i.$inner),e.prepend(i.$nodeBody)),i._hasChildren=i._getChildren(),i._createChildNodes(e)},r.prototype._createChildNodes=function(e){var t=this,r=[],i=t.options;t._hasChildren?(t.$nodes===null&&(t.$nodes=e.children("ul").eq(0)),t._isHtmlGenerated()?t.$hitArea=t.$inner.children(".wijmo-wijtree-hitarea"):(e.addClass("wijmo-wijtree-parent"),t.$nodeBody.addClass("wijmo-wijtree-node wijmo-wijtree-header "+i.wijCSS.stateDefault),t.$hitArea=n("<span>"),t.$inner.prepend(t.$hitArea),t.$nodes.addClass("wijmo-wijtree-list wijmo-wijtree-child "+i.wijCSS.helperReset)),r=t._createChildNode()):t._isHtmlGenerated()||(e.addClass("wijmo-wijtree-item"),t.$nodeBody.addClass("wijmo-wijtree-node "+i.wijCSS.stateDefault)),t._setField("nodes",r)},r.prototype._isHtmlGenerated=function(){return this.htmlGenerated?!0:this._tree&&this._tree.htmlGenerated?!0:!1},r.prototype._createChildNode=function(){var e=this,t=e.options,r=[],o,a={nIndex:undefined,treeClass:t.treeClass,cfli:undefined,nodes:undefined};return t.nodes&&t.nodes.length?e._isHtmlGenerated()?(e.$subnodes===null&&e._updateSubNodes(),n.each(e.$subnodes,function(t,n){var s;a.nIndex=t,s=u(n,a,e,i,e.options.treeClass),s._index=t,r.push(s)})):(e.$nodes&&e.$nodes.length?e.$nodes.empty():e.$nodes=n("<ul>").appendTo(e.element),e.$nodes.html(s(t.nodes,e._tree.options.showExpandCollapse)),e.$subnodes=[],e.htmlGenerated=!0,o=e.$nodes.children("li"),o.each(function(t,s){var o,f=n(s);e.$subnodes.push(f),a.nIndex=t,o=u(f,a,e,i,e.options.treeClass),o._index=t,r.push(o)}),e.htmlGenerated=!1):(t.nodes||(t.nodes=[]),e.$subnodes===null&&e._updateSubNodes(),n.each(e.$subnodes,function(t,s){var o;a.cfli=!0,a.nIndex=t,a.nodes=[],o=u(s,a,e,i,e.options.treeClass),n.browser.safari||s.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner a").addClass("wijmo-wijtree-link"),o._index=t,r.push(o)})),r},r.prototype._initNode=function(){var e=this,t=e.options;e._initialized||(e._initialized=!0,e._initNavigateUrl(),!e._isTemplate&&e.$text&&(e._text=e.$text.html(),t.text=e._text),e._hasChildren=e._getChildren(),e._initNodesUL(),e._initNodeClass(),e._initNodeImg(),e._initCheckBox(),e.$navigateUrl.one("mousedown",e,e._onMouseDown))},r.prototype._initNodeClass=function(){var e=this,t=e.options,r,i="wijmo-wijtree-item",s=t.wijCSS.icon+" "+(t.expanded?t.wijCSS.iconArrowRightDown:t.wijCSS.iconArrowRight);e._tree.options.showExpandCollapse&&(e._hasChildren||!!t.hasChildren?(e._isHtmlGenerated()||(e.$nodeBody.removeClass("wijmo-state-expanded wijmo-state-collapsed"),t.expanded?e.$nodeBody.addClass("wijmo-state-expanded"):e.$nodeBody.addClass("wijmo-state-collapsed"),e.$hitArea!==null&&(e.$hitArea.removeClass([t.wijCSS.icon,t.wijCSS.iconArrowRightDown,t.wijCSS.iconArrowRight].join(" ")),e.$hitArea.addClass(s))),e.$hitArea===null&&(e.$hitArea=n("<span>").addClass(s).prependTo(e.$inner),e.element.removeClass(i).addClass("wijmo-wijtree-parent")),e._hasChildren&&e.$nodes&&e.$nodes.length&&(r=t.expanded?"":"none",e.$nodes.css({display:r}))):e.$hitArea&&e.$hitArea.length&&(e.$hitArea.remove(),e.$hitArea=null,e.element.removeClass("wijmo-wijtree-parent").addClass(i))),!e._hasChildren&&e.$nodes&&e.$nodes.length&&e.$nodes.css({display:"none"}),t.selected&&e.$inner&&e.$inner.addClass(t.wijCSS.stateActive)},r.prototype._initCheckBox=function(){var e=this,t=e.options;if(e.$checkBox&&t.checkState)switch(t.checkState){case"checked":e.$checkBox.wijtreecheck("option","checkState","check");break;case"indeterminate":e.$checkBox.wijtreecheck("option","checkState","triState");break;case"unChecked":e.$checkBox.wijtreecheck("option","checkState","unCheck");break;default:e.$checkBox.wijtreecheck("option","checkState","unCheck")}},r.prototype._initNodesUL=function(){var e=this;!e._isHtmlGenerated()&&e._tree.options.showExpandCollapse&&e._hasChildren&&e.$nodes&&e.$nodes.length&&e.$nodes[e._expanded?"show":"hide"]()},r.prototype._initNavigateUrl=function(){var e=this,t;e.$navigateUrl.bind("blur."+e.widgetName,e,e._onBlur);if(e._isHtmlGenerated())return;t=e.$navigateUrl.attr("href"),this._isTemplate||(!t||t.length==0)&&e._setNavigateUrlHref("#")},r.prototype._applyIconClass=function(e,t){var n=e.attr("expandediconclass");n&&(t.expandedIconClass=n,e.removeAttr("expandediconclass")),n=e.attr("collapsediconclass"),n&&(t.collapsedIconClass=n,e.removeAttr("collapsediconclass")),n=e.attr("itemiconclass"),n&&(t.itemIconClass=n,e.removeAttr("itemiconclass"))},r.prototype._initNodeImg=function(){var e=this,t=e.options,r=e.element;if(e.$nodeImage===null||!e.$nodeImage.length)e.$nodeImage=n("<span>");e._applyIconClass(r,t),t.collapsedIconClass!==""&&t.expandedIconClass!==""?(e.$nodeImage.removeClass().addClass(t.wijCSS.icon).addClass(t.expanded?t.expandedIconClass:t.collapsedIconClass),e._tree.options.showExpandCollapse||e.$nodeImage.addClass(t.expandedIconClass),e.$nodeImage.insertBefore(e.$checkBox)):t.itemIconClass!==""&&(e.$nodeImage.removeClass().addClass(t.wijCSS.icon),e.$nodeImage.addClass(t.itemIconClass),e.$nodeImage.insertBefore(e.$checkBox))},r.prototype._setNavigateUrlHref=function(e){if(this.$navigateUrl){if(e===""||typeof e=="undefined"||e===null)e="#";this.$navigateUrl.attr("href",e)}},r.prototype._editNode=function(){this._tree._editMode=!0,this.$navigateUrl.hide(),this.$editArea||(this.$editArea=n('<input type="text">').wijtextbox()),this.$editArea.val(this.$text.html()),this.$editArea.insertBefore(this.$navigateUrl),this.$editArea.bind("blur",this,this._editionComplete),this.$editArea.focus()},r.prototype._editionComplete=function(e){var t=e.data,n;t._tree._editMode=!1,t.$editArea&&(n=t.$editArea.val(),t.$editArea.remove()),t.$navigateUrl.show(),t.$editArea=null,t._changeText(n)},r.prototype._changeText=function(e){var t=this,n=t.options;t.$text!==null&&e!==""&&(t.$text.text(e),n.text=e,t._tree._trigger("nodeTextChanged",null,t))},r.prototype._expandCollapseItem=function(){var e=this,t=e.options;!e._tree.options.disabled&&!e._isClosestDisabled()&&(e._hasChildren||t.hasChildren)&&e._setExpanded(!t.expanded)},r.prototype._expandNode=function(e){var t=this,n=t._tree.options,r=e?"nodeExpanding":"nodeCollapsing";if(t._tree._trigger(r,null,{node:this,params:this.options.params})===!1)return;t.$nodeBody.attr("aria-expanded",e),t._expanded=e,t.options.expanded=e,!n.disabled&&!t._isClosestDisabled()&&(e?n.expandDelay>0?(typeof t._expandTimer!="undefined"&&(t._expandTimer=window.clearTimeout(t._expandTimer)),t._expandTimer=window.setTimeout(function(){t._expandNodeVisually()},n.expandDelay)):t._expandNodeVisually():n.collapseDelay>0?(t._collapseTimer=window.clearTimeout(t._collapseTimer),t._collapseTimer=window.setTimeout(function(){t._collapseNodeVisually()},n.collapseDelay)):t._collapseNodeVisually())},r.prototype._expandNodeVisually=function(){var e=this,t,r=e.options;e._tree.options.autoCollapse&&(t=e.element.siblings(":"+this.widgetFullName),n.each(t,function(n){var r=e._getNodeWidget(t[n]);r.options.expanded&&r._setExpanded(!1)})),r.collapsedIconClass!==""&&r.expandedIconClass!==""&&e.$nodeImage.removeClass(r.collapsedIconClass).addClass(r.expandedIconClass),e._internalSetNodeClass(!0),e._show()},r.prototype._collapseNodeVisually=function(){var e=this;e.options.collapsedIconClass!==""&&e.options.expandedIconClass!==""&&e.$nodeImage.removeClass(e.options.expandedIconClass).addClass(e.options.collapsedIconClass),e._internalSetNodeClass(!1),e._hide()},r.prototype._internalSetNodeClass=function(e){var t=this.options.wijCSS,n=[t.icon,t.iconArrowRightDown,t.iconArrowRight].join(" ");if(!this.$hitArea)return;this.$hitArea.removeClass(n).addClass(t.icon).addClass(e?t.iconArrowRightDown:t.iconArrowRight),this.$nodeBody.removeClass("wijmo-state-expanded").removeClass("wijmo-state-collapsed"),e?this.$nodeBody.addClass("wijmo-state-expanded"):this.$nodeBody.addClass("wijmo-state-collapsed")},r.prototype._show=function(){this._animation(!0)},r.prototype._hide=function(){this._animation(!1)},r.prototype._animation=function(e){function l(e){e.css(f)!==a&&e.css(f,a)}var t=this,r=t.$nodes,i=e?"expandAnimation":"collapseAnimation",s=e?"nodeExpanded":"nodeCollapsed",o,u=t._tree.options[i],a,f;r&&r.length&&(u?(n.browser.msie&&parseInt(n.browser.version)<9?f="filter":f="opacity",a=r.css(f),o=u.animated||u.effect,n.effects&&!!o?r[e?"show":"hide"](o,{easing:u.easing},u.duration,function(){l(r),t._tree._trigger(s,null,t)}):r[e?"show":"hide"](u.duration,function(){l(r),t._tree._trigger(s,null,t)})):(r[e?"show":"hide"](),t._tree._trigger(s,null,t)))},r.prototype._getBounds=function(e){var t=e.height(),n=e.width(),r=e.offset().top,i=e.offset().left;return{h:t,w:n,t:r,l:i}},r.prototype._isMouseInsideRect=function(e,t){return e.x<t.l||e.x>=t.l+t.w?!1:e.y<=t.t+1||e.y>=t.t+t.h?!1:!0},r.prototype._getNodeByMouseOn=function(e){return n("li").each(function(){var t=this._getBounds(n(this));if(e.y>t.t&&e.y<t.t+t.h&&e.x>t.l&&e.x<t.l+t.w)return n(this)}),null},r.prototype._drowTemplate=function(e,t,n){var r="unKnown",i=n.is(".wijmo-wijtree-node")?n:n.children(".wijmo-wijtree-node"),s=this._getBounds(i);return t.width(i.width()),e.y>s.t&&e.y<s.t+s.h/2?(t.offset({left:s.l,top:s.t}),r="before"):e.y>s.t+s.h/2&&e.y<s.t+s.h&&(t.offset({left:s.l,top:s.t+s.h}),r="after"),r},r.prototype._beginDrag=function(e){var t=this,r=t.element,i,s=t._tree.options,o=s.draggable,u={cursor:"point",cursorAt:{top:15,left:-25},helper:function(){return n("<div>"+t.$navigateUrl.html()+"</div>").addClass(s.wijCSS.header).addClass(s.wijCSS.cornerAll)},distance:n.browser.msie?1:10,handle:t.$navigateUrl,scope:"tree",stop:undefined,start:undefined,drag:undefined},a=n("<div>").addClass("wijmo-wijtree-insertion").addClass(s.wijCSS.stateDefault);typeof s.dropVisual=="string"?(i=n(s.dropVisual),a=i.length?i:a):n.isFunction(s.dropVisual)&&(i=n(s.dropVisual.call()),a=i.length?i:a),a.hide(),n.extend(u,o),u.start=function(e,i){t._tree._isDragging=!0,t._tree.widgetDom.prepend(a),t._tree._trigger("nodeDragStarted",e,t),o&&n.isFunction(o.start)?o.start.call(t.element,e,i):r.hide()},u.drag=function(e,r){var i=e.srcElement||e.originalEvent.target,s=n(i),u,f={x:e.pageX,y:e.pageY};a&&a.hide(),s&&(u=t._getNodeWidget(s),u&&!u._tree.options.disabled?(s.closest(".wijmo-wijtree-inner",t.element).length?t._insertPosition="end":(a.show(),t._insertPosition=t._drowTemplate(f,a,u.element)),u!=t&&(t._dropTarget=u)):s.is(":"+t.options.treeClass)&&(t._dropTarget=s.data(t.options.treeClass),t._insertPosition="end")),t._tree._trigger("nodeDragging",e,t),o&&n.isFunction(o.drag)&&o.drag.call(t.element,e,r)},u.stop=function(e,i){a.remove(),t._dropTarget=null,t._insertPosition="unKnown",t._tree._isDragging=!1,o&&n.isFunction(o.stop)?o.stop.call(t.element,e,i):(r.show(),t._resetDrag())},n.fn.draggable&&(r.draggable(u).trigger(e),n.browser.mozilla&&t._setFocused(!0))},r.prototype._resetDrag=function(){var e=this,t,n;!e._tree.options.allowDrag&&e.element.data("ui-draggable")&&e.element.draggable("destroy"),t=e._getField("nodes");for(n=0;n<t.length;n++)t[n]._resetDrag()},r.prototype._checkClick=function(){var e=this,t=e.options;if(!e._tree.options.disabled&&!e._isClosestDisabled()){if(e._tree._trigger("nodeCheckChanging",null,e)===!1)return;t.checked&&e._checkState==="indeterminate"?(e._checkState="checked",e._checkItem()):(e._checkState=t.checked?"unChecked":"checked",e._setChecked(!t.checked)),e._tree._trigger("nodeCheckChanged",null,e)}},r.prototype._checkItem=function(){var e=this,t=!1,n=e._tree;if(n===null||!n.options.showCheckBoxes)return;n.options.autoCheckNodes&&e._checkState!=="indeterminate"&&(t=!0,e._changeCheckState(e.options.checked)),n.options.allowTriState&&e._setParentCheckState(),e[e.options.checked?"_checkNode":"_unCheckNode"](t)},r.prototype._checkNode=function(e){var t=this,n=t.options,r=this._getField("nodes"),i;t._checkState==="checked"?(t.$checkBox.wijtreecheck("option","checkState","check"),n.checkState="checked"):t._checkState==="indeterminate"&&(t.$checkBox.wijtreecheck("option","checkState","triState"),n.checkState="indeterminate");if(e)for(i=0;i<r.length;i++)r[i]._checkNode(!0)},r.prototype._unCheckNode=function(e){var t=this._getField("nodes"),n=this.options,r;this.$checkBox.wijtreecheck("option","checkState","unCheck"),n.checkState="unChecked";if(e)for(r=0;r<t.length;r++)t[r]._unCheckNode(!0)},r.prototype._changeCheckState=function(e){var t=this._getField("nodes");n.each(t,function(t,n){n.options.checked=e,n.$nodeBody.attr("aria-checked",e),n._checkState=e?"checked":"unChecked",n._changeCheckState(e)})},r.prototype._setParentCheckState=function(){var e=this._getOwner(),t,n=!0,r=!1,i=!1,s,o=this;if(e.element.is(":"+o.options.treeClass))return;t=e._getField("nodes");for(s=0;s<t.length;s++){t[s]._checkState==="indeterminate"&&(i=!0),t[s].options.checked?r=!0:n=!1;if(!n&&r)break}i?(e._checkState="indeterminate",e._setChecked(!0)):r?(n?(e._checkState="checked",e._checkNode(!1)):e._checkState="indeterminate",e._setChecked(!0)):(e._checkState="unChecked",e._setChecked(!1),e._unCheckNode(!1)),e._setParentCheckState()},r.prototype._onKeyDown=function(e){var t=n(e.target),r=this;t.closest(".wijmo-wijtree-inner",r.element).length>0&&r._keyAction(e)},r.prototype._onClick=function(e){var t=n(e.target),r=this;t.closest(".wijmo-checkbox",r.element).length>0?(r._checkClick(),e.preventDefault(),e.stopPropagation()):r.$hitArea&&r.$hitArea[0]===t[0]?(r._expandCollapseItem(),e.preventDefault(),e.stopPropagation()):t.closest(".wijmo-wijtree-inner",r.element).length>0&&r._click(e)},r.prototype._onMouseDown=function(e){var t=n(e.target),r=e.data;!r._tree.options.disabled&&r._tree.options.allowDrag&&t.closest(".wijmo-wijtree-node",r.element).length>0&&r._beginDrag(e)},r.prototype._onMouseOver=function(e){var t=n(e.target),r=this,i=n(e.relatedTarget);t.closest(".wijmo-wijtree-inner",r.element).length>0&&(this._tree._overNode!==r||i.is(":"+this.widgetFullName))&&(r._mouseOver(e),this._tree._overNode=r),r._mouseOverHitArea(e)},r.prototype._onMouseOut=function(e){var t=n(e.target),r=this,i=n(e.relatedTarget),s=this._getNodeWidget(i);t.closest(".wijmo-wijtree-inner",r.element).length>0&&(this._tree._overNode!==s||i.is(":"+this.widgetFullName)||i.is(".wijmo-wijtree-list")||i.is(".ui-effects-wrapper"))&&(r._mouseOut(e),s||(this._tree._overNode=null)),r._mouseOutHitArea(e)},r.prototype._onFocus=function(e){var t=n(e.target),r=this,i=r.options.wijCSS;t.closest(".wijmo-wijtree-inner",r.element).length>0&&!r._tree.options.disabled&&!r._isClosestDisabled()&&!t.hasAllClasses(i.iconArrowRightDown)&&!t.hasAllClasses(i.iconArrowRight)&&!t.closest(".wijmo-checkbox",r.element).length&&(r._tree._focusNode&&r._tree._focusNode.$navigateUrl.blur(),r._focused=!0,r._tree._focusNode=this,r.$inner.addClass(i.stateFocus),r._tree._trigger("nodeFocus",e,r))},r.prototype._onBlur=function(e){var t=n(e.target),r=e.data,i=r.options.wijCSS;!r._tree.options.disabled&&!r._isClosestDisabled()&&(r._focused=!1,t.closest(".wijmo-wijtree-inner",r.element).length>0&&r.$inner.removeClass(i.stateFocus),r._tree._trigger("nodeBlur",e,r))},r.prototype._click=function(e){var t=this,r=t.options,i=t._tree,s=t.$navigateUrl.attr("href");if(!i.options.disabled&&!t._isClosestDisabled()){if(!/^[#,\s]*$/.test(s)){if(!n.browser.msie||!/^7\.[\d]*/.test(n.browser.version))return;if(s.indexOf(window.location.href)<0)return}t._isClick=!0,i._ctrlKey=e.ctrlKey,r.selected&&i._ctrlKey?t._setSelected(!1):r.selected&&!t._tree._editMode&&i.options.allowEdit&&!t._isTemplate?t._editNode():t._setSelected(!r.selected),t._isTemplate||(e.preventDefault(),e.stopPropagation())}else t._setNavigateUrlHref("")},r.prototype._selectNode=function(e,t){var r=this,i=r.options,s,o;!r._tree.options.disabled&&!r._isClosestDisabled()&&!r._tree._isDragging&&(s=r._tree._ctrlKey,s?(o=n.inArray(r,r._tree._selectedNodes),o!==-1&&!e&&(r._tree._selectedNodes.splice(o,1),r.$inner.removeClass(i.wijCSS.stateActive))):(n.each(r._tree._selectedNodes,function(e,t){t.$inner.removeClass(i.wijCSS.stateActive),t.options.selected=!1,t.$nodeBody.attr("aria-selected",!1)}),r._tree._selectedNodes=[]),e?(o=n.inArray(r,r._tree._selectedNodes),o===-1&&this._tree._selectedNodes.push(r),r.$inner.addClass(i.wijCSS.stateActive)):r.$inner.removeClass(i.wijCSS.stateActive),r._isClick&&r._tree._trigger("nodeClick",t,r),r._isClick=!1,r._tree._ctrlKey=!1,r._tree._trigger("selectedNodeChanged",t,r))},r.prototype._keyAction=function(t){var n=t.target,r=this,i=!1,s=e.getKeyCodeEnum();if(r._tree.options.disabled||r._isClosestDisabled())return;if(n){if(r._tree._editMode&&t.keyCode!==s.ENTER)return;switch(t.keyCode){case s.UP:r._moveUp();break;case s.DOWN:r._moveDown();break;case s.RIGHT:r._tree.options.showExpandCollapse&&r._moveRight();break;case s.LEFT:r._tree.options.showExpandCollapse&&r._moveLeft();break;case 83:!r._tree._editMode&&r._tree.options.allowSorting&&r.sortNodes();break;case 113:r._tree.options.allowEdit&&r._editNode();break;case 109:r._tree.options.showExpandCollapse&&this._expanded&&r._setExpanded(!1);break;case 107:r._tree.options.showExpandCollapse&&!this._expanded&&r._setExpanded(!0);break;case s.ENTER:r._tree._editMode&&(t.data=r,r._editionComplete(t),r._setFocused(!0),i=!0,t.preventDefault());break;case s.SPACE:r._tree.options.showCheckBoxes&&(r._checkState=r.options.checked?"unChecked":"checked",r._setChecked(!r.options.checked))}r._customKeyDown(t.keyCode,i),!r._isTemplate&&t.keyCode!==s.ENTER&&(t.preventDefault(),t.stopPropagation())}},r.prototype._customKeyDown=function(e,t){},r.prototype._prevNode=function(e){var t=e.element;if(t.prev().length>0)return t.prev().data(t.data("widgetName"))},r.prototype._nextNode=function(e){var t=e.element;if(t.next().length>0)return t.next().data(t.data("widgetName"))},r.prototype._getNextExpandedNode=function(e){var t=e,n=e._getField("nodes"),r;return e._expanded&&n.length>0&&(r=n[n.length-1],r!==null&&(t=this._getNextExpandedNode(r))),t},r.prototype._getNextNode=function(e){var t=null,n=this;return e.element.is(":"+n.options.treeClass)?null:(t=n._nextNode(e),t?t:n._getNextNode(e._getOwner()))},r.prototype._moveUp=function(){var e=this._getCurrentLevel(),t=this._prevNode(this);t?this._getNextExpandedNode(t)._setFocused(!0):e>0&&this._getOwner()._setFocused(!0)},r.prototype._moveDown=function(){var e=this._getField("nodes"),t,n,r;this._expanded&&e.length>0?e[0]._setFocused(!0):(t=this._nextNode(this),t?t._setFocused(!0):(n=this._getOwner(),r=this._getNextNode(n),r&&r._setFocused(!0)))},r.prototype._moveLeft=function(){var e=this._getOwner();this._expanded?this._setExpanded(!1):e!==null&&!e.element.is(":"+this.options.treeClass)&&e._setFocused(!0)},r.prototype._moveRight=function(){if(this._hasChildren)if(!this._expanded)this._setExpanded(!0);else{var e=this._getField("nodes")[0];e!==null&&e._setFocused(!0)}},r.prototype._mouseOver=function(e){var t=this,n=t._tree;!n.options.disabled&&!t._isClosestDisabled()&&!n._editMode&&(t._mouseOverNode(),n._isDragging||n._trigger("nodeMouseOver",e,t))},r.prototype._mouseOut=function(e){var t=this,n=t._tree;!n.options.disabled&&!t._isClosestDisabled()&&!n._editMode&&(t._mouseOutNode(),n._isDragging||n._trigger("nodeMouseOut",e,t))},r.prototype._mouseOverNode=function(){this.$inner!==null&&!this._isOverNode&&(this.$inner.addClass(this.options.wijCSS.stateHover),this._isOverNode=!0)},r.prototype._mouseOutNode=function(){this.$inner!==null&&this._isOverNode&&(this.$inner.removeClass(this.options.wijCSS.stateHover),this._isOverNode=!1)},r.prototype._mouseOverHitArea=function(e){var t,n,r=this,i=r._tree;!i.options.disabled&&!r._isClosestDisabled()&&i.options.expandCollapseHoverUsed&&r._hasChildren&&!r._isOverHitArea&&(t=r._getBounds(r.element),n={x:e.pageX,y:e.pageY},r._isMouseInsideRect(n,t)&&(r._isOverHitArea=!0,r._setExpanded(!0)))},r.prototype._mouseOutHitArea=function(e){var t={x:e.pageX,y:e.pageY},n,r=this,i=r._tree;!i.options.disabled&&!r._isClosestDisabled()&&i.options.expandCollapseHoverUsed&&(r._hasChildren&&!!r._isOverHitArea?(n=r._getBounds(r.element),r._isMouseInsideRect(t,n)||(r._isOverHitArea=!1,r._setExpanded(!1))):r._getOwner().element.is(":"+r.widgetFullName)&&(n=r._getBounds(r._getOwner().element),r._isMouseInsideRect(t,n)||(r._getOwner()._isOverHitArea=!1,r._getOwner()._setExpanded(!1))))},r.prototype.destroy=function(){var e=this,t,r=e.options;e.element.data("ui-draggable")&&e.element.draggable("destroy"),e.$hitArea&&e.$hitArea.remove(),e.$checkBox&&e.$checkBox.remove(),e.$nodeImage&&e.$nodeImage.remove(),e.$navigateUrl.unwrap().unwrap().removeClass(r.wijCSS.stateDefault).removeClass(r.wijCSS.stateActive).unbind("mousedown").unbind("blur"),t=this.element.find("ul:first").show(),t.removeClass(),t.children("li").each(function(){var t=e._getNodeWidget(n(this));t.destroy()}),e.element.removeData("nodes").removeData("owner").removeData("widgetName").removeClass(),n.Widget.prototype.destroy.apply(this)},r.prototype.add=function(e,t){var r=null,i,s,o=this,u,a,f,l,c,h;n.browser.safari?f="<li><a href='{0}'>{1}</a></li>":f="<li><a href='{0}' class='wijmo-wijtree-link'>{1}</a></li>",typeof e=="string"?(i=n(f.replace(/\{0\}/,"#").replace(/\{1\}/,e)),o._createNodeWidget(i),r=i.data(i.data("widgetName"))):e.jquery?(e.data("widgetName")||o._createNodeWidget(e),r=e.data(e.data("widgetName"))):e.nodeType?(i=n(e),o._createNodeWidget(i),r=i.data(i.data("widgetName"))):n.isPlainObject(e)&&(i=n(f.replace(/\{0\}/,e.url?e.url:"#").replace(/\{1\}/,e.text)),o._createNodeWidget(i,e),r=i.data(i.data("widgetName")));if(r===null)return;n.browser.safari||(c=o.element.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner .wijmo-wijtree-link"),c&&c.length>0&&c.removeClass("wijmo-wijtree-link"),h=o.element.children(".wijmo-wijtree-node").find(".wijmo-wijtree-inner .wijmo-checkbox"),h&&h.length>0&&h.removeClass("wijmo-checkbox")),s=o._getField("nodes"),(!t||t>s.length)&&t!==0&&(t=s.length),n.mobile&&r.element.find("a").addClass("ui-link"),u=r._getField("nodes"),r._tree=o._tree;for(a=0;a<u.length;a++)u[a]._tree=o._tree;r._setField("owner",o),l=s.length;if(!o.$nodes||!o.$nodes.length)o.$nodes=n("<ul></ul>").addClass("wijmo-wijtree-list").addClass(o.options.wijCSS.helperReset).addClass("wijmo-wijtree-child"),o.element.append(o.$nodes);l>0&&l!==t?r.element.get(0)!==s[t].element.get(0)&&r.element.insertBefore(s[t].element):o.$nodes.append(r.element),o.$subnodes=null,o._changeCollection(t,r),o._collectionChanged(),r._initNodeClass(),n.browser.safari||setTimeout(function(){c&&c.length>0&&c.addClass("wijmo-wijtree-link"),h&&h.length>0&&h.addClass("wijmo-checkbox")},0)},r.prototype.remove=function(e){var t=-1,n,r=this,i=this._getField("nodes");e.jquery?t=e.index():typeof e=="number"&&(t=e);if(t<0||t>=i.length)return;n=i[t],n.element.detach(),r.$subnodes=null,r._changeCollection(t),r._collectionChanged()},r.prototype.getNodes=function(){return this._getField("nodes")},r.prototype._changeCollection=function(e,t){var n=this._getField("nodes"),r=this.options.nodes;t?(n.splice(e,0,t),r.splice(e,0,t.options)):(n.splice(e,1),r.splice(e,1))},r.prototype.sortNodes=function(){var e=this._getField("nodes");this._sort(),n.each(e,function(e,t){t._index=e,t._insertBefore(e)}),this._refreshNodesClass()},r.prototype.check=function(e){this._setOption("checked",e)},r.prototype.select=function(e){this._setOption("selected",e)},r.prototype.getOwner=function(){var e=this._getOwner();return e&&e.element.is("li")?e:null},r.prototype.expand=function(){this._setOption("expanded",!0)},r.prototype.collapse=function(){this._setOption("expanded",!1)},r.prototype._insertBefore=function(e){var t=this.element.parent().children("li");this.element.index()!==e&&this.element.insertBefore(t.eq(e))},r.prototype._sort=function(){var e=this._getField("nodes");this._isSorted?this._isDecsSort?(e.sort(this._compare2NodeTextDesc),this._isDecsSort=!1):(e.sort(this._compare2NodeTextAcs),this._isDecsSort=!0):(e.sort(this._compare2NodeTextAcs),this._isSorted=!0,this._isDecsSort=!0)},r.prototype._compare2NodeTextAcs=function(e,t){if(e!==null&&t!==null)return e._text.localeCompare(t._text)},r.prototype._compare2NodeTextDesc=function(e,t){if(e!==null&&t!==null)return-1*e._text.localeCompare(t._text)},r.prototype._collectionChanged=function(){this._hasChildren=this._getChildren(),this._initNodeClass()},r.prototype._refreshNodesClass=function(){var e=this._getField("nodes"),t;for(t=0;t<e.length;t++)e[t]._initNodeClass()},r.prototype._setChecked=function(e){var t=this;if(t.options.checked===e&&t._checkState!=="indeterminate")return;t.options.checked=e,t.$nodeBody.attr("aria-checked",e),this._checkItem()},r.prototype._isClosestDisabled=function(){var e=this;return e.element.closest(".wijmo-wijtree-disabled,.wijmo-wijtreenode-disabled",e._tree.element).length?!0:!1},r.prototype._setExpanded=function(e){var t=this,n=t.options;if(t._expanded===e)return;(t._hasChildren||n.hasChildren)&&t._expandNode(e)},r.prototype._setFocused=function(e){e?(this.$navigateUrl.focus(),this._setFocusNode()):this.$navigateUrl.blur()},r.prototype._setFocusNode=function(){this._tree._focusNode&&n.browser.webkit&&this._tree._focusNode.$navigateUrl.blur(),this._focused=!0,this._tree._focusNode=this,this.$inner.addClass(this.options.wijCSS.stateFocus),this._tree._trigger("nodeFocus",null,this)},r.prototype._setToolTip=function(e){e.length?this.element.attr("title",e):this.element.removeAttr("title")},r.prototype._setText=function(e){this._text!==e&&e.length&&(this._text=e,this._changeText(e))},r.prototype._setSelected=function(e){var t=this,n=t.options;n.selected!==e&&(n.selected=e,t.$nodeBody.attr("aria-selected",e),t._selectNode(e),t._setFocused(e))},r.prototype._setCheckBoxes=function(e){var t=this;t.$checkBox?t.$checkBox[e?"show":"hide"]():e&&(t.$checkBox=n("<div>"),t.$checkBox.insertBefore(t.$navigateUrl),t.$checkBox.wijtreecheck()),t.$nodes&&t.$nodes.length&&t.$nodes.children("li").each(function(r,i){var s=t._getNodeWidget(n(i));s!==null&&s._setCheckBoxes(e)})},r.prototype._setHitArea=function(e){var t=this;t._hasChildren&&(e?(t._initNodeClass(),t.$hitArea&&t.$hitArea.show()):(t._expanded=!0,t.options.expanded=!0,t.$nodeBody.attr("aria-expanded",!0),t.$nodes&&t.$nodes.length&&t.$nodes.show(),t._initNodeClass(),t.$hitArea&&t.$hitArea.hide())),t.$nodes&&t.$nodes.length&&t.$nodes.children("li").each(function(r,i){var s=t._getNodeWidget(n(i));s!==null&&s._setHitArea(e)})},r.prototype._getOwner=function(){return this._getField("owner")},r.prototype._getTree=function(){var e=this._getOwner();return e?e._tree?e._tree:e:null},r.prototype._getInitElement=function(){var e=n("<li>"),t=this,r=n("<ul>"),i=t._getField("nodes");return e.append(t.$navigateUrl.clone()),i.length&&(e.append(r),n.each(i,function(e,t){var n=t._getInitElement();r.append(n)})),e},r.prototype._updateSubNodes=function(){var e,t;this.$subnodes=[];if(this.$nodes===null||!this.$nodes.length)return;e=this.$nodes.children("li");for(t=0;t<e.length;t++)this.$subnodes.push(n(e[t]))},r.prototype._getChildren=function(){return this.options.nodes&&this.options.nodes.length>0?!0:this._isHtmlGenerated()?!1:(this.$nodes===null&&(this.$nodes=this.element.children("ul").eq(0)),this.$nodes.length==0?!1:(this.$subnodes===null&&this._updateSubNodes(),this.$subnodes.length>0))},r.prototype._getNodeWidget=function(e){var t=this._getNodeByDom(e),n;return t.length>0?(n=t.data(t.data("widgetName")),n):null},r.prototype._createNodeWidget=function(e,t){return o(e,t,this,i,this.options.treeClass)},r.prototype._getNodeByDom=function(e){return n(e).closest(":"+this.widgetFullName)},r.prototype._getCurrentLevel=function(){return this.element.parentsUntil(":"+this.options.treeClass).length-1},r.prototype._getField=function(e){return this.element.data(e)},r.prototype._setField=function(e,t){return this.element.data(e,t)},r}(e.wijmoWidget);t.wijtreenode=f;var l="",c="",h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initCSS=function(e){var t=e.wijCSS;l=t.icon+" "+t.iconCheck,c=t.icon+" "+t.iconStop},t.prototype._create=function(){var e=this,t=this.options,r=t.wijCSS;e._initCSS(t),e.element.is("div")&&(e.element.addClass("wijmo-checkbox").addClass(r.widget).attr("role","checkbox"),e.$icon=n("<span>"),e.$icon.addClass("wijmo-checkbox-icon"),t.checkState==="check"?e.$icon.addClass(l):t.checkState==="triState"&&e.$icon.addClass(c),e.$body=n("<div></div>").addClass(["wijmo-checkbox-box",r.widget,r.cornerAll,r.stateDefault].join(" ")).css({position:"relative"}).append(e.$icon),e.element.append(e.$body),e.element.bind("mouseover.wijtreecheck",function(){e.options.disabled||e.$body.addClass(r.stateHover)}).bind("mouseout.wijtreecheck",function(){e.options.disabled||e.$body.removeClass(r.stateHover).not(r.stateFocus).addClass(r.stateDefault)}))},t.prototype._setOption=function(e,t){var r=this,i=r.options.wijCSS;e==="checkState"&&(t==="unCheck"?(r.$body.removeClass(i.stateActive),r.$icon.removeClass(l).removeClass(c).removeClass(i.stateActive)):t==="check"?(r.$body.addClass(i.stateActive),r.$icon.removeClass(c).addClass(l)):t==="triState"&&(r.$body.addClass(i.stateActive),r.$icon.removeClass(l).addClass(c))),n.Widget.prototype._setOption.apply(r,arguments)},t.prototype.destory=function(){this.element.children().remove(),this.element.removeClass("wijmo-checkbox").removeClass(this.options.wijCSS.widget),n.Widget.prototype.destroy.apply(this)},t}(e.wijmoWidget);t.wijtreecheck=h,h.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-b",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-b"},checkState:"unCheck"});var p=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-b"},this.treeClass="wijmo-wijtree",this.initSelector=":jqmData(role='wijtreenode')",this.accessKey="",this.checked=!1,this.collapsedIconClass="",this.expanded=!1,this.expandedIconClass="",this.itemIconClass="",this.navigateUrl="",this.selected=!1,this.text="",this.toolTip="",this.hasChildren=!1,this.params={},this.nodes=null}return e}(),d=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},this.allowDrag=!1,this.allowDrop=!1,this.allowEdit=!1,this.allowSorting=!0,this.allowTriState=!0,this.autoCheckNodes=!0,this.autoCollapse=!1,this.disabled=!1,this.expandCollapseHoverUsed=!1,this.showCheckBoxes=!1,this.showExpandCollapse=!0,this.expandAnimation={effect:"blind",easing:"linear",duration:200},this.expandDelay=0,this.collapseAnimation={effect:"blind",easing:"linear",duration:200},this.collapseDelay=0,this.draggable=null,this.droppable=null,this.dropVisual=null,this.nodes=null,this.nodeBlur=null,this.nodeFocus=null,this.nodeClick=null,this.nodeCheckChanging=null,this.nodeCheckChanged=null,this.nodeCollapsed=null,this.nodeExpanded=null,this.nodeDragging=null,this.nodeDragStarted=null,this.nodeBeforeDropped=null,this.nodeDropped=null,this.nodeMouseOver=null,this.nodeMouseOut=null,this.nodeTextChanged=null,this.selectedNodeChanged=null,this.nodeExpanding=null,this.nodeCollapsing=null}return e}();f.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new p),a.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new d),n.wijmo.registerWidget("wijtree",a.prototype),n.wijmo.registerWidget("wijtreenode",f.prototype),n.wijmo.registerWidget("wijtreecheck",h.prototype)})(e.tree||(e.tree={}));var t=e.tree})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijupload",i="wijmo-wijupload",s="wijmo-wijupload-fileRow",o="."+s,u="wijmo-wijupload-filesList",a="wijmo-wijupload-commandRow",f="wijmo-wijupload-uploadAll",l="wijmo-wijupload-cancelAll",c="wijmo-wijupload-buttonContainer",h="wijmo-wijupload-upload",p="."+h,d="wijmo-wijupload-cancel",v="."+d,m="wijmo-wijupload-file",g="wijmo-wijupload-progress",y="wijmo-wijupload-loading",b,w,E=function(e){return e.indexOf("\\")>-1&&(e=e.substring(e.lastIndexOf("\\")+1)),e},S=function(e){var t=e.files,r="";return t?(n.each(t,function(e,t){r+=E(t.name)+"; "}),r.length&&(r=r.substring(0,r.lastIndexOf(";")))):r=E(e.value),r},x=function(e){var t=e.files,r=0;return t&&t.length>0&&n.each(t,function(e,t){t.size&&(r+=t.size)}),r};b=function(e,t,r){var i,s=n("input",t),o=function(e){e&&(e.abort(),e=null)},u=function(e){e&&(e=null)},a=function(){var e=this,i=s.get(0),a=i.files,f=[],l=0,c=0,h=function(t,r){var i=new XMLHttpRequest;return i.open("POST",r,!0),i.setRequestHeader("Wijmo-RequestType","XMLHttpRequest"),i.setRequestHeader("Cache-Control","no-cache"),i.setRequestHeader("Wijmo-FileName",encodeURI(t)),i.setRequestHeader("Content-Type","application/octet-stream"),i.upload.onprogress=function(t){if(t.lengthComputable){var r;n.isFunction(e.onProgress)&&(r={supportProgress:!0,loaded:c+t.loaded,total:x(s[0]),fileName:E(e.currentFile.name),fileNameList:S(s[0]).split("; ")},e.onProgress(r))}},i.onreadystatechange=function(t){if(this.readyState===4){var r=this.responseText,i;c+=a[l].size,l++,a.length>l?p(a[l]):n.isFunction(e.onComplete)&&(i={e:t,response:r,supportProgress:!0},e.onComplete(i))}},f.push(i),i},p=function(t){var n=E(t.name),i=h(n,r);e.handleRequest(i,t),e.currentFile=t,i.send(t)};e.fileRow=t,e.inputFile=s,e.upload=function(){p(a[l])},e.cancel=function(){n.each(f,function(e,t){o(t)}),n.isFunction(e.onCancel)&&e.onCancel()},e.destroy=function(){n.each(f,function(e,t){u(t)})},e.updateAction=function(e){r=e},e.handleRequest=null,e.onCancel=null,e.onComplete=null,e.onProgress=null};return i=new a,i},w=function(e,t,r){var i,s=n("input",t),o=s.attr("id"),u="wijUploadForm_"+e,a=n("#"+u),f="wijUploadIfm_"+o,l=!0,c=n('<iframe id="'+f+'" name="'+f+'">'),h=function(e,t){a.empty(),a.attr("target",e.attr("name")),t&&(t.parent().append(t.clone()),a.append(t)),a.submit()},p=function(e){e.attr("src","javascript".concat(":false;"))},d=function(e,t){t&&a&&(a.remove(),a=null),e&&(e.remove(),e=null)},v;return a.length===0&&(a=n('<form method="post" enctype="multipart/form-data"></form>'),a.attr("action",r).attr("id",u).attr("name",u).appendTo("body")),c.css("position","absolute").css("top","-1000px").css("left","-1000px"),c.appendTo("body"),v=function(){var e=this;e.fileRow=t,e.iframe=c,e.inputFile=s,e.upload=function(){var t;h(c,s),n.isFunction(e.onProgress)&&(t={supportProgress:!1,loaded:1,total:1},e.onProgress(t))},e.doPost=function(){h(c)},e.cancel=function(){p(c),n.isFunction(e.onCancel)&&e.onCancel()},e.updateAction=function(e){r=e,a.attr("action",e)},e.destroy=function(e){d(c,e)},e.onCancel=null,e.onComplete=null,e.onProgress=null,c.bind("load",function(t){if(!n.browser.safari&&l&&!e.autoSubmit){l=!1;return}if(c.attr("src")==="javascript".concat(":false;"))return;var r=t.target,i,s,o;try{s=r.contentDocument?r.contentDocument:window.frames[0].document,s.XMLDocument?i=s.XMLDocument:s.body?i=s.body.innerHTML:i=s,n.isFunction(e.onComplete)&&(o={e:t,response:i,supportProgress:!1},e.onComplete(o))}catch(u){i=""}finally{}})},i=new v,i};var T=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._swfAppendAddtionalData=function(e){e.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:""},e.widget=this},t.prototype._swfGetHandlers=function(){var e=this,t=e.element;return{onSelect:function(t){var n=this,r={};if(e._trigger("change",null,t)===!1)return!1;e._createFileRow(t),this.queueData.queueSize+=t.size,this.queueData.files[t.id]=t},onSelectError:function(e,t){t==SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT?alert("File size exceeds the limitation!"):t==SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&alert("Too many files!")},onDialogOpen:function(){this.queueData.filesReplaced=0,this.queueData.filesCancelled=0},onDialogClose:function(t,n,r){var i=this.settings;this.queueData.filesErrored=t-n,this.queueData.filesSelected=t,this.queueData.filesQueued=n-this.queueData.filesCancelled,this.queueData.queueLength=r,e.isStartUpload=!1,e.options.autoSubmit&&(e.uploadAll=!0,e._swfUploadFile()),i.onDialogClose&&i.onDialogClose.call(this,this.queueData)},onUploadStart:function(t){this.bytesLoaded=0,this.queueData.uploadQueue.length==0&&(this.queueData.uploadSize=t.size);if(!e.isStartUpload&&e.uploadAll){if(e._trigger("totalUpload",null,null)===!1)return this.cancelUpload(),!1;e.isStartUpload=!0}if(e._trigger("upload",null,t)===!1)return this.cancelUpload(t.id),!1},onUploadProgress:function(r,i,s){var o=n("#"+r.id,t),u,a,f=Math.round(i/s*100),l=n("."+g,o),c={sender:r.name,loaded:i,total:s},h=this.queueData;l.html(f+"%"),e._trigger("progress",null,c),u=h.queueBytesUploaded+i,a=h.queueSize,e._updateSwfProgress(u,a),e._trigger("totalProgress",null,{loaded:u,total:a})},onUploadError:function(e,r,i){var s=this.settings,o=n("#"+e.id,t),u=n("."+g,o),a="Error";switch(r){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:a="HTTP Error ("+i+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:a="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:a="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:a="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+i+")."),a="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:a="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:a="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:a="Cancelled",this.queueData.queueSize-=e.size,this.queueData.queueLength-=1;if(e.status==SWFUpload.FILE_STATUS.IN_PROGRESS||n.inArray(e.id,this.queueData.uploadQueue)>=0)this.queueData.uploadSize-=e.size;s.onCancel&&s.onCancel.call(this,e),delete this.queueData.files[e.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:a="Stopped"}u.text(a);var f=this.getStats();this.queueData.uploadsErrored=f.upload_errors},onUploadSuccess:function(r,i,s){var o=this.getStats();this.queueData.uploadsSuccessful=o.successful_uploads,this.queueData.queueBytesUploaded+=r.size,this.queueData.response=s;var u=n("#"+r.id,t),a=this;a.queueData.queueLength-=1,u.fadeOut(1500,function(){u.remove(),e.options.showUploadedFiles&&e._createUploadedFiles(r.name),a.queueData.queueLength||e.commandRow.hide()}),e._trigger("complete",null,{response:s})},onUploadComplete:function(t,n,r){var i=this;!i.queueData.queueLength&&e.uploadAll&&(e._cleanSwfProgress(),e._trigger("totalComplete",null,i.queueData)),e.uploadAll&&e._swfUploadFile()}}},t.prototype._cleanSwfProgress=function(){},t.prototype._updateSwfProgress=function(e,t){},t.prototype._initSwfUploadOptions=function(e,t){var r=this,i=r.element,s,o=r._swfGetHandlers(),u=r.options,a=r.options.swfUploadOptions,f=i.attr("id"),l=f+"_SWFUpload";return n("<input type='file' id='"+l+"'>").appendTo(i),s=n.extend({id:l,swf:"SWFUpload.swf",auto:!1,buttonClass:"",buttonCursor:"hand",buttonImage:null,checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:u.maximumFileSize?u.maximumFileSize:0,fileTypeDesc:"All Files",fileTypeExts:u.accept?u.accept:"*.*",height:t,itemTemplate:!1,method:"post",multi:u.multiple,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:u.maximumFiles?u.maximumFiles:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:e,uploader:u.action,overrideEvents:[]},a),{assume_success_timeout:s.successTimeout,button_placeholder_id:s.id,button_width:s.width,button_height:s.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:u.multiple?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:s.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:s.debug,requeue_on_error:s.requeueErrors,file_post_name:s.fileObjName,file_size_limit:s.fileSizeLimit,file_types:s.fileTypeExts,file_types_description:s.fileTypeDesc,file_queue_limit:s.queueSizeLimit,file_upload_limit:s.uploadLimit,flash_url:s.swf,prevent_swf_caching:s.preventCaching,post_params:s.formData,upload_url:s.uploader,use_query_string:s.method=="get",file_dialog_complete_handler:o.onDialogClose,file_dialog_start_handler:o.onDialogOpen,file_queued_handler:o.onSelect,file_queue_error_handler:o.onSelectError,swfupload_loaded_handler:s.onSWFReady,upload_complete_handler:o.onUploadComplete,upload_error_handler:o.onUploadError,upload_progress_handler:o.onUploadProgress,upload_start_handler:o.onUploadStart,upload_success_handler:o.onUploadSuccess}},t.prototype._createSWFUpload=function(){var e=this,t=e.element,r=e.addBtn,i,s=e.options.swfUploadOptions,o,u=r.width(),a=r.height(),f=swfobject.getFlashPlayerVersion(),l=f.major>=9;l?(i=e._initSwfUploadOptions(u,a),o=new SWFUpload(i),e.swfupload=o,n("#"+o.movieName).css({position:"absolute","z-index":100,top:0,left:0,width:u,height:a}),e._swfAppendAddtionalData(o)):(alert("Please install flash player."),s&&s.onFallback&&s.onFallback.call())},t.prototype._create=function(){var e=this,t=e.options,r=(new Date).getTime(),i=e.supportXhr();window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.filesLen=0,e.totalUploadFiles=0,e.useXhr=i,e.id=r,e._createContainers(),e._createUploadButton(),t.enableSWFUploadOnIE&&n.browser.msie||t.enableSWFUpload?e._createSWFUpload():e._createFileInput(),e._bindEvents(),t.disabled&&e.disable(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e._applyInputPosition(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijupload")},t.prototype._setOption=function(e,t){var r=this;n.Widget.prototype._setOption.apply(this,arguments),e==="disabled"?r._handleDisabledOption(t,r.upload):e==="accept"&&r.input&&r.input.attr("accept",t)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r,i=e?e:t.upload,s=i.offset(),o=i.outerWidth(),u=i.outerHeight();return r=n("<div></div>").addClass(t.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),n.browser.msie&&(r.css("background-color","white"),parseInt(n.browser.version)>=9&&r.css("opacity","0.1")),r},t.prototype.destroy=function(){var t=this;t.upload.removeClass(i),t.upload.undelegate(t.widgetName).undelegate("."+t.widgetName),t.input.remove(),t.addBtn.remove(),t.filesList.remove(),t.commandRow.remove(),t.isCreateByInput===!0&&t.element.css({display:""}).unwrap(),t.uploaders&&(n.each(t.uploaders,function(e,t){t.destroy&&t.destroy(!0),t=null}),t.uploaders=null),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},t.prototype.widget=function(){return this.upload},t.prototype.supportXhr=function(){var e=!1;return typeof (new XMLHttpRequest).upload=="undefined"?e=!1:e=!0,e},t.prototype._createContainers=function(){var e=this,t,r,s=e.element;if(s.is(":input")&&s.attr("type")==="file")e.isCreateByInput=!0,e.maxDisplay=s.attr("multiple")||e.options.multiple?0:1,e.upload=s.css({display:"none"}).wrap("<div>").parent();else{if(!e.element.is("div"))throw'The initial markup must be "DIV", "INPUT[type=file]"';e.maxDisplay=e.options.multiple?0:1,e.upload=s}e.upload.addClass(i),t=n("<ul>").addClass(u).appendTo(e.upload),r=n("<div>").addClass(a).appendTo(e.upload),e.filesList=t,r.hide(),e.commandRow=r,e._createCommandRow(r)},t.prototype._createCommandRow=function(e){var t=this,r=t.options,i=n("<a>").attr("href","#").text("uploadAll").addClass(f).button({icons:{primary:r.wijCSS.iconCircleArrowN},label:t._getLocalization("uploadAll","Upload All")}).button("widget").addClass(r.wijCSS.stateDefault),s=n("<a>").attr("href","#").text("cancelAll").addClass(l).button({icons:{primary:r.wijCSS.iconCancel},label:t._getLocalization("cancelAll","Cancel All")}).button("widget").addClass(r.wijCSS.stateDefault);e.append(i).append(s)},t.prototype._getLocalization=function(e,t){var n=this.options.localization;return n&&n[e]||t},t.prototype._createUploadButton=function(){var e=this,t=e.options,r=n("<a>").attr("href","javascript:void(0);").button({label:e._getLocalization("uploadFiles","Upload files")}).button("widget").addClass(t.wijCSS.stateDefault);r.mousemove(function(t){var n=r.data("ui-button").options.disabled;if(e.input){var i=t.pageX,s=t.pageY;n||e.input.offset({left:i+10-e.input.width(),top:s+10-e.input.height()})}}),e.addBtn=r,e.upload.prepend(r)},t.prototype._applyInputPosition=function(){var e=this,t=e.addBtn,n=t.offset(),r=e.cuurentInput;r.offset({left:n.left+t.width()-r.width(),top:n.top}).height(t.height())},t.prototype._createFileInput=function(){var e=this,t=e.addBtn,r=t.offset(),i=e.element.attr("accept")||e.options.accept,s="wijUpload_"+e.id+"_input"+e.filesLen,o=n("<input>").attr("type","file").prependTo(e.upload),u=e.options.maximumFiles||e.maxDisplay;u!==1&&e.maxDisplay===0&&o.attr("multiple","multiple"),i&&o.attr("accept",i),e.cuurentInput=o,e.filesLen++,o.attr("id",s).attr("name",s).css("position","absolute").offset({left:r.left+t.width()-o.width(),top:r.top}).css("z-index","9999").css("opacity",0).height(t.height()).css("cursor","pointer"),e.input=o,o.bind("change",function(t){var r,i;if(e._trigger("change",t,n(this))===!1)return!1;e._createFileInput(),r=e._createFileRow(n(this)),e._setAddBtnState(),e.options.autoSubmit&&(i=n(p,r),i&&i.click()),o.unbind("change")}),e.uploadAll=!1},t.prototype._createUploadedFiles=function(e){},t.prototype._setAddBtnState=function(){var e=this,t=e.options.maximumFiles||e.maxDisplay,r=e.addBtn,i;if(!t)return;if(!r)return;e.maskDiv||(e.maskDiv=n("<div></div>").css("position","absolute").css("z-index","9999").width(r.outerWidth()).height(r.outerHeight()).appendTo(e.upload).offset(r.offset())),i=n("li",e.filesList),i.length>=t?(r.button({disabled:!0}),e.maskDiv.show(),e.input&&e.input.css("left","-1000px")):(r.button({disabled:!1}),e.maskDiv.hide())},t.prototype._createFileRow=function(e){var t=this,r=t.options,i=n("<li>"),u="",a,f,l,p=n("<span>").addClass(c),v=n("<a>").attr("href","#").text("upload").addClass(h).button({text:!1,icons:{primary:r.wijCSS.iconCircleArrowN},label:t._getLocalization("upload","upload")}).button("widget").addClass(r.wijCSS.stateDefault),y=n("<a>").attr("href","#").text("cancel").addClass(d).button({text:!1,icons:{primary:r.wijCSS.iconCancel},label:t._getLocalization("cancel","cancel")}).button("widget").addClass(r.wijCSS.stateDefault);return i.addClass(s).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerAll),r.enableSWFUploadOnIE&&n.browser.msie||r.enableSWFUpload?(u=e.name,i.attr("id",e.id).data("file",e)):(i.append(e),e.hide(),u=S(e[0])),a=n("<span>"+u+"</span>").addClass(m).addClass(r.wijCSS.stateHighlight).addClass(r.wijCSS.cornerAll),i.append(a),i.append(p),f=n("<span />").addClass(g),p.append(f),p.append(v).append(y),i.appendTo(t.filesList),l=n(o,t.upload),l.length&&(t.commandRow.show(),(!r.enableSWFUploadOnIE||!n.browser.msie)&&!r.enableSWFUpload&&t._createUploader(i),t._resetProgressAll()),i},t.prototype._createUploader=function(e){var t=this,r=n("input",e),i=t.options.action,s=t.options.handleRequest,o;t.useXhr?(o=b(t.id,e,i),o.handleRequest=function(e,r){n.isFunction(s)&&s.call(t,e,r)}):o=w(t.id,e,i),o.onCancel=function(){var e=this;t._trigger("cancel",null,e.inputFile),t.totalUploadFiles===0&&t.uploadAll&&t._trigger("totalComplete")},t._wijUpload()&&(o.onProgress=function(e){var r=n("."+g,this.fileRow),i={sender:e.fileName,loaded:e.loaded,total:e.total,fileNameList:undefined},s=this.inputFile.attr("id");e.supportProgress?(r.html(Math.round(1e3*e.loaded/e.total)/10+"%"),e.fileNameList&&(i.fileNameList=e.fileNameList),t._trigger("progress",null,i),t._progressTotal(s,e.loaded)):r.addClass(y)},o.onComplete=function(e){var r=this,i=r.inputFile.attr("id"),s=t.uploaders[i],o=x(r.inputFile[0]),u=n("."+g,r.fileRow);t._trigger("complete",e.e,n.extend(!0,r.inputFile,e)),u.removeClass(y),u.html("100%"),t._removeFileRow(r.fileRow,s,!0),t._progressTotal(i,o),t.totalUploadFiles--,t.totalUploadFiles===0&&(t.uploadAll||t.options.autoSubmit)&&t._trigger("totalComplete",e.e,e)}),typeof t.uploaders=="undefined"&&(t.uploaders={}),t.uploaders[r.attr("id")]=o},t.prototype._progressTotal=function(e,t){var n=this,r=n.progressAll,i,s;if(!n.uploadAll)return;r&&r.loadedSize&&(r.loadedSize[e]=t,i=n._getLoadedSize(r.loadedSize),s=r.totalSize),n._trigger("totalProgress",null,{loaded:i,total:s})},t.prototype._getLoadedSize=function(e){var t=0;return n.each(e,function(e,n){t+=n}),t},t.prototype._getTotalSize=function(){var e=this,t=0;return e.uploaders&&n.each(e.uploaders,function(e,n){t+=x(n.inputFile[0])}),t},t.prototype._resetProgressAll=function(){this.progressAll={totalSize:0,loadedSize:{}}},t.prototype._wijUpload=function(){return!0},t.prototype._wijcancel=function(e){},t.prototype._upload=function(e,t){},t.prototype._swfUploadFile=function(e){this.swfupload.startUpload(e)},t.prototype._bindEvents=function(){var e=this,t=e.options,r=e.progressAll;e.upload.delegate(v,"click."+e.widgetName,function(i){var s=n(this),u=s.parents(o),a,f;i.preventDefault();if(t.enableSWFUploadOnIE&&n.browser.msie||t.enableSWFUpload){var l=u.data("file");e.swfupload.cancelUpload(l.id),u.fadeOut(1500,function(){u.remove(),e.swfupload.queueData.queueLength==0&&e.commandRow.hide()})}else a=n("input",u[0]),f=e.uploaders[a.attr("id")],e._wijcancel(a),e._wijUpload()&&f&&f.cancel(),r&&(r.totalSize-=x(a[0]),r.loadedSize[a.val()]&&delete r.loadedSize[a.val()]),e._removeFileRow(u,f,!1)}),e.upload.delegate(p,"click."+e.widgetName,function(r){var i=n(this),s=i.parents(o),u,a;r.preventDefault();if(t.enableSWFUploadOnIE&&n.browser.msie||t.enableSWFUpload){var f=s.data("file");e.uploadAll=!1,e._wijUpload()?e._swfUploadFile(f.id):e._upload(f.id,!0)}else{u=n("input",s[0]),a=e.uploaders[u.attr("id")];if(e._trigger("upload",r,u)===!1)return!1;if(e.options.autoSubmit){a.autoSubmit=!0;if(e._trigger("totalUpload",r,null)===!1)return!1}e.totalUploadFiles++,e._upload(s),a&&e._wijUpload()&&a.upload()}}),e.upload.delegate("."+f,"click."+e.widgetName,function(r){r.preventDefault();if(t.enableSWFUploadOnIE&&n.browser.msie||t.enableSWFUpload)e.uploadAll=!0,e._wijUpload()?e._swfUploadFile():e._upload(!0,!0);else{e.uploadAll=!0,e.progressAll||e._resetProgressAll();if(e._trigger("totalUpload",r,null)===!1)return!1;e.progressAll.totalSize=e._getTotalSize(),e._wijuploadAll(n(p,e.filesList[0])),e._wijUpload()&&n(p,e.filesList[0]).each(function(e,t){return n(t).click(),e})}}),e.upload.delegate("."+l,"click."+e.widgetName,function(r){r.preventDefault(),t.enableSWFUploadOnIE&&n.browser.msie||t.enableSWFUpload?(n.each(e.swfupload.queueData.files,function(t,n){e.swfupload.cancelUpload(t)}),n(o,e.element).fadeOut(1500,function(){n(this).remove(),e.commandRow.hide()})):(e._resetProgressAll(),n(v,e.filesList[0]).each(function(e,t){n(t).click()}))})},t.prototype._wijuploadAll=function(e){},t.prototype._wijFileRowRemoved=function(e,t,n){this._setAddBtnState()},t.prototype._removeFileRow=function(e,t,r){var i=this,s,u;t&&(s=t.inputFile.attr("id")),e.fadeOut(1500,function(){e.remove(),i._wijFileRowRemoved(e,t.inputFile,r),i.uploaders[s]&&delete i.uploaders[s],u=n(o,i.upload),u.length?(i.commandRow.show(),t&&t.destroy&&t.destroy()):(i.commandRow.hide(),i.totalUploadFiles=0,i._resetProgressAll(),t&&t.destroy&&t.destroy(!0))})},t.prototype._getFileName=function(e){return E(e)},t.prototype._getFileNameByInput=function(e){return S(e)},t.prototype._getFileSize=function(e){return x(e)},t}(e.wijmoWidget);t.wijupload=T;var N=function(){function e(){this.wijCSS={iconCircleArrowN:"ui-icon-circle-arrow-n",iconCancel:"ui-icon-cancel"},this.action="",this.autoSubmit=!1,this.change=null,this.upload=null,this.totalUpload=null,this.progress=null,this.totalProgress=null,this.complete=null,this.totalComplete=null,this.maximumFiles=0,this.multiple=!0,this.accept="",this.enableSWFUploadOnIE=!1,this.enableSWFUpload=!1,this.swfUploadOptions={},this.localization={},this.handleRequest=null}return e}(),C="wijmo-wijupload",k=C+"-";T.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new N),n.wijmo.registerWidget("wijupload",T.prototype)})(e.upload||(e.upload={}));var t=e.upload})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var e=this;this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver(),e._pageLize(!1)},"wijwizard"),this._pageLize(!0)},t.prototype._init=function(){var e=this.options,t=e.disabled;e.disabledState?(this.disable(),e.disabled=t):e.autoPlay&&this.play()},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"activeIndex":this.show(n);break;case"navButtons":case"backBtnText":case"nextBtnText":this._createButtons();break;case"autoPlay":n===!0?this.play():this.stop();default:this._pageLize(!1)}},t.prototype.destroy=function(){var e=this.options;return this.abort(),this.stop(),this._removeScroller(),this._removeButtons(),this.element.unbind(".wijwizard").removeClass(e.wijCSS.wijwizard).removeClass(e.wijCSS.widget).removeClass(e.wijCSS.helperClearFix).removeData("wijwizard"),this.list&&this.list.removeClass(e.wijCSS.widget).removeClass(e.wijCSS.helperReset).removeClass(e.wijCSS.wijwizardSteps).removeClass(e.wijCSS.helperClearFix).removeAttr("role"),this.lis&&(this.lis.removeClass(e.wijCSS.header).removeClass(e.wijCSS.cornerAll).removeClass(e.wijCSS.priorityPrimary).removeClass(e.wijCSS.prioritySecondary).removeAttr("role"),n.each(this.lis,function(){n.data(this,"destroy.wijwizard")?n(this).remove():n(this).removeAttr("aria-selected")})),n.each(this.panels,function(){var t=n(this).unbind(".wijwizard");n.each(["load","cache"],function(e,n){t.removeData(n+".wijwizard")}),n.data(this,"destroy.wijwizard")?t.remove():t.removeClass(e.wijCSS.stateDefault).removeClass(e.wijCSS.wijwizardActived).removeClass(e.wijCSS.stateActive).removeClass(e.wijCSS.stateHover).removeClass(e.wijCSS.stateFocus).removeClass(e.wijCSS.stateDisabled).removeClass(e.wijCSS.wijwizardPanel).removeClass(e.wijCSS.content).removeClass(e.wijCSS.wijwizardHide).css({position:"",left:"",top:""}).removeAttr("aria-hidden")}),this.container.replaceWith(this.container.contents()),e.cookie&&this._cookie(null,e.cookie),this},t.prototype._pageLize=function(e){var t=this.options,r=/^#.+/;this.list=this.element.children("ol,ul").eq(0),this.list&&this.list.length===0&&(this.list=this.element.find("."+t.wijCSS.wijwizardSteps).eq(0),this.list&&this.list.length===0&&(this.list=null)),this.list&&(this.lis=n("li",this.list)),e?(this.panels=n("> div",this.element),n.each(this.panels,function(e,t){var i=n(t).attr("src");i&&!r.test(i)&&n.data(t,"load.wijwizard",i.replace(/#.*$/,""))}),this.element.addClass(t.wijCSS.wijwizard).addClass(t.wijCSS.widget).addClass(t.wijCSS.helperClearFix),this.list&&(this.list.addClass(t.wijCSS.widget).addClass(t.wijCSS.helperReset).addClass(t.wijCSS.wijwizardSteps).addClass(t.wijCSS.helperClearFix).attr("role","tablist"),this.lis.addClass(t.wijCSS.header).addClass(t.wijCSS.cornerAll).attr("role","tab")),this.container=n("<div/>"),this.container.addClass(t.wijCSS.wijwizardContent).addClass(t.wijCSS.widget).addClass(t.wijCSS.content).addClass(t.wijCSS.cornerAll),this.container.append(this.panels),this.container.appendTo(this.element),this.panels.addClass(t.wijCSS.wijwizardPanel).addClass(t.wijCSS.content).attr("role","tabpanel"),t.activeIndex===undefined?(typeof t.activeIndex!="number"&&t.cookie&&(t.activeIndex=parseInt(this._cookie(undefined,undefined),10)),typeof t.activeIndex!="number"&&this.panels.filter("."+t.wijCSS.wijwizardActived).length&&(t.activeIndex=this.panels.index(this.panels.filter("."+t.wijCSS.wijwizardActived))),t.activeIndex=t.activeIndex||(this.panels.length?0:-1)):t.activeIndex===null&&(t.activeIndex=-1),t.activeIndex=t.activeIndex>=0&&this.panels[t.activeIndex]||t.activeIndex<0?t.activeIndex:0,this.panels.addClass(t.wijCSS.wijwizardHide).attr("aria-hidden",!0),t.activeIndex>=0&&this.panels.length&&(this.panels.eq(t.activeIndex).removeClass(t.wijCSS.wijwizardHide).addClass(t.wijCSS.wijwizardActived).attr("aria-hidden",!1),this.load(t.activeIndex)),this._createButtons()):(this.panels=n("> div",this.container),t.activeIndex=this.panels.index(this.panels.filter("."+t.wijCSS.wijwizardActived))),this._addScrollForContent(),this._refreshStep(),this._initScroller(),t.cookie&&this._cookie(t.activeIndex,t.cookie),t.cache===!1&&this.panels.removeData("cache.wijwizard");if(t.showOption===undefined||t.showOption===null)t.showOption={};this._normalizeBlindOption(t.showOption);if(t.hideOption===undefined||t.hideOption===null)t.hideOption={};this._normalizeBlindOption(t.hideOption),this.panels.unbind(".wijwizard")},t.prototype._removeButtons=function(){this.buttons&&(this.buttons.remove(),this.buttons=undefined)},t.prototype._createButtons=function(){var e=this,t=this,r=this.options,i,s,o,u=r.backBtnText,a=r.nextBtnText;this._removeButtons();if(r.navButtons==="none")return;this.buttons||(i=r.navButtons,i==="auto"&&(i=this.list?"common":"edge"),this.buttons=n("<div/>"),this.buttons.addClass(r.wijCSS.wijwizardButtons),s=function(e,t){if(r.disabled)return;t.is(":not(."+r.wijCSS.stateDisabled+")")&&t.addClass(e)},o=function(e,t){if(r.disabled)return;t.removeClass(e)},i==="common"?(this.backBtn=n("<a href='#'><span class='"+r.wijCSS.buttonText+"'>"+u+"</span></a>").addClass(r.wijCSS.widget).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.button).addClass(r.wijCSS.buttonTextOnly).appendTo(this.buttons).bind({click:function(){return e.back(),!1},mouseover:function(){s(r.wijCSS.stateHover,n(this))},mouseout:function(){o(r.wijCSS.stateHover,n(this))},mousedown:function(){s(r.wijCSS.stateActive,n(this))},mouseup:function(){o(r.wijCSS.stateActive,n(this))}}).attr("role","button"),this.nextBtn=n("<a href='#'><span class='"+r.wijCSS.buttonText+"'>"+a+"</span></a>").addClass(r.wijCSS.widget).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.button).addClass(r.wijCSS.buttonTextOnly).appendTo(this.buttons).bind({click:function(){return t.next(),!1},mouseover:function(){s(r.wijCSS.stateHover,n(this))},mouseout:function(){o(r.wijCSS.stateHover,n(this))},mousedown:function(){s(r.wijCSS.stateActive,n(this))},mouseup:function(){o(r.wijCSS.stateActive,n(this))}}).attr("role","button")):(this.backBtn=n("<a href='#'/>").addClass(r.wijCSS.wijwizardPrev).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerRight).append("<span class='"+r.wijCSS.icon+" "+r.wijCSS.iconArrowLeft+"'></span>").appendTo(this.buttons).bind({click:function(){return t.back(),!1},mouseover:function(){s(r.wijCSS.stateHover,n(this))},mouseout:function(){o(r.wijCSS.stateHover,n(this))},mousedown:function(){s(r.wijCSS.stateActive,n(this))},mouseup:function(){o(r.wijCSS.stateActive,n(this))}}).attr("role","button"),this.nextBtn=n("<a href='#'/>").addClass(r.wijCSS.wijwizardNext).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerLeft).append("<span class='"+r.wijCSS.icon+" "+r.wijCSS.iconArrowRight+"'></span>").appendTo(this.buttons).bind({click:function(){return t.next(),!1},mouseover:function(){s(r.wijCSS.stateHover,n(this))},mouseout:function(){o(r.wijCSS.stateHover,n(this))},mousedown:function(){s(r.wijCSS.stateActive,n(this))},mouseup:function(){o(r.wijCSS.stateActive,n(this))}}).attr("role","button")),this.buttons.appendTo(this.element))},t.prototype._refreshStep=function(){var e=this.options;this.lis&&(this.lis.removeClass(e.wijCSS.priorityPrimary).addClass(e.wijCSS.prioritySecondary).attr("aria-selected",!1),e.activeIndex>=0&&e.activeIndex<=this.lis.length-1&&(this.lis&&this.lis.eq(e.activeIndex).removeClass(e.wijCSS.prioritySecondary).addClass(e.wijCSS.priorityPrimary).attr("aria-selected",!0),this.scrollWrap&&this.scrollWrap.wijsuperpanel("scrollChildIntoView",this.lis.eq(e.activeIndex)))),this.buttons&&!e.loop&&(this.backBtn[e.activeIndex<=0?"addClass":"removeClass"](e.wijCSS.stateDisabled).attr("aria-disabled",e.activeIndex===0),this.nextBtn[e.activeIndex>=this.panels.length-1?"addClass":"removeClass"](e.wijCSS.stateDisabled).attr("aria-disabled",e.activeIndex>=this.panels.length-1))},t.prototype._initScroller=function(){if(!this.lis||!this.element.is(":visible"))return;var e=0;n.each(this.lis,function(){e+=n(this).outerWidth(!0)}),this.element.innerWidth()<e?(this.scrollWrap===undefined&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),n.effects&&n.effects.save?n.effects.save(this.list,["width","height","overflow"]):n.save&&n.save(this.list,["width","height","overflow"])),this.list.width(e+8),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.wijsuperpanel({allowResize:!1,hScroller:{scrollBarVisibility:"hidden"},vScroller:{scrollBarVisibility:"hidden"}})):this._removeScroller()},t.prototype._removeScroller=function(){this.scrollWrap&&(this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=undefined,n.effects&&n.effects.restore?n.effects.restore(this.list,["width","height","overflow"]):n.restore&&n.restore(this.list,["width","height","overflow"]))},t.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name);return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},t.prototype._normalizeBlindOption=function(e){e.blind===undefined&&(e.blind=!1),e.fade===undefined&&(e.fade=!1),e.duration===undefined&&(e.duration=200);if(typeof e.duration=="string")try{e.duration=parseInt(e.duration,10)}catch(t){e.duration=200}},t.prototype._ui=function(e){return{panel:e,index:this.panels.index(e)}},t.prototype._removeSpinner=function(){this.element.removeClass(this.options.wijCSS.tabsLoading);var e=this.element.data("spinner.wijwizard");e&&(this.element.removeData("spinner.wijwizard"),e.remove())},t.prototype._showPanel=function(e){var t=this,r=this.options,i=n(e),s;i.addClass(r.wijCSS.wijwizardActived),(r.showOption.blind||r.showOption.fade)&&r.showOption.duration>0?(s={duration:r.showOption.duration},r.showOption.blind&&(s.height="toggle"),r.showOption.fade&&(s.opacity="toggle"),i.hide().removeClass(r.wijCSS.wijwizardHide).animate(s,r.showOption.duration||"normal","linear",function(){t._resetStyle(i),i.wijTriggerVisibility&&i.wijTriggerVisibility(),t._trigger("show",null,t._ui(i[0])),t._removeSpinner(),i.attr("aria-hidden",!1),t._trigger("activeIndexChanged",null,t._ui(i[0]))})):(i.removeClass(r.wijCSS.wijwizardHide).attr("aria-hidden",!1),i.wijTriggerVisibility&&i.wijTriggerVisibility(),this._trigger("show",null,this._ui(i[0])),this._removeSpinner(),this._trigger("activeIndexChanged",null,this._ui(i[0])))},t.prototype._hidePanel=function(e){var t=this,r=this,i=this.options,s=n(e),o;s.removeClass(i.wijCSS.wijwizardActived),(i.hideOption.blind||i.hideOption.fade)&&i.hideOption.duration>0?(o={duration:i.hideOption.duration},i.hideOption.blind&&(o.height="toggle"),i.hideOption.fade&&(o.opacity="toggle"),s.animate(o,i.hideOption.duration||"normal","linear",function(){s.addClass(i.wijCSS.wijwizardHide).attr("aria-hidden",!0),t._resetStyle(s),t.element.dequeue("wijwizard")})):(s.addClass(i.wijCSS.wijwizardHide).attr("aria-hidden",!0),this.element.dequeue("wijwizard"))},t.prototype._resetStyle=function(e){e.css({display:""}),n.support.opacity||e[0].style.removeAttribute("filter")},t.prototype._addScrollForContent=function(){var e=this,t=e.element.height();if(!this.element.is(":visible"))return;e.buttons&&(t-=e.buttons.outerHeight(!0)),e.list&&(t-=e.list.outerHeight(!0)),t-=e.container.outerHeight(!0)-e.container.innerHeight()-(e.container.innerHeight()-e.container.height()),t<e.container.height()&&e.container.height(t),e.container.css("overflow","auto")},t.prototype.add=function(e,t,r){e===undefined&&(e=this.panels.length),t===undefined&&(t="Step "+e);var i=this,s=this.options,o=n(s.panelTemplate||i._defaults.panelTemplate).data("destroy.wijwizard",!0),u;return o.addClass(s.wijCSS.wijwizardPanel).addClass(s.wijCSS.content).addClass(s.wijCSS.cornerAll).addClass(s.wijCSS.wijwizardHide).attr("aria-hidden",!0),e>=this.panels.length?this.panels.length>0?o.insertAfter(this.panels[this.panels.length-1]):o.appendTo(this.container):o.insertBefore(this.panels[e]),this.list&&this.lis&&(u=n((s.stepHeaderTemplate||i._defaults.stepHeaderTemplate).replace(/#\{title\}/g,t).replace(/#\{desc\}/g,r)),u.addClass(s.wijCSS.header).addClass(s.wijCSS.cornerAll).addClass(s.wijCSS.prioritySecondary).data("destroy.wijwizard",!0),e>=this.lis.length?u.appendTo(this.list):u.insertBefore(this.lis[e])),this._pageLize(!1),this.panels.length===1&&(s.activeIndex=0,u.addClass(s.wijCSS.priorityPrimary),o.removeClass(s.wijCSS.wijwizardHide).addClass(s.wijCSS.wijwizardActived).attr("aria-hidden",!1),this.element.queue("wijwizard",function(){i._trigger("show",null,i._ui(i.panels[0]))}),this._refreshStep(),this.load(0)),this._trigger("add",null,this._ui(this.panels[e])),this},t.prototype.remove=function(e){var t=this.options,n=this.panels.eq(e).remove();return this.lis.eq(e).remove(),e<t.activeIndex&&t.activeIndex--,this._pageLize(!1),n.hasClass(t.wijCSS.wijwizardActived)&&this.panels.length>=1&&this.show(e+(e<this.panels.length?0:-1)),this._trigger("remove",null,this._ui(n[0])),this},t.prototype.show=function(e){var t=this;if(e<0||e>=this.panels.length)return this;if(this.element.queue("wijwizard").length>0)return this;var r=this.options,i={nextIndex:0,nextPanel:null},s,o;n.extend(i,this._ui(this.panels[r.activeIndex])),i.nextIndex=e,i.nextPanel=this.panels[e];if(this._trigger("validating",null,i)===!1)return this;s=this.panels.filter(":not(."+r.wijCSS.wijwizardHide+")"),o=this.panels.eq(e),r.activeIndex=e,this.abort(),r.cookie&&this._cookie(r.activeIndex,r.cookie),this._refreshStep();if(!o.length)throw"jQuery UI wijwizard: Mismatching fragment identifier.";return s.length&&this.element.queue("wijwizard",function(){t._hidePanel(s)}),this.element.queue("wijwizard",function(){t._showPanel(o)}),this.load(e),this},t.prototype.next=function(){var e=this.options,t=e.activeIndex+1;return e.disabled?!1:(e.loop&&(t%=this.panels.length),t<this.panels.length?(this.show(t),!0):!1)},t.prototype.back=function(){var e=this.options,t=e.activeIndex-1;return e.disabled?!1:(e.loop&&(t=t<0?this.panels.length-1:t),t>=0?(this.show(t),!0):!1)},t.prototype.load=function(e){var t=this,r=t.options,i=t.panels.eq(e)[0],s=n.data(i,"load.wijwizard"),o;t.abort();if(!s||t.element.queue("wijwizard").length!==0&&n.data(i,"cache.wijwizard")){t.element.dequeue("wijwizard");return}return this.element.addClass(r.wijCSS.tabsLoading),r.spinner&&(o=this.element.data("spinner.wijwizard"),o||(o=n("<div/>"),o.addClass(r.wijCSS.wijwizardSpinner),o.html(r.spinner||t._defaults.spinner),o.appendTo(document.body),this.element.data("spinner.wijwizard",o),o.wijpopup({showEffect:"blind",hideEffect:"blind"})),o.wijpopup("show",{of:this.element,my:"center center",at:"center center"})),this.xhr=n.ajax(n.extend({},r.ajaxOptions,{url:s,dataType:"html",success:function(s,o){n(i).html(s),r.cache&&n.data(i,"cache.wijwizard",!0),t._trigger("load",null,t._ui(t.panels[e]));try{r.ajaxOptions&&r.ajaxOptions.success&&r.ajaxOptions.success(s,o)}catch(u){}},error:function(n,s,o){t._trigger("load",null,t._ui(t.panels[e]));try{r.ajaxOptions&&r.ajaxOptions.error&&r.ajaxOptions.error(n,s,e,i)}catch(u){}}})),t.element.dequeue("wijwizard"),t},t.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("wijwizard",this.element.queue("wijwizard").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._removeSpinner(),this},t.prototype.url=function(e,t){return this.panels.eq(e).removeData("cache.wijwizard").data("load.wijwizard",t),this},t.prototype.count=function(){return this.panels.length},t.prototype.stop=function(){var e=this.element.data("intId.wijwizard");e&&(window.clearInterval(e),this.element.removeData("intId.wijwizard"))},t.prototype.play=function(){var e=this,t=this.options,n,r=this.panels.length;this.element.data("intId.wijwizard")||(n=window.setInterval(function(){var n=t.activeIndex+1;if(n>=r){if(!t.loop){e.stop();return}n=0}e.show(n)},t.delay),this.element.data("intId.wijwizard",n))},t}(e.wijmoWidget);t.wijwizard=r,r.prototype._defaults={stepHeaderTemplate:"<li><h1>#{title}</h1>#{desc}</li>",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>"};var i=function(){function e(){this.wijCSS={wijwizard:"wijmo-wijwizard",wijwizardButtons:"wijmo-wijwizard-buttons",wijwizardPrev:"wijmo-wijwizard-prev",wijwizardNext:"wijmo-wijwizard-next",wijwizardSteps:"wijmo-wijwizard-steps",wijwizardContent:"wijmo-wijwizard-content",wijwizardPanel:"wijmo-wijwizard-panel",wijwizardActived:"wijmo-wijwizard-actived",wijwizardHide:"wijmo-wijwizard-hide",wijwizardSpinner:"wijmo-wijwizard-spinner"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a"},this.navButtons="auto",this.autoPlay=!1,this.delay=3e3,this.loop=!1,this.hideOption={fade:!0},this.showOption={fade:!0,duration:400},this.ajaxOptions=null,this.cache=!1,this.cookie=null,this.stepHeaderTemplate="",this.panelTemplate="",this.spinner="",this.backBtnText="back",this.nextBtnText="next",this.add=null,this.remove=null,this.activeIndexChanged=null,this.show=null,this.load=null,this.validating=null}return e}();r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijwizard",r.prototype)})(e.wizard||(e.wizard={}));var t=e.wizard})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijribbon",i="wijmo-wijribbon",s=i+"-disabled",o=i+"-bigbutton",u=i+"-panel",a=i+"-groups",f=i+"-group",l=f+"-content",c=f+"-label",h=i+"-dropdown",p=i+"-dropdowngroup",d=i+"-abbrev",v=d+"group",m=i+"-text",g=i+"-icon",y=i+"-abbrevicon",b="ui-button",w="ui-state-active",E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var e=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._ribbonify(),n(window).bind("resize.wijribbon",function(){e.element.is(":visible")&&e.updateRibbonSize()}),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.updateRibbonSize(),e.options.disabled&&e._setDisabled(!0),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijribbon"),e.options.disabled&&e._setDisabled(!0)},t.prototype._setOption=function(e,t){n.wijmo.widget.prototype._setOption.apply(this,arguments),e==="disabled"&&this._setDisabled(t),n(".wijmo-wijribbon-startmenulink",this.element).unbind("click.tabs")},t.prototype._setDisabled=function(e){var t=this,r=t.element,i=r.offset(),o=i.top,u=i.left,a=n("body"),f=this.options.wijCSS,l=t.disabledModal;r.data("wijmo-wijtabs")&&r.wijtabs("option","disabled",e),r.closest(".wijmo-wijeditor").length!==0&&(o=0,u=0,a=r.parent()),e?(l||(l=n("<div></div>").addClass(f.stateDisabled+" "+s).css({top:o,left:u,"background-color":"lightgray",position:"absolute"}).appendTo(a).bind("click mousedown mouseup mouseover mouseout focus keydown keypress",function(e){return e.stopPropagation(),e.preventDefault(),!1}),t.disabledModal=l),t.disabledModal.width(r.width()).height(r.outerHeight()).show()):t.disabledModal&&t.disabledModal.hide()},t.prototype._initCustomButtons=function(){var e=this,t;n.each(n("[customtype]",e.element),function(r,i){t=n(i).attr("customtype"),t&&e.options.custombuttons[t]&&e.options.custombuttons[t].create(n(i))})},t.prototype._ribbonify=function(){var e=this,t=this.options.wijCSS;e.buttons={},e.listUis={},e.accessbarBtns={},e._initCustomButtons(),e._createAccessToolBar(),e._getButtonSets(),e._createButtons(),e._createGroup(),e._createSplit(),e._createDropdwon(),e._createInputDropdown(),e._createGallery(),e._hideShowedList(),e._createTab(),n("."+t.helperReset+":not(."+a+", ."+t.tabsNav+", .wijmo-wijmenu-list)",e.element).hover(function(){n(this).addClass(t.stateHover)},function(){n(this).removeClass(t.stateHover)}),n("."+b,e.element).bind("mouseenter",function(){n("."+t.buttonText,this).addClass(t.stateHover)}).bind("mouseleave",function(){n("."+t.buttonText,this).removeClass(t.stateHover)}),n("button."+b,e.element).bind("mousedown",function(){e._addActiveClassToButtonText(this)}).bind("mouseup",function(){e._addActiveClassToButtonText(this)}),n("label."+b,e.element).bind("click",function(){n("span",this)&&n("span",this).length===1&&e._addActiveClassToLabelButtonText(this)})},t.prototype._addActiveClassToButtonText=function(e){var t=this.options.wijCSS;e&&(n(e).hasAllClasses(w)?n("."+t.buttonText,e).addClass(t.stateActive).addClass(t.stateDefault):n("."+t.buttonText,e).removeClass(t.stateActive).removeClass(t.stateDefault))},t.prototype._addActiveClassToLabelButtonText=function(e){var t=this,r,i,s;e&&(i=n(e).attr("for"),r=n("#"+i,t.element),r.is(":checkbox")?t._addActiveClassToButtonText(e):r.is(":radio")&&(s=t.element.find("[name='"+r.attr("name")+"']"),n.each(s,function(){t._updateGroupElementTextState(this)})))},t.prototype._updateGroupElementTextState=function(e){var t,r=this.options.wijCSS;if(!e)return;t=n("[for='"+n(e).attr("id")+"']",n(e).parent()),t&&(t.hasAllClasses(w)?t.children("."+r.buttonText).addClass(r.stateActive).addClass(r.stateDefault):t.children("."+r.buttonText).removeClass(r.stateActive).removeClass(r.stateDefault))},t.prototype._getButtonSets=function(){var e=this,t;e.groups=[],e.splits=[],e.dropdowns=[],e.inputDropdowns=[],n("span>button, span>:checkbox, span>:radio, div>button, div>:checkbox, div>:radio, div>:text",e.element).each(function(r,i){if(n(i).parents("[customtype]")&&n(i).parents("[customtype]").length!==0)return;return t=n(i).parent(),n(">ul",t).length===0&&!t.hasClass("wijmo-wijribbon-accesstoolbar")?e.groups.push(t):n(">button",t).length===2?e.splits.push(t):n(">button",t).length===1?e.dropdowns.push(t):n(">input[type='text']",t).length===1&&e.inputDropdowns.push(t),this}),e.groups=e._unique(e.groups),e.splits=e._unique(e.splits)},t.prototype._unique=function(e){var t=n.makeArray(n.map(e,function(e){return e.get(0)}));return n.map(n.unique(t),function(e){return n(e)})},t.prototype._createButtons=function(){var e=this,t=e.element;n(":checkbox",t).each(function(){if(n(this).parents("[customtype]")&&n(this).parents("[customtype]").length!==0)return;return e._createButton(n(this),"checkbox"),n(this).bind("change",function(){e._addActiveClassToLabelButtonText(n(this).button("widget")[0])}),this}),n(":radio",t).each(function(){if(n(this).parents("[customtype]")&&n(this).parents("[customtype]").length!==0)return;return e._createButton(n(this),"radio"),n(this).bind("change",function(){e._addActiveClassToLabelButtonText(n(this).button("widget")[0])}),this}),n("button",t).each(function(){if(n(this).parents("[customtype]")&&n(this).parents("[customtype]").length!==0)return;return e._createButton(n(this),"button"),this})},t.prototype._createButton=function(e,t){var r=this,i=this.options.wijCSS,s=r._buildButtonOption(e,t),o=e.data("commandName"),u;e.button(s),s.text||(t==="button"?e.children("."+i.buttonText).text(o):(u=n("[for='"+e.attr("id")+"']",e.parent()),u&&u.children("."+i.buttonText).text(o))),e.parent().is(".wijmo-wijribbon-accesstoolbar")&&e.attr("canlocateonaccesstoolbar")==="true"&&e.button("widget").hide(),r._triggerEvent(e)},t.prototype._createGroup=function(){n.each(this.groups,function(e,t){t.buttonset()})},t.prototype._createSplit=function(){var e=this,t=this.options.wijCSS;n.each(e.splits,function(r,s){var o=s.children("ul"),u=s.children("button:eq(0)"),a=u.data("commandName"),f=s.children("button:eq(1)"),l;o.children("li").addClass(t.cornerAll),s.addClass(i+"-"+a),f.button({icons:{primary:t.iconArrowDown},text:!1}).data("list",o).unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault()}).bind("mouseup",function(t){o=n(this).data("list"),o.is(":visible")?(e.showList.hide().css("z-index",""),e.showList=null):(o.show().position({my:"left top",at:"left bottom",of:s}).css("z-index",9999),e.showList=o),t.stopPropagation(),t.preventDefault()}),f.children("."+t.buttonText).text("foo"),s.after(o),o.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+h).hide(),s.buttonset(),l={ui:u,defaultValue:u.button("option","label"),buttons:[],type:"split",trigger:f,list:o},n("button, :checkbox, :radio",o).bind("click",function(t){o.hide().css("z-index",""),e.showList=null,t.preventDefault()}),o.find(">li>button,>li>:radio,>li>:checkbox").each(function(t,r){var i=n(r).data("commandName");i!==""&&e.buttons[i]&&(e.buttons[i].parent=u,e.buttons[i].type="split"),l.buttons.push(n(r))}),a!==""&&(e.listUis[a]=l)})},t.prototype._createDropdwon=function(){var e=this,t=this.options.wijCSS,r,s;e.dropdownLabels={},n.each(e.dropdowns,function(r,s){var o=s.children("ul"),u=s.children("button:eq(0)"),a=u.data("commandName"),f;o.children("li").addClass(t.cornerAll+" "+t.stateDefault),s.addClass(i+"-"+a),u.button({icons:{secondary:t.iconArrowDown}}).unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault()}).bind("mouseup",function(t){e._showDropDownList(o,u),t.stopPropagation(),t.preventDefault()}).bind("keydown",function(t){if(!o.is(":visible"))return;e._dropdownListKeyHandler(t,o,u)}),f={ui:u,defaultValue:u.button("option","label"),buttons:[],type:"dropdown",list:o},n("button, :checkbox, :radio",o).bind("click",function(r){var i=n(this).data("commandName"),s,a=u.children("."+t.buttonText).width();e.dropdownLabels[i]||(e.dropdownLabels[i]=e._getDropdownLabelSubstr(n(this).button("option","label"),u.children("."+t.buttonText),a)),s=e.dropdownLabels[i],u.button("option","label",s),u.attr("title",n(this).button("option","label")),o.hide().css("z-index",""),e.showList=null,r.preventDefault()}),o.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+h).hide(),s.buttonset(),e._collectDropDownButtons(o,u,f,a)})},t.prototype._createInputDropdown=function(){var e=this,t=this.options.wijCSS;e.dropdownLabels={},n.each(e.inputDropdowns,function(r,s){var o=s.children("ul"),u=s.children("input[type='text']:eq(0)"),a=e._createInputDropDownWrapper(u),f=u.prop("name"),l;s.prepend(a),o.children("li").addClass(t.cornerAll+" "+t.stateDefault),s.addClass(i+"-"+f),u.removeProp("name").data("commandName",f).addClass(t.stateDefault+" "+t.content+" "+t.cornerLeft),a.find("a").bind("mouseup",function(t){e._showDropDownList(o,u),u.focus(),t.stopPropagation(),t.preventDefault()}).bind("keydown",function(t){e._dropdownListKeyHandler(t,o,a)}),e._bindInputEvent(u,o),l={ui:u,defaultValue:u.val(),buttons:[],type:"dropdown",list:o},n("button, :checkbox, :radio",o).bind("click",function(t){var r=n(this).data("commandName"),i;e.dropdownLabels[r]||(e.dropdownLabels[r]=n(this).button("option","label")),i=e.dropdownLabels[r],u.val(n(this).button("option","label")).attr("title",n(this).button("option","label")),o.hide().css("z-index",""),e.showList=null,t.preventDefault(),t.stopPropagation()}),o.css("position","absolute").addClass(t.helperReset+" "+t.helperClearFix+" "+t.cornerAll+" "+h).hide(),e._collectDropDownButtons(o,u,l,f)})},t.prototype._collectDropDownButtons=function(e,t,r,i){var s=this;e.find(">li>button,>li>:radio,>li>:checkbox").each(function(e,i){var o=n(i).data("commandName");o!==""&&s.buttons[o]&&(s.buttons[o].parent=t,s.buttons[o].type="dropdown"),r.buttons.push(n(i))}),i!==""&&(s.listUis[i]=r)},t.prototype._showDropDownList=function(e,t){var n=this;e.is(":visible")&&!e.find("li."+n.options.wijCSS.stateActive)?(n.showList.hide().css("z-index",""),n.showList=null):(n.showList&&(n.showList.hide(),n.showList=null),e.show().position({my:"left top",at:"left bottom",of:t}).css("z-index",9999),n.showList=e,n.isShow=!0)},t.prototype._bindInputEvent=function(e,t){var n=this,r,i;e.bind("change",function(t){var r={name:undefined,commandName:undefined};r.name=e.prop("name"),r.commandName=e.val(),n._trigger("click",t,r)}).bind("keydown",function(r){n._dropdownListKeyHandler(r,t,e)})},t.prototype._dropdownListKeyHandler=function(e,t,n){var r=this,i=e.keyCode,s=r._getKeyCodeEnum();switch(i){case s.UP:r._activeDropDownListElement(!1,t,n),e.preventDefault();break;case s.DOWN:r._activeDropDownListElement(!0,t,n),e.preventDefault();break;case s.ENTER:t.find("label."+r.options.wijCSS.stateActive).parent("li").find("input").trigger("click"),e.preventDefault()}},t.prototype._activeDropDownListElement=function(e,t,r){var i=this,s=t.find("li").length,o,u;if(!t.is(":visible")){i._showDropDownList(t,r);return}u=t.find("label."+i.options.wijCSS.stateActive).parent("li"),u&&u.length>0&&(o=t.find("li").index(u)),i._changeListItemActiveState(u,!1),o===undefined?o=0:e?(o++,o==s&&(o=undefined)):(o--,o==-1&&(o=s-1)),i._changeListItemActiveState(n(t.find("li")[o]),!0)},t.prototype._changeListItemActiveState=function(e,t){var r=this.options.wijCSS;if(!e)return;t?(n("label",e).addClass(r.stateActive),n("span",e).addClass(r.stateActive)):(n("label",e).removeClass(r.stateActive),n("span",e).removeClass(r.stateActive))},t.prototype._createGallery=function(){var e=this,t=e.options.wijCSS;n(".wijmo-wijribbon-gallery",e.element).each(function(r,i){n(i).children("div").each(function(r,i){n(i).bind("mouseenter",function(e){if(n(i).hasAllClasses(t.stateDisabled))return;n(i).addClass(t.stateHover)}).bind("mouseleave",function(e){if(n(i).hasAllClasses(t.stateDisabled))return;n(i).removeClass(t.stateHover)}).bind("click",function(r){if(n(i).hasAllClasses(t.stateDisabled))return;n(i).parent("div.wijmo-wijribbon-gallery").children("div").removeClass(t.stateActive),n(i).addClass(t.stateActive);var s={name:undefined,commandName:undefined};s.name=n(i).parent("div.wijmo-wijribbon-gallery").attr("name"),s.commandName=n(i).attr("name"),e._trigger("click",r,s)}),e.buttons[n(i).attr("name")]={button:n(i),type:"galleryBtn"}})})},t.prototype._getKeyCodeEnum=function(){if(n.ui&&n.ui.keyCode)return n.ui.keyCode;if(n.mobile&&n.mobile.keyCode)return n.mobile.keyCode;throw"keyCode object is not found"},t.prototype._createInputDropDownWrapper=function(e){var t=this.options.wijCSS,r=n("<span class='wijmo-wijribbon-inputdropdownwrapper'></span>").append(e);return n("<a></a>").appendTo(r).button({icons:{primary:t.iconArrowDown},text:!1}).removeClass(t.cornerAll).addClass("wijmo-wijribbon-inputdropdownbtn "+t.cornerRight),r},t.prototype._createTab=function(){var e=this,t=this.options.wijCSS,r=e.element;return r.addClass(i),e.tabEle=r,n(">ul",r).length>0?(r.wijtabs({select:function(t,n){e._hideAllMenus()}}),e._createRibbonGroups(),n(".wijmo-wijribbon-startmenu")&&n(".wijmo-wijribbon-startmenu").length>0&&(r.wijtabs("option","selected",1),e._createStartMenu()),!0):(r.addClass(i+"-simple").addClass(t.stateDefault).addClass(t.helperClearFix),!1)},t.prototype._createAccessToolBar=function(){var e=this,t,r=n("<div class='wijmo-wijribbon-accesstoolbar'></div>"),i;if(n("*[canlocateonaccesstoolbar='true']",e.element).length===0&&n("*[locateonaccesstoolbar='true']",e.element).length===0)return;n("input[canlocateonaccesstoolbar='true'],input[locateonaccesstoolbar='true']",e.element).each(function(){t=n(this).attr("id")+"_accessbar";var r=n("label[for="+n(this).attr("id")+"]");e.accessbarBtns[r.attr("title")]={button:n(this).clone().attr("id",t),type:n(this).attr("type"),labelEle:r.clone().attr("for",t),selected:n(this).attr("locateonaccesstoolbar")==="true"?!0:!1}}),n("button[canlocateonaccesstoolbar='true'],button[locateonaccesstoolbar='true']",e.element).each(function(){t=n(this).attr("id")+"_accessbar",e.accessbarBtns[n(this).attr("title")]={button:n(this).clone(),type:"button",selected:n(this).attr("locateonaccesstoolbar")==="true"?!0:!1}}),n.each(e.accessbarBtns,function(e,t){r.append(t.button),t.labelEle&&r.append(t.labelEle)}),i=n('<button title="Customize Access Toolbar" class ="wijmo-wijribbon-accesstoolbarbtn '+e.options.wijCSS.iconArrowDown+'"'+' name="quicktoolbar"></button>'),r.append(i),e.accessbarBtns&&e.element.prepend(r),e._createCustomQuickToolbarMenu(i,r)},t.prototype._createCustomQuickToolbarMenu=function(e,t){var r=this,i,s,o=r.options.wijCSS,u=n('<ul class="wijmo-wijribbon-accesstoolbarmenu"></ul>');n.each(r.accessbarBtns,function(e,t){s=t.selected?" wijmo-wijribbon-accesstoolbarmenuitemchecked":" wijmo-wijribbon-accesstoolbarmenuitemunchecked",i=n('<li><a class="'+o.cornerAll+'" tabindex="-1">'+'<span class="'+o.icon+s+'"></span><span'+' class="wijmo-wijmenu-text">'+e+"</span></a></li>"),i.data("accessbarcommand",e),u.append(i)}),u.prepend("<li class='wijmo-wijribbon-accesstoolbarmenutitleitem'><a>Customize Access Toolbar</a></li>"),t.append(u),u.wijmenu({trigger:e,triggerEvent:"click",orientation:"vertical",select:function(e,t){var i=t.item,s=i.element.data("accessbarcommand"),a=n("span."+o.icon,i.element),f=r.accessbarBtns[s].button,l=f.button("widget");a.hasClass("wijmo-wijribbon-accesstoolbarmenuitemchecked")?(a.removeClass("wijmo-wijribbon-accesstoolbarmenuitemchecked").addClass("wijmo-wijribbon-accesstoolbarmenuitemunchecked"),l.hide().removeAttr("canlocateonaccesstoolbar").attr("locateonaccesstoolbar","true")):(a.addClass("wijmo-wijribbon-accesstoolbarmenuitemchecked").removeClass("wijmo-wijribbon-accesstoolbarmenuitemunchecked"),l.show().removeAttr("locateonaccesstoolbar").attr("canlocateonaccesstoolbar","true")),u.wijmenu("deactivate",null)}}),u.wijmenu("setItemDisabled",n(".wijmo-wijribbon-accesstoolbarmenutitleitem"),!0)},t.prototype.updateRibbonSize=function(){var e=this,t,r=this.options.wijCSS,s;e.tabEle.children("div").not(".wijmo-wijmenu").each(function(o,u){var a=n(u),f=a.is(":visible"),l=a.find(">ul>li:not(.wijmo-wijmenu-item)"),c=[],h=a.width();return f||(a.removeClass(r.wijtabsHide),h=a.width()),l.each(function(r,o){var u=n(o),a=u.find(">div:last"),f=e._getGroupLabelText(a);return t=u.children("."+p),s=u.children("."+v),t&&(u.addClass(i+"-"+f.toLowerCase()).prepend(t.children()),t.remove(),s&&s.remove()),c.push({width:u.outerWidth(!0),text:f}),this}),e._adjustRibbonGroupIfNeeded(l,c,h),f||a.addClass(r.wijtabsHide),this}),e.options.disabled&&e._setDisabled(!0)},t.prototype._createRibbonGroups=function(){var e=this,t=this.options.wijCSS;e.tabEle.children("div").each(function(r,s){var o=n(s),h=o.is(":visible"),p=o.find(">ul:not(.wijmo-wijribbon-accesstoolbarmenu)>li"),d=[],v;if(o.data("destroy.tabs")){o.remove();return}return h||o.removeClass(t.wijtabsHide),v=o.width(),o.addClass(u),o.hasAllClasses(t.tabsPanel)||(o.addClass("wijmo-wijribbon-accesstoolbar"),e.tabEle.prepend(o)),o.find(">ul").addClass(t.helperReset+" "+t.helperClearFix+" "+t.content+" "+t.cornerAll+" "+a),p.each(function(r,s){var o=n(s),u=o.find(">div:last"),a=u.find("span"),h=t.stateDefault+" "+f,p=e._getGroupLabelText(u);return u&&(h+=" "+i+"-"+p.toLowerCase()),o.addClass(h),u.addClass(c).bind("click",function(){return!1}),o.wrapInner("<div class = '"+l+"'></div>"),o.children().bind("mouseover",function(){n(this).addClass(t.stateHover)}).bind("mouseout",function(){n(this).removeClass(t.stateHover)}),u.appendTo(o),d.push({width:o.outerWidth(!0),text:p}),this}),e._originalGroupInfo=d,e._adjustRibbonGroupIfNeeded(p,d,v),h||o.addClass(t.wijtabsHide),this})},t.prototype._createStartMenu=function(){var e=this,t=n(".wijmo-wijribbon-startmenulink",e.element),r=e.options.wijCSS;t.unbind("click"),t.parent("li").addClass("wijmo-wijribbon-startmenulinkcontainer").hover(function(){n(this).removeClass("wijmo-wijribbon-startmenulinkcontainer")},function(){n(this).addClass("wijmo-wijribbon-startmenulinkcontainer")}),n(".wijmo-wijribbon-startmenuindicator",e.element).addClass(r.icon+" "+r.iconArrowDown),n(".wijmo-wijribbon-startmenu",e.element).wijmenu({trigger:n(".wijmo-wijribbon-startmenulink",e.element).parent(),triggerEvent:"click",orientation:"vertical",select:function(t,n){var r={name:undefined,commandName:undefined};r.commandName=n.item._link.attr("name"),e._trigger("click",t,r)},hidden:function(e,t){t.activeItem&&t.activeItem._link.removeClass(r.stateFocus)}})},t.prototype._getGroupLabelText=function(e){var t,r;return e&&(t=e.find("span"),e.attr("displayname")?r=e.attr("displayname"):t&&t.length>0&&!e.hasAllClasses(v)?r=n(t[0]).text():r=n.trim(e.text())),r},t.prototype._adjustRibbonGroupIfNeeded=function(e,t,r){var s=this,o=e.length-1,u=0,a=0,f=0,l,c,h;for(;o>=0;o--){f=0;for(u=0;u<o;u++)f+=t[u].width;f+a+t[o].width<=r?(l=n(e[o]).children("."+p),c=n(e[o]).children("."+v),l&&(n(e[o]).addClass(i+"-"+t[o].text.toLowerCase()).prepend(l.children()),l.remove(),c&&c.remove())):(h=t[o],a+=s._createDropDownRibbonGroup(h.text,e[o]))}},t.prototype._createDropDownRibbonGroup=function(e,t){var r=this,s=i+"-"+e.toLowerCase(),o=this.options.wijCSS,u=n(t).removeClass(s),a=r._getGroupLabelText(u.find(">div:last"))||e,l;return u.wrapInner("<div class='"+p+" "+f+"'></div>").children().hide().addClass(s).bind("mouseup."+r.widget,function(e){r.showDrpDwnGroup!==null&&(r.showDrpDwnGroup.hide().css("z-index",""),r.showDrpDwnGroup=null)}),l=n("<div class='"+v+"'>"+"<span class='"+d+a.toLowerCase()+" "+g+" "+y+"'></span>"+"<span class='"+m+"'>"+a+"</span>"+"<span class='"+o.icon+" "+o.iconArrowDown+" "+g+"'></span></div>").appendTo(u).unbind(r.widget).bind("mouseover."+r.widget,function(e){n(this).addClass(o.stateHover)}).bind("mouseout."+r.widget,function(e){n(this).removeClass(o.stateHover)}).bind("click."+r.widget,function(e){var t=n(this).siblings("."+p);t.is(":visible")?(t.hide().css("z-index",""),r.showDrpDwnGroup=null):(r.showDrpDwnGroup&&r.showDrpDwnGroup.hide().css("z-index",""),t.show().position({my:"left top",at:"left bottom",of:this}).css("z-index","10000"),r.showDrpDwnGroup=t,e.stopPropagation())}),u.outerWidth(!0)},t.prototype._hideShowedList=function(){var e=this;n(document).bind("mouseup",function(t){var r=t.target;e.showList&&(n(r).is(document)||!n.contains(e.showList.get(0),r))&&(e.showList.hide().css("z-index",""),e.showList=null),e.showDrpDwnGroup&&(n(r).is(document)||!n.contains(e.showDrpDwnGroup.get(0),r))&&(e.showDrpDwnGroup.hide().css("z-index",""),e.showDrpDwnGroup=null)})},t.prototype._buildButtonOption=function(e,t){var r=!0,i=this,s=e.attr("class"),u,a,f,l,c,h,p;if(s&&s!==""&&s!==o)a=s.split(" ")[0],e.removeClass(a),c=n.trim(e.text()),c===""&&(r=!1);else{if(t==="checkbox"||t==="radio"){if(n.trim(e.attr("id"))==="")return;h=n("[for='"+e.attr("id")+"']",e.parent());if(!h.is("label"))return;s=h.attr("class"),s&&s!==""&&s!==o?(a=s.split(" ")[0],h.removeClass(a),c=n.trim(h.text()),c===""&&(r=!1)):u=h.children("span,div")}else t==="button"&&(u=e.children("span,div"));u&&(u.length===1?u.eq(0).attr("class")!==""&&(f=u.eq(0),a=f.attr("class"),r=!1):u.length===2?u.eq(0).attr("class")&&(f=u.eq(0),a=f.attr("class"),f.is("span")?l="left":f.is("div")&&(l="top"),c=u.eq(1).text()):t==="button"&&n.trim(e.text())!==""&&(c=n.trim(e.text())))}return t==="button"?(e.empty(),p=n.trim(e.attr("name")),p!==""&&e.removeAttr("name")):(p=n.trim(h.attr("name")),p!==""&&h.removeAttr("name")),p!==""&&(e.data("commandName",p),i.buttons[p]||(i.buttons[p]={button:undefined,accessToolbarButton:undefined}),e.parent().is(".wijmo-wijribbon-accesstoolbar")?i.buttons[p].accessToolbarButton=e:i.buttons[p].button=e),{label:c,icons:{primary:a},position:l,text:r}},t.prototype._triggerEvent=function(e){var t=this,n,r,i=t.options.wijCSS;e.bind("click",function(i){if(t.options.disabled){i.preventDefault(),i.stopPropagation();return}t._hideAllMenus();var s=!0,o=e.data("commandName"),u=t.buttons[o],a={name:undefined,commandName:undefined};u&&u.parent&&(a.name=u.parent.data("commandName")),a.commandName=o,t._trigger("click",i,a),e.parent().is(".wijmo-wijribbon-accesstoolbar")?n=t.buttons[o].button:n=t.buttons[o].accessToolbarButton,n&&(r=n.button("widget"),n.is("button")||(r&&r.hasAllClasses(w)&&(s=!1),t._setBtnWidgetCheckedStyle(n,s))),e.is("button")&&(i.preventDefault(),i.stopPropagation())})},t.prototype._getDropdownLabelSubstr=function(e,t,r){var i=this,s=e.length,o=0,u=s,a=Math.floor((o+u)/2),f=n("<span></span>"),l=e.substr(0,a),c;f.appendTo(t.parent()),c=i._calculateWidth(l,f);while(c!==r&&u>o)l=e.substr(0,a+1),c=i._calculateWidth(l,f),c>r?u=a-1:c<r&&(o=a+1),a=Math.floor((o+u)/2);return f.remove(),l},t.prototype._calculateWidth=function(e,t){return t.text(e),t.width()},t.prototype.hideDropdown=function(e){var t=this,n=t.listUis[e];n&&n.list&&n.list.hide()},t.prototype._hideAllMenus=function(){var e=this;n(".wijmo-wijmenu",e.tabEle).hide()},t.prototype.setTabPageVisible=function(e,t){var r=this,i=n("a[href=#"+e+"]",r.element).parent("li"),s=i.parent("ul"),o;i&&i.length>0&&(t?(i.show(),o=n("li",s).index(i)):(i.hide(),o=n("li",s).index(n('li:visible:not(".wijmo-wijribbon-startmenulinkcontainer")',s)))),r.element.wijtabs("option","selected",o)},t.prototype.destroy=function(){this.disabledModal&&this.disabledModal.remove(),n(window).unbind("resize.wijribbon"),n.Widget.prototype.destroy.call(this)},t.prototype.getDropdownList=function(e){var t=this,r=t.listUis[e],i={};return r&&n.each(r.buttons,function(e,t){i[t.data("commandName")]=t.button("option","label")}),i},t.prototype.setButtonDisabled=function(e,t){var r=this.buttons[e],i=this.options.wijCSS,s,o,u=!1,a,f,l;if(r&&r.disabled){r.disabled(t);return}r&&r.button&&r.type==="galleryBtn"&&r.button.addClass(i.stateDisabled);if(r&&r.button){a=r.button,f=r.accessToolbarButton,u=a.is("button");if(r.type==="galleryBtn"){t?a.addClass(i.stateDisabled):a.removeClass(i.stateDisabled);return}a.button("option","disabled",t),s=n("."+i.buttonText,a),s&&s.removeClass(i.stateHover),f&&(f.button("option","disabled",t),o=n("."+i.buttonText,f),o&&o.removeClass(i.stateHover)),u?e!=="save"&&(a.children("."+i.buttonText).text(e),f&&a.children("."+i.buttonText).text(e)):n("[for='"+a.attr("id")+"']",a.parent()).children("."+i.buttonText).text(e),l=this.listUis[e],l&&l.type==="split"&&(l.trigger.button("option","disabled",t),l.trigger.children("."+i.buttonText).text(e))}},t.prototype.setButtonsDisabled=function(e){var t=this;n.each(e,function(e,n){t.setButtonDisabled(e,n)})},t.prototype.setButtonsChecked=function(e){var t=this;n.each(e,function(e,r){n.isPlainObject(r)?t.setButtonChecked(e,r.checked,r.name):t.setButtonChecked(e,r,null)})},t.prototype.registerButtonInformation=function(e,t){if(e&&t)return this.buttons[e]=t},t.prototype.ribbonClick=function(e,t){this._trigger("click",e,t)},t.prototype._setBtnWidgetCheckedStyle=function(e,t){var n=this,e,r=n.options.wijCSS;e.is("button")?t?e.addClass(r.stateActive):e.removeClass(r.stateActive):e.is("input[type='text']")||(e.prop("checked",t),e.button("refresh")),n._addActiveClassToButtonText(e.button("widget"))},t.prototype.removeButtonHoverState=function(e){var t=this,r,i=this.options.wijCSS,s=t.buttons[e];s&&s.button&&(r=s.button,r.is("button")&&(r.removeClass(i.stateHover).removeClass(i.stateFocus),n("span",r).removeClass(i.stateHover)))},t.prototype.setButtonChecked=function(e,t,r){var i=this,s,o=i.buttons[e],u=this.options.wijCSS,a,f,l,c;if(o&&o.checked){o.checked(t);return}if(o&&o.button){a=o.button,f=o.accessToolbarButton;if(a.is("button"))t?(a.addClass(u.stateActive),f&&f.addClass(u.stateActive)):(a.removeClass(u.stateActive),f&&f.removeClass(u.stateActive));else{if(o.type==="galleryBtn"){var h=a.parent("div");n("div",h).removeClass(u.stateActive),t?a.addClass(u.stateActive):a.removeClass(u.stateActive);return}a.is("input[type='text']")||(a.prop("checked",t),a.button("refresh"),f&&(f.prop("checked",t),f.button("refresh")))}o.parent?o.type==="dropdown"&&t&&(i.dropdownLabels[e]||(i.dropdownLabels[e]=i._getDropdownLabelSubstr(a.button("option","label"),o.parent.children("."+u.buttonText),o.parent.children("."+u.buttonText).width())),c=i.dropdownLabels[e],o.parent.is("input[type='text']")?(o.parent.val(c),o.parent.attr("title",c)):(o.parent.button("option","label",c),o.parent.attr("title",a.button("option","label"))),s=n(":radio",o.button.closest("ul")),s&&n.each(s,function(){i._updateGroupElementTextState(this)})):(i._addActiveClassToButtonText(a.button("widget")),f&&i._addActiveClassToButtonText(f.button("widget")))}else r&&(l=i.listUis[r],l&&(l.ui.is("input[type='text']")?l.ui.val(l.defaultValue):l.ui.button("option","label",l.defaultValue),l.buttons&&n.each(l.buttons,function(e,t){t.prop("checked",!1),t.button("refresh"),i._addActiveClassToButtonText(t.button("widget"))})))},t}(e.wijmoWidget);t.wijribbon=E;var S=function(){function e(){this.initSelector=":jqmData(role='wijribbon')",this.wijCSS={wijtabsHide:"wijmo-wijtabs-hide"},this.click=null,this.custombuttons=null}return e}();E.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new S),n.wijmo.registerWidget("wijribbon",E.prototype)})(e.ribbon||(e.ribbon={}));var t=e.ribbon})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijeditor",i=alert,s=window,o=document,u=parseInt,a,f,l,c=[],h=null,p=!0,d=0,v=[],m=null,g="setButtonDisabled",y="setButtonsDisabled",b="setButtonChecked",w="setButtonsChecked",E="form",S="imagebutton",x="textarea",T="button",N="textbox",C="list",k="passwordfield",L="dropdownlist",A="hiddenfield",O="radio",M="checkbox",_="insertcol",D="insertrow",P="insertcell",H="splitcell",B="mergecell",j="deletecol",F="deleterow",I="deletecell",q="justifyleft",R="justifycenter",U="justifyright",z="justifyfull",W="borders",X="insertorderedlist",V="insertunorderedlist",$="outdent",J="indent",K="backcolor",Q="fontcolor",G="bold",Y="italic",Z="strikethrough",et="underline",tt="subscript",nt="superscript",rt="template",it="removeformat",st="insertbreak",ot="insertparagraph",ut="insertprintpagebreak",at="inserthorizontalrule",ft="tablebutton",lt="inserttable",ct="edittable",ht="wysiwyg",pt="split",dt="code",vt="wordwrap",mt="fullscreen",gt="undo",yt="redo",bt="preview",wt="cleanup",Et="cut",St="copy",xt="paste",Tt="selectall",Nt="media",Ct="specialchar",kt="datetime",Lt="find",At="inspect",Ot="save",Mt="spelling",_t="imagebrowser",Dt="link",Pt="xx-small",Ht="x-small",Bt="small",jt="medium",Ft="large",It="x-large",qt="xx-large",Rt="fontname",Ut="fontsize",zt="blockquote",Wt="insertcode",Xt="wijmo-wijribbon",Vt=Xt+"-bigbutton",$t=Xt+"-dropdownbutton",Jt=Xt+"-splitbutton",Kt=Xt+"-list",Qt=Xt+"-save",Gt=Xt+"-save16",Yt=Xt+"-undo",Zt=Xt+"-redo",en=Xt+"-preview",tn=Xt+"-cleanup",nn=Xt+"-cut",rn=Xt+"-copy",sn=Xt+"-paste",on=Xt+"-selectall",un=Xt+"-bgcolor",an=Xt+"-color",fn=Xt+"-bold",ln=Xt+"-italic",cn=Xt+"-underline",hn=Xt+"-strike",pn=Xt+"-sub",dn=Xt+"-sup",vn=Xt+"-template",mn=Xt+"-removeformat",gn=Xt+"-justifyleft",yn=Xt+"-justifycenter",bn=Xt+"-justifyright",wn=Xt+"-justifyfull",En=Xt+"-borders",Sn=Xt+"-orderlist",xn=Xt+"-unorderlist",Tn=Xt+"-outdent",Nn=Xt+"-indent",Cn=Xt+"-inspect",kn=Xt+"-find",Ln=Xt+"-table",An=Xt+"-inserttable",On=Xt+"-edittable",Mn=Xt+"-insertcol",_n=Xt+"-insertrow",Dn=Xt+"-insertcell",Pn=Xt+"-splitcell",Hn=Xt+"-mergecell",Bn=Xt+"-deletecol",jn=Xt+"-deleterow",Fn=Xt+"-deletecell",In=Xt+"-insertbreak",qn=Xt+"-insertparagraph",Rn=Xt+"-insertprintpagebreak",Un=Xt+"-inserthr",zn=Xt+"-form",Wn=Xt+"-textarea",Xn=Xt+"-textbox",Vn=Xt+"-password",$n=Xt+"-hiddenfield",Jn=Xt+"-imagebutton",Kn=Xt+"-button",Qn=Xt+"-listbox",Gn=Xt+"-dropdownlist",Yn=Xt+"-radio",Zn=Xt+"-checkbox",er=Xt+"-link",tr=Xt+"-link16",nr=Xt+"-imagebrowser",rr=Xt+"-media",ir=Xt+"-specialchar",sr=Xt+"-datetime",or=Xt+"-blockquote",ur=Xt+"-insertcode",ar=Xt+"-modes",fr=Xt+"-designview",lr=Xt+"-sourceview",cr=Xt+"-splitview",hr=Xt+"-wordwrap",pr=Xt+"-fullscreen",dr="wijmo-wijeditor",vr=dr+"-container",mr=dr+"-header",gr=dr+"-content",yr=dr+"-footer",br=dr+"-pathselector",wr=dr+"-fullscreen",Er=dr+"-dialog",Sr=Er+"-hr",xr=Er+"-buttons",Tr=Er+"-button",Nr=Er+"-text",Cr=dr+"-imagedlg",kr=Cr+"-content",Lr=Cr+"-fields",Ar=Cr+"-imagefield",Or=Cr+"-imagelist",Mr=Cr+"-preview",_r=Cr+"-imagesrc",Dr=Cr+"-imagealt",Pr=Cr+"-imagewidth",Hr=Cr+"-imageheight",Br=Cr+"-css",jr=Cr+"-hideimagelist",Fr=dr+"-templatedlg",Ir=Fr+"-toplabels",qr=Fr+"-topleftlabel",Rr=Fr+"-toprightlabel",Ur=Fr+"-content",zr=Fr+"-templatelist",Wr=Fr+"-preview",Xr=Fr+"-templateinfo",Vr=Fr+"-nameinfo",$r=Fr+"-descriptioninfo",Jr=Fr+"-fields",Kr=Fr+"-name",Qr=Fr+"-description",Gr=Fr+"-buttons",Yr=Fr+"-delete",Zr=Fr+"-save",ei=dr+"-linkdlg",ti=ei+"-address",ni=ei+"-linktype",ri=ei+"-anchor",ii=ei+"-text",si=ei+"-target",oi=ei+"-css",ui=ei+"-src",ai=ei+"-width",fi=ei+"-height",li=ei+"-imagecontainer",ci=ei+"-linkicontype",hi=dr+"-codedlg",pi=hi+"-source",di=hi+"-sourcelabel",vi=dr+"-taginsdlg",mi=vi+"-caption",gi=vi+"-taglabel",yi=vi+"-tagtext",bi=vi+"-filterempty",wi=vi+"-attribs",Ei=vi+"-attriblist",Si=vi+"-innerhtml",xi=vi+"-css",Ti=dr+"-colordlg",Ni=Ti+"-picker",Ci=Ti+"-color",ki=dr+"-tabledlg",Li=ki+"-rows",Ai=ki+"-columns",Oi=ki+"-width",Mi=ki+"-height",_i=ki+"-border",Di=ki+"-cellpadding",Pi=ki+"-cellspacing",Hi=ki+"-csstext",Bi=ki+"-bgcolor",ji=dr+"-previewdlg",Fi=ji+"-caption",Ii=ji+"-navigator",qi=ji+"-prev",Ri=ji+"-next",Ui=ji+"-printall",zi=ji+"-printone",Wi=ji+"-ok",Xi=ji+"-printdocument",Vi=ji+"-previewiframe",$i=dr+"-cleanupdlg",Ji=$i+"-caption",Ki=$i+"-document",Qi=$i+"-actions",Gi=dr+"-finddlg",Yi=Gi+"-find",Zi=Gi+"-replace",es=dr+"-mediadlg",ts=es+"-type",ns=es+"-src",rs=es+"-width",is=es+"-height",ss=dr+"-specialchardlg",os=ss+"-chars",us=ss+"-preview",as=ss+"-content",fs=ss+"-list",ls=ss+"_label",cs=ss+"-punctuation",hs=ss+"-symbols",ps=ss+"-diacritics",ds="wijmo-formatspan",vs="."+xr+" input:first",ms="."+xr+" input:last",gs="."+xr+" input[value='OK']",ys="."+xr+" input[engValue='Cancel']",bs=["Bold","Italic","UnderLine","StrikeThrough","SubScript","SuperScript","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","Border","NumberedList","BulletedList","Outdent","Indent"],ws=["Bold","Italic","Link","BlockQuote","StrikeThrough","InsertDate","InsertImage","NumberedList","BulletedList","InsertCode"],Es=["Bold","Italic","StrikeThrough","UnderLine","ForeColor","FontSize","Link","InsertImage","NumberedList","BulletedList","BlockQuote"],Ss={Form:{name:"form",tip:"Form",css:zn},Image:{name:"imagebutton",tip:"Image Button",css:Jn},TextArea:{name:"textarea",tip:"TextArea",css:Wn},Button:{name:"button",tip:"Button",css:Kn},TextBox:{name:"textbox",tip:"TextBox",css:Xn},List:{name:"list",tip:"ListBox",css:Qn},PasswordField:{name:"passwordfield",tip:"Password Field",css:Vn},DropDownList:{name:"dropdownlist",tip:"DropDownList",css:Gn},HiddenField:{name:"hiddenfield",tip:"Hidden Field",css:$n},Radio:{name:"radio",tip:"RadioButton",css:Yn},CheckBox:{name:"checkbox",tip:"CheckBox",css:Zn},InsertColumn:{name:"insertcol",tip:"Insert Column",css:Mn},InsertRow:{name:"insertrow",tip:"Insert Row",css:_n},InsertCell:{name:"insertcell",tip:"Insert Cell",css:Dn},SplitCell:{name:"splitcell",tip:"Split Cell",css:Pn},MergeCell:{name:"mergecell",tip:"Merge Cell",css:Hn},DeleteColumn:{name:"deletecol",tip:"Delete Column",css:Bn},DeleteRow:{name:"deleterow",tip:"Delete Row",css:jn},DeleteCell:{name:"deletecell",tip:"Delete Cell",css:Fn},JustifyLeft:{name:"justifyleft",tip:"Justify Left",css:gn,grpname:"alignment"},JustifyCenter:{name:"justifycenter",tip:"Justify Center",css:yn,grpname:"alignment"},JustifyRight:{name:"justifyright",tip:"Justify Right",css:bn,grpname:"alignment"},JustifyFull:{name:"justifyfull",tip:"Justify Full",css:wn,grpname:"alignment"},Border:{name:"borders",tip:"Border",css:En},NumberedList:{name:"insertorderedlist",tip:"Numbered List",css:Sn,grpname:"list"},BulletedList:{name:"insertunorderedlist",tip:"Bulleted List",css:xn,grpname:"list"},Outdent:{name:"outdent",tip:"Outdent",css:Tn,grpname:"block"},Indent:{name:"indent",tip:"Indent",css:Nn,grpname:"block"},BackColor:{name:"backcolor",tip:"Background Color",css:un},ForeColor:{name:"fontcolor",tip:"Font Color",css:an},Bold:{name:"bold",tip:"Bold",css:fn},Italic:{name:"italic",tip:"Italic",css:ln},StrikeThrough:{name:"strikethrough",tip:"Strikethrough",css:hn},UnderLine:{name:"underline",tip:"Underline",css:cn},SubScript:{name:"subscript",tip:"Subscript",css:pn},SuperScript:{name:"superscript",tip:"Superscript",css:dn},Template:{name:"template",tip:"Template",css:vn},RemoveFormat:{name:"removeformat",tip:"RemoveFormat",css:mn},InsertBreak:{name:"insertbreak",tip:"Insert Break",css:In},InsertParagraph:{name:"insertparagraph",tip:"Insert Paragraph",css:qn},InsertPrint:{name:"insertprintpagebreak",tip:"Insert Print Page Break",css:Rn},InsertHR:{name:"inserthorizontalrule",tip:"Insert Horizontal Line",css:Un},Table:{name:"tablebutton",tip:"Table",css:Ln},InsertTable:{name:"inserttable",tip:"Insert Table",css:An},EditTable:{name:"edittable",tip:"Edit Table",css:On},Wysiwyg:{name:"wysiwyg",tip:"Design View",css:fr,grpname:"modes"},Split:{name:"split",tip:"Split View",css:cr,grpname:"modes"},Code:{name:"code",tip:"Source View",css:lr,grpname:"modes"},Wordwrap:{name:"wordwrap",tip:"Wordwrap",css:hr},FullScreen:{name:"fullscreen",tip:"Fullscreen",css:pr},Undo:{name:"undo",tip:"Undo",css:Yt},Redo:{name:"redo",tip:"Redo",css:Zt},Preview:{name:"preview",tip:"Preview",css:en},Cleanup:{name:"cleanup",tip:"Clean up",css:tn},Cut:{name:"cut",tip:"Cut",css:nn},Copy:{name:"copy",tip:"Copy",css:rn},Paste:{name:"paste",tip:"Paste",css:sn},SelectAll:{name:"selectall",tip:"Select All",css:on},Media:{name:"media",tip:"Media",css:rr},InsertSpecialChar:{name:"specialchar",tip:"Insert Special Character",css:ir},InsertDate:{name:"datetime",tip:"Insert Date Time",css:sr},Find:{name:"find",tip:"Find And Replace",css:kn,text:"Find"},Inspect:{name:"inspect",tip:"Tag Inspect",css:Cn,text:"Inspect"},Save:{name:"save",tip:"Save",css:Qt,text:"Save"},Spelling:{name:"spelling",tip:"Form",css:""},InsertImage:{name:"imagebrowser",tip:"Image Browser",css:nr},Link:{name:"link",tip:"Link",css:er,text:"Link"},FontName:{name:"fontname",tip:"Font Name",css:$t},FontSize:{name:"fontsize",tip:"Font Size",css:$t},BlockQuote:{name:"blockquote",tip:"Block Quote",css:or},InsertCode:{name:"insertcode",tip:"Insert Code",css:ur}},xs=function(){var e=this,t=[];e.append=function(e){t.push(e)},e.toString=function(){return t.join("")},e.dispose=function(){t=null}},Ts=function(e){this.text=e,this.render=function(){return this.text}},Ns=function(e,t,r){var i=this,s={br:!0,img:!0,hr:!0,input:!0};i.tagName=e||"div",i.attributes=r||{},i.innerText=t||"",i.children=[],n.isPlainObject(t)&&(i.innerText="",i.attributes=t),i._isShortTag=!1,s[i.tagName]===!0&&(i._isShortTag=!0),i.render=function(){var e=new xs,t="";return e.append(i._renderBeginTag(i.tagName,i.attributes)),i.innerText!==""&&e.append(i.innerText),i.children.length>0&&n.each(i.children,function(t,n){e.append(n.render())}),e.append(i._renderEndTag(i.tagName)),t=e.toString(),e.dispose(),t},i.add=function(e){this.children.push(e)},i._renderBeginTag=function(e,t){var r=new xs,i="";return r.append("<"),r.append(e),n.each(t,function(e,t){r.append(" "),r.append(e),r.append("="),r.append('"'),r.append(t?t.toString():""),r.append('"')}),this._isShortTag?r.append(" "):r.append(">"),i=r.toString(),r.dispose(),i},i._renderEndTag=function(e){var t=new xs,n="";return this._isShortTag?t.append("/>"):(t.append("</"),t.append(e),t.append(">")),n=t.toString(),t.dispose(),n}},Cs=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.wijeditor=function(){this._curPageIdx=0,this.tRange=null,this.txtFoundInIE=!1,this.txtFoundInNoneIE=!1,this.rangeSelection=null},t.prototype._create=function(){var e=this,t=e.element.attr("id");window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n));if(e.element.is("input"))return;e.wijeditor();if(!t||t==="")e.element.uniqueId(),t=e.element.attr("id");e.id_prefix="wijeditor-"+t+"-",e.$ribbon=undefined,e.$modes=undefined,e._isIE11=n.browser.msie&&n.browser.version&&parseFloat(n.browser.version)>=11,e._editorify(),e._initElements(),s.setTimeout(function(){e.options.disabled&&e._handleDisabledOption(!0,e.editor)},40),e._continueSavingInputTextForUndo=!1,e.element.is(":hidden")&&e.editor.wijAddVisibilityObserver&&e.editor.wijAddVisibilityObserver(function(t){if(n.contains(e.editor[0],t.target))return;e.refresh(),e.editor.wijRemoveVisibilityObserver&&e.editor.wijRemoveVisibilityObserver()},"wijeditor")},t.prototype._contextMenuWidgetName=function(){return"wijmenu"},t.prototype._createBigButton=function(e,t,n,r){var i=this,s=i._createElement("button",{title:e,name:n,"class":Vt});return s.add(i._createDiv(t)),s.add(i._createSpan("",r)),s},t.prototype._createTextButton=function(e,t,n){return this._createElement("button",n,{title:e,name:t})},t.prototype._createButton=function(e,t,n,r){var i=this,s;return r?(s=i._createElement("button",{title:e,name:n}),s.add(i._createSpan(t)),s.add(i._createSpan("",r)),s):i._createElement("button",{title:e,name:n,"class":t})},t.prototype._createTextRadioButton=function(e,t,n,r,i){var s=this,o=n.replace(/ /g,""),u=[];return u.push(s._createElement("input",{id:t+o,type:"radio",name:r})),u.push(s._createElement("label",i,{"for":t+o,title:e,name:n})),u},t.prototype._createImageRadioButton=function(e,t,n,r,i){var s=this,o=[];return o.push(s._createElement("input",{id:t+r,type:"radio",name:i})),o.push(s._createElement("label",{"for":t+r,title:e,name:r,"class":n})),o},t.prototype._createImageCheckButton=function(e,t,n,r){var i=this,s=[];return s.push(i._createElement("input",{id:t+r,type:"checkbox"})),s.push(i._createElement("label",{"for":t+r,title:e,name:r,"class":n})),s},t.prototype._createRibbonList=function(){return this._createSpan(Kt)},t.prototype._createDropdownButton=function(e,t,r,i,s){var o=this,u=o._createElement("div",{title:e,"class":$t}),a=o._createElement("ul");return u.add(o._createTextButton(e,t,r)),u.add(a),n.each(i,function(e,r){var i=o._createElement("li"),u=o._createTextRadioButton(r.tip,s,r.name,t,r.text);n.each(u,function(e,t){i.add(t)}),a.add(i)}),u},t.prototype._createSplitButton=function(e,t,r,i,s){var o=this,u=o._createElement("div",{title:e,"class":Jt}),a=o._createElement("ul");return u.add(o._createBigButton(e,t,r,i)),u.add(o._createElement("button",{"class":Vt})),u.add(a),n.each(s,function(e,t){var n=o._createElement("li");n.add(o._createButton(t.tip,t.css,t.name,t.text)),a.add(n)}),u},t.prototype._createButtonByCommand=function(e){var t=this,n,r=Ss[e],i;if(!r)return;i=r.name;switch(i){case zt:case E:case S:case x:case T:case N:case C:case k:case L:case A:case O:case M:case _:case D:case P:case H:case B:case j:case F:case I:case it:case st:case ot:case ut:case mt:case gt:case yt:case Et:case St:case xt:case kt:case vt:case K:case Q:case bt:case wt:case Nt:case Ct:case rt:case _t:case Wt:case at:case Tt:n=t._createButton(r.tip,r.css,i);break;case Lt:case At:n=t._createButton(r.tip,r.css,i,r.text);break;case W:case tt:case nt:case G:case Y:case et:case Z:n=t._createImageCheckButton(r.tip,t.id_prefix,r.css,i);break;case ht:case pt:case dt:case q:case R:case U:case z:case $:case J:case X:case V:n=t._createImageRadioButton(r.tip,t.id_prefix,r.css,i,r.grpname);break;case ft:n=t._createSplitButton("Table",Ln,ft,"Table",[{tip:"Insert Table",css:An,name:lt,text:"Insert"},{tip:"Edit Table",css:On,name:ct,text:"Edit"}]);break;case Ot:t.options.mode==="ribbon"?n=t._createBigButton(r.tip,r.css,i,r.text):n=t._createButton(r.tip,Gt,i);break;case Dt:t.options.mode==="ribbon"?n=t._createBigButton(r.tip,r.css,i,r.text):n=t._createButton(r.tip,tr,i);break;case Rt:n=t._createDropdownButton("Font Name",Rt,"Font Name",t.options.fontNames||[],t.id_prefix);break;case Ut:n=t._createDropdownButton("Font Size",Ut,"Font Size",t.options.fontSizes||[],t.id_prefix);break;case Mt:}return n},t.prototype._createActionGroup=function(){var e=this,t=e._createElement("li"),n=e._createRibbonList();return t.add(e._createButtonByCommand("Save")),t.add(n),n.add(e._createButtonByCommand("Undo")),n.add(e._createButtonByCommand("Redo")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("Preview")),n.add(e._createButtonByCommand("Cleanup")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("Cut")),n.add(e._createButtonByCommand("Copy")),n.add(e._createButtonByCommand("Paste")),n.add(e._createButtonByCommand("SelectAll")),t.add(e._createElement("div","Actions")),t},t.prototype._createFontGroup=function(){var e=this,t=e._createElement("li"),r=e._createRibbonList();return t.add(e._createButtonByCommand("FontName")),t.add(e._createButtonByCommand("FontSize")),t.add(r),r.add(e._createButtonByCommand("BackColor")),r.add(e._createButtonByCommand("ForeColor")),r=e._createRibbonList(),t.add(r),n.each(e._createButtonByCommand("Bold"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("Italic"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("UnderLine"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("StrikeThrough"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("SubScript"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("SuperScript"),function(e,t){r.add(t)}),r=e._createRibbonList(),t.add(r),r.add(e._createButtonByCommand("Template")),r=e._createRibbonList(),t.add(r),r.add(e._createButtonByCommand("RemoveFormat")),t.add(e._createElement("div","Font")),t},t.prototype._createParaGroup=function(){var e=this,t=e._createElement("li"),r=e._createRibbonList();return t.add(r),n.each(e._createButtonByCommand("JustifyLeft"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("JustifyCenter"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("JustifyRight"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("JustifyFull"),function(e,t){r.add(t)}),r=e._createRibbonList(),t.add(r),n.each(e._createButtonByCommand("Border"),function(e,t){r.add(t)}),r=e._createRibbonList(),t.add(r),n.each(e._createButtonByCommand("NumberedList"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("BulletedList"),function(e,t){r.add(t)}),r=e._createRibbonList(),t.add(r),n.each(e._createButtonByCommand("Outdent"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("Indent"),function(e,t){r.add(t)}),t.add(e._createElement("div","Paragraph")),t},t.prototype._createReviewGroup=function(){var e=this,t=e._createElement("li");return t.add(e._createButtonByCommand("Inspect")),t.add(e._createButtonByCommand("Find")),t.add(e._createElement("div","Review")),t},t.prototype._createTablesGroup=function(){var e=this,t=e._createElement("li"),n=e._createRibbonList();return t.add(e._createButtonByCommand("Table")),t.add(n),n.add(e._createButtonByCommand("InsertColumn")),n.add(e._createButtonByCommand("InsertRow")),n.add(e._createButtonByCommand("InsertCell")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("SplitCell")),n.add(e._createButtonByCommand("MergeCell")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("DeleteColumn")),n.add(e._createButtonByCommand("DeleteRow")),n.add(e._createButtonByCommand("DeleteCell")),t.add(e._createElement("div","Tables")),t},t.prototype._createBreaksGroup=function(){var e=this,t=e._createElement("li");return t.add(e._createButtonByCommand("InsertBreak")),t.add(e._createButtonByCommand("InsertParagraph")),t.add(e._createButtonByCommand("InsertPrint")),t.add(e._createButtonByCommand("InsertHR")),t.add(e._createElement("div","Breaks")),t},t.prototype._createFormsGroup=function(){var e=this,t=e._createElement("li"),n=e._createRibbonList();return t.add(n),n.add(e._createButtonByCommand("Form")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("TextArea")),n.add(e._createButtonByCommand("TextBox")),n.add(e._createButtonByCommand("PasswordField")),n.add(e._createButtonByCommand("HiddenField")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("Image")),n.add(e._createButtonByCommand("Button")),n=e._createRibbonList(),t.add(n),n.add(e._createButtonByCommand("List")),n.add(e._createButtonByCommand("DropDownList")),n.add(e._createButtonByCommand("Radio")),n.add(e._createButtonByCommand("CheckBox")),t.add(e._createElement("div","Forms")),t},t.prototype._createSpecialGroup=function(){var e=this,t=e._createElement("li");return t.add(e._createButtonByCommand("Link")),t.add(e._createButtonByCommand("InsertImage")),t.add(e._createButtonByCommand("Media")),t.add(e._createButtonByCommand("InsertSpecialChar")),t.add(e._createButtonByCommand("InsertDate")),t.add(e._createElement("div","Special")),t},t.prototype._getDefaultRibbonMarkup=function(){var e=this,t=e._createElement("div"),n=e._createElement("ul"),r=e._createElement("li"),i=e._createElement("li"),s=e._createElement("div",{id:e.id_prefix+"format"}),o=e._createElement("div",{id:e.id_prefix+"insert"}),u=e._createElement("ul"),a=e._createElement("ul");return t.add(n),t.add(s),t.add(o),n.add(r),n.add(i),r.add(e._createElement("a","Format",{href:"#"+e.id_prefix+"format"})),i.add(e._createElement("a","Insert",{href:"#"+e.id_prefix+"insert"})),s.add(u),u.add(e._createActionGroup()),u.add(e._createFontGroup()),u.add(e._createParaGroup()),u.add(e._createReviewGroup()),o.add(a),a.add(e._createTablesGroup()),a.add(e._createBreaksGroup()),a.add(e._createFormsGroup()),a.add(e._createSpecialGroup()),t.render()},t.prototype._getRibbonModesMarkup=function(){var e=this,t=e._createDiv(ar),r=e._createRibbonList(),i=e.element.find(".wijeditor-footer"),s,o,u,a,f;return i.length>0&&(s=n(i.find("."+fr)),s.length>0&&(Ss.Wysiwyg.tip=s.attr("title")||Ss.Wysiwyg.tip),o=n(i.find("."+cr)),o.length>0&&(Ss.Split.tip=o.attr("title")||Ss.Split.tip),u=n(i.find("."+lr)),u.length>0&&(Ss.Code.tip=u.attr("title")||Ss.Code.tip),a=n(i.find("."+hr)),s.length>0&&(Ss.Wordwrap.tip=a.attr("title")||Ss.Wordwrap.tip),f=n(i.find("."+pr)),s.length>0&&(Ss.FullScreen.tip=f.attr("title")||Ss.FullScreen.tip),i.remove()),t.add(r),n.each(e._createButtonByCommand("Wysiwyg"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("Code"),function(e,t){r.add(t)}),n.each(e._createButtonByCommand("Split"),function(e,t){r.add(t)}),t.add(e._createButtonByCommand("Wordwrap")),t.add(e._createButtonByCommand("FullScreen")),t.render()},t.prototype._getSimpleToolBar=function(e){var t=this,r,i=t._createDiv("");return n.each(e,function(e,s){r=t._createButtonByCommand(s),r&&(n.inArray(s,bs)!==-1?n.each(r,function(e,t){i.add(t)}):i.add(r))}),i.render()},t.prototype._editorify=function(){var e=this,t=e.element,r=t.width(),i=t.height(),s=e.options,o=s.mode,u,a,f,l,c,h,p;e._oriStyle=t.attr("style"),e._oriContent=t.html(),e._oriEleWidth=r,e._oriEleHeight=i,t.is("textarea")?(o==="ribbon"?e.$ribbon=n(e._getDefaultRibbonMarkup()):o==="bbcode"?e.$ribbon=n(e._getSimpleToolBar(Es)):s.simpleModeCommands&&s.simpleModeCommands.length!==0?(f=n.grep(s.simpleModeCommands,function(e,t){return e!=="Table"},undefined),e.$ribbon=n(e._getSimpleToolBar(f))):e.$ribbon=n(e._getSimpleToolBar(ws)),s.text&&t.val(s.text),e.sourceView=t,e.editor=t.wrap("<div></div>").parent(),e.editor.width(r).height(i)):(e.editor=t,e.$ribbon=t.children(":eq(0)"),h=t.children(":eq(1)"),h.is("textarea")?(s.text&&h.val(s.text),e.sourceView=h):(s.text?p=s.text:p=h.html(),h.remove(),e.sourceView=n("<textarea></textarea>").val(p))),u=n("<div class='"+vr+"'></div>"),e.dialog=n("<div class ='"+dr+"'></div>"),e.subDialog=n("<div class ='"+dr+"'></div>"),e.editor.addClass(dr).addClass(e.options.wijCSS.widget).append(u).append(e.dialog).append(e.subDialog),e._createMenuMarkUp(e,s),e.$ribbon.wrap("<a href='javascript:void(null)'></a>").parent().appendTo("<div class='"+mr+" ui-widget-header ui-helper-clearfix ui-corner-top'></div>").parent().appendTo(u),a=n("<div class='"+gr+"'></div>").appendTo(u),e.designView=n("<iframe frameborder='0'></iframe>"),e.designView.wrap("<div></div>").parent().appendTo(a),e.sourceView.wrap("<div></div>").parent().appendTo(a),l=[e.$ribbon],e.$modes=n(e._getRibbonModesMarkup()),s.showFooter&&(c=n("<div class='"+yr+" "+"ui-widget ui-widget-content ui-state-default'></div>"),u.append(c),c.append("<div class='"+br+"'></div>"),e.$modes.appendTo(c),l.push(e.$modes)),n.each(l,function(t,n){n.wijribbon({click:function(t,n){e._ribbonCommand(n.commandName,n.name),e._trigger("commandButtonClick",t,n)}})})},t.prototype._createMenuMarkUp=function(e,t){t.customContextMenu&&!n.browser.webkit&&(e.contextMenu=n("<ul><li _c1buttoncmd='cut'><a>"+this.localizeString("contextMenuCut","Cut")+"</a></li>"+"<li _c1buttoncmd='copy'><a>"+this.localizeString("contextMenuCopy","Copy")+"</a></li>"+"<li _c1buttoncmd='paste'><a>"+this.localizeString("contextMenuPaste","Paste")+"</a></li></ul>"),n("<a href='#'></a>").append(e.contextMenu).appendTo(e.editor))},t.prototype._handleDisabledOption=function(e,t){var r=this;e?(r.disabledDiv||(r.disabledDiv=r._createDisabledDiv(t)),n("body").focus(),r.disabledDiv.appendTo(r.editor)):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=e?e:t.element,i=r.outerWidth(),s=r.outerHeight();return n("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"relative","background-color":"lightgray",width:i,height:s,left:0,top:-s})},t.prototype._initElements=function(){var e=this,t=e.options,n=e.editor.height()-e._getHeader().outerHeight(!0)-e._getFooter().outerHeight(!0),r={};e._getContent().height(n).wijsplitter({showExpander:!1,orientation:"horizontal",panel1:{scrollBars:"none",collapsed:!1},panel2:{scrollBars:"none",collapsed:!0}}),e.sourceView.css("width","").css("height",""),e._addHandlerToDesignView(),e._addDefaultFontStyleToDesignView(),e._createWijMenu(),(!t.showPathSelector||e.options.mode==="bbcode")&&e._getPathSelector().hide(),e._ribbonCommand(t.editorMode,null,!0),t.fullScreenMode&&e._setFullScreen(t.fullScreenMode),r[yt]=!0,r[gt]=!0,e.$ribbon.wijribbon(y,r),e._handleWinDocumentKeyDown()},t.prototype._handleWinDocumentKeyDown=function(){var e=this;n(document).bind("keydown."+e.widgetName+"."+e.id_prefix.replace(/-/g,""),function(t){if(e.options.disabled)return;switch(t.keyCode){case 27:e._escActionAssociated()}})},t.prototype._setOption=function(e,t){var r=this,i=r.options,s=i.mode,o=i.editorMode,u=r.$ribbon.parent(),a=i.fullScreenMode,f=i.customContextMenu;n.Widget.prototype._setOption.apply(r,arguments);if(e==="fullScreenMode")t!==a&&r._setFullScreen(t);else if(e==="showPathSelector")t?r._getPathSelector().show():r._getPathSelector().hide();else if(e==="editorMode"&&o!==t)r._ribbonCommand(t),r.$modes.data("wijmo-wijribbon")&&r.$modes.wijribbon(b,o,!1);else if(e==="fullScreenContainerSelector")r.options.fullScreenMode&&r._setFullScreen(!0);else if(e==="disabled")r._handleDisabledOption(t,r.editor);else if(e==="showFooter")t?n("."+yr).is(":visible")||n("."+yr).show():n("."+yr).is(":visible")&&n("."+yr).hide();else if(e==="commandButtonClick")i.commandButtonClick=t;else if(e==="text")r.setText(t);else if(e==="customContextMenu"){if(f===t)return;t?(r.contextMenu||r._createMenuMarkUp(r,i),r._createWijMenu()):(r.contextMenu[r._contextMenuWidgetName()]("destroy").remove(),r.contextMenu=undefined)}else e==="mode"&&t!==s?(r._recreateRibbon(t),r._ribbonCommand(i.editorMode)):(e==="fontNames"||e==="fontSizes")&&r._recreateRibbon(r.options.mode)},t.prototype._recreateRibbon=function(e){var t=this,r=t.$ribbon.parent();t.$ribbon.wijribbon("destroy"),t.$ribbon.remove(),e==="ribbon"?t.$ribbon=n(t._getDefaultRibbonMarkup()):e==="bbcode"?t.$ribbon=n(t._getSimpleToolBar(Es)):t.$ribbon=n(t._getSimpleToolBar(ws)),r.append(t.$ribbon),t.$ribbon.wijribbon({click:function(e,n){t._ribbonCommand(n.commandName,n.name),t._trigger("commandButtonClick",e,n)}})},t.prototype._getHeader=function(){return n("."+mr,this.editor)},t.prototype._getContent=function(){return n("."+gr,this.editor)},t.prototype._getFooter=function(){return n("."+yr,this.editor)},t.prototype._getPathSelector=function(){return n("."+br,this.editor)},t.prototype._getModes=function(){return n("."+ar,this.editor)},t.prototype._getDesignView=function(){return this.designView},t.prototype._getDesignViewWindow=function(){var e=this.designView;return e&&e.length>0?e[0].contentWindow:null},t.prototype._getDesignViewDocument=function(){var e=this._getDesignViewWindow();return e?e.document:null},t.prototype._getDesignViewText=function(){var e=this._getDesignViewDocument();return e&&e.body&&e.body.innerHTML?e.body.innerHTML:""},t.prototype._setDesignViewText=function(e){var t=this,n=this._getDesignViewDocument();this.options.mode==="bbcode"&&(e=t._convertBBCodeToHtml(e)),n&&n.body&&(n.body.innerHTML=e),t.options.text=e},t.prototype._getDialog=function(){return this.dialog},t.prototype._getSubDialog=function(){return this.subDialog},t.prototype._initContentDocument=function(){var e=this,t=e.sourceView.val(),r=e._getDesignViewDocument(),i=e.options.tableVirtualBorderShowing,s=function(){try{e._addHandlerToDesignView(),e._addDefaultFontStyleToDesignView(),e._createWijMenu()}catch(t){}};e.options.mode==="bbcode"&&(t=e._convertBBCodeToHtml(n.trim(t))),e.designView.unbind("load"),r.open(),r.write('<html style="width:100%;height:100%;'+(e.options.enabled?"cursor:text;":"")+'"><head><title></title><style id="__wijStyle" '+' type="text/css" >table,td,tr{border: 1px #acacac dashed;}'+'</style></head><body style="word-wrap:break-word">'+t+"</body></html>"),r.close(),i||(e._updateTableBorderShowing(i),e.$ribbon.wijribbon(b,W,!i)),e.element.attr("accesskey")&&(n(r.body).attr("accesskey",e.element.attr("accesskey")),e.element.removeAttr("accesskey")),v=[],v.push(t),d=0,e.designView.load(function(){e._isIE11?setTimeout(s,0):s()})},t.prototype._addHandlerToDesignView=function(){var e=this,t=e._getDesignViewWindow(),r=t.document;e._initContentDocument(),e._loadDesignView(),n.browser.msie&&n(r).unbind("beforedeactivate").bind("beforedeactivate",function(){e._saveSelectionForIE()})},t.prototype._loadDesignView=function(){var e=this,t=e._getDesignViewWindow(),r=t.document;n.browser.mozilla?setTimeout(e._setDesignModeForFF,1e3,e):e._setContentEditable(r,!0),n.browser.msie&&e._setContentSpellCheck(r,!1),e.sourceView.unbind("blur."+e.widgetName).bind("blur."+e.widgetName,function(t){e._onSourceViewBlur()}),e.sourceView.unbind("keyup."+e.widgetName).bind("keyup."+e.widgetName,function(t){e._onSourceViewBlur()}),n.browser.mozilla?n(r).unbind("blur."+e.widgetName).bind("blur."+e.widgetName,function(t){e._onDesignViewBlur(t)}):n(t).blur(function(t){e._onDesignViewBlur(t)}),n(r).unbind("mouseup."+e.widgetName).bind("mouseup."+e.widgetName,function(t){e._onDesignViewMouseUp(t)}).unbind("keydown."+e.widgetName).bind("keydown."+e.widgetName,function(t){e._onDesignViewKeyDown(t)}).unbind("keyup."+e.widgetName).bind("keyup."+e.widgetName,function(t){e._onDesignViewKeyUp(t),e._onDesignViewBlur(t)})},t.prototype._addDefaultFontStyleToDesignView=function(){var e=this,t=e.options,r=e._getDesignViewDocument(),i=t.defaultFontName,s=t.defaultFontSize,o='<style type="text/css"> body {';if(!(i!==""&&i!==null||s!==""&&s!==null))return;i!==""&&i!==null&&(o+="font-family: "+i+";"),t.defaultFontSize!==""&&t.defaultFontSize!==null&&(o+=" font-size: "+s+";"),o+="}</style>",window.setTimeout(function(){n(o).appendTo(n("head",r))},200),e._setFontStyleButtonState(i,Rt),e._setFontStyleButtonState(s,Ut)},t.prototype._setFontStyleButtonState=function(e,t){var r="";if(!e||e===null)return;n.each(this.$ribbon.wijribbon("getDropdownList",t),function(t,n){if(n.toUpperCase()===e.toUpperCase())return r=t,!1}),this.$ribbon.wijribbon(b,r,!0,t)},t.prototype._setDesignModeForFF=function(e){var t=e._getDesignViewDocument();t&&(t.designMode="on")},t.prototype.destroy=function(){var e=this;e.element.html(e._oriContent),e.element.removeAttr("tabindex"),e._oriStyle===undefined?e.element.removeAttr("style"):e.element.attr("style",e._oriStyle),e.dialog&&e.dialog.remove(),e.element.insertBefore(e.editor),e.element.unbind("."+e.widgetName),n(document).unbind("."+e.widgetName+"."+e.id_prefix.replace(/-/g,"")),e.element.removeUniqueId(),e.editor.remove(),e._oriDocOverFlow&&n(document.documentElement).css({overflow:e._oriDocOverFlow}),n.Widget.prototype.destroy.call(e)},t.prototype.showEditorDialog=function(e){switch(e){case lt:case rt:case _t:case At:case Lt:case Ct:case Nt:case wt:case Dt:case K:case Q:case Wt:this._ribbonCommand(e);break;default:i("Cannot find the dialog with command name '"+e+"'!")}},t.prototype.executeEditorAction=function(e,t){this._ribbonCommand(e,t)},t.prototype._isFontSizeCustomized=function(){if(h!==null)return h;var e=this.$ribbon.wijribbon("getDropdownList",Ut),t=[Pt,Ht,Bt,jt,Ft,It,qt];return h=!1,n.each(e,function(e,r){if(n.inArray(e,t)===-1)return h=!0,!1}),h},t.prototype._fontSizeCommand=function(e){var t=this,r=t._getDesignViewDocument(),i,s=4,o="font-size",a=[];t._getDesignViewWindow().getSelection&&(i=t._getDesignViewWindow().getSelection());switch(e){case Pt:s=1;break;case Ht:s=2;break;case Bt:s=3;break;case jt:s=4;break;case Ft:s=5;break;case It:s=6;break;case qt:s=7}t._setIEFocus(),t._isFontSizeCustomized()?t._formatFontSpan(r,o,e):n.browser.msie&&u(n.browser.version)>=9?i&&i.rangeCount>0&&r.execCommand("FontSize",!1,s):r.execCommand("FontSize",!1,s),t.options.mode==="bbcode"&&!n.browser.msie&&t._convertFontStyleToStandTag(),t._addtoUndoBuffer()},t.prototype._fontNameCommand=function(e){var t=this,r=t._getDesignViewDocument(),i,s=t.$ribbon.wijribbon("getDropdownList",Rt),o;t._getDesignViewWindow().getSelection&&(i=t._getDesignViewWindow().getSelection()),n.each(s,function(t,n){if(e===t)return o=n,!1}),t._setIEFocus(),n.browser.msie&&u(n.browser.version)>=9?i&&i.rangeCount>0&&r.execCommand("FontName",!1,o):r.execCommand("FontName",!1,o),t._isFontSizeCustomized()&&n.browser.msie&&t._formatFontSpan(r,"font-family",o),t._addtoUndoBuffer()},t.prototype._formatFontSpan=function(e,t,r){var i=this,s=r,o="fontFamily",u=[];t!=="font-family"&&(s="c1-temp",o="fontSize"),e.execCommand("FontName",!1,s),n.each(n("font[face='"+s+"']",e),function(e,s){var a=i._replaceFontWithSpan(n(s),"face",t,r),f,l;u.push(a),f=n("span."+ds,a);for(l=f.length-1;l>=0;l--)i._removeSpecifiedStyleSpan(n(f[l]),o,t);n.each(a,function(e,r){n.each(n(r).parents("span."+ds),function(e,s){var u=n(s);if(u.children().length>1)return!1;u.text()===n(r).text()&&i._removeSpecifiedStyleSpan(u,o,t)})})}),i._setSelection(u)},t.prototype._replaceFontWithSpan=function(e,t,n,r){e.wrap("<span class = '"+ds+"' style='"+n+":"+r+"'></span>");var i=e.parent();return e.removeAttr(t),/<font\s*>/ig.test(i.html())&&(i.html(e.html()),e.remove()),i},t.prototype._removeSpecifiedStyleSpan=function(e,t,r){var i,s=!0;e[0].style[t]!==""&&e.css(r,""),i=e.attr("style"),i&&n.each(i.split(";"),function(e,t){var i=n.trim(t).toLowerCase();if(i!==""&&i.indexOf(r)!==-1)return s=!1,!1}),s&&e.replaceWith(e.html())},t.prototype._removeFormat=function(){var e=this,t=e._getDesignViewDocument(),r={};t.execCommand(it,!1,null),e._isFontSizeCustomized()&&n.browser.msie&&e._removeFormatForIE(t),e._addtoUndoBuffer(),r[G]=!1,r[Y]=!1,r[Z]=!1,r[et]=!1,r[tt]=!1,r[nt]=!1,r[X]=!1,r[V]=!1,r[q]=!1,r[R]=!1,r[U]=!1,r[z]=!1,e.$ribbon.wijribbon(w,r)},t.prototype._removeFormatForIE=function(e){var t=e.selection.createRange(),r=t.htmlText,i=t.text,s=0,o=n(t.parentElement()),u=n(e.body),a="",f="",l="__c1temp",c="c1-temp",h="<span class='"+c+"'>"+l+"</span>",p,d,v,m,g,y;o.addClass("c1-app-parent"),t.pasteHTML(h),s=u.text().indexOf(l),p=n("span."+c,e),d=p,p.parentsUntil("body").each(function(e){if(n(this).is(".c1-app-parent"))return!1;d=n(this)}),p.html(r),v=n("span."+ds,p);for(g=v.length-1;g>=0;g--)m=n(v[g]),m.replaceWith(m.html());d.is("."+c)||d.after(p),n.each(d.parents("span."+ds),function(e,t){a+="</span>",f="<span class='"+ds+"' style = '"+n(t).attr("style")+"'>"+f}),r=p.html(),p.replaceWith(l),y=u.html().split(l),u.html(y[0]+a+r+f+y[1]),v=n("span."+ds,e);for(g=v.length-1;g>=0;g--)m=n(v[g]),m.text()===""&&m.replaceWith(m.html());n(".c1-app-parent",e).removeClass("c1-app-parent"),this._setSelection(null,s,i.length)},t.prototype._toggleFullScreen=function(){var e=this,t=e.options;t.fullScreenMode=!t.fullScreenMode,e._setFullScreen(t.fullScreenMode),e.$modes.wijribbon(b,mt,t.fullScreenMode),e.$modes.wijribbon("removeButtonHoverState",mt)},t.prototype._setFullScreen=function(e){var t=this,r=1,i=t._getHeader(),o=t._getFooter(),c=t._getContent(),h=t.options.fullScreenContainerSelector,p=n(h),d=t._getDesignViewText(),v,m,g;e?(p.length===0&&(p=n(s),h="body",t._oriDocOverFlow=n(document.documentElement).css("overflow"),n(document.documentElement).css({overflow:"hidden"}),n.browser.mozilla||window.scrollTo(0,0),n(s).bind("resize.wijeditor",function(){t._fullscreenOnWindowResize()})),v=p.width(),m=p.height()-2*r,a=t.editor.width(),f=t.editor.height(),l||(l=t.editor.parent()),t._replacedDiv||(t._replacedDiv=n("<div />")),t.editor.after(t._replacedDiv),n(h).append(t.editor),t.editor.css({width:v,height:m,position:""}).addClass(wr),t.$ribbon.wijribbon("updateRibbonSize")):(t._replacedDiv.after(t.editor).remove(),t.editor.css({width:a,height:f,position:"static"}).removeClass(wr),t.options.fullScreenContainerSelector||n(document.documentElement).css({overflow:t._oriDocOverFlow}),n(s).unbind("resize.wijeditor"),t.$ribbon.wijribbon("updateRibbonSize")),g=t.editor.height()-i.outerHeight(!0)-o.outerHeight(!0),c.height(g).wijsplitter("refresh"),t._addHandlerToDesignView(),t._addDefaultFontStyleToDesignView(),t._createWijMenu(),n.browser.msie&&window.setTimeout(function(){var e=t._getDesignViewDocument();t.options.mode==="bbcode"&&(d=t._convertHtmlToBBCode(n.trim(d))),t._setDesignViewText(d),e&&e.body&&t.designView.is(":visible")&&t._restoreSelectionForIE(!0),u(n.browser.version)>=9&&t.sourceView.val(d)},40),t.$modes.data("wijmo-wijribbon")&&t.$modes.wijribbon(b,mt,e)},t.prototype._createWijMenu=function(){var e=this,t=e._getDesignViewDocument();e.contextMenu&&e.contextMenu[e._contextMenuWidgetName()]({orientation:"vertical",trigger:e.designView,triggerEvent:"rtclick",showing:function(t,r){n.browser.msie&&e._saveSelectionForIE();var i=e.designView.offset(),s=n(n(e.designView)[0].contentWindow).scrollLeft(),o=n(n(e.designView)[0].contentWindow).scrollTop(),u=i.left+2-s,a=i.top-o;r.options.position={my:"left+"+u+" "+"top+"+a,at:"right top",of:t,collision:"none none"}},animation:{animated:"fade"},select:function(t,n){e._setIESelection(),e._contextMenuItemClick(t,n),e.contextMenu[e._contextMenuWidgetName()]("deactivate")}})},t.prototype._fullscreenOnWindowResize=function(){var e=this,t=e._getHeader(),r=e._getFooter(),i=e._getContent(),s,o=n(window).width(),u=n(window).height();e.editor.css({width:o,height:u}),s=e.editor.height()-t.height()-r.height(),i.height(s),i.data("wijmo-wijsplitter")&&i.wijsplitter("refresh")},t.prototype._saveText=function(e){},t.prototype._doSpellCheck=function(){},t.prototype._ribbonCommand=function(e,t,r){var i=this,s=i.options.disabled,o=i._getDesignViewDocument(),u=i._getContent(),a,f=u.height()/2,l,c,h;if(t===Rt){i._fontNameCommand(e),i._onDesignViewBlur(null);return}if(t===Ut){i._fontSizeCommand(e),i._onDesignViewBlur(null);return}!i.editor.hasClass("ui-helper-hidden-accessible")&&!s&&(r?setTimeout(function(){i._setIEFocus()},0):n.browser.msie&&i.focus());switch(e){case zt:n.browser.msie?(o.execCommand("FormatBlock",!1,"<ADDRESS>"),i._isIE11&&o.getSelection?(a=o.getSelection(),a&&a.anchorNode&&(h=n(a.anchorNode).closest("address"))):(h=o.selection.createRange(),h=n(h.parentElement()).closest("address")),h.length&&(h.replaceWith("<blockquote>"+h.html()+"</blockquote>"),o.body.innerHTML=o.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<BLOCKQUOTE>/gi,"<BLOCKQUOTE>"),o.body.innerHTML=o.body.innerHTML.replace(/<\/BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"</BLOCKQUOTE>"),o.body.innerHTML=o.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,""))):o.execCommand("FormatBlock",!1,"<BLOCKQUOTE>"),i._addtoUndoBuffer(),i._setFocusNotIE();break;case E:l=i._generateUniqueName("form"),i.insertHTML('<form id="'+l+'" name="'+l+'" method="post">'+l+"</form>"),i._setFocusNotIE();break;case S:l=i._generateUniqueName("image"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="image"'+' value="'+l+'"/>'),i._setFocusNotIE();break;case x:l=i._generateUniqueName("textarea"),i.insertHTML('<textarea id="'+l+'" name="'+l+'" rows="4" cols="48"></textarea>'),i._setFocusNotIE();break;case T:l=i._generateUniqueName("button"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="button"'+' value="'+l+'"/>'),i._setFocusNotIE();break;case N:l=i._generateUniqueName("textbox"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="text"'+' value="'+l+'"/>'),i._setFocusNotIE();break;case C:l=i._generateUniqueName("list"),i.insertHTML('<select id="'+l+'" name="'+l+'" style="width: 120px" size="8"></select>'),i._setFocusNotIE();break;case k:l=i._generateUniqueName("password"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="password" value="'+l+'"/>'),i._setFocusNotIE();break;case L:l=i._generateUniqueName("dropdown"),i.insertHTML('<select id="'+l+'" name="'+l+'"></select>'),i._setFocusNotIE();break;case A:l=i._generateUniqueName("hidden"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="hidden" value="'+l+'" />'),i._setFocusNotIE();break;case O:l=i._generateUniqueName("radiobox"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="radio"'+' value="'+l+'">'+'<label for="'+l+'">'+l+"</label></input>"),i._setFocusNotIE();break;case M:l=i._generateUniqueName("checkbox"),i.insertHTML('<input id="'+l+'" name="'+l+'" type="checkbox"'+' value="'+l+'">'+'<label for="'+l+'">'+l+"</label></input>"),i._setFocusNotIE();break;case _:case D:case P:case H:case B:case j:case F:case I:i._tableAction(e);break;case W:i._toggleTableBorders();break;case tt:try{o.queryCommandState(nt)&&(o.execCommand(nt,!1,null),i.$ribbon.wijribbon(b,nt,!1))}catch(p){}o.execCommand(tt,!1,null),i._addtoUndoBuffer(),i._setFocusNotIE();break;case nt:try{o.queryCommandState(tt)&&(o.execCommand(tt,!1,null),i.$ribbon.wijribbon(b,tt,!1))}catch(d){}o.execCommand(nt,!1,null),i._addtoUndoBuffer(),i._setFocusNotIE();break;case it:i._removeFormat(),i._setFocusNotIE();break;case st:i.insertHTML("<br/>"),i._setFocusNotIE();break;case ot:c=i._getSelectedContent();if(!c||c==="")c="&nbsp;";i.insertHTML("<p>"+c+"</p>"),i._setFocusNotIE();break;case ut:i.insertHTML('<div title="Print Page Break" style="font-size:1px;page-break-before:always;vertical-align:middle;height:1px;background-color:#c0c0c0">&nbsp;</div>'),i._setFocusNotIE();break;case mt:i._storeSelectionForIE(),i._toggleFullScreen();break;case gt:i._undoAction(),i._setFocusNotIE();break;case yt:i._redoAction(),i._setFocusNotIE();break;case Et:i._execCut(),i._setFocusNotIE();break;case St:i._execCopy();break;case xt:i._execPaste();break;case kt:i.insertDateAndTime(),i._setFocusNotIE();break;case ht:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(g,vt,!0).wijribbon(b,ht,!0),i.$ribbon.wijribbon("option","disabled",!1),u.wijsplitter("option","panel2",{collapsed:!0}),i._restoreSelectionForIE();break;case pt:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(g,vt,!0).wijribbon(b,pt,!0),i.$ribbon.wijribbon("option","disabled",!1),u.wijsplitter("option",{splitterDistance:f,panel1:{collapsed:!1},panel2:{collapsed:!1}}),i._restoreSelectionForIE();break;case dt:i.$modes.data("wijmo-wijribbon")&&i.$modes.wijribbon(g,vt,!1).wijribbon(b,dt,!0),i._storeSelectionForIE(),i.$ribbon.wijribbon("option","disabled",!0),u.wijsplitter("option","panel1",{collapsed:!0}),n.browser.msie&&!s&&i.sourceView.focus();break;case vt:u.wijsplitter("option","panel1").collapsed&&i._toggleWordWrap();break;case K:i._saveSelectionForIE(),i._createDialog(this.localizeString("backColorDialogTitle","Set BackColor"),i._getDialogRes_BackColor(),i.initBackColorDialog);break;case Q:i._saveSelectionForIE(),i._createDialog(this.localizeString("foreColorDialogTitle","Set ForeColor"),i._getDialogRes_ForeColor(),i.initForeColorDialog);break;case lt:i._saveSelectionForIE(),i._createDialog(this.localizeString("insertTableDialogTitle","Insert Table"),i._getDialogRes_Table(),i.initInsertTableDialog);break;case ct:i._getEditableTable()&&i._createDialog(this.localizeString("editTableDialogTitle","Edit Table"),i._getDialogRes_Table(),i.initEditTableDialog);break;case bt:i._createDialog(this.localizeString("previewDialogPreview","Preview"),i._getDialogRes_Preview(),i.initPreviewDialog);break;case wt:i._createDialog(this.localizeString("cleanUpDialogTitle","Clean up source HTML document"),i._getDialogRes_CleanUp(),i.initCleanUpDialog);break;case Nt:i._saveSelectionForIE(),i._createDialog(this.localizeString("mediaDialogTitle","Insert media"),i._getDialogRes_Media(),i.initMediaDialog);break;case Ct:i._saveSelectionForIE(),i._createDialog(this.localizeString("specialCharacterDialogTitle","Insert special character"),i._getDialogRes_SpecialCharacter(),i.initSpecialCharacterDialog);break;case Lt:i._createDialog(this.localizeString("findAndReplaceTitle","Find and replace"),i._getDialogRes_FindAndReplace(),i.initFindDialog);break;case At:m=i._getSelectedElement(),i._createDialog(this.localizeString("tagInspectorDialogTitle","Tag Inspector"),i._getDialogRes_TagInspector(),i.initTagInspectorDialog);break;case rt:i._saveSelectionForIE(),i._createDialog(this.localizeString("templateDialogApplyTemplate","Apply Template"),i._getDialogRes_Template(),i.initTemplateDialog);break;case _t:i._saveSelectionForIE(),i._createDialog(this.localizeString("imageEditorDialogImageBrowser","Image Browser"),i._getDialogRes_ImageBrowser(),i.initImageBrowserDialog);break;case Dt:i._storeSelectionForIE(),i._createDialog(this.localizeString("hyperLinkDialogInserthyperLink","Insert hyperLink"),i._getDialogRes_Link(),i.initHyperLinkDialog);break;case Wt:i._saveSelectionForIE(),i._createDialog("Insert Code",i._getDialogRes_Code(),i.initInsertCodeDialog);break;case q:case R:case U:case z:case $:case J:case G:case Y:case et:case X:case V:case Z:case at:case Tt:o.execCommand(e,!1,null),i.options.mode==="bbcode"&&!n.browser.msie&&i._convertStyleToStandTag(),i._addtoUndoBuffer(),i._setFocusNotIE();break;case Ot:i._saveText();break;case Mt:i._doSpellCheck()}i._onDesignViewBlur(null)},t.prototype._createDialog=function(e,t,r){var i=this,s,o=i.dialog;o.html("").undelegate(i.widgetName).undelegate("."+i.widgetName).append(t),i.subDialog&&i.subDialog.html("").undelegate(i.widgetName).undelegate("."+i.widgetName),s={width:"auto",height:"auto",modal:!0,title:e,position:{my:"center",at:"center",of:window},resizable:!1,captionButtons:{pin:{visible:!1},refresh:{visible:!1},toggle:{visible:!1},minimize:{visible:!1},maximize:{visible:!1}}},o.data("wijmo-wijdialog")?(o.wijdialog("reset"),o.wijdialog("option",{width:"auto",height:"auto",title:e})):n.browser.msie&&u(n.browser.version)===6?window.setTimeout(function(){o.wijdialog(s)},0):o.wijdialog(s),i._adjustDialogLayoutForIE7(),r&&r.call(i),o.wijdialog("open")},t.prototype._adjustDialogLayoutForIE7=function(){var e=this.dialog;n.browser.msie&&(/^7\.[0-9]+/.test(n.browser.version)||document.documentMode===7)&&e.wijdialog("option","width",e.parent().width())},t.prototype._contextMenuItemClick=function(e,t,n){var r=this,i=t.item.element.attr("_c1buttoncmd");switch(i){case Et:r._execCut();break;case St:r._execCopy();break;case xt:r.focus(),r._execPaste()}},t.prototype._execCut=function(){var e=this,t=e._getDesignViewDocument();n.browser.safari?i(this.localizeString("errorMessageCutError","This function is not supported in current browser.  Plesse use (Ctrl + X).")):n.browser.msie?(t.execCommand("Cut",!1,null),e._addtoUndoBuffer()):(e._execCopy(),e._deleteSelectionContent(),e._addtoUndoBuffer())},t.prototype._execCopy=function(){var e=this,t=e._getDesignViewDocument();n.browser.safari?i(this.localizeString("errorMessageCopyError","This function is not supported in current browser. Plesse use (Ctrl + C).")):n.browser.msie?(t.execCommand("Copy",!1,null),e._addtoUndoBuffer()):e._copyToClipboard(e._getSelectedContent())},t.prototype._execPaste=function(){var e=this,t,r=e._getDesignViewDocument();if(n.browser.safari)i(this.localizeString("errorMessagePasteError","This function is not supported in current browser. Plesse use (Ctrl + V)."));else if(n.browser.msie)r.execCommand("Paste",!1,null),e._addtoUndoBuffer();else try{t=e._copyFromClipboard(),t&&t!==""&&e.insertHTML(t)}catch(s){}},t.prototype._getFontSizeCollection=function(){return{"10px":Pt,"13px":Ht,"16px":Bt,"18px":jt,"24px":Ft,"32px":It,"48px":qt,1:Pt,2:Ht,3:Bt,4:jt,5:Ft,6:It,7:qt}},t.prototype._updateButtonStates=function(e){var t=this,r=t._getDesignViewDocument(),i,s,o={},u=[G,Y,Z,et,tt,nt,X,V,q,R,U,z],a,f=e.target,l=n(f);n.each(u,function(e,t){o[t]=r.queryCommandState(t)}),t.$ribbon.wijribbon(w,o),i=t._queryCommandValue(Rt)||"",n.each(t.$ribbon.wijribbon("getDropdownList",Rt),function(e,t){if(t.toUpperCase()===i.toUpperCase())return s=e,!1}),t.$ribbon.wijribbon(b,s,!0,Rt),t._isFontSizeCustomized()?(l.is("span")?s=f.style.fontSize:s="",s===""&&(a=l.parents("span."+ds),n.each(a,function(e,t){s=t.style.fontSize;if(s&&s!=="")return!1})),s===""&&(s=l.css("font-size"))):(i=t._queryCommandValue(Ut)||"",i===""&&(i=l.css("font-size")),n.each(t._getFontSizeCollection(),function(e,t){if(e.toString()===i.toString())return s=t,!1})),t.$ribbon.wijribbon(b,s,!0,Ut)},t.prototype._queryCommandValue=function(e){var t=this._getDesignViewDocument();try{if(!t.queryCommandEnabled(e))return null}catch(n){return null}try{return t.queryCommandValue(e)}catch(r){}return null},t.prototype._escActionAssociated=function(){var e=this,t=e._getDesignViewWindow();t&&t.document&&t.document.selection!==undefined&&t.document.selection.empty(),t&&t.getSelection!==undefined&&t.getSelection().removeAllRanges(),e._hideAllDropdownsMenus()},t.prototype._hideAllDropdownsMenus=function(){var e=this;e.contextMenu&&e.contextMenu[e._contextMenuWidgetName()]("hideAllMenus"),e.$ribbon.wijribbon("hideDropdown",Rt).wijribbon("hideDropdown",Ut).wijribbon("hideDropdown",ft)},t.prototype._onDesignViewKeyDown=function(e){var t=this,n;t._setSaveBtnEnabled();try{if(e.ctrlKey)n=String.fromCharCode(e.keyCode).toLowerCase();else switch(e.keyCode){case 27:t._escActionAssociated();break;case 13:case 46:t._addtoUndoBuffer(),t._continueSavingInputTextForUndo=!1;break;default:t._continueSavingInputTextForUndo=!0}}catch(r){}},t.prototype._onDesignViewKeyUp=function(e){var t=this,r;if(e.keyCode===37||e.keyCode===38||e.keyCode===39||e.keyCode===40||e.keyCode===33||e.keyCode===34||e.keyCode===35||e.keyCode===36)n.browser.msie&&n.browser.version==="6.0"?(t._keyTimeoutHandlerIE6&&(clearTimeout(t._keyTimeoutHandlerIE6),t._keyTimeoutHandlerIE6=null),t._keyTimeoutHandlerIE6=window.setTimeout(function(){t._updateButtonStates(e)},300)):t._updateButtonStates(e);if(e.ctrlKey){r=String.fromCharCode(e.keyCode).toLowerCase();switch(r){case"y":t._redoAction(),e.preventDefault(),e.stopPropagation();break;case"z":t._undoAction(),e.preventDefault(),e.stopPropagation();break;case"x":case"v":t._addtoUndoBuffer(),t._continueSavingInputTextForUndo=!1}}},t.prototype._onDesignViewMouseUp=function(e){var t=this,r;if(e.button===2)return;t._updateButtonStates(e),t._refreshPathSelector(),t._hideAllDropdownsMenus(),t.editor.mouseup();if(n.browser.msie){r=n(e.target).closest("a");if(e.ctrlKey&&r.length>0)try{r.focus(),s.open(r[0].href,"_blank")}catch(i){}}},t.prototype._onDesignViewBlur=function(e){var t=this,r=t.options,i;i=t._getDesignViewText(),r.mode==="bbcode"&&(i=t._convertHtmlToBBCode(n.trim(i))),t.sourceView.val(i),t._onTextChange(e),r.text=i},t.prototype._onTextChange=function(e){var t=this;t._continueSavingInputTextForUndo&&(t._addtoUndoBuffer(),t._continueSavingInputTextForUndo=!1),t._trigger("textChanged",e,{text:t.options.text})},t.prototype._onSourceViewBlur=function(){var e=this,t;t=e.sourceView.val(),e._setDesignViewText(t),e.options.text=t},t.prototype._convertBBCodeToHtml=function(e){return e?(e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),n.browser.msie&&(e=e.replace(/&lt;p&gt;/gim,"<p>"),e=e.replace(/&lt;\/p&gt;/gim,"</p>")),e=e.replace(/(?:\r\n|\n|\r)/g,"<br>"),e=e.replace(/\[EMAIL\]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$1</a>'),e=e.replace(/\[EMAIL\=([^\]]+)]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$2</a>'),e=e.replace(/\[URL\]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$1</a>'),e=e.replace(/\[URL\=([^\]]+)]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$2</a>'),e=e.replace(/\[B\]/gim,"<b>"),e=e.replace(/\[\/B\]/gim,"</b>"),e=e.replace(/\[I\]/gim,"<i>"),e=e.replace(/\[\/I\]/gim,"</i>"),e=e.replace(/\[S\]/gim,"<strike>"),e=e.replace(/\[\/S\]/gim,"</strike>"),e=e.replace(/\[U\]/gim,"<u>"),e=e.replace(/\[\/U\]/gim,"</u>"),e=e.replace(/\[IMG height=(.*?) width=(.*?)](.+?)\[\/IMG\]/gim,'<img height="$1" width = "$2" src="$3"/>'),e=e.replace(/\[BLOCK\]/gim,"<blockquote>"),e=e.replace(/\[\/BLOCK\]/gim,"</blockquote>"),e=e.replace(/\[LIST\=1\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ol><li>$1</li></ol>"),e=e.replace(/\[LIST\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ul><li>$1</li></ul>"),e=e.replace(/\[\*\]/gim,"</li><li>"),e=e.replace(/\[size=([^\]]*?)\]/gi,'<font size="$1">'),e=e.replace(/\[\/size\]/gim,"</font>"),e=e.replace(/\[color=([^\]]*?)\]/gi,'<font color="$1">'),e=e.replace(/\[\/color\]/gim,"</font>"),e):""},t.prototype._replaceComplexHtml=function(e){var t,r,i,s,o=n("<div/>").html(e);t=n("img",o),n.each(t,function(){i="[IMG height="+n(this).height()+" width="+n(this).width()+"]"+n(this).attr("src").toString()+"[/IMG]",n(this).replaceWith(i)}),r=n("font",o);for(s=r.length-1;s>=0;s--)n(r[s]).attr("color")&&n(n(r[s])).attr("size")?i="[Color="+n(n(r[s])).attr("color")+"]"+"[Size="+n(n(r[s])).attr("size")+"]"+n(n(r[s])).html()+"[/Size][/Color]":n(n(r[s])).attr("color")&&!n(n(r[s])).attr("size")?i="[Color="+n(n(r[s])).attr("color")+"] "+n(n(r[s])).html()+"[/Color]":n(n(r[s])).attr("size")&&!n(n(r[s])).attr("color")&&(i="[Size="+n(n(r[s])).attr("size")+"]"+n(n(r[s])).html()+"[/Size]"),n(n(r[s])).replaceWith(i);return o.html()},t.prototype._convertHtmlToBBCode=function(e){var t=this;if(e==="")return;return e=t._replaceComplexHtml(e),e=e.replace(/<br(?=[ \/>]).*?>/gim,"\r\n"),n.browser.msie&&(e=e.replace(/<p>/gim,"&lt;p&gt;"),e=e.replace(/<\/p>/gim,"&lt;/p&gt;")),e=e.replace(/<a .*?href=(["'])(.+?)\1.*?>(.+?)<\/a>/gi,"[URL=$2]$3[/URL]"),e=e.replace(/<a .*?href=(["'])mailto:(.+?)\1.*?>(.+?)<\/a>/gi,"[EMAIL=$2]$3[/EMAIL]"),e=e.replace(/<(?:b|strong)>/gim,"[B]"),e=e.replace(/<\/(?:b|strong)>/gim,"[/B]"),e=e.replace(/<(?:i|em)>/gim,"[I]"),e=e.replace(/<\/(?:i|em)>/gim,"[/I]"),e=e.replace(/<(?:strike|s)>/gim,"[S]"),e=e.replace(/<\/(?:strike|s)>/gim,"[/S]"),e=e.replace(/<u>/gim,"[U]"),e=e.replace(/<\/u>/gim,"[/U]"),e=e.replace(/<blockquote.*?\>/gim,"[BLOCK]"),e=e.replace(/\s{0,}<\/blockquote>/gim,"[/BLOCK]"),e=e.replace(/(?:\r\n|\r|\n){0,1}<(?:ol)>[\s]*/gim,"[LIST=1]"),e=e.replace(/<\/(?:ol)>/gim,"[/LIST]"),e=e.replace(/(?:\r\n|\r|\n){0,1}\<(?:ul)>[\s]*/gim,"[LIST]"),e=e.replace(/<\/(?:ul)>/gim,"[/LIST]"),e=e.replace(/\s{0,}<li\s{0,1}.*?>([\s\S]*?)\n{0,}\s{0,}<\/li>/gim,"[*]$1"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/(<[^>]+>)/gm,""),e},t.prototype._convertFontStyleToStandTag=function(){var e=this,t=e._getDesignViewDocument(),r=n(t.body),i,s,o=n("[style*='color: ']",r);o.length!==0&&(i=o,s="<font color='"+e._getWebColorFromRgb(o.css("color"))+"'></font>"),i&&n.each(i,function(e){n(this).is("span")?n(this).replaceWith(n(s).html(n(this).html())):n(this).is("font")&&n(this).attr("size")&&n(this).removeAttr("style").html(n(s).html())})},t.prototype._convertStyleToStandTag=function(){var e=this,t=e._getDesignViewDocument(),r=n(t.body),i,s,o,u=n("[style*='font-weight: bold;']",r),a=n("[style*='font-style: italic;']",r),f=n("[style*='text-decoration: line-through;']",r),l=n("[style*='text-decoration: underline;']",r);u.length!==0?(i=u,s="<b></b>",o="font-weight"):a.length!==0?(i=a,s="<i></i>",o="font-style"):f.length!==0?(i=f,s="<strike></strikes>",o="text-decoration"):l.length!==0&&(i=l,s="<u></u>",o="text-decoration"),i&&n.each(i,function(e){n(this).is("span")&&this.style.fontSize===""?n(this).replaceWith(n(s).html(n(this).html())):n(this).removeAttr("style").html(n(s).html())})},t.prototype._getWebColorFromRgb=function(e){var t=this,n;return e.indexOf("rgb(")===0&&(n=e.substring(4,e.length-1).split(","),e=t._convertToWebColor(u(n[0]),u(n[1]),u(n[2]))),e},t.prototype._updateList=function(e,t){var r;n("option",t).remove();for(r in e)e[r]&&t.append("<option>"+r+"</option>")},t.prototype._triggerEvent=function(e,t){var n=this,r=n.options[e];return r&&typeof r=="function"?r.call(n,t):r},t.prototype._closeDialog=function(){this.dialog.wijdialog("close"),this.rangeSelection=null,this.focus()},t.prototype._onTemplateList=function(e){return this._triggerEvent("templateList",e)},t.prototype.updateTemplateList=function(e,t){var r=this,i=t||n("select",r.dialog);r._updateList(e,i),r._templateList=e},t.prototype.initTemplateDialog=function(){var e=this,t=e.dialog,r=n("select",t),i=e._onTemplateList();t.delegate("select","change."+e.widgetName,function(){e.templateListOnChanged()}).delegate("."+Yr,"click."+e.widgetName,function(){e.deleteTemplate()}).delegate("."+Zr,"click."+e.widgetName,function(){e.saveTemplate()}).delegate(vs,"click."+e.widgetName,function(){e.applyTemplate()}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()});if(!i){i=e._templateList;if(!i)return}e.updateTemplateList(i,r)},t.prototype.templateListOnChanged=function(){var e=this,t=e.dialog,r=n("select",t).val(),i=n("iframe",t),s=e._templateList,o;if(!s)return;o=s[r],o.src&&i.attr("src",o.src+"?d="+(new Date).getMilliseconds().toString()),o.text&&i.length>0&&i[0].contentWindow.document.write(o.text),r&&(n("."+Vr,t).html(r),n("."+Kr,t).val(r)),o.desc&&(n("."+$r,t).html(o.desc),n("."+Qr,t).val(o.desc))},t.prototype._onSaveTemplate=function(e){this._triggerEvent("saveTemplate",e)},t.prototype.saveTemplate=function(){var e=this,t=e.dialog,r=n("."+Kr,t).val(),s=n("."+Qr,t).val(),o=e._templateList,u=this._getDesignViewText();if(n.trim(r)===""){i(this.localizeString("errorMessageTemplateNameError","Please input a template name!"));return}o||(e._templateList=[],o=e._templateList),o[r]||n("select",t).append("<option>"+r+"</option>"),o[r]={desc:s,text:u},e._onSaveTemplate({name:r,desc:s,text:u})},t.prototype._onDeleteTemplate=function(e){this._triggerEvent("deleteTemplate",e)},t.prototype.deleteTemplate=function(){var e=this,t=e.dialog,r=n("select",t),s=r.val(),o=e._templateList;if(n.trim(s)===""){i(this.localizeString("errorMessageTemplateFileError","Please select a template file."));return}n("option:selected",r).remove(),n("iframe",t).attr("src","about:blank"),n("."+Vr,t).empty(),n("."+Kr,t).val(""),n("."+$r,t).empty(),n("."+Qr,t).val(""),delete o[s],e._onDeleteTemplate(s)},t.prototype.applyTemplate=function(){var e=this,t=e.dialog,r=n("select",t),s=r.val(),o=n("iframe",t)[0],u=n("."+Kr,t).val(),a=o.contentWindow.document.body.innerHTML;if(n.trim(u)===""||n.trim(s)===""){i(this.localizeString("errorMessageValidTemplateFileError","Please select a valid template file."));return}e._setDesignViewText(a),e._addtoUndoBuffer(),e._setSaveBtnEnabled(),e._closeDialog()},t.prototype._onImageList=function(){var e=this,t=e.options.imageList;return t&&typeof t=="function"?t.call(e):t},t.prototype.updateImageList=function(e,t){var r=this,i=r.dialog,s=t||n("select",i),o=n("."+Ar,i);r._updateList(e,s),r._imgList=e;if(!e){o.addClass(jr);return}o.removeClass(jr)},t.prototype.initImageBrowserDialog=function(){var e=this,t=e.dialog,r=e._onImageList();n("img",t).hide(),t.delegate("select","change."+e.widgetName,function(){e.imageListOnChanged()}).delegate(vs,"click."+e.widgetName,function(t){e.submitInsertImageDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()}),n("."+_r+" input",t).bind("change."+e.widgetName,function(){e.imageUrlChanged(this)});if(!r){r=e._imgList;if(!r){n("."+Ar,t).addClass(jr);return}}e.updateImageList(r,n("select",t))},t.prototype.imageUrlChanged=function(e){var t=this,r=t.dialog;n("img",this.dialog).attr("src",n(e).val()+"?"+(new Date).getTime()).show().bind("load",function(){n("."+Pr+" input",r).val(n("img",r).width().toString()),n("."+Hr+" input",r).val(n("img",r).height().toString())})},t.prototype.imageListOnChanged=function(){var e=this,t=e.dialog,r=n("select",t).val(),i=e._imgList,o;if(!i)return;o=i[r],n("img",t).prop("src",o).show(),n("."+_r+" input",t).prop("value",o),s.setTimeout(function(){n("."+Pr+" input",t).val(n("img",t).width().toString()),n("."+Hr+" input",t).val(n("img",t).height().toString())},200)},t.prototype.submitInsertImageDialog=function(){var e=this,t,r=e.dialog,s=n("."+_r+" input",r).val(),o=n("."+Dr+" input",r).val(),u=n("."+Pr+" input",r).val(),a=n("."+Hr+" input",r).val(),f=n("."+Br+" input",r).val();if(n.trim(s)===""){i(this.localizeString("errorMessageSelectImageError","Please select a image."));return}if(!e._isNumeric(u)){i(this.localizeString("errorMessageImageWidthError","Please input a number for 'Image width' textbox."));return}if(!e._isNumeric(a)){i(this.localizeString("errorMessageImageHeightError","Please input a number for 'Image height' textbox."));return}e.focus(),n.browser.msie?(t='<img src="'+s+'" alt="'+o+'" style="width:'+u+"px;height:"+a+"px",e.options.mode!=="bbcode"&&f!==null&&f!==undefined&&f.length>0&&(t+=";"+f)):(t='<img src="'+s+'" alt="'+o+'" width="'+u+'" height="'+a,e.options.mode!=="bbcode"&&(t+='" style="'+f)),t+='"/>',e.insertHTML(t),e._closeDialog()},t.prototype.initHyperLinkDialog=function(){var e=this,t=e.dialog,r=e.getLinkHrefField(),i=n("."+li,t),o,u,a,f=n("."+ti+" input",t);t.one("wijdialogclose",function(){e._restoreSelectionForIE()}),t.delegate(vs,"click."+e.widgetName,function(t){e.submitHyperLinkDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()}).delegate("."+ri,"change."+e.widgetName,function(){e.anchorListOnChanged(this)}).delegate("."+ni+">div","click."+e.widgetName,function(){e.radioListOnChanged()}).delegate("."+ci+">div","click."+e.widgetName,function(){e.linkIconTypeOnChanged()}).delegate("."+ui+" input","change."+e.widgetName,function(){e.tempImg=n('<img src="'+n("."+ui+" input",t).val()+'">').appendTo("body"),s.setTimeout(function(){n("."+ai+" input",t).val(e.tempImg.width().toString()),n("."+fi+" input",t).val(e.tempImg.height().toString()),e.tempImg.remove(),e.tempImg=undefined},200)});try{f.val(r),u=e._getLinkInnerHTML()}catch(l){}u&&u.substring(0,3)==="<img"?(o=!0,a=n(u)):o=!1,o?(i.show(),n("."+ii+" textarea",t).hide(),n("."+ui+" input",t).val(a.attr("src")),n("."+ai+" input",t).val(a.attr("width")),n("."+fi+" input",t).val(a.attr("heigth"))):(n("."+ii+" textarea",t).show(),i.hide(),n("."+ii+" textarea",t).val(u)),n("."+oi+" input",t).val(e._getLinkCssField()),n("."+si+" select",t).val(e._getLinkTarget()),n("#radAnchor",t).prop("checked",!0),n("#radLinkTypeIsText",t).prop("checked",!0),r.length>6&&(r.substring(0,4)==="http"?n("#radUrl",t).prop("checked",!0):r.substring(0,6)==="mailto"?n("#radMail",t).prop("checked",!0):r.substring(0,1)==="#"?n("#radAnchor",t).prop("checked",!0):n("#radFile",t).prop("checked",!0)),a=undefined},t.prototype._getLinkInnerHTML=function(){var e=this,t,n;e.focus(),t=e._getInspectElement(),e._hyperlinkTextStyle="";try{n=e._getHyperLinkElement(t);if(n&&n.tagName==="A")return t.innerHTML!==n.innerHTML&&(e._hyperlinkTextStyle=n.innerHTML.replace(t.innerHTML,"{0}")),t.innerHTML||""}catch(r){}return""},t.prototype.getLinkHrefField=function(){var e=this,t;e.focus(),t=e._getInspectElement();try{t=e._getHyperLinkElement(t);if(t&&t.tagName==="A")return e.fixAbsoluteUrlsIfNeeded(t.href||"")}catch(n){}return""},t.prototype._getLinkTarget=function(){var e=this,t;e.focus(),t=e._getInspectElement();try{t=e._getHyperLinkElement(t);if(t&&t.tagName==="A")return t.target||""}catch(n){}return""},t.prototype._getLinkCssField=function(){var e=this,t;e.focus(),t=e._getInspectElement();try{t=e._getHyperLinkElement(t);if(t&&t.tagName==="A")return t.style.cssText||""}catch(n){}return""},t.prototype.submitHyperLinkDialog=function(){var e=this,t=e.dialog,r=n("#radUrl",t),s=n("#radAnchor",t),o=n("#radMail",t),u=n("."+ti+" input",t),a=n("."+ii+" textarea",t),f=n("."+oi+" input",t),l=n("."+si+" select",t),c=u.val(),h=a.val(),p=l.val(),d=n("#radLinkTypeIsImage",t),v=d.prop("checked"),m=n("."+ui+" input",t).val(),g=n("."+ai+" input",t).val(),y=n("."+fi+" input",t).val(),b=f.val();if(c===""){i(this.localizeString("errorMessageAddressError","Please input address!"));return}if(h===""&&!v){i(this.localizeString("errorMessageDisplayTextError","Please input display text!"));return}if(m===""&&v){i(this.localizeString("errorMessageHyperLinkImageUrlError","Please input image url!"));return}if(!e._isNumeric(g)&&v){i(this.localizeString("errorMessageHyperLinkImageWidthError","Please input correct image width!"));return}if(!e._isNumeric(y)&&v){i(this.localizeString("errorMessageHyperLinkImageHeightError","Please input correct image height!"));return}if(r.prop("checked")&&!e._isUrl(c)){i(this.localizeString("errorMessageHyperLinkUrl","Please input correct url!"));return}if(s.prop("checked")&&!e._isAnchor(c)){i(this.localizeString("errorMessageHyperLinkAnchor","Please input correct anchor!"));return}if(o.prop("checked")&&!e._isEmail(c)){i(this.localizeString("errorMessageHyperLinkEmail","Please input correct email!"));return}v&&(h='<img src="'+m+'" width="'+g+'" height="'+y,h+='"/>'),e._closeDialog(),e._editLink(h,c,b,p)},t.prototype._editLink=function(e,t,n,r){var i=this,s="",o;i.focus(),o=i._getInspectElement();try{o=i._getHyperLinkElement(o);if(o&&o.tagName==="A"){o.innerHTML=i._hyperlinkTextStyle&&i._hyperlinkTextStyle!==""?i._hyperlinkTextStyle.replace("{0}",e):e,o.href=t,o.target=r,n!==o.style.cssText&&(o.style.cssText=n),i._addtoUndoBuffer(),i._setSaveBtnEnabled();return}}catch(u){}s='<a href="'+t+'" target="'+r+'"',n!==""&&(s+=' style="'+n+'"'),s+=">"+e+"</a>",i.insertHTML(s)},t.prototype.anchorListOnChanged=function(e){var t=this,r=t.dialog,i=n(e).val();i!==""&&(n("."+ti+" input",r).val(i),n("#radAnchor",r).attr("checked","checked"))},t.prototype.radioListOnChanged=function(){var e=this,t=e.dialog,r=n("."+ri,t),i=n("."+ti+" input",t);i.val(""),n("#radUrl",t).is(":checked")?r.hide():n("#radAnchor",t).is(":checked")?r.show():n("#radMail",t).is(":checked")?(r.hide(),i.val("mailto:")):n("#radFile",t).is(":checked")&&r.hide()},t.prototype.linkIconTypeOnChanged=function(){var e=this,t=e.dialog,r=n("."+li,t),i=n("."+ii,t);n("#radLinkTypeIsText",t).is(":checked")?(i.show(),r.hide()):n("#radLinkTypeIsImage",t).is(":checked")&&(i.hide(),r.show())},t.prototype._getDialogRes_Code=function(){var e=this,t=e._createDiv(ei);return t.add(e._createElement("div","Enter source code",{"class":di})),t.add(e._createElement("textarea","",{"class":pi})),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype.initInsertCodeDialog=function(){var e=this,t=e.dialog;t.delegate(vs,"click."+e.widgetName,function(t){e.submitCodeDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()})},t.prototype.submitCodeDialog=function(){var e=this,t=e.dialog,r=n("."+pi,t),i=r.val();if(i==="")return;i=i.replace(/</g,"&lt;"),i=i.replace(/>/g,"&gt;"),i="<pre>"+i+"</pre>",e._setIESelection(),e.insertHTML(i),e._closeDialog()},t.prototype.initTagInspectorDialog=function(){var e=this,t=e.dialog,r=n("."+Si);t.delegate(vs,"click."+e.widgetName,function(t){e.submitTagInspectorDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()}).delegate("#displayNoEmpty","click."+e.widgetName,function(){e.tagInspectorDialogSwitchAttList(this)}),e._laySelectedElementAttributes(n("."+Ei,t),n("."+yi,t)),n("."+xi+" input",t).val(e._getSelectedElementStyle()),e._selectedElementCanHaveChildren()?(r.show(),n("textarea",r).val(e._getSelectedElementInnerHTML())):r.hide()},t.prototype.submitTagInspectorDialog=function(){var e=this,t=e.dialog,r=e._getInspectElement(),i=n("."+Ei,t),s=n("."+xi+" input").val(),o=n("."+Si+" textarea").val();try{n.each(n("input:checkbox",i),function(e,t){var i,s,o=n(t);o.is(":checked")&&(i=o.siblings("span").text(),i=i.substring(0,i.length-1),s=o.siblings("input:text").val(),n(r).attr(i,s))}),n.trim(s)!==""&&(r.style.cssText=s),e._selectedElementCanHaveChildren()&&n(r).html(o)}catch(u){}e._closeDialog(),e._addtoUndoBuffer(),e._setSaveBtnEnabled()},t.prototype.tagInspectorDialogSwitchAttList=function(e){var t=n("."+Ei,this.dialog),r=!e.checked;n.each(n("input:text",t),function(e,t){n(t).val()===""&&n(t).parent("li")[r?"show":"hide"]()})},t.prototype._laySelectedElementAttributes=function(e,t){var r=this,i=r._getInspectElement(),s,o,u,a=this.localizeString("tagInspectorDialogSave","Save"),f="";if(!i)return;t.html(i.tagName),s=r._getDictionaryDeclare(),o=i.tagName.toLowerCase(),u=s[o];switch(o){case"ul":case"u":case"textarea":case"tbody":case"tr":case"th":case"td":case"table":case"select":case"strong":case"span":case"p":case"option":case"ol":case"li":case"label":case"input":case"img":case"i":case"hr":case"form":case"font":case"em":case"div":case"code":case"button":case"body":case"b":case"a":f+="<ul class='ui-helper-reset'>",n.each(u,function(e,t){var n=i.getAttribute(t)||"";f+="<li><span class='"+Nr+"'>",f+=t+":</span>",f+="<input type='text' value='"+n+"'/>",f+="<input type='checkbox' id='save"+e+"'/>",f+="<label for='save"+e+"'>"+a+"</label></li>"})}e.html(f)},t.prototype._getSelectedElementStyle=function(){var e=this._getInspectElement();return e&&e.style?e.style.cssText||"":""},t.prototype._getSelectedElementInnerHTML=function(){var e=this._getInspectElement();return e?e.innerHTML:""},t.prototype._selectedElementCanHaveChildren=function(){return!n(this._getInspectElement()).is("input,hr,br,img")},t.prototype.initBackColorDialog=function(){this._initColorDialog("BackColor")},t.prototype.initForeColorDialog=function(){this._initColorDialog("ForeColor")},t.prototype._initColorDialog=function(e){var t=this,r=t.dialog,i=t._getDesignViewDocument(),s=i.queryCommandValue(e),o,a,f;r.delegate(vs,"click."+t.widgetName,function(n){t.submitColorDialog(e),t._onDesignViewBlur(n)}).delegate(ms,"click."+t.widgetName,function(){t._closeDialog()}),s&&(f=s.toString(),n.browser.mozilla&&f==="transparent"&&(f="#ffffff"),n.browser.msie&&(o=u(f),f="rgb("+(o&255)+", "+((o&65280)>>8)+", "+((o&16711680)>>16)+")"),f.indexOf("rgb(")===0?(a=f.substring(4,f.length-1).split(","),f=t._convertToWebColor(u(a[0]),u(a[1]),u(a[2]))):f.indexOf("rgba(")===0&&(a=f.substring(5,f.length-1).split(","),f=t._convertToWebColor(u(a[0]),u(a[1]),u(a[2]))),n("."+Ci+" input",r).attr("value",f)),n("."+Ni,r).wijeditorcolorcanvas("."+Ci+" input",f)},t.prototype.submitColorDialog=function(e){var t=this,r=n("."+Ci+" input",t.dialog);t.setColor(e,r.val()),t._closeDialog()},t.prototype.setColor=function(e,t){var r=this,i,s=r._getDesignViewDocument(),o=r._getDesignViewWindow(),u;r._setIESelection(),n.browser.mozilla&&e==="BackColor"?(u=o.getSelection(),r.insertHTML('<span style="background-color:'+t+';">'+u+"</span>")):(s.execCommand(e,!1,t),n.browser.msie&&(i=r._getHtmlTextInIE(s),i.indexOf("<U>")>=0&&i.indexOf("</U>")>=0&&(s.execCommand("Underline",!1,!1),s.execCommand("Underline")),i.indexOf("<STRIKE>")>=0&&i.indexOf("</STRIKE>")>=0&&(s.execCommand("StrikeThrough",!1,!1),s.execCommand("StrikeThrough"))),r.options.mode==="bbcode"&&!n.browser.msie&&r._convertFontStyleToStandTag()),r._addtoUndoBuffer(),r._setSaveBtnEnabled()},t.prototype.initInsertTableDialog=function(){var e=this,t=e.dialog;t.delegate(vs,"click."+e.widgetName,function(t){e.submitInsertTableDialog(),e._onDesignViewBlur(t)}).delegate(ys,"click."+e.widgetName,function(){e._closeDialog()}).delegate("."+Bi+" input:button","click."+e.widgetName,function(){e.showTableColorDialog(this,t)})},t.prototype.submitInsertTableDialog=function(){var e=this,t=e._getValuesFromTableDialog();if(!t)return;e._insertTable(t),e._closeDialog()},t.prototype._insertTable=function(e){var t=this,r="",i,s;if(!e)return!1;t.focus(),r+='<table width="'+e.width+'" height="'+e.height+'" cellspacing="'+e.cspacing+'" cellpadding="'+e.cpadding+'" border="'+e.border+'" bgcolor="'+e.bgcolor+'" style="'+e.css+'">';for(i=0;i<e.rows;i++){r+="<tr>";for(s=0;s<e.cols;s++)r+="<td>Cell "+(i+1)+"-"+(s+1)+"</td>";r+="</tr>"}r+="</table>";if(n.browser.mozilla||n.browser.msie&&u(n.browser.version)>=9)r+="<br />";t.insertHTML(r)},t.prototype.initEditTableDialog=function(){var e=this,t=e.dialog,r=e._getInspectElement(),i,s;t.delegate(vs,"click."+e.widgetName,function(t){e.submitEditTableDialog(),e._onDesignViewBlur(t)}).delegate(ys,"click."+e.widgetName,function(){e._closeDialog()}).delegate("."+Bi+" input:button","click."+e.widgetName,function(){e.showTableColorDialog(this,t)});if(!r)return;try{i=r.rows,i.length>0?s=i[0].cells.length:s=0,i=i.length}catch(o){}n("."+Li+" input",t).val(i),n("."+Ai+" input",t).val(s),n("."+Oi+" input",t).val(r.getAttribute("width")),n("."+Mi+" input",t).val(r.getAttribute("height")),n("."+_i+" input",t).val(r.getAttribute("border")),n("."+Di+" input",t).val(r.getAttribute("cellPadding")),n("."+Pi+" input",t).val(r.getAttribute("cellSpacing")),n("."+Bi+" input",t).val(r.getAttribute("bgcolor")||"#ffffff"),n("."+Hi+" input",t).val(r.style.cssText)},t.prototype.submitEditTableDialog=function(){var e=this,t=e._getInspectElement(),r=n(t),i=e._getValuesFromTableDialog(),s=i&&u(i.rows),o=i&&u(i.cols),a,f;if(!i)return;if(t){r.attr("width",i.width),r.attr("height",i.height),r.attr("bgcolor",i.bgcolor),r.attr("border",i.border),r.attr("cellSpacing",i.cspacing),r.attr("cellPadding",i.cpadding),t.style.cssText=i.css;if(!s||isNaN(s))return;if(!o||isNaN(o))return;while(t.rows.length>s)t.deleteRow(0);while(t.rows.length<s){a=t.insertRow(0);while(a.cells.length<o)f=a.insertCell(0),f.innerHTML="&nbsp;"}n.each(t.rows,function(e,t){while(t.cells.length>o)t.deleteCell(0);while(t.cells.length<o)f=t.insertCell(0),f.innerHTML="&nbsp;"})}e._closeDialog()},t.prototype._getValuesFromTableDialog=function(){var e=this,t=e.dialog,r=n("."+Li+" input",t).val(),s=n("."+Ai+" input",t).val(),o=n("."+Oi+" input",t).val(),a=n("."+Mi+" input",t).val(),f=n("."+_i+" input",t).val(),l=n("."+Di+" input",t).val(),c=n("."+Pi+" input",t).val(),h=n("."+Hi+" input",t).val(),p=n("."+Bi+" input",t).val();return e._isNumeric(r)?e._isNumeric(s)?e._isNumeric(o)?e._isNumeric(a)?e._isNumeric(f)?e._isNumeric(l)?e._isNumeric(c)?{rows:r,cols:s,width:u(o),height:u(a),border:f,cpadding:l,cspacing:c,css:h,bgcolor:p}:(i(this.localizeString("tableDialogCellSpacingError","Please input a number for 'Cell Spacing' textbox.")),!1):(i(this.localizeString("tableDialogCellPaddingError","Please input a number for 'Cell Padding' textbox.")),!1):(i(this.localizeString("tableDialogBorderError","Please input a number for 'Border thickness' textbox.")),!1):(i(this.localizeString("errorMessageTableHeightError","Please input a number for 'Table Height' textbox.")),!1):(i(this.localizeString("errorMessageTableWidthError","Please input a number for 'Table Width ' textbox.")),!1):(i(this.localizeString("errorMessageColumnsError","Please input a number for 'Columns' textbox.")),!1):(i(this.localizeString("errorMessageRowsError","Please input a number for 'Rows' textbox.")),!1)},t.prototype.showTableColorDialog=function(e,t){var r=this,i,s=r.subDialog,o=n(e).prev().val(),a=r._getDialogRes_Color();i={width:"auto",height:"auto",modal:!0,title:"Set Background Color",position:{my:"center",at:"center",of:window},resizable:!1,captionButtons:{pin:{visible:!1},refresh:{visible:!1},toggle:{visible:!1},minimize:{visible:!1},maximize:{visible:!1}},close:function(){t.focus()}},s.empty().append(a),n.browser.msie&&u(n.browser.version)===6?window.setTimeout(function(){s.wijdialog(i)},0):s.wijdialog(i),s.delegate(gs,"click."+r.widgetName,function(){r.submitTableColorDialog()}).delegate(ys,"click."+r.widgetName,function(){r.closeSubDialog()}),o!==""&&n("."+Ci+" input",s).val(o),n("."+Ni,s).wijeditorcolorcanvas("."+Ci+" input",o),s.wijdialog("open")},t.prototype.submitTableColorDialog=function(){var e=this,t=e.subDialog,r=e.dialog,i=n("."+Ci+" input",t).val();n("."+Bi+" input:text",r).val(i),e.closeSubDialog()},t.prototype.closeSubDialog=function(){this.subDialog.wijdialog("close")},t.prototype._getEditableTable=function(){var e=this,t,r,s;r=e._getSelectedElement();if(!r)return i(this.localizeString("errorMessageSelectTableError","Please select a table!")),!1;s=n(r);if(s.is("td,tr,tbody,th"))r=s.parents("table:first")[0];else if(!s.is("table")){t=s.find("table:only-child");if(!n.browser.msie||!t.length)return i(this.localizeString("errorMessageSelectTableError","Please select a table!")),!1;r=t[0]}return m=r,!0},t.prototype.initPreviewDialog=function(){var e=this,t=e.dialog;e._setPreviewContent(0),t.delegate("#rad640_480","click."+e.widgetName,function(){e._setPreviewDialogSize(640,480)}).delegate("#rad800_600","click."+e.widgetName,function(){e._setPreviewDialogSize(800,600)}).delegate("#rad1024_768","click."+e.widgetName,function(){e._setPreviewDialogSize(1024,768)}).delegate("#chkSplit","click."+e.widgetName,function(){e._splitPreviewPages(this.checked)}).delegate("."+Ui,"click."+e.widgetName,function(){e._printPreviewPage(!0)}).delegate("."+zi,"click."+e.widgetName,function(){e._printPreviewPage(!1)}).delegate("."+Wi,"click."+e.widgetName,function(){e._closeDialog()}).delegate("."+qi,"click."+e.widgetName,function(){e._navigatePreviewPage(!1)}).delegate("."+Ri,"click."+e.widgetName,function(){e._navigatePreviewPage(!0)})},t.prototype._setPreviewContent=function(e){var t=this,r=t.dialog,i=n("iframe",r),s=n("."+Ii+" span",r),o=i[0].contentWindow.document;o.open(),e===-1?(o.write(t._getPreviewAllPageContent()),s.html("1 / 1")):(o.write(t._getPreviewPageContent(e)),s.html(e+1+" / "+t._getPreviewPageCount())),o.close()},t.prototype._setPreviewDialogSize=function(e,t){var r=this,i=r.dialog,s=n("iframe",i),o=i.wijdialog("option","width"),u=i.wijdialog("option","height");o==="auto"?o=i.parent(".wijmo-wijdialog").width()-s.width():o-=s.width(),u==="auto"?u=i.parent(".wijmo-wijdialog").height()-s.height():u-=s.height(),s.css("width",e).css("height",t),i.wijdialog("option",{width:e+o,height:t+u})},t.prototype._getPreviewPageCount=function(){return this._getPreviewPages().length},t.prototype._getPreviewPageContent=function(e){var t=this._getPreviewPages();return t.length>e?t[e]:null},t.prototype._getPreviewAllPageContent=function(){return this._getDesignViewText()},t.prototype._getPreviewPages=function(){var e=this._getPreviewAllPageContent(),t=new RegExp("<(DIV|div)[^>]*(page-break-before|PAGE-BREAK-BEFORE)[ ]*:[ ]*always[^>]*>(.*?)<\\/(DIV|div)>","g"),n=e.replace(t,"!-~U^n#i@q,P|.a=g~e+br!");return n.split("!-~U^n#i@q,P|.a=g~e+br!")},t.prototype._splitPreviewPages=function(e){var t=this,r=t.dialog,i=n("."+Xi,r),s=n("."+Ii,r);e?(t._setPreviewContent(0),s.show(),i.hide()):(t._setPreviewContent(-1),s.hide(),i.show()),t._curPageIdx=0},t.prototype._navigatePreviewPage=function(e){var t=this,r=n("#chkSplit",t.dialog),i=t._curPageIdx,s=t._getPreviewPageCount();r.is(":checked")&&(e?(i++,i<s?t._setPreviewContent(i):i=s-1):(i--,i>=0?t._setPreviewContent(i):i=0),t._curPageIdx=i)},t.prototype._printPreviewPage=function(e){var t=this,r=t.dialog,i=n("#chkSplit",r),s=n("iframe",r)[0].contentWindow;e&&(i.removeAttr("checked"),t._setPreviewContent(-1)),s.focus(),s.print()},t.prototype.initCleanUpDialog=function(){var e=this,t=e.dialog;n("textarea",t).val(e.sourceView.val()),t.delegate(vs,"click."+e.widgetName,function(t){e.submitCleanUpDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()})},t.prototype.submitCleanUpDialog=function(){var e=this,t=e.dialog,r=e.sourceView,i=r.val(),s;n("#replaceSpans",t).is(":checked")&&(s=new RegExp("<\\/?SPAN[^>]*>","g"),i=i.replace(s,"")),n("#replaceClass",t).is(":checked")&&(s=new RegExp("<(\\w[^>]*) class=([^ |>]*)([^>]*)","g"),i=i.replace(s,"<$1$3")),n("#replaceStyle",t).is(":checked")&&(s=new RegExp('<(\\w[^>]*) style="([^"]*)"([^>]*)',"g"),i=i.replace(s,"<$1$3"),s=new RegExp("<(\\w[^>]*) lang=([^ |>]*)([^>]*)","g"),i=i.replace(s,"<$1$3"),s=new RegExp("<\\\\?\\?xml[^>]*>","g"),i=i.replace(s,""),s=new RegExp("<\\/?\\w+:[^>]*>","g"),i=i.replace(s,"")),n("#replaceNbsp",t).is(":checked")&&(s=new RegExp("&nbsp;","g"),i=i.replace(s," ")),n("#transformPtoDiv",t).is(":checked")&&(s=new RegExp("(<P)([^>]*>.*?)(<\\/P>)","g"),i=i.replace(s,"<div$2</div>")),r.val(i),e._setDesignViewText(i),e._addtoUndoBuffer(),e._closeDialog()},t.prototype.initFindDialog=function(){var e=this,t=e.dialog;e.tRange&&(e.tRange=null),t.delegate(vs,"click."+e.widgetName,function(){e.submitFindAction()}).delegate(ms,"click."+e.widgetName,function(t){e.submitReplaceAction(),e._onDesignViewBlur(t)})},t.prototype.submitFindAction=function(){var e=this,t=n("textarea:first",e.dialog).val();if(n.trim(t)==="")return;e._findAndReplaceString(t)},t.prototype.submitReplaceAction=function(){var e=this,t=e.dialog,r=n("textarea:first",t).val(),s=n("textarea:last",t).val();if(n.trim(r)==="")return;if(n.trim(s)===""){i(this.localizeString("errorMessageReplaceStringError","please input replace string!"));return}e._findAndReplaceString(r,s)},t.prototype._findAndReplaceString=function(e,t){var r=this,s=r._getDesignViewWindow(),o=0,u=!1,a,f=t&&t!==e;t||(t=e);if(n.browser.msie)r.tRange&&(r.txtFoundInIE&&f?(o=r.tRange.findText(e),o&&(r.tRange.pasteHTML(t),r.tRange.collapse(!1),u=!0,r.txtFoundInIE=!1)):(r.tRange.collapse(!1),o=r.tRange.findText(e),o&&r.tRange.select())),!u&&(!r.tRange||!o)&&(r.tRange=s.document.body.createTextRange(),o=r.tRange.findText(e),o&&(r.tRange.select(),f&&(r.tRange.pasteHTML(t),u=!0)));else{if(r.txtFoundInNoneIE&&f)r._replaceSelectionForNoneIE(t),u=!0,r.txtFoundInNoneIE=!1;else{a=s.getSelection(),a.rangeCount>0&&a.collapseToEnd(),o=s.find(e);if(!o){o=s.find(e,0,1);while(s.find(e,0,1))continue}}r.txtFoundInNoneIE=r.txtFoundInNoneIE||o>0,r.txtFoundInNoneIE&&f&&(r._replaceSelectionForNoneIE(t),u=!0,r.txtFoundInNoneIE=!1)}!o&&!u?(i('"'+e+'"'+this.localizeString("errorMessageFindTextError"," String Not Found!")),r.tRange=null,r.txtFoundInNoneIE=!1,r.txtFoundInIE=!1):r.txtFoundInIE=!0},t.prototype._replaceSelectionForNoneIE=function(e){var t=this._getDesignViewDocument();t.execCommand("inserttext",!1,e)},t.prototype.initMediaDialog=function(){var e=this,t=e.dialog;t.delegate(vs,"click."+e.widgetName,function(t){e.submitMediaDialog(),e._onDesignViewBlur(t)}).delegate(ms,"click."+e.widgetName,function(){e._closeDialog()})},t.prototype.submitMediaDialog=function(){var e=this,t=e.dialog,r=n("select",t).val(),s=n("."+ns+" input",t).val(),o=n("."+rs+" input",t).val(),u=n("."+is+" input",t).val();if(s===""){i(this.localizeString("errorMessageUrlEmptyError","URL is empty!"));return}if(!e._isUrl(s)){i(this.localizeString("errorMessageUrlCorrectError","please input correct URL!"));return}if(!e._isNumeric(o)){i(this.localizeString("errorMessageMediaWidthError","please input width of the media!"));return}if(!e._isNumeric(u)){i(this.localizeString("errorMessageMediaHeightError","please input height of the media!"));return}e._insertMedia(r,s,o,u),e._closeDialog()},t.prototype._insertMedia=function(e,t,n,r){var i=this,s="";i._setIESelection();switch(e){case"video":s+='<embed src="'+t+'" width="'+n+'" '+'height="'+r+'" '+'type=audio/x-pn-realaudio-plugin console="Clip1" '+'controls="IMAGEWINDOW,ControlPanel,StatusBar" '+'autostart="true"></embed>';break;case"flash":s+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="'+n+'" height="'+r+'">',s+='<param name="movie" value="'+t+'">',s+='<param name="quality" value="high">',s+='<embed src="'+t+'" quality="high" '+'pluginspage="http://www.macromedia.com/go/getflashplayer" '+'type="application/x-shockwave-flash" '+'width="'+n+'" height="'+r+'"></embed>',s+="</object>";break;case"applet":s+='<applet code="'+t+'" width="'+n+'" '+'height="'+r+'"></applet>';break;case"other":s+='<embed src="'+t+'" width="'+n+'" '+'height="'+r+'"></embed>'}i.insertHTML(s)},t.prototype.initSpecialCharacterDialog=function(){var e=this,t=e.dialog,r=n("."+as+" span",t);t.delegate("label","click."+e.widgetName,function(t){e.submitSpecialCharacterDialog(this),e._onDesignViewBlur(t)}).delegate(vs,"click."+e.widgetName,function(){e._closeDialog()}).delegate("label","mouseover."+e.widgetName,function(){r.html(n(this).html())}).delegate("label","mouseout."+e.widgetName,function(){r.empty()})},t.prototype.submitSpecialCharacterDialog=function(e){var t=this;t._setIESelection(),t.insertHTML(n(e).html()),t._closeDialog()},t.prototype._setSaveBtnEnabled=function(){this.$ribbon.wijribbon(g,Ot,!1)},t.prototype._undoAction=function(){var e=this._getDesignViewDocument().body,t={};d--,d<=0&&(d=0),e.innerHTML=v[d],d?this.$ribbon.wijribbon(g,yt,!1):(t[gt]=!0,t[yt]=!1,this.$ribbon.wijribbon(y,t))},t.prototype._redoAction=function(){var e=this._getDesignViewDocument().body,t=v.length,n={};d++,d>=t-1&&(d=t-1),e.innerHTML=v[d],d===t-1?(n[gt]=!1,n[yt]=!0,this.$ribbon.wijribbon(y,n)):this.$ribbon.wijribbon(g,gt,!1)},t.prototype._addtoUndoBuffer=function(){var e=v.length-1-d,t;for(t=0;t<e;t++)v.pop();d++,v.push(this._getDesignViewText()),this.$ribbon.wijribbon(g,gt,!1)},t.prototype._deleteSelectionContent=function(){var e=this._getDesignViewWindow(),t,r,i,s="rangeCount";if(n.browser.msie)t=e.document.selection,t.type.toLowerCase()!=="none"&&t.clear();else{t=e.getSelection();for(r=0;r<t[s];r++)i=t.getRangeAt(r),i.deleteContents()}},t.prototype._refreshPathSelector=function(){var e=this,t=e._getParentElement(e._getDesignViewWindow()),r,i=e._getPathSelector(),s=n(t).parents(),o=s.length,u="wijmo-wijeditor-label ui-state-default ui-corner-all",a;if(!t)return;r=t.tagName?t.tagName.toLowerCase():"",i.empty();for(a=o-1;a>=0;a--)i.append("<label class='"+u+"'>&lt;"+s[a].tagName.toLowerCase()+"&gt;</label>");i.append("<label class='"+u+" wijmo-wijeditor-selectlabel ui-state-highlight ui-corner-all'>&lt;"+r+"&gt;</label>")},t.prototype._toggleTableBorders=function(){var e=this.options.tableVirtualBorderShowing;this._updateTableBorderShowing(!e),this.options.tableVirtualBorderShowing=!e},t.prototype._updateTableBorderShowing=function(e){var t=this._getDesignViewDocument(),r=n("#__wijStyle",t);n.browser.safari?e?r.html("table,td,tr{border: 1px #acacac dashed;}"):r.empty():r.prop("disabled",!e)},t.prototype._tableAction=function(e){var t=this,r=t._getParentElement(t._getDesignViewWindow()),s=n(r).closest("td"),o,u,a,f,l,c,h,p,d,v,m=0;t._setSaveBtnEnabled();if(s.length===0&&e!==B)return!1;e!==B&&(o=s.parent(),u=o.closest("table"),a=s[0],f=o[0],l=u[0],c=f.rowIndex,h=a.cellIndex);try{switch(e){case D:p=f.cells.length,v=l.insertRow(c);for(m=0;m<p;m++)t._insertCell(v,m);break;case F:l.deleteRow(c);break;case _:d=l.rows.length;for(m=0;m<d;m++)t._insertCell(l.rows[m],h);break;case j:t._removeColumn(l,h);break;case P:t._insertCell(f,h+1);break;case I:p=f.cells.length,p===1?l.deleteRow(c):f.deleteCell(h);break;case H:t._splitCell(l,f,c,h);break;case B:t._mergeCell(t._getSelectedCells(r))}this._addtoUndoBuffer()}catch(g){return i(g.message),!1}return!0},t.prototype._removeColumn=function(e,t){var n=e.rows.length,r=0,i,s,o,u,a;while(r<n)i=e.rows[r],s=i.cells,o=s.length,u=t>o-1?o-1:t,a=s[u].colSpan,a>1&&o>1&&(u+1<o?s[u+1].colSpan+=a-1:s[u-1].colSpan+=a+1),o===1?(e.deleteRow(r),n=e.rows.length):(i.deleteCell(u),r++)},t.prototype._splitCell=function(e,t,n,r){var i=e.rows.length,s=0,o=0,u,a,f,l,c;while(s<=r)t.cells[s].colSpan>1&&(o+=t.cells[s].colSpan-1),s++;this._insertCell(t,r+1);if(t.cells[r].colSpan>1)t.cells[r].colSpan--;else for(f=0;f<i;f++){u=e.rows[f];if(f!==n){l=r,s=0,a=0;while(s<=l)u.cells[s].colSpan>1&&(a+=u.cells[s].colSpan-1,l-=a),s++;c=r+o-a,c<0&&(c=0),u.cells[c].colSpan++}}},t.prototype._mergeCell=function(e){var t=e.length,n,r,i,s;if(t<2||e[0].parentNode!==e[t-1].parentNode)return!1;n=e[0].parentNode,r=e[0].cellIndex,i=r+t;for(s=r+1;s<i;s++)n.cells[r].innerHTML+=n.cells[r+1].innerHTML,n.cells[r].colSpan++,n.deleteCell(r+1)},t.prototype._getSelectedCells=function(e){var t=this,r=this._getDesignViewWindow(),i=r.document,s=[],o,u,a,f,l,c,h,p;if(n.browser.msie)u=n(e).closest("tr")[0],u&&(o=t._getIESelectionRange(),n.each(u.cells,function(e,n){t._isIE11?t._checkSelectionIncludeNodeForIE11(r,o,n)&&s.push(n):t._checkSelectionIncludeNodeExceptIE11(r,o,n)&&s.push(n)}));else if(n.browser.mozilla){a=r.getSelection(),l=a.rangeCount;for(f=0;f<l;f++)o=a.getRangeAt(f),c=o.startContainer,h=c.nodeName.toLowerCase(),h==="td"||h==="th"?s.push(c):h==="tr"&&(p=o.startOffset,s.push(c.cells[p]))}else{a=r.getSelection(),u=n(e).closest("tr")[0];if(u){l=u.cells.length;for(f=0;f<l;f++)s.push(u.cells[f])}}return s},t.prototype.insertDateAndTime=function(){var e=new Date;this.options.culture&&this.options.culture!==""?this.insertHTML(Globalize.format(e,"dddd ",Globalize.findClosestCulture(this.options.culture))+Globalize.format(e,"F",Globalize.findClosestCulture(this.options.culture))):this.insertHTML(e.toDateString()+" "+e.toTimeString())},t.prototype._toggleWordWrap=function(){var e=this,t=e.sourceView,r="wrap",i;p=!p,i=p?"soft":"off",t.attr(r,i),t[0].focus(),n.browser.mozilla&&(t.hide(),s.setTimeout(function(){t.show()},40))},t.prototype.insertHTML=function(e){var t=this,r=t._getDesignViewDocument(),i;try{n.browser.msie?(t._isIE11&&r.getSelection?i=t._getRangeForInsertHTML(r,e):(r.selection.type==="Control"&&r.selection.clear(),i=r.selection.createRange(),i.pasteHTML(e),i.collapse(!1),t.rangeSelection=null),t._setIESelection(i,!0)):r.execCommand("insertHTML",!1,e)}catch(s){n.browser.msie&&n.browser.version&&parseFloat(n.browser.version)>=9&&parseFloat(n.browser.version)<=10&&t.rangeSelection&&(i=t.rangeSelection,i.pasteHTML(e),i.collapse(!1),t._setIESelection(i,!0))}t._addtoUndoBuffer(),t._setSaveBtnEnabled()},t.prototype._getRangeForInsertHTML=function(e,t){var n,r,i;return e.getSelection&&(n=e.getSelection(),this.rangeSelection?(r=this.rangeSelection,this.rangeSelection=null):n.getRangeAt&&n.rangeCount&&(r=n.getRangeAt(0)),r&&(r.deleteContents(),i=r.createContextualFragment(t),r.insertNode(i),r.collapse(!1))),r},t.prototype._setIEFocus=function(){var e=this._getDesignViewDocument();if(n.browser.msie)try{e.body.focus()}catch(t){}},t.prototype.focus=function(){var e=this._getDesignViewWindow(),t=e.document;n.browser.msie?this.rangeSelection?this._setIESelection():t.body?t.body.focus():t.onreadystatechange=function(){t.readyState==="complete"&&t.body.focus()}:e.focus()},t.prototype._setFocusNotIE=function(){var e=this._getDesignViewWindow(),t=e.document;if(n.browser.msie)return;n.browser.mozilla?e.focus():t.body&&t.body.focus()},t.prototype._createElement=function(e,t,n){return new Ns(e,t,n)},t.prototype._createDiv=function(e,t){return this._createElement("div",{"class":e})},t.prototype._createSpan=function(e,t){var n=this;return t?e.length===0?n._createElement("span",t):this._createElement("span",t,{"class":e}):n._createElement("span",{"class":e})},t.prototype._createTextBox=function(e,t){var n={"class":e,type:"text",value:undefined};return t&&(n.value=t),this._createElement("input",n)},t.prototype._createLabel=function(e,t){return t?new Ns("label",e,{"for":t}):new Ns("label",e)},t.prototype._createRadio=function(e,t,n){var r={name:t,id:e,value:n,type:"radio"};return this._createElement("input",r)},t.prototype._createCheckbox=function(e){var t={type:"checkbox",id:e};return this._createElement("input","",t)},t.prototype._createSelect=function(e,t){var r=this,i={"class":e},s=r._createElement("select",i);return e===""&&(s=r._createElement("select")),n.each(t,function(e,t){n.isPlainObject(t)&&t.selected?s.add(r._createElement("option",t.text,{selected:"selected"})):s.add(r._createElement("option",t))}),s},t.prototype._createInputButton=function(e,t){var n={"class":e,type:"button",value:undefined};return t&&(n.value=t),this._createElement("input",n)},t.prototype._createTextField=function(e,t,n,r){var i=this,s=i._createDiv(t),o={type:"text",value:""};return r&&(o.value=r),s.add(i._createSpan(Nr,e)),s.add(i._createElement("input",o)),n&&s.add(new Ts(n)),s},t.prototype._createTextAreaField=function(e,t,n,r){var i=this._createDiv(t);return i.add(this._createSpan(Nr,e)),i.add(this._createElement("textarea",n)),r&&i.add(new Ts(r)),i},t.prototype._createSeparator=function(){var e=this,t=e._createDiv(Sr);return t.add(e._createElement("hr")),t},t.prototype._createOKCancelButtons=function(){var e=this,t=e._createDiv(xr);return t.add(e._createElement("input",{type:"button","class":Tr,value:this.localizeString("dialogOK","OK")})),t.add(e._createElement("input",{type:"button","class":Tr,engValue:"Cancel",value:this.localizeString("dialogCancel","Cancel")})),t},t.prototype._getDialogRes_Template=function(){var e=this,t=e._createDiv(Fr),n=e._createDiv(Ir),r=e._createDiv(Ur),i=e._createDiv(zr),s=e._createDiv(Wr),o=e._createDiv(Xr),u=e._createElement("div",this.localizeString("templateDialogName","Name :")),a=e._createElement("div",this.localizeString("templateDialogDescription","Description :")),f=e._createDiv(Jr),l=e._createDiv(Gr);return n.add(e._createElement("div",this.localizeString("templateDialogSelectTemplate","Select Template:"),{"class":qr})),n.add(e._createElement("div",this.localizeString("templateDialogTemplatePreview","Template Preview:"),{"class":Rr})),t.add(n),i.add(e._createElement("select",{size:8})),s.add(e._createElement("iframe",{frameborder:0})),r.add(i),r.add(s),t.add(r),u.add(e._createSpan(Vr)),a.add(e._createSpan($r)),o.add(u),o.add(a),t.add(o),f.add(e._createSpan(Nr,this.localizeString("templateDialogName","Name :"))),f.add(e._createTextBox(Kr)),f.add(e._createSpan(Nr,this.localizeString("templateDialogDescription","Description :"))),f.add(e._createTextBox(Qr)),t.add(f),l.add(e._createInputButton(Tr+" "+Yr,this.localizeString("templateDialogDeleteSelected","Delete selected"))),l.add(e._createInputButton(Tr+" "+Zr,this.localizeString("templateDialogSaveCurrentPage","Save current page as template"))),t.add(l),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_ImageBrowser=function(){var e=this,t=e._createDiv(Cr),n=e._createDiv(kr),r=e._createDiv(Lr),i=e._createDiv(Ar),s=e._createDiv(Or),o=e._createDiv(Mr);return r.add(e._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),_r)),r.add(e._createTextField(this.localizeString("imageEditorDialogImageAltText","Image alt text:"),Dr)),r.add(e._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),Pr,this.localizeString("dialogPixel","px"))),r.add(e._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),Hr,this.localizeString("dialogPixel","px"))),r.add(e._createTextField(this.localizeString("imageEditorDialogCssText","Css text:"),Br)),n.add(r),i.add(s),s.add(e._createElement("select",{size:8})),i.add(o),o.add(e._createElement("img",{src:"",alt:""})),n.add(i),n.add(e._createSeparator()),n.add(e._createOKCancelButtons()),t.add(n),t.render()},t.prototype._getDialogRes_link_address=function(){return this._createTextField(this.localizeString("hyperLinkDialogAddress","Address :"),ti)},t.prototype._getDialogRes_link_linkType_options=function(){return[{id:"radUrl",value:"url",text:this.localizeString("hyperLinkDialogUrl","url")},{id:"radAnchor",value:"anchor",checked:!0,text:this.localizeString("hyperLinkDialogAnchor","anchor")},{id:"radMail",value:"email",text:this.localizeString("hyperLinkDialogEmail","email")}]},t.prototype._getDialogRes_link_linkType=function(){var e=this,t=this._createDiv(ni+" ui-helper-clearfix"),r=this._createElement("div"),i=[],s;t.add(r),n.each(this._getDialogRes_link_linkType_options(),function(t,n){r.add(e._createRadio(n.id,"radioList",n.value)),r.add(e._createLabel(n.text,n.id))});for(s=1;s<8;s++)i.push("#anchor"+s.toString());return t.add(this._createSelect(ri,i)),t},t.prototype._getDialogRes_Link_linkIconType=function(){var e=this,t=this._createDiv(ci),r=this._createElement("div"),i=this._createSpan(Nr,this.localizeString("hyperLinkDialogIconType","Icon Type :")),s=[{id:"radLinkTypeIsText",value:"text",checked:!0,text:this.localizeString("hyperLinkDialogText","text")},{id:"radLinkTypeIsImage",value:"image",text:this.localizeString("hyperLinkDialogImage","image")}];return n.each(s,function(t,n){r.add(e._createRadio(n.id,"linkIconRadioList",n.value)),r.add(e._createLabel(n.text,n.id))}),t.add(r),r.add(i),t},t.prototype._getDialogRes_Link_text=function(){return this._createTextAreaField(this.localizeString("hyperLinkDialogTextToDisplay","Text to display :"),ii)},t.prototype._getDialogRes_Link_image=function(){var e=this._createDiv(li);return e.add(this._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),ui)),e.add(this._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),ai,this.localizeString("dialogPixel","px"))),e.add(this._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),fi,this.localizeString("dialogPixel","px"))),e},t.prototype._getDialogRes_link_target=function(){var e=this._createDiv(si),t=this._createSpan(Nr,this.localizeString("hyperLinkDialogTarget","Target :")),n=[{text:"_blank",selected:!0},"_parent","_self","_top"],r=this._createSelect(si,n);return e.add(t),e.add(r),e},t.prototype._getDialogRes_Link_Css=function(){return this._createTextField(this.localizeString("hyperLinkDialogCss","Css :"),oi)},t.prototype._getDialogRes_Link=function(){var e=this,t=e._createDiv(ei);return t.add(e._getDialogRes_link_address()),t.add(e._getDialogRes_link_linkType()),t.add(e._createSeparator()),t.add(e._getDialogRes_Link_linkIconType()),t.add(e._getDialogRes_Link_text()),t.add(e._getDialogRes_Link_image()),t.add(e._getDialogRes_link_target()),t.add(e._getDialogRes_Link_Css()),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_TagInspector=function(){var e=this,t=e._createDiv(vi),n=e._createDiv(mi),r=e._createDiv(bi),i=e._createDiv(wi),s=e._createDiv(Si);return t.add(n),n.add(e._createSpan(gi,this.localizeString("tagInspectorDialogSelectedTag","Selected tag :"))),n.add(e._createSpan(yi,"")),t.add(r),r.add(e._createCheckbox("displayNoEmpty")),r.add(e._createLabel(this.localizeString("tagInspectorDialogDisplayNotEmptyAttributes","Display not empty attributes only"),"displayNoEmpty")),t.add(i),i.add(e._createSpan(Nr,this.localizeString("tagInspectorDialogAttributes","Attributes:"))),i.add(e._createDiv(Ei)),t.add(s),s.add(e._createSpan(Nr,this.localizeString("tagInspectorDialogInnerHTML","Inner HTML:"))),s.add(e._createElement("textarea")),t.add(e._createTextField(this.localizeString("tagInspectorDialogCSSText","Css Text:"),xi)),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_Color=function(){return this._getDialogRes_CommonColor("#FFFFFF")},t.prototype._getDialogRes_ForeColor=function(){return this._getDialogRes_CommonColor("#000000")},t.prototype._getDialogRes_BackColor=function(){return this._getDialogRes_CommonColor("#FFFFFF")},t.prototype._getDialogRes_CommonColor=function(e){var t=this,n=t._createDiv(Ti),r=t._createDiv(Ci);return n.add(t._createDiv(Ni)),n.add(r),r.add(t._createSpan(Nr,this.localizeString("backColorDialogSelectedColor","Selected Color:"))),r.add(t._createElement("input",{type:"text",value:e})),n.add(t._createSeparator()),n.add(t._createOKCancelButtons()),n.render()},t.prototype._getDialogRes_Table=function(){var e=this,t=e._createDiv(ki),n=e._createDiv(Bi);return t.add(e._createTextField(this.localizeString("tableDialogRows","Rows :"),Li,"",3)),t.add(e._createTextField(this.localizeString("tableDialogColumns","Columns :"),Ai,"",3)),t.add(e._createTextField(this.localizeString("tableDialogTableWidth","Table Width :"),Oi,this.localizeString("tableDialogPixels","pixels"),200)),t.add(e._createTextField(this.localizeString("tableDialogTableHeight","Table Height :"),Mi,this.localizeString("tableDialogPixels","pixels"),200)),t.add(e._createTextField(this.localizeString("tableDialogBorder","Border thickness:"),_i)),t.add(e._createTextField(this.localizeString("tableDialogCellPadding","Cell Padding :"),Di)),t.add(e._createTextField(this.localizeString("tableDialogCellSpacing","Cell Spacing :"),Pi)),t.add(e._createTextField(this.localizeString("tableDialogCssText","Css Text :"),Hi)),t.add(n),n.add(e._createSpan(Nr,this.localizeString("tableDialogBackgroundColor","Background Color:"))),n.add(e._createElement("input",{type:"text"})),n.add(e._createElement("input",{type:"button",value:"..."})),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_Preview=function(){var e=this,t=e._createDiv(ji),n=e._createDiv(Fi),r=e._createDiv(xr),i=e._createDiv(Ii),s=e._createDiv(Vi);return t.add(n),n.add(e._createSpan(Nr,this.localizeString("previewDialogPreviewSize","Preview Size:"))),n.add(e._createElement("input",{id:"rad640_480",name:"preview",type:"radio",checked:"checked"})),n.add(e._createLabel("640x480","rad640_480")),n.add(e._createElement("input",{id:"rad800_600",name:"preview",type:"radio"})),n.add(e._createLabel("800x600","rad800_600")),n.add(e._createElement("input",{id:"rad1024_768",name:"preview",type:"radio"})),n.add(e._createLabel("1024x768","rad1024_768")),n.add(e._createElement("input",{id:"chkSplit",type:"checkbox",checked:"checked"})),n.add(e._createLabel(this.localizeString("previewDialogSplit","Split pages"),"chkSplit")),t.add(e._createSeparator()),t.add(r),r.add(e._createInputButton(Tr+" "+Ui,this.localizeString("previewDialogPrintAll","Print All"))),r.add(e._createInputButton(Tr+" "+zi,this.localizeString("previewDialogPrintPage","Print Page"))),r.add(e._createInputButton(Tr+" "+Wi,this.localizeString("dialogOK","OK"))),t.add(e._createSeparator()),t.add(i),i.add(e._createElement("a",this.localizeString("previewDialogPrevPage","Prev page"),{"class":qi,href:"#"})),i.add(e._createElement("span","1 / 1")),i.add(e._createElement("a",this.localizeString("previewDialogNextPage","Next page"),{"class":Ri,href:"#"})),t.add(e._createDiv(Xi)),t.add(s),s.add(e._createElement("iframe",{src:"about:blank"})),t.render()},t.prototype._getDialogRes_CleanUp=function(){var e=this,t=e._createDiv($i),r=e._createDiv(Ji),i=e._createDiv(Ki),s=e._createDiv(Qi),o=[{id:"replaceSpans",label:this.localizeString("cleanUpDialogStripSpanTag","Strip SPAN tag")},{id:"replaceClass",label:this.localizeString("cleanUpDialogStripClass","Strip CLASS tag")},{id:"replaceStyle",label:this.localizeString("cleanUpDialogStripStyle","Strip STYLE attribute")},{id:"replaceNbsp",label:this.localizeString("cleanUpDialogReplaceSymbol","Replace &amp;nbsp; symbol")},{id:"transformPtoDiv",label:this.localizeString("cleanUpDialogTransformParagraphToDIV","Transform Paragraph to DIV")}];return t.add(r),r.add(e._createSpan(Nr,this.localizeString("cleanUpDialogDocumentSource","Document source :"))),t.add(i),i.add(e._createElement("textarea",{readonly:"readonly"})),t.add(s),n.each(o,function(t,n){s.add(e._createCheckbox(n.id)),s.add(e._createLabel(n.label,n.id))}),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_FindAndReplace=function(){var e=this,t=e._createDiv(Gi),n=e._createDiv(Yi),r=e._createDiv(Zi),i=e._createDiv(xr);return t.add(n),n.add(e._createSpan(Nr,this.localizeString("findAndReplaceFind","Find:"))),n.add(e._createElement("textarea","text")),t.add(r),r.add(e._createSpan(Nr,this.localizeString("findAndReplaceReplace","Replace:"))),r.add(e._createElement("textarea")),t.add(e._createSeparator()),t.add(i),i.add(e._createInputButton(Tr,this.localizeString("findAndReplaceFindButton","Find"))),i.add(e._createInputButton(Tr,this.localizeString("findAndReplaceReplaceButton","Replace"))),t.render()},t.prototype._getDialogRes_Media=function(){var e=this,t=e._createDiv(es),n=e._createDiv(ts);return t.add(n),n.add(e._createSpan(Nr,this.localizeString("mediaDialogMediaType","Media Type :"))),n.add(e._createSelect("",["flash","video","applet","other"])),t.add(e._createTextField(this.localizeString("mediaDialogMediaUrl","Media Url :"),ns)),t.add(e._createTextField(this.localizeString("mediaDialogWidth","Width :"),rs,this.localizeString("dialogPixel","px"),200)),t.add(e._createTextField(this.localizeString("mediaDialogHeight","Height :"),is,this.localizeString("dialogPixel","px"),200)),t.add(e._createSeparator()),t.add(e._createOKCancelButtons()),t.render()},t.prototype._getDialogRes_SpecialCharacter=function(){var e=this,t=e._createDiv(ss),r=e._createDiv(os),i=e._createDiv(us),s=e._createDiv(as),o=e._createDiv(fs),u=e._createDiv(ls,"Punctuation"),a=e._createDiv(cs),f=["&#8211;","&#8212;","&iexcl;","&iquest;","&quot;","&laquo;","&raquo;","&nbsp;"],l=e._createDiv(ls,"Symbols"),c=e._createDiv(hs),h=["&amp;","&cent;","&copy;","&divide;","&gt;","&lt;","&micro;","&#8226;","&para;","&plusmn;","&#8364;","&pound;","&reg;","&sect;","&yen;"],p=e._createDiv(ls,"Diacritics"),d=e._createDiv(ps),v=["&aacute;","&Aacute;","&agrave;","&Agrave;","&acirc;","&Acirc;","&aring;","&Aring;","&atilde;","&Atilde;","&auml;","&Auml;","&aelig;","&AElig;","&ccedil;","&Ccedil;","&eacute;","&Eacute;","&egrave;","&Egrave;","&ecirc;","&Ecirc;","&euml;","&Euml;","&iacute;","&Iacute;","&igrave;","&Igrave;","&icirc;","&Icirc;","&iuml;","&Iuml;","&ntilde;","&Ntilde;","&oacute;","&Oacute;","&ograve;","&Ograve;","&ocirc;","&Ocirc;","&oslash;","&Oslash;","&otilde;","&Otilde;","&ouml;","&Ouml;","&uacute;","&Uacute;","&ugrave;","&Ugrave;","&ucirc;","&Ucirc;","&uuml;","&Uuml;","&szlig;","&yuml;","&#8216;","&#8217;"],m=e._createDiv(xr);return t.add(r),r.add(i),i.add(s),s.add(new Ns("span")),r.add(o),o.add(u),u.add(a),n.each(f,function(t,n){a.add(e._createLabel(n))}),o.add(l),l.add(c),n.each(h,function(t,n){c.add(e._createLabel(n))}),o.add(p),p.add(d),n.each(v,function(t,n){d.add(e._createLabel(n))}),t.add(e._createSeparator()),m.add(e._createInputButton(Tr,"Cancel")),t.add(m),t.render()},t.prototype._copyFromClipboard=function(){var e,t,r,i;if(s.clipboardData)return s.clipboardData.getData("Text");if(n.browser.mozilla){try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(o){}return e=Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard),e?(t=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable),t?(t.addDataFlavor("text/unicode"),e.getData(t,e.kGlobalClipboard),t.getTransferData("text/unicode",r,i),r&&(r=r.value.QueryInterface(Components.interfaces.nsISupportsString)),r?r.data.substring(0,i.value/2):""):!1):!1}},t.prototype._copyToClipboard=function(e){var t,r,o,u={},a={};if(s.clipboardData&&e)s.clipboardData.setData("Text",e);else if(n.browser.mozilla)try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),t=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!t)return;r=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!r)return;r.addDataFlavor("text/unicode"),a={},u=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),u.data=e,r.setTransferData("text/unicode",u,e.length*2),o=Components.interfaces.nsIClipboard;if(!t)return!1;t.setData(r,null,o.kGlobalClipboard)}catch(f){u="Copy text to Clipboard \n",u+="If you are using firefox please do the following :\n ",u+="1. Write in your url box : 'about:config'\n",u+="2. Change signed.applets.codebase_principal_support = true\n",i(this.localizeString("errorMessageCopyToClipboardError",u))}},t.prototype.fixAbsoluteUrlsIfNeeded=function(e){var t=this,n=o.URL,r=o.URL,i=o.URL,s=!1,u=r.length,a=e,f,l,c,h,p,d,v,m;for(v=u-1;v>0;v--){f=r.charAt(v),l=r.charAt(v-1);if(f==="/"||f==="\\"){if(f===l)break;i=r.substring(0,v)+f,s||(r=i,s=!0)}}return c=t._prepareLiteralRegexText(n+"?"),h=new RegExp(c,"g"),a=a.replace(h,"?"),p=t._prepareLiteralRegexText(r),h=new RegExp(p,"g"),a=a.replace(h,""),d=t._prepareLiteralRegexText(i),h=new RegExp(d,"g"),a=a.replace(h,"/"),m=a.indexOf("#"),m>-1&&(a=a.substr(m)),a},t.prototype._insertCell=function(e,t){var n=e.insertCell(t);return n.innerHTML="&nbsp;",n},t.prototype._getDictionaryDeclare=function(){var e={};return e.a=["accesskey","charset","class","coords","dir","href","hreflang","id","lang","name","rel","rev","shape","tabindex","target","title"],e.b=["class","dir","id","lang","title"],e.body=["alink","background","bgColor","bgproperties","bottommargin","class","dir","id","lang","leftmargin","link","marginheight","marginwidth","rightmargin","text","title","topmargin","vlink"],e.button=["accesskey","class","dir","disabled","id","lang","name","tabindex","title","type","value"],e.code=["class","dir","id","lang","title"],e.div=["align","class","dir","id","lang","title"],e.em=["class","dir","id","lang","title"],e.font=["class","color","dir","face","id","lang","pointsize","size","title"],e.form=["action","class","dir","enctype","id","lang","method","name","runat","target","title"],e.hr=["align","class","color","id","noshade","size","title","width"],e.i=["class","dir","id","lang","title"],e.img=["align","alt","border","class","controls","dir","dynsrc","height","hspace","id","ismap","lang","longdesc","loop","lowsrc","name","src","start","title","usemap","vspace","width"],e.input=["accept","accesskey","align","alt","border","checked","class","dir","disabled","height","hspace","id","lang","maxlength","name","readonly","size","src","tabindex","title","type","usemap","value","vspace","width"],e.label=["accesskey","class","dir","for","id","lang","title"],e.li=["class","dir","id","lang","title","type","value"],e.ol=["class","compact","dir","id","lang","start","title","type"],e.option=["class","dir","disabled","id","label","lang","selected","title","value"],e.p=["align","class","dir","id","lang","title"],e.span=["class","dir","id","lang","title"],e.strong=["class","dir","id","lang","title"],e.select=["accesskey","class","dir","disabled","id","lang","multiple","name","size","tabindex","title"],e.table=["align","background","bgColor","border","bordercolor","bordercolordark","bordercolorlight","cellpadding","cellspacing","class","cols","datapagesize","dir","frame","height","hspace","id","lang","rules","summary","title","vspace","width"],e.td=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"],e.th=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"],e.tr=["align","bgColor","bordercolor","bordercolordark","bordercolorlight","class","dir","height","id","lang","nowrap","title","valign"],e.tbody=["align","bgColor","class","dir","id","lang","title","valign"],e.textarea=["accesskey","class","cols","dir","disabled","id","label","lang","name","readonly","rows","tabindex","title","wrap"],e.u=["class","id","xml:lang"],e.ul=["class","compact","dir","id","lang","title","type"],e},t.prototype._generateUniqueName=function(e){var t=c[e];return t||(t=0),c[e]=++t,e+t},t.prototype._setContentEditable=function(e,t){var r="designMode",i="contentEditable";try{e.body[i]&&(e.body[i]=t.toString()),e[r]&&(!t&&e[r]!=="off"?e[r]="off":t&&e[r]!=="on"&&(n.browser.msie&&u(n.browser.version)>=9&&u(n.browser.version)<11||(e[r]="on"))),t&&!n.browser.msie&&e.execCommand("useCSS",!1,!0)}catch(s){}},t.prototype._setContentSpellCheck=function(e,t){var n="spellcheck";try{e.body[n]!==undefined&&(e.body[n]=t)}catch(r){}},t.prototype._formatString=function(e,t){var n=e.length,r;for(r=0;r<t-n;r++)e="0"+e;return e},t.prototype._convertToWebColor=function(e,t,n){var r=this,i,s,o,a;if(isNaN(e)||255-e<0)e=0;if(isNaN(t)||255-t<0)t=0;if(isNaN(n)||255-n<0)n=0;return i=r._formatString(u(e).toString(16),2),s=r._formatString(u(t).toString(16),2),o=r._formatString(u(n).toString(16),2),a="#"+i+s+o,a},t.prototype._prepareLiteralRegexText=function(e){var t=e;return t=t.replace(/\\/g,"\\\\"),t=t.replace(/\./g,"\\."),t=t.replace(/\?/g,"\\?"),t},t.prototype._isNumeric=function(e){return(new RegExp("^\\d+$")).test(e)},t.prototype._isEmail=function(e){return(new RegExp("mailto:(\\S)+[@]{1}(\\S)+[.]{1}(\\w)+")).test(e)},t.prototype._isUrl=function(e){return(new RegExp("[a-zA-z]+://[^s]+")).test(e)},t.prototype._isAnchor=function(e){return(new RegExp("#[^s]+")).test(e)?!0:(new RegExp("[a-zA-z]+://[^s]+#[^s]+")).test(e)?!0:!1},t.prototype.refresh=function(){var e=this,t=e._getDesignViewDocument(),r=e.element,i=e._getHeader(),s=e._getFooter(),o=i.outerHeight(!0),u=s.outerHeight(!0),a=e._oriEleWidth,f=e._oriEleHeight,l=e._getContent(),c;e.editor.width(a).height(f),this.$ribbon.wijribbon("updateRibbonSize"),window.setTimeout(function(){e.editor.is(":visible")&&(o=i.outerHeight(!0),u=s.outerHeight(!0)),c=e.editor.height()-o-u,l.height(c),l.data("wijmo-wijsplitter")&&(e.options.editorMode==="split"?l.wijsplitter("option","splitterDistance",c/2):l.wijsplitter("refresh"))},0),n.browser.mozilla?setTimeout(e._setDesignModeForFF,1e3,e):e._setContentEditable(t,!0)},t.prototype.getText=function(){var e=this;return e._getDesignViewText()},t.prototype.setText=function(e){var t=this;e&&(t._setDesignViewText(e),t.sourceView.val(e))},t.prototype.localizeString=function(e,t){var n=this.options;return n.localization&&n.localization[e]?n.localization[e]:t},t.prototype._getParentElement=function(e){var t=this,n=t._getRange(e),r,i,s,o,u;if(!n)return null;if(n.commonAncestorContainer)return r=e.getSelection(),i=n.startContainer||r.baseNode,s=n.endContainer||r.extentNode,o=n.startOffset,o===null&&(o=r.baseOffset),u=n.endOffset,u===null&&(u=r.extentOffset),i===s&&u-o===1?r.anchorNode.childNodes[r.anchorOffset]:n.commonAncestorContainer.tagName?n.commonAncestorContainer:e.document===n.commonAncestorContainer&&r.baseNode?r.baseNode.parentNode:n.commonAncestorContainer.parentNode;return n.length?n.item(0):n.parentElement?n.parentElement():null},t.prototype._getRange=function(e){var t,n;if(e.document.selection&&!s.opera)return e.document.selection.createRange();if(e.getSelection)return t=e.getSelection(),!t||t.rangeCount<1?null:(t.getRangeAt?n=t.getRangeAt(0):n=e.document.createRange(),n)},t.prototype._getInspectElement=function(){return m||this._getSelectedElement()},t.prototype._getSelectedElement=function(){return this._getParentElement(this._getDesignViewWindow())},t.prototype._checkSelectionIncludeNodeForIE11=function(e,t,n){var r=e.document,i;if(t){i=r.createRange(),i.selectNode(n);if(t.compareBoundaryPoints(Range.START_TO_END,i)<=0||t.compareBoundaryPoints(Range.END_TO_START,i)>=0)return!1}return!0},t.prototype._checkSelectionIncludeNodeExceptIE11=function(e,t,n){var r=e.document,i=r.selection.createRange(),s="compareEndPoints";if(t){i.moveToElementText(n);if(t.inRange(i)||t[s]("StartToStart",i)>=0&&t[s]("StartToEnd",i)<=0||t[s]("EndToStart",i)>=0&&t[s]("EndToEnd",i)<=0)return!0}return!1},t.prototype._getIESelectionRange=function(){var e=this,t=this._getDesignViewWindow(),n=t.document,r,i;return e._isIE11?(r=t.getSelection(),r&&r.rangeCount>0&&(i=r.getRangeAt(0))):i=n.selection.createRange(),i},t.prototype._setIESelection=function(e,t){var r;if(!n.browser.msie)return;!e&&!t&&(e=this.rangeSelection);if(e)try{r=this._getDesignViewDocument(),this._isIE11&&r.getSelection?r.getSelection().addRange(e):e.select()}catch(i){}},t.prototype._getSelectedContent=function(){var e=this._getDesignViewWindow(),t=e.document,n="",r="cloneContents",i,s,o;return t.selection?(i=t.selection.createRange(),i.htmlText):(i=e.getSelection().getRangeAt(0),i&&i[r]&&(s=i[r](),o=document.createElement("div"),o.appendChild(s),n=o.innerHTML,o=null),n||"")},t.prototype._getHtmlTextInIE=function(e){if(!n.browser.msie||!e)return"";var t="",r;return this._isIE11&&e.getSelection?(r=e.getSelection(),t=r.getRangeAt&&r.rangeCount?r.getRangeAt(0).toString():""):t=e.selection.createRange().htmlText,t},t.prototype._saveSelectionForIE=function(){var e=this._getDesignViewWindow().document,t,r,i;if(!n.browser.msie)return;if(this._isIE11&&e.getSelection){t=e.getSelection(),this.rangeSelection=t.getRangeAt&&t.rangeCount?t.getRangeAt(0):null;return}t=e.selection,i=t.createRange();if(n.browser.version&&parseFloat(n.browser.version)>=9&&parseFloat(n.browser.version)<=10&&i.parentElement){r=i.parentElement();if(r&&r.tagName=="INPUT"&&r.type=="hidden")return}this.rangeSelection=i},t.prototype._storeSelectionForIE=function(){var e=this._getDesignViewWindow().document,t,r,i,s;if(!n.browser.msie)return;e.selection?(t=e.selection.createRange(),t.getBookmark&&(this.bookmark=t.getBookmark())):e.getSelection&&e.getSelection().rangeCount&&(t=e.getSelection().getRangeAt(0),r=t.cloneRange(),r.selectNode(e.body),r.setEnd(t.startContainer,t.startOffset),i=r.toString().length,t.startContainer.nodeType===3?s=t.startContainer.nodeValue:s=t.startContainer.innerHTML,this.bookmark={startContainerText:s,start:i,end:i+t.toString().length})},t.prototype._restoreSelectionForIE=function(e){var t=this,r=this._getDesignViewWindow(),i=r.document,s=!1,o,u=0,a,f,l,c,h,p,d,v,m,g,y,b,w;if(!this.bookmark||!n.browser.msie)return;if(i.selection)e?o=setInterval(function(){u++,u>5||a?(f.select(),t.bookmark=null,clearInterval(o)):(f=i.body.createTextRange(),a=f.moveToBookmark(t.bookmark))},50):(f=i.body.createTextRange(),f.moveToBookmark(this.bookmark)&&f.select(),this.bookmark=null);else if(i.getSelection){l=this.bookmark.start,y=this.bookmark.end,c=this.bookmark.startContainerText,f=i.createRange(),f.setStart(i.body,0),h=[i.body],v=0;while(!p&&(d=h.pop()))if(d.nodeType==3)m=v+d.length,!g&&(s||d.nodeValue===c)&&l>=v&&l<=m&&(f.setStart(d,l-v),g=!0),g&&y>=v&&y<=m&&(f.setEnd(d,y-v),p=!0),v=m;else{d.innerHTML===c&&(s=!0),w=d.childNodes.length;while(w--)h.push(d.childNodes[w])}b=r.getSelection(),b.removeAllRanges(),b.addRange(f),this.rangeSelection=null,this.bookmark=null}},t.prototype._setSelection=function(e,t,r){var i=this._getDesignViewWindow(),s=i.document,o,u,a,f,l=0;try{window.getSelection?(f=i.getSelection(),o=s.createRange(),u=e[0][0],a=e[e.length-1][0],o.setStart(u,0),o.setEnd(a,a.childNodes.length),f.removeAllRanges(),f.addRange(o)):(o=s.selection.createRange(),e?(n.each(e,function(e,t){l+=t.text().length}),o.moveToElementText(e[0][0]),o.collapse(!0),o.moveEnd("character",l)):(o.moveStart("textedit",-1),o.collapse(!0),o.moveStart("character",t),o.moveEnd("character",r)),o.select())}catch(c){}},t.prototype._getHyperLinkElement=function(e){while(e&&e.tagName!=="A"){if(e.tagName==="BODY"||e.tagName==="HTML")break;e=e.parentElement}return e},t}(e.wijmoWidget);t.wijeditor=Cs;var ks=function(){function e(){this.initSelector=":jqmData(role='wijeditor')",this.fullScreenContainerSelector="",this.editorMode="wysiwyg",this.fullScreenMode=!1,this.fontSizes=[{tip:"VerySmall",name:"xx-small",text:"VerySmall"},{tip:"Smaller",name:"x-small",text:"Smaller"},{tip:"Small",name:"small",text:"Small"},{tip:"Medium",name:"medium",text:"Medium"},{tip:"Large",name:"large",text:"Large"},{tip:"Larger",name:"x-large",text:"Larger"},{tip:"VeryLarge",name:"xx-large",text:"VeryLarge"}],this.fontNames=[{tip:"Arial",name:"fn1",text:"Arial"},{tip:"Courier New",name:"fn2",text:"Courier New"},{tip:"Garamond",name:"fn3",text:"Garamond"},{tip:"Tahoma",name:"fn4",text:"Tahoma"},{tip:"Times New Roman",name:"fn5",text:"Times New Roman"},{tip:"Verdana",name:"fn6",text:"Verdana"},{tip:"Wingdings",name:"fn7",text:"Wingdings"}],this.showPathSelector=!0,this.mode="ribbon",this.commandButtonClick=null,this.simpleModeCommands=null,this.showFooter=!0,this.customContextMenu=!0,this.text=null,this.textChanged=null,this.localization=null}return e}();Cs.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new ks),Cs.prototype.options.tableVirtualBorderShowing=!0,n.wijmo.registerWidget("wijeditor",Cs.prototype);var Ls=dr+"-colorcanvas",As=dr+"-color",Os=dr+"-wheel",Ms=dr+"-overlay",_s=dr+"-marker";n.fn.wijeditorcolorcanvas=function(e,t){var n=this.get(0);return n.wijeditorcolorcanvas||(n.wijeditorcolorcanvas=new Ds(n,e,t))};var Ds=function(){function e(e,t,r){var i=this,s="",a,f;f="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, ",s+="<div class='"+Ls+"'>",s+="<div class='"+As+"'></div>",s+="<div class='"+Os+"'></div>",s+="<div class='"+Ms+"'></div>",s+="<div class='h-marker "+_s+"'></div>",s+="<div class='sl-marker "+_s+"'></div></div>",n(e).html(s),a=n("."+Ls,e),i.wheel=n("."+Os,e).get(0),i.radius=84,i.square=100,i.width=194,n.browser.msie&&parseInt(n.browser.version,10)<7&&n("*",a).each(function(){var e=this,t=e.currentStyle.backgroundImage;return t!=="none"&&(t=t.substring(5,t.length-2),n(e).css({backgroundImage:"none",filter:f+"src='"+t+"')"})),this}),i.linkTo=function(e){typeof i.callback=="object"&&n(i.callback).unbind("keyup",i.updateValue),i.color=null;if(typeof e=="function")i.callback=e;else if(typeof e=="object"||typeof e=="string")i.callback=n(e),i.callback.bind("keyup",i.updateValue),i.callback.get(0).value&&i.setColor(i.callback.get(0).value);return this},i.updateValue=function(e){var t=this;t.value&&t.value!==i.color&&i.setColor(t.value)},i.setColor=function(e){var t=i.unpack(e);return i.color!==e&&t&&(i.color=e,i.rgb=t,i.hsl=i.RGBToHSL(i.rgb),i.updateDisplay()),this},i.setHSL=function(e){return i.hsl=e,i.rgb=i.HSLToRGB(e),i.color=i.pack(i.rgb),i.updateDisplay(),this},i.widgetCoords=function(e){var t,r,s,o,u;return s=e.target||e.srcElement,o=i.wheel,u=i.absolutePosition(o),t=(e.pageX||0*(e.clientX+n("html").get(0).scrollLeft))-u.x,r=(e.pageY||0*(e.clientY+n("html").get(0).scrollTop))-u.y,{x:t-i.width/2,y:r-i.width/2}},i.mousedown=function(e){o.dragging||(n(o).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),o.dragging=!0);var t=i.widgetCoords(e);return i.circleDrag=Math.max(Math.abs(t.x),Math.abs(t.y))*2>i.square,i.mousemove(e),!1},i.mousemove=function(e){var t=i.widgetCoords(e),n,r,s;return i.circleDrag?(n=Math.atan2(t.x,-t.y)/6.28,n<0&&(n+=1),i.setHSL([n,i.hsl[1],i.hsl[2]])):(r=Math.max(0,Math.min(1,-(t.x/i.square)+.5)),s=Math.max(0,Math.min(1,-(t.y/i.square)+.5)),i.setHSL([i.hsl[0],r,s])),!1},i.mouseup=function(){n(o).unbind("mousemove",i.mousemove).unbind("mouseup",i.mouseup),o.dragging=!1},i.updateDisplay=function(){var e=i.hsl[0]*6.28,t;n(".h-marker",a).css({left:Math.round(Math.sin(e)*i.radius+i.width/2)+"px",top:Math.round(-Math.cos(e)*i.radius+i.width/2)+"px"}),n(".sl-marker",a).css({left:Math.round(i.square*(.5-i.hsl[1])+i.width/2)+"px",top:Math.round(i.square*(.5-i.hsl[2])+i.width/2)+"px"}),n("."+As,a).css("backgroundColor",i.pack(i.HSLToRGB([i.hsl[0],1,.5]))),typeof i.callback=="object"?(n(i.callback).css({backgroundColor:i.color,color:i.hsl[2]>.5?"#000":"#fff"}),n(i.callback).each(function(){return t=this,t.value&&t.value!==i.color&&(t.value=i.color),this})):typeof i.callback=="function"&&i.callback.call(i,i.color)},i.absolutePosition=function(e){var t={x:e.offsetLeft,y:e.offsetTop},n;return e.offsetParent&&(n=i.absolutePosition(e.offsetParent),t.x+=n.x,t.y+=n.y),t},i.pack=function(e){var t=Math.round(e[0]*255),n,r;return n=Math.round(e[1]*255),r=Math.round(e[2]*255),"#"+(t<16?"0":"")+t.toString(16)+(n<16?"0":"")+n.toString(16)+(r<16?"0":"")+r.toString(16)},i.unpack=function(e){if(e.length===7)return[u("0x"+e.substring(1,3))/255,u("0x"+e.substring(3,5))/255,u("0x"+e.substring(5,7))/255];if(e.length===4)return[u("0x"+e.substring(1,2))/15,u("0x"+e.substring(2,3))/15,u("0x"+e.substring(3,4))/15]},i.HSLToRGB=function(e){var t,n,r,i,s,o=this;return r=e[0],i=e[1],s=e[2],n=s<=.5?s*(i+1):s+i-s*i,t=s*2-n,[o.hueToRGB(t,n,r+.33333),o.hueToRGB(t,n,r),o.hueToRGB(t,n,r-.33333)]},i.hueToRGB=function(e,t,n){return n=n<0?n+1:n>1?n-1:n,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(.66666-n)*6:e},i.RGBToHSL=function(e){var t,n,r,i,s,o,u,a,f;return u=e[0],a=e[1],f=e[2],t=Math.min(u,Math.min(a,f)),n=Math.max(u,Math.max(a,f)),r=n-t,o=(t+n)/2,s=0,o>0&&o<1&&(s=r/(o<.5?2*o:2-2*o)),i=0,r>0&&(n===u&&n!==a&&(i+=(a-f)/r),n===a&&n!==f&&(i+=2+(f-u)/r),n===f&&n!==u&&(i+=4+(u-a)/r),i/=6),[i,s,o]},n("*",a).mousedown(i.mousedown),i.setColor(r||"#000000"),t&&i.linkTo(t)}return e}();t._wijeditorcolorcanvas=Ds})(e.editor||(e.editor={}));var t=e.editor})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(t,r){var i=this.options,s=n("."+i.wijCSS.wijratingResetButton,this.ratingElement[0]),o=n("."+i.wijCSS.wijratingStarContainer,this.ratingElement[0]),u=n("."+i.wijCSS.wijratingNormalStar,this.ratingElement[0]);if(n.isPlainObject(i[t])){switch(t){case"resetButton":typeof r.disabled!="undefined"&&r.disabled!==i[t].disabled&&(r.disabled?(s.hide(),s.attr("aria-hidden",!0)):i.disabled||(s.show(),s.attr("aria-hidden",!1))),typeof r.hint!="undefined"&&r.hint!==i[t].hint&&(r.hint===null?s.attr("title",""):s.attr("title",r.hint)),r.position&&r.position.length&&r.position!==i[t].position&&(r.position==="rightOrBottom"?s.parent().append(s):s.parent().prepend(s)),typeof r.customizedClass!="undefined"&&r.customizedClass!==i[t].customizedClass&&(i[t].customizedClass.length&&s.removeClass(i[t].customizedClass),r.customizedClass.length&&s.addClass(r.customizedClass));break;case"hint":typeof r.disabled!="undefined"&&r.disabled!==i[t].disabled&&(r.disabled?u.removeAttr("title"):this._resetHint(i.hint.content)),typeof r.content!="undefined"&&r.content!==i[t].content&&(i[t].disabled||this._resetHint(r.content));break;case"icons":typeof r.iconsClass!="undefined"&&(i[t].iconsClass&&i[t].iconsClass.length&&this._removeCustomizedIconsClass(i[t].iconsClass),this._addCustomizedIconsClass(r.iconsClass,i.split)),typeof r.hoverIconsClass!="undefined"&&i[t].hoverIconsClass&&i[t].hoverIconsClass.length&&this._removeCustomizedIconsClass(i[t].hoverIconsClass),typeof r.ratedIconsClass!="undefined"&&(i[t].ratedIconsClass&&i[t].ratedIconsClass.length&&this._removeCustomizedIconsClass(i[t].ratedIconsClass),this._resetValue(i.value,i.ratingMode,r.ratedIconsClass));break;default:}n.extend(!0,i[t],r)}else{if(r===i[t])return;switch(t){case"disabled":r?(this._unbindLiveEvents(),s.hide(),s.attr("aria-hidden",!0)):(this._bindLiveEvents(),i.resetButton.disabled||(s.show(),s.attr("aria-hidden",!1)));break;case"count":this._createStars(i.split,r,o);break;case"split":this._createStars(r,i.count,o);break;case"totalValue":this._resetTotalValue(r);break;case"orientation":r==="vertical"?this.ratingElement.addClass(i.wijCSS.wijvRating):this.ratingElement.removeClass(i.wijCSS.wijvRating),i.split>1&&(i[t]=r,this._createStars(i.split,i.count,o));break;case"direction":i[t]=r,this._createStars(i.split,i.count,o);break;case"ratingMode":this._resetValue(i.value,r,i.icons.ratedIconsClass);break;case"value":if(i.min&&r<i.min)return;if(i.max&&r>i.max)return;this._resetValue(r,i.ratingMode,i.icons.ratedIconsClass);break;case"iconWidth":i[t]=r,this._createStars(i.split,i.count,o);break;case"iconHeight":i[t]=r,this._createStars(i.split,i.count,o);break;default:}e.prototype._setOption.call(this,t,r)}},t.prototype._create=function(){var t=this.options,r;if(this.element.is("select"))this._parseSelect(),this.element.hide(),r=n("<div></div>"),this.element.after(r);else{if(!this.element.is("div"))return;this.element.children("input[type='radio']").length>0?(this._parseRadio(),this.element.hide(),r=n("<div></div>"),this.element.after(r)):r=this.element}this.ratingElement=r,this._createRating(),t.disabled||this._bindLiveEvents(),e.prototype._create.call(this)},t.prototype.destroy=function(){var t=this.options;this._unbindLiveEvents(),this.element!==this.ratingElement?(this.ratingElement.remove(),this.element.show()):this.element.removeClass(t.wijCSS.widget).removeClass(t.wijCSS.wijrating).removeClass(t.wijCSS.wijvRating).empty(),e.prototype.destroy.call(this)},t.prototype._unbindLiveEvents=function(){var e=this.options;this.ratingElement.off(".wijrating","."+e.wijCSS.wijratingNormalStar).off(".wijrating","."+e.wijCSS.wijratingResetButton)},t.prototype._bindLiveEvents=function(){var e=this,t=e.options,r="."+t.wijCSS.wijratingNormalStar,i="."+t.wijCSS.wijratingResetButton,s,o={element:e.ratingElement,mouseover:function(i){var o=n(i.target),u=n(r,e.ratingElement[0]);o.is(r)&&(u.removeClass(t.wijCSS.wijratingHoverStar),o.addClass(t.wijCSS.wijratingHoverStar),t.ratingMode==="continuous"&&(t.direction==="reversed"?o.parent().nextAll().children().addClass(t.wijCSS.wijratingHoverStar):o.parent().prevAll().children().addClass(t.wijCSS.wijratingHoverStar)),e._addCustomizedHoverIconsClass(t.icons.hoverIconsClass,t.split,o),s={value:parseFloat(o.html()),target:o},e._trigger("hover",i,s))},mouseout:function(i){var s=n(i.target),o=n(r,e.ratingElement[0]);s.is(r)&&(o.removeClass(t.wijCSS.wijratingHoverStar),e._removeCustomizedIconsClass(t.icons.hoverIconsClass))},click:function(i){var o=n(i.target),u=parseFloat(o.html()),a=n(r,e.ratingElement[0]),f={duration:500,easing:null,delay:250,animated:null},l=n.wijmo.wijrating.animations,c;n.extend(!0,f,t.animation),c=f.animated;if(!o.is(r))return;if(t.max&&u>t.max)return;if(t.min&&u<t.min)return;s={oldValue:t.value,newValue:u,target:o};if(e._trigger("rating",i,s)===!1)return!1;t.value=u,e._resetValue(u,t.ratingMode,t.icons.ratedIconsClass),a.removeClass(t.wijCSS.wijratingHoverStar),e._removeCustomizedIconsClass(t.icons.hoverIconsClass),s={value:u,target:o},c?l&&l[c]?l[c](t,a,function(){e._trigger("rated",i,s)}):n.effects&&(n.effects[c]||n.effects.effect&&n.effects.effect[c])?e._playJqueryAnimation(f,a,function(){n.browser.msie&&parseInt(n.browser.version)<9&&a.css("filter",""),e._trigger("rated",i,s)}):e._trigger("rated",i,s):e._trigger("rated",i,s)}},u={element:e.ratingElement,mouseover:function(e){var r=n(e.target);r=r.closest("."+t.wijCSS.wijratingResetButton),r.addClass(t.wijCSS.wijratingHoverResetButton).addClass(t.wijCSS.stateHover),t.resetButton.customizedHoverClass&&t.resetButton.customizedHoverClass.length&&r.addClass(t.resetButton.customizedHoverClass)},mouseout:function(e){var r=n(e.target);r=r.closest("."+t.wijCSS.wijratingResetButton),r.removeClass(t.wijCSS.wijratingHoverResetButton).removeClass(t.wijCSS.stateHover),t.resetButton.customizedHoverClass&&t.resetButton.customizedHoverClass.length&&r.removeClass(t.resetButton.customizedHoverClass)},click:function(t){var r=n(t.target);e._setOption("value",0),s={target:r},e._trigger("reset",t,s)}};this.ratingElement.on("mouseover.wijrating",r,n.proxy(o.mouseover,o)).on("mouseout.wijrating",r,n.proxy(o.mouseout,o)).on("click.wijrating",r,n.proxy(o.click,o)).on("mouseover.wijrating",i,n.proxy(u.mouseover,u)).on("mouseout.wijrating",i,n.proxy(u.mouseout,u)).on("click.wijrating",i,n.proxy(u.click,u))},t.prototype._createRating=function(){var e=this.ratingElement,t=this.options,r,i,s;e.addClass(t.wijCSS.wijrating).addClass(t.wijCSS.widget),t.orientation==="vertical"&&e.addClass(t.wijCSS.wijvRating),r=n("<div></div>").addClass(t.wijCSS.wijratingResetButton).addClass(t.wijCSS.cornerAll).addClass(t.wijCSS.stateDefault),t.resetButton.customizedClass&&t.resetButton.customizedClass.length&&r.addClass(t.resetButton.customizedClass),r.appendTo(e),r.attr("role","button").attr("aria-label","reset").attr("aria-hidden",!1),t.resetButton.hint&&t.resetButton.hint.length&&r.attr("title",t.resetButton.hint);if(t.resetButton.disabled||t.disabled)r.hide(),r.attr("aria-hidden",!0);i=n("<span></span>"),i.addClass(t.wijCSS.icon).addClass(t.wijCSS.iconClose),r.append(i),s=n("<div></div>"),s.attr("role","radiogroup").addClass(t.wijCSS.wijratingStarContainer),t.resetButton.position==="leftOrTop"?s.appendTo(e):s.prependTo(e),this._createStars(t.split,t.count,s)},t.prototype._createStars=function(e,t,r){var i=this.options,s=i.hint,o,u,a,f=0,l=0,c=0,h=Math.ceil(i.iconWidth/e),p=Math.ceil(i.iconHeight/e),d=i.icons.ratedIconsClass,v,m,g=d&&d.length;r.empty();for(l;l<t*e;l++,c++)a=Math.round((l+1)*i.totalValue*100/t/e)/100,f=Math.round((l+2)*i.totalValue*100/t/e)/100,c===e&&(c=0),u=n("<div></div>"),u.attr("role","radio").attr("aria-checked",!1),i.orientation==="vertical"?u.width(i.iconWidth).height(p):u.width(h).height(i.iconHeight),u.addClass(i.wijCSS.wijratingStar),o=n("<div>"+a+"</div>"),o.addClass(i.wijCSS.wijratingNormalStar).width(i.iconWidth).height(i.iconHeight),u.attr("aria-label",a),c>0&&i.direction==="normal"?i.orientation==="vertical"?o.css({"margin-top":"-"+c*p+"px"}):o.css({"margin-left":"-"+c*h+"px"}):c<e-1&&i.direction==="reversed"&&(i.orientation==="vertical"?o.css({"margin-top":"-"+(e-1-c)*p+"px"}):o.css({"margin-left":"-"+(e-1-c)*h+"px"})),s.disabled||(s.content&&s.content.length?l<=s.content.length&&(o.attr("title",s.content[l]),u.attr("aria-label",s.content[l])):o.attr("title",a)),g&&(typeof d=="string"?m=d:n.isArray(d)&&(v=Math.floor(l/e),d.length>v&&(m=d[v]))),a===i.value||f>i.value&&a<i.value&&i.ratingMode==="single"?(o.addClass(i.wijCSS.wijratingRatedStar),g&&o.addClass(m),u.attr("aria-checked",!0)):a<i.value&&i.ratingMode==="continuous"&&(o.addClass(i.wijCSS.wijratingRatedStar),g&&o.addClass(m)),o.appendTo(u),i.direction==="reversed"?u.prependTo(r):u.appendTo(r);this._addCustomizedIconsClass(i.icons.iconsClass,e)},t.prototype._resetValue=function(e,t,r){var i=this.options,s=n("."+i.wijCSS.wijratingNormalStar,this.ratingElement[0]),o=t||i.ratingMode,u=r&&r.length,a=0,f;n.each(s,function(t,l){var c=n(l),h=parseFloat(c.html()),p;t<s.length-1?p=parseFloat(n(s[t+1]).html()):p=i.direction==="normal"?i.totalValue+1:-1,c.removeClass(i.wijCSS.wijratingRatedStar),c.parent().attr("aria-checked",!1),u&&(typeof r=="string"?(c.removeClass(r),f=r):n.isArray(r)&&(n.each(r,function(e,t){c.removeClass(t)}),i.direction==="reversed"?a=Math.floor((s.length-1-t)/i.split):a=Math.floor(t/i.split),r.length>a&&(f=r[a]))),h===e||p>e&&h<e&&o==="single"?(c.addClass(i.wijCSS.wijratingRatedStar),u&&c.addClass(f),c.parent().attr("aria-checked",!0)):o==="continuous"&&h<e&&(c.addClass(i.wijCSS.wijratingRatedStar),u&&c.addClass(f))})},t.prototype._resetTotalValue=function(e){var t=this.options,r=t.hint,i=n("."+t.wijCSS.wijratingNormalStar,this.ratingElement[0]),s=i.length;n.each(i,function(i,u){var a=n(u),f=Math.round((i+1)*e*100/s)/100,l=parseFloat(a.html());l===t.value&&(t.value=f),a.html(f.toString()),r&&r.length&&r.length>=i&&r[i]&&r[i].length?a.attr("title",r[i]):a.attr("title",f)})},t.prototype._resetHint=function(e){var t=this.options,r=n("."+t.wijCSS.wijratingNormalStar,this.ratingElement[0]);n.each(r,function(t,r){var i=n(r),s=parseFloat(i.html());e&&e.length&&e.length>=t&&e[t]&&e[t].length?i.attr("title",e[t]):i.attr("title",s)})},t.prototype._clearIntentTimer=function(){this.intentTimers&&this.intentTimers.length&&n.each(this.intentTimers,function(e,t){t&&(window.clearTimeout(t),t=null)}),this.intentTimers=[]},t.prototype._playJqueryAnimation=function(e,t,r){var i=this,s=this,o=s.options,u={easing:e.easing},a=e.animated;s._clearIntentTimer(),n.each(t,function(f,l){var c=Math.floor(f/o.split)*e.delay,h;h=window.setTimeout(function(){n(l).hide(a,u,e.duration,function(){if(f!==t.length-1)return;n.each(t,function(f,l){var c=Math.floor(f/o.split)*e.delay,h;h=window.setTimeout(function(){n(l).show(a,u,e.duration,function(){f===t.length-1&&r&&n.isFunction(r)&&r.call(i)})},c),s.intentTimers.push(h)})})},c),s.intentTimers.push(h)})},t.prototype._addCustomizedIconsClass=function(e,t){var r=this,i=r.options,s,o=0,u=0;e&&e.length&&(s=n("."+i.wijCSS.wijratingNormalStar,r.ratingElement[0]),n.each(s,function(i,s){o===t&&(o=0,u++);if(typeof e=="string")n(s).addClass(e);else if(n.isArray(e)){var a=e.length;u<a&&(r.options.direction==="reversed"?n(s).addClass(e[a-u-1]):n(s).addClass(e[u]))}o++}))},t.prototype._addCustomizedHoverIconsClass=function(e,t,r){var i=this.options,s=i.direction,o=i.ratingMode,u=n("."+i.wijCSS.wijratingNormalStar,this.ratingElement[0]),a=u.index(r),f=0,l;if(e&&e.length)if(typeof e=="string")r.addClass(e),o!=="single"&&(s==="reversed"?r.parent().nextAll().children().addClass(e):r.parent().prevAll().children().addClass(e));else if(n.isArray(e))if(o==="single")s==="reversed"?l=u.length-1-a:l=a,f=Math.floor(l/t),e.length>f&&r.addClass(e[f]);else if(s==="reversed")for(l=u.length-1;l>=a;l--)f=Math.floor((u.length-1-l)/t),e.length>f&&n(u[l]).addClass(e[f]);else for(l=0;l<=a;l++)f=Math.floor(l/t),e.length>f&&n(u[l]).addClass(e[f])},t.prototype._removeCustomizedIconsClass=function(e){var t=this.options,r=n("."+t.wijCSS.wijratingNormalStar,this.ratingElement[0]);e&&e.length&&(typeof e=="string"?r.removeClass(e):n.isArray(e)&&n.each(e,function(e,t){r.removeClass(t)}))},t.prototype._parseSelect=function(){var e=this.options,t=[],r=n("option",this.element);r.length&&(e.count=r.length,e.totalValue=r.length,n.each(r,function(r,i){var s=n(i);t.push(s.html()),s.is(":selected")&&(e.value=r+1)}),e.hint.content=t)},t.prototype._parseRadio=function(){var e=this,t=e.options,r=[],i=n("input[type='radio']",e.element);i.length&&(t.count=i.length,t.totalValue=i.length,n.each(i,function(i,s){var u=n(s),a=u.attr("id"),f;a&&a.length>0?(f=n("label[for='"+a+"']",e.element),f.length?r.push(f.html()):r.push("")):r.push(""),u.is(":checked")&&(t.value=i+1)}),t.hint.content=r)},t}(e.wijmoWidget);t.wijrating=r;var i=function(){function e(){this.wijCSS={wijrating:"wijmo-wijrating",wijratingStarContainer:"wijmo-wijrating-starcontainer",wijratingResetButton:"wijmo-wijrating-reset",wijratingHoverResetButton:"wijmo-wijrating-resethover",wijratingStar:"wijmo-wijrating-star",wijratingNormalStar:"wijmo-wijrating-normal",wijratingHoverStar:"wijmo-wijrating-hover",wijratingRatedStar:"wijmo-wijrating-rated",wijvRating:"wijmo-wijrating-vertical"},this.wijMobileCSS={iconClose:"ui-icon-delete"},this.disabled=!1,this.count=5,this.split=1,this.totalValue=5,this.value=0,this.min=null,this.max=null,this.resetButton={disabled:!1,hint:"cancel this rating!",position:"leftOrTop",customizedClass:"",customizedHoverClass:""},this.hint={disabled:!1,content:null},this.orientation="horizontal",this.direction="normal",this.ratingMode="continuous",this.icons={iconsClass:null,hoverIconsClass:null,ratedIconsClass:null},this.iconWidth=16,this.iconHeight=16,this.animation=null,this.rating=null,this.rated=null,this.reset=null,this.hover=null}return e}();r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijrating",r.prototype),n.mobile&&(n.mobile.selectmenu.initSelector=n.mobile.selectmenu.initSelector+":not( :jqmData(role='wijrating') )"),n.extend(n.wijmo.wijrating,{animations:{scroll:function(e,t,r){var i=e,s=r,o=250,u=500,a="linear",f=250,l=jQuery.makeArray(t);l.reverse(),n.each(l,function(e,r){var l=Math.floor(e/i.split)*f,c={width:0},h,p;h=window.setTimeout(function(){n(r).animate(c,o,a,function(){window.clearTimeout(h);if(e!==t.length-1)return;p=window.setTimeout(function(){n.each(t,function(e,r){var u=Math.floor(e/i.split)*f,l={width:i.iconWidth},c;c=window.setTimeout(function(){n(r).animate(l,o,a,function(){window.clearTimeout(c),e===t.length-1&&s&&n.isFunction(s)&&s.call()})},u)}),window.clearTimeout(p)},u)})},l)}),r&&n.isFunction(r)&&r.call()}}})})(e.rating||(e.rating={}));var t=e.rating})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var t=this;t._handleChartStyles(),e.prototype._create.call(this),t.chartElement.addClass(t.options.wijCSS.scatter)},n.prototype.destroy=function(){var t=this;t.chartElement.removeClass(t.options.wijCSS.scatter),e.prototype.destroy.call(this)},n.prototype.getScatter=function(e,t){var n=this,r=n.chartElement.data("fields"),i,s,o,u;if(r&&r.chartElements){o=r.chartElements.scatters;if(o&&o.length){s=o.length;if(e<0||e>=s)return i;u=o[e];if(typeof t=="undefined")return u;s=u.length;if(u&&s)return t<0||t>=s?i:u[t]}return i}},n.prototype._paintLegendIcon=function(t,n,r,i,s,o,u,a,f,l){var c=this,h=Math.min(r,i),p,d=f.markerType,v;return f.isTrendline?e.prototype._paintLegendIcon.call(this,t,n,r,i,s,o,u,a,f,l):(p=f.markerStyle,p=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},p),d||(d="circle"),v=c.canvas.paintMarker(d,t+r/2,n+i/2,3),$(v.node).data("legendIndex",o).data("index",u),c.legendIcons.push(v),v.attr(p),$.wijraphael.addClass($(v.node),a),f.visible===!1&&($(l.node).data("dotOpacity",v.attr("opacity")||1),v.attr("opacity",.3)),v)},n.prototype._paintLegend=function(){var t=this,n=t.options,r=[].concat(n.seriesList),i=n.seriesStyles,s=0;$.extend(!0,n,{legend:{size:{width:20,height:10}}}),e.prototype._paintLegend.call(this)},n.prototype._showSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t.show(),t.label&&t.label.show(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!0)})},n.prototype._hideSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t.hide(),t.label&&t.label.hide(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!1)})},n.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.dot&&(t.dot.attr(t.hoverStyle),t.dot.scale(1.5,1.5))})},n.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.dot&&(t.dot.attr(t.style),t.dot.scale(1,1))})},n.prototype._paintTooltip=function(){var t=this,n=t.chartElement,r=n.data("fields");e.prototype._paintTooltip.call(this),t.tooltip&&r&&r.chartElements&&r.chartElements.tooltipTars&&(t.tooltip.setTargets(r.chartElements.tooltipTars),t.tooltip.setOptions({mouseTrailing:!1}))},n.prototype._getTooltipText=function(e,t){var n=$(t).data("wijchartDataObj"),r={data:n,label:n.label,x:n.x,y:n.y,type:n.markerType,target:t,fmt:e};return $.proxy(e,r)()},n.prototype._onBeforeTooltipShowing=function(t){var n=this,r=t.options,i=n.options.hint.style,s=t.target,o,u;s&&($.browser.msie&&parseInt($.browser.version)<9?(o=$(s).data().wijchartDataObj,u=o.style,r.style.stroke=i.stroke||u.stroke||u.fill||"#ffffff"):r.style.stroke=i.stroke||s.getAttribute("stroke")||s.getAttribute("fill")||"#ffffff",s.attrs={stroke:r.style.stroke}),e.prototype._onBeforeTooltipShowing.call(this,t)},n.prototype._clearChartElement=function(){var e=this,t=e.chartElement.data("fields");e._stopAnimation(),e.headerEles.length&&($.each(e.headerEles,function(e,t){t.wijRemove(),t=null}),e.headerEles=[]),e.footerEles.length&&($.each(e.footerEles,function(e,t){t.wijRemove(),t=null}),e.footerEles=[]),e.legendEles.length&&($.each(e.legendEles,function(e,t){t.wijRemove(),t=null}),e.legendEles=[]),e.legends.length&&($.each(e.legends,function(e,t){t.wijRemove(),t=null}),e.legends=[]),e.legendIcons.length&&($.each(e.legendIcons,function(e,t){t.wijRemove(),t=null}),e.legendIcons=[]),e.legendDots.length&&($.each(e.legendDots,function(e,t){t=null}),e.legendDots=[]),e.axisEles.length&&($.each(e.axisEles,function(e,t){t.wijRemove(),t=null}),e.axisEles=[]),e.chartLabelEles.length&&($.each(e.chartLabelEles,function(e,t){t.wijRemove(),t=null}),e.chartLabelEles=[]),t&&t.chartElements&&($.each(t.chartElements,function(e,n){n.length&&$.each(n,function(e,t){t[0]!==null&&(t.remove&&t.remove(),n[e]=null)}),t.chartElements[e]=null}),t.chartElements={},$(t.clipRect.element).stop().remove(),t.render.destroy(),t.clipRect.destroy()),e.dataPoints=null,e.pointXs=null,e.canvas.clear(),e.innerState={}},n.prototype._paintPlotArea=function(){var e=this,t=e.options;this.scatterRender=new s(this.chartElement,{bounds:e.canvasBounds,widgetName:e.widgetName,canvas:e.canvas,tooltip:e.tooltip,axis:t.axis,animation:t.animation,seriesTransition:t.seriesTransition,seriesList:t.seriesList,seriesStyles:t.seriesStyles,seriesHoverStyles:t.seriesHoverStyles,hint:t.hint,disabled:t.disabled,isXTime:e.axisInfo.x.isTime,isYTime:e.axisInfo.y[0].isTime,zoomOnHover:t.zoomOnHover,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),showChartLabels:t.showChartLabels,chartLabelStyle:t.chartLabelStyle,chartLabelFormatString:t.chartLabelFormatString,culture:e._getCulture(),wijCSS:t.wijCSS,widget:this}),this.scatterRender.render()},n.prototype._stopAnimation=function(){this.scatterRender&&this.scatterRender.stopAnimation()},n}(t.wijchartcore);t.wijscatterchart=n,n.prototype.widgetEventPrefix="wijscatterchart";var r=function(e){function t(){e.apply(this,arguments),this.scatter="wijmo-wijscatterchart",this.scatterElement="wijscatterchart"}return __extends(t,e),t}(t.wijchartcore_css);t.wijscatterchart_css=r;var i=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijscatterchart')",this.wijCSS=new e.chart.wijscatterchart_css,this.animation={enabled:!0,duration:2e3,easing:">"},this.showChartLabels=!1,this.seriesTransition={enabled:!0,duration:2e3,easing:">"},this.zoomOnHover=!0,this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);n.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new i),$.wijmo.registerWidget("wijscatterchart",n.prototype);var s=function(){function e(e,t){this.scatters=[],this.chartLabels=[],this.tooltipTars=[],this.seriesEles=[],this.paths=[],this.aniPathsAttr=[],this.fieldsAniPathAttr=[],this.element=e,this.options=t,this._init()}return e.prototype._init=function(){var e=this.element,n=this.options,r=n.bounds,i=n.axis.x.min,s=n.axis.y.min,o=n.axis.x.max,u=n.axis.y.max;this.width=r.endX-r.startX,this.height=r.endY-r.startY,this.plotInfo={minX:i,minY:s,maxX:o,maxY:u,width:this.width,height:this.height,kx:this.width/(o-i),ky:this.height/(u-s)},this.fields=e.data("fields")||{},e.find("svg").length>0?this.chartRender=t.render.createRender(e.find("svg").get(0),e.width(),e.height()):this.chartRender=t.render.createRender(e.children(":first").addClass("vmlcontainer").get(0),e.width(),e.height()),this.clipRect=this.chartRender.clipRect(0,0,0,e.height()),this.g=this.chartRender.g(),this.g.clip(this.clipRect),this.g.add(),this.fields.render=this.chartRender,this.fields.clipRect=this.clipRect,this.animationSet=this.options.canvas.set()},e.prototype.bindLiveEvents=function(){var e=$.isFunction,n=this.options,r=n.wijCSS,i=this.element,s=n.widgetName,o=n.mouseDown,u=n.mouseUp,a=n.mouseOver,f=n.mouseOut,l=n.mouseMove,c=n.click,h=n.zoomOnHover,p=n.seriesHoverStyles,d=n.seriesStyles,v=n.disabled,m="";$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(m="wij"),$("."+r.scatterElement,i[0]).on(m+"mousedown."+s,function(t){if(v)return;if(e(o)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),o.call(i,t,n)}}).on(m+"mouseup."+s,function(t){if(v)return;if(e(u)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),u.call(i,t,n)}}).on(m+"mouseover."+s,function(t){if(v)return;var n=$(t.target).data("wijchartDataObj"),r,s,o;n||(n=$(t.target.parentNode).data("wijchartDataObj")),o=n.dot,h&&(r=n.seriesIndex,o.attr&&(s=$.extend(!0,{},p[r]),o.attr(s)),document.createElementNS?o.scale(1.5,1.5):o.attr("stroke-width",5)),e(a)&&a.call(i,t,n)}).on(m+"mouseout."+s,function(t){if(v)return;var n=$(t.target).data("wijchartDataObj"),r,s;n||(n=$(t.target.parentNode).data("wijchartDataObj")),s=n.dot,h&&(r=n.seriesIndex,s.attr&&s.attr($.extend(!0,{},d[r]))),document.createElementNS&&s.scale(1,1),e(f)&&f.call(i,t,n)}).on(m+"mousemove."+s,function(t){if(v)return;if(e(l)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),l.call(i,t,n)}}).on(m+"click."+s,function(t){if(v)return;if(e(c)){var n=$(t.target).data("wijchartDataObj");n||(n=$(t.target.parentNode).data("wijchartDataObj")),c.call(i,t,n)}}),t.TrendlineRender.bindLiveEvents(i,s,o,u,a,f,l,c,v,r,!1)},e.prototype.unbindLiveEvents=function(){var e=this.options,n=e.widgetName,r=e.wijCSS;$("."+r.scatterElement,this.element).off(n).off("."+n),t.TrendlineRender.unbindLiveEvents(this.element,n,r)},e.prototype.paintDefaultChartLabel=function(e,t,n){var r=this.options,i=$.extend(!0,{},r.textStyle,r.chartLabelStyle),s,o=r.chartLabelFormatString,u;return r.isYTime?s=Globalize.format(n,"f",r.culture):s=$.round(n,2),o&&o.length&&(s=Globalize.format(s,o,r.culture)),u=this.chartRender.text(e,t,s),u},e.prototype.paintScatters=function(){var e=this,n=e.options,r=n.seriesList,i=n.seriesStyles,s=n.seriesHoverStyles,o=n.isXTime,u=n.isYTime,a=n.bounds,f=this.plotInfo,l=n.wijCSS,c=n.showChartLabels,h=n.chartLabelStyle,p=n.widget,d=[];$.each(r,function(n,r){var v=r.data,m,g=r.markerWidth||5,y=i[n],b=s[n],w=v.x,E=v.y,S=[],x=[],T;if(r.isTrendline)return t.TrendlineRender.renderSingleTrendLine(r,i[n],s[n],e.options.axis,undefined,e.fieldsAniPathAttr,e.options.animation,e.options.seriesTransition,n,a,e.options.canvas,e.paths,d,e.animationSet,e.aniPathsAttr,l,e.seriesEles),!0;r=$.extend(!0,{visible:!0,markerType:"circle"},r),m=r.markerType;if(r.display==="exclude")return!0;!y.fill&&y.stroke&&(y.fill=y.stroke);if(w===undefined)return!0;$.each(E,function(t,i){var s=w[t],d=0,v=0,N,C,k,L={};o&&(s=$.toOADate(s)),u&&(i=$.toOADate(i));if(typeof s=="undefined")return!1;isNaN(s)||typeof s=="string"?N=t:N=s,d=a.startX+(N-f.minX)*f.kx,v=a.endY-(i-f.minY)*f.ky,y.opacity&&(y["fill-opacity"]=y.opacity,y["stroke-opacity"]=y.opacity,delete y.opacity),m==="cross"&&y["stroke-width"]!==undefined&&y["stroke-width"]===0&&(y["stroke-width"]=1),C=e.chartRender.symbol(m,d,v,g),C.attr(y),C.add(e.g),C.attr({"class":l.canvasObject+" "+l.scatterElement}),L=$.extend(!1,{dot:C,x:w[t],y:E[t],seriesIndex:n,index:t,markerType:m,type:"scatter",style:y,hoverStyle:b,visible:!0},r),c&&(k=e.paintDefaultChartLabel(d,v-6,E[t]),k.add(e.g),h=$.extend({"font-size":"10px",fill:"#888","font-family":"Arial"},h),k.attr(h),C.label=k,e.chartLabels.push(k)),p.dataPoints=p.dataPoints||{},p.pointXs=p.pointXs||[],T=$.round(d,2),p.dataPoints[T.toString()]||(p.dataPoints[T.toString()]=[],p.pointXs.push(T)),p.dataPoints[T.toString()].push(L),$(C.element).data("wijchartDataObj",L),S.push(C),e.tooltipTars.push($.extend({},C,{node:C.element})),x.push(C),r.visible===!1&&C.hide()}),e.scatters.push(S),e.seriesEles.push(x)})},e.prototype.playAnimation=function(){var e=this,n=e.options,r=n.animation,i=e.element,s=i.css("background-color"),o={txx:n.widget.extremeValue.txx,txn:n.widget.extremeValue.txn,tyx:n.widget.extremeValue.y[0].tyx,tyn:n.widget.extremeValue.y[0].tyn};r.enabled?(s==="transparent"&&(s="white"),e.clipRect.getCSS?$(e.clipRect.members[0].element).animate({width:i.width()},{duration:r.duration,step:function(t){e.clipRect.width=t;var n=e.clipRect.getCSS();$(this).css(n)}}):$(e.clipRect.element).animate({width:i.width()},{duration:r.duration,step:function(t){e.clipRect.attr("width",t)}}),e.paths&&e.paths.length&&t.TrendlineRender.playAnimation(r.duration,r.easing,n.seriesTransition,e.animationSet,n.bounds,e.paths,e.fieldsAniPathAttr,null,n.axis,o)):e.clipRect.getCSS?($(e.clipRect.members[0].element).css({width:i.width()}),e.clipRect.width=i.width(),$(e.clipRect.members[0].element).css(e.clipRect.getCSS())):($(e.clipRect.element).css({width:i.width()}),e.clipRect.attr("width",i.width()))},e.prototype.stopAnimation=function(){this.clipRect.members&&this.clipRect.members.length>0?$(this.clipRect.members[0].element).stop(!0):$(this.clipRect.element).stop(!0)},e.prototype.render=function(){this.paintScatters(),this.playAnimation(),this.unbindLiveEvents(),this.bindLiveEvents(),this.chartEles={animationSet:this.animationSet,tooltipTars:this.tooltipTars,scatters:this.scatters,labels:this.chartLabels,trendLines:this.paths},this.fields.chartElements||(this.fields.chartElements={}),this.fields.seriesEles=this.seriesEles,$.extend(!0,this.fields.chartElements,this.chartEles),this.element.data("fields",this.fields)},e}();t.ScatterChartRender=s})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(e){function w(e){return typeof e=="string"}function E(e){return typeof e=="number"}function S(e){return e!==undefined&&e!==null}function x(e,t,n){var r="setAttribute",i;return w(t)?S(n)?e[r](t,n):e&&e.getAttribute&&(i=e.getAttribute(t)):S(t)&&$.isPlainObject(t)&&$.each(t,function(t,n){e[r](t,n)}),i}function T(e,t){r&&t&&t.opacity!==undefined&&(t.filter="alpha(opacity="+t.opacity*100+")"),$.extend(e.style,t)}function N(e,n,r){var i=t.createElement(e);return n&&$.extend(i,n),r&&T(i,r),i}function C(e){$.each(e,function(t,n){e[t]&&e[t].destroy&&e[t].destroy(),delete e[t]})}function D(e,t,n){return o?new O(e,t,n):new _(e,t,n)}var t=document,n=$.each,r=$.browser.msie,i=t.documentMode===8,s="http://www.w3.org/2000/svg",o=!!t.createElementNS&&!!t.createElementNS(s,"svg").createSVGRect,u=0,a="div",f="absolute",l="hidden",c="scatterchart-",h="visible",p="visibility",d="px",v="none",m="M",g="L",y=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,b=/^(\d{1,3})\-(?:((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))\-)(?:(?:((?:(?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))(?:\:\d{1,3})?)\-)?)*((?:[a-zA-Z]+)|(?:\#[0-9a-fA-F]{6})|(?:\#[0-9a-fA-F]{3}))$/,k=function(){function e(){}return e.prototype.attr=function(e,t){},e.prototype.scale=function(e,t){},e.prototype.symbolAttr=function(e){},e.prototype.clip=function(e){},e.prototype.crisp=function(e,t,n,r,i){},e.prototype.css=function(e){},e.prototype.getBBox=function(){},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.add=function(e){},e.prototype.destroy=function(){},e.prototype.empty=function(){},e.prototype.remove=function(){},e}();e.ChartElement=k;var L=function(){function e(e,t,n){}return e.prototype.destroy=function(){},e.prototype.createElement=function(e){},e.prototype.path=function(e){return this._element},e.prototype.circle=function(e,t,n){return this._element},e.prototype.rect=function(e,t,n,r,i,s){return this._element},e.prototype.setSize=function(e,t){},e.prototype.g=function(e){return this._element},e.prototype.text=function(e,t,n){return this._element},e.prototype.symbol=function(e,t,n,r,i){return this._element},e.prototype.clipRect=function(e,t,n,r){return this._element},e}();e.ChartRender=L;var A=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype.init=function(e,n){this.element=t.createElementNS(s,n),this.renderer=e},i.prototype.attr=function(e,t){var n,r,i=this.element,s=this.renderer,o=i.nodeName,u,a=this;if(e===undefined)return;return w(e)&&S(t)&&(n=e,e={},e[n]=t),w(e)?(n=e,o==="circle"&&(n={x:"cx",y:"cy"}[n]||n),a=x(i,n)||this[n]||0,n!=="d"&&n!==p&&(a=parseFloat(a))):e&&$.each(e,function(t,n){u=!1,r=e[t],t==="d"?(r&&r.join&&(r=r.join(" ")),/(NaN| {2}|^$)/.test(r)&&(r="M 0 0"),this.d=r):t==="fill"?r=s._color(r,i,t):t==="transform"?r=s._transform(e[t],i):o==="circle"&&(t==="x"||t==="y")&&(t={x:"cx",y:"cy"}[t]||t),jQuery.browser.safari&&t==="stroke-width"&&r===0&&(r=1e-6),u||x(i,t,r),i.attrs=i.attrs||{},i.attrs[t]=r}),a},i.prototype.scale=function(e,t){var n=this,r=n.getBBox(),i=-(r.x+r.width/2)/2,s=-(r.y+r.height/2)/2;e===1&&(i=0),t===1&&(s=0),n.attr("transform","matrix("+e+",0,0, "+t+","+i+","+s+")")},i.prototype.symbolAttr=function(e){var t=this;n(["x","y","r","start","end","width","height","innerR"],function(n,r){e[r]?t[r]=e[r]:t[r]=t[r]}),t.attr({d:t.renderer.symbols[t.symbolName](Math.round(t.x*2)/2,Math.round(t.y*2)/2,t.r,{start:t.start,end:t.end,width:t.width,height:t.height,innerR:t.innerR})})},i.prototype.clip=function(e){return this.attr("clip-path","url("+this.renderer.url+"#"+e.id+")")},i.prototype.crisp=function(e,t,n,r,i){var s=this,o,u={},a={},f;e=e||s.strokeWidth||0,f=e%2/2,a.x=Math.floor(t||s.x||0)+f,a.y=Math.floor(n||s.y||0)+f,a.width=Math.floor((r||s.width||0)-2*f),a.height=Math.floor((i||s.height||0)-2*f),a.strokeWidth=e;for(o in a)s[o]!==a[o]&&(s[o]=u[o]=a[o]);return u},i.prototype.css=function(e){var t=this,n=t.element,i=e&&e.width&&n.nodeName==="text",s="",u=function(e,t){return"-"+t.toLowerCase()};return e&&e.color&&(e.fill=e.color),e=$.extend(t.styles,e),t.styles=e,r&&!o?(i&&delete e.width,T(t.element,e)):($.each(e,function(t,n){s+=n.replace(/([A-Z])/g,u)+":"+e[n]+";"}),t.attr({style:s})),t},i.prototype.getBBox=function(){var e,t,n,r=this.rotation,i=r*Math.PI*2/360;try{e=$.extend({},this.element.getBBox())}catch(s){e={width:0,height:0}}return t=e.width,n=e.height,r&&(e.width=Math.abs(n*Math.sin(i))+Math.abs(t*Math.cos(i)),e.height=Math.abs(n*Math.cos(i))+Math.abs(t*Math.sin(i))),e},i.prototype.show=function(){return this.attr({visibility:h})},i.prototype.hide=function(){return this.attr({visibility:l})},i.prototype.add=function(e){var t=this,n=t.renderer,r=e||n,i=r.element||n.box,s=i.childNodes,o=t.element,u=x(o,"zIndex"),a,f,l;e&&t.htmlNode&&(e.htmlNode||(e.htmlNode=[]),e.htmlNode.push(t)),u&&(r.handleZ=!0,u=parseInt(u,10));if(r.handleZ)for(l=0;l<s.length;l++){a=s[l],f=x(a,"zIndex");if(a!==o&&(parseInt(f,10)>u||!S(u)&&S(f)))return i.insertBefore(o,a),t}return i.appendChild(o),t.added=!0,t},i.prototype._safeRemoveChild=function(e){var t=e.parentNode;t&&t.removeChild(e)},i.prototype.destroy=function(){var e=this,t=e.element||{},r=e.shadows,i=e.box,s;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=null,e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(s=0;s<e.stops.length;s++)e.stops[s]=e.stops[s].destroy();e.stops=null}return e._safeRemoveChild(t),r&&n(r,function(t){e._safeRemoveChild(t)}),i&&i.destroy(),$.each(e,function(t,n){delete e[t]}),null},i.prototype.empty=function(){var e=this.element,t=e.childNodes,n=t.length;while(n--)e.removeChild(t[n]),$(t[n]).remove()},i.prototype.remove=function(){var e=this.element,t=e.parentNode;t.removeChild(e),$(e).remove()},i}(k),O=function(e){function n(t,n,r){e.call(this,t,n,r),this.gradientCache={},this.init(t,n,r)}return __extends(n,e),n.prototype.init=function(e,i,o){var u=this,a=t.location,f;this.symbols=n._symbols,this.Element=A,$(e).is("svg")?(u.box=e,f=new u.Element,f.element=e,f.render=u,u.defs=$("defs",e).get(0),u.gradients={}):(f=u.createElement("svg").attr({xmlns:s,version:"1.1"}),e.appendChild(f.element),u.box=f.element,u.boxWrapper=f,u.defs=this.createElement("defs").add(),u.gradients={},u.setSize(i,o)),u.url=r?"":a.href.replace(/#.*?$/,"")},n.prototype.destroy=function(){var e=this;return e.box=null,C(e.gradients||{}),e.gradients=null,null},n.prototype.createElement=function(e){var t=new this.Element;return t.init(this,e),t},n.prototype.path=function(e){var t=this.createElement("path");return t.attr({d:e,fill:v}),t},n.prototype.circle=function(e,t,n){var r=$.isPlainObject(e)?e:{x:e,y:t,r:n},i=this.createElement("circle");return i.attr(r),i},n.prototype.rect=function(e,t,n,r,i,s){$.isPlainObject(e)&&(t=e.y,n=e.width,r=e.height,i=e.r,s=e.strokeWidth,e=e.x);var o=this.createElement("rect");return o.attr({rx:i,ry:i,fill:v}),o.attr(o.crisp(s,e,t,Math.max(n,0),Math.max(r,0))),o},n.prototype.setSize=function(e,t){var n=this;n.width=e,n.height=t,n.boxWrapper.attr({width:e,height:t})},n.prototype.g=function(e){var t=this.createElement("g");return S(e)&&t.attr({"class":c+e}),t},n.prototype.text=function(e,t,n){$.isPlainObject(e)&&(t=e.y,n=e.text,e=e.x);var r=this.createElement("text");return r.attr({x:e,y:t,"text-anchor":"middle"}),r.element.textContent=n,r},n.prototype.symbol=function(e,t,n,r,i){var s,o=this,u=o.symbols[e],a=u&&u(Math.round(t),Math.round(n),r,i);return a?(s=o.path(a),$.extend(s,{symbolName:e,x:t,y:n,r:r}),i&&$.extend(s,i)):s=o.circle(t,n,r),s},n.prototype.clipRect=function(e,t,n,r){var i,s=c+u++,o=this.createElement("clipPath");return o.attr({id:s}),$(this.defs).append(o.element),i=this.rect(e,t,n,r,0).add(o),i.id=s,i.clipPath=o,i},n.prototype._parsegradientcolor=function(e){var t=this,n=[],r,i,s,o,u,a,f,l;if(t.gradientCache[e])return t.gradientCache[e];for(s=0,a=e.length;s<a;s++){r={},i=e[s].match(/^([^:]*):?([\d\.]*)/),r.color=Raphael.getRGB(i[1]);if(r.color.error)return null;r.color=r.color.hex,i[2]&&(r.offset=i[2]+"%"),n.push(r)}for(s=1,a=n.length-1;s<a;s++)if(!n[s].offset){o=parseFloat(n[s-1].offset||0),u=0;for(f=s+1;f<a;f++)if(n[f].offset){u=n[f].offset;break}u||(u=100,f=a),u=parseFloat(u),l=(u-o)/(f-s+1);for(;s<f;s++)o+=l,n[s].offset=o+"%"}return t.gradientCache[e]=n,n},n.prototype._color=function(e,t,n){var r=this,i="color",s=.5,o=.5,a=r.gradients,f,l,h,p,d,v,m,g,w,E,S=e,T,N,C;b.test(e)?i="linear":e=e.replace(y,function(e,t,n){i="radial";if(t&&n){s=parseFloat(t),o=parseFloat(n);var r=o>.5?1:-1;Math.pow(s-.5,2)+Math.pow(o-.5,2)>.25&&(o=Math.sqrt(.25-Math.pow(s-.5,2))*r+.5)&&o!==.5&&(o=parseFloat(o.toFixed(5))-1e-5*r)}return""});if(i==="linear"||i==="radial"){l=e.split(/\s*\-\s*/);if(i==="linear"){N=l.shift(),N=-parseFloat(N);if(isNaN(N))return e;g=[0,0,Math.cos(Raphael.rad(N)),Math.sin(Raphael.rad(N))],w=1/(Math.max(Math.abs(g[2]),Math.abs(g[3]))||1),g[2]*=w,g[3]*=w,g[2]<0&&(g[0]=-g[2],g[2]=0),g[3]<0&&(g[1]=-g[3],g[3]=0),h=g[0],p=g[1],d=g[2],v=g[3]}return a[S]?T=x(a[S].element,"id"):(C=this._parsegradientcolor(l),$.each(C,function(e,t){t.offset=t.offset?t.offset:e?"100%":"0%"}),T=c+u++,f=r.createElement(i+"Gradient"),i==="radial"?f.attr({id:T,fx:s,fy:o}):f.attr({id:T,x1:h,y1:p,x2:d,y2:v}),$(this.defs).append(f.element),f.stops=[],$.each(C,function(e,t){var n;m=t.color,E=1,n=r.createElement("stop"),n.attr({offset:t.offset,"stop-color":m,"stop-opacity":E}).add(f),f.stops.push(n)}),a[S]=f),"url(#"+T+")"}return t.removeAttribute(n+"-opacity"),e},n.prototype._transform=function(e,t){var n=this,r=Raphael.parseTransformString(e),i=t,s=Raphael.matrix(1,0,0,1,0,0);if(r)for(var o=0,u=r.length;o<u;o++){var a=r[o],f=a.length,l=String(a[0]).toLowerCase(),c=a[0]!=l,h,p,d,v,m,g;c&&(h=s.invert()),l=="t"&&f==3?c?(p=h.x(0,0),d=h.y(0,0),v=h.x(a[1],a[2]),m=h.y(a[1],a[2]),s.translate(v-p,m-d)):s.translate(parseFloat(a[1]),parseFloat(a[2])):l=="r"?f==2?(g=g||t.getBBox(),s.rotate(parseFloat(a[1]),g.x+g.width/2,g.y+g.height/2)):f==4&&(c?(v=h.x(a[2],a[3]),m=h.y(a[2],a[3]),s.rotate(parseFloat(a[1]),v,m)):s.rotate(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))):l=="s"?f==2||f==3?(g=g||t.getBBox(),s.scale(parseFloat(a[1]),parseFloat(a[f-1]),g.x+g.width/2,g.y+g.height/2)):f==5&&(c?(v=h.x(a[3],a[4]),m=h.y(a[3],a[4]),s.scale(parseFloat(a[1]),parseFloat(a[2]),v,m)):s.scale(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]))):l=="m"&&f==7&&s.add(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5]),parseFloat(a[6]),s)}return s.toString()},n._symbols={box:function(e,t,n){var r=.707*n;return[m,e-r,t-r,g,e+r,t-r,e+r,t+r,e-r,t+r,"Z"]},tri:function(e,t,n){return[m,e,t-1.33*n,g,e+n,t+.67*n,e-n,t+.67*n,"Z"]},invertedTri:function(e,t,n){return[m,e,t+1.33*n,g,e-n,t-.67*n,e+n,t-.67*n,"Z"]},diamond:function(e,t,n){return[m,e,t-n,g,e+n,t,e,t+n,e-n,t,"Z"]},cross:function(e,t,n){var r=.707*n;return[m,e-r,t-r,g,e+r,t+r,m,e-r,t+r,g,e+r,t-r]},arc:function(e,t,n,r){var i=r.start,s=r.end-1e-6,o=r.innerR,u=Math.cos(i),a=Math.sin(i),f=Math.cos(s),l=Math.sin(s),c=r.end-i<Math.PI?0:1;return[m,e+n*u,t+n*a,"A",n,n,0,c,1,e+n*f,t+n*l,g,e+o*f,t+o*l,"A",o,o,0,c,0,e+o*u,t+o*a,"Z"]}},n}(L),M=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.init=function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ",f,";"];(t==="shape"||t===a)&&r.push("left:0;top:0;width:10px;height:10px;"),i&&r.push("visibility: ",t===a?l:h),n.push(' style="',r.join(""),'"/>'),t&&(n=t===a||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=N(n)),this.renderer=e},t.prototype.add=function(e){var t=this,n=t.renderer,r=t.element,s=n.box,o=e&&e.inverted,u=e?e.element||e:s;return o,i&&u.gVis===l&&T(r,{visibility:l}),u.appendChild(r),t.added=!0,t},t.prototype.attr=function(e,t){var n,r,s,o=this,u=o.element||{},f=u.style,l=u.nodeName,c=o.symbolName,m=o.renderer,g,y,b=o.shadows,N,C,k=o;return e===undefined?k:(w(e)&&S(t)&&(n=e,e={},e[n]=t),w(e)?(n=e,n==="strokeWidth"||n==="stroke-width"?k=o.strokeweight:k=o[n]):e&&$.each(e,function(t,n){r=n,N=!1;if(c&&/^(x|y|r|start|end|width|height|innerR)/.test(t))y||(o.symbolAttr(e),y=!0),N=!0;else if(t==="d"){r=r||[],o.d=r.join(" "),s=r.length,C=[];while(s--)E(r[s])?C[s]=Math.round(r[s]*10)-5:r[s]==="Z"?C[s]="x":C[s]=r[s];r=C.join(" ")||"x",u.path=r;if(b){s=b.length;while(s--)b[s].path=r}N=!0}else if(t==="zIndex"||t===p){if(i&&t===p&&l===a){u.gVis=r,g=u.childNodes,s=g.length;while(s--)T(g[s],{visibility:r});r===h&&(r=null)}r&&(f[t]=r),N=!0}else t==="class"?u.className=r:t==="stroke"?t="strokecolor":t==="stroke-width"||t==="strokeWidth"?(u.stroked=r?!0:!1,t="strokeweight",o[t]=r,E(r)&&(r+=d)):t==="fill"&&(l==="SPAN"?f.color=r:(u.filled=r!==v?!0:!1,r=m.color(r,u,t),t="fillcolor"));N||(t==="opacity"&&(t="fill-opacity"),i?u[t]=r:x(u,t,r)),u.attrs=u.attrs||{},u.attrs[t]=r}),k)},t.prototype.scale=function(e,t){var n=this,r=n.attr("stroke-width")||0;n.css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+e+","+", M12=0, M21=0, M22="+t+", Dx=0, Dy=0, sizingmethod='auto expand')"}).attr("stroke-width",r)},t.prototype.clip=function(e){var t=this,n=e.members;return n.push(t),t.css(e.getCSS(t.inverted))},t.prototype.css=function(e){var t=this,n=t.element,r=e&&n.tagName==="SPAN"&&e.width;return r&&(delete e.width,t.textWidth=r),t.styles=$.extend(t.styles,e),T(t.element,e),t},t.prototype.destroy=function(){var e=this;return e.destroyClip&&e.destroyClip(),A.prototype.destroy.apply(e)},t.prototype.empty=function(){var e=this.element,t=e.childNodes,n=t.length,r;while(n--)r=t[n],r.parentNode.removeChild(r),$(r).remove()},t.prototype.getBBox=function(){var e=this,t=e.element,n=e.bBox;return n||(t.nodeName==="text"&&(t.style.position=f),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},t}(A),_=function(e){function r(){e.apply(this,arguments),this.isIE8=$.browser.msie&&parseInt($.browser.version)===8}return __extends(r,e),r.prototype.init=function(e,n,i){var s=this,o;this.Element=M,this.symbols=r._symbols,$(e).hasClass("vmlcontainer")?(s.box=e,o=new this.Element,o.element=e,o.render=this,s.boxWrapper=o):(o=s.createElement(a),e.appendChild(o.element),s.box=o.element,s.boxWrapper=o,s.setSize(n,i)),t.namespaces.v||(t.namespaces.add("v","urn:schemas-microsoft-com:vml"),t.createStyleSheet().cssText="v\\:fill, v\\:path, v\\:shape, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},r.prototype.clipRect=function(e,t,r,s){var o=this.createElement();return $.extend(o,{members:[],left:e,top:t,width:r,height:s,getCSS:function(e){var t=this,n=t.top,r=t.left,s=r+t.width,o=n+t.height,u={clip:"rect("+Math.round(e?r:n)+"px,"+Math.round(e?o:s)+"px,"+Math.round(e?s:o)+"px,"+Math.round(e?n:r)+"px)"};return!e&&i&&$.extend(u,{width:s+d,height:o+d}),u},updateClipping:function(){n(o.members,function(e,t){t.css(o.getCSS(t.inverted))})}}),o},r.prototype.color=function(e,t,n){var r,i=this,s="color",o,u,a,f,l=[],c,h,p,d,v=0;b.test(e)?s="linear":e=e.replace(y,function(e,t,n){return s="radial",t&&n&&(t=parseFloat(t),n=parseFloat(n),Math.pow(t-.5,2)+Math.pow(n-.5,2)>.25&&(n=Math.sqrt(.25-Math.pow(t-.5,2))*((n>.5?1:0)*2-1)+.5),p=t+" "+n),""});if(s!=="linear"&&s!=="radial")return h=t.getElementsByTagName(n),h.length&&(h[0].opacity=1),e;o=e.split(/\s*\-\s*/),s==="linear"&&(v=o.shift(),v=-parseFloat(v.toString())),d=i._parsegradientcolor(o),$.each(d,function(e,t){t.offset=t.offset?t.offset:e?"100%":"0%",l.push(t.offset+" "+t.color),u=t.color,e?f=u:a=u}),s==="radial"?r=['<fill colors="',l.join(),'" angle="0"','" focusposition="',p,'" color="',a,'" color2="',f,'" focussize="0 0"',' type="gradientTitle" focus="100%" method="none" />']:r=['<fill colors="',l.join(),'" angle="',v.toString(),'" type="gradient" focus="100%" method="sigma" />'],c=N(i.prepVML(r)),$(t).append(c)},r.prototype.prepVML=function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e.indexOf('style="')===-1?e=e.replace("/>",' style="'+t+'" />'):e=e.replace('style="','style="'+t)):e=e.replace("<","<v:"),e},r.prototype.path=function(e){var t=this.createElement("shape");return t.attr({coordsize:"100 100",d:e}),t},r.prototype.g=function(e){var t,n;return e&&(n={className:c+e,"class":c+e}),t=this.createElement(a).attr(n),t},r.prototype.text=function(e,t,n){var r=this.createElement("span"),i=r.element,s,o;return i.innerHTML=n,$(i).appendTo("body"),s=$(i).width(),o=$(i).height(),e-=s/2,t-=o/2,r.x=e,r.y=t,$(i).css({position:"absolute","white-space":"nowrap","font-family":"Arial","font-size":"10",left:e+"px",top:t+"px"}),r},r._symbols=$.extend({},O._symbols,{arc:function(e,t,n,r){var i=r.start,s=r.end,o=Math.cos(i),u=Math.sin(i),a=Math.cos(s),f=Math.sin(s),l=r.innerR,c=.07/n,h=l&&.1/l||0;return s-i===0?["x"]:(2*Math.PI-s+i<c?a=-c:s-i<h&&(a=Math.cos(i+h)),["wa",e-n,t-n,e+n,t+n,e+n*o,t+n*u,e+n*a,t+n*f,"at",e-l,t-l,e+l,t+l,e+l*a,t+l*f,e+l*o,t+l*u,"x","e"])},circle:function(e,t,n){return["wa",e-n,t-n,e+n,t+n,e+n,t,e+n,t,"e"]},rect:function(e,t,n,r){if(!S(r))return[];var i=r.width,s=r.height,o=e+i,u=t+s;return n=Math.min(n,i,s),[m,e+n,t,g,o-n,t,"wa",o-2*n,t,o,t+2*n,o-n,t,o,t+n,g,o,u-n,"wa",o-2*n,u-2*n,o,u,o,u-n,o-n,u,g,e+n,u,"wa",e,u-2*n,e+2*n,u,e+n,u,e,u-n,g,e,t+n,"wa",e,t,e+2*n,t+2*n,e,t+n,e+n,t,"x","e"]}}),r}(O);e.createRender=D})(e.render||(e.render={}));var t=e.render})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=1e4,r=function(){function e(e){this.bubMax=0,this.bubMin=0,this.bubDiff=0,this.y1Array=[],this.y1ValueGroup={},this.bubbleRadius={},this.chartDatas=[];var t=e.options;this.widget=e,this.seriesList=t.seriesList,this.maximumSize=t.maximumSize||20,this.minimumSize=t.minimumSize||5,this.sizingMethod=t.sizingMethod||"diameter",this._init(),this._calculateMaxMin()}return e.prototype._init=function(){var e=this,t,n,r;$.each(this.seriesList,function(i,s){n=s.markers||{},r=n.type||"circle",t=s.data,t&&t.y1&&t.x&&t.y&&$.each(t.y1,function(n,i){e.y1Array.push(i),e.y1ValueGroup[r]||(e.y1ValueGroup[r]=[]),e.y1ValueGroup[r].push(i),e.chartDatas.push({x:t.x[n],y:t.y[n],y1:t.y1[n]})})})},e.prototype._calculateMaxMin=function(){this.bubMax=Math.max.apply(null,this.y1Array),this.bubMin=Math.min.apply(null,this.y1Array),this.bubDiff=this.bubMax-this.bubMin},e.prototype._calculateRadius=function(e,t,n,r,i,s,o,u){var a,f=e,l=t-n,c=r.endX-r.startX,h=r.endY-r.startY;return f<0&&(f=0),s===0?f=1:f/=i,f=this._calculateRadiusByArea(f,o,u),f*=l,f+=n,a=Math.min(c,h),f*=a/200,f},e.prototype._calculateRadiusByArea=function(e,t,n){var r=e;if(t==="area")switch(n){case"circle":r=Math.sqrt(r/Math.PI);break;case"tri":case"invertedTri":r=Math.sqrt(r/(3*Math.sin(Math.PI/6)*Math.cos(Math.PI/6)));break;case"box":r=Math.sqrt(r/2);break;case"diamond":case"cross":r=Math.sqrt(r/2);break;default:r=Math.sqrt(4*r/Math.PI)}return r},e.prototype.calculateRadius=function(){var e=this,t=this.widget.canvasBounds;this.bubbleRadius={},$.each(this.y1ValueGroup,function(n,r){$.each(r,function(r,i){e.bubbleRadius[i]=e._calculateRadius(i,e.maximumSize,e.minimumSize,t,e.bubMax,e.bubDiff,e.sizingMethod,n)})})},e.prototype.getAdjust=function(e,t){var n=this,r=this.widget.canvasBounds,i=e.max,s=e.min,o=[],u=[],a=0,f=t.unitMinor,l=t.origin,c=r.endX-r.startX,h=r.endY-r.startY,p,d,v,m=[],g={},y=!1;return this.calculateRadius(),$.each(this.chartDatas,function(e,t){var r=t.x;isNaN(r)&&!n.widget._isDate(r)&&$.inArray(r,m)===-1&&m.push(r)}),$.each(m,function(e,t){g[t]=e}),$.each(this.chartDatas,function(t,r){var f=r.x,l=r.y,p=r.y1,d=n.bubbleRadius[p];n.widget._isDate(f)?f=$.toOADate(f):isNaN(f)&&(f=g[f]),n.widget._isDate(l)&&(l=$.toOADate(l)),e.id==="x"?(v=c,a=d*(i-s)/v,o.push(f-a),u.push(f+a)):(v=h,a=d*(i-s)/v,o.push(l-a),u.push(l+a))}),p=Math.max.apply(null,u),d=Math.min.apply(null,o),p>i&&(i+=Math.ceil((p-i)/f)*f,y=!0),d<s&&(s-=Math.ceil((s-d)/f)*f,y=!0),l!==null&&l!==undefined&&(l<s?s=l:l>i&&(i=l)),y?(e.max=i,e.min=s,this.widget._calculateMajorMinor(t,e),this.getAdjust(e,t)):{max:i,min:s}},e.prototype.dispose=function(){this.y1Array=[],this.bubbleRadius=null,this.y1ValueGroup=null},e}();t.BubbleAxisAdjust=r;var i=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype._setOption=function(t,r){var i=this,s=i.options;if(t==="minimumSize"||t==="minimumSize")isNaN(r)||r<0?r=0:r>n&&(r=n),s[t]=r,i.redraw();else if(t==="chartLabel")$.extend(s.chartLabel,r),i.redraw();else{if(t==="showChartLabels"||t==="chartLabelStyle")s[t]=r,i._setLabelOption();e.prototype._setOption.call(this,t,r)}t==="seriesList"&&(i.indexs=null)},i.prototype._create=function(){var t=this,n=t.options,r=t._getDefFill();this._handleChartStyles(),t._setLabelOption(),e.prototype._create.call(this),t.chartElement.addClass(n.wijCSS.bubbleChart)},i.prototype._paintChartArea=function(){this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new r(this),e.prototype._paintChartArea.call(this)},i.prototype._bindSeriesData=function(t,n,r){var i=n.data,s=i.y1;e.prototype._bindSeriesData.call(this,t,n,r),s&&s.bind&&(i.y1=this._getBindData(t,s.bind))},i.prototype._setLabelOption=function(){var e=this.options;e.showChartLabels!==!0&&e.chartLabel.visible===!0&&(e.chartLabel.visible=!1),!$.isPlainObject(e.chartLabel.style)&&$.isPlainObject(e.chartLabelStyle)&&(e.chartLabel.style=e.chartLabelStyle)},i.prototype._clearChartElement=function(){var t=this,n=t.options,r=t.chartElement.data("fields");e.prototype._clearChartElement.call(this),r&&r.bubbleInfos&&$.each(r.bubbleInfos,function(e,t){t.bubble&&t.bubble.wijRemove(),t.dcl&&t.dcl.wijRemove(),t.symbol&&t.symbol.wijRemove()}),r&&r.bubbles&&t._destroyRaphaelArray(r.bubbles),t.element.removeData("plotInfos"),n.seriesTransition.enabled||r&&r.bubblesAnimationInfos&&(r.bubblesAnimationInfos=null)},i.prototype.destroy=function(){var t=this;t.chartElement.removeClass(t.options.wijCSS.bubbleChart+" ui-helper-reset"),t._destroyEles(),this.bubbleAxisAdjust&&(this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=null),e.prototype.destroy.call(this)},i.prototype.getBubble=function(e){return this.chartElement.data("fields").bubbles[e]},i.prototype.redraw=function(t){e.prototype.redraw.call(this,t)},i.prototype._destroyEles=function(){var e=this,t=e.element,n=t.data("fields");n.bubbleInfos&&$.each(n.bubbleInfos,function(t,n){e._removeEle(n.bubble),e._removeEle(n.dcl),e._removeEle(n.symbol),n=null}),t.removeData("fields")},i.prototype._removeEle=function(e){e&&(e.node&&$(e.node).removeData(),e.wijRemove(),e=null)},i.prototype._paintPlotArea=function(){var e=this,t=this.chartElement,n=e.options,r=n.seriesList,i=r.length,s=[].concat(n.seriesStyles.slice(0,i)),o=[].concat(n.seriesHoverStyles.slice(0,i)),a=e.canvasBounds,f=e.axisInfo.x,l=e.axisInfo.y[0],c;if(i===0)return;this.bubbleAxisAdjust.calculateRadius(),this.bubbleChartRender=new u(this.chartElement,{seriesList:r,seriesStyles:s,seriesHoverStyles:o,canvas:e.canvas,bounds:a,xAxisInfo:f,yAxisInfo:l,chartLabel:n.chartLabel,textStyle:n.textStyle,chartLabelStyle:n.chartLabelStyle,chartLabelFormatString:n.chartLabelFormatString,bubbleRadius:e.bubbleAxisAdjust.bubbleRadius,animation:n.animation,seriesTransition:n.seriesTransition,sizingMethod:n.sizingMethod,minimumSize:n.minimumSize,maximumSize:n.maximumSize,mouseDown:$.proxy(e._mouseDown,e),mouseUp:$.proxy(e._mouseUp,e),mouseOver:$.proxy(e._mouseOver,e),mouseOut:$.proxy(e._mouseOut,e),mouseMove:$.proxy(e._mouseMove,e),click:$.proxy(e._click,e),disabled:n.disabled,culture:e._getCulture(),wijCSS:n.wijCSS,shadow:n.shadow,widget:this}),this.bubbleChartRender.render(),c=t.data("fields").bubbleInfos;if(!c)return;e.tooltipbubbles=[],$.each(c,function(t,n){e.tooltipbubbles.push(n.bubble),n.dcl&&e.tooltipbubbles.push(n.dcl),n.symbol&&e.tooltipbubbles.push(n.symbol)}),e.tooltip&&e.tooltip.setTargets(e.tooltipbubbles)},i.prototype._paintLegendIcon=function(t,n,r,i,s,o,u,a,f,l){var c=this,h=Math.min(r,i),p,d,v;return f.isTrendline?e.prototype._paintLegendIcon.call(this,t,n,r,i,s,o,u,a,f,l):(p=f.markerStyle,p=$.extend({fill:s.fill,stroke:s.stroke,opacity:1},p),f.markers&&(d=f.markers.type),d||(d="circle"),v=c.canvas.paintMarker(d,t+r/2,n+i/2,h/2),$(v.node).data("legendIndex",o).data("index",u),c.legendIcons.push(v),v.attr(p),$.wijraphael.addClass($(v.node),a),v)},i.prototype._calculateParameters=function(t,n){e.prototype._calculateParameters.call(this,t,n);if(!n.autoMax&&!n.autoMin)return;this._adjust(n,t)},i.prototype._adjust=function(e,t){var n=e.unitMinor,r=this,i=e.autoMin,s=e.autoMax,o=r.canvasBounds,u={x:o.startX,y:o.startY},a=o.endX-u.x,f=o.endY-u.y,l=t.max,c=t.min,h=e.origin,p=this.bubbleAxisAdjust.getAdjust(t,e);l=p.max,c=p.min;if(l!==t.max||c!==t.min)t.min=c,t.max=l,this._calculateMajorMinor(e,t)},i.prototype._showSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.showSerieEles(e);return}$.each(e,function(e,t){t.bubble&&(t.bubble.show(),t.bubble.shadow&&t.bubble.shadow.show(),t.bubble.tracker&&t.bubble.tracker.show(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show()})},i.prototype._hideSerieEles=function(e){if(e.isTrendline){t.TrendlineRender.hideSerieEles(e);return}$.each(e,function(e,t){t.bubble&&(t.bubble.hide(),t.bubble.shadow&&t.bubble.shadow.hide(),t.bubble.tracker&&t.bubble.tracker.hide(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.symbol&&t.symbol.hide()})},i.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.bubble&&t.bubble.attr(t.hoverStyle)})},i.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.bubble&&t.bubble.attr(t.style)})},i.prototype._parseTable=function(){if(!this.element.is("table"))return;var e=this,t=e.element,n=e.options,r=$("caption",t),i=$("thead th",t),s=[],o=$("tbody tr",t),u=null,a=null,f=[],l=[],c=[],h=function(e){var t=$.trim(e);return isNaN(e)||(t=parseFloat(e.toString())),t};r.length&&(n.header=$.extend({visible:!0,text:$.trim($(r[0]).text())},n.header),r.length>1&&(n.footer=$.extend({visibel:!0,text:$.trim($(r[1]).text())},n.footer))),n.legend=$.extend({visible:!0},n.legend),u=$.trim(i.eq(1).text()),o.each(function(e,t){var n=$("td",t);return n.length>=3&&(f.push(h(n.eq(0).text())),l.push(h(n.eq(1).text())),c.push(h(n.eq(2).text()))),this}),a={label:u,legendEntry:!0,data:{x:f,y:l,y1:c}},s.push(a),e.options.seriesList=s},i.prototype._unbindLiveEvents=function(){var e=this;$("."+e.options.wijCSS.bubbleElement,e.chartElement[0]).off(".wijbubblechart").off("wijbubblechart"),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null)},i.prototype._paintTooltip=function(){var t=this,n=t.chartElement.data("fields");e.prototype._paintTooltip.call(this),t.tooltip&&n&&n.trackers&&n.trackers.length&&(t.tooltip.setTargets(n.trackers),t.tooltip.setOptions({relatedElement:n.trackers[0]}))},i.prototype._getTooltipText=function(e,t){var n=$(t.node),r,i;return n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i={data:r,value:r.value,label:r.label,total:r.total,target:t,fmt:e,x:r.x,y:r.y,y1:r.y1},$.proxy(e,i)()},i}(t.wijchartcore);t.wijbubblechart=i,i.prototype.widgetEventPrefix="wijbubblechart";var s=function(e){function t(){e.apply(this,arguments),this.bubbleChart="wijmo-wijbubblechart",this.bubbleElement="wijbubblechart-bubble",this.bubbleTracker="bubbletracker",this.bubbleLabel="wijbubblechart-label",this.bubbleSymbol="wijbubblechart-symbol"}return __extends(t,e),t}(t.wijchartcore_css);t.wijbubblechart_css=s;var o=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijbubblechart')",this.wijCSS=new e.chart.wijbubblechart_css,this.minimumSize=5,this.maximumSize=20,this.sizingMethod="diameter",this.animation={enabled:!0,duration:1e3,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.seriesList=[],this.seriesHoverStyles=[{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5}],this.chartLabel={position:"inside",compass:"north",visible:!0,style:{},chartLabelFormatString:""},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return __extends(n,t),n}(t.wijchartcore_options);i.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new o),$.wijmo.registerWidget("wijbubblechart",i.prototype);var u=function(){function e(e,t){this.element=e,this.options=t,this._init()}return e.prototype._init=function(){var e=this.options,t=e.bounds;this.fields=this.element.data("fields")||{},this.canvas=e.canvas,this.seriesList=$.arrayClone(e.seriesList),this.seriesStyles=e.seriesStyles,this.seriesHoverStyles=e.seriesHoverStyles,this.startLocation={x:t.startX,y:t.startY},this.width=t.endX-this.startLocation.x,this.height=t.endY-this.startLocation.y,this.seriesEles=[],this.bubbles=[],this.bubbleInfos=[],this.trackers=this.canvas.set(),this.animationSet=this.canvas.set(),this.fieldsAniPathAttr=[],this.paths=[],this.aniPathsAttr=[]},e.prototype.initAnimationState=function(e,t){var n=e.bubble,r=e.symbol,i;n.type==="circle"?n.attr({r:1e-4,cx:t.startX,cy:t.endY}):(i=n.wijGetBBox(),n.transform("t"+(t.startX-i.x)+","+(t.endY-i.y)+"s0.001..."),n.shadow&&n.shadow.transform("t"+(t.startX-i.x)+","+(t.endY-i.y)+"s0.001...")),r&&r.hide()},e.prototype.playAnimation=function(){var e=this,n=e.options,r=n.animation,i=n.bounds,s=e.fields.bubblesAnimationInfos,o=[],u=e.fields.bubbleInfos,a=e.fields.trendLines,f=n.seriesTransition,l,c,h,p={txx:n.widget.extremeValue.txx,txn:n.widget.extremeValue.txn,tyx:n.widget.extremeValue.y[0].tyx,tyn:n.widget.extremeValue.y[0].tyn};if(!u&&!a)return;r&&r.enabled?(l=r.duration||400,c=r.easing,u&&$.each(u,function(t,n){var r=n.bubble,u,a,p=r.wijGetBBox();r.type==="circle"?u={r:r.attr("r"),cx:r.attr("cx"),cy:r.attr("cy")}:u={transform:r.matrix.toTransformString(),"stroke-width":r.attr("stroke-width"),width:p.width,x:p.x,y:p.y},r.shadow&&r.shadow.hide(),s&&f.enabled?(a=s[t],a?(r.type==="circle"?r.attr({cx:a.cx,cy:a.cy,r:a.r}):(p=r.wijGetBBox(),h=a.width/p.width,u.transform=r.matrix.toTransformString(),r.transform(Raphael.format("s{0}t{1}{2}...",h,a.x-p.x,a.y-p.y)),r.shadow&&r.shadow.transform(Raphael.format("s{0}t{1}{2}...",h,a.x-p.x,a.y-p.y))),l=f.duration,c=f.easing):e.initAnimationState(n,i)):e.initAnimationState(n,i),o.push(u),r.wijAnimate(u,l,c,function(){$(n.bubble.node).data("wijchartDataObj")&&$(n.bubble.node).data("wijchartDataObj").visible&&(n.dcl&&n.dcl.show(),n.symbol&&(n.symbol.show(),n.bubble.wijAttr("opacity",.1)),r.shadow&&r.shadow.show())})}),a&&a.length&&t.TrendlineRender.playAnimation(l,c,f,e.animationSet,i,e.paths,e.fieldsAniPathAttr,null,n.widget.options.axis,p),e.fields.bubblesAnimationInfos=o):$.each(u,function(e,t){$(t.bubble.node).data("wijchartDataObj")&&$(t.bubble.node).data("wijchartDataObj").visible&&(t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show())})},e.prototype.getSymbol=function(e,t){var n;return $.each(e,function(e,r){if(r.index===t)return n=r,!1}),n},e.prototype.getLabelVisible=function(e,t){var n=!0;return $.each(e,function(e,r){if(t===r)return n=!1,!1}),n},e.prototype.paintMarker=function(e,t,n,r){var i;return this.canvas[e]&&(i=this.canvas[e](t,n,r)),i},e.prototype.getLabelBox=function(e){var t=this.canvas.text(0,0,e),n=t.wijGetBBox(),r;return r={width:n.width,height:n.height},t.remove(),r},e.prototype.applyLabelCompass=function(e,t){var n=this.options.chartLabel.compass||"north",r=this.getLabelBox(t),i=e.r;switch(n){case"north":e.y-=i+r.height/2;break;case"south":e.y+=i+r.height/2;break;case"east":e.x+=i+r.width/2;break;case"west":e.x-=i+r.width/2}},e.prototype.paintDefaultChartLabel=function(e,t){var n=this.options,r=n.chartLabel,i=n.culture,s=$.extend(!0,{},n.textStyle,n.chartLabelStyle,r.style),o=$.round(t,2),u=r.chartLabelFormatString===""?n.chartLabelFormatString:r.chartLabelFormatString,a=this.options.widget,f;return u&&u.length&&(o=Globalize.format(o,u,i)),f=a._text.call(a,e.x,e.y,o).attr(s),f},e.prototype._getSortedBubbleIndex=function(e){if(!e||!e.y1||!e.y1.length)return undefined;var t=e.y1.length,n=[],r=[];for(var i=0;i<t;i++)n.push({dataIndex:i,y1:e.y1[i]});n.sort(function(e,t){return t.y1-e.y1});for(var s=0;s<t;s++)r.push(n[s].dataIndex);return r},e.prototype.paintbubble=function(e,n,r,i,s,o,u,a){var f=e.data,l=i.min,c=s.min,h=i.max,p=s.max,d=o/(h-l),v=u/(p-c),m=[],g=this.options,y=this,b=g.bounds,w=g.wijCSS,E=g.widget,S=g.chartLabel,x=g.bubbleRadius,T,N,C,k,L,A=[],O=[];if(f.y1===undefined)return;if(f.x===undefined||f.y===undefined)return!0;L=y._getSortedBubbleIndex(f),$.each(L,function(o,u){var a=f.y1[u],c=f.x[u],h=f.y[u],g=e.markers||{},L=g.type||"circle",M=g.symbol,_=e.invisibleMarkLabels||[],D=x[a],P,H,B,j,F,I,q,R,U;i.isTime?c=$.toOADate(c):isNaN(c)&&(c=u),s.isTime&&(h=$.toOADate(h)),F=b.startX+(c-l)*d,I=b.startY+(p-h)*v,M&&(q=y.getSymbol(M,u)),j=y.paintMarker(L,F,I,D),j.attr(n),q&&(N=q.width||D*2,C=q.height||D*2,R=y.canvas.image(q.url,F-D,I-D,N,C)),y.options.shadow&&t.ChartUtil.paintShadow(j,2,null),$.wijraphael.addClass($(j.node),w.canvasObject+" "+w.bubbleElement),q&&j.attr("opacity",.1),B=$.extend(!1,{index:u,bubble:j,style:n,y1:a,x:c,y:h,type:"bubble",hoverStyle:r,visible:!0},e),q&&(B.symbol=!0,B.hoverStyle=$.extend({},r,{opacity:.1}),$(R.node).data("wijchartDataObj",B),$.wijraphael.addClass($(R.node),w.bubbleSymbol)),$(j.node).data("wijchartDataObj",B),E.dataPoints=E.dataPoints||{},E.pointXs=E.pointXs||[],k=$.round(F,2),E.dataPoints[k.toString()]||(E.dataPoints[k.toString()]=[],E.pointXs.push(k)),E.dataPoints[k.toString()].push(B),U=j.clone(),$.browser.msie&&parseInt($.browser.version)<9?U.attr({opacity:.01,fill:"white","stroke-width":0,"fill-opacity":.01}):U.attr({opacity:.01,fill:"white","fill-opacity":.01}),$(U.node).data("owner",$(j.node)),$.wijraphael.addClass($(U.node),w.canvasObject+" "+w.bubbleElement+" "+w.bubbleTracker),j.tracker=U,A[u]=U,O[u]=j,P={x:F,y:I,r:D},S.visible&&y.getLabelVisible(_,u)&&(S.position==="outside"&&y.applyLabelCompass(P,a),T=y.paintDefaultChartLabel(P,a),T.hide(),$(T.node).data("wijchartDataObj",B),$.wijraphael.addClass($(T.node),w.bubbleLabel)),H={bubble:j,dcl:T,symbol:R},m[u]=H,e.visible===!1&&(j.hide(),T&&T.hide(),U.hide(),R&&R.hide())}),$.each(A,function(e,t){t&&y.trackers.push(t)}),$.each(O,function(e,t){t&&y.bubbles.push(t)}),y.fields.bubbles=y.bubbles,$.each(m,function(e,t){t&&y.bubbleInfos.push(t)}),y.fields.bubbleInfos=y.bubbleInfos,y.seriesEles.push(m)},e.prototype.paintBubbles=function(){var e=this,n=e.options,r=n.xAxisInfo,i=n.yAxisInfo,s=n.animation,o=n.seriesTransition,u=n.wijCSS,a=[],f=n.canvas,l=n.widget.options.axis;$.each(e.seriesList,function(c,h){var p=e.seriesStyles[c],d=e.seriesHoverStyles[c];h.isTrendline?t.TrendlineRender.renderSingleTrendLine(h,p,d,l,n.hole,e.fieldsAniPathAttr,s,o,c,n.bounds,f,e.paths,a,e.animationSet,e.aniPathsAttr,u,e.seriesEles):e.paintbubble(h,p,d,r,i,e.width,e.height,e.startLocation)}),this.fields.trendLines=e.paths},e.prototype.bindLiveEvents=function(e,n,r,i,s,o,u,a){var f=this.options,l=f.wijCSS,c="",h={mousedown:function(t){if(a)return;var r=$(t.target),i;r.data("owner")&&(r=r.data("owner")),i=r.data("wijchartDataObj"),n.call(e,t,i)},mouseup:function(t){if(a)return;var n=$(t.target),i;n.data("owner")&&(n=n.data("owner")),i=n.data("wijchartDataObj"),r.call(e,t,i)},mouseover:function(t){if(a)return;var n=$(t.target),r,s;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),s=r.bubble,r.hoverStyle?(s.attr(r.hoverStyle),s.shadow&&s.shadow.attr(r.hoverStyle)):s&&s.attr({opacity:"0.8"}),i.call(e,t,r)},mouseout:function(t){if(a)return;var n=$(t.target),r,i;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),i=r.bubble;if(r.symbol)return;r.hoverStyle?(r.hoverStyle["stroke-width"]&&!r.style["stroke-width"]&&(i.attr("stroke-width",""),i.shadow&&i.shadow.attr("stroke-width","")),i.wijAttr({transform:""}),i.wijAttr(r.style),r.style.opacity&&(i.attr("opacity",r.style.opacity),i.shadow&&i.shadow.attr("opacity",r.style.opacity))):i&&i.attr({opacity:"1"}),s.call(e,t,r)},mousemove:function(t){if(a)return;var n=$(t.target),r,i;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),o.call(e,t,r)},click:function(t){if(a)return;var n=$(t.target),r;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),u.call(e,t,r)}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(c="wij"),$.each(["click","mouseover","mouseout","mousemove","mousedown","mouseup"],function(t,n){$("."+l.bubbleTracker,e).on(c+n+".wijbubblechart",h[n])}),t.TrendlineRender.unbindLiveEvents(e,f.widget.widgetName,l),t.TrendlineRender.bindLiveEvents(e,f.widget.widgetName,n,r,i,s,o,u,a,l,!1)},e.prototype.render=function(){var e=this.options,t=e.mouseDown,n=e.mouseUp,r=e.mouseOver,i=e.mouseOut,s=e.mouseMove,o=e.click,u=e.disabled;this.paintBubbles(),this.fields.seriesEles=this.seriesEles,this.playAnimation(),this.trackers.toFront(),this.fields.trackers=this.trackers,this.bindLiveEvents(this.element,t,n,r,i,s,o,u),this.element.data("fields",this.fields)},e}();t.BubbleChartRender=u})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijcarousel",i="wijmo-wijcarousel-",s="wijmo-wijcarousel ",o=i+"list",u=i+"item ",a=i+"clip",f=i+"current",l=i+"horizontal-multi",c=i+"horizontal",h=i+"button",p=i+"vertical-multi",d=i+"vertical",v=i+"button-next",m=i+"button-previous",g=i+"preview",y="<a><span></span></a>",b=".wijmo-wijcarousel-pager,."+h+",."+v+",."+m,w="<div></div>",E='<li class="wijmo-wijcarousel-page"><a></a></li>',S="li.wijmo-wijcarousel-page",x=".wijmo-wijcarousel-text,.wijmo-wijcarousel-caption",T=1,N=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._handleDisabledOption=function(e,t){var r=this,i=r.options,s;r.pager&&!r.pager.is(":hidden")&&(i.pagerType==="numbers"?r.pager.wijpager("option","disabled",e):n.wijmo.wijslider&&i.pagerType==="slider"&&(s=r.pager.find(".ui-slider"),s&&s.length>0&&s.wijslider("option","disabled",e))),r._applyBtnClass()},t.prototype._initStates=function(e,t){var n=this;n.count=0,n.currentIdx=e.start,n.timeout=null,n.isHorizontal=e.orientation==="horizontal",n.width=t.width()||640,n.height=t.height()||480,n.offset=0},t.prototype._set_showControlsOnHover=function(e){var t=this;t.container.unbind("mouseenter."+t.widgetName),t.container.unbind("mouseleave."+t.widgetName),e&&t.container.bind("mouseenter."+t.widgetName,function(){if(t.options.disabled)return;t._showControls()}).bind("mouseleave."+t.widgetName,function(){if(t.options.disabled)return;t._hideControls()}),t.container.find(b).stop(!0,!0)[e?"hide":"show"]()},t.prototype._create=function(){var e=this,t=e.options,r=e.element;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._initStates(t,r),e._createDom(e.isHorizontal),e.list.bind("click."+e.widgetName,n.proxy(e._itemClick,e)),t.showControlsOnHover&&(e.container.bind("mouseenter."+e.widgetName,function(){if(e.options.disabled)return;e._showControls()}).bind("mouseleave."+e.widgetName,function(){if(e.options.disabled)return;e._hideControls()}),e.container.find(b).hide()),t.loadCallback&&n.isFunction(t.loadCallback)&&e._trigger("loadCallback",null,e);if(t.disabledState){var i=t.disabled;e.disable(),t.disabled=i}else t.auto&&e.play();t.disabled&&e.disable();try{t.display=parseFloat(t.display)}catch(s){t.display=1}e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcarousel")},t.prototype._showControls=function(){this.container.find(b).stop(!0,!0).fadeIn(600,function(){n(this).css("opacity","")})},t.prototype._hideControls=function(){this.container.find(b).stop(!0,!0).fadeOut(600)},t.prototype._applyContainerStyle=function(e,t){var n=this,r=n.options,i={},s=n.list,o=0,u,a=0,f=e?"left":"top",l=0,c,h=e?"width":"height";u=n.itemBound[e?"w":"h"],n.count=n.list.children("li").length,o=n.count*u,n.list[h](o),n.clip[h](r.display*u),n.clip[e?"height":"width"](n.itemBound[e?"h":"w"]);if(!r.loop)i[f]=-u*n.currentIdx,s.css(i);else{c=s.find(">li:first"),r.preview&&!!t&&(c=c.next()),l=c.data("itemIndex");for(l;l<n.currentIdx;l++)s.children("li:first").appendTo(s);if(r.preview){if(!t)for(l=0;l<T;l++)s.children("li:last").prependTo(s);a=-u*T}i[f]=a,s.css(i)}},t.prototype._applyListStyle=function(){var e=this,t=e.options,n=t.orientation==="horizontal",r=0,i,s=n?"width":"height";e.itemBound=e._getItemBound(),i=e.itemBound[n?"w":"h"],r=e.count*i,e.list[s](r)},t.prototype._createButtons=function(e,t){var r=this,i=r.options,s,o=i.wijCSS.stateDisabled;n.each(["prevBtn","nextBtn"],function(u,a){var f=i[a+"Class"],l=a==="nextBtn",c=l?"next":"previous",h=l?v:m,p=l?t:e;f&&f.defaultClass?(o=f.disableClass||o,s=f.hoverClass,r[a]=n('<a class="'+i.wijCSS.stateDefault+'"></a>').addClass(f.defaultClass).mouseover(function(){n(this).hasAllClasses(o)||n(this).addClass(s)}).mouseout(function(){n(this).hasAllClasses(o)||n(this).removeClass(s)})):r[a]=n(r._createBtn(h,p)),r[a].bind("click."+r.widgetName,function(e){if(r.options.disabled)return;var t=n(this);if(t.hasAllClasses(i.wijCSS.stateDisabled))return;r[c].call(r)}).appendTo(r.container);if(n.browser.msie&&r.clip.find("iframe").length>0){var d=r.element.children("iframe.bgiframe."+a+"Frame");d.length===0&&(d=n('<iframe class="bgiframe '+a+'Frame" frameborder="0" tabindex="-1" src="javascript: false;" style="position:absolute;top:0px;left:0px;opacity:0;" />'),d.width(r[a].outerWidth()),d.height(r[a].outerHeight()),r.container.append(d))}})},t.prototype._applyBtnClass=function(){var e=this,t=e.options,r=t.wijCSS.stateDisabled,i=t.wijCSS.stateHover;n.each(["prevBtn","nextBtn"],function(n,s){var o=t[s+"Class"],u,a=e[s];o&&(r=o.disableClass||r,i=o.hoverClass||i),u=s==="prevBtn"?e.currentIdx<=0:e.currentIdx+t.display>=e.count,u&&!t.loop||t.disabled?a.removeClass(i).addClass(r):a.hasAllClasses(r)&&a.removeClass(r)})},t.prototype._applyBtnStyle=function(e){var t=this,r=0,i,s=t.options.wijCSS,o={collision:"none",of:t.container,my:e?"right{offset} center":"center bottom{offset}",at:e?"right center":"center bottom"},u={collision:"none",of:t.container,my:e?"left{offset} center":"center top{offset}",at:e?"left center":"center top"},a=t.options.buttonPosition==="inside",f,l,c=["cornerBottom","cornerTop","cornerRight","cornerLeft"],h=(e?1:0)*2+(a?1:0),p=(e?1:0)*2+(a?0:1),d=function(e,t,r,i,s){var o="";e.removeClass(t).addClass(r),!isNaN(i)&&i!==0&&(i>0?o="+"+i:o="-"+ -i),s.my=s.my.replace(/\{offset\}/,o),e.position(s);if(n.browser.msie){var u=e.next("iframe.bgiframe");u.length&&(u.css("left",e.css("left")),u.css("top",e.css("top")))}};r=e?t.prevBtn.width():t.prevBtn.height(),i=a?0:r,f=s[c[h]],l=s[c[p]],d(t.nextBtn,l,f,i,o),d(t.prevBtn,f,l,-i,u),t._applyBtnClass()},t.prototype._createDom=function(e){var t=this,r=t.options,i=t.element,u,a,f,h;if(i.is("div"))t.list=i.children("ul:eq(0)"),t.container=t.element,t.list.length||(t.list=n("<ul></ul>").appendTo(t.container));else{if(!i.is("ul"))return;t.list=i,t.container=i.parent()}t.itemBound=t._getItemBound(),e?(u=r.display>1&&!r.preview?l:c,a=r.wijCSS.iconArrowRight,f=r.wijCSS.iconArrowLeft):(u=r.display>1&&!r.preview?p:d,a=r.wijCSS.iconArrowDown,f=r.wijCSS.iconArrowUp),t.list.addClass(o).addClass(r.wijCSS.helperClearFix),h=s+r.wijCSS.widget+" "+u+" "+(r.preview?g+" ":"")+(r.display>1?r.wijCSS.content+" "+r.wijCSS.cornerAll:""),t.container.addClass(h),t.container.attr("dir","ltr"),t._createItems(e),t._createClip(e),t._applyContainerStyle(e),t._createButtons(f,a),t._applyBtnStyle(e),r.preview&&t._createPreview(),r.showTimer&&t._createTimer(),r.showPager&&t._createPager(),r.showControls&&t._createControls()},t.prototype._createPreview=function(){var e=this,t=e.options,n,r,i=t.orientation==="horizontal",s=i?"left":"top",o=i?"right":"bottom",u,a;r=e.itemBound[i?"w":"h"],n=e.offset=Math.round(r/4),u=t.display*r+n*2,e.clip[i?"width":"height"](u),e.list.css(s,function(e,t){return parseFloat(t)+n}),e.clip.css(s,function(e,t){return-n}),e.container.css("margin-"+s,n+"px").css("margin-"+o,n+"px"),e.list.find(x).hide();for(a=0;a<t.display;a++)e._getItemByIndex(e.currentIdx+a).find(x).show()},t.prototype._createItemsFromData=function(e){var t=this;if(!n.isArray(e)||!e.length||!n.isPlainObject(e[0])||n.isEmptyObject(e[0]))return;t.list.empty(),n.each(e,function(e,r){var i;if(!n.isPlainObject(r))return!0;i=t._generateMarkup(r),t.list.append(i)})},t.prototype._generateMarkup=function(e){var t,r;if(!n.isPlainObject(e))return;return t=n("<li></li>"),typeof e.linkUrl=="string"&&e.linkUrl&&(r=n("<a>").attr("href",e.linkUrl),r.appendTo(t)),typeof e.imageUrl=="string"&&e.imageUrl&&n("<img>").attr("src",e.imageUrl).appendTo(r||t),typeof e.caption=="string"&&e.caption&&n("<span>").html(e.caption).appendTo(t),t},t.prototype._createItems=function(e){var t=this,r,i,s=t.options,o,u;if(t.list){t._createItemsFromData(s.data),t.list.children("li").each(function(e,r){var i=n(r);t._createItem(i,e)}),o=t.list.children("li").eq(t.currentIdx).addClass(f);if(s.preview&&s.display>1){r=u=o;for(i=0;i<s.display-1;i++)u=u.next(),r=r.add(u);r.find("div.wijmo-wijcarousel-mask").css({opacity:0})}}},t.prototype._createItem=function(e,t){var r=this,i=r.options,s,o;return s=e.addClass(u).addClass(i.wijCSS.helperClearFix).find("img:eq(0)").attr("role","img").addClass("wijmo-wijcarousel-image"),r._applyItemBound(e),o=e.children("span:eq(0)").hide(),r._createCaption(e,s,o),i.preview&&n('<div class="wijmo-wijcarousel-mask">').appendTo(e),e.data("itemIndex",t),e},t.prototype._applyItemBound=function(e){var t=this,n=t.itemBound.w,r=t.itemBound.h;if(!t.itemWidth||!t.itemHeight)e.width(n).height(r),t.itemWidth=n-(e.outerWidth(!0)-n),t.itemHeight=r-(e.outerHeight(!0)-r);e.width(t.itemWidth).height(t.itemHeight)},t.prototype._createCaption=function(e,t,r){var i=this,s=i.options,o,u,a,f,l;s.showCaption&&(o=r.html()||t.attr("title"),o&&o.length&&(a=n("<span></span>").html(o),f=n(w).addClass([s.wijCSS.helperClearFix,"wijmo-wijcarousel-caption"].join(" ")).appendTo(e),u=n(w).addClass([s.wijCSS.helperClearFix,s.wijCSS.content,"wijmo-wijcarousel-text"].join(" ")).append(a).appendTo(e),i._applyCaptionStyle(f,u)))},t.prototype._applyCaptionStyle=function(e,t){var r=e.add(t),i;r.width(this.itemWidth),n.browser.webkit?(i=t.children("span").css("display","inline-block").height(),t.children("span").css("display","")):i=t.children("span").height(),r.height(i)},t.prototype._showCaption=function(e,t){var n=this,r=n._getItemByIndex(e),i=r.find(".wijmo-wijcarousel-text"),s=r.find(".wijmo-wijcarousel-caption");i.length&&i.fadeIn(300,function(){e<t&&n._showCaption(e+1,t)}),s.length&&(s.show(),s.animate({opacity:.5},300))},t.prototype._hideCaption=function(){this.element.find(x).hide()},t.prototype._createClip=function(e){this.clip=this.list.wrap("<div></div>").parent().addClass(a)},t.prototype._createBtn=function(e,t){var r=n(y),i=this.options;return r.addClass(i.wijCSS.stateDefault+" "+e).attr("role","button").mouseover(function(){n(this).hasAllClasses(i.wijCSS.stateDisabled)||n(this).addClass(i.wijCSS.stateHover)}).mouseout(function(){n(this).hasAllClasses(i.wijCSS.stateDisabled)||n(this).removeClass(i.wijCSS.stateHover)}).children("span:eq(0)").addClass(i.wijCSS.icon+" "+t),r},t.prototype._createControls=function(){var e=this,t=e.options,r={collision:"none",of:e.container,my:"center bottom",at:"center bottom"};t.control&&(e.controls=n(t.control).css({position:"absolute"}).appendTo(e.container),n.extend(r,t.controlPosition),e.controls.position(r))},t.prototype._createTimer=function(){var e=this,t=e.options;e._createPausePlay(),e.progressBar=n("<div></div>").addClass("wijmo-wijcarousel-timerbar-inner "+t.wijCSS.cornerAll).css({width:"0%"}).attr("role","progressbar"),e.timer=n("<div></div>").addClass("wijmo-wijcarousel-timerbar "+t.wijCSS.cornerAll).appendTo(e.container).append(e.progressBar).append(e.playPauseBtn)},t.prototype._createPausePlay=function(){var e=this,t=e.options;e.playPauseBtn=n(e._createBtn(h,t.auto?t.wijCSS.iconPause:t.wijCSS.iconPlay)).bind("click."+e.widgetName,function(){if(e.options.disabled)return;var r=n(this).children("span:eq(0)");e[r.hasAllClasses(t.wijCSS.iconPlay)?"play":"pause"]()})},t.prototype._createPagingItem=function(e,t,r,i){var s=n(E).attr({role:"tab","aria-label":i+1,title:i+1}).addClass(this.options.wijCSS.stateDefault),o,u;if(e)s.addClass("wijmo-wijcarousel-dot");else{if(!(t&&t.images&&t.images[i]))return;o=t.imageWidth,u=t.imageHeight,o&&u&&s.width(o).height(u),s.children("a").append(n("<img>").attr("src",t.images[i]))}r.append(s)},t.prototype._createPaging=function(e){var t=this,r=t.options,i,s,o,u=r.thumbnails,a=e==="dots";t.container.append(t.pager=n('<div><ul class="wijmo-list '+r.wijCSS.cornerAll+" "+r.wijCSS.helperClearFix+' role="tablist"></ul></div>')),a||t.pager.addClass("wijmo-wijcarousel-thumbnails"),s=t.pager.children("ul.wijmo-list");for(i=0;i<t.count;i++)t._createPagingItem(a,u,s,i);o=t.pager.find("li").eq(t.currentIdx),o.length&&t._activePagerItem(o),u&&n.each(["mousedown","mouseup","mouseover","mouseout","click"],function(e,t){var n=u[t];n&&typeof n=="string"&&window[n]&&(u[t]=window[n])}),t.pager.bind("mouseover."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"mouseover",u,a,function(e){e.addClass(r.wijCSS.stateHover)})}).bind("mouseout."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"mouseout",u,a,function(e){e.removeClass(r.wijCSS.stateHover)})}).bind("click."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"click",u,a,function(e){t.scrollTo(e.index()),t._activePagerItem(e)})}),a||n.each(["mousedown","mouseup"],function(e,r){n.isFunction(u[r])&&t.pager.bind(r,function(e){if(t.options.disabled)return;var i=n(e.target).closest(S);i.length&&u[r].call(i,e)})})},t.prototype._pageingEvents=function(e,t,r,i,s){var o=n(e.target).closest(S);o.length&&(n.isFunction(s)&&s.call(e,o),!i&&n.isFunction(r[t])&&r[t].call(o,e))},t.prototype._activePagerItem=function(e){var t=this.options.wijCSS.stateActive;e.addClass(t).attr("aria-selected","true").siblings("li").removeClass(t).removeAttr("aria-selected")},t.prototype._createWijSlider=function(){var e=this,t=e.options.sliderOrientation,r={orientation:t,range:!1,min:0,max:e.count-1,step:1,value:e.currentIdx,buttonClick:function(t,n){var r=n.value;e.scrollTo(r)},slide:function(t,n){var r=n.value;e.scrollTo(r)}},i=n("<div></div>").css("margin-bottom","10px").css(t==="horizontal"?"width":"height","200px").appendTo(e.container);e.pager=i.wijslider(r).parent().wrap("<div>").parent().addClass("wijmo-wijcarousel-slider-wrapper")},t.prototype._createWijPager=function(){var e=this,t={pageCount:e.count,pageIndex:e.currentIdx,pageButtonCount:e.count,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;e.scrollTo(r)}},r=n("<div></div>").appendTo(e.container);e.pager=r.wijpager(t).css({position:"absolute"})},t.prototype._createPager=function(){var e=this,t=e.options,r={collision:"none",of:e.container,my:"right top",at:"right bottom"};if(t.pagerType==="numbers")e._createWijPager();else if(t.pagerType==="dots"||t.pagerType==="thumbnails")e._createPaging(t.pagerType),e.pager.css({position:"absolute"});else{if(!n.wijmo.wijslider||t.pagerType!=="slider")return;e._createWijSlider(),t.sliderOrientation!=="horizontal"&&(r.my="left center",r.at="right center")}e.pager.width(e.pager.width()+1),n.extend(r,t.pagerPosition),t.pagerPosition=r,e.pager.addClass("wijmo-wijcarousel-pager").position(r)},t.prototype._setOption=function(t,r){var i=this,s=i.options,o,u,a,f=s.orientation==="horizontal";if(t==="pagerPosition"||t==="animation"||t==="controlPosition")n.extend(!0,s[t],r);else{a=s[t],e.prototype._setOption.call(this,t,r);switch(t){case"showControls":case"showPager":case"showTimer":if(r===a)break;o=t.replace(/show/i,"").toLowerCase(),u=t.replace(/show/i,"_create"),r===!0?i[o]?i[o].jquery&&i[o].show():i[u]():i[o].hide();break;case"loop":case"orientation":case"display":case"preview":r!==a&&(i._wijdestroy(),i._create());break;case"data":i._createItems(f),i._applyContainerStyle(f),i._applyBtnClass(),s.showPager&&i._createPager();break;case"showCaption":r?i._createItems(f):i.element.find(x).remove();break;case"buttonPosition":i._applyBtnStyle(f);break;case"pagerType":r!==a&&i._reCreatePager();break;case"disabled":i._handleDisabledOption(r,i.element);break;case"showControlsOnHover":i._set_showControlsOnHover(r);break;case"thumbnails":i._reCreatePager();break;default:}}},t.prototype._reCreatePager=function(){var e=this;e.pager&&e.pager.jquery&&(e.pager.remove(),e.pager=null),e.options.showPager&&e._createPager()},t.prototype._getItemBound=function(){var e={},t=this,n=t.options;return n.orientation==="horizontal"?e={w:Math.round(t.width/n.display),h:t.height}:e={w:t.width,h:Math.round(t.height/n.display)},e},t.prototype._stopAnimation=function(){var e=this;e.isPlaying&&e.progressBar&&e.progressBar.stop().css({width:"0%"}),e.list.stop(!0,!0)},t.prototype._itemClick=function(e){var t=n(e.target),r=this,i=r.options,s=r.currentIdx,o=t.closest("li."+u),a=o.data("itemIndex"),f,l;if(r.options.disabled){e.preventDefault();return}if(o.length>0){if(i.preview&&a<s||a>s+i.display-1)f=r._getItemByIndex(s).index(),l=o.index()>f?"next":"previous",r[l]();r._trigger("itemClick",e,{index:a,el:o})}},t.prototype._wijdestroy=function(){var e=this,t=e.options.wijCSS;e.container.removeClass("wijmo-wijcarousel "+t.widget).removeClass("wijmo-wijcarousel-horizontal").removeClass("wijmo-wijcarousel-vertical"),e.timeout&&(e.list.stop(!0),window.clearTimeout(e.timeout),e.timeout=null),e.options.showTimer&&e.progressBar&&e.progressBar.stop(!0),e.list.unwrap().removeClass("wijmo-wijcarousel-list").removeClass(t.helperClearFix).unbind("."+e.widgetName).removeAttr("style").children("li").each(function(e,r){var i=n(r);i.removeClass("wijmo-wijcarousel-item").removeClass(t.helperClearFix).removeClass(f),i.children("img").removeClass("wijmo-wijcarousel-image"),i.children(x).remove(),i.css({width:"",height:""}),i.removeData("itemIndex")}),e.itemWidth=e.itemHeight=undefined,e.element.find(b+",.wijmo-wijcarousel-timerbar").remove(),e.pager&&(e.pager.remove(),e.pager=null),e.timer&&(e.timer.remove(),e.timer=null),e.element.find("li>span").css("display","")},t.prototype.destroy=function(){this._wijdestroy(),n.Widget.prototype.destroy.apply(this)},t.prototype._resetDom=function(){var e=this;e._applyListStyle(),e.list.children("li").each(function(t,r){var i=n(r),s=i.children("div.wijmo-wijcarousel-caption"),o=i.children("div.wijmo-wijcarousel-text");e._applyItemBound(i),e._setStyle(s.add(o),function(){e._applyCaptionStyle(s,o)})}),e._applyContainerStyle(e.isHorizontal,!0),e.options.preview&&e._createPreview(),e._setStyle(e.prevBtn.add(e.nextBtn),function(){e._applyBtnStyle(e.isHorizontal)}),e._setStyle(e.pager,function(){e.pager.position(e.options.pagerPosition)}),e._setStyle(e.controls,function(){e.controls.position(e.options.controlPosition)})},t.prototype._setStyle=function(e,t){var n=!0;if(!e||e.length===0)return;e.css("display")=="none"&&(n=!1,e.css("display","")),t.call(this),n||e.css("display","none")},t.prototype.refresh=function(){var e=this,t=e.options,n=e.element;e.width=n.width()||640,e.height=n.height()||480,e.itemWidth=e.itemHeight=0,e._resetDom(),e.pause()},t.prototype.play=function(){var e=this,t=e.options;if(e.isPlaying||t.disabled)return;if(t.interval===0)return e.pause();if(t.showTimer&&e.progressBar)e.progressBar.css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPlay).addClass(t.wijCSS.iconPause),e.progressBar.animate({width:"100%"},t.interval,null,function(){e._scroll("next",t.step)});else{if(e.timeout)return;e.timeout=window.setTimeout(function(){e.next()},t.interval)}e.isPlaying=!0},t.prototype.pause=function(){var e=this,t=e.options;if(t.showTimer&&e.progressBar)e.progressBar.stop(!0).css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPause).addClass(t.wijCSS.iconPlay);else{if(e.timeout===null)return;window.clearTimeout(e.timeout),e.timeout=null}e.isPlaying=!1},t.prototype.next=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("next",t)},t.prototype.previous=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("previous",t)},t.prototype.scrollTo=function(e){var t=this,n,r;t._stopAnimation(),n=e>t.currentIdx?"next":"previous",r=Math.abs(e-t.currentIdx),e!==t.currentIdx&&t._scroll(n,r)},t.prototype._scroll=function(e,t){var r=this,i=r.options,s=r.list,o=0,u,a,l=i.orientation==="horizontal",c={},h=r.itemBound[l?"w":"h"],p=l?"left":"top",d=t,v={},m=0,g=r.currentIdx*h;if(!i.loop){if(e==="next")if(r.currentIdx+i.display+t<=r.count)o=-g-h*d;else{if(!(r.currentIdx+i.display<r.count))return;d=r.count-r.currentIdx-i.display,o=-g-h*d}else r.currentIdx-t>=0?o=-g+h*d:r.currentIdx>0&&(d=r.currentIdx,o=0);o!==undefined&&(c[p]=o+r.offset,r._doAnimation(e,c,d))}else{i.preview&&(o=m=-h*T+r.offset);if(e==="next")o+=-h*d,c[p]=o;else{for(a=0;a<t;a++)o-=h,s.children("li:last").prependTo(s);v[p]=o,c[p]=m,s.css(v)}r._doAnimation(e,c,t,p,h)}if(i.preview){u=n();for(a=0;a<i.display;a++)u=u.add(r._getItemByIndex(r.currentIdx+a).find("div.wijmo-wijcarousel-mask:eq(0)"));u.stop(!0).animate({opacity:.6},i.animation.duration/2,function(){r._getItemByIndex(r.currentIdx).removeClass(f)})}},t.prototype._doAnimation=function(e,t,r,i,s){var o=this,u=o.list,a=o.options,f,l,c={complete:null},h,p={},d;if(!o.list.children().length)return;e==="next"?d=o.currentIdx+r:d=o.currentIdx-r,a.loop?(d=d%o.count+(d<0?o.count:0),h=function(){var t=0;a.preview&&(t=o.offset-T*s);if(e==="next"){for(l=0;l<r;l++)u.children("li:first").appendTo(u);i&&(p[i]=t,u.css(p))}o.currentIdx=d,o._setCurrentState(o.currentIdx)}):h=function(){o.currentIdx=d,o._setCurrentState(o.currentIdx)},c.complete=h,f={index:o.currentIdx,to:d,el:o._getItemByIndex(o.currentIdx)};if(!o._trigger("beforeScroll",null,f))return;a.animation&&a.animation.complete&&(a.animation.complete=undefined),n.extend(c,a.animation),o._hideCaption(),u.animate(t,c)},t.prototype._setCurrentState=function(e){var t=this,r=t.options,i,s,o,u=e+r.display-1,a,l,c;r.loop?t.isPlaying&&(window.clearTimeout(t.timeout),t.timeout=null,t.isPlaying=!1,t.play()):(o=e+r.display<t.count,t.isPlaying&&o?(window.clearTimeout(t.timeout),t.timeout=null,t.isPlaying=!1,t.play()):t.progressBar&&t.pause(),t._applyBtnClass());if(r.preview){l=n(),a=t._getItemByIndex(e);for(c=0;c<r.display;c++)l=l.add(t._getItemByIndex(e+c).find("div.wijmo-wijcarousel-mask:eq(0)"));l.animate({opacity:0},r.animation.duration/2,function(){a.addClass(f),t._showCaption(e,u)})}else t._showCaption(e,u);t.pager&&(n.wijmo.wijslider&&t.pager.find(":wijmo-wijslider").length?t.pager.find(":wijmo-wijslider:eq(0)").wijslider("value",e):n.wijmo.wijpager&&t.pager.is(":wijmo-wijpager")?t.pager.wijpager("option","pageIndex",e):t.pager.jquery&&(i=t.pager.find(">ul:eq(0)>li").eq(e),i.length&&t._activePagerItem(i))),s={firstIndex:e,lastIndex:u},t._trigger("afterScroll",null,s)},t.prototype._getItemByIndex=function(e){var t=this,r=t.list,i,s=e%t.count;return t.options.loop?(r.children("li").each(function(e){var t=n(this);if(t.data("itemIndex")===s)return i=t,!1}),i):r.children("li").eq(s)},t.prototype._collectionChanged=function(e){var t=this;t.count=t.count+(e==="add"?1:-1),t._applyListStyle(),t.pager&&t.pager.jquery&&(t.pager.remove(),t.pager=null,t._createPager()),t._applyBtnClass()},t.prototype.add=function(e,t){var r=this,i,s;if(typeof e=="string")i=n(e);else if(e.jquery)i=e;else{if(!n.isPlainObject(e))return;i=r._generateMarkup(e)}i.is("li")||(i=i.wrap("<li></li>").parent()),s=i,typeof t=="number"&&t>=0&&t<r.count?(s.insertBefore(r._getItemByIndex(t)),r.list.children("li").each(function(e,r){var i=n(r);i.data("itemIndex")>=t&&i.data("itemIndex",i.data("itemIndex")+1)})):(t==0&&s.appendTo(r.list),s.insertAfter(r._getItemByIndex(r.count-1))),r._createItem(i,t!==undefined?t:r.count),r._collectionChanged("add")},t.prototype.remove=function(e){var t=this,r;typeof e=="number"&&e>=0&&e<t.count?(r=t._getItemByIndex(e),t.list.children("li").each(function(t,r){var i=n(r);i.data("itemIndex")>e&&i.data("itemIndex",i.data("itemIndex")-1)})):r=t._getItemByIndex(t.count-1),r&&r.remove(),t._collectionChanged("remove")},t}(e.wijmoWidget);t.wijcarousel=N;var C=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn ui-btn-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-b",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijcarousel')",this.data=[],this.auto=!1,this.interval=5e3,this.showTimer=!1,this.buttonPosition="inside",this.showPager=!1,this.prevBtnClass={defaultClass:"",hoverClass:"",disableClass:""},this.nextBtnClass={defaultClass:"",hoverClass:"",disableClass:""},this.pagerType="numbers",this.thumbnails={mouseover:null,mouseout:null,mousedown:null,mouseup:null,click:null,imageWidth:58,imageHeight:74,images:[]},this.pagerPosition={},this.orientation="horizontal",this.sliderOrientation="horizontal",this.loop=!0,this.animation={queue:!0,disable:!1,duration:1e3,easing:"linear"},this.start=0,this.display=1,this.preview=!1,this.step=1,this.showControls=!1,this.control="",this.controlPosition={},this.showCaption=!0,this.showControlsOnHover=!1,this.itemClick=null,this.beforeScroll=null,this.afterScroll=null,this.loadCallback=null}return e}();N.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new C),n.wijmo.registerWidget("wijcarousel",N.prototype)})(e.carousel||(e.carousel={}));var t=e.carousel})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijgallery",i="wijmo-wijgallery",s="wijmo-wijgallery-",o=s+"selected",u=s+"button-",a=s+"button",f="wijmo-wijgallery-thumbs-pointer-{0}",l="wijmo-wijgallery-flashwrapper",c='<div class="wijmo-wijgallery-frame"><div class="wijmo-wijgallery-content"></div></div>',h='<div class="wijmo-wijgallery-thumbs"></div>',p="<a><span></span></a>",d='<div class="wijmo-wijgallery-frame-{0}"><a href="#" class="wijmo-wijgallery-frame-link"></a></div>',v="<div></div>",m="li.wijmo-wijcarousel-item";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(t,r){var i=this,s=i.options,o,u,a,f;if(t==="framePosition"||t==="thumbnailPosition"||t==="transitions"||t==="pagingPosition")n.extend(!0,s[t],r);else{a=s[t],e.prototype._setOption.call(this,t,r);switch(t){case"disabled":i._handleDisabledOption(r,i.element);break;case"thumbnailOrientation":i.thumbs[i.thumbWidgetName]({orientation:r});break;case"thumbsDisplay":i.thumbs[i.thumbWidgetName]({display:r});break;case"autoPlay":i[r?"play":"pause"]();break;case"showCounter":case"showTimer":case"showControls":o=t.replace(/show/i,"").toLowerCase(),u=t.replace(/show/i,"_create"),r!==a&&(r===!0?i[o]?i[o].jquery&&i[o].show():i[u]():i[o].hide());break;case"showCaption":r?(i._createCaption(i.size),f=i._loadCaption(i.images[i.currentIdx]),f.show()):i.element.find(".wijmo-wijgallery-caption,.wijmo-wijgallery-text").remove();break;case"showPager":case"thumbsLength":case"thumbnailDirection":case"showControlsOnHover":case"mode":case"data":i._wijdestroy(),i._create();break;default:}}},t.prototype._handleDisabledOption=function(e,t){var n=this;n.pager&&!n.pager.is(":hidden")?n.pager.wijpager("option","disabled",e):n.thumbs&&!n.thumbs.is(":hidden")&&n.thumbs[n.thumbWidgetName]({disabled:e})},t.prototype._initLi=function(e){var t=e.children("a:eq(0)"),r=e.find("img:eq(0)"),i=e.find("span:eq(0)"),s={url:null,thumbUrl:null,title:r.attr("alt"),caption:undefined};return t.length&&t.attr("href")?(s.url=t.attr("href"),s.title||(s.title=t.attr("title"))):r.length&&(s.url=r.attr("src")),i.length?s.caption=i:r.attr("title")&&(s.caption=n("<span>").html(r.attr("title"))),s.thumbUrl=r.attr("src"),s},t.prototype._initStatus=function(){var e=this,t;e.images=[],e.ul=e.element.children("ul"),t=e.ul.children("li"),e._count=t.length,t.each(function(t){var r=e._initLi(n(this));e.images.push(r)})},t.prototype._createMarkupFromData=function(){var e=this,t=e.options,r=t.data,i=e.element,s=i.children("ul:eq(0)");e.images=r,s.length?s.empty():s=n("<ul>").appendTo(i),e.ul=s,n.each(r,function(e,t){var r=n("<a>"),i=n("<li>"),o=n("<img>");t.url&&r.attr("href",t.url),t.thumbUrl&&o.attr("src",t.thumbUrl),t.title&&o.attr("alt"),r.append(o).appendTo(i),i.appendTo(s)}),e._count=r.length},t.prototype._create=function(){var e=this,t=e.options;e.container=e.element,e.container.addClass([i,t.wijCSS.widget].join(" ")),e.currentThumbIdx=0,e.currentIdx=-1,e.timerCount=0,window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),t.showPager?(t.pagingPosition=!0,t.thumbnails=!1):t.thumbnails=!0,t.data&&t.data.length?e._createMarkupFromData():e._initStatus(),t.loadCallback&&n.isFunction(t.loadCallback)&&e._trigger("loadCallback",null,e),e._createDom(),t.autoPlay&&e._play(!0),t.showControlsOnHover&&(e.frame.find(".wijmo-wijpager,.wijmo-wijgallery-button-next,.wijmo-wijgallery-counter,.wijmo-wijgallery-button-previous").hide(),!e.isPlaying&&e.timer&&e.timer.hide()),t.disabled&&e.disable(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijgallery")},t.prototype._createDom=function(){var e=this,t=e.options;t.thumbnails?e._createThumbnails():e.ul.hide(),e._createFrame(),t.control&&e._createControls(),t.showCounter&&e._createCounter(),t.showTimer&&e._createTimer(),t.showPager&&e._createPager()},t.prototype._getFrameSize=function(){var e=this,t=e.options.thumbnailOrientation==="horizontal",n=e.element.height()-(t?e.thumbs?e.thumbs.outerHeight(!0):0:0),r=e.element.width()-(t?0:e.thumbs?e.thumbs.outerWidth(!0):0);return{w:r<2||!r?750:r,h:n<2||!n?300:n}},t.prototype._createFrame=function(){var e=this,t=e.options,r,i,s=e._getFrameSize(),o=t.thumbnailDirection==="after";e.frame=n(c).addClass(t.wijCSS.content+" "+t.wijCSS.helperClearFix)[o?"prependTo":"appendTo"](e.container).setOutWidth(s.w-1).setOutHeight(s.h).wrap('<div class="wijmo-wijgallery-framewrapper">'),e.size=s,r=e.frame.width(),i=e.frame.height(),e.frameWrapper=e.frame.parent(),t.thumbnailOrientation==="vertical"&&e.frameWrapper.addClass("wijmo-wijgallery-framewrapper-vertical"),t.showControlsOnHover&&e.frame.bind("mouseenter."+e.widgetName,function(){if(e.options.disabled)return;e._showControls("controls")}).bind("mouseleave."+e.widgetName,function(){if(e.options.disabled)return;e._hideControls("controls")}),e.content=e.frame.children("div.wijmo-wijgallery-content"),t.mode==="img"&&e._createFrameMask(),e._createPrevNextBtn(),e._createCaption(s),e._createLoading(),e.last=n('<div class="'+t.wijCSS.overlay+' wijmo-wijgallery-last"></div>').appendTo(e.content).width(r).height(i).css({"line-height":s.h+"px"}),e.current=n('<div class="'+t.wijCSS.overlay+' wijmo-wijgallery-current"></div>').appendTo(e.content).width(r).height(i).css({"line-height":s.h+"px"}),e._show(0)},t.prototype._createControls=function(){var e=this,t=e.options,r={collision:"none",of:e.container,my:"center bottom",at:"center bottom"};t.control&&(e.controls=n(t.control).css({position:"absolute"}).appendTo(e.container),n.extend(r,t.controlPosition),e.controls.position(r))},t.prototype._createLoading=function(){var e=this;e.loading=n("<div></div>").addClass("wijmo-wijgallery-loading").appendTo(e.content),e.loading.css({left:(e.content.width()-e.loading.width())/2,top:(e.content.height()-e.loading.height())/2}),e.loading.hide()},t.prototype._createFrameMask=function(){var e=this,t=e.options;n.each(["previous","next"],function(r,i){var s=n(d.replace(/\{0\}/,i)).appendTo(e.frame),o=s.children("a");n.browser.msie&&parseInt(n.browser.version)<=9&&s.css({"background-color":"#fff"}),t.showControlsOnHover&&s.bind("mouseenter."+e.widgetName,function(){if(e.options.disabled)return;e._showControls(i)}).bind("mouseleave."+e.widgetName,function(){if(e.options.disabled)return;e._hideControls(i)}),o.bind("click."+e.widgetName,function(t){if(e.options.disabled)return;e[i](),t.preventDefault()})})},t.prototype._createCounter=function(){var e=this,t=e.options;if(!t.showCounter){e.counter&&(e.counter.remove(),e.counter=undefined);return}e.counter||(e.counter=n("<div></div>").addClass("wijmo-wijgallery-counter "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerTL).appendTo(e.frame)),e._refreshCounter()},t.prototype._refreshCounter=function(){var e=this,t=e.options,r;if(!e.counter)return;e.counter.empty(),t.counter&&(r=t.counter.replace(/\[i\]/,e.currentIdx+1),r=r.replace(/\[n\]/,e._count),n("<span></span>").text(r).appendTo(e.counter))},t.prototype._createPrevNextBtn=function(){var e=this,t=e.options.wijCSS;n.each(["next","previous"],function(r,i){var s=i==="next"?t.iconArrowRight:t.iconArrowLeft,o;o=e.frame.find(".wijmo-wijgallery-frame-"+i);if(!o.length||e.options.mode!=="img")o=e.frame;e[i+"Btn"]=n(e._createBtn(u+i,s)).bind("click."+e.widgetName,n.proxy(e[i],e)).appendTo(o),e._applyBtnStyle(i)})},t.prototype._applyBtnStyle=function(e){var t=this,n=t.options,r=e==="next",i=t[e+"Btn"],s=r?"right center":"left center",o=s,u=n.wijCSS,a=r?u.cornerLeft:u.cornerRight,f=e==="next"?t.currentIdx>=t._count:t.currentIdx<=0,l={collision:"none",of:t.frame,my:o,at:s};i.addClass(a).position(l),f?i.removeClass(u.stateHover).addClass(u.stateDisabled):i.hasAllClasses(u.stateDisabled)&&i.removeClass(u.stateDisabled)},t.prototype._createCaption=function(e){var t=this,r=t.options,i=r.wijCSS;r.showCaption&&(t.overlay=n(v).addClass([i.content,i.helperClearFix,"wijmo-wijgallery-caption"].join(" ")).width(e.w).appendTo(t.content),t.caption=n(v).addClass([i.content,i.helperClearFix,"wijmo-wijgallery-text"].join(" ")).width(e.w).appendTo(t.content))},t.prototype._loadCaption=function(e){var t=this,r=e.caption,i,s=n("<span></span>"),o=t.element.find(".wijmo-wijgallery-text,.wijmo-wijgallery-caption");return r&&(o.show(),r.jquery&&r.show(),s.html(r),t.caption.empty().append(s),i=s.outerHeight(!0),o.height(i),n.browser.msie&&o.height(s.css("display","block").outerHeight(!0))),o.hide(),o},t.prototype._showCaption=function(e){var t=this;e&&e.caption&&(t.caption.length&&t.caption.fadeIn(500),t.overlay.length&&t.overlay.show().animate({opacity:.5},500))},t.prototype._createTooltip=function(e){var t=this,r=t.options.wijCSS,i=e||"bottom";t.pointer=n("<div>").addClass([r.content,r.stateDefault,f.replace(/\{0\}/,i)].join(" ")),t.pointer.appendTo(t.thumbsWrapper).hide()},t.prototype._createThumbnails=function(){var e=this,t=e.options,r=t.thumbnailDirection==="after",i="wijmo-wijgallery-thumbs-{0}",s=t.thumbnailOrientation==="horizontal",o=r?s?"bottom":"right":s?"top":"left";e.thumbPosition=o,e.thumbs=n(h).appendTo(e.container).addClass(t.wijCSS.content).addClass(s?"wijmo-wijcarousel-horizontal-multi":"wijmo-wijcarousel-vertical-multi"),s?e.thumbs.css({height:t.thumbsLength+"px"}).setOutWidth(e.element.width()):e.thumbs.css({width:t.thumbsLength+"px"}).setOutHeight(e.element.height()),e.ul.appendTo(e.thumbs),e.ul.children("li").each(function(t,r){var i=n(r).children("a"),s=e.images[t],o=s.thumbUrl;i.length||(i=n(r).wrapInner("<a>").children("a"),i.attr("href",o))}),n[e.namespace][e.thumbWidgetName]&&(e.thumbs.addClass(i.replace(/\{0\}/,o)).find("li").addClass(t.wijCSS.stateDefault).hover(function(){n(this).addClass(t.wijCSS.stateHover)},function(){n(this).removeClass(t.wijCSS.stateHover)}),e.thumbsWrapper=e.thumbs[e.thumbWidgetName]({display:t.thumbsDisplay,step:t.thumbsDisplay-1,itemPadding:"0 10px",showCaption:t.showThumbnailCaptions,orientation:t.thumbnailOrientation,loop:!1,itemClick:function(t,n){var r=n.index;e.show(r),t.preventDefault()},afterScroll:function(t,n){e.currentThumbIdx=n.firstIndex,e.activeLi&&e.activeLi.is("li")&&e.activeLi.index()>=n.firstIndex&&e.activeLi.index()<=n.lastIndex&&e._highlightThumb(e.activeLi),e.isScrolling=!1},beforeScroll:function(n,r){e.isScrolling=!0,t.mode==="swf"||t.mode==="flv"?e.pointer.hide():e.pointer.fadeOut(100)}}).wrap('<div class="wijmo-wijgallery-thumbswrapper">').parent(),s||e.thumbsWrapper.addClass("wijmo-wijgallery-thumbswrapper-vertical"),e._createTooltip(o))},t.prototype._calculatePosition=function(e,t,n,r,i,s){var o=this;o.thumbPosition==="bottom"?(e.left=e.left+(r-t)/2+s,e.top=e.top-n):o.thumbPosition==="top"?(e.left=e.left+(r-t)/2+s,e.top=e.top+i+2*s):o.thumbPosition==="left"?(e.left=e.left+r+2*s,e.top=e.top+(i-n)/2+s):o.thumbPosition==="right"&&(e.left=e.left-t,e.top=e.top+(i-n)/2+s)},t.prototype._highlightThumb=function(e){var t=this,n,r,i,s,u,a,f=[o,t.options.wijCSS.stateActive].join(" ");e&&e.length&&(e.siblings("li."+o).removeClass(f),e.addClass(f),n=t.pointer.outerWidth(!0),r=t.pointer.outerHeight(!0),i=e.width(),s=e.height(),u=e.offset(),a=5,t._calculatePosition(u,n,r,i,s,a),t.pointer.fadeIn(100),t.pointer.offset(u))},t.prototype._getSelector=function(e,t){var n,r=".wijmo-wijgallery-button-",i=".wijmo-wijpager,.wijmo-wijgallery-counter";return t&&(i+=",.wijmo-wijgallery-timerbar"),e==="next"||e==="previous"?n=r+e:e==="controls"?n=i:n=i+","+r+"next,"+r+"previous",n},t.prototype._showControls=function(e){var t=this,r;r=t._getSelector(e,!t.isPlaying&&t.timer),t.frame.find(r).stop(!0,!0).fadeIn(400,function(){n(this).css("opacity","")})},t.prototype._hideControls=function(e){var t=this,n;n=t._getSelector(e,!t.isPlaying&&t.timer),this.frame.find(n).stop(!0,!0).fadeOut(600)},t.prototype._createPager=function(){var e=this,t=e.options,r,i=t.thumbsDisplay,s=1,o=e.currentIdx,u=e.currentIdx,a={collision:"none",of:e.container,my:"right top",at:"right bottom"};t.thumbnails?(r=n("<div></div>").appendTo(e.thumbs),i!==0&&(s=Math.ceil(e._count/i),o=Math.ceil(e.currentIdx/i)),e.pager=r.wijpager({pageCount:s,pageIndex:o,pageButtonCount:s,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;(u<r*i||u>=(r+1)*i)&&e.thumbs[e.thumbWidgetName]("scrollTo",r*i),t.preventDefault()}}).css({position:"absolute"})):(r=n("<div></div>").appendTo(e.container),e.pager=r.wijpager({pageCount:e._count,pageIndex:e.currentIdx,pageButtonCount:e._count,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;e._show(r)}}).css({position:"absolute"}),n.extend(a,t.pagingPosition),e.pager.addClass("wijmo-wijgallery-pager").position(a),e._adjustPagerLeft())},t.prototype._adjustPagerLeft=function(){var e=this.pager.css("left").replace(/px/,""),t=parseFloat(e);isNaN(t)||this.pager.css("left",t-1)},t.prototype._createBtn=function(e,t){var r=n(p),i=this.options;return r.addClass(i.wijCSS.stateDefault+" "+e).attr("role","button").bind("mouseover"+this.widgetName,function(){if(n(this).hasAllClasses(i.wijCSS.stateDisabled))return;n(this).addClass(i.wijCSS.stateHover)}).bind("mouseout"+this.widgetName,function(){if(n(this).hasAllClasses(i.wijCSS.stateDisabled))return;n(this).removeClass(i.wijCSS.stateHover)}),r.children("span:eq(0)").addClass(i.wijCSS.icon+" "+t),r},t.prototype._createTimer=function(){var e=this,t=e.options;e._createPausePlay(),e.progressBar=n("<div></div>").addClass("wijmo-wijgallery-timerbar-inner "+t.wijCSS.cornerAll).css({width:"0%"}).attr("role","progressbar"),e.timer=n("<div></div>").addClass("wijmo-wijgallery-timerbar "+t.wijCSS.cornerAll).appendTo(e.frame).append(e.progressBar).append(e.playPauseBtn)},t.prototype._createPausePlay=function(){var e=this,t=e.options;e.playPauseBtn=n(e._createBtn(a,t.autoPlay?t.wijCSS.iconPause:t.wijCSS.iconPlay)).bind("wijclick."+e.widgetName,function(){if(!n(this).hasAllClasses(t.wijCSS.stateDisabled)){var r=n(this).children("span:eq(0)");e[r.hasAllClasses(t.wijCSS.iconPlay)?"play":"pause"]()}})},t.prototype._show=function(e){var t=this,r=t.images[e],i,s,o,u=t._getFrameSize(),a=t.options,f=a.mode;if(t.currentIdx===e)return;r&&n.isPlainObject(r)&&(t.loading.delay(500).fadeIn(100),o=t.last.children("img,div."+l),o.length&&o.remove(),f==="swf"||f==="flv"?(t.last.hide(),t.current.empty(),t._wrapFlash(t.current,f,r.url),t.picture=t.current.children("div."+l),t._setCurrentStates(e),t.loading.stop().hide(),t._thumbsScroll(e)):f==="img"?(t.picture&&t.picture.length&&t.last.append(t.picture),t.current.addClass("ui-helper-hidden-accessible"),t.last.show(),t.picture=n("<img>"),t.picture.one("load",function(){t.picture.data("itemIndex",e).appendTo(t.current),t._imageLoaded(t,u)}).attr({src:r.url,alt:r.title})):f==="iframe"&&(t.current.is(":hidden")?(i=t.current,s=t.last):(i=t.last,s=t.current),t.picture=n("<iframe></iframe>").addClass("wijmo-wijgallery-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true",src:r.url}).hide().appendTo(i).data("itemIndex",e).bind("load",function(){var e=n(this),r=e.data("itemIndex");t.loading.stop().hide(),t.pointer&&t.pointer.fadeOut(100),t._setCurrentStates(r),r!==undefined&&(a.showCaption,e.show(),s.fadeOut(function(){s.empty()}),i.fadeIn())})))},t.prototype._imageLoaded=function(e,t){var n=e.picture.attr("role","img"),r=n.data("itemIndex"),i=n[0].naturalWidth||n.width(),s=n[0].naturalHeight||n.height(),o=e.images[r];e.loading.stop().hide(),e.current.removeClass("ui-helper-hidden-accessible"),e.current.hide(),e.pointer&&e.pointer.fadeOut(100),i>=t.w||s>=t.h?i/s>t.w/t.h?n.css({width:"100%"}):n.css({height:"100%"}):i<t.w&&s<t.h&&n.addClass(e.options.wijCSS.stateDefault).addClass("wijmo-wijgallery-small-image"),r!==undefined&&o!==undefined&&(e.options.showCaption&&e.caption&&e._loadCaption(o),e._animate(r))},t.prototype._animate=function(e){var t=this,r=t.options,i=r.transitions,s=r.thumbnailOrientation==="horizontal",o,u,a,f,l,c,h=i.animated,p=i.duration;if(!t.last.children().length){t._setCurrentStates(e),t.last.hide(),t.current.show();return}l={index:t.currentIdx,to:e,toImg:t.images[e]};if(!t._trigger("beforeTransition",null,l))return;h?h==="slide"?(o=t.size.w,u=t.size.h,t.current.show(),c=t.currentIdx>e?!0:!1,a=n.createWrapper(t.last).css({overflow:"hidden",width:s?o*2:o,height:s?u:u*2,left:s?c?-o:0:0,top:s?0:c?-u:0}),a[c?"prepend":"append"](t.current),a.animate({left:s?c?0:-o:0,top:s?0:c?0:-u},p,function(){t.last.parent().is(".ui-effects-wrapper")&&t.last.unwrap(),t.last.hide(),t._setCurrentStates(e)})):n.mobile?(f=p/2,t.last.fadeOut(f,function(){t.current.stop(!0,!0).fadeIn(f,function(){t._setCurrentStates(e)})})):h==="explode"||h==="scale"||h==="blind"||h==="fold"?(t.current.css({position:"absolute"}),t.current.stop(!0,!0).show(h,p,function(){t.last.hide(),t._setCurrentStates(e)})):h==="size"?(t.last.hide(),t.current.stop(!0,!0).show(h,p,function(){t.last.hide(),t._setCurrentStates(e)})):(f=p/2,t.last.hide(h,f,function(){t.last.hide(),t.current.stop(!0,!0).show(h,f,function(){t._setCurrentStates(e)})})):(t.last.hide(),t.current.show(),t._setCurrentStates(e)),t._thumbsScroll(e)},t.prototype._thumbsScroll=function(e){var t,n=this,r=n.options;n.thumbs&&n.thumbs[n.thumbWidgetName]&&(r.scrollWithSelection?(t=e-Math.ceil(r.thumbsDisplay/2)+1,e>0&&e<n._count-1&&n.thumbs[n.thumbWidgetName]("scrollTo",t)):e>r.thumbsDisplay+n.currentThumbIdx-1?n.thumbs[n.thumbWidgetName]("scrollTo",e-r.thumbsDisplay+1):e<n.currentThumbIdx&&n.thumbs[n.thumbWidgetName]("scrollTo",e))},t.prototype._setCurrentStates=function(e){var t=this,n=t.options,r,i,s;s=t.currentIdx,t.currentIdx=e,r=e+1<t._count,t.isPlaying&&r?(t.timeout=null,t.isPlaying=!1,t._play()):t.progressBar&&t.pause(),e+1>=t._count?t.nextBtn.add(t.playPauseBtn).removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled):t.nextBtn.add(t.playPauseBtn).removeClass(n.wijCSS.stateDisabled),e<=0?t.previousBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled):t.previousBtn.removeClass(n.wijCSS.stateDisabled),n.showCaption&&t._showCaption(t.images[e]),t.thumbs&&t.thumbs[t.thumbWidgetName]?(t.activeLi=t.thumbs.find(m).eq(e),t.isScrolling||t._highlightThumb(t.activeLi)):t.pager&&t.pager.is(":wijmo-wijpager")&&t.pager.wijpager("option","pageIndex",e),t._refreshCounter(),t._clearCss(),i={last:s,index:t.currentIdx,toImg:t.images[t.currentIdx]},t._trigger("afterTransition",null,i)},t.prototype._clearCss=function(){this.current.css({position:"",visibility:""})},t.prototype._resetState=function(){var e=this;e._stopAnimation(),e.isPlaying&&e.progressBar&&(e.progressBar.stop(),e.progressBar.css({width:"0%"}))},t.prototype._stopAnimation=function(){var e=this,t;t=e.content.find(".ui-effects-wrapper"),t.length&&t.stop(!0,!0),e.current.stop(!0,!0),e.last.stop(!0,!0)},t.prototype.count=function(){return this._count},t.prototype._wijdestroy=function(){var e=this,t=e.options.wijCSS;e.frame.unwrap().remove(),e.options.thumbnails?n[e.namespace][e.thumbWidgetName]&&(e.thumbs[e.thumbWidgetName]("destroy"),e.element.find("li").unbind().removeClass(t.stateActive).filter("."+o).removeClass(o),e.thumbs.children("ul").unwrap().unwrap()):(e.pager&&e.pager.length&&e.pager.remove(),e.element.find("ul").css({display:""})),e.pointer&&e.pointer.remove(),e.element.removeClass([i,t.widget,t.content,t.cornerAll].join(" "))},t.prototype.destroy=function(){this._wijdestroy(),n.Widget.prototype.destroy.apply(this)},t.prototype.show=function(e){var t=this;t._resetState(),t._show(e)},t.prototype.next=function(){var e=this,t;if(e.options.disabled)return;e._resetState(),t=e.currentIdx+1,t<e._count&&e._show(t)},t.prototype.previous=function(){var e=this,t;if(e.options.disabled)return;e._resetState(),t=e.currentIdx-1,t>=0&&e._show(t)},t.prototype.play=function(){this._play()},t.prototype._play=function(e){var t=this,n=t.options;if(t.isPlaying||n.disabled)return;if(n.interval===0)return t.pause();if(e&&n.mode!=="swf"){t.isPlaying=!0;return}if(n.showTimer&&t.progressBar)t.progressBar.css({width:"0%"}),t.playPauseBtn.children("span:eq(0)").removeClass(n.wijCSS.iconPlay).addClass(n.wijCSS.iconPause),t.progressBar.animate({width:"100%"},n.interval,null,function(){t._show(t.currentIdx+1)});else{if(t.timeout)return;t.timeout=window.setTimeout(function(){t.timerCount<=1&&t.next(),t.timerCount--},n.interval),t.timerCount++}t.isPlaying=!0},t.prototype.pause=function(){var e=this,t=e.options;if(t.showTimer&&e.progressBar)e.progressBar.stop(),e.progressBar.css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPause).addClass(t.wijCSS.iconPlay);else{if(e.timeout===null)return;window.clearTimeout(e.timeout),e.timeout=null}e.isPlaying=!1},t.prototype.add=function(e,t){var r=this,i,s,o;if(typeof e=="string")i=n(e),o=r._initLi(i);else if(e.jquery)i=e,o=r._initLi(i);else{if(!n.isPlainObject(e))return;o=e}!t||t>r._count?s=r._count:t<0?s=0:s=t,r.images.splice(s,0,o),r._count++,r.thumbs&&r.thumbs[r.thumbWidgetName]&&(r.pointer&&r.pointer.is(":hidden")&&r.pointer.show(),r.thumbs[r.thumbWidgetName]("add",i,s)),r._count===1&&r.show(0),r._refreshStateWithItemsChanged(s)},t.prototype.remove=function(e){var t=this,n;isNaN(e)||e>=t._count?n=t._count-1:e<0?n=0:n=e;if(n>=0){t.images.splice(n,1),t._count--,t.thumbs&&t.thumbs[t.thumbWidgetName]&&t.thumbs[t.thumbWidgetName]("remove",n);if(t.currentIdx==n)t.current.children("img").remove(),t.last.children("img").remove(),t.picture=null,t.currentIdx=-1,t._count>0&&(n===t._count?t.show(n-1):t.show(n));else if(t.currentIdx>n){var r=t.currentIdx;t.currentIdx=-1,t.show(r)}t._refreshStateWithItemsChanged(n)}},t.prototype._refreshStateWithItemsChanged=function(e){var t=this,n=t.options;t._count===0?(t.nextBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled),t.previousBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled),t.playPauseBtn&&t.playPauseBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled),t.pointer&&t.pointer.hide()):t.currentIdx<=0?t.previousBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled):t.currentIdx>=t._count-1?(t.nextBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled),t.playPauseBtn&&t.playPauseBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled)):(t.nextBtn.removeClass(n.wijCSS.stateDisabled),t.previousBtn.removeClass(n.wijCSS.stateDisabled),t.playPauseBtn&&t.playPauseBtn.removeClass(n.wijCSS.stateDisabled),t.pointer&&t.pointer.is(":hidden")&&t.pointer.show()),t._refreshCounter()},t.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},t.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var t=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=this._getExt(e);if(u){if(n.inArray(u,t)>=0)return"img";if(n.inArray(u,r)>=0)return"swf";if(n.inArray(u,i)>=0)return"flv";if(n.inArray(u,o)>=0)return"wmp";if(n.inArray(u,s)>=0)return"qt"}return"unknown"},t.prototype._wrapFlash=function(e,t,r){var i=this,s=i.options,o=r,u,a="100%",f="100%",c=s.flashInstall,h=s.flashVersion,p=s.flashVars,d=s.flashParams,v=i._newId();t==="flv"&&(o=s.flvPlayer,p=n.extend({file:r,width:a,height:f,autostart:s.autoPlayMovies?"true":"false",controlbar:s.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},s.flashVars),d=n.extend({autostart:s.autoPlayMovies?"true":"false",allowscriptaccess:"always"},s.flashParams)),u=n("<div/>").addClass(l).appendTo(e),n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",v).appendTo(u),S.flash.embedSWF(o,v,a,f,h,c,p,d)},t.prototype._newId=function(){var e="a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z",t=[],n="",r;t=e.split("|");for(r=0;r<16;r++)n+=t[Math.round(Math.random()*25)];return n},t}(e.wijmoWidget);t.wijgallery=g,g.prototype.thumbWidgetName="wijcarousel";var y=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-b",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijgallery')",this.autoPlay=!1,this.scrollWithSelection=!1,this.showTimer=!0,this.interval=5e3,this.showCaption=!0,this.showThumbnailCaptions=!1,this.data=[],this.showControls=!1,this.control="",this.controlPosition={},this.showCounter=!0,this.counter="[i] of [n]",this.showPager=!1,this.pagingPosition={},this.thumbnailOrientation="horizontal",this.thumbnailDirection="after",this.transitions={animated:"slide",duration:1e3,easing:null},this.showControlsOnHover=!0,this.thumbsDisplay=5,this.thumbsLength=100,this.beforeTransition=null,this.afterTransition=null,this.loadCallback=null,this.showMovieControls=!1,this.autoPlayMovies=!0,this.flashParams={bgcolor:"#000000",allowfullscreen:!0,wmode:"transparent"},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.mode="img"}return e}();g.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new y),n.wijmo.registerWidget("wijgallery",g.prototype)})(e.gallery||(e.gallery={}));var t=e.gallery})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=jQuery;(function(e){e[e.east=0]="east",e[e.west=1]="west",e[e.south=2]="south",e[e.north=3]="north"})(t.Compass||(t.Compass={}));var r=t.Compass,i=function(){function e(){}return e.mod360=function(e){var t=e%360;return e<0&&(t+=360),t},e.getAngle=function(e,t,n){var r=this,i=r.distance(t,n),s=r.distance(t,e),o=r.distance(n,e),u=i*i,a=s*s,f=o*o,l=Math.acos((f-a-u)/(-2*s*i));return Math.round(180/Math.PI*l)},e.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.log=function(e,t){return e<=0?NaN:t===1||t<0?NaN:Math.log(e)/Math.log(t)},e.generateValues=function(e,t,n){var r=[],i,s;if(t>e&&n>0){i=parseInt(((t-e)/n+1).toString(),10);for(s=0;s<i;s++)r.push(e+s*n)}else n===0&&r.push(e);return r},e.isInRange=function(e,t,n){return e>=t&&e<=n||e<=t&&e>=n},e.paintMarker=function(e,t,n,r,i,s,o){var u;return t==="rect"?e.rect(n-i/2,r-s/2,i,s):(o?u=e.paintMarker(t,n,r,s):u=e.paintMarker(t,n,r,i),u)},e.formatString=function(e,t){if(n.isFunction(t))return t.call(this,e);if(t!==""){var r=/\{0(?::((?:n|d|p|c)\d?))?\}/gi,i,s;if(r.test(t))return i=t.match(r),s="$1",t.replace(/\{0(?::(?:(?:n|d|p|c)\d?))?\}/gi,Globalize.format(e,s))}return e},e.getPositionByAngle=function(e,t,n,r){var i={x:0,y:0},s=Raphael.rad(r);return i.x=e-n*Math.cos(s),i.y=t-n*Math.sin(s),i},e.donut=function(e,t,n,r,i,s,o){var u=this.getPositionByAngle,a=u(t,n,r,s),f=u(t,n,r,o),l=u(t,n,i,s),c=u(t,n,i,o),h=o-s>180,p;(o-s)%360!==0?(p=["M",a.x,a.y,"A",r,r,0,+h,1,f.x,f.y,"L",c.x,c.y,"A",i,i,0,+h,1,l.x,l.y,"L",a.x,a.y,"z"],e.path(p)):e.circle(t,n,r)},e}();t.GaugeUtil=i,Raphael.fn.isoTri=function(e,t,n,r,i){var s=e,o=t+r/2,u=e+n,a=t,f=e+n,l=t+r,c;return i==3?(s=e,o=t,u=e-n/2,a=t+r,f=e+n/2,l=t+r):i===0?(s=e-n/2,o=t-r/2,u=e-n/2,a=t+r/2,f=e+n/2,l=t):i===1&&(s=e-n/2,o=t,u=e+n/2,a=t-r/2,f=e+n/2,l=t+r/2),c=["M",s,o,"L",u,a,"L",f,l,"z"],this.path(c.join(" "))};var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var e=this,t=e.options,r;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.redraw(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijgauge"),isNaN(t.width)&&e._setDefaultWidth(),isNaN(t.height)&&e._setDefaultHeight(),e._setDefaultWidthHeight(),t.disabled&&e.disable(),t.face&&t.face.template&&typeof t.face.template=="string"&&window[t.face.template]&&(t.face.template=window[t.face.template]),t.pointer&&t.pointer.template&&typeof t.pointer.template=="string"&&window[t.pointer.template]&&(t.pointer.template=window[t.pointer.template]),t.cap&&t.cap.template&&typeof t.cap.template=="string"&&window[t.cap.template]&&(t.cap.template=window[t.cap.template]),e.element.addClass(t.wijCSS.widget).toggleClass(t.wijCSS.stateDisabled,t.disabled);try{e.canvas=Raphael(e.element[0],t.width,t.height)}catch(i){var s=e.element.css("display");r=n("<div></div>").insertBefore(e.element).append(e.element),e.element.addClass("ui-helper-hidden-accessible").appendTo(n("body")),s==="none"&&e.element.css("display","block"),e.canvas=Raphael(e.element[0],t.width,t.height),e.element.appendTo(r).unwrap().removeClass("ui-helper-hidden-accessible"),s==="none"&&e.element.css("display","none")}e._autoCalculate(),e._draw(),e._bindResizeEvent()},t.prototype._setDefaultWidth=function(){},t.prototype._setDefaultHeight=function(){},t.prototype._setDefaultWidthHeight=function(){var e=this,t=e.element,n=e.options,r=t.get(0).style,i=r.width,s=r.height;i!==""&&(n.width=t.width()),s!==""&&(n.height=t.height())},t.prototype._autoCalculate=function(){},t.prototype._setOption=function(t,r){var i=this,s=i.options,o=s[t];if(t==="disabled")i._handleDisabledOption(r,i.element),e.prototype._setOption.call(this,t,r);else if(t==="value")i._trigger("beforeValueChanged",null,{newValue:r,oldValue:o})&&(e.prototype._setOption.call(this,t,r),i._set_value(r,o)),i._trigger("valueChanged",null,{newValue:r,oldValue:o});else{e.prototype._setOption.call(this,t,r),n.isPlainObject(r)&&(s[t]=n.extend({},o,r));if(s.radius==="auto"){i._autoCalculate(),i.redraw();return}i["_set_"+t]&&i["_set_"+t](r,o)}},t.prototype._set_value=function(e,t){this._setPointer()},t.prototype._set_autoResize=function(){this._unbindResizeEvent(),this._bindResizeEvent()},t.prototype._set_max=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},t.prototype._set_min=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},t.prototype._set_width=function(){this.redraw()},t.prototype._set_height=function(){this.redraw()},t.prototype._set_isInverted=function(){this.redraw()},t.prototype._set_tickMajor=function(){this._redrawMarksAndLabels()},t.prototype._set_tickMinor=function(){this._redrawMarksAndLabels()},t.prototype._set_pointer=function(){var e=this;e.pointer&&(e.pointer.wijRemove(),e.pointer=null),e._paintPointer(),e._setPointer()},t.prototype._set_islogarithmic=function(){var e=this;e._redrawMarksAndLabels(),e._setPointer()},t.prototype._set_logarithmicBase=function(){var e=this;e._redrawMarksAndLabels(),e._setPointer()},t.prototype._set_labels=function(){this._redrawMarksAndLabels()},t.prototype._set_margin=function(e,t){e!==t&&this.redraw()},t.prototype._set_marginTop=function(e,t){this._set_margin(e,t)},t.prototype._set_marginBottom=function(e,t){this._set_margin(e,t)},t.prototype._set_marginLeft=function(e,t){this._set_margin(e,t)},t.prototype._set_marginRight=function(e,t){this._set_margin(e,t)},t.prototype._set_ranges=function(){var e=this;e._removeRanges(),e._paintRanges(),e._resetElementPosition()},t.prototype._set_face=function(){var e=this;e.face&&(e.face.wijRemove(),e.face=null,e._paintFace(),e._resetElementPosition(!0))},t.prototype._clearState=function(){var e=this;e.labels=[],e.majorMarks=[],e.minorMarks=[],e.face=null,e.pointer=null},t.prototype._resetElementPosition=function(e){var t=this;e&&t.ranges&&n.each(t.ranges,function(e,t){t.toFront()}),t.majorMarks&&n.each(t.majorMarks,function(e,t){t.toFront()}),t.minorMarks&&n.each(t.minorMarks,function(e,t){t.toFront()}),t.labels&&n.each(t.labels,function(e,t){t.toFront()}),t.pointer&&t.pointer.toFront(),t.cap&&t.cap.toFront()},t.prototype._redrawMarksAndLabels=function(){var e=this;e._removeMarksAndLabels(),e._drawMarksAndLabels()},t.prototype._removeMarksAndLabels=function(){var e=this;n.each(e.labels,function(t,n){n.wijRemove(),e.labels[t]=null}),n.each(e.majorMarks,function(t,n){n.wijRemove(),e.majorMarks[t]=null}),n.each(e.minorMarks,function(t,n){n.wijRemove(),e.minorMarks[t]=null})},t.prototype._drawMarksAndLabels=function(){var e=this;e.labels=[],e.majorMarks=[],e.minorMarks=[],e._paintMarks()},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=t.options,i=e||t.element,s=i.offset(),o=r.width||i.outerWidth(),u=r.height||i.outerHeight(),a;return a=n("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),Raphael.vml&&a.addClass(r.stateDisabled).css("background-color","#fff"),a},t.prototype._triggerPainted=function(){return this._trigger("painted")},t.prototype._draw=function(){var e=this,t=e.options;e.pointer=null,e._innerBbox={width:t.width-t.marginLeft-t.marginRight,height:t.height-t.marginTop-t.marginBottom,left:t.marginLeft,top:t.marginTop},e.face=e._paintFace(),e.ranges&&e._removeRanges(),e._paintRanges(),e._drawMarksAndLabels(),e._paintPointer(),e.pointer&&(e._setOffPointerValue(),e._setPointer()),n.wijraphael.clearRaphaelCache(),e._triggerPainted()},t.prototype.redraw=function(){var e=this,t=e.options;e.element.empty(),this._clearState(),e.canvas=Raphael(e.element[0],t.width,t.height),e._draw()},t.prototype.destroy=function(){var t=this;t._unbindEvents(t.majorMarks),t._unbindEvents(t.minorMarks),t._unbindEvents(t.labels),t._unbindResizeEvent(),t.element.removeClass("ui-widget").empty(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},t.prototype.getCanvas=function(){return this.canvas},t.prototype._percentage=function(){var e=this,t=e.options,n=t.max,r=t.min,i=t.value;return isNaN(i)?0:n===r?1:(i-r)/(n-r)},t.prototype._valueToLogical=function(e){var t=this,n=t.options,r=n.min,s=n.max,o=n.logarithmicBase,u,a;return e<r?0:s<e?1:(u=(e-r)/(s-r),n.islogarithmic?a=i.log(1+(o-1)*u,n.logarithmicBase):a=u,a)},t.prototype._logicalToValue=function(e){var t=this,n=t.options,r=n.max,i=n.min,s;if(e<0)return i;if(1<=e)return r;if(!n.islogarithmic)s=e;else{if(n.logarithmicBase<=1)return n.min;s=(Math.pow(n.logarithmicBase,e)-1)/(n.logarithmicBase-1)}return i+(r-i)*s},t.prototype._bindResizeEvent=function(){var e=this;this.resizeIntent=250,this.options.autoResize&&this.element.on("resize."+this.widgetName,function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.redraw()},e.resizeIntent)})},t.prototype._unbindResizeEvent=function(){this.element.off("resize."+this.widgetName)},t.prototype._bindClickEvents=function(e){var t=this;n.each(e,function(e,r){n(r.node).bind("click."+t.widgetName,function(e){t._trigger("click",e,{ele:r})})})},t.prototype._unbindEvents=function(e){var t=this;n.each(e,function(e,r){n(r.node).unbind("."+t.widgetName)})},t.prototype._setOffPointerValue=function(){},t.prototype._setPointer=function(){},t.prototype._paintPointer=function(){},t.prototype._paintFace=function(){},t.prototype._paintRanges=function(){var e=this,t=e.options,r=t.ranges||[];e.ranges=[],n.each(r,function(t,n){e._paintRange(n)})},t.prototype._paintRange=function(e){},t.prototype._removeRanges=function(){var e=this;n.each(e.ranges,function(t,n){n.wijRemove(),e.ranges[t]=null})},t.prototype._paintMarks=function(){var e=this,t=e.options,r=i.generateValues,s=r(t.min,t.max,t.tickMajor.interval),o=r(t.min,t.max,t.tickMinor.interval),u=t.labels,a=u.visible;t.tickMajor.visible&&n.each(s,function(n,r){e.majorMarks.push(e._paintMark(r,t.tickMajor,!0)),a&&e.labels.push(e._paintLabel(r,u))}),t.tickMinor.visible&&n.each(o,function(r,i){var o=!1;n.each(s,function(e,t){if(i===t)return o=!0,!1}),o||e.minorMarks.push(e._paintMark(i,t.tickMinor,!1))}),e._bindClickEvents(e.majorMarks),e._bindClickEvents(e.minorMarks),e._bindClickEvents(e.labels)},t.prototype._paintMark=function(e,t,n){},t.prototype._paintLabel=function(e,t){},t}(e.wijmoWidget);t.wijgauge=s;var o=function(){function e(){this.value=0,this.max=100,this.min=0,this.width=600,this.height=400,this.autoResize=!0,this.tickMajor={position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:2,visible:!0,marker:"rect",offset:0,interval:10},this.tickMinor={position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:1,visible:!1,marker:"rect",offset:0,interval:5},this.pointer={length:1,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:0,shape:"tri",visible:!0,template:null},this.islogarithmic=!1,this.logarithmicBase=10,this.labels={format:"",style:{fill:"#1E395B","font-size":12,"font-weight":"800"},visible:!0,offset:0},this.animation={enabled:!0,duration:2e3,easing:">"},this.face={style:{fill:"270-#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":4},template:null},this.marginTop=0,this.marginRight=0,this.marginBottom=0,this.marginLeft=0,this.ranges=[],this.isInverted=!1,this.beforeValueChanged=null,this.valueChanged=null,this.painted=null}return e}();s.prototype.options=n.extend({},e.wijmoWidget.prototype.options,new o)})(e.gauge||(e.gauge={}));var t=e.gauge})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){var t=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype._setDefaultWidth=function(){var e=this.options;e.width=e.orientation==="horizontal"?310:70},n.prototype._setDefaultHeight=function(){var e=this.options;e.height=e.orientation==="horizontal"?70:310},n.prototype._set_orientation=function(){var e=this;e._setDefaultWidth(),e._setDefaultHeight(),e.markBbox=null,e.redraw()},n.prototype._set_xAxisLocation=function(){this.redraw()},n.prototype._set_xAxisLength=function(){this.redraw()},n.prototype._set_yAxisLocation=function(){this.redraw()},n.prototype._clearState=function(){t.prototype._clearState.call(this),this.markBbox&&(this.markBbox=null)},n.prototype._create=function(){t.prototype._create.call(this),this.element.addClass(this.options.wijCSS.linearGauge)},n.prototype._paintLabel=function(t,n){var r=this,i=r.options,s=n.format,o=n.style,u=n.offset,a=t,f=r.options.tickMajor,l=f.position||"inside",c,h,p,d;return s!==""&&(a=e.GaugeUtil.formatString(t,s)),p=r._getMarkerBbox(),d=r._getLabelBBox(a),c=r._valueToPoint(t,0),i.orientation==="horizontal"?(l==="inside"?c.y=p.y-d.height:c.y=p.y+p.height+d.height/2,c.y+=u):(l==="inside"?c.x=p.x-d.width/2:c.x=p.x+p.width+d.width/2,c.x+=u),h=r.canvas.text(c.x,c.y,a),h.attr(o),$.wijraphael.addClass($(h.node),i.wijCSS.linearGaugeLabel),h},n.prototype._getLabelBBox=function(e){var t=this,n=t.options,r,i;return r=t.canvas.text(0,0,e),r.attr(n.gaugeLableStyle),i=r.wijGetBBox(),r.remove(),i},n.prototype._getMarkerBbox=function(){var e=this,t=e.options,n=t.tickMajor,r;return e.markBbox||(r=e._paintMark(0,n),e.markBbox=r.wijGetBBox(),r.remove()),e.markBbox},n.prototype._paintMark=function(t,n,r){var i=this,s=i.options,o=n.marker||"rect",u=o==="rect"?5:2,a=i._valueToPoint(t,0),f=n.position||"inside",l=n.offset||0,c=r?2:1,h,p,d=$.extend({},n.style);return h=u*n.factor,$.isFunction(o)?o.call(i,i.canvas,a,s):(o==="cross"&&(d.stroke=d.fill),s.orientation==="horizontal"?p=e.GaugeUtil.paintMarker(i.canvas,o,a.x,a.y,c,h,!0):p=e.GaugeUtil.paintMarker(i.canvas,o,a.x,a.y,h,c),p.attr(d),$.wijraphael.addClass($(p.node),s.wijCSS.linearGaugeMarker),i._applyPosition(p,f,l,t),p)},n.prototype._applyPosition=function(e,t,n,r){var i=0,s=0,o=this,u=o.options.orientation==="horizontal",a=e.wijGetBBox();switch(t){case"inside":u?s-=a.width/2+n:i-=a.width/2+n;break;case"outside":u?s+=a.width/2+n:i+=a.width/2+n;break;case"center":u?s-=n:i-=n;break;default:}e.attr("transform","t"+i+","+s)},n.prototype._paintFace=function(){var e=this,t,n=e.options,r=e._innerBbox.width,i=e._innerBbox.height,s=e._innerBbox.left,o=e._innerBbox.top,u={width:r,height:i,x:s,y:o,canvas:e.canvas};return n.face&&n.face.template&&$.isFunction(n.face.template)?n.face.template.call(e,u):(t=e.canvas.rect(s,o,r,i,5),n.face&&n.face.style&&t.attr(n.face.style),$.wijraphael.addClass($(t.node),n.wijCSS.linearGaugeFace),t)},n.prototype._paintPointer=function(){var e=this,t=e.options,n=e._valueToPoint(t.min,0),r=e._innerBbox.width,i=e._innerBbox.height,s=e._innerBbox.left,o=e._innerBbox.top,u=t.pointer,a,f,l,c;if(!u.visible)return;c=t.orientation==="horizontal"?i:r,l=c*u.offset,f=c*u.length,u.template&&$.isFunction(u.template)?a=u.template.call(e.canvas,n,$.extend({},t.pointer,{offset:l,length:f,gaugeBBox:e._innerBbox})):(t.orientation==="horizontal"?u.shape==="rect"?a=e.canvas.rect(n.x-u.width/2,i-f-l+o,u.width,f):a=e.canvas.isoTri(n.x,i-f-l+o,u.width,f,3):u.shape==="rect"?a=e.canvas.rect(r-f-l+s,n.y-u.width/2,f,u.width):a=e.canvas.isoTri(r-f-l+s,n.y-u.width/2,f,u.width),a.attr(u.style)),$.wijraphael.addClass($(a.node),t.wijCSS.linearGaugePointer),e.pointer=a},n.prototype._setPointer=function(){var e=this,n=e.options;if(!e.pointer)return;t.prototype._setPointer.call(this),e._setLinearPointer(n.value)},n.prototype._setLinearPointer=function(e){var t=this,n=t.options,r=t._valueToPoint(n.min,0),i=t._valueToPoint(e,0),s=n.animation,o={x:0,y:0};n.orientation==="horizontal"?o.x=i.x-r.x:o.y=i.y-r.y,s.enabled?t.pointer.stop().wijAnimate({transform:"t"+o.x+","+o.y},s.duration,s.easing):t.pointer.attr("transform","t"+o.x+","+o.y)},n.prototype._minScreenPoint=function(e){var t=this,n=t.options,r=t._innerBbox.width,i=t._innerBbox.height,s=t._innerBbox.left,o=t._innerBbox.top,u=n.yAxisLocation+e;return n.orientation==="horizontal"?{x:r*n.xAxisLocation+s,y:i*u+o}:{x:r*u+s,y:i*(1-n.xAxisLocation)+o}},n.prototype._maxScreenPoint=function(e){var t=this,n=t.options,r=t._innerBbox.width,i=t._innerBbox.height,s=t._innerBbox.left,o=t._innerBbox.top,u=n.yAxisLocation+e,a=n.xAxisLocation+n.xAxisLength;return n.orientation==="horizontal"?{x:r*a+s,y:i*u+o}:{x:r*u+s,y:i*(1-a)+o}},n.prototype._paintRange=function(e){var t=this,n=t.options,r=isNaN(e.startValue)?0:e.startValue,i=isNaN(e.endValue)?0:e.endValue,s=isNaN(e.startWidth)?isNaN(e.width)?0:e.width:e.startWidth,o=isNaN(e.endWidth)?isNaN(e.width)?0:e.width:e.endWidth,u=e.startDistance||0,a=e.endDistance||0,f,l;r!==i&&(i>r?(f=Math.max(r,n.min),l=Math.min(n.max,i)):(f=Math.max(n.min,i),l=Math.min(n.max,r)),t._drawRange(f,l,u,a,s,o,e))},n.prototype._drawRange=function(e,t,n,r,i,s,o){var u=this,a=u.options,f=a.orientation,l=u._innerBbox.width,c=u._innerBbox.height,h=u._innerBbox.left,p=u._innerBbox.top,d=u._valueToPoint(e,0),v=u._valueToPoint(t,0),m,g,y,b,w,E;f==="horizontal"?(w=i*c,E=s*c,n!==0&&(d.y=n*c+p),r!==0&&(v.y=r*c+p),m={x:d.x,y:d.y-w},g={x:v.x,y:v.y-E}):(w=i*l,E=s*l,n!==0&&(d.x=n*l+h),r!==0&&(v.x=r*l+h),m={x:d.x-w,y:d.y},g={x:v.x-E,y:v.y}),y=["M",d.x,d.y,"L",v.x,v.y,"L",g.x,g.y,"L",m.x,m.y,"Z"],b=u.canvas.path(y.concat(" ")),b.attr(o.style),$.wijraphael.addClass($(b.node),a.wijCSS.linearGaugeRange),u.ranges.push(b)},n.prototype._valueToPoint=function(e,t){var n=this,r=n.options,i=r.isInverted,s,o,u;return r.max===r.min?{x:0,y:0}:(s=n._valueToLogical(e),o=n._minScreenPoint(t),u=n._maxScreenPoint(t),i?{x:o.x*s+u.x*(1-s),y:o.y*s+u.y*(1-s)}:{x:o.x*(1-s)+u.x*s,y:o.y*(1-s)+u.y*s})},n}(e.wijgauge);e.wijlineargauge=t,t.prototype.widgetEventPrefix="wijlineargauge";var n=function(){function e(){this.initSelector=":jqmData(role='wijlineargauge')",this.wijCSS={linearGauge:"wijmo-wijlineargauge",linearGaugeLabel:"wijmo-wijlineargauge-label",linearGaugeMarker:"wijmo-wijlineargauge-mark",linearGaugeFace:"wijmo-wijlineargauge-face",linearGaugePointer:"wijmo-wijlineargauge-pointer",linearGaugeRange:"wijmo-wijlineargauge-range"},this.orientation="horizontal",this.xAxisLocation=.1,this.xAxisLength=.8,this.yAxisLocation=.5,this.width="auto",this.height="auto",this.pointer={length:.5,width:4,offset:0,visible:!0,template:null,shape:"tri",style:{fill:"#1E395B",stroke:"#1E395B"}},this.marginLeft=5,this.marginTop=5,this.marginRight=5,this.marginBottom=5}return e}();t.prototype.options=$.extend(!0,{},e.wijgauge.prototype.options,new n),$.wijmo.registerWidget("wijlineargauge",t.prototype)})(e.gauge||(e.gauge={}));var t=e.gauge})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(e){var t=180,n=9,r=5,i=function(i){function s(){i.apply(this,arguments)}return __extends(s,i),s.prototype._create=function(){var e=this;i.prototype._create.call(this),e.element.addClass(this.options.wijCSS.radialGauge)},s.prototype._set_radius=function(){var e=this;e._autoCalculate(),e.redraw()},s.prototype._set_startAngle=function(){var e=this;e._redrawMarksAndLabels(),e._setPointer()},s.prototype._set_sweepAngle=function(e){var t=this;e>360&&(t.options.endAngle=360),t._redrawMarksAndLabels(),t._setPointer()},s.prototype._set_width=function(){var e=this;e._autoCalculate(),i.prototype._set_width.call(this)},s.prototype._set_height=function(){var e=this;e._autoCalculate(),i.prototype._set_height.call(this)},s.prototype._set_origin=function(){var e=this;e._autoCalculate()},s.prototype._set_cap=function(){var e=this;e.cap&&(e.cap.wijRemove(),e.cap=null),e._paintCap(),e._positionCapWithBehindPointer()},s.prototype._set_pointer=function(){var e=this;e.pointer&&(e.pointer.wijRemove(),e.pointer=null),e._paintPointerExcludeCap(),e._setPointer(),e._positionCapWithBehindPointer()},s.prototype._clearState=function(){i.prototype._clearState.call(this),this.markBbox=null},s.prototype._valueToAngleIncludeOffset=function(n){return e.GaugeUtil.mod360(this._valueToAngle(n)+t)},s.prototype._valueToAngle=function(e){var t=this,n=t._valueToLogical(e);return t._logicalToAngle(n)},s.prototype._angleToValue=function(e){var t=this,n=t._angleToLogical(e);return t._logicalToValue(n)},s.prototype._logicalToAngle=function(e){var t=this,n=t.options,r=n.startAngle,i=n.sweepAngle,s=n.isInverted;return s?r*e+(r+i)*(1-e):r*(1-e)+(r+i)*e},s.prototype._angleToLogical=function(t){var n=this,r=n.options,i=r.startAngle,s=r.isInverted,o=e.GaugeUtil.mod360(t-i),u=r.sweepAngle,a,f;return u===0||o===0?s?1:0:(u<0&&(o=360-o,u=-u),a=o-u,a>0?(f=360-o,a<f?1:0):s?1-o/u:o/u)},s.prototype._generatePoints=function(e,t,i,s){var o=this,u=o.options.isInverted,a=parseInt((n+n*(Math.abs(parseInt((t-e).toString(),10))/(n*r))).toString(),10),f=[],l,c,h,p,d;for(d=0;d<a;d++)l=d/(a-1),c=i+(s-i)*l,p=e+(t-e)*l,h=o._angleToValue(p),f.push(o._valueToPoint(h,c));return f},s.prototype._valueToPoint=function(e,t){var n=this,r=n._valueToAngleIncludeOffset(e)*Math.PI/180,i=t;return{x:i*Math.cos(r),y:i*Math.sin(r)}},s.prototype._pointToValue=function(t){var n=e.GaugeUtil.mod360(Math.atan2(t.x,-t.y)*180/Math.PI);return this._angleToValue(n)},s.prototype._radiusScreen=function(e){var t=this,n=t.options;return Math.max(n.radius*e,0)},s.prototype._autoCalculate=function(){var t=this,n=t.options,r=n.width,i=n.height,s,o,u,a=e.GaugeUtil.formatString(n.max,n.labels.format),f=0,l,c=i-n.marginTop-n.marginBottom,h=r-n.marginLeft-n.marginRight;t.centerPoint={x:n.marginLeft+h*n.origin.x,y:n.marginTop+c*n.origin.y},t.radius=n.radius,n.radius==="auto"&&(t.faceRadius=Math.min(h,c)/2,l=t._getFaceBorder(),t.faceRadius-=l,s=t._getMarkerbbox(n.tickMajor).width,o=t._getMarkerbbox(n.tickMinor).width,u=t._getLabelBBox(a).width,n.tickMajor.position==="center"?(f-=s/2,f-=u):n.tickMajor.position==="outside"&&(f-=s,f-=u),n.tickMinor.position==="center"?f=Math.min(f,-o/2):n.tickMinor.position==="outside"&&(f=Math.min(f,-o)),t.radius=t.faceRadius+f,n.tickMajor.position!=="inside"&&(t.faceRadius+=f))},s.prototype._getFaceBorder=function(){var e=this,t=e._paintFace(),n=t.attr("stroke-width")||1;return t.type==="set"&&(n=t[0].attr("stroke-width")||1),t.wijRemove(),n},s.prototype._getMaxRangeWidth=function(){var e=this,t=e.options,n=0;return $.each(t.ranges,function(e,t){n=Math.max(n,t.width||0),n=Math.max(n,t.startWidth||0),n=Math.max(n,t.endWidth||0)}),n},s.prototype._getMarkerbbox=function(e){var t=this,n=t._paintMarkEle(e),r=n.wijGetBBox();return n.wijRemove(),{width:r.width,height:r.height}},s.prototype._paintMark=function(e,t,n){var r=this,i,s=t.position||"inside",o=t.offset||0;return i=r._paintMarkEle(t),i.attr(t.style),$.wijraphael.addClass($(i.node),r.options.wijCSS.radialGaugeMarker),$(i.node).data("value",e),r._applyAlignment(i,s,o),r._setMarkValue(e,i),i},s.prototype._applyAlignment=function(e,t,n){if(!e)return;var r=e.wijGetBBox(),i=r.width/2,s=0;switch(t){case"outside":s-=i+n;break;case"inside":s+=i+n}e.transform("t"+s+","+0)},s.prototype._paintMarkEle=function(t){var n=this,r=n.options,i={x:n.centerPoint.x-n.radius,y:n.centerPoint.y},s=t.marker||"circle",o=s==="rect"?5:2,u=2,a,f=t.style["stroke-width"]||0;if(s==="tri"||s==="invertedTri")o=5,u=3;return s==="cross"&&(t.style.fill=t.style.stroke||t.style.fill),isNaN(i.x)&&(i.x=0),a=o*t.factor,u+=f*2,a+=f*2,$.isFunction(s)?s.call(n,n.canvas,i,r):s==="tri"?n.canvas.isoTri(i.x,i.y,a,u,1):s==="invertedTri"?n.canvas.isoTri(i.x,i.y,a,u,0):e.GaugeUtil.paintMarker(n.canvas,s,i.x,i.y,a,u,!0)},s.prototype._setMarkValue=function(e,t){var n=this,r=n._valueToAngle(e);t.transform(Raphael.format("r{0},{1},{2}...",r,n.centerPoint.x,n.centerPoint.y))},s.prototype._paintLabel=function(t,n){var r=this,i=r._valueToAngle(t),s=n.format,o=n.style,u=n.offset,a=t.toString(),f=r.options.tickMajor,l=f.position||"inside",c,h,p,d,v;s!==""&&(a=e.GaugeUtil.formatString(t,s)),p=r._getMarkerBbox(),v=r._getLabelBBox(a);switch(l){case"inside":d=p.x+p.width+v.width/2;break;case"outside":d=p.x-v.width/2;break;default:d=p.x-v.width/2}return d=r.centerPoint.x-d+u,c=e.GaugeUtil.getPositionByAngle(r.centerPoint.x,r.centerPoint.y,d,i),h=r.canvas.text(c.x,c.y,a),h.attr(o),$.wijraphael.addClass($(h.node),r.options.wijCSS.radialGaugeLabel),h},s.prototype._getLabelBBox=function(e){var t=this,n=t.options,r,i;return r=t.canvas.text(0,0,e),r.attr(n.gaugeLableStyle),i=r.wijGetBBox(),r.wijRemove(),i},s.prototype._getMarkerBbox=function(){var e=this,t=e.options,n=t.tickMajor,r;return e.markBbox||(r=e._paintMarkEle(n),e._applyAlignment(r,n.position,n.offset||0),e.markBbox=r.wijGetBBox(),r.wijRemove()),e.markBbox},s.prototype._paintFace=function(){var e=this,t=e.options,n=Math.min(t.width,t.height)/2,r,i;return e.faceRadius&&(n=e.faceRadius),t.face&&t.face.template&&$.isFunction(t.face.template)?(i={canvas:e.canvas,r:n,origin:{x:e.centerPoint.x,y:e.centerPoint.y}},t.face.template.call(e,i)):(r=e.canvas.circle(e.centerPoint.x,e.centerPoint.y,n),t.face&&t.face.style&&r.attr(t.face.style),$.wijraphael.addClass($(r.node),t.wijCSS.radialGaugeFace),r)},s.prototype._paintPointer=function(){var e=this,t=e.options;e._paintPointerExcludeCap(),t.cap&&t.cap.visible&&(e._paintCap(),e._positionCapWithBehindPointer())},s.prototype._paintPointerExcludeCap=function(){var e=this,t=e.options,n=t.pointer,r=e.radius*n.length,i={x:e.centerPoint.x-r+n.offset*e.radius,y:e.centerPoint.y-n.width/2},s;if(!n.visible)return;n.template&&$.isFunction(n.template)?s=n.template.call(e.canvas,i,$.extend({},n,{length:r})):(n.shape==="rect"?s=e.canvas.rect(i.x-n.width/2,i.y,r,n.width):s=e.canvas.isoTri(i.x-n.width/2,i.y,r,n.width),s.attr(n.style)),e.pointer=s,$.wijraphael.addClass($(s.node),t.wijCSS.radialGaugePointer)},s.prototype._paintCap=function(){var e=this,t=e.options,n=t.cap,r;return n&&n.template&&$.isFunction(n.template)?(r={canvas:e.canvas,origin:{x:e.centerPoint.x,y:e.centerPoint.y}},e.cap=n.template.call(e,r),e.cap):(e.cap=e.canvas.circle(e.centerPoint.x,e.centerPoint.y,n.radius),n&&n.style&&e.cap.attr(n.style),$.wijraphael.addClass($(e.cap.node),t.wijCSS.radialGaugeCap),e.cap)},s.prototype._positionCapWithBehindPointer=function(){var e=this,t=e.options;t.cap&&t.cap.visible&&(t.cap.behindPointer?e.pointer&&e.pointer.toFront():e.cap&&e.cap.toFront())},s.prototype._paintRange=function(e){var t=this,n=t.options,r=isNaN(e.startValue)?0:e.startValue,i=isNaN(e.endValue)?0:e.endValue,s=isNaN(e.startWidth)?isNaN(e.width)?0:e.width:e.startWidth,o=isNaN(e.endWidth)?isNaN(e.width)?0:e.width:e.endWidth,u=e.startDistance||1,a=e.endDistance||1,f,l;r!==i&&(i>r?(f=Math.max(r,n.min),l=Math.min(n.max,i)):(f=Math.max(n.min,i),l=Math.min(n.max,r)),u*=t.radius,a*=t.radius,t._drawRange(f,l,u,a,s,o,e))},s.prototype._drawRange=function(e,t,n,r,i,s,o){var u=this,a=u._valueToAngle(e),f=u._valueToAngle(t),l=u._generatePoints(a,f,i+n,s+r),c=u._generatePoints(a,f,n,r),h,p,d="";$.each(l,function(e,t){e===0?d+="M"+$.round(t.x+u.centerPoint.x)+" "+$.round(t.y+u.centerPoint.y):d+="L"+$.round(t.x+u.centerPoint.x)+" "+$.round(t.y+u.centerPoint.y)});for(h=c.length-1;h>=0;h--)d+="L"+$.round(c[h].x+u.centerPoint.x)+" "+$.round(c[h].y+u.centerPoint.y);d+="Z",p=u.canvas.path(d),p.attr(o.style),u.ranges.push(p),$.wijraphael.addClass($(p.node),u.options.wijCSS.radialGaugeRange)},s.prototype._setOffPointerValue=function(){var e=this,t=e._valueToAngle(0);e.pointer.transform(Raphael.format("r{0},{1},{2}",t,e.centerPoint.x,e.centerPoint.y))},s.prototype._setPointer=function(){var e=this,t=e.options,n=e._valueToAngle(t.value),r=t.animation;if(!e.pointer)return;i.prototype._setPointer.call(this),r.enabled?e.pointer.stop().wijAnimate({transform:"r"+n+","+e.centerPoint.x+","+e.centerPoint.y},r.duration,r.easing):e.pointer.transform(Raphael.format("r{0},{1},{2}",n,e.centerPoint.x,e.centerPoint.y))},s}(e.wijgauge);e.wijradialgauge=i,i.prototype.widgetEventPrefix="wijradialgauge";var s=function(){function e(){this.initSelector=":jqmData(role='wijradialgauge')",this.wijCSS={radialGauge:"wijmo-wijradialgauge",radialGaugeLabel:"wijmo-wijradialgauge-label",radialGaugeMarker:"wijmo-wijradialgauge-mark",radialGaugeFace:"wijmo-wijradialgauge-face",radialGaugePointer:"wijmo-wijradialgauge-pointer",radialGaugeCap:"wijmo-wijradialgauge-cap",radialGaugeRange:"wijmo-wijradialgauge-range"},this.radius="auto",this.startAngle=0,this.sweepAngle=180,this.pointer={length:.8,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:.15,shape:"tri",visible:!0,template:null},this.origin={x:.5,y:.5},this.labels={format:"",style:{fill:"#1E395B","font-size":12,"font-weight":"800"},offset:30,visible:!0},this.tickMinor={position:"inside",offset:30,style:{fill:"#1E395B"},visible:!0,factor:1,marker:"rect",interval:5},this.tickMajor={position:"inside",offset:27,style:{fill:"#1E395B",stroke:"#1E395B","stroke-width":1},visible:!0,interval:10,factor:2,marker:"rect"},this.cap={radius:15,style:{fill:"#1E395B",stroke:"#1E395B"},behindPointer:!1,visible:!0,template:null},this.face={style:{fill:"r(0.9, 0.60)#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":4},template:null}}return e}();i.prototype.options=$.extend(!0,{},e.wijgauge.prototype.options,new s),$.wijmo.registerWidget("wijradialgauge",i.prototype)})(e.gauge||(e.gauge={}));var t=e.gauge})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijlightbox";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._keyDownHandler=function(t){var n=this.options,r=this,i=e.getKeyCodeEnum();if(t.keyCode&&t.keyCode===i.ESCAPE){r._isFullSize()?r._toggleFullSize():n.closeOnEscape&&r._close(),t.preventDefault();return}if(n.keyNav&&t.keyCode)switch(t.keyCode){case i.LEFT:case i.DOWN:r.back(),t.preventDefault();break;case i.RIGHT:case i.UP:r.next(),t.preventDefault();break;case i.HOME:n.groupItems.length>0&&r.show(0),t.preventDefault();break;case i.END:n.groupItems.length>0&&r.show(n.groupItems.length-1),t.preventDefault()}},r.prototype._create=function(){var e=this.options,t=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.groupItems||(e.groupItems=[]),this._defaults={transAnimation:{animated:"fade",duration:400,easing:"linear"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"}},this._parse(),this.container=n("<div/>").addClass("wijmo-wijlightbox "+e.wijCSS.widget+" wijmo-wijlightbox-controls-"+e.controlsPosition).css("z-index",e.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",n.proxy(t,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=n("<div></div>").addClass(["wijmo-wijlightbox-frame",e.wijCSS.content,e.wijCSS.cornerAll,e.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=n("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),e.activeIndex===undefined?(typeof e.activeIndex!="number"&&e.cookie&&(e.activeIndex=parseInt(t._cookie(),10)),e.activeIndex=e.activeIndex||(e.groupItems.length?0:-1)):e.activeIndex===null&&(e.activeIndex=-1),e.activeIndex=e.activeIndex>=0&&e.groupItems[e.activeIndex]||e.activeIndex<0?e.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){t._addState("hover",n(this))},mouseout:function(){t._removeState("hover",n(this))},mousedown:function(){t._addState("active",n(this))},mouseup:function(){t._removeState("active",n(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},r.prototype.destroy=function(){var e=this.options,t=this;return this._hideWaiting(),this._hideOverlay(),e.cookie&&this._cookie(null,e.cookie),this.container.remove(),n.Widget.prototype.destroy.apply(t,arguments),t},r.prototype._setOption=function(e,t){var r=this.options[e];n.Widget.prototype._setOption.apply(this,arguments);switch(e){case"groupItems":this.options.activeIndex>=t.length?this.show(t.length-1):this.options.activeIndex<0&&t.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(t);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior();break;case"controlsPosition":this._set_controlsPosition(r,t)}},r.prototype._set_controlsPosition=function(e,t){e!==t&&(this._removeCounter(),this._removeNavButtons(),this.container.removeClass("wijmo-wijlightbox-controls-outside wijmo-wijlightbox-controls-inside").addClass("wijmo-wijlightbox-controls-"+t),this._createCounter(),this._createNavButtons())},r.prototype._initClickBehavior=function(){var e=this.options,t=this;this.content.unbind("click"),e.clickPause?this._groupMode()&&this.content.click(function(){t[t.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(r){if(t.isPlaying())return!1;var i=n.extend({},n(this).offset(),{width:n(this).outerWidth(!0),height:n(this).outerHeight(!0)});r.pageX>=i.left&&r.pageX<i.left+i.width/2?t.backBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.back():t.nextBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.next()})},r.prototype._initHoverBehavior=function(){var e=this.options,t=this;this.frame.unbind(".wijlightbox"),e.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._showAccessories(!0)},"mouseleave.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._hideAccessories(!0)},"mousemove.wijlightbox":function(){t.container.data("moving.wijlightbox")===!1&&t.container.data("accessvisible.wijlightbox")===!1&&t.frame.trigger("mouseenter")}})},r.prototype._getPlugins=function(){var e=this.container.data("plugins.wijlightbox"),t,r,i;return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(t=[],n.each(window.navigator.plugins,function(e,n){t.push(n.name)}),t=t.join(","),i=t.indexOf("Flip4Mac")>-1,e={fla:t.indexOf("Shockwave Flash")>-1,qt:t.indexOf("QuickTime")>-1,wmp:!i&&t.indexOf("Windows Media")>-1,f4m:i}):(r=function(e){var t;try{t=new ActiveXObject(e)}catch(n){}return!!t},e={fla:r("ShockwaveFlash.ShockwaveFlash"),qt:r("QuickTime.QuickTime"),wmp:r("wmplayer.ocx"),f4m:!1}),this.container.data("plugins.wijlightbox",e)),e},r.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},r.prototype._getFragmentId=function(e){var t=/^#.+/,r=n(e).attr("href")||"",i=r.split("#")[0],s=n("base")[0];return i&&(i===window.location.toString().split("#")[0]||s&&i===s.attributes.href)&&(r=e.hash,e.href=r),t.test(r)?this._sanitizeSelector(r):""},r.prototype._parseLink=function(e){var t=this,r=this.options,i=n(e),s={href:undefined,player:undefined,img:undefined,gallery:undefined},o,u,a,f,l=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&i[0].tagName.toLowerCase()==="a"){o=i.attr("rel"),n.each(l,function(e,t){s[t]=i.attr(t)||""});if(!s.href)return;s.player||(s.player=r.player||t._getPlayerName(s.href)),u=i.find("img"),u&&u.length===0&&(u=i),u&&u.length>=1&&(n.each(["title","alt"],function(e,t){s[t]=u.attr(t)||s[t]}),s.img=u),o&&(a=o.match(/\[(.*?)\]/),a&&(s.gallery=a[1]||s.gallery),n.each(o.split(";"),function(e,t){var n=t.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);n&&(s[n[1]]=n[2])})),s.player==="inline"&&(s.href=t._getFragmentId(e)),s.gallery?(f=r.groupItems.length,r.groupItems[f]=s,i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,f),!1}})):i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,s),!1}})}},r.prototype._parse=function(){var e=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(t,n){e._parseLink(n)})},r.prototype._showAccessories=function(e){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(e),this._showToolboxButtons(e),this._showCounter(e)},r.prototype._hideAccessories=function(e){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(e),this._hideToolboxButtons(e),this._hideCounter(e)},r.prototype._groupMode=function(){var e=this.options;return e.groupItems&&e.groupItems.length>1},r.prototype._resetText=function(){this._removeText(),this._createText()},r.prototype._createText=function(e){var t=this,r=t.options,i,s,o,u,a;if(r.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;i=r.textPosition.toLowerCase(),s=n("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+i+" "+r.wijCSS.content+" "+r.wijCSS.helperClearFix),u=n("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+i+" "+r.wijCSS.helperClearFix).appendTo(s),a=n("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+i+" "+r.wijCSS.helperClearFix).appendTo(s);if(r.textPosition==="inside")s.addClass(r.wijCSS.content+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame);else if(r.textPosition==="outside")s.addClass([r.wijCSS.content,r.wijCSS.cornerAll,r.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container);else if(r.textPosition==="overlay"||r.textPosition==="titleOverlay")o=n("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+i+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),s.width(this.frame.width()).appendTo(this.frame),r.textPosition==="titleOverlay"&&s.bind({mouseenter:function(){o.stop(),s.stop();var e=u.outerHeight(!0)+a.outerHeight(!0),i=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)},mouseleave:function(){o.stop(),s.stop();var e=u.height(),i=n.extend({},t._defaults.textHideOption,r.textHideOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)}});this._refreshText(e)},r.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},r.prototype._getActiveItem=function(){var e=this.options;return e.groupItems&&e.groupItems.length&&e.activeIndex>=0&&e.activeIndex<e.groupItems.length?e.groupItems[e.activeIndex]:null},r.prototype._refreshText=function(e){var t=this,r=this.options,i,s,o,u,a;if(r.textPosition==="none")return;i=this.container.data("item.wijlightbox")||this._getActiveItem();if(!i)return;s=this.container.find(".wijmo-wijlightbox-text"),o=this.container.find(".wijmo-wijlightbox-title"),u=this.container.find(".wijmo-wijlightbox-detail"),a=this.container.find(".wijmo-wijlightbox-mask"),a.stop(),s.stop(),o.html(i.title),u.html(i.alt),r.textPosition==="outside"&&s.width(this.frame.width());var f=o.outerHeight(!0),l=u.outerHeight(!0),c=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});if(r.textPosition==="overlay"||r.textPosition==="titleOverlay"){var h=f+(r.textPosition==="overlay"?l:0);s.height(0),a.height(0),s.animate({height:h},c),a.animate({height:h},c)}else e?s.height(f+l):(s.height(0),s.animate({height:f+l},c))},r.prototype._addState=function(e,t){t.is(":not(."+this.options.wijCSS.stateDisabled+")")&&t.addClass("ui-state-"+e)},r.prototype._removeState=function(e,t){t.removeClass("ui-state-"+e)},r.prototype._createNavButtons=function(){var e=this,t=this.options;if(!t.showNavButtons||!this._groupMode()){this._removeNavButtons();return}this.backBtn||(this.backBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerRight:t.wijCSS.cornerLeft)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.back(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}})),this.nextBtn||(this.nextBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerLeft:t.wijCSS.cornerRight)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.next(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}}))},r.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=undefined),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=undefined)},r.prototype._refreshNavButtons=function(){var e=this.options,t;this.backBtn&&(t=e.activeIndex===0?"addClass":"removeClass",this.backBtn[t](e.wijCSS.stateDisabled)),this.nextBtn&&(t=e.activeIndex>=e.groupItems.length-1?"addClass":"removeClass",this.nextBtn[t](e.wijCSS.stateDisabled))},r.prototype._showNavButtons=function(e){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideNavButtons=function(e){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createToolbox=function(){this.toolBox||(this.toolBox=n("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},r.prototype._showToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createCtrlButtons=function(){var e=this,t=this.options,r=t.wijCSS;if(!t.ctrlButtons||t.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var i=t.ctrlButtons.split("|");i.length===1&&i[0]===t.ctrlButtons&&(i=t.ctrlButtons.split(",")),n.each(i,function(i,s){s=n.trim(s),s==="play"&&!this.playBtn?e.playBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",r.stateDefault,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconPlay+"'></span>").hide().click(function(){return e.isPlaying()?e.stop():(t.activeIndex>=t.groupItems.length-1&&e.show(0),e.play()),!1}):s==="stop"&&!this.stopBtn&&(e.stopBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",r.stateDefault,r.stateDisabled,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconStop+"'></span>").hide().click(function(){return e.isPlaying()&&(e.stop(),e.show(0)),!1}))}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},r.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=undefined),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=undefined)},r.prototype._refreshCtrlButtons=function(){var e=this.options.wijCSS;if(this.playBtn){var t=this.playBtn.find("."+e.icon);t&&(t.removeClass(e.iconPause+" "+e.iconPlay),t.addClass(this.isPlaying()?e.iconPause:e.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](e.stateDisabled)},r.prototype._createDialogButtons=function(){var e=this,t=this.options,r;if(!t.dialogButtons||t.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox(),r=t.dialogButtons.split("|"),r.length===1&&r[0]===t.dialogButtons&&(r=t.dialogButtons.split(",")),n.each(r,function(r,i){i=n.trim(i),i==="close"&&!this.closeBtn?e.closeBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconClose+"'></span>").hide().click(function(){return e._close(),!1}):i==="fullSize"&&!this.fullBtn&&(e.fullBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return e._toggleFullSize(),!1}))}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),this.btnSep||(this.btnSep=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox))},r.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=undefined),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=undefined)},r.prototype._refreshDialogButtons=function(){var e=this.options.wijCSS;if(this.fullBtn){var t=this.fullBtn.find("."+e.icon);t&&(t.removeClass(e.iconArrow4Diag+" "+e.iconNewWin),t.addClass(this._isFullSize()?e.iconNewWin:e.iconArrow4Diag))}},r.prototype._createTimerBar=function(){var e=this,t=e.options;if(!t.showTimer||!e._groupMode()){e._removeTimerBar();return}e._createToolbox(),e.timerBar||(e.timerBar=n("<div></div>").addClass("wijmo-wijlightbox-timerbar "+t.wijCSS.content+" ui-priority-secondary "+t.wijCSS.cornerAll).appendTo(e.toolBox),e.timerMeter=n("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+t.wijCSS.content+" "+t.wijCSS.cornerAll).appendTo(e.toolBox))},r.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=undefined),this.timerBar&&(this.timerBar.remove(),this.timerBar=undefined)},r.prototype._createCounter=function(){var e=this,t=e.options;if(!t.showCounter||!e._groupMode()){e._removeCounter();return}e.counter||(e.counter=n("<div></div>").addClass("wijmo-wijlightbox-counter "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerTL:t.wijCSS.cornerAll)).hide().appendTo(e.frame))},r.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=undefined)},r.prototype._refreshCounter=function(e){var t=this,r=this.options,i="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(r.showCounter&&r.groupItems.length>1&&this.counter){e===undefined&&(e=r.activeIndex);var s=r.groupItems.length;if(r.counterType==="sequence"){var o=0,u=s,a=parseInt(r.counterLimit,10)||0;if(a>=2&&a<s){var f=Math.floor(a/2);o=Math.min(u-a,Math.max(o,e-f)),u=Math.min(u,o+a)}while(o!==u)n("<a></a>").addClass("wijmo-wijlightbox-counter-item "+r.wijCSS.content+" "+r.wijCSS.stateDefault+(o===e?" wijmo-wijlightbox-counter-active "+r.wijCSS.stateActive:"")).text((++o).toString()).appendTo(this.counter);this.counter.find("a").click(function(e,r){return n(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(t.show(parseInt(n(this).text(),10)-1),!1)})}else{var l=r.counterFormat||"[i] of [n]";i=l.replace("[i]",e+1),i=i.replace("[n]",s),n("<span></span>").text(i).appendTo(this.counter)}}},r.prototype._showCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(e?600:0)},r.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name);return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},r.prototype._showOverlay=function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new n.wijmo.wijlightbox.overlay(this))},r.prototype._hideOverlay=function(){var e=this.container.data("overlay.wijlightbox");if(!e)return;e.close(),this.container.removeData("overlay.wijlightbox")},r.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},r.prototype._showWaiting=function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new n.wijmo.wijlightbox.overlay(this,!0))},r.prototype._hideWaiting=function(){var e=this.container.data("waiting.wijlightbox");if(!e)return;e.close(),this.container.removeData("waiting.wijlightbox")},r.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},r.prototype._getUrl=function(e){var t=this.options,n=typeof e=="string"?e:e.href,r=t.rootUrl;return r&&r.length>0&&(r.indexOf("//")===-1&&(r=window.location.protocol+"//"+window.location.host+(r.startsWith("/")?"":"/")+r),r.substr(r.length-1,1)!=="/"&&(r+="/"),n=r+(n.substr(0,1)==="/"?n.substr(1):n)),n},r.prototype._preload=function(){var e=this.options,t;for(t=Math.max(0,e.activeIndex);t<Math.min(e.activeIndex+5,e.groupItems.length);t++)e.groupItems[t].image||(e.groupItems[t].image=new Image,e.groupItems[t].image.src=this._getUrl(e.groupItems[t]))},r.prototype._slideAnimate=function(e,t,r){var i=["position","top","bottom","left","right","width","height"],s=n.setMode(t,e.mode||"show"),o=s==="show",u=e.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};n.save(t,i),t.show(),l=e.distance||t[a==="top"?"outerHeight":"outerWidth"](!0),n.createWrapper(t).css({overflow:"hidden"}),o&&t.css(a,f?isNaN(l)?parseInt("-"+l):-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,t.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){s==="hide"&&t.hide(),n.restore(t,i),n.removeWrapper(t),r()}})},r.prototype._slideTo=function(e,t,r,i,s){var o=this.options,u=this,a=e.getElement(),f,l,c,h,p,d,v,m;a.parent().is(".wijmo-wijlightbox-aniwrapper")?f=a.parent():(f=n.createWrapper(a).css({overflow:"hidden"}),f.removeClass("ui-effects-wrapper"),f.addClass("wijmo-wijlightbox-aniwrapper")),f.parent().is(".wijmo-wijlightbox-aniwrapper")?l=f.parent():(l=n.createWrapper(f).css({overflow:"hidden"}),l.removeClass("ui-effects-wrapper"),l.addClass("wijmo-wijlightbox-aniwrapper")),c=o.slideDirection||"horizontal",h=a.outerWidth(),p=a.outerHeight(),c==="horizontal"?(a.width(h).css("float",i?"left":"right"),f.width(2*h).css({left:i?0:-1*h,position:"absolute"})):(a.height(p),f.width(h).css({top:i?0:-1*p,position:"absolute"}).height(2*p)),t.appendTo(f),d=t.getElement(),c==="horizontal"?d.width(h).css("float",i?"left":"right"):d.height(p),this.container.data("animating.wijlightbox",!0),v=function(){a=f.children(":last");while(a.parent().is(".wijmo-wijlightbox-aniwrapper"))a.parent().replaceWith(a);a.css({"float":"",width:"",height:""}),o.autoSize&&!u._isFullSize()?u._resize(s):(n.isFunction(s)&&s.apply(u),u._refreshText())},m={mode:"hide",direction:c==="horizontal"?i?"left":"right":i?"up":"down",easing:r.easing,distance:c==="horizontal"?h:p,duration:r.duration},n.effects?f.effect("slide",m,v):u._slideAnimate(m,f,v)},r.prototype._moveFrom=function(e,t,r){var i=this,s=this.options,o;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t),i._removeText();if(t.animated==="none"||t.duration<=0){i._createText(),n.isFunction(r)&&r.apply(i),this.container.data("moving.wijlightbox",!1);return}o=n.extend({width:i.frame.width(),height:i.frame.height()},i.container.offset()),i.frame.width(e.width).height(e.height),i.container.css({left:e.left,top:e.top,width:i.frame.outerWidth(),position:"absolute",opacity:""}),i._moveTo(o,t,function(){i.frame.width(o.width),i.container.width(i.frame.outerWidth()),i._createText(),i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)})},r.prototype._moveTo=function(e,t,r){var i=this,s=this.options;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t);var o=t.duration/2,u=t.animated,a=i._isOpen(),f=u==="wh"?{left:e.left,top:undefined}:{top:e.top},l=u==="wh"?{top:e.top,left:undefined}:{left:e.left},c=u==="wh"?{width:e.width,height:undefined}:{height:e.height},h=u==="wh"?{height:e.height,width:undefined}:{width:e.width};if(u==="wh"||u==="hw"){a&&i.container.animate(f,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(c,{duration:o,easing:t.easing,complete:function(){a&&i.container.animate(l,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(h,{duration:o,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})}});return}a&&i.container.animate({left:e.left,top:e.top},{duration:t.duration,easing:t.easing,queue:!0}),i.frame.animate({width:e.width,height:e.height,opacity:1},{duration:t.duration,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})},r.prototype.show=function(e){return this._show(e),this},r.prototype._resize=function(e){var t=this,r=n.extend({},t.container.offset(),{width:t.frame.width(),height:t.frame.height()});t._size(),t._isOpen()&&t._position(),t._moveFrom(r,e)},r.prototype._onAfterShow=function(){var e=this,t=this.options,n;e._refreshNavButtons(),e.container.data("animating.wijlightbox",!1),t.modal||e._hideOverlay(),n={index:t.activeIndex,item:t.groupItems[t.activeIndex]},e._trigger("show",null,n),e._startTimer()},r.prototype._show=function(e,t,r){var i=this,s=this.options,o,u;if(this.container.data("showing.wijlightbox"))return o=[function(){i._show(e,t,r)}],this.container.queue("showqueue",o),this;u=s.activeIndex;if(!n.isPlainObject(e)){u=e;if(u<0||u>=s.groupItems.length)return this;e=s.groupItems[u]}e&&this.container.data("item.wijlightbox",e),this._groupMode()&&this._preload(),n.isFunction(t)&&(r=t,t=undefined),r||(r=i._onAfterShow);var a={index:u,item:e};if(i._trigger("beforeShow",null,a)===!1)return this;this.container.data("showing.wijlightbox",!0);var f=function(){n.isFunction(r)&&r.apply(i),i.container.data("showing.wijlightbox",!1),i.container.dequeue("showqueue"),i.container.clearQueue("showqueue")};i._refreshCounter(u);var l=this.container.data("player.wijlightbox"),c,h=function(){i.container.data("playerwidth.wijlightbox",c.width),i.container.data("playerheight.wijlightbox",c.height);var e=n.extend({},i._defaults.transAnimation,s.transAnimation);if(s.activeIndex===u||e.animated==="none"||e.duration<=0||!i._isOpen()){s.activeIndex=u,l&&l.remove(),c.appendTo(i.content),i._refreshText(),f();return}s.cookie&&i._cookie(s.activeIndex,s.cookie);if(e.animated==="slide")t=t===undefined?u>s.activeIndex:t,i._slideTo(l,c,e,t,f),s.activeIndex=u;else{s.activeIndex=u;var r=function(){c&&(c.appendTo(i.content,!0),c.fadeIn(e.duration,f))};n.browser.msie&&i.frame.trigger("mouseleave");var o=function(){l&&l.remove(),s.autoSize&&!i._isFullSize()?i._resize(r):(r(),i._refreshText())};l?l.fadeOut(e.duration*.4,o):o()}};return c=this._createPlayer(e,h),this},r.prototype.next=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex+1;return e.loop&&(t%=e.groupItems.length),t<e.groupItems.length?(this._show(t,!0),!0):!1},r.prototype.back=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex-1;return e.loop&&(t=t<0?e.groupItems.length-1:t),t>=0?(this._show(t,!1),!0):!1},r.prototype.adjustPosition=function(){this._position()},r.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},r.prototype._startTimer=function(){if(!this.isPlaying()||!this._groupMode())return;var e=this.options,t=this,n;e.showTimer===!0?(this.timerMeter||this._createTimerBar(),n=this.timerBar.width(),t.timerMeter.width("0"),t.timerMeter.animate({width:n},e.delay,null,function(){t.isPlaying()&&!t.next()&&t.stop()})):window.setTimeout(function(){t.isPlaying()&&!t.next()&&t.stop()},e.delay)},r.prototype.play=function(){if(!this._groupMode())return!1;this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),this._startTimer()},r.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},r.prototype._size=function(e,t){var r=this.options,i=r.width,s=r.height,o=r.autoSize?this.container.data("playerwidth.wijlightbox")||i:i,u=r.autoSize?this.container.data("playerheight.wijlightbox")||s:s,a,f=u/o;if(typeof e=="boolean")t=e;else if(n.isPlainObject(e)&&"width"in e&&"height"in e)i=e.width,s=e.height;else{a=this.container.data("player.wijlightbox"),r.autoSize&&a&&a.name==="img"&&(o>i&&(o=i,u=Math.round(i*f)),u>s&&(u=s,o=Math.round(s/f))),i=o,s=u;if(t)return{width:i,height:s}}this.frame.width(i).height(s),this.container.width(this.frame.outerWidth(!0))},r.prototype._position=function(){var e=this.options,t=[],r=[0,0],i,s=e.position;if(s){if(typeof s=="string"||typeof s=="object"&&"0"in s)t=s.split?s.split(" "):[s[0],s[1]],t.length===1&&(t[1]=t[0]),n.each(["left","top"],function(e,n){+t[e]===t[e]&&(r[e]=t[e],t[e]=n)}),s={my:t.join(" "),at:t.join(" "),offset:r.join(" ")};s=n.extend({},e.position,s)}i=this.container.is(":visible"),i||this.container.show(),this.container.css({top:0,left:0}).position(s),i||this.container.hide()},r.prototype._getRelRect=function(e){var t;return e&&(n.isPlainObject(e)&&"left"in e&&"top"in e&&"width"in e&&"height"in e?t=n.merge({},e):e=n(e),e.jquery&&e.length&&(t=n.extend({},e.offset(),{width:e.width(),height:e.height()}))),t},r.prototype._close=function(e){var t=this.options,r=this,i,s,o;if(!this._isOpen())return;s={rel:e};if(!1===this._trigger("beforeClose",null,s))return;e=s.rel,!e&&this._groupMode()&&(e=t.groupItems[t.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),o=function(){r._removePlayer(),r.container.hide(),r._trigger("close"),r.container.unbind("keypress.wijlightbox"),r.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),n(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},i=this._getRelRect(e),i||this.container.data("rect.wijlightbox")&&(i=this.container.data("rect.wijlightbox")),this._removeText();if(i){this._moveTo(i,{animated:"sync",duration:200},o);return}return o.call(),this},r.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},r.prototype._open=function(e,t){if(this._isOpen())return;var r=this.options,i=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({top:"2px",right:"4px"}):this.toolBox.css({top:"",right:""}));var s=function(){r.modal&&i._showOverlay(),r.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var t=i._getRelRect(e);i.container.css("opacity",0),i.container.show(),i._size(),i._createText(!0),i._refreshText(!0),i._position(),i.container.data("open.wijlightbox",!0);if(e&&t)i.container.data("rect.wijlightbox",t),i._moveFrom(t,{animated:"sync"});else{var s=n.extend({},i._defaults.transAnimation,r.transAnimation);s.animated==="fade"?(i.container.hide(),i.container.fadeIn(s.duration,function(){i._createText()})):i._createText(),this.container.data("moving.wijlightbox",!1)}n(document).bind("keydown.wijlightbox",n.proxy(i,"_keyDownHandler")).bind("click.wijlightbox",function(e){var t=e.target||e.srcElement;i._isOpen()&&!!r.closeOnOuterClick&&t!==i.container.get(0)&&n(t).parents().index(i.container)<0&&i._close()}),r.autoPlay&&this.play(),i._refreshNavButtons(),i._refreshDialogButtons();var u={index:r.activeIndex,item:r.groupItems[r.activeIndex]};i._trigger("show",null,u),i._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(t,!0,s),this},r.prototype._getWinRect=function(){var e=n(window);return n.extend({width:e.width(),height:e.height()},e.offset()||{left:2,top:2})},r.prototype._resizeHandler=function(){var e=this;e._removeText(),e._size(e._getWinRect()),e._createText()},r.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},r.prototype._toggleFullSize=function(){var e=this,t=n(window);if(!e._isOpen())return;if(this._isFullSize())e.toolBox&&e.toolBox.css({top:"",right:""}),this.container.data("fullsize.wijlightbox",!1),t.unbind("resize.wijlightbox",n.proxy(this,"_resizeHandler")),e._resize(function(){e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),t.bind("resize.wijlightbox",n.proxy(this,"_resizeHandler"));var r=e._getWinRect(),i=this.frame.borderSize();r.width-=i.width,r.height-=i.height,e._removeText(),e._moveTo(r,{animated:"sync"},function(){e.toolBox&&e.toolBox.css({top:"2px",right:"4px"}),e.frame.width(r.width),e.container.width(e.frame.outerWidth()),e._createText(),e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())})}this._refreshDialogButtons()},r.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},r.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var t=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=["mp4","mpg","mpeg","ogg","ogv"],a=this._getExt(e);if(a){if(n.inArray(a,t)>=0)return"img";if(n.inArray(a,r)>=0)return"swf";if(n.inArray(a,i)>=0)return"flv";if(n.inArray(a,o)>=0)return"wmp";if(n.inArray(a,s)>=0)return"qt";if(n.inArray(a,u)>=0)return"wijvideo"}return"iframe"},r.prototype._adjustPlayerSize=function(e,t){var n=this.container.data("player.wijlightbox");n&&n.adjustSize&&n.adjustSize(e,t)},r.prototype._removePlayer=function(){var e=this.container.data("player.wijlightbox");e&&(e.remove(),this.container.data("player.wijlightbox",null))},r.prototype._createPlayer=function(e,t,r){var i=e.player;if(!n.isFunction(n.wijmo.wijlightbox[i]))throw"unknown player "+i;var s=this,o=!1,u,a=function(){o=!0,this._hideWaiting(),n.isFunction(t)&&window.setTimeout(function(){t.apply(s)},1)},f=function(){this._hideWaiting(),n.isFunction(r)&&r.apply(s)};return u=new n.wijmo.wijlightbox[i](this,e,a,f),this.container.data("player.wijlightbox",u),window.setTimeout(function(){o===!1&&s._showWaiting()},200),u},r}(e.wijmoWidget);t.wijlightbox=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn ui-btn-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijlightbox')",this.textPosition="overlay",this.width=600,this.height=400,this.autoSize=!0,this.player="",this.groupItems=null,this.rootUrl="",this.ctrlButtons="",this.dialogButtons="close",this.counterType="default",this.counterFormat="[i] of [n]",this.counterLimit=10,this.showCounter=!0,this.showNavButtons=!0,this.showTimer=!1,this.controlsPosition="inside",this.showControlsOnHover=!0,this.clickPause=!1,this.keyNav=!1,this.modal=!1,this.position={my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=n(this);t.css(e);var r=t.offset().top;r<0&&t.css("top",e.top-r)}},this.zIndex=1e3,this.closeOnEscape=!0,this.closeOnOuterClick=!0,this.autoPlay=!1,this.delay=2e3,this.loop=!0,this.cookie=null,this.transAnimation={animated:"fade",duration:400,easing:"linear"},this.slideDirection="horizontal",this.resizeAnimation={animated:"sync",duration:400},this.textShowOption={duration:300,easing:"linear"},this.textHideOption={duration:300,easing:"linear"},this.showMovieControls=!0,this.autoPlayMovies=!0,this.flashParams={bgcolor:"#000000",allowfullscreen:!0},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.beforeShow=null,this.show=null,this.open=null,this.beforeClose=null,this.close=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijlightbox",i.prototype),n.extend(n.wijmo.wijlightbox,{img:function(e,t,r,i){this.name="img",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var s=this;n("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var i=n(this);s.width=t.width?parseInt(t.width,10):i.width(),s.height=t.height?parseInt(t.height,10):i.height(),i.remove(),r&&n.isFunction(r)&&r.apply(e)},error:function(){n(this).remove(),i&&n.isFunction(i)&&i.apply(e)}}).attr("src",this.url)},swf:function(e,t,r,i){this.name="swf";var s=e.options;this.id="flashhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)},iframe:function(e,t,r,i){this.name="swf",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),t.width&&(this.width=parseInt(t.width,10)),t.height&&(this.height=parseInt(t.height,10)),this.$iframe=n("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(e.content).bind("load",function(){r&&n.isFunction(r)&&r.apply(e)}).attr("src",this.url)},inline:function(e,t,r,i){this.name="inline";var s=e.options,o=s.wijCSS,u="wijmo-wijlightbox-frame "+o.content;" "+o.cornerAll+" "+o.helperClearFix,this.lightbox=e,this.item=t,this.width=t.width?parseInt(t.width,10):s.width;if(t.height)this.height=parseInt(t.height,10);else{var a=n(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+o.widget+'">'+'<div class="'+u+'">'+'<div class="'+u+'">'+'<div class="wijmo-wijlightbox-content"> '+"</div></div></div></div>").appendTo(document.body).width(this.width);this.height=a.outerHeight(!0)+10,a.unwrap(),a.remove()}r&&n.isFunction(r)&&r.apply(e)},flv:function(e,t,r,i){this.name="flv";var s=e.options;this.id="flvhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var o=20;this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wmp:function(e,t,r,i){var s=e.options,o;this.name="wmp",this.id="wmphost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),o=n.browser.msie?70:45,this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},qt:function(e,t,r,i){var s=e.options,o=16;this.name="qt",this.id="qthost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wijvideo:function(e,t,r,i){var s=e.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.wijvideosrc=!t.wijvideosrc||t.wijvideosrc===""?null:this.lightbox._getUrl(t.wijvideosrc),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)}}),n.extend(n.wijmo.wijlightbox.img.prototype,{appendTo:function(e,t){this.$element=n("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),t&&this.$element.hide(),this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"?(e.children().length&&e.empty(),this.$element.prependTo(e)):this.$element.appendTo(e)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.swf.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r=t.flashInstall,i=t.flashVersion,s=t.flashVars,o=t.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",i,r,s,o)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.iframe.prototype,{appendTo:function(e,t){t||this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(e,t){this.$iframe&&this.$iframe.fadeOut(e,t)},fadeIn:function(e,t){this.$iframe&&this.$iframe.fadeIn(e,t)},getElement:function(){return this.$iframe}}),n.extend(n.wijmo.wijlightbox.inline.prototype,{appendTo:function(e,t){this.$element=n(this.item.href).clone().appendTo(e),t||this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.flv.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r="100%",i="100%",s=t.flvPlayer,o=t.flashInstall,u=t.flashVersion,a=n.extend({file:this.url,width:r,height:i,autostart:t.autoPlayMovies?"true":"false",controlbar:t.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},t.flashVars),f=n.extend({autostart:t.autoPlayMovies?"true":"false",allowscriptaccess:"always"},t.flashParams);S.flash.embedSWF(s,this.id,r,i,u,o,a,f)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wmp.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var t=this.lightbox.options,r='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',i={autostart:t.autoPlayMovies?1:0,url:undefined,uimode:undefined,showcontrols:undefined},s;n.browser.msie?(r+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',i.url=this.url,i.uimode=t.showMovieControls?"full":"none"):(r+=' type="video/x-ms-wmv"',r+=' data="'+this.url+'"',i.showcontrols=t.showMovieControls?1:0),r+=">";for(s in i)r+='<param name="'+s+'" value="'+i[s]+'">';r+="</object>",this.$container.html(r)},remove:function(){if(n.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(e){}this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.qt.prototype,{appendTo:function(e,t){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var r=this.lightbox.options,i=r.autoPlayMovies?"true":"false",s=r.showMovieControls?"true":"false",o=n.browser.msie?"<object":"<embed",u={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true",classid:undefined,codebase:undefined,type:undefined,src:undefined,autoplay:undefined,controller:undefined},a,f;n.browser.msie?(u.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",u.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(u.type="video/quicktime",u.src=this.url,u.autoplay=i,u.controller=s);for(a in u)u[a]&&(o+=" "+a+'="'+u[a]+'"');o+=">";if(n.browser.msie){var l={src:this.url,scale:"aspect",controller:s,autoplay:i};for(f in l)o+='<param name="'+f+'" value="'+l[f]+'">'}o+=n.browser.msie?"</object>":"</embed>",t&&e.hide(),this.$container.html(o),t&&e.show()},remove:function(){try{document[this.id].Stop(),document[this.id]=null}catch(e){}this.$container.remove()},fadeOut:function(e,t){t.call();return},fadeIn:function(e,t){t.call();return},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(e){var t=this.lightbox.options;this.$container=n("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:t.autoPlayMovies?"true":"false",controls:t.showMovieControls?"controls":""}).appendTo(e),!this.url||n("<source/>").attr({src:this.url}).appendTo(this.$container),!this.wijvideosrc||n("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({fullScreenButtonVisible:!1})},remove:function(){this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container},adjustSize:function(e,t){this.$container.wijvideo("setWidth",e),this.$container.wijvideo("setHeight",t)}}),n.extend(n.wijmo.wijlightbox,{overlay:function(e,t){this.mask=n("<div></div>").addClass(e.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(t?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){return e.options.closeOnOuterClick&&e._close(),!1}),n.fn.bgiframe&&this.mask.bgiframe();if(t){this.mask.css("z-index",this.zIndex);var r=n("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);r.css({left:(this.mask.width()-r.width())/2,top:(this.mask.height()-r.height())/2})}n(window).bind("resize.wijlightbox-overlay",n.proxy(this,"resize")),window.setTimeout(function(){var e;this.mask&&(e=n.wijmo.wijlightbox.overlay,n(document).bind(e.events,function(t){if(n(t.target).zIndex()<e.zIndex)return!1}))},1)}}),n.extend(n.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".wijlightbox-overlay"}).join(" "),close:function(){n(document).unbind(".wijlightbox-overlay"),n(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=undefined},height:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height():e):n(document).height()},width:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width():e):n(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(e.lightbox||(e.lightbox={}));var t=e.lightbox})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){var n=$.wijmo.wijcandlestickchart,r=function(r){function i(){r.apply(this,arguments)}return __extends(i,r),i.prototype._create=function(){var e=this,n=e.options,i=e._getDefFill(),s,o,u;$.each(n.seriesList,function(e,r){if(r.type==="bar")return $.extend(!0,n.axis,{x:{compass:"west"},y:{compass:"south"}}),!0;r.type==="pie"&&r.pieSeriesList?r.data=r.pieSeriesList:r.type==="sharedPie"&&r.sharedPieChartSeries&&r.sharedPieChartSeries.length>0?($.each(r.sharedPieChartSeries,function(e,t){t.pieSeriesList&&(t.data=t.pieSeriesList)}),r.data=r.sharedPieChartSeries):r.candlestickSeries&&r.candlestickSeries.data&&$.inArray(r.type,["hl","ohlc","candlestick"])!=-1?r.data=r.candlestickSeries.data:r.type===t.ChartConsts.strTrendline&&r.trendlineSeries&&(r.trendlineSeries.data&&(r.data=r.trendlineSeries.data),r.fitType=r.trendlineSeries.fitType,r.order=r.trendlineSeries.order,r.sampleCount=r.trendlineSeries.sampleCount)}),$.extend(!0,{compass:"east"},n.hint),n.is100Percent&&(n.is100Percent=!1),u=n,u.yAxes&&$.isArray(u.yAxes)&&u.yAxes.length>0&&(o=[],$.each(u.yAxes,function(e,t){o.push($.extend({},u.axis.y,t))}),n.axis.y=o),e._handleChartStyles(),e._checkChartType(),e.isContainsCandlestick&&(e.bindXData=!1,e._handleXDataForCandlestick()),r.prototype._create.call(this),e.chartElement.addClass(n.wijCSS.compositechart)},i.prototype._setOption=function(e,t){e!=="is100Percent"&&(e==="axis"&&this.isContainsCandlestick&&n&&n.prototype._handleMaxMinInAxis.apply(this,[t]),r.prototype._setOption.call(this,e,t))},i.prototype._seriesListSeted=function(){this._checkChartType(),this.isContainsCandlestick&&(this.timeUtil.dispose(),this.timeUtil=null,this._handleXDataForCandlestick())},i.prototype._supportStacked=function(){return!0},i.prototype.destroy=function(){var e=this,t=e.chartElement,n=t.data("fields"),i=n&&n.aniBarsAttr;t.removeClass(e.options.wijCSS.compositechart),this.timeUtil&&this.timeUtil.dispose(),r.prototype.destroy.call(this),e._destroyRaphaelArray(i),e.aniPathsAttr=null,t.data("fields",null)},i.prototype._isBarChart=function(){return!0},i.prototype._clearChartElement=function(){var e=this,t=e.options,n=e.chartElement,i=n.data("fields");i&&i.allElements&&($.each(i.allElements,function(t,n){t==="scatters"&&n.length&&$.each(n,function(e,t){t.length&&($.each(t,function(e,n){n&&n.remove&&n.remove(),t[e]=null}),n[e]=null)}),e._destroyRaphaelArray(n)}),i.allElements=null),r.prototype._clearChartElement.call(this),i&&i.ctracers&&(i.ctracers=null),e.element.removeData("plotInfos"),t.seriesTransition.enabled||i&&i.aniBarsAttr&&(i.aniBarsAttr=null)},i.prototype._bindSeriesData=function(e,t,n){var i=this,s=this,o=t.data,u=t.type,a,f,l,c=[],h;if(u==="pie")a=o.label,f=o.value,l=o.offset,a&&a.bind&&(a=this._getBindData(e,a.bind)),f&&f.bind&&(f=this._getBindData(e,f.bind)),l&&l.bind&&(l=this._getBindData(e,l.bind)),a&&$.isArray(a)&&a.length&&f&&$.isArray(f)&&f.length&&($.each(f,function(e,t){var n,r=0;e>=0&&e<a.length&&(n=a[e]),l&&$.isArray(f)&&l.length&&e>=0&&e<l.length&&(r=typeof l[e]=="undefined"?0:l[e]),c.push({data:t,label:n,offset:r,legendEntry:!0})}),t.data=c);else if(u==="sharedPie"){if($.isArray(o)){t.sharedPieChartSeries=[],$.each(o,function(e,n){var r=n.data,i=n.datasource;i&&(a=r.label,f=r.value,l=r.offset,a&&a.bind&&(a=s._getBindData(i,a.bind)),f&&f.bind&&(f=s._getBindData(i,f.bind)),l&&l.bind&&(l=s._getBindData(i,l.bind)),h={center:n.center,label:n.label,legendEntry:n.legendEntry,radius:n.radius,data:[]},f&&$.each(f,function(e,t){var n,r=0;e>=0&&e<a.length&&(n=a[e]),l&&$.isArray(f)&&l.length&&e>=0&&e<l.length&&(r=typeof l[e]=="undefined"?0:l[e]),h.data.push({data:t,label:n,offset:r,legendEntry:!0})}),t.sharedPieChartSeries.push(h))});var p=[],d;a&&$.isArray(a)&&$.each(a,function(e,n){d={},d.valueArray=[],d.label=n,d.legendEntry=t.legendEntry!==!1,p.push(d)}),t.sharedPieLegends=p}}else r.prototype._bindSeriesData.call(this,e,t,n),o.x&&$.isArray(o.x)&&(this.bindXData=!0),$.each(["high","low","open","close","y1"],function(t,n){var r=o[n];r&&r.bind&&(o[n]=i._getBindData(e,r.bind))})},i.prototype._preHandleSeriesData=function(){r.prototype._preHandleSeriesData.call(this);var e=this,t=e.options,n=t.seriesList,i,s;$.each(n,function(e,t){if(t.type==="sharedPie"){if(!t.sharedPieChartSeries||t.sharedPieChartSeries.length===0)for(var n=0;n<t.data.length;n++)t.data[n]&&t.sharedPieChartSeries.push(t.data[n]);if(!t.sharedPieLegends||t.sharedPieLegends.length===0){if(t.sharedPieChartSeries.length===0)return;i=t.sharedPieChartSeries[0],$.each(i.data,function(e,n){s={},s.label=n.label,s.legendEntry=n.legendEntry,t.sharedPieLegends.push(s)})}}})},i.prototype.getElement=function(e,n,r){var i=this.chartElement,s=i.data("fields"),o=s.chartElements;switch(e){case"bar":case"column":return o.bars[n];case"line":case"area":return o.paths[n];case"linemarkers":return o.markersSet[n];case"pie":case"sharedPie":return this._getPie(o,n,r);case t.ChartConsts.strTrendline:return o.trendLines[n]}return null},i.prototype._getPie=function(e,t,n){if(n!==undefined)return e["sectors"+n]?e["sectors"+n][t]:null;var r=[];return $.each(e,function(e,t){/sectors/.test(e)&&e!=="sectors"&&$.each(t,function(e,t){r.push(t)})}),r.length===0&&(r=e.sectors),r[t]},i.prototype._paintLegendIcon=function(e,n,i,s,o,u,a,f,l,c){var h=this,p=this.options,d=t.TrendlineRender.getSeriesChartType(l),v,m,g=3,y=!1,b,w;return d==="line"||d==="area"||d==="spline"||d==="bezier"?(v=h.canvas.path(Raphael.format("M{0},{1}L{2},{3}",e,n+s/2,e+i,n+s/2)),o&&(p.legend.size&&p.legend.size.height&&(g=p.legend.size.height),v.attr($.extend(!0,{},o,{"stroke-width":g}))),y=!0,l.markers&&l.markers.visible&&(b=l.markers.type,w=l.markerStyle,w=$.extend({fill:o.stroke,stroke:o.stroke,opacity:1},w),o["stroke-dasharray"]&&v.attr({"stroke-width":1,"stroke-dasharray":o["stroke-dasharray"]}),b||(b="circle"),m=this.canvas.paintMarker(b,e+i/2,n+s/2,3),$.wijraphael.addClass($(m.node),Raphael.format("{0} {1} {2}",p.wijCSS.legend,p.wijCSS.legendDot,p.wijCSS.canvasObject)),m.attr(w),$(m.node).data("index",a).data("legendIndex",u),this.legendDots[u]=m)):d===t.ChartConsts.strTrendline?(v=t.TrendlineRender.paintLegendIcon(e,n,i,s,o,h.canvas,p.legend.size,h.legendIcons,u,a,f),y=!1):d==="scatter"?(w=l.markerStyle,b=l.markerType,w=$.extend({fill:o.stroke,stroke:o.stroke,opacity:1},w),b||(b="circle"),v=h.canvas.paintMarker(b,e+i/2,n+s/2,3),v.attr(w),l.visible===!1&&($(c.node).data("dotOpacity",v.attr("opacity")||1),v.attr("opacity",.3)),y=!0):d==="bubble"?(w=l.markerStyle,w=$.extend({fill:o.stroke,stroke:o.stroke,opacity:1},w),l.markers&&(b=l.markers.type),b||(b="circle"),v=h.canvas.paintMarker(b,e+i/2,n+s/2,Math.min(i,s)/2),v.attr(w),y=!0):v=r.prototype._paintLegendIcon.call(this,e,n,i,s,o,u,a,f,l,c),y&&($.wijraphael.addClass($(v.node),f),$(v.node).data("legendIndex",u).data("index",a),h.legendIcons.push(v)),v},i.prototype._showHideCandlestickSeries=function(e,t){n&&n.prototype._showHideSeries.apply(this,arguments)},i.prototype._showSerieEles=function(e){var n=e.type,r=e.eles,i=[],s=this.options.showChartLabels,o;switch(n){case"pie":r?i=[e]:i=e.sharedSeriesEles,$.each(i,function(e,t){r=t.eles,r.sector&&(r.sector.show(),r.sector.shadow&&r.sector.shadow.show(),r.sector.tracker&&r.sector.tracker.show()),r.label&&r.label.show()});break;case"line":case"spline":case"bezier":case"area":r.markers&&$.each(r.markers,function(e,t){o=$(t.node).data("wijchartDataObj");if(o&&o.lineSeries&&o.lineSeries.markers&&!o.lineSeries.markers.visible)return!0;t.show()}),r.dcl&&$.each(r.dcl,function(e,t){s&&t.show()});if(r.path){o=$(r.path.node).data("wijchartDataObj");if(o.visible||!(!o.visible&&o.markers&&o.markers.visible))r.path.show(),r.path.shadow&&r.path.shadow.show(),r.path.area&&r.path.area.show(),r.path.tracker&&r.path.tracker.show(),$(r.path.node).data("wijchartDataObj")&&$(r.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(r.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!0})}break;case"bar":case"column":$.each(r,function(e,t){t.bar&&(t.bar.show(),t.bar.shadow&&t.bar.shadow.show(),t.bar.tracker&&t.bar.tracker.show(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.show()});break;case"scatter":$.each(r,function(e,t){t.show(),t.label&&t.label.show(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!0)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(r,"show");break;case"bubble":$.each(r,function(e,t){t.bubble&&(t.bubble.show(),t.bubble.shadow&&t.bubble.shadow.show(),t.bubble.tracker&&t.bubble.tracker.show(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show()});case t.ChartConsts.strTrendline:t.TrendlineRender.showSerieEles(r)}},i.prototype._hideSerieEles=function(e){var n=e.type,r=e.eles,i=[];switch(n){case"pie":r?i=[e]:i=e.sharedSeriesEles,$.each(i,function(e,t){r=t.eles,r.sector&&(r.sector.hide(),r.sector.shadow&&r.sector.shadow.hide(),r.sector.tracker&&r.sector.tracker.hide()),r.label&&r.label.hide()});break;case"line":case"spline":case"bezier":case"area":r.markers&&$.each(r.markers,function(e,t){t.hide()}),r.dcl&&$.each(r.dcl,function(e,t){t.hide()}),r.path&&(r.path.hide(),r.path.shadow&&r.path.shadow.hide(),r.path.area&&r.path.area.hide(),r.path.tracker&&r.path.tracker.hide(),$(r.path.node).data("wijchartDataObj")&&$(r.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(r.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!1}));break;case t.ChartConsts.strTrendline:t.TrendlineRender.hideSerieEles(r);break;case"bar":case"column":$.each(r,function(e,t){t.bar&&(t.bar.hide(),t.bar.shadow&&t.bar.shadow.hide(),t.bar.tracker&&t.bar.tracker.hide(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.hide()});break;case"scatter":$.each(r,function(e,t){t.hide(),t.label&&t.label.hide(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!1)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(r,"hide");break;case"bubble":$.each(r,function(e,t){t.bubble&&(t.bubble.hide(),t.bubble.shadow&&t.bubble.shadow.hide(),t.bubble.tracker&&t.bubble.tracker.hide(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.symbol&&t.symbol.hide()})}},i.prototype._indicatorLineShowing=function(e){var t;r.prototype._indicatorLineShowing.call(this,e),$.each(e,function(e,n){t=n.type,t==="column"||t==="bar"?n.bar.attr(n.hoverStyle):t==="marker"?n.marker.attr(n.markerHoverStyle):t==="scatter"&&(n.dot.attr(n.hoverStyle),n.dot.scale(1.5,1.5))})},i.prototype._removeIndicatorStyles=function(e){var t;$.each(e,function(e,n){t=n.type,t==="column"||t==="bar"?n.bar.attr(n.style):t==="marker"?(n.marker.attr(n.markerStyle),n.marker.transform("s1")):t==="scatter"&&(n.dot.attr(n.style),n.dot.scale(1,1))})},i.prototype._paintTooltip=function(){var e=this,t=e.chartElement,n=t.data("fields")||{},i=n.ctracers||[];r.prototype._paintTooltip.call(this),e.tooltip&&$.each(i,function(t,n){n.trackers&&n.trackers.length&&t===0&&e.tooltip.setOptions({relatedElement:n.trackers[0]})})},i.prototype._setDefaultTooltipText=function(e){return e.type==="candlestick"&&n?n.prototype._setDefaultTooltipText.apply(this,arguments):r.prototype._setDefaultTooltipText.call(this,e)},i.prototype._checkChartType=function(){var e=this;this.isContainsBubble=!1,this.isContainsCandlestick=!1,$.each(this.options.seriesList,function(t,n){var r=n.type;!!e.isContainsCandlestick||r!=="ohlc"&&r!=="hl"&&r!=="candlestick"?!e.isContainsBubble&&r==="bubble"&&(e.isContainsBubble=!0):e.isContainsCandlestick=!0})},i.prototype._handleXDataForCandlestick=function(){n&&n.prototype._handleXData.apply(this,arguments)},i.prototype._isCandlestickSeries=function(e){var t=e.type;return t==="ohlc"||t==="hl"||t==="candlestick"},i.prototype._paintChartArea=function(){var e=this,n=e.options.seriesList;if(e._isSeriesListDataEmpty())return;$.each(n,function(t,n){var r=n.data;e._isCandlestickSeries(n)&&(r.y=[].concat(r.high).concat(r.low))}),this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new t.BubbleAxisAdjust(this),r.prototype._paintChartArea.call(this),$.each(n,function(t,n){e._isCandlestickSeries(n)&&delete n.data.y})},i.prototype._checkSeriesDataEmpty=function(e){var t=e.type,n=e.data,i=!1,s=this._checkEmptyData;if(this._isCandlestickSeries(e)){if(!n||s(n.x)||s(n.high)||s(n.low))return!0;if(t==="ohlc"||t==="candlestick")if(s(n.open)||s(n.low))return!0;return!1}if(t==="pie")return!n||!$.isArray(n)?!0:!1;if(t==="sharedPie")return n=e.sharedPieChartSeries,!n||!$.isArray(n)?i=!0:$.each(e.sharedPieChartSeries,function(e,t){if(t.data&&$.isArray(t.data))return i=!1,!1}),i;if(t==="bubble")if(!n||s(n.y1))return!0;return r.prototype._checkSeriesDataEmpty.call(this,e)},i.prototype._calculateMajorMinor=function(e,t){this.isContainsCandlestick&&t.id==="x"?n.prototype._calculateMajorMinor.apply(this,arguments):r.prototype._calculateMajorMinor.call(this,e,t)},i.prototype._getXTickText=function(e){var t=this,r=t.formatString;return t.isContainsCandlestick&&n?n.prototype._getXTickText.apply(this,arguments):e},i.prototype._adjustTickValuesForCandlestickChart=function(e){return this.isContainsCandlestick&&n?n.prototype._adjustTickValuesForCandlestickChart.apply(this,arguments):r.prototype._adjustTickValuesForCandlestickChart.call(this,e)},i.prototype._getTickTextForCalculateUnit=function(e,t,i){return t.id==="x"&&this.isContainsCandlestick?n.prototype._getTickTextForCalculateUnit.apply(this,arguments):r.prototype._getTickTextForCalculateUnit.call(this,e,t,i)},i.prototype._AdjustAxisBounds=function(e,n){var r=this,i=r.options,s,o,u,a,f=e.max,l=e.min,c=f-l,h=t.ChartDataUtil.nicePrecision(c),p=h+1,d=e.bounds,v=$.extend(!0,{},i.textStyle,n.textStyle,n.labels.style);s=r._text(-1e3,-1e3,$.round(f,p).toString()).attr(v),o=r._text(-1e3,-1e3,$.round(l,p).toString()).attr(v),u=s.wijGetBBox(),a=o.wijGetBBox(),e.isStartAxis||(d.startY+=a.height),e.isLastAxis||(d.endY-=u.height)},i.prototype._initYAxisHeight=function(){var e=this,t=e.options,n=t.axis,r=n.y,i=e.canvasBounds,s=i.endX-i.startX,o=i.endY-i.startY,u=e.axisInfo,a=u.y,f=0,l=-1,c=0,h;$.isArray(r)&&($.each(r,function(e,t){t.height&&!isNaN(t.height)?f+=t.height:t.height==="auto"&&(l=e),a[e].height=t.height}),l>-1&&(a[l].height=o-f),$.each(a,function(t,n){var s=n.height;if(s===undefined||s===null)return!0;s>0&&(n.isPartAxis=!0,n.isLastAxis=parseInt(t)===r.length-1,n.isStartAxis=parseInt(t)===0),h?n.bounds={startY:h.endY,endY:h.endY+s}:n.bounds={startY:i.startY,endY:i.startY+s},n.bounds.startX=i.startX,n.bounds.endX=i.endX,e._AdjustAxisBounds(n,r[t]),n.bounds&&(h=$.extend({},n.bounds))}))},i.prototype._getDataExtreme=function(e){var t=this;return t._initYAxisHeight(),r.prototype._getDataExtreme.call(this,e)},i.prototype._getPieRendererData=function(e,t,n,r,i){var s={},o={},u={},a=e.data;return s.sIndex=i,$.each(a,function(e,a){a.pieID=t,o=$.extend({},n[i]),u=$.extend({},r[i]),s.seriesList||(s.seriesList=[]),s.seriesStyles||(s.seriesStyles=[]),s.seriesHoverStyles||(s.seriesHoverStyles=[]),s.seriesList.push(a),s.seriesStyles.push(o),s.seriesHoverStyles.push(u),i++}),s.radius=e.radius,s.center=e.center,s.label=e.label,s},i.prototype._paintPlotArea=function(){var r=this,i=r.options,s="seriesList",o="seriesStyles",u="seriesHoverStyles",a=i[o],f=i[u],l=r.canvasBounds,c={},h=0,p=-1,d=[],v=$.isArray(i.axis.y),m={canvas:r.canvas,tooltip:r.tooltip,bounds:l,widgetName:r.widgetName,seriesTransition:i.seriesTransition,showChartLabels:i.showChartLabels,textStyle:i.textStyle,chartLabelStyle:i.chartLabelStyle,chartLabelFormatString:i.chartLabelFormatString,shadow:i.shadow,hint:i.hint,animation:i.animation,disabled:i.disabled,culture:r._getCulture(),widget:this,wijCSS:i.wijCSS,mouseDown:function(e,t){r._trigger("mouseDown",e,t)},mouseUp:function(e,t){r._trigger("mouseUp",e,t)},mouseOver:function(e,t){r._trigger("mouseOver",e,t)},mouseOut:function(e,t){r._trigger("mouseOut",e,t)},mouseMove:function(e,t){r._trigger("mouseMove",e,t)},click:function(e,t){r._trigger("click",e,t)}},g=r.chartElement.data("fields"),y=-1,b,w,E,S,x,T;g&&(g.ctracers=[]),$.each(i[s],function(e,n){var l=t.TrendlineRender.getSeriesChartType(n),d={},m=l,g={},b=$.extend({},a[h]),S=$.extend({},f[h]),x=n.yAxis;if(!l||l.length===0)return!0;if(m==="spline"||m==="bezier")m="line";m==="sharedPie"&&(m="pie"),d=c[m],d||(l==="pie"||l==="sharedPie"?d=[]:d={},c[m]=d,n.hint&&(d.hint=n.hint,i.hint.content||(i.hint.content=n.hint.content),i.hint.title||(i.hint.title=n.hint.title)));if(l==="pie")return y===-1&&(y=e+1),p===-1&&(p=h),g=r._getPieRendererData(n,y,a,f,h),d.push(g),y++,h=p+(n.data.length?n.data.length:0),p=-1,!0;if(l==="sharedPie")return y===-1&&(y=e+1),w=n.sharedPieChartSeries,E={type:"sharedPies",pies:[]},p===-1&&(p=h),$.each(w,function(e,t){g={},t.radius=t.radius||n.radius,t.label=t.label||n.label,!t.center&&n.center&&(t.center={x:n.center.x,y:n.center.y}),h=p,g=r._getPieRendererData(t,y,a,f,h),E.pies.push(g),y++,h=p+(t.data.length?t.data.length:0)}),l==="sharedPie"&&d.push(E),p=-1,!0;l==="column"?d.horizontal=!1:l==="bar"?d.horizontal=!0:l==="spline"?n.fitType="spline":l==="bezier"&&(n.fitType="bezier"),v&&(d.yAxis=x||0);if(l==="line"||l==="spline"||l==="bezier"||l===t.ChartConsts.strTrendline)delete b.fill,delete S.fill;d[s]||(d[s]=[]),d[o]||(d[o]=[]),d[u]||(d[u]=[]),l==="scatter"&&(d.showChartLabels=i.showChartLabels,n.showChartLabels!==undefined&&(d.showChartLabels=n.showChartLabels)),n.sIndex=h,d[s].push(n),d[o].push(b),d[u].push(S),h++}),$.each(c,function(s,o){var u=e.chart,a=o.yAxis,f;a!==undefined&&r.axisInfo.y[a].bounds&&(m.bounds=r.axisInfo.y[a].bounds);switch(s){case"pie":var c;$.each(o,function(e,t){var n=t.type!=="sharedPies"?[t]:t.pies;$.each(n,function(e,t){var n=t.center,i=t.radius||50,o,a=l.endX-l.startX,f=l.endY-l.startY;a<2*i&&(i=a/2),f<2*i&&(i=f/2),t.radius=i,o=n?{startX:n.x-i,startY:n.y-i,endX:n.x+i,endY:n.y+i}:{startX:l.startX+a/2-i,startY:l.startY+f/2-i,endX:l.startX+2*i,endY:l.startY+2*i},S=$.extend(!0,{},m,{bounds:o,radius:i,isTouchBehaviorEnable:!1},t),T=new u.PieChartRender(r.chartElement,S),T.render(),r.chartElement.data("fields").aniSectorAttrs=null,r.chartElement.data("fields").aniLabelAttrs=null,r._savechartData(s,t.sIndex)})});break;case"bar":case"column":S=$.extend(!0,{},m,{stacked:i.stacked,axis:i.axis,clusterOverlap:i.clusterOverlap,clusterWidth:i.clusterWidth,clusterSpacing:i.clusterSpacing,is100Percent:i.is100Percent,clusterRadius:i.clusterRadius,isYTime:r.axisInfo.y[0].isTime,isXTime:r.axisInfo.x.isTime,yAxisInfo:r.axisInfo.y,yAxisIndex:a},o),T=new u.BarChartRender(r.chartElement,S),T.render(),d=[],$.each(o.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d);break;case"line":case"spline":case"bezier":case"area":x=r._getyAxisGroup(o),r.aniPathsAttr||(r.aniPathsAttr={}),$.each(x,function(e,t){r.aniPathsAttr[s]||(r.aniPathsAttr[s]=[]),S=$.extend(!0,{},m,{axis:i.axis,isXTime:r.axisInfo.x.isTime,isYTime:r.axisInfo.y[0].isTime,type:s==="area"?"area":"line",hole:i.hole},t),S.aniPathsAttr=r.aniPathsAttr[s],S.chartLabelEles=r.chartLabelEles,v&&(S.axis.y=i.axis.y[e]),S.extremeValue={txx:r.extremeValue.txx,txn:r.extremeValue.txn,tyx:r.extremeValue.y[e].tyx,tyn:r.extremeValue.y[e].tyn},T=new u.LineChartRender(r.chartElement,S),T.render(),d=[],$.each(t.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d,!0)});break;case t.ChartConsts.strTrendline:x=r._getyAxisGroup(o),r.aniPathsAttr||(r.aniPathsAttr={}),$.each(x,function(e,t){r.aniPathsAttr[s]||(r.aniPathsAttr[s]=[]),S=$.extend(!0,{},m,{axis:i.axis,hole:i.hole},t),S.aniPathsAttr=r.aniPathsAttr[s],v&&(S.axis.y=i.axis.y[e]),S.extremeValue={txx:r.extremeValue.txx,txn:r.extremeValue.txn,tyx:r.extremeValue.y[e].tyx,tyn:r.extremeValue.y[e].tyn},T=new u.TrendlineRender(r.chartElement,S),T.render(),d=[],$.each(t.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d,!0)});break;case"scatter":x=r._getyAxisGroup(o),$.each(x,function(e,t){S=$.extend(!0,{},m,{axis:i.axis,isXTime:r.axisInfo.x.isTime,isYTime:r.axisInfo.y[0].isTime,zoomOnHover:i.zoomOnHover},t),v&&(S.axis.y=i.axis.y[e]),T=new u.ScatterChartRender(r.chartElement,S),T.render(),d=[],$.each(t.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d)});break;case"ohlc":case"hl":case"candlestick":x=r._getyAxisGroup(o),$.each(x,function(e,t){S=$.extend(!0,{},m,{axis:i.axis,timeUtil:r.timeUtil,type:s},t),v&&(S.axis.y=i.axis.y[e]),S.seriesStyles=n.prototype._getStyles(s,S.seriesStyles,"seriesStyles",!0),S.seriesHoverStyles=n.prototype._getStyles(s,S.seriesHoverStyles,"seriesHoverStyles",!0),T=new u.CandlestickChartRender(r.chartElement,S),T.render(),d=[],$.each(t.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d)});break;case"bubble":x=r._getyAxisGroup(o),f||(f={visible:i.showChartLabels,style:i.chartLabelStyle}),$.each(x,function(e,t){S=$.extend(!0,{},m,{axis:i.axis,isXTime:r.axisInfo.x.isTime,isYTime:r.axisInfo.y[0].isTime,xAxisInfo:r.axisInfo.x,yAxisInfo:r.axisInfo.y,chartLabel:f,minimumSize:i.minimumSize||5,maximumSize:i.maximumSize||20,sizingMethod:i.sizingMethod||"diameter",bubbleRadius:r.bubbleAxisAdjust.bubbleRadius},t),v&&(S.axis.y=i.axis.y[e]),S.yAxisInfo=r.axisInfo.y[e]||r.axisInfo.y[0],T=new u.BubbleChartRender(r.chartElement,S),T.render(),d=[],$.each(t.seriesList,function(e,t){d.push(t.sIndex)}),r._savechartData(s,d)})}}),r.chartElement.data("fields").seriesEles=null,r._bindtooltip()},i.prototype._savechartData=function(e,t,n){var r=this,i=r.chartElement.data("fields"),s=i.seriesEles,o=i.allElements||{},u,a=t,f;$.isArray(a)&&(a=0),$.each(s,function(n,i){$.isArray(t)?(r.seriesEles[t[a]]={eles:i,type:e},a++):(e==="pie"&&r.seriesEles[a]?($.isArray(r.seriesEles[a])||(f=[r.seriesEles[a]],r.seriesEles[a]={type:"pie",sharedSeriesEles:f}),r.seriesEles[a].sharedSeriesEles.push({eles:i,type:e})):r.seriesEles[a]={eles:i,type:e},a++)}),n||(u=i.ctracers||[],u.push({trackers:i.trackers,type:e}),i.ctracers=u),i&&i.chartElements&&$.each(i.chartElements,function(e,t){r._copyElements(o,e,t)}),i.allElements=o},i.prototype._copyElements=function(e,t,n){var r;n&&$.isArray(n)?(r=e[t]||[],e[t]=r.concat(n)):n&&(r=e[t]||[],r.concat([n]))},i.prototype._getyAxisGroup=function(e){var t={};return $.each(e.seriesList,function(n,r){var i=r.yAxis||0;t[i]||(t[i]={seriesList:[],seriesStyles:[],seriesHoverStyles:[]}),t[i].seriesList.push(r),t[i].seriesStyles.push(e.seriesStyles[n]),t[i].seriesHoverStyles.push(e.seriesHoverStyles[n])}),t},i.prototype._bindtooltip=function(){var e=this,t=e.widgetName,n=e.chartElement.data("fields");n&&n.ctracers&&$.each(n.ctracers,function(e,t){var n=t.type;t.trackers&&t.trackers.toFront()}),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mouseover."+t,$.proxy(e._tooltipMouseOver,e)),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mouseout."+t,$.proxy(e._tooltipMouseOut,e)),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker, .trendlinetracker","mousemove."+t,$.proxy(e._tooltipMouseMove,e))},i.prototype._tooltipMouseOver=function(e){var n=e.target,r=this,i=r.tooltip,s=r.options.hint,o=null,u=s.title,a=s.content,f=s.style,l=$.isFunction(u),c=$.isFunction(a),h,p,d,v;d=$(r.canvas.canvas.parentNode).offset();if(r.indicatorLine)return;$(n).data("owner")&&(n=$(n).data("owner")),n=$(n),h=n.data("wijchartDataObj");if(r.tooltip){o=i.getOptions();if(l||c)l&&(o.title=$.proxy(u,h)),c&&(o.content=$.proxy(a,h));if(h.type==="line"||h.type==="marker"){h.type==="marker"&&(h=h.lineSeries);if(h.path.removed)return;if(r.hoverLine!==h||r.hoverLine===null)r.isNewLine=!0,r.hoverLine&&(r.hoverLine.path.removed||(r.hoverLine.path.wijAttr(r.hoverLine.lineStyle),r.hoverPoint&&!r.hoverPoint.isSymbol&&(r.hoverPoint.marker.wijAttr(r.hoverPoint.markerStyle),r.hoverPoint.marker.transform("s1")))),h.lineHoverStyle&&h.path.wijAttr(h.lineHoverStyle),r.hoverLine=h,r.hoverPoint=null,r.hoverVirtualPoint=null}else if(h.type==="scatter"||s.relativeTo==="element")r._clearHoverState(),h.type==="scatter"?p=h.dot.getBBox():n[0]&&n[0].raphael&&n[0].raphaelid&&(v=r.canvas.getById(n[0].raphaelid),v&&(p=v.getBBox())),o.style.stroke=f.stroke||n.attr("stroke"),p&&r.tooltip.showAt({x:p.x+p.width/2,y:p.y},e);else{r._clearHoverState();if(h.type===t.ChartConsts.strTrendline)return;o.style.stroke=f.stroke||n.attr("stroke"),r.tooltip.showAt({x:e.pageX-d.left,y:e.pageY-d.top},e)}}},i.prototype._tooltipMouseMove=function(e){var n=this,r=e.target,i,s=n.options.hint,o=$(n.canvas.canvas.parentNode).offset();$(r).data("owner")&&(r=$(r).data("owner")),r=$(r),i=r.data("wijchartDataObj"),n.tooltip&&!this.indicatorLine&&i.type!=="line"&&i.type!=="marker"&&i.type!=="scatter"&&s.relativeTo!=="element"&&i.type!==t.ChartConsts.strTrendline&&n.tooltip.showAt({x:e.pageX-o.left,y:e.pageY-o.top},e)},i.prototype._tooltipMouseOut=function(e){var t=this,n=e.target,r;$(n).data("owner")&&(n=$(n).data("owner")),n=$(n),r=n.data("wijchartDataObj"),r.type!=="line"&&r.type!=="marker"&&!t.indicatorLine&&t.tooltip&&t.tooltip.hide()},i.prototype._mouseMoveInsidePlotArea=function(e,t){var n=this,i=n.tooltip,s=n.options.hint,o,u,a=0,f,l,c,h,p=null,d=null,v=null,m=s.title,g=s.content,y=$.isFunction(m),b=$.isFunction(g),w=0,E;i&&(v=i.getOptions());if(n.hoverLine&&!n.indicatorLine){E=n.hoverLine,n.isNewLine&&(s.enable&&i&&i.hide(),n.isNewLine=!1),o=E.lineMarkers,u=E.virtualMarkers,a=-1,f={x:0,y:0};if(o&&o.length){$.each(o,function(e,n){if(n.removed)return!0;var r=n.wijGetBBox(),i=r.x+r.width/2,s=Math.abs(i-t.left);if(e===0||s<w)w=s,a=e,f={x:i,y:r.y+r.height/2}});if(n.hoverPoint&&n.hoverPoint.index===a)return;if(a>-1){if(o[a].removed)return;l=$(o[a].node).data("wijchartDataObj"),l&&(n.hoverPoint&&!n.hoverPoint.isSymbol&&(n.hoverPoint.removed||(n.hoverPoint.marker.wijAttr(n.hoverPoint.markerStyle),n.hoverPoint.marker.transform("s1"))),l.isSymbol||l.marker.removed||l.marker.wijAttr(l.markerHoverStyle)),n.hoverPoint=l,n.hoverVirtualPoint=u[a]}}else{$.each(u,function(e,n){var r=Math.abs(n.x-t.left);if(e===0||r<w)w=r,a=e,f={x:n.x,y:n.y}});if(n.hoverVirtualPoint&&n.hoverVirtualPoint.index===a)return;a>-1&&(n.hoverPoint=null,n.hoverVirtualPoint=u[a])}if(i){d=n.hoverVirtualPoint,c=d.valX,h=d.valY;if(y||b)y&&(v.title=function(){var e={pointIndex:a,lineIndex:E.index,x:c,y:h,label:E.label,data:d,fmt:m},t=$.proxy(e.fmt,e),n=t();return n}),b&&(v.content=function(){var e={pointIndex:a,lineIndex:E.index,x:c,y:h,label:E.label,data:d,fmt:g},t=$.proxy(e.fmt,e),n=t();return n});p=$.extend({stroke:E.path.attr("stroke")},s.style),v.style.stroke=p.stroke,i.showAt(f)}}r.prototype._mouseMoveInsidePlotArea.call(this,e,t)},i.prototype._mouseDownInsidePlotArea=function(e,t){r.prototype._mouseDownInsidePlotArea.call(this,e,t),this._clearHoverState(!0)},i.prototype._mouseMoveOutsidePlotArea=function(e,t){var n=this;n._clearHoverState(),r.prototype._mouseMoveOutsidePlotArea.call(this,e,t)},i.prototype._clearHoverState=function(e){var t=this,n=t.tooltip,r=t.options.hint;t.hoverLine&&(r.enable&&n&&!e&&n.hide(),t.hoverLine.path.removed||(t.hoverLine.path.wijAttr(t.hoverLine.lineStyle),t.hoverPoint&&!t.hoverPoint.isSymbol&&(t.hoverPoint.marker.wijAttr(t.hoverPoint.markerStyle),t.hoverPoint.marker.transform("s1")))),t.hoverLine=null,t.hoverPoint=null,t.hoverVirtualPoint=null},i.prototype._getTooltipText=function(e,t){return""},i.prototype._calculateParameters=function(e,t){var i=this,s=!1,o,u=0,a=0,f,l,c,h,p;r.prototype._calculateParameters.call(this,e,t),l=e.max,c=e.min,$.each(i.options.seriesList,function(e,t){if(t.type==="column"||t.type==="bar")return s=!0,!1}),e.id==="x"&&(o=t.unitMinor,s&&(h=i._getBarAdjustment(e,o),u=Math.max(u,h.maxAdj),a=Math.max(a,h.minAdj)),i.isContainsCandlestick&&n&&(p=n.prototype._getCandlestickAdjustment.apply(this,[e,o]),u=Math.max(u,p),a=Math.max(a,p))),i.isContainsBubble&&$.wijmo.wijbubblechart&&(f=this.bubbleAxisAdjust.getAdjust(e,t),u=Math.max(u,f.max-l),a=Math.max(a,c-f.min)),a&&(e.min=c-a),u&&(e.max=l+u),(u||a)&&i._calculateMajorMinor(t,e)},i.prototype._getBarAdjustment=function(e,t){var n=0,r=this.options,i=e.max,s=e.min,o=0,u;return $.each(r.seriesList,function(e,t){if(t.type==="pie")return!0;if(t.data.x===undefined||t.data.y===undefined)return!0;o=t.data.x.length,n<o&&(n=o)}),n>1?u=(i-s)/n*r.clusterWidth*.0125:n===1?(s===0&&i===1&&(s=-1),u=(i-s)*.0125):u=0,u===0?u=t:t<u&&t!==0&&(u=Math.floor(u/t)*t),{maxAdj:u,minAdj:e.min-s+u}},i}(t.wijchartcore);t.wijcompositechart=r,r.prototype.widgetEventPrefix="wijcompositechart";var i=function(e){function t(){e.apply(this,arguments),this.compositechart="wijmo-wijcompositechart",this.barLabel="wijbarchart-label",this.barElement="wijbarchart",this.barTracker="bartracker",this.bubbleElement="wijbubblechart-bubble",this.bubbleTracker="bubbletracker",this.bubbleLabel="wijbubblechart-label",this.bubbleSymbol="wijbubblechart-symbol",this.scatterElement="wijscatterchart",this.pieLabel="wijpiechart-label",this.pieElement="wijpiechart",this.pieTracker="pietracker",this.lineLabel="wijlinechart-label",this.lineElement="wijlinechart",this.areaElement="wijlinechart-area",this.lineTracker="linetracker",this.canvasMarker="wijchart-canvas-marker",this.wijCandlestickChart="wijmo-wijcandlestickchart",this.candlestickChart="wijcandlestickchart",this.candlestickChartTracker="candlesticktracker"}return __extends(t,e),t}(t.wijchartcore_css);t.wijcompositechart_css=i;var s=function(t){function n(){t.apply(this,arguments),this.initSelector=":jqmData(role='wijcompositechart')",this.wijCSS=new e.chart.wijcompositechart_css,this.stacked=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.seriesList=[],this.animation={enabled:!0,duration:400,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null,this.hole={}}return __extends(n,t),n}(t.wijchartcore_options);r.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new s),$.wijmo.registerWidget("wijcompositechart",r.prototype)})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijdatepager",i="wijmo-wijdatepager",s="wijmo-wijdatepager-increment",o="wijmo-wijdatepager-decrement",u="wijmo-wijdatepager-container",a="wijmo-wijdatepager-pages",f="wijmo-wijdatepager-pagelabel",l="wijmo-wijdatepager-pagelabel-first",c="wijmo-wijdatepager-pagelabel-last",h="wijmo-wijdatepager-pageheader",p="wijmo-wijdatepager-pagerange",d="wijmo-wijdatepager-tooltip",v="wijmo-wijdatepager-tooltip-inner",m="wijmo-wijdatepager-triangle",g="wijmo-wijdatepager-width-smallest",y="wijmo-wijdatepager-width-small",b="wijmo-wijdatepager-width-medium",w="wijmo-wijdatepager-width-normal",E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(e,t){n.wijmo.widget.prototype._setOption.apply(this,arguments);switch(e){case"culture":case"cultureCalendar":this.options[e]=t,this._innerCulture=null,this._resetCulture(),this._initBackground();break;case"selectedDate":this.options.selectedDate=t,this._initBackground();break;case"disabled":t?this._disable():this._enable();break;case"viewType":this.options.viewType=t,this._initBackground();break;case"nextTooltip":this.element.find("."+s).attr("title",t);break;case"prevTooltip":this.element.find("."+o).attr("title",t);break;case"firstDayOfWeek":this.options.firstDayOfWeek=t,this.options.viewType==="week"&&this._initBackground()}return this},t.prototype._disable=function(){this.element.addClass(this.options.wijCSS.stateDisabled),n.mobile==null?(this.element.find("."+o).button("option","disabled",!0),this.element.find("."+s).button("option","disabled",!0)):(this.element.find("."+o).addClass(this.options.wijCSS.stateDisabled),this.element.find("."+s).addClass(this.options.wijCSS.stateDisabled))},t.prototype._enable=function(){this.element.removeClass(this.options.wijCSS.stateDisabled),n.mobile==null?(this.element.find("."+o).button("option","disabled",!1),this.element.find("."+s).button("option","disabled",!1)):(this.element.find("."+o).removeClass(this.options.wijCSS.stateDisabled),this.element.find("."+s).removeClass(this.options.wijCSS.stateDisabled))},t.prototype._create=function(){var e=this.options,t,r,f;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.selectedDate||(e.selectedDate=new Date),this._dtpagernamespacekey="dtpager"+(new Date).getTime(),this.element.addClass(i).addClass(e.wijCSS.wijdatepager).addClass(e.wijCSS.widget).addClass(e.wijCSS.helperClearFix),t=n.proxy(this.invalidate,this),n(window).bind("resize."+this._dtpagernamespacekey,t),this.element.disableSelection&&this.element.disableSelection(),this.element.append(n("<a></a>").addClass(o).addClass(e.wijCSS.wijdatepagerDecButton).append(n("<span>"+e.prevTooltip+"</span>"))).append(n("<div></div>").addClass(u).addClass(e.wijCSS.wijdatepagerContainer).addClass(e.wijCSS.content).append(n("<div></div>").addClass(a).addClass(e.wijCSS.wijdatepagerPages))).append(n("<a></a>").addClass(s).addClass(e.wijCSS.wijdatepagerIncButton).append(n("<span>"+e.nextTooltip+"</span>"))),n.wijmo.widget.prototype._create.apply(this,arguments),r=this.element.find("."+o),f=this.element.find("."+s),n.mobile==null?(r.button({icons:{primary:e.wijCSS.iconArrowLeft},text:!1}),f.button({icons:{primary:e.wijCSS.iconArrowRight},text:!1})):(r.html(""),r.addClass(e.wijCSS.iconArrowLeft+" "+e.wijCSS.icon+" ui-btn"),f.html(""),f.addClass(e.wijCSS.iconArrowRight+" "+e.wijCSS.icon+" ui-btn")),r.click(n.proxy(this.goLeft,this)),f.click(n.proxy(this.goRight,this)),this._initBackground(),e.disabled&&this._disable()},t.prototype.destroy=function(){this.element.removeClass(i).removeClass(this.options.wijCSS.wijdatepager),n(window).unbind("."+this._dtpagernamespacekey)},t.prototype.refresh=function(){this.invalidate()},t.prototype.invalidate=function(){var e,t=this.options,r=t.selectedDate,i,l=this.element.find("."+u),c=this.element.find("."+o),h=this.element.find("."+s),p=this.element.innerWidth(),d=c.is(":visible")?c.outerWidth(!0):0,v=h.is(":visible")?h.outerWidth(!0):0,m,E,S,x,T;e=this.element.find("."+f+"."+this._getDateClass(r)),e.length!==1?e=n(this.element.find("."+f)[this._index]):(i=this.element.find("."+f).index(e),this._index=i),T="."+f,x=t.wijCSS.stateActive.split(" "),n.each(x,function(e){T+="."+x[e]}),this.element.find(T).removeClass(t.wijCSS.stateActive),e.addClass(this.options.wijCSS.stateActive),l.css("left",d),this.element.removeClass(g).removeClass(t.wijCSS.wijdatepagerWidthSmallest).removeClass(y).removeClass(t.wijCSS.wijdatepagerWidthSmall).removeClass(b).removeClass(t.wijCSS.wijdatepagerWidthMedium).removeClass(w).removeClass(t.wijCSS.wijdatepagerWidthNormal),p<300?this.element.addClass(g).addClass(t.wijCSS.wijdatepagerWidthSmallest):p<475?this.element.addClass(y).addClass(t.wijCSS.wijdatepagerWidthSmall):p<600?this.element.addClass(b).addClass(t.wijCSS.wijdatepagerWidthMedium):this.element.addClass(w).addClass(t.wijCSS.wijdatepagerWidthNormal),l.outerWidth(p-d-v),n.browser.msie&&parseInt(n.browser.version,10)<=7&&(m=this.element.find("."+a),E=m.find("."+f),S=Math.round(m.width()/this._datesDef.length)-(E.outerWidth(!0)-E.width()),E.width(S))},t.prototype.goLeft=function(e){var t=this.options;if(t.disabled)return;this._setSelectedIndex(this._index-1,!0);if(e)return e.preventDefault(),!1},t.prototype.goRight=function(){var e=this.options;if(e.disabled)return;this._setSelectedIndex(this._index+1)},t.prototype._getCulture=function(e){return this._innerCulture||this._resetCulture(e),this._innerCulture},t.prototype._resetCulture=function(e){var t=n.wijGetCulture(e||this.options.culture,this.options.cultureCalendar);this._innerCulture=t},t.prototype._isRTL=function(){return!!this._getCulture().isRTL},t.prototype._initBackground=function(e,t){var r=this;typeof e=="undefined"&&(e=!1),typeof t=="undefined"&&(t=!1);var i,s,o,u,d,v=this,m=v.options,g,y=n("<div></div>");if(this._isInAnimate)return;this._index=0,this._datesDef=this._getDatesDefinition(),this._min=0,this._max=this._datesDef.length-1,n.each(this._datesDef,function(e,t){var i=n("<div>"+r._datesDef[e].l+"</div>").addClass(f).addClass(m.wijCSS.wijdatepagerPageLabel).addClass(r._getDateClass(t.d));e===0&&i.addClass(l).addClass(m.wijCSS.wijdatepagerPageLabelFirst),t.range&&i.addClass(p).addClass(m.wijCSS.wijdatepagerPageRange),t.header&&i.addClass(h).addClass(m.wijCSS.wijdatepagerPageHeader).addClass(m.wijCSS.stateHighlight),e===r._max&&i.addClass(c).addClass(m.wijCSS.wijdatepagerPageLabelLast),y.append(i)}),i=y.html(),o=this.element.find("."+a),e?(this._isInAnimate=!0,s=o.clone(!0),o.html(i),u=o.find("."+f),t?(s.insertAfter(o),d=n(u[this._index]).offset().left,o.css("opacity",0).css("left",-s.outerWidth(!0)).stop().animate({left:"0px",opacity:100}),s.css("left",0).stop().animate({left:s.outerWidth(!0)+"px",opacity:0},function(){s.remove(),v._isInAnimate=!1,v.invalidate()})):(s.insertBefore(o),d=n(u[this._index]).offset().left,o.css("opacity",0).css("left",s.outerWidth(!0)).stop().animate({left:"0px",opacity:100}),s.stop().animate({left:"-"+s.outerWidth(!0)+"px",opacity:0},function(){s.remove(),v._isInAnimate=!1,v.invalidate()}))):(o.html(i),this.invalidate()),u=o.find("."+f),u.hover(n.proxy(this._pagelabelHover,this),n.proxy(this._pagelabelHout,this)),u.bind("mousedown",n.proxy(this._pagelabelMouseDown,this)),u.click(n.proxy(function(e){var t=n(e.target),r;r=this.element.find("."+f).index(t),this._setSelectedIndex(r)},this))},t.prototype._getDateClass=function(e){return"c1dt"+e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate()},t.prototype._addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.prototype._getDatesDefinition=function(){var e=this.options,t=e.viewType.toLowerCase(),n,r,i,s,o,u=[],a=e.selectedDate;switch(t){case"week":i=new Date(a.getFullYear(),a.getMonth(),-6),n=e.firstDayOfWeek-i.getDay(),Math.abs(n)>6&&(n=i.getDay()-e.firstDayOfWeek),i=this._addDays(i,n),o=new Date(a.getFullYear(),a.getMonth()+1,7),n=0;while(i<o||i.getMonth()===a.getMonth())s=this._addDays(i,7),u.push({l:this._formatString(this.localizeString("weekViewLabelFormat","{0:MMM dd}-{1:dd}"),i,this._addDays(i,6)),d:i,d2:this._addDays(i,6)}),a>=i&&a<=s&&(this._index=n),i=s,n+=1;break;case"month":r=new Date(a.getFullYear()-1,0,1),u.push({l:r.getFullYear(),d:r,range:!0}),r=new Date(a.getFullYear(),0,1),u.push({l:r.getFullYear(),d:r,header:!0});for(n=0;n<12;n+=1)r=new Date(a.getFullYear(),n,1),u.push({l:this._formatString(this.localizeString("monthViewLabelFormat","{0:MMM}"),r),d:r}),s=new Date(a.getFullYear(),n+1,1),a>=r&&a<=s&&(this._index=n+2);r=new Date(a.getFullYear()+1,0,1),u.push({l:r.getFullYear(),d:r,range:!0});break;default:r=new Date(a.getFullYear(),a.getMonth(),0),u.push({l:Globalize.format(r,"MMM",this._getCulture()),d:r,range:!0}),r=new Date(a.getFullYear(),a.getMonth(),1),u.push({l:Globalize.format(r,"MMM",this._getCulture()),d:r,header:!0}),i=r,n=2;while(i.getMonth()===a.getMonth())s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),u.push({l:this._formatString(this.localizeString("dayViewLabelFormat","{0:d }"),i),d:i}),a>=i&&a<=s&&(this._index=n),i=s,n+=1;r=new Date(a.getFullYear(),a.getMonth()+1,1),u.push({l:Globalize.format(r,"MMM",this._getCulture()),d:r,range:!0})}return u},t.prototype._setSelectedIndex=function(e,t){typeof t=="undefined"&&(t=!1);var n=this.options,r;if(n.disabled)return;if(e>=this._min&&e<=this._max){this._dragActivated&&this._showTooltip(e);if(this._index!==e){if(this._datesDef[e].header){if(!t)return;e-=1}this._index=e,r=this._datesDef[e].d,n.selectedDate=r,this._max>2&&this._index===0?this._initBackground(!0,!0):this._index===this._max?(n.viewType==="week"&&(n.selectedDate=new Date(n.selectedDate.getFullYear(),n.selectedDate.getMonth(),n.selectedDate.getDate()+7)),this._initBackground(!0,!1),n.selectedDate=r):this.invalidate(),this._trigger("selectedDateChanged",null,{selectedDate:n.selectedDate})}}},t.prototype._pagelabelHover=function(e){var t=n(e.target),r=this.options;if(t.hasClass(h))return;t.addClass(r.wijCSS.stateHover)},t.prototype._showTooltip=function(e){var t=this.options,r=this._datesDef[e],i=t.viewType,s,o=this.element.find("."+f)[e];this._tooltip||(this._tooltip=n("<div></div>").addClass(d).addClass(t.wijCSS.wijdatepagerTooltip).append(n("<div></div>").addClass(v).addClass(t.wijCSS.wijdatepagerTooltipInner)).append(n("<div></div>").addClass(m).addClass(t.wijCSS.wijdatepagerTriangle)),this.element.append(this._tooltip),this._tooltip.wijpopup()),s="";switch(i){case"week":r.d.getMonth()!==r.d2.getMonth()?s=this._formatString(this.localizeString("weekViewTooltip2MonthesFormat","{0:MMMM d} - {1:MMMM d, yyyy}"),r.d,r.d2):s=this._formatString(this.localizeString("weekViewTooltipFormat","{0:MMMM d} - {1:d, yyyy}"),r.d,r.d2);break;case"month":s=this._formatString(this.localizeString("monthViewTooltipFormat","{0:MMMM yyyy}"),r.d);break;default:s=this._formatString(this.localizeString("dayViewTooltipFormat","{0:dddd, MMMM d, yyyy}"),r.d)}n.ui&&(this._tooltip.wijpopup("show",{of:o,my:"center bottom",at:"center top",offset:"-10 -10"}),this._tooltip.find("."+v).html(s))},t.prototype._hideTooltip=function(){this._tooltip.wijpopup("hide")},t.prototype._pagelabelHout=function(e){n(e.target).removeClass(this.options.wijCSS.stateHover)},t.prototype._pagelabelMouseDown=function(e){this._dragActivated=!1;if(this.options.disabled)return;e.preventDefault();var t=n(e.target),r;if(t.hasClass(h))return;r=this.element.find("."+f).index(t),this._dragActivated=!0,this._setSelectedIndex(r),this._mouseDownTimeFix20555=(new Date).getTime(),this._startClientX=e.pageX,this._startInd=r,n(document).bind("mousemove."+this._dtpagernamespacekey,n.proxy(this._pageindicatorMouseMove,this)),n(document).bind("mouseup."+this._dtpagernamespacekey,n.proxy(this._pageindicatorMouseUp,this))},t.prototype._detectLeftButton=function(e){return e.originalEvent&&(e=e.originalEvent),"buttons"in e?e.buttons===1:"which"in e?e.which===1:e.button===1},t.prototype._pageindicatorMouseMove=function(e){if(!this._detectLeftButton(e)){this._pageindicatorMouseUp();return}e.preventDefault();if(this._isInAnimate)return;var t=this.element.find("."+f)[this._startInd],n,r;if(!t)return;n=t.offsetLeft+Math.round(t.offsetWidth/2)+(e.pageX-this._startClientX),r=this._findClosesPageIndexByPos(n);if(this._prevMoveInd===r)return;this._prevMoveInd=r;if(this._mouseDownTimeFix20555+150>(new Date).getTime())return;r!==-1&&r!==this._index&&this._setSelectedIndex(r)},t.prototype._pageindicatorMouseUp=function(){this._dragActivated=!1,n(document).unbind("."+this._dtpagernamespacekey),this._hideTooltip()},t.prototype._findClosesPageIndexByPos=function(e){var t=this.element.find("."+a).find("."+f),n;for(n=0;n<t.length;n+=1)if(t[n].offsetLeft<e&&t[n].offsetLeft+t[n].offsetWidth>e)return n;return-1},t.prototype.localizeString=function(e,t){var n=this.options;return n.localization&&n.localization[e]?n.localization[e]:t},t.prototype._formatString=function(e,t,n,r){var i,s=arguments,o,u,a=this;if(s.length<=1)return Globalize.format(s);typeof e=="string"&&typeof window[e]=="function"&&(e=window[e]);if(typeof e=="function"){u=[];for(o=1;o<s.length;o+=1)u[o-1]=s[o];return e.apply(this,u)}return i=new RegExp("\\{(\\d+)(?:,([-+]?\\d+))?(?:\\:([^(^}]+)(?:\\(((?:\\\\\\)|[^)])+)\\)){0,1}){0,1}\\}","g"),e.replace(i,function(e,t,n,r,i){return e=s[Number(t)+1],r?Globalize.format(e,r,a._getCulture()):e})},t}(e.wijmoWidget);t.wijdatepager=E;var S=function(){function e(){this.wijCSS={wijdatepager:"",wijdatepagerIncButton:"",wijdatepagerDecButton:"",wijdatepagerContainer:"",wijdatepagerPages:"",wijdatepagerPageLabel:"",wijdatepagerPageLabelFirst:"",wijdatepagerPageLabelLast:"",wijdatepagerPageHeader:"",wijdatepagerPageRange:"",wijdatepagerTooltip:"",wijdatepagerTooltipInner:"",wijdatepagerTriangle:"",wijdatepagerWidthSmallest:"",wijdatepagerWidthSmall:"",wijdatepagerWidthMedium:"",wijdatepagerWidthNormal:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-b",stateDefault:"ui-btn ui-btn-b"},this.initSelector=":jqmData(role='wijdatepager')",this.culture="",this.cultureCalendar="",this.localization=null,this.firstDayOfWeek=0,this.selectedDate=null,this.viewType="day",this.nextTooltip="right",this.prevTooltip="left",this.selectedDateChanged=null}return e}();E.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new S),n.wijmo.registerWidget(r,E.prototype)})(e.datepager||(e.datepager={}));var t=e.datepager})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";function i(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function s(){var e,t,n;e="";for(n=0;n<32;n+=1){if(n===8||n===12||n===16||n===20)e+="-";t=Math.floor(Math.random()*16).toString(16).toUpperCase(),e+=t}return e}function c(e,t,n){f?(l=amplify.store("wijevcal_tables1"),l||(l={}),l[e]||(l[e]={fields:t},amplify.store("wijevcal_tables1",l),amplify.store("wijevcal_tbl_"+e,{})),n&&n()):o&&o.transaction(function(r){r.executeSql("SELECT COUNT(*) FROM "+e,[],function(){n&&n()},function(r,i){r.executeSql("CREATE TABLE "+e+" "+t,[],n,n)})})}function h(e,t,n,r){var i={rowsAffected:0,rows:new Array},s,u,a,c,h,p,d,v,m,g,y,b,w,E;t||(t=[]),i.rows.item||(i.rows.item=function(e){return this[e]});if(f)try{a=new RegExp("(SELECT) *(.*) *FROM (\\w+)"),c=new RegExp("(INSERT OR REPLACE|INSERT) *(.*) *INTO *(\\w*) *\\(([\\w|,| ]*)\\)"),h=new RegExp("(DELETE) *(.*) *FROM (\\w+) *(\\w*)WHERE (\\w+)='*([^']+)");if(e.match(c)){p=c.exec(e);if(p&&p.length>1){d=p[3],v=l[d],m=amplify.store("wijevcal_tbl_"+d);if(m){y=p[4].split(","),s={};for(u=0;u<y.length;u+=1)y[u]&&(u===0&&(m[t[u]]=s),b=y[u].replace(" ",""),s[b]=t[u])}amplify.store("wijevcal_tbl_"+d,m)}}else if(e.match(a)){p=a.exec(e);if(p&&p.length>1){d=p[3],v=l[d],m=amplify.store("wijevcal_tbl_"+d);if(m){w=e.replace(a,"");if(w.toUpperCase().indexOf(" WHERE ")===0){w=w.substr(7),E=w.split(" OR ");for(u=0;u<E.length;u+=1)E[u]=E[u].split("="),w=E[u][1],w.indexOf("'")===0?(w=w.substring(1,w.length-1),E[u][1]=w):E[u][1]=parseFloat(w)}for(g in m)if(m.hasOwnProperty(g)){s=m[g];if(s)if(E)for(u=0;u<E.length;u+=1)s[E[u][0]]===E[u][1]&&i.rows.push(s);else i.rows.push(s)}}}}else e.match(h)&&(p=h.exec(e),p&&p.length>1&&(d=p[3],v=l[d],m=amplify.store("wijevcal_tbl_"+d),m&&m[p[6]]&&delete m[p[6]],amplify.store("wijevcal_tbl_"+d,m)));n&&n(i)}catch(S){r&&r(S)}else{if(!o){r("Local data storage not found.");return}o.transaction(function(i){i.executeSql(e,t,function(e,t){n&&n(t)},function(e,t){r&&r(t.message);return})})}}var n=jQuery,r="wijevcal",o,u="C1EventsCalendarDB",a="1.1",f=!1,l,p=function(e){function t(){e.apply(this,arguments),this._dynIdCounter=0}return __extends(t,e),t.prototype._setOption=function(e,t){var r=this,i=n.when.apply(this,r._defferObjs),s;i.always(function(){r._setOptionCallbacks.fire(),r._setOptionCallbacks.empty(),r._defferObjs=[]}),i.state()==="pending"?this._setOptionCallbacks.add(function(){n.isPlainObject(t)?s=n.extend(!0,{},t):n.isArray(t)?s=[].concat(t):s=t,r._setOptionInternal(e,s)}):this._setOptionInternal(e,t)},t.prototype._setOptionInternal=function(e,t){var r=this.options,s,o;switch(e){case"dataSource":r.dataSource=t,this._needLoadLocalStorage=!1,r.eventsData=[],this._bindDataView();break;case"eventsData":r.eventsData=t,r.appointments=t,this._needLoadLocalStorage=!1,this._onEventsDataChanged(),this._bindEvents();break;case"appointments":r.eventsData=t,r.appointments=t,this._needLoadLocalStorage=!1,this._onEventsDataChanged(),this._bindEvents();break;case"localization":this._setLocalization(t);break;case"culture":case"cultureCalendar":r[e]=t,this._innerCulture=null,this._resetCulture(),this.element.find(".wijmo-wijdatepager").wijdatepager("option",e,t),this._editEventDialog&&this._editEventDialog.find(".wijmo-wijinput-date").wijinputdate("option",e,t),this.element.find(".wijmo-wijcalendar").wijcalendar("option",e,t),this._redrawActiveView();break;case"calendar":this.element.find(".wijmo-wijcalendar").wijcalendar("option",t),this._redrawActiveView();break;case"disabled":r.disabled!==t&&(r.disabled=t,this._ensureDisabled());break;case"enableLogs":r.enableLogs=t,this._initLogPanel();break;case"selectedDate":t&&(t=i(t),r.selectedDates[0].getTime()!==t.getTime()&&(r.selectedDates[0]=t,this._onSelectedDatesChanged()));return;case"selectedDates":t&&(r.selectedDates=t,this._onSelectedDatesChanged());return;case"statusBarVisible":r.statusBarVisible=t,this._initStatusbar(),this.invalidate();return;case"headerBarVisible":r.headerBarVisible=t,this._initHeaderbar(),this.invalidate();return;case"navigationBarVisible":r.navigationBarVisible=t,this._initNavigationbar(),this.invalidate();return;case"rightPaneVisible":r.rightPaneVisible=t,this._initRightPane(),this.invalidate();return;case"timeInterval":case"timeIntervalHeight":case"timeRulerInterval":case"timeRulerFormat":r[e]!==t&&(r[e]=t,this._redrawActiveView());break;case"firstDayOfWeek":r[e]!==t&&(r[e]=t,this._redrawActiveView(),s=this._getCulture(),s&&s.calendar&&(s.calendar.firstDay=t,o=this.element.find(".wijmo-wijcalendar").data("wijmo-wijcalendar"),o&&o._getCulture&&o.refresh&&(o._getCulture().calendar.firstDay=t,o.refresh())));break;case"viewType":if(r.viewType!==t){r.viewType=t;if(t.toLowerCase()==="day"||t.toLowerCase()==="list")r.selectedDates=[r.selectedDate];this._onViewTypeChanged()}break;default:}n.wijmo.widget.prototype._setOption.apply(this,arguments)},t.prototype._setLocalization=function(e){this._destroyInternal(),this.options.localization=e,this._create(),this._init()},t.prototype._ensureDisabled=function(){var e=this.options;if(e.disabled){this.element.addClass(e.wijCSS.stateDisabled);try{this.element.find(".wijmo-wijcalendar").wijcalendar("option","disabled",!0),this.element.find(".wijmo-wijsuperpanel").wijsuperpanel("option","disabled",!0),this.element.find(".wijmo-wijdatepager").wijdatepager("option","disabled",!0),n().buttonset&&this.element.find(".ui-buttonset").buttonset("option","disabled",!0),this.element.find(".wijmo-wijev-today.ui-button").button("option","disabled",!0)}catch(t){this.log(t,"error")}this._unbindEvents()}else{this.element.removeClass(e.wijCSS.stateDisabled);try{this.element.find(".wijmo-wijcalendar").wijcalendar("option","disabled",!1),this.element.find(".wijmo-wijsuperpanel").wijsuperpanel("option","disabled",!1),this.element.find(".wijmo-wijdatepager").wijdatepager("option","disabled",!1),n().buttonset&&this.element.find(".ui-buttonset").buttonset("option","disabled",!1),this.element.find(".wijmo-wijev-today.ui-button").button("option","disabled",!1)}catch(t){this.log(t,"error")}this._bindEvents(),this._updateTitleText()}},t.prototype._onViewTypeChanged=function(){this._renderActiveView(),this._updateTitleText(),this._trigger("viewTypeChanged",null,this.options.viewType),this.element.find(".wijmo-wijev-datepager").wijdatepager("option","viewType",this.options.viewType)},t.prototype._onSelectedDatesChanged=function(){var e=this.options;e.selectedDate=e.selectedDates[0],this.element.find(".wijmo-wijev-datepager").wijdatepager("option","selectedDate",e.selectedDate),this._trigger("selectedDatesChanged",null,{selectedDates:e.selectedDates}),this._renderActiveView(),this._updateTitleText()},t.prototype._updateHeaderTitleText=function(){var e=this.options,t=e.titleFormat,n=e.selectedDates[0],r=e.selectedDates[e.selectedDates.length-1];if(t[e.viewType])t=t[e.viewType];else{if(t[e.viewType]===!1){this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").hide();return}t=t.toString()}e.viewType==="list"&&(r=this._addDays(n,14)),this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").show().html(this._formatString(t,n,r))},t.prototype._updateTitleText=function(){var e=this.options,t=e.selectedDates[0],r=e.selectedDates[e.selectedDates.length-1],i=new Date,s=!1;s=this._compareDayDates(t,i)===0||t<i&&r>i,n.mobile==null&&this.element.find(".wijmo-wijev-navigationbar .wijmo-wijev-today").button("option","disabled",s),this._updateHeaderTitleText()},t.prototype.localizeString=function(e,t){var n=this.options;return n.localization&&n.localization[e]?n.localization[e]:t},t.prototype._create=function(){var e=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this._defferObjs=[],this._chromeLoadDataDeffer=n.Deferred(),this._defferObjs.push(this._chromeLoadDataDeffer),this._setOptionCallbacks=n.Callbacks("once"),this._needLoadLocalStorage=!0;if(this.options.appointments&&this.options.appointments.length||this.options.eventsData&&this.options.eventsData.length)this._needLoadLocalStorage=!1;n.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(this.options);var t,r,i=this.options;i.colors||(i.colors=["red","darkorchid","green","blue","cornflowerblue","yellow","bronze"]),this.wijevcalnamespacekey||(this.wijevcalnamespacekey="wijevcal"+(new Date).getTime()),this.element[0].id||(this.element[0].id="wijevcal_dynid_"+(new Date).getTime()),this._uidPref=this.element[0].id+"evcdynid",this.element.addClass("wijmo-wijevcal wijmo-wijev "+i.wijCSS.widget+" "+i.wijCSS.helperReset+" "+i.wijCSS.stateDefault),n('<div class="wijmo-wijev-headerbar '+i.wijCSS.header+" "+i.wijCSS.cornerTop+'">'+'<fieldset class="wijmo-wijev-tools">'+'<input id="'+this._uidPref+'_daybtn" name="viewselection"'+' type="radio" class="wijmo-wijev-day" />'+'<label for="'+this._uidPref+'_daybtn">'+this.localizeString("buttonDayView","Day")+"</label>"+'<input id="'+this._uidPref+'_weekbtn" name="viewselection"'+' type="radio" class="wijmo-wijev-week" />'+'<label for="'+this._uidPref+'_weekbtn">'+this.localizeString("buttonWeekView","Week")+"</label>"+'<input id="'+this._uidPref+'_monthbtn" name="viewselection"'+' type="radio" class="wijmo-wijev-month" />'+'<label for="'+this._uidPref+'_monthbtn">'+this.localizeString("buttonMonthView","Month")+"</label>"+'<input id="'+this._uidPref+'_listbtn" name="viewselection"'+' type="radio" class="wijmo-wijev-list" />'+'<label for="'+this._uidPref+'_listbtn">'+this.localizeString("buttonListView","List")+"</label>"+"</fieldset>"+"</div>").appendTo(this.element),n('<div class="wijmo-wijev-view-container"><div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails '+i.wijCSS.content+' wijmo-wijev-day-details">'+'<div class="wijmo-wijev-leftpane-inner">'+'<div class="wijmo-wijev-daycalendar"></div>'+'<div class="wijmo-wijev-monthday-container">'+'<div class="wijmo-wijev-monthday-label">...</div>'+'<div class="wijmo-wijev-fulldate-label">'+this.localizeString("activityLoading","Loading...")+"</div>"+'<div class="wijmo-wijev-year-label">...</div>'+"</div>"+'<div class="wijmo-wijev-agenda-container '+i.wijCSS.content+" "+i.wijCSS.cornerAll+" "+i.wijCSS.helperClearFix+'"></div>'+"</div>"+"</div>"+'<div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails '+i.wijCSS.content+' wijmo-wijev-list-details">'+'<div class="wijmo-wijev-leftpane-inner">'+'<div class="wijmo-wijev-agenda-container '+i.wijCSS.content+" "+i.wijCSS.cornerAll+" "+i.wijCSS.helperClearFix+'">&nbsp;'+"</div>"+"</div>"+"</div>"+'<div class="wijmo-wijev-rightpane">'+"&nbsp;</div>"+"</div>").appendTo(this.element),n('<div class="wijmo-wijev-loading-modal-frame"></div><div class="wijmo-wijev-loading"><div class="wijmo-wijev-loading-text">'+this.localizeString("activityLoading","Loading...")+"</div></div>").appendTo(this.element),n('<div class="wijmo-wijev-navigationbar '+i.wijCSS.header+" "+i.wijCSS.cornerBottom+" "+i.wijCSS.helperClearFix+'">'+'<a class="wijmo-wijev-today">'+this.localizeString("buttonToday","today")+"</a>"+'<div class="wijmo-wijev-datepager">'+"</div>"+"</div>").appendTo(this.element),n('<div class="wijmo-wijev-statusbar '+i.wijCSS.header+" "+i.wijCSS.cornerBottom+'">'+"</div>").appendTo(this.element),t=this.element.find(".wijmo-wijev-navigationbar"),r=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools"),n.mobile!=null?t.find(".wijmo-wijev-today").addClass("ui-btn ui-btn-corner-all").click(n.proxy(this._onTodayClick,this)):t.find(".wijmo-wijev-today").button({text:this.localizeString("buttonToday","today")}).click(n.proxy(this._onTodayClick,this)),this.element.find(".wijmo-wijev-datepager").wijdatepager({selectedDate:i.selectedDate,localization:i.datePagerLocalization,culture:i.culture,cultureCalendar:i.cultureCalendar,viewType:i.viewType,nextTooltip:this.localizeString("navigatorBarNextTooltip","right"),prevTooltip:this.localizeString("navigatorBarPrevTooltip","left"),firstDayOfWeek:i.firstDayOfWeek,selectedDateChanged:n.proxy(function(e,t){this.goToDate(t.selectedDate)},this)}),n.mobile==null?(r.find(".wijmo-wijev-day").button().button("widget").addClass(i.wijCSS.stateDefault),r.find(".wijmo-wijev-week").button().button("widget").addClass(i.wijCSS.stateDefault),r.find(".wijmo-wijev-month").button().button("widget").addClass(i.wijCSS.stateDefault),r.find(".wijmo-wijev-list").button().button("widget").addClass(i.wijCSS.stateDefault),r.buttonset()):(r.attr("data-role","controlgroup"),r.attr("data-type","horizontal"),r.parent().trigger("create"),r.controlgroup("refresh")),this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver(),e._redrawActiveView()},"wijevcal"),r.find(".wijmo-wijev-day").click(n.proxy(this._onDayViewClick,this)),r.find(".wijmo-wijev-week").click(n.proxy(this._onWeekViewClick,this)),r.find(".wijmo-wijev-month").click(n.proxy(this._onMonthViewClick,this)),r.find(".wijmo-wijev-list").click(n.proxy(this._onListViewClick,this)),this.showLoadingLabel()},t.prototype.showLoadingLabel=function(e,t){e===!1?this.element.find(".wijmo-wijev-loading-text").hide():(this.element.find(".wijmo-wijev-loading-text").show(),e||(e=this.localizeString("activityLoading","Loading..."))),(t===undefined||t===!0)&&this.element.find(".wijmo-wijev-loading-modal-frame").show(),this.element.find(".wijmo-wijev-loading").show(),this.element.find(".wijmo-wijev-loading-text").html(e)},t.prototype.hideLoadingLabel=function(){this.element.find(".wijmo-wijev-loading-modal-frame").hide(),this.element.find(".wijmo-wijev-loading").hide()},t.prototype._init=function(){var e=this.options;e.selectedDates&&e.selectedDates.length>0?e.selectedDate=e.selectedDates[0]=i(e.selectedDates[0]):e.selectedDate?(e.selectedDate=i(e.selectedDate),e.selectedDates||(e.selectedDates=[]),e.selectedDates[0]=e.selectedDate):(e.selectedDate=i(new Date),e.selectedDates=[e.selectedDate]),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._initHeaderbar(),this._initNavigationbar(),this._initStatusbar(),this._initRightPane(),e.fullScreen&&this._onFullScreenModeChanged(e.fullScreen),this._initLogPanel(),this._initLocalDataStorage(),this.element.ajaxError(jQuery.proxy(this._onAjaxError,this)),n(window).bind("resize."+this.wijevcalnamespacekey,n.proxy(this._onWindowResize,this)),this._renderActiveView(),this._bindDataView()},t.prototype._onFullScreenModeChanged=function(e){},t.prototype._isDataViewLoaded=function(e){return e&&(e.isLoaded()||e.count()>0)},t.prototype._isDataview=function(e){if(e&&typeof e=="object"&&!n.isArray(e))return!0},t.prototype._getDataViewInst=function(){return this.element.data("wijdataview")},t.prototype._bindDataView=function(){var e=this.options,t=e.dataSource,t,n=this;!t&&this._getDataViewInst()&&(t=this._getDataViewInst(),t=e.dataSource=t),t&&this._isDataview(t)?this._isDataViewLoaded(t)?(this._dataView=t,this._setOption("eventsData",t.toArray())):t.element.bind("dataloaded",function(){n._dataView=t,n._setOption("eventsData",t.toArray())}):this._dataView=null},t.prototype._initLocalDataStorage=function(){try{f=!1;if(window.amplify&&window.amplify.store)try{l=amplify.store("wijevcal_tables1"),f=!0,this.log("Using amplify.store for the local data storage")}catch(e){this.log("amplify.store exception:"+e),this._loadData();return}else{if(!window.openDatabase){this.log(this.localizeString("logCouldntOpenLocalStorage","Couldn't open built-in local data storage. Please, add amplify.store references.")),this._loadData();return}try{o=window.openDatabase(u,a,"Wijmo Events Calendar Offline DB",2e5)}catch(t){this.log("web sql database error: "+t),this._loadData();return}if(!o){this.log("Failed to open the database on disk. This is probably because the version was bad or there is not enough space left in this domain's quota"),this._loadData();return}this.log("Using Web SQL Database for the local data storage.")}c("calendars","(id TEXT PRIMARY KEY, name TEXT, location TEXT, description TEXT, color TEXT, tag TEXT)");var r=n.Deferred(),i=this;this._defferObjs.push(r),c("events","(id TEXT PRIMARY KEY, calendar TEXT, subject TEXT, location TEXT, start TIMESTAMP, end TIMESTAMP, description TEXT, color TEXT, allday INTEGER, properties TEXT, tag TEXT)",function(){i._loadData(),r.resolve()})}catch(s){this.log("local datastorage initialization error:"+s)}},t.prototype._initStatusbar=function(){var e=this.element.find(".wijmo-wijev-statusbar");if(!this.options.statusBarVisible){e.hide();return}e.css("float","left"),e.show(),this.statusbarEventsAdded||(this.statusbarEventsAdded=!0)},t.prototype._initHeaderbar=function(){var e=this.element.find(".wijmo-wijev-headerbar");if(!this.options.headerBarVisible){e.hide();return}e.show()},t.prototype._initNavigationbar=function(){var e=this.element.find(".wijmo-wijev-navigationbar");if(!this.options.navigationBarVisible){e.hide();return}e.show()},t.prototype._initRightPane=function(){var e=this.element.find(".wijmo-wijev-rightpane");if(!this.options.rightPaneVisible){e.hide();return}e.show()},t.prototype._initLogPanel=function(){this.options.enableLogs?(this._createLogPanel(),this.log=this._log):(this.logDialog&&this.logDialog.wijdialog("close"),this.log=function(){})},t.prototype._handleServerError=function(e){return e&&e.toString().indexOf("error:")===0?(this.status(e.toString(),"error"),!0):!1},t.prototype._loadData=function(){var e=this.options,t=this,r,i,s,o,u,a,f,l,c,p,d,v,m;this.showLoadingLabel(),p=function(e){e==="Local data storage not found."&&(m=!0),t.hideLoadingLabel()},e.calendars=[],u=this._calendarsById={},l=function(n){e.calendars=[];if(!n)return;if(typeof n=="string"){if(t._handleServerError(n)){p(n);return}try{n=t._jsonParse(n)}catch(i){t.status("Unable to parse received calendars data. "+i,"error");return}}n.calendars&&n.calendars.length&&(n=n.calendars);for(r=0;r<n.length;r+=1)s=t._cloneObj(n[r]),s.prevData=t._cloneObj(s),e.calendars.push(s),u[s.id]=s;t._onCalendarsChanged()},e.dataStorage.loadCalendars?e.dataStorage.loadCalendars(l,p):e.webServiceUrl?n.getJSON(e.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadCalendars"+"&calendars="+e.calendars,l):h("SELECT * FROM calendars",[],function(n){for(r=0,i=n.rows.length;r<i;r+=1)s=t._cloneObj(n.rows.item(r)),s.prevData=t._cloneObj(s),e.calendars.push(s),u[s.id]=s;t._onCalendarsChanged()},p),this._dataView&&(e.eventsData=this._dataView.toArray()),this._eventsDataById?a=this._eventsDataById:a=this._eventsDataById={},e.eventsData||(e.eventsData=[]),c=function(e){if(!e)return;if(typeof e=="string"){if(t._handleServerError(e)){p(e);return}try{e=t._jsonParse(e)}catch(n){t.log("Unable to parse received calendars data. "+n);return}}e.events&&e.events.length&&(e=e.events);for(r=0;r<e.length;r+=1)o=t._readEventData(e[r]),t._storeEventWithSort(o);t._onEventsDataChanged(),t._onInitialized()};if(e.dataStorage.loadEvents)e.dataStorage.loadEvents(e.visibleCalendars,c,p),t._chromeLoadDataDeffer.resolve();else if(e.webServiceUrl)n.ajax({url:e.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadEvents&timestamp="+(new Date).getTime(),dataType:"text",cache:!1,contentType:"application/json; charset=utf-8",type:"POST",success:c,error:p}),t._chromeLoadDataDeffer.resolve();else{if(this._dataView){this._onInitialized();return}f="SELECT * FROM events where ";for(r=0;r<e.visibleCalendars.length;r+=1)r>0&&(f+=" OR "),f+="calendar='"+e.visibleCalendars[r]+"'";h(f,[],function(n){if(t._needLoadLocalStorage){e.eventsData=[];for(r=0,i=n.rows.length;r<i;r+=1)o=t._readEventData(n.rows.item(r)),t._storeEventWithSort(o)}t._onEventsDataChanged(),t._onInitialized(),t._chromeLoadDataDeffer.resolve()},function(){p.apply(this,arguments),m&&(t._onEventsDataChanged(),t._onInitialized()),t._chromeLoadDataDeffer.resolve()})}},t.prototype._onInitialized=function(){this._ensureDisabled(),this.hideLoadingLabel(),this._trigger("initialized")},t.prototype._readEventData=function(e){var t=this._cloneObj(e);return t.start=new Date(t.start),t.end=new Date(t.end),typeof t.allday=="string"&&(t.allday==="false"&&(t.allday=!1),t.allday==="true"&&(t.allday=!0)),t.start.getTime()>=t.end.getTime()&&(t.end=this._addMinutes(t.start,this.options.timeInterval)),this._deSerializeProperties(t.properties,t),t.prevData=this._cloneObj(t),t},t.prototype._prepareEventsForView=function(){this._eventsView=this.getOccurrences()},t.prototype._cloneObj=function(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t.prototype._onDayViewClick=function(){var e=this.options;if(e.disabled)return;e.viewType!=="day"&&(e.viewType="day",this._onViewTypeChanged()),e.selectedDates=[e.selectedDate],this._onSelectedDatesChanged()},t.prototype._onWeekViewClick=function(){var e=this.options,t,n,r;if(e.disabled)return;e.viewType!=="week"&&(e.viewType="week",this._onViewTypeChanged()),t=e.selectedDate,r=e.firstDayOfWeek-t.getDay(),Math.abs(r)>6&&(r=t.getDay()-e.firstDayOfWeek),t=this._addDays(t,r),e.selectedDates=[];for(r=0;r<7;r+=1)n=this._addDays(t,r),e.selectedDates.push(n);this._onSelectedDatesChanged()},t.prototype._onMonthViewClick=function(){var e=this.options;if(e.disabled)return;e.viewType!=="month"&&(e.viewType="month",this._onViewTypeChanged())},t.prototype._onListViewClick=function(){var e=this.options;if(e.disabled)return;e.viewType!=="list"&&(e.viewType="list",this._onViewTypeChanged()),e.selectedDates=[e.selectedDate],this._onSelectedDatesChanged()},t.prototype._ensureEditCalendarDialogCreated=function(){var e=this.options,t,r={};this._editCalendarDialog||(t=e.editCalendarTemplate,t||(t="<p><label>"+this.localizeString("labelCalendarName","Calendar name")+"</label>"+'<input type="text" class="wijmo-wijev-name" value=""> '+'<div class="wijmo-wijev-color-button">'+'<div class="wijmo-wijev-color ui-wijmo-wijev-event-color-default">&nbsp;</div>'+"</div>"+"</p>"+"<p><label>"+this.localizeString("labelLocation","Location")+"</label>"+'<input type="text" class="wijmo-wijev-location" value=""></p>'+"<p><label>"+this.localizeString("labelDescription","Description")+'</label><textarea class="wijmo-wijev-description" /></p>'),this._editCalendarDialog=n('<div class="wijmo-wijev-editcalendar-dialog">'+t+"</div>"),this.element.append(this._editCalendarDialog),r[this.localizeString("buttonSave","Save")]=n.proxy(function(){try{var e=this._validateAndReadCalendarDialogFields(this._editCalendarDialog);e.prevData?this.updateCalendar(e):this.addCalendar(e),this._editCalendarDialog.wijdialog("close")}catch(t){alert(t)}},this),this._editCalendarDialog.wijdialog({autoOpen:!0,height:340,width:440,modal:!0,title:this.localizeString("titleEditCalendar","Edit calendar"),buttons:r,captionButtons:{pin:{visible:!1},refresh:{visible:!1},toggle:{visible:!1},minimize:{visible:!1},maximize:{visible:!1}}}),this._editCalendarDialog.find(".wijmo-wijev-name, .wijmo-wijev-location, .wijmo-wijev-description").wijtextbox(),this._editCalendarDialog.find(".wijmo-wijev-color-button").button({icons:{primary:e.wijCSS.iconArrowDown}}).click(n.proxy(this._onColorButtonClick,{dlg:this._editCalendarDialog,self:this})))},t.prototype._ensureEditEventDialogCreated=function(){var e=this.options,t,r=!1,i=!1;this._editEventDialog||(t=this.options.editEventDialogTemplate,t||(t='<div class="wijmo-wijev-event-dialog '+this.options.wijCSS.content+" "+e.wijCSS.cornerAll+'">'+'<ul class="wijmo-wijev-brief-content">'+"<li><label>"+this.localizeString("labelName","name")+"</label>"+'<input type="text" name="subject" class="wijmo-wijev-subject" value="">'+'<div class="wijmo-wijev-color-button">'+'<div class="wijmo-wijev-color ui-wijmo-wijev-event-color-default">&nbsp;</div>'+"</div>"+"</li>"+'<li><label for="'+this._uidPref+'_alldaybtn">'+this.localizeString("labelAllDay","all-day")+"</label>"+'<input type="checkbox" class="wijmo-wijev-allday" id="'+this._uidPref+'_alldaybtn" />'+"</li>"+"<li><label>"+this.localizeString("labelStarts","Starts")+"</label>"+'<input type="text" class="wijmo-wijev-start" value="">'+'<input type="text" class="wijmo-wijev-start-time" value="">'+"</li>"+"<li><label>"+this.localizeString("labelEnds","Ends")+"</label>"+'<input type="text" class="wijmo-wijev-end" value="">'+'<input type="text" class="wijmo-wijev-end-time" value="">'+"</li>"+"</ul>"+'<ul class="wijmo-wijev-detailed-content '+e.wijCSS.cornerAll+'">'+"<li><label>"+this.localizeString("labelLocation","Location")+"</label>"+'<input type="text" class="wijmo-wijev-location" value=""></li>'+"<li><label>"+this.localizeString("labelRepeat","Repeat")+"</label>"+'<select class="wijmo-wijev-repeat">'+'<option value="none">'+this.localizeString("repeatNone","None")+"</option>"+'<option value="daily">'+this.localizeString("repeatDaily","Every Day")+"</option>"+'<option value="workdays">'+this.localizeString("repeatWorkDays","Work days")+"</option>"+'<option value="weekly">'+this.localizeString("repeatWeekly","Every Week")+"</option>"+'<option value="monthly">'+this.localizeString("repeatMonthly","Every Month")+"</option>"+'<option value="yearly">'+this.localizeString("repeatYearly","Every Year")+"</option>"+"</select></li>"+"<li><label>"+this.localizeString("labelCalendar","Calendar")+"</label>"+'<select class="wijmo-wijev-calendar"></select></li>'+'<li class="wijmo-wijev-description-item"><label>'+this.localizeString("labelDescription","Description")+"</label>"+'<textarea class="wijmo-wijev-description" /></li>'+"</ul>"+'<div class="footer">'+'<a href="#" class="wijmo-wijev-delete">'+this.localizeString("buttonDelete","Delete")+"</a>"+'<a href="#" class="wijmo-wijev-save">'+this.localizeString("buttonOK","OK")+"</a>"+'<a href="#" class="wijmo-wijev-cancel">'+this.localizeString("buttonCancel","Cancel")+"</a>"+"</div>"+'<div class="wijmo-wijev-angle"></div>'+"</div>"),this._editEventDialog=n(t),e.ensureEventDialogOnBody?n("body").append(this._editEventDialog):this.element.append(this._editEventDialog),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-color-button"),n.proxy(this._onColorButtonClick,{dlg:this._editEventDialog,self:this}),{icons:{primary:e.wijCSS.iconArrowDown}}),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-delete"),n.proxy(function(e){return this.deleteEvent(this._editEventDialog.appt),this._editEventDialog.wijpopup("hide"),e.preventDefault(),!1},this)),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-cancel"),n.proxy(function(e){return this._editEventDialog.wijpopup("hide"),e.preventDefault(),!1},this)),this._editEventDialog.find(".wijmo-wijev-start").width(114).wijinputdate({culture:this.options.culture,cultureCalendar:this.options.cultureCalendar,titleFormat:this.localizeString("calendarTitleFormat","MMMM yyyy"),toolTipFormat:this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),nextTooltip:this.localizeString("calendarNextTooltip","Next"),prevTooltip:this.localizeString("calendarPrevTooltip","Previous"),showDropDownButton:!0,dateFormat:"d",dropDownOpen:function(e,t){r=!1},dropDownClose:function(e,t){r=!0,n(document).one("mouseup",function(){r=!1})},dateChanged:n.proxy(function(e,t){r&&(i=!0,n(document).one("mouseup",function(){i=!1}));var s=this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date");t.date>s&&this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date",t.date)},this)}),this._editEventDialog.find(".wijmo-wijev-start-time").width(80).wijinputdate({culture:this.options.culture,cultureCalendar:this.options.cultureCalendar,titleFormat:this.localizeString("calendarTitleFormat","MMMM yyyy"),toolTipFormat:this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),nextTooltip:this.localizeString("calendarNextTooltip","Next"),prevTooltip:this.localizeString("calendarPrevTooltip","Previous"),showDropDownButton:!1,dateFormat:"t",dateChanged:n.proxy(function(e,t){var n=this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date"),r=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");t.date.getDate()!==r.getDate()&&(t.date.setDate(r.getDate()),this._editEventDialog.find(".wijmo-wijev-start-time").wijinputdate("option","date",t.date)),t.date>n&&this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date",t.date)},this)}),this._editEventDialog.find(".wijmo-wijev-end").width(114).wijinputdate({culture:this.options.culture,cultureCalendar:this.options.cultureCalendar,titleFormat:this.localizeString("calendarTitleFormat","MMMM yyyy"),toolTipFormat:this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),nextTooltip:this.localizeString("calendarNextTooltip","Next"),prevTooltip:this.localizeString("calendarPrevTooltip","Previous"),showDropDownButton:!0,dateFormat:"d",dropDownOpen:function(e,t){r=!1},dropDownClose:function(e,t){r=!0,n(document).one("mouseup",function(){r=!1})},dateChanged:n.proxy(function(e,t){r&&(i=!0,n(document).one("mouseup",function(){i=!1}));var s=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");t.date<s&&this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date",t.date)},this)}),this._editEventDialog.find(".wijmo-wijev-end-time").width(80).wijinputdate({culture:this.options.culture,cultureCalendar:this.options.cultureCalendar,titleFormat:this.localizeString("calendarTitleFormat","MMMM yyyy"),toolTipFormat:this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),nextTooltip:this.localizeString("calendarNextTooltip","Next"),prevTooltip:this.localizeString("calendarPrevTooltip","Previous"),showDropDownButton:!1,dateFormat:"t"}),this._editEventDialog.find(".wijmo-wijev-allday").wijcheckbox().change(n.proxy(this._eventDialogEnsureTimePartState,this)),this._editEventDialog.find(".wijmo-wijev-subject,.wijmo-wijev-location,.wijmo-wijev-description").wijtextbox(),this._initEventDialogButton(this._editEventDialog.find(".wijmo-wijev-save"),n.proxy(function(e){try{var t=this._validateAndReadApptDialogFields(this._editEventDialog);return t.prevData?this.updateEvent(t):this.addEvent(t),this._editEventDialog.wijpopup("hide"),e.preventDefault(),!1}catch(n){alert(n)}},this)),this._editEventDialog.wijpopup({autoHide:!0,hiding:n.proxy(function(e){if(i)return i=!1,!1;this._colorMenu&&this._colorMenu.wijpopup("hide"),this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected")},this),shown:n.proxy(function(e){var t=this,r=n.browser.msie?!0:!1;this._dropDownInitialized?(this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown("refresh"),this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown("refresh")):(this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown({unfocus:r}).bind("change",function(e){var n=t._calendarsById[this.value];n&&n.color?t._addColorClass(t._editEventDialog.find(".wijmo-wijev-color"),n.color):t._editEventDialog.appt&&t._editEventDialog.appt.color&&t._addColorClass(t._editEventDialog.find(".wijmo-wijev-color"),t._editEventDialog.appt.color)}),this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown({unfocus:r}).bind("change",function(e){var n=this.value,r=t._editEventDialog.appt;switch(n){case"none":r.recurrenceState=null,r.recurrencePattern=null;break;case"daily":r.recurrenceState="master",r.recurrencePattern={parentRecurrenceId:r.id,recurrenceType:"daily"};break;case"workdays":r.recurrenceState="master",r.recurrencePattern={parentRecurrenceId:r.id,recurrenceType:"workdays"};break;case"weekly":r.recurrenceState="master",r.recurrencePattern={parentRecurrenceId:r.id,recurrenceType:"weekly"};break;case"monthly":r.recurrenceState="master",r.recurrencePattern={parentRecurrenceId:r.id,recurrenceType:"monthly"};break;case"yearly":r.recurrenceState="master",r.recurrencePattern={parentRecurrenceId:r.id,recurrenceType:"yearly"};break;case"custom":alert("show custom recurrence pattern.")}}),this._dropDownInitialized=!0),this._onEditEventDialogShown(this._editEventDialog,this._editEventDialog.appt),this._editEventDialog.find(".wijmo-wijev-subject").focus(),this._updateEditEventPopupCallout()},this)}))},t.prototype._initEventDialogButton=function(e,t,r){n.mobile==null?e.button(r).click(t):e.addClass("ui-btn").click(t)},t.prototype._updateEditEventPopupCallout=function(){if(this._editEventDialog&&this._editEventDialog._arrowTarget){var e=this._editEventDialog,t=n(e._arrowTarget),r=t.offset(),i=e.offset(),s;r.left===i.left?e.removeClass("wijmo-wijev-rightangle").removeClass("wijmo-wijev-leftangle"):r.left<i.left?e.removeClass("wijmo-wijev-rightangle").addClass("wijmo-wijev-leftangle"):e.removeClass("wijmo-wijev-leftangle").addClass("wijmo-wijev-rightangle"),s=Math.round(r.top-i.top+t.outerHeight(!0)/2),this._editEventDialog.find(".wijmo-wijev-angle").css("top",s)}},t.prototype._onColorButtonClick=function(){var e=this.self,t=this.dlg,r,i=e.options,s=i.colors,o="";if(s&&s.length>0)for(r=0;r<s.length;r+=1)o+='<span class="wijmo-wijev-listcolor wijmo-wijev-event-color-'+s[r]+'">&nbsp;</span>';e._colorMenu||(e._colorMenu=n('<div class="wijmo-wijev-color-menu '+i.wijCSS.content+" "+i.wijCSS.cornerAll+'"></div>'),t.append(e._colorMenu),e._colorMenu.wijpopup({autoHide:!0})),e._colorMenu.html(o),e._colorMenu.find(".wijmo-wijev-listcolor").click(n.proxy(function(r){this._addColorClass(t.find(".wijmo-wijev-color"),this._readColorFromClass(n(r.target),"default")),e._colorMenu.wijpopup("hide")},e)),e._colorMenu.wijpopup("show",{of:t.find(".wijmo-wijev-color-button"),my:"left top",at:"left bottom"})},t.prototype._validateAndReadCalendarDialogFields=function(e){var t=e.cal||{};t.name=e.find(".wijmo-wijev-name").val(),t.location=e.find(".wijmo-wijev-location").val(),t.description=e.find(".wijmo-wijev-description").val(),t.color=this._readColorFromClass(e.find(".wijmo-wijev-color"),t.color||"default");if(!t.name)throw"Calendar name can not be empty";return t},t.prototype._validateAndReadApptDialogFields=function(e){var t=e.appt,n,r,s,o,u;n=i(e.find(".wijmo-wijev-start").wijinputdate("option","date")),r=i(e.find(".wijmo-wijev-end").wijinputdate("option","date")),s=e.find(".wijmo-wijev-start-time").wijinputdate("option","date"),o=e.find(".wijmo-wijev-end-time").wijinputdate("option","date");var a=(s.getHours()*60+s.getMinutes())*60+s.getSeconds(),f=(o.getHours()*60+o.getMinutes())*60+o.getSeconds();if(n.getTime()===r.getTime()&&a>f)throw this.localizeString("messageEndOccursBeforeStart","The end date you entered occurs before the start date.");return t.subject=e.find(".wijmo-wijev-subject").val(),t.location=e.find(".wijmo-wijev-location").val(),t.start=n,t.end=r,e.find(".wijmo-wijev-allday").length>0&&(t.allday=e.find(".wijmo-wijev-allday")[0].checked),t.allday?t.start.getTime()>=t.end.getTime()&&(t.end=this._addMinutes(t.start,this.options.timeInterval)):(t.start=new Date(t.start.getFullYear(),t.start.getMonth(),t.start.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),t.end=new Date(t.end.getFullYear(),t.end.getMonth(),t.end.getDate(),o.getHours(),o.getMinutes(),o.getSeconds())),t.calendar=e.find(".wijmo-wijev-calendar").val(),t.description=e.find(".wijmo-wijev-description").val(),t.color=this._readColorFromClass(e.find(".wijmo-wijev-color"),t.color),u=t.recurrencePattern,u&&t.recurrenceState==="master"&&(u.startTime=t.start,u.endTime=t.end,u.patternStartDate=t.start),t},t.prototype._bindApptToDialog=function(e){if(!e)return;var t=this._editEventDialog,n,r;t.appt=e,t.find(".wijmo-wijev-subject").val(e.subject||""),t.find(".wijmo-wijev-location").val(e.location||"");try{t.find(".wijmo-wijev-start").wijinputdate("option","date",e.start),t.find(".wijmo-wijev-start-time").wijinputdate("option","date",e.start),t.find(".wijmo-wijev-end").wijinputdate("option","date",e.end),t.find(".wijmo-wijev-end-time").wijinputdate("option","date",e.end)}catch(i){alert("[e0001a] wijinputdate/wijtextselection firefox error\n"+i)}t.find(".wijmo-wijev-allday").length>0&&(t.find(".wijmo-wijev-allday")[0].checked=e.allday),t.find(".wijmo-wijev-allday").wijcheckbox("refresh"),this._fillCalendarsSelect(t.find(".wijmo-wijev-calendar"),e.calendar),this._loadRepeatValue(e,t.find(".wijmo-wijev-repeat")),t.find(".wijmo-wijev-description").val(e.description||""),e.prevData?t.find(".wijmo-wijev-delete").show():t.find(".wijmo-wijev-delete").hide(),t.find(".wijmo-wijev-calendar").length>0&&(n=this._calendarsById[t.find(".wijmo-wijev-calendar")[0].value]),r=e.color,!r&&n&&n.color&&(r=n.color),this._addColorClass(t.find(".wijmo-wijev-color"),r),this._eventDialogEnsureTimePartState()},t.prototype._onEditEventDialogShown=function(e,t){t.recurrenceState==="exception"?e.find(".wijmo-wijev-repeat").wijdropdown("option","disabled",!0):e.find(".wijmo-wijev-repeat").wijdropdown("option","disabled",!1)},t.prototype._eventDialogEnsureTimePartState=function(){var e=this._editEventDialog;e.find(".wijmo-wijev-allday").length>0&&(e.find(".wijmo-wijev-allday")[0].checked?(e.find(".wijmo-wijev-start-time").wijinputdate("option","disabled",!0),e.find(".wijmo-wijev-end-time").wijinputdate("option","disabled",!0)):(e.find(".wijmo-wijev-start-time").wijinputdate("option","disabled",!1),e.find(".wijmo-wijev-end-time").wijinputdate("option","disabled",!1)))},t.prototype._loadRepeatValue=function(e,t){var n="none";if(e.recurrencePattern)switch(e.recurrencePattern.recurrenceType){case"daily":n="daily";break;case"workdays":n="workdays";break;case"weekly":n="weekly";break;case"monthly":n="monthly";break;case"yearly":n="yearly";break;default:n="custom"}t.val(n)},t.prototype._addColorClass=function(e,t){var n,r=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*");e.length>0&&(n=e[0].className,e[0].className=n.replace(r,""),e.addClass("wijmo-wijev-event-color-"+(t||"default")))},t.prototype._readColorFromClass=function(e,t){var n=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*"),r;if(e.length>0){r=n.exec(e[0].className);if(r&&r.length>1)return r[1]}return t},t.prototype._fillCalendarsSelect=function(e,t){var n="",r=this.options,i,s,o,u=r.calendars.slice(0),a=r.visibleCalendars;if(a&&a.length>0)for(i=0;i<a.length;i+=1){o=!1;for(s=0;s<u.length;s+=1)u[s].name===a[i]&&(o=!0);o||u.push({id:a[i],name:a[i]})}if(u.length===0){e.html("");return}for(i=0;i<u.length;i+=1)n+='<option value="'+u[i].id+'">'+u[i].name+"</option>";e.html(n).val(t)},t.prototype._bindCalendarToDialog=function(e){if(!e)return;var t=this._editCalendarDialog;t.cal=e,t.find(".wijmo-wijev-name").val(e.name||""),t.find(".wijmo-wijev-location").val(e.location||""),t.find(".wijmo-wijev-description").val(e.description||""),this._addColorClass(t.find(".wijmo-wijev-color"),e.color)},t.prototype._onTodayClick=function(){if(this.options.disabled)return;return this.goToday(),!1},t.prototype._bindEvents=function(){this._eventsAttached||(n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-appointment",n.proxy(this._onAppointmentClick,this)),n(this.element).on("mousedown."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-appointment",n.proxy(this._onDayViewAppointmentMouseDown,this)),n(this.element).on("mousedown."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-appointment",n.proxy(this._onMonthViewAppointmentMouseDown,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-timeinterval",n.proxy(this._onDayViewTimeIntervalClick,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-dayview .wijmo-wijev-allday-cell",n.proxy(this._onDayViewAllDayCellClick,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcellheader",n.proxy(this._onMonthViewDayLabelClick,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcell-showmore",n.proxy(this._onMonthViewDayLabelClick,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-weekview .wijmo-wijev-daylabel",n.proxy(this._onMonthViewDayLabelClick,this)),n(this.element).on("click."+this.wijevcalnamespacekey,".wijmo-wijev-monthview .wijmo-wijev-monthcell",n.proxy(this._onMonthViewCellClick,this)),this._eventsAttached=!0)},t.prototype._unbindEvents=function(){this._eventsAttached&&(n(this.element).off("mousedown."+this.wijevcalnamespacekey),n(this.element).off("click."+this.wijevcalnamespacekey),this._eventsAttached=!1)},t.prototype.destroy=function(){this._destroyInternal(),n.wijmo.widget.prototype.destroy.apply(this,arguments)},t.prototype._destroyInternal=function(){var e=this.options;this.element.removeClass("wijmo-wijev wijmo-wijevcal "+e.wijCSS.widget+" "+e.wijCSS.helperReset),n(window).unbind("resize."+this.wijevcalnamespacekey),this._unbindEvents(),this.element.empty(),this.wijevcalnamespacekey=null,this._uidPref=null,this._isUpdating=null,this._resolveDayApptConflictsTimeout=null,this._pendingRedrawActiveView=null,this._listViewDetailsInit=null,this._dayViewDetailsInit=null,this._eventsAttached=null,this.statusbarEventsAdded=null,this._dataView=null,this._eventsView=null,this._eventsDataById=null,this._calendarsById=null,this._dayViewCache=null,this._templateDayColumn=null,this._templateDayHeader=null,this._dayViewScrollToEvent=null,this._maxAllDayEventCount=null,this._dayColumnsToResolve=null,this._dayColumnResolveIdx=null,this.logDialog=null,this.logPanel=null,this._editCalendarDialog=null,this._editEventDialog=null,this._renderAgendaEventsTimeoutId=null,this.__targetAppt=null,this._isApptResize=null,this.__startApptH=null,this.__startApptY=null,this.__startClientY=null,this._apptDragResizeFlag=null,this._apptMovedFlag=null,this._movedFromTimeInervalApptElem=null,this.__targetApptChanged=null,this._defferObjs=null,this._setOptionCallbacks=null,this._chromeLoadDataDeffer=null,n.wijmo.wijevcal.prototype.options.eventsData=[]},t.prototype.deleteCalendar=function(e,t,r){var i,s=this.options.calendars,o=e.id||e,u=!1,a,f,l,c=this;for(i=0;i<s.length;i+=1)if(s[i].id===o){u=!0,e=s[i];if(!this._trigger("beforeDeleteCalendar",null,{data:e}))return!1;delete this._calendarsById[e.id],s.splice(i,1);break}if(!u)for(i=0;i<s.length;i+=1)if(s[i].name===o){u=!0,e=s[i];if(!this._trigger("beforeDeleteCalendar",null,{data:e}))return!1;delete this._calendarsById[e.id],s.splice(i,1);break}if(!u)return this.status("Calendar with id/name '"+o+"' not found."),!1;this.showLoadingLabel(this.localizeString("activityDeletingCalendar","Deleting calendar...")),a=function(n){c.status("Calendar '"+e.name+"' deleted."),c._onCalendarsChanged(),c.hideLoadingLabel(),t&&t(n)},f=function(t){c.status("Unable to delete calendar '"+e.name+"': "+t),c.hideLoadingLabel(),r&&r(t)};if(this.options.dataStorage.deleteCalendar)this.options.dataStorage.deleteCalendar(e,a,f);else if(this.options.webServiceUrl){try{l=this._jsonStringify(e)}catch(p){this.status("Unable to prepare calendar data for server. "+p,"error"),f("Unable to prepare calendar data for server. "+p);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteCalendar&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+l,success:a,error:f})}else h("DELETE FROM calendars WHERE id='"+e.id+"'",[],a,f)},t.prototype.addCalendar=function(e,t,r){var i,s,o,u=this,a=!1;if(!this._trigger("beforeAddCalendar",null,{data:e,prevData:e.prevData||{}})){if(e.prevData)for(s in e.prevData)e.prevData.hasOwnProperty(s)&&(e[s]=e.prevData[s]);return!1}e.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,e.id="dynid"+this._dynIdCounter+"ts"+(new Date).getTime()),n.each(u.options.calendars,function(t,n){if(e.name===n.name)return a=!0,!1});if(a)return;this.showLoadingLabel(this.localizeString("activityCreatingCalendar","Creating calendar...")),i=function(n){if(u._handleServerError(n)){o(n);return}u._readUpdatedServerDataIfAny(n,e),u._calendarsById[e.id]?u.status("Calendar '"+e.name+"' added."):(u.options.calendars.push(e),u._calendarsById[e.id]=e,u.status("Calendar '"+e.name+"' added.")),e.prevData=u._cloneObj(e),u._onCalendarsChanged(),u.hideLoadingLabel(),t&&t(n)},o=function(t){u.status("Unable to add calendar '"+e.name+"': "+t),u.hideLoadingLabel(),r&&r(t)};if(this.options.dataStorage.addCalendar)this.options.dataStorage.addCalendar(e,i,o);else if(this.options.webServiceUrl){try{s=this._jsonStringify(e)}catch(f){this.status("Unable prepare calendar data for server."+f,"error"),o("Unable to prepare calendar data for server."+f);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addCalendar&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+s,success:i,error:o})}else h("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[e.id,e.name,e.location,e.description,e.color,e.tag],i,o)},t.prototype.updateCalendar=function(e,t,r){var i,s,o,u=this;if(!this._trigger("beforeUpdateCalendar",null,{data:e,prevData:e.prevData||{}})){if(e.prevData)for(s in e.prevData)e.prevData.hasOwnProperty(s)&&(e[s]=e.prevData[s]);return!1}e.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,e.id="dynid"+this._dynIdCounter+"ts"+(new Date).getTime()),this.showLoadingLabel(this.localizeString("activityUpdatingCalendar","Updating calendar...")),i=function(r){var i=!1,s=u.options.visibleCalendars;if(u._handleServerError(r)){o(r);return}u._readUpdatedServerDataIfAny(r,e),u._calendarsById[e.id]?(n.each(s,function(t,n){if(n===e.prevData.name)return s[t]=e.name,!1}),u.status("Calendar '"+e.name+"' updated.")):(n.each(u.options.calendars,function(t,n){if(e.name===n.name)return i=!0,!1}),i||(u.options.calendars.push(e),u._calendarsById[e.id]=e,u.status("Calendar '"+e.name+"' added."))),e.prevData=u._cloneObj(e),u._onCalendarsChanged(),u.hideLoadingLabel(),t&&t(r)},o=function(t){u.status("Unable to update calendar '"+e.name+"': "+t),u.hideLoadingLabel(),r&&r(t)};if(this.options.dataStorage.updateCalendar)this.options.dataStorage.updateCalendar(e,i,o);else if(this.options.webServiceUrl){try{s=this._jsonStringify(e)}catch(a){this.status("Unable prepare calendar data for server. "+a,"error"),o("Unable to prepare calendar data for server. "+a);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateCalendar&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+s,success:i,error:o})}else h("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[e.id,e.name,e.location,e.description,e.color,e.tag],i,o)},t.prototype._initEventData=function(e){return n.extend({allday:!1,location:null,subject:null,description:null,color:null,tag:null},e)},t.prototype.addEvent=function(e,t,r){var i,o,u,a=this;if(!this._trigger("beforeAddEvent",null,{data:e,prevData:e.prevData||{}})){if(e.prevData)for(u in e.prevData)e.prevData.hasOwnProperty(u)&&(e[u]=e.prevData[u]);return!1}e.id||(this._dynIdCounter||(this._dynIdCounter=0),this._dynIdCounter+=1,e.id=s()),e.calendar||(e.calendar="Default"),this.showLoadingLabel(this.localizeString("activityCreatingEvent","Creating event...")),o=function(t){a.hideLoadingLabel(),a.status("Unable to add event '"+e.subject+"': "+t,"error");if(e.prevData)for(u in e.prevData)e.prevData.hasOwnProperty(u)&&(e[u]=e.prevData[u]);r&&r(t)},i=function(n){if(a._handleServerError(n)){o(n);return}a._readUpdatedServerDataIfAny(n,e),!a._eventsDataById[e.id]||e.recurrenceState==="exception"?(a._storeEventWithSort(e),a.status("Event '"+e.subject+"' added.")):a.status("Event '"+e.subject+"' added."),e.prevData=a._cloneObj(e),a._onEventsDataChanged(),a.hideLoadingLabel(),t&&t(n)};if(this.options.dataStorage.addEvent)this.options.dataStorage.addEvent(e,i,o);else if(this.options.webServiceUrl){try{u=this._jsonStringify(e)}catch(l){this.status("Unable prepare event data for server. "+l,"error"),o("Unable to prepare event data for server. "+l);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addEvent&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+u,success:i,error:o})}else{e=a._initEventData(e);if(!f&&!window.openDatabase){i.call(this,{rowsAffected:0,rows:[e]});return}h("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[e.id,e.calendar,e.subject,e.location,e.start.getTime(),e.end.getTime(),e.description,e.color,e.allday,this._serializeProperties(e),e.tag],i,o)}},t.prototype._storeEventWithSort=function(e){var t=this.options.eventsData,n,r;this._eventsDataById[e.id]=e;if(!t)return;for(n=0,r=t.length;n<r;n+=1){if(t[n].start>e.start){t.splice(n,0,e);return}if(t[n].start.getTime()===e.start.getTime()&&t[n].subject>e.subject){t.splice(n,0,e);return}}t.push(e)},t.prototype._readUpdatedServerDataIfAny=function(e,t){var n=null,r;if(typeof e=="string"&&e.indexOf("update:")===0){e=e.toString().substr("update:".length);try{n=this._jsonParse(e)}catch(i){this.status("Unable to read updated server data. "+i,"warning")}if(n)for(r in n)n[r]&&(t[r]=n[r])}},t.prototype.updateEvent=function(e,t,r){var i,s,o,u=this;if(!this._trigger("beforeUpdateEvent",null,{data:e,prevData:e.prevData||{}})){if(e.prevData)for(o in e.prevData)e.prevData.hasOwnProperty(o)&&(e[o]=e.prevData[o]);return this._updateAppointmentVisual(e),!1}e.calendar||(e.calendar="Default"),this.showLoadingLabel(this.localizeString("activityUpdatingEvent","Updating event...")),s=function(t){u.hideLoadingLabel(),u.status("Unable to update event '"+e.subject+"': "+t,"error");if(e.prevData)for(o in e.prevData)e.prevData.hasOwnProperty(o)&&(e[o]=e.prevData[o]);u._updateAppointmentVisual(e),r&&r(t)};if(!e.id){s("id is empty");return}if(e.recurrenceState==="exception"||e.recurrenceState==="occurrence"){if(!this._eventsDataById[e.parentRecurrenceId]){s("Unable to find master event for event with id:"+e.id);return}if(e.recurrenceState==="occurrence")return this.log(this._formatString("[updateEvent->addEvent] recurrenceState for event {0} changed to 'exception'.",e.id)),e.recurrenceState="exception",this.addEvent(e,t,r)}i=function(r){if(u._handleServerError(r)){s(r);return}u._readUpdatedServerDataIfAny(r,e),u._eventsDataById[e.id]?(n.extend(u._eventsDataById[e.id],e),u.status("Event '"+e.subject+"' updated.")):(u._storeEventWithSort(e),u.status("Event '"+e.subject+"' added.")),e.prevData=u._cloneObj(e),u._onEventsDataChanged(),u.hideLoadingLabel(),t&&t(r)};if(this.options.dataStorage.updateEvent)this.options.dataStorage.updateEvent(e,i,s);else if(this.options.webServiceUrl){try{o=this._jsonStringify(e)}catch(a){this.status("Unable prepare event data for server. "+a,"error"),s("Unable to prepare event data for server. "+a);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateEvent&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+o,success:i,error:s})}else{e=u._initEventData(e);if(!f&&!window.openDatabase){i.call(this,{rowsAffected:0,rows:[e]});return}h("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[e.id,e.calendar,e.subject,e.location,e.start.getTime(),e.end.getTime(),e.description,e.color,e.allday,this._serializeProperties(e),e.tag],i,s)}},t.prototype._serializeProperties=function(e){var t="",n={};n.parentRecurrenceId=e.parentRecurrenceId,n.recurrenceState=e.recurrenceState,n.recurrencePattern=e.recurrencePattern,n.color=e.color,n.allday=e.allday;try{t=this._jsonStringify(n)}catch(r){this.status("Unable save additional event properties. "+r,"error")}return t},t.prototype._deSerializeProperties=function(e,t){var n={},r;if(e){if(typeof e=="string")try{n=this._jsonParse(e)}catch(i){this.status("Unable to load additional event properties. "+i,"error");return}else n=e;n.parentRecurrenceId&&(t.parentRecurrenceId=n.parentRecurrenceId),n.recurrenceState&&(t.recurrenceState=n.recurrenceState),n.recurrencePattern&&(t.recurrencePattern=n.recurrencePattern),n.color&&(t.color=n.color),n.allday&&(t.allday=n.allday)}t&&t.recurrencePattern&&(r=t.recurrencePattern,r.patternStartDate=r.patternStartDate?new Date(r.patternStartDate):r.patternStartDate,r.startTime=r.startTime?new Date(r.startTime):r.startTime,r.endTime=r.endTime?new Date(r.endTime):r.endTime,r.startTime.getTime()>=r.endTime.getTime()&&(r.endTime=this._addMinutes(r.startTime,this.options.timeInterval)))},t.prototype._jsonStringify=function(e){var t;if(window.__JSONC1)t=window.__JSONC1.stringify(e);else{if(!window.JSON)throw"JSON not found.";t=JSON.stringify(e)}return t},t.prototype._jsonParse=function(e){var t,n,r;if(window.__JSONC1)t=window.__JSONC1.parse(e);else{if(!window.JSON)throw"JSON variable not found.";n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,r=/^\/Date\((d|-|.*)\)\/$/,t=window.JSON.parse(e,function(e,t){if(typeof t=="string"){var i=n.exec(t),s;if(i)return new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6]));i=r.exec(t);if(i)return s=i[1].split(/[-,.]/),new Date(+s[0])}return t})}return t},t.prototype.getOccurrences=function(e,t){var n=this.options,r=n.eventsData,i,s,o,u,a,f,l,c,h=100,p,d,v,m=[],g=[],y=[],b={};this._eventsDataById||(this._eventsDataById={});if(r)for(a=0,l=r.length;a<l;a+=1){i=r[a],this._eventsDataById[i.id]=i;if(i.recurrenceState==="master"){u=i.recurrencePattern,u.removedOccurrences&&(y=y.concat(u.removedOccurrences)),c=u.occurrences||h,p=u.patternStartDate||i.start,d=u.startTime||i.start,v=u.endTime||i.end;switch(u.recurrenceType){case"daily":for(f=0;f<c;f+=1)s=this._cloneObj(i),s.parentRecurrenceId=i.id,s.recurrenceState="occurrence",s.start=this._setTime(this._addDays(p,f),d),s.end=this._setTime(s.start,v,d),s.recurrencePattern=null,this._testIsEventInTimeInterval(s,e,t)&&(s.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",i.id,s.start),b[s.id]=s);break;case"workdays":for(f=0;f<c;f+=1){s=this._cloneObj(i),s.parentRecurrenceId=i.id,s.recurrenceState="occurrence",s.start=this._setTime(this._addDays(p,f),d);if(s.start.getDay()===0||s.start.getDay()===6)continue;s.end=this._setTime(s.start,v,d),s.recurrencePattern=null,this._testIsEventInTimeInterval(s,e,t)&&(s.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",i.id,s.start),b[s.id]=s)}break;case"weekly":for(f=0;f<c;f+=1)s=this._cloneObj(i),s.parentRecurrenceId=i.id,s.recurrenceState="occurrence",s.start=this._setTime(this._addDays(p,f*7),d),s.end=this._setTime(s.start,v,d),s.recurrencePattern=null,this._testIsEventInTimeInterval(s,e,t)&&(s.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",i.id,s.start),b[s.id]=s);break;case"monthly":for(f=0;f<c;f+=1)s=this._cloneObj(i),s.parentRecurrenceId=i.id,s.recurrenceState="occurrence",s.start=this._setTime(new Date(p),d),s.start.setMonth(s.start.getMonth()+f),s.end=this._setTime(s.start,v,d),s.recurrencePattern=null,this._testIsEventInTimeInterval(s,e,t)&&(s.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",i.id,s.start),b[s.id]=s);break;case"yearly":for(f=0;f<c;f+=1)s=this._cloneObj(i),s.parentRecurrenceId=i.id,s.recurrenceState="occurrence",s.start=this._setTime(new Date(p),d),s.start.setYear(s.start.getFullYear()+f),s.end=this._setTime(s.start,v,d),s.recurrencePattern=null,this._testIsEventInTimeInterval(s,e,t)&&(s.id=this._formatString("{0}_OCCR_{1:yyyy_MM_dd}",i.id,s.start),b[s.id]=s);break;case"monthlyNth":break;case"yearlyNth":}}else this._testIsEventInTimeInterval(i,e,t)&&(i.recurrenceState==="exception"?g.push(i):i.recurrenceState==="removed"?(y.push(i.id),this.log("[warning] Seems we found removed event inside events storage, id:"+i.id)):m.push(i))}for(a=0,l=g.length;a<l;a+=1)o=g[a],b[o.id]&&delete b[o.id],m.push(o),this._eventsDataById[o.id]=o;for(a=0,l=y.length;a<l;a+=1)b[y[a]]&&delete b[y[a]];for(a in b)s=b[a],m.push(s),this._eventsDataById[s.id]=s;return m},t.prototype._testIsEventInTimeInterval=function(e,t,n){return!t||!n?!0:e.start<n&&e.end>t?!0:!1},t.prototype.deleteEvent=function(e,t,r){e.id&&(e=e.id);var i=this._eventsDataById[e],s,o,u,a,l=this,c,p;if(!this._trigger("beforeDeleteEvent",null,{data:i}))return!1;this.showLoadingLabel(this.localizeString("activityDeletingEvent","Deleting event...")),a=function(e){l.status("Unable to delete event '"+(i?i.subject:"undefined")+"': "+e),l.hideLoadingLabel(),r&&r(e)};if(i.recurrenceState==="exception"||i.recurrenceState==="occurrence"){p=this._eventsDataById[i.parentRecurrenceId];if(p){this.log(this._formatString("[deleteEvent] removing {0} with id {1}. Updating master event with id {2}",i.recurrenceState,i.id,p.id)),p.recurrencePattern.removedOccurrences||(p.recurrencePattern.removedOccurrences=[]),p.recurrencePattern.removedOccurrences.push(i.id),this.updateEvent(p,t,r);if(i.recurrenceState==="occurrence"){this.log("No need to delete occurrence from store. Master event should be updated.");return}}else if(i.recurrenceState!=="exception")return a("Unable to find master event with id "+i.parentRecurrenceId),!1}i.recurrenceState==="master",u=function(n){if(l._handleServerError(n)){a(n);return}if(l._eventsDataById[i.id]){o=l.options.eventsData;if(o)for(s=0;s<o.length;s+=1)o[s].id===e&&o.splice(s,1);delete l._eventsDataById[i.id],l.status("Event '"+i.subject+"' deleted.")}else l.status("Event '"+i.subject+"' deleted.");i.prevData=l._cloneObj(i),l._onEventsDataChanged(),l.hideLoadingLabel(),t&&t(n)};if(this.options.dataStorage.deleteEvent)this.options.dataStorage.deleteEvent(i,u,a);else if(this.options.webServiceUrl){try{c=this._jsonStringify(i)}catch(d){this.status("Unable prepare event data for server. "+d,"error"),a("Unable prepare event data for server. "+d);return}n.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteEvent&timestamp="+(new Date).getTime(),dataType:"text",contentType:"application/json; charset=utf-8",type:"POST",data:"jsonData="+c,success:u,error:a})}else{if(!f&&!window.openDatabase){u.call(this,{rowsAffected:0,rows:[i]});return}h("DELETE FROM events WHERE id='"+e+"'",[],u,a)}},t.prototype.beginUpdate=function(){this._isUpdating=!0,this.showLoadingLabel("Updating...")},t.prototype.endUpdate=function(){this._isUpdating=!1,this._pendingRedrawActiveView&&this._redrawActiveView(),this.hideLoadingLabel()},t.prototype.goToEvent=function(e){e.id&&(e=e.id);var t=this.options,n,r,i=this.findEventById(e);switch(t.viewType){case"day":case"week":case"list":n=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(e)),n.length>0?(r=n.parents(".wijmo-wijev-scrollpanel"),r.length>0&&r.wijsuperpanel("scrollChildIntoView",n)):(this._dayViewScrollToEvent=i,this.goToDate(i.start));break;case"month":this.goToDate(i.start)}},t.prototype.isAllDayEvent=function(e){var t=e;return e.id||(t=this.findEventById(e)),t.allday?(t.end.getTime()-t.start.getTime())/864e5>=1?!0:!0:!1},t.prototype.goToDate=function(e){e=i(e);var t=this.options,n=e.getDay(),r,s,o,u,a,f=t.selectedDates;if(f&&f.length>0){if(this._isContainsDayDate(f,e))return;a=f[0],o=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),u=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),s=(o-u)/864e5;if(t.viewType==="week")for(r=0;r<f.length;r+=1)if(f[r].getDay()===n){s-=r;break}for(r=0;r<f.length;r+=1)f[r]=this._addDays(f[r],s);this._onSelectedDatesChanged()}else t.selectedDates=[e],this._onSelectedDatesChanged()},t.prototype.goToTime=function(e){var t=this.element.find(".wijmo-wijev-daycolumn .wijmo-wijev-timeinterval:first-child"),n=this.element.find(".wijmo-wijev-daycolumn .wijmo-wijev-timeinterval:last"),r=t.position().top,i=n.position().top+n.height(),s,o,u;u=86400,o=e.getHours()*60*60+e.getMinutes()*60,s=(i-r)*o/u+r,this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel("vScrollTo",s)},t.prototype.goToday=function(){this.goToDate(new Date)},t.prototype.goLeft=function(){var e,t=this.options,n=t.viewType,r=t.selectedDates;n==="month"?this.goToDate(this._addMonths(r[0],-1)):(e=-7,r.length===1&&(e=-1),this.goToDate(this._addDays(r[0],e)))},t.prototype.goRight=function(){var e,t=this.options,n=t.viewType,r=t.selectedDates;n==="month"?this.goToDate(this._addMonths(r[0],1)):(e=7,r.length===1&&(e=1),this.goToDate(this._addDays(r[0],e)))},t.prototype.refresh=function(){this.invalidate()},t.prototype.invalidate=function(){var e=this.options;switch(e.viewType.toLowerCase()){case"list":case"day":case"week":this._invalidateDayView();break;case"month":this._invalidateMonthView();break;default:}},t.prototype.showEditCalendarDialog=function(e){var t=this.options,n=t.calendars,r;if(!e)e={name:"",description:"",location:"",color:""};else if(!e.name)for(r=0;r<n.length;r+=1)if(n[r].name===e){e=n[r];break}this._ensureEditCalendarDialogCreated(),this._bindCalendarToDialog(e),this._editCalendarDialog.wijdialog("open")},t.prototype.showEditEventDialog=function(e,t,r){var i=this.options,s,o,u,a,f,l=t?n(t):r?n(r.target):null;this._ensureEditEventDialogCreated(),this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected"),l&&l.hasClass("wijmo-wijev-daylabel")&&(l=l.parent(".wijmo-wijev-allday-cell")),e?(this._editEventDialog._arrowTarget=l,e.prevData||(e.prevData=this._cloneObj(i)),e.recurrenceState==="occurrence"&&(s=this._eventsDataById[e.parentRecurrenceId],window.confirm(this._formatString(this.localizeString("promptOpenOccurrenceFormat","{2}  is recurring event. Do you want to open only this occurrence?"),e.start,e.end,e.subject,e.location))||(e=s))):(e={subject:this.localizeString("textNewEvent","New event")},e.isNewEvent=!0,l&&l.length>0?(this._editEventDialog._arrowTarget=l,l.addClass("ui-selected"),o=l.parent(".wijmo-wijev-daycolumn"),o.length<1&&(o=l.parent(".wijmo-wijev-dayheadercolumn")),o=o[0],l.hasClass("wijmo-wijev-allday-cell")?e.allday=!0:l.hasClass("wijmo-wijev-monthcellcontainer")?(o=l[0],e.allday=!0):e.allday=!1,o&&(u=this._parseDateFromClass(o.className,e.allday?null:l[0].className),e.start=u,e.allday?e.end=this._addMinutes(e.start,1440):e.end=this._addMinutes(e.start,i.timeInterval))):(e.start=new Date(i.selectedDates[0]),e.end=this._addMinutes(e.start,i.timeInterval))),this._trigger("beforeEditEventDialogShow",null,{data:e,targetCell:l})&&(f={of:l,my:"left center",at:"right center",offset:(l&&r?Math.round(r.offsetX-l.width()):10)+" 0",collision:"fit"},this._bindApptToDialog(e),this._editEventDialog.wijpopup("show",f),a=this._editEventDialog.data("wijmo-wijpopup"),a&&a._setPosition(f))},t.prototype._renderActiveView=function(){var e=this.options,t=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools");this.element.find(".wijmo-wijev-view").hide(),this.element.find(".wijmo-wijev-viewdetails").hide(),this.element.find(".wijmo-wijev-"+e.viewType.toLowerCase()+"-details").show();switch(e.viewType.toLowerCase()){case"day":case"week":case"list":this.element.find(".wijmo-wijev-view.wijmo-wijev-dayview").show(),this._renderDayView();break;case"month":this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview").show(),this._renderMonthView();break;default:}t.find(".wijmo-wijev-"+e.viewType.toLowerCase())[0].checked=!0,n().buttonset?t.buttonset("refresh"):n().checkboxradio&&t.find(":radio").checkboxradio("refresh")},t.prototype._redrawActiveView=function(){if(this._isUpdating){this._pendingRedrawActiveView=!0;return}switch(this.options.viewType.toLowerCase()){case"day":case"week":case"list":this._clearDayViewCache(),this._templateDayColumn=null}this._renderActiveView()},t.prototype._getDayColumnDates=function(e){var t=this.options,n=t.selectedDates,r,i,s;n||(n=[new Date]);if(t.viewType==="week"){r=t.selectedDate||n[0],s=t.firstDayOfWeek-r.getDay(),Math.abs(s)>6&&(s=r.getDay()-t.firstDayOfWeek),r=this._addDays(r,s),n=[];for(s=0;s<7;s+=1)i=this._addDays(r,s),n.push(i)}return e&&(t.selectedDates=n),n},t.prototype._renderDayView=function(){var e=this.options,t=0,r=1440,i,s,o,u=this._getDayColumnDates(!0),a,f,l,c,h=new Date,p,d=!1,v=this.element.find(".wijmo-wijev-dayview"),m,g,y,b=0,w;v.length===0&&(v=n('<div class="wijmo-wijev-view wijmo-wijev-dayview '+e.wijCSS.content+'">'+'<h3 class="wijmo-wijev-header-title">title'+"</h3>"+'<div class="wijmo-wijev-dayview-inner">'+'<div class="wijmo-wijev-headercontainer">'+'<div class="wijmo-wijev-sizer">'+'<div class="wijmo-wijev-gmtlabel">'+this.localizeString("labelAllDay","all-day")+"</div>"+"</div>"+"</div>"+'<div class="wijmo-wijev-scrollpanel">'+'<div class="wijmo-wijev-scrollcontent">'+'<div class="wijmo-wijev-timeruler">'+'<div class="wijmo-wijev-currenttime-indicator">'+'<div class="wijmo-wijev-currenttime-indicator-arrow '+e.wijCSS.stateError+'"></div>'+'<div class="wijmo-wijev-currenttime-indicator-line '+e.wijCSS.stateError+'"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"),v.appendTo(this.element.find(".wijmo-wijev-view-container")),this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel({hScroller:{scrollBarVisibility:"hidden"},animationOptions:{disabled:!0}})),v.removeClass("wijmo-wijev-weekview wijmo-wijev-listview"),v.addClass("wijmo-wijev-"+e.viewType.toLowerCase()+"view"),m=this.element.find(".wijmo-wijev-headercontainer"),g=this.element.find(".wijmo-wijev-scrollcontent"),y=g.find(".wijmo-wijev-timeruler");if(!this._templateDayColumn){y.find(".wijmo-wijev-timerulerinterval").remove(),i='<div class="wijmo-wijev-daycolumn">',w=!0;while(t<r)s="wijmo-wijev-timeinterval "+e.wijCSS.content+" wijmo-wijev-minute-"+t,w&&(s+=" wijmo-wijev-oddrow"),w=!w,o="wijmo-wijev-timerulerinterval "+e.wijCSS.content+" wijmo-wijev-minute-"+t,i+='<div class="'+s+'" style="height: '+e.timeIntervalHeight+'px"></div>',t+=e.timeInterval,b+=e.timeInterval,b>=e.timeRulerInterval&&(s+=" wijmo-wijev-timeinterval-hourstart",o+=" wijmo-wijev-timerulerinterval-hourstart",y.append(n('<div class="'+o+'" style="height:'+b/e.timeInterval*e.timeIntervalHeight+'px">'+this._formatString(e.timeRulerFormat,new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,t-b))+"</div>")),b=0);i+="</div>",this._templateDayColumn=n(i),this._templateDayHeader=n('<div class="wijmo-wijev-dayheadercolumn '+e.wijCSS.content+'">'+'<div class="wijmo-wijev-allday-cell '+e.wijCSS.content+'">'+'<div class="wijmo-wijev-daylabel">3 Monday</div>'+"</div>"+"</div>")}m.find(".wijmo-wijev-dayheadercolumn").remove(),g.find(".wijmo-wijev-daycolumn").remove();for(a=0,p=u.length;a<p;a+=1)c=u[a],f=this._getCachedDayHeader(c),l=this._getCachedDayColumn(c),f?(f=n(f),f.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(c))):(f=this._templateDayHeader.clone(!0),l=this._templateDayColumn.clone(!0),f.addClass(this._dayDateToCssClass(c)),f.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(c)),l.addClass(this._dayDateToCssClass(c)),d?d=!1:(l.addClass("wijmo-wijev-leftborder"),f.addClass("wijmo-wijev-leftborder")),this._compareDayDates(c,h)===0&&(l.addClass("wijmo-wijev-today "+e.wijCSS.stateHighlight),l.addClass("wijmo-wijev-leftborder"),l.addClass("wijmo-wijev-rightborder"),f.addClass("wijmo-wijev-today").find(".wijmo-wijev-allday-cell").addClass(e.wijCSS.stateHighlight),f.addClass("wijmo-wijev-leftborder"),f.addClass("wijmo-wijev-rightborder"),d=!0),a===p-1&&(l.addClass("wijmo-wijev-rightborder"),f.addClass("wijmo-wijev-rightborder"))),m.append(f),g.append(l);this._invalidateDayView(),this._renderDayViewAppointments()},t.prototype._getCachedDayHeader=function(e){var t=null;return this._dayViewCache&&this._dayViewCache[e]&&(t=this._dayViewCache[e].h),t},t.prototype._getCachedDayColumn=function(e){var t=null;return this._dayViewCache&&this._dayViewCache[e]&&(t=this._dayViewCache[e].c),t},t.prototype._storeDayCache=function(e,t,n){this._dayViewCache||(this._dayViewCache={}),this._dayViewCache[e]={h:t,c:n}},t.prototype._clearViewsCache=function(){this._clearDayViewCache(),this._clearListViewCache()},t.prototype._clearDayViewCache=function(){this._dayViewCache={}},t.prototype._clearListViewCache=function(){var e=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container .wijmo-wijsuperpanel-templateouterwrapper");e[0]||(e=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container .wijmo-wijsuperpanel-contentwrapper-touch")),e.data("wijevcal_agenda_initialized",!1),e.data("wijevcal_agenda_loadedeventscount",0)},t.prototype._invalidateDayView=function(e){var t=this.element.find(".wijmo-wijev-headercontainer"),r=this.element.find(".wijmo-wijev-scrollcontent"),i=r.find(".wijmo-wijev-timeruler"),s=t.find(".wijmo-wijev-dayheadercolumn"),o=r.find(".wijmo-wijev-daycolumn"),u=this.options.viewType.toLowerCase(),a,f,l,c,h,p,d,v,m=i.outerWidth(),g,y,b,w,E;this._updateHeaderTitleText(),f=this.element.find(".wijmo-wijev-view.wijmo-wijev-"+u+"view .wijmo-wijev-header-title"),a=f.is(":visible")?f.outerHeight(!0):0,this._invalidateView(),this._maxAllDayEventCount||(this._maxAllDayEventCount=0),h=t.find(".wijmo-wijev-dayheadercolumn .wijmo-wijev-appointment").outerHeight(!0),h||(h=17),p=t.find(".wijmo-wijev-daylabel").outerHeight(!0),d=0;for(g=0;g<s.length;g+=1)v=n(s[g]).find(".wijmo-wijev-allday-cell .wijmo-wijev-appointment").length,v>d&&(d=v);c=h*d+p+h,t.outerHeight(c+Math.round(h/2)),t.find(".wijmo-wijev-allday-cell").outerHeight(c),l=this.element.find(".wijmo-wijev-view").width(),y=l-m,y-=18,b=this.element.find(".wijmo-wijev-view").innerHeight()-t.outerHeight(!0)-a,w=Math.floor(y/o.length),t.outerWidth(l),r.outerWidth(l),s.outerWidth(w),o.outerWidth(w),this._invalidateCurrentTimeIndicator(),E=this.element.find(".wijmo-wijev-scrollpanel"),E.outerWidth(l),E.outerHeight(b),this._refreshSuperPanel(E);switch(u){case"day":this._updateDayViewDetails();break;case"list":this._updateListViewDetails()}},t.prototype._refreshSuperPanel=function(e){(!n.support.isTouchEnabled||!n.support.isTouchEnabled())&&this._isIE8()?e.wijsuperpanel("paintPanel",!0):e.wijsuperpanel("refresh")},t.prototype._updateDayViewDetails=function(){var e=this.options,t=e.selectedDate,r=this.element.find(".wijmo-wijev-leftpane"),i=r.find(".wijmo-wijev-agenda-container");this._dayViewDetailsInit||(this._dayViewDetailsInit=!0,this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar(n.extend(!0,{culture:e.culture,cultureCalendar:e.cultureCalendar,titleFormat:this.localizeString("calendarTitleFormat","MMMM yyyy"),toolTipFormat:this.localizeString("calendarToolTipFormat","dddd, MMMM dd, yyyy"),showTitle:!1,showOtherMonthDays:!1,showWeekNumbers:!1,selectionMode:{day:!0,days:!1},selectedDatesChanged:n.proxy(function(t,n){n.dates&&!e.disabled&&this.goToDate(n.dates[0])},this),nextTooltip:this.localizeString("calendarNextTooltip","Next"),prevTooltip:this.localizeString("calendarPrevTooltip","Previous")},e.calendar)),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-agenda-container").wijsuperpanel()),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("option","displayDate",t).wijcalendar("unSelectAll").wijcalendar("selectDate",t),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("refresh"),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-monthday-label").html(t.getDate()),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-fulldate-label").html(this._formatString(this.localizeString("dayDetailsLabelFulldateFormat","{0:dddd, MMMM d}"),t)),this.element.find(".wijmo-wijev-day-details .wijmo-wijev-year-label").html(this._formatString(this.localizeString("dayDetailsLabelYearFormat","{0:yyyy}"),t)),this._updateAgendaList(this.element.find(".wijmo-wijev-day-details  .wijmo-wijev-agenda-container"),t,t,!1)},t.prototype._listViewAgendaScrolled=function(e,t){var r=this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container"),i=r.wijsuperpanel("option","vScroller"),s,o=i.scrollValue,u=i.scrollMax-i.scrollLargeChange*2,a=e.type,f=!1,l;a==="wijsuperpanelscroll"?(l=t.position,s=r.find(".wijmo-wijsuperpanel-contentwrapper-touch"),r.height()+l>=s.height()&&(f=!0)):s=r.find(".wijmo-wijsuperpanel-templateouterwrapper"),(o>=u||f)&&s.data("wijevcal_agenda_loadnextpage")&&(s.data("wijevcal_agenda_loadnextpage",!1),s.find(".wijmo-wijev-agenda-more-events").show().html(this.localizeString("agendaLoadingMoreEvents","Loading more events...")),this._renderAgendaEventsTimeoutId&&(clearTimeout(this._renderAgendaEventsTimeoutId),this._renderAgendaEventsTimeoutId=null),this._renderAgendaEventsTimeoutId=setTimeout(n.proxy(function(){this._renderAgendaEventsTimeoutId=null,this._renderAgendaEvents(s,null,null,!0,r),s.find(".wijmo-wijev-agenda-more-events").remove()},this),100))},t.prototype._updateListViewDetails=function(){this._listViewDetailsInit||(this._listViewDetailsInit=!0,n.support.isTouchEnabled&&n.support.isTouchEnabled()?this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container").wijsuperpanel({scroll:n.proxy(this._listViewAgendaScrolled,this)}):this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container").wijsuperpanel({scrolled:n.proxy(this._listViewAgendaScrolled,this)})),this._updateAgendaList(this.element.find(".wijmo-wijev-list-details  .wijmo-wijev-agenda-container"),null,null,!0)},t.prototype._updateAgendaList=function(e,t,r,i){var s=this.element.find(".wijmo-wijev-leftpane"),o=e;e.outerHeight(s.innerHeight()-e[0].offsetTop),o.find(".wijmo-wijsuperpanel-templateouterwrapper").length>0&&(o=o.find(".wijmo-wijsuperpanel-templateouterwrapper")),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(o=o.find(".wijmo-wijsuperpanel-contentwrapper-touch"));if(i&&o.data("wijevcal_agenda_initialized")){e.data("wijmo-wijsuperpanel")&&this._refreshSuperPanel(e);return}o.data("wijevcal_agenda_initialized",!0),o.data("wijevcal_agenda_loadedeventscount",0),o.html(""),this._renderAgendaEvents(o,t,r,i,e)},t.prototype._isIE8=function(){return n.browser.msie&&n.browser.version&&parseFloat(n.browser.version)<=8},t.prototype._renderAgendaEvents=function(e,t,r,s,o){var u=this._eventsView,a,f,l,c,h=0,p,d="",v="",m=null,g=null,y=this.options,b,w,E=100,S=this,x=e.data("wijevcal_agenda_loadedeventscount");t&&(m=i(t),g=this._addDays(i(r),1),c=(g.getTime()-m.getTime())/864e5);if(u){l=u.length<E+x||!s?u.length:E+x,e.data("wijevcal_agenda_loadedeventscount",l);if(!m){v="";for(f=x;f<l;f+=1){a=u[f];if(f===x||b.getDate()!==a.start.getDate())b=a.start,f!==0&&(d+='<ul class="wijmo-wijev-agenda-list">'+v+"</ul>",d+="</div>"),d+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(b)+'">',s&&(d+=this._renderAgendaDayHeader(b)),v="";v+=this._renderAgendaAppointmentVisual(a),p+=1,f===l-1&&(d+='<ul class="wijmo-wijev-agenda-list">'+v+"</ul>",d+="</div>",l<u.length?(d+='<div class="wijmo-wijev-agenda-more-events">',d+=this._formatString(this.localizeString("agendaMoreEventsFormat","More events ({0})..."),u.length-l),d+="<div>",e.data("wijevcal_agenda_loadnextpage",!0)):e.data("wijevcal_agenda_loadnextpage",!1))}}else while(h<c){b=this._addDays(m,h),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),w=new Date(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59),p=0,v="";for(f=x;f<l;f+=1)a=u[f],a.start<g&&a.end>m&&a.start<w&&a.start>=b&&(v+=this._renderAgendaAppointmentVisual(a),p+=1);v!==""&&(d+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(b)+'">',s&&(d+=this._renderAgendaDayHeader(b)),d+='<ul class="wijmo-wijev-agenda-list">'+v+"</ul>",d+="</div>"),h+=1}n(d).appendTo(e)}e.on("click",".wijmo-wijev-agenda-event",n.proxy(this._onAgendaEventClick,this)).on("mouseover",".wijmo-wijev-agenda-event",function(e){if(S.options.disabled)return;n(this).addClass(y.wijCSS.stateHover)}).on("mouseout",".wijmo-wijev-agenda-event",function(e){if(S.options.disabled)return;n(this).removeClass(y.wijCSS.stateHover).removeClass(y.wijCSS.stateActive)}).on("mousedown",".wijmo-wijev-agenda-event",function(){if(S.options.disabled)return;n(this).addClass(y.wijCSS.stateActive)}).on("mouseup",".wijmo-wijev-agenda-event",function(){if(S.options.disabled)return;n(this).removeClass(y.wijCSS.stateActive)}),o.data("wijmo-wijsuperpanel")&&this._refreshSuperPanel(o)},t.prototype._renderAgendaDayHeader=function(e){var t='<div class="wijmo-wijev-agenda-header '+this.options.header+'">'+'<div class="wijmo-wijev-weekday">'+this._formatString("{0:dddd}",e)+"</div>"+'<div class="wijmo-wijev-date">'+this._formatString(this.localizeString("agendaHeaderFullDateFormat","{0:MMMM d, yyyy}"),e)+"</div>"+"</div>";return t},t.prototype._onAgendaEventClick=function(e){if(this.options.disabled)return;var t=n(e.target);t.hasClass("wijmo-wijev-agenda-event")||(t=t.parent(".wijmo-wijev-agenda-event")),t.length>0&&this.goToEvent(this._parseEventIdFromClass(t[0].className))},t.prototype._renderAgendaAppointmentVisual=function(e){var t='<li class="wijmo-wijev-agenda-event '+this._dayDateToCssClass(e.start)+" "+this._eventIdToCssClass(e.id)+" "+this.options.wijCSS.stateDefault+" "+this.options.wijCSS.helperClearFix+'">'+'<div class="wijmo-wijev-agenda-event-color '+"wijmo-wijev-event-color-"+(e.color||"default")+'">'+"<div></div>"+"</div>"+'<div class="wijmo-wijev-agenda-event-title">'+e.subject+"</div>"+'<div class="wijmo-wijev-agenda-event-time">'+(this.isAllDayEvent(e)?this.localizeString("labelAllDay","all-day"):this._formatString(this.localizeString("agendaTimeFormat","{0:hh:mm tt} to {1:hh:mm tt}"),e.start,e.end))+"</div>"+"</li>";return t},t.prototype._invalidateCurrentTimeIndicator=function(){var e=this.element.find(".wijmo-wijev-timeruler .wijmo-wijev-currenttime-indicator"),t=new Date,n=this.options;t=t.getMinutes()+t.getHours()*60,e.css("top",t/n.timeInterval*n.timeIntervalHeight)},t.prototype._onEventsDataChanged=function(){this._clearViewsCache(),this._prepareEventsForView(),this._renderActiveView(),this._trigger("eventsDataChanged",null,{eventsData:this.options.eventsData})},t.prototype._onCalendarsChanged=function(){this._trigger("calendarsChanged",null,{calendars:this.options.calendars})},t.prototype._renderDayViewAppointments=function(){var e=this._eventsView,t,r,i,s,o,u=this.element.find(".wijmo-wijev-headercontainer"),a=this.element.find(".wijmo-wijev-scrollcontent"),f=u.find(".wijmo-wijev-dayheadercolumn"),l=a.find(".wijmo-wijev-daycolumn"),c,h,p=this.options,d=this._getDayColumnDates(),v=d[0],m,g,y,b,w,E,S,x,T,N=[],C;m=d[d.length-1],m=new Date(m.getFullYear(),m.getMonth(),m.getDate(),23,59,59);if(e)for(i=0,o=d.length;i<o;i+=1)if(!l[i]._cached){c=d[i],c=new Date(c.getFullYear(),c.getMonth(),c.getDate()),h=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59);for(r=0,s=e.length;r<s;r+=1)t=e[r],t.start<m&&t.end>v&&t.start<h&&t.end>c&&(this.isAllDayEvent(t)?(g=!0,y=n(this._getAllDayEventMarkup(t)),n(f[i]).find(".wijmo-wijev-allday-cell").append(y)):(b=t.start,w=t.end,b<c&&(b=c),w>h&&(w=h),E=(b-c)/1e3/60,S=(w-c)/1e3/60,x=Math.round(E*p.timeIntervalHeight/p.timeInterval),T=Math.round(S*p.timeIntervalHeight/p.timeInterval),y=n(this._getEventMarkup(t)),y.css("top",x),y.outerHeight(T-x),n(l[i]).append(y)));this._storeDayCache(d[i],f[i],l[i]),l[i]._cached=!0,N.push(l[i])}else N.push(l[i]);this._dayColumnsToResolve=N,this._dayColumnResolveIdx=0,this._resolveDayApptConflictsTimeout||(clearTimeout(this._resolveDayApptConflictsTimeout),this._resolveDayApptConflictsTimeout=null),this._resolveDayApptConflictsTimeout=setTimeout(n.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1),g&&this._invalidateDayView(!0),this._dayViewScrollToEvent&&(y=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(this._dayViewScrollToEvent.id)),y.length>0&&(C=y.parents(".wijmo-wijev-scrollpanel"),C.length>0&&C.wijsuperpanel("scrollChildIntoView",y)))},t.prototype._getAllDayEventMarkup=function(e){return'<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(e.id)+'">'+'<div class="'+" wijmo-wijev-colordot wijmo-wijev-event-color-"+(e.color||"default")+'"></div>'+'<div class="wijmo-wijev-event-title">'+e.subject+"</div>"+"</div>"},t.prototype._getEventMarkup=function(e){return'<div class="wijmo-wijev-appointment wijmo-wijev-event-color-'+(e.color||"default")+" "+this._eventIdToCssClass(e.id)+'">'+'<div class="wijmo-wijev-content"><div class="wijmo-wijev-title">'+this._formatString(this.options.eventTitleFormat,e.start,e.end,e.subject,e.location,"",e.description)+"</div></div>"+'<div class="wijmo-wijev-resizer">'+'<div class="'+this.options.wijCSS.icon+" "+this.options.wijCSS.iconHGripSolid+'">'+"&nbsp;</div></div>"+"</div>"},t.prototype._resolveDayViewAppointmentConflictsCb1=function(){this._resolveDayApptConflictsTimeout=null;if(!this._dayColumnsToResolve||this._dayColumnResolveIdx>=this._dayColumnsToResolve.length)return;this._resolveDayViewAppointmentConflicts(this._dayColumnsToResolve[this._dayColumnResolveIdx]),this._dayColumnResolveIdx=this._dayColumnResolveIdx+1,setTimeout(n.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1)},t.prototype._resolveDayViewAppointmentConflicts=function(e){var t=n(e).find(".wijmo-wijev-appointment"),r,i=[],s,o,u,a,f,l,c,h,p=0;r=n(t).toArray().sort(this._sortOffsetTop);for(o=0,l=t.length;o<l;o+=1){if(o<p)continue;a=r[o];for(u=o;u<l;u+=1)if(u!==o){f=r[u];if(!(a.offsetTop<f.offsetTop+f.offsetHeight&&a.offsetTop+a.offsetHeight>f.offsetTop))break;i[o]||(i[o]=[a]),i[o].push(f),f.offsetTop+f.offsetHeight>a.offsetTop+a.offsetHeight&&(a=f)}p=u}for(o=0,l=i.length;o<l;o+=1){s=i[o];if(s){c=s.length,s.sort(this._sortOffsetTop);for(u=0;u<c;u+=1)a=s[u],a.style.width=Math.floor(100/c)+"%",h=Math.floor(100*u/c),a.style.marginLeft=h+"%",a.style.zIndex=h}}},t.prototype._sortOffsetTop=function(e,t){return e.offsetTop<t.offsetTop?-1:e.offsetTop>t.offsetTop?1:0},t.prototype._onDayViewTimeIntervalClick=function(e){if(this.options.disabled)return;if(this.options.readOnly)return;this.showEditEventDialog(null,e.target,e)},t.prototype._onDayViewAllDayCellClick=function(e){if(this.options.disabled)return;if(this.options.readOnly)return;var t=n(e.target);if(t.hasClass("wijmo-wijev-appointment")||t.parents(".wijmo-wijev-appointment").length>0)return;if(t.hasClass("wijmo-wijev-daylabel")||t.parents(".wijmo-wijev-daylabel").length>0)return;this.showEditEventDialog(null,e.target,e)},t.prototype._onMonthViewDayLabelClick=function(e){if(this.options.disabled)return;var t=n(e.target).parents(".wijmo-wijev-monthcellcontainer"),r=this.options,i;t.length<1&&(t=n(e.target).parents(".wijmo-wijev-dayheadercolumn")),t[0]&&(i=this._parseDateFromClass(t[0].className),r.viewType!=="day"&&(r.viewType="day",this._onViewTypeChanged()),r.selectedDates=[new Date(i)],this._onSelectedDatesChanged())},t.prototype._onMonthViewCellClick=function(e){if(this.options.disabled)return;var t=n(e.target).parent(".wijmo-wijev-monthcellcontainer");if(this.options.readOnly)return;if(t.length<1)return;this.showEditEventDialog(null,t,e)},t.prototype._onAppointmentClick=function(e){var t=n(e.target),r;if(this.options.disabled)return;if(this.options.readOnly)return;if(this._apptDragResizeFlag)return;t.hasClass("wijmo-wijev-appointment")||(t=t.parents(".wijmo-wijev-appointment")),t.length>0&&(r=this.findEventById(t[0].className),this.showEditEventDialog(r,t,e))},t.prototype.findEventById=function(e){var t;if(e){t=e.indexOf("apptid_"),t!==-1&&(e=this._parseEventIdFromClass(e));if(this._eventsDataById)return this._eventsDataById[e]}return null},t.prototype._onMonthViewAppointmentMouseDown=function(e){if(this.options.disabled)return;if(this.options.readOnly)return;var t=n(e.target),r=t.hasClass("wijmo-wijev-appointment")?t:t.parents(".wijmo-wijev-appointment");e.preventDefault(),this.__targetAppt=r,n(document).bind("mouseup.tmp_wijevcal",n.proxy(this._onMonthViewAppointmentMouseUp,this)),this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellcontainer").bind("mouseover.tmp_wijevcal",n.proxy(this._onMonthViewCellMouseOver,this))},t.prototype._onDayViewAppointmentMouseDown=function(e){if(this.options.disabled)return;if(this.options.readOnly)return;var t=n(e.target),r=t.hasClass("wijmo-wijev-appointment")?t:t.parents(".wijmo-wijev-appointment"),i=t.hasClass("wijmo-wijev-resizer")||t.parents(".wijmo-wijev-resizer").length>0;if(this.options.disabled)return;this._isApptResize=i,e.preventDefault(),this._isApptResize?(this.__startApptH=r[0].offsetHeight,this.__startApptY=r[0].offsetTop):this.__startApptY=r[0].offsetTop,this.__startClientY=e.clientY,this.__targetAppt=r,n(document).bind("mousemove.tmp_wijevcal",n.proxy(this._onDayViewAppointmentMouseMove,this)),n(document).bind("mouseup.tmp_wijevcal",n.proxy(this._onDayViewAppointmentMouseUp,this)),n(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").bind("mouseover.tmp_wijevcal",n.proxy(this._onDayViewColumnMouseOver,this)),n(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").bind("mouseover.tmp_wijevcal",n.proxy(this._onDayViewAllDayMouseOver,this))},t.prototype._onDayViewAppointmentMouseMove=function(e){if(this.options.disabled)return;e.preventDefault();var t=e.clientY-this.__startClientY,n,r=this.options,i,s,o;e.ctrlKey||(t=Math.round(t/r.timeIntervalHeight)*r.timeIntervalHeight),t!==0&&!this._apptDragResizeFlag&&(this._apptDragResizeFlag=!0,this.__targetAppt.addClass("wijmo-wijev-dragging"),this.__targetAppt.css("width","100%").css("margin-left","0").css("z-index","1000")),this._apptDragResizeFlag&&(this._isApptResize?(i=this.__startApptH+t,i<0?(i=Math.abs(i),n=this.__startApptY-i,n>=0&&(this.__targetAppt.css("height",i),this.__targetAppt.css("top",n))):this.__targetAppt.css("height",i)):(n=this.__startApptY+t,n<0&&(n=0),this.__targetAppt.css("top",n),s=this.__targetAppt.offset().top,o=this.__targetAppt.parents(".wijmo-wijev-scrollpanel"),o.length>0&&o.wijsuperpanel("scrollChildIntoView",this.__targetAppt),this.__startApptY=this.__startApptY-(this.__targetAppt.offset().top-s)),this._onApptVisualDargOrResize(this.__targetAppt,this.findEventById(this.__targetAppt[0].className)))},t.prototype._onDayViewAppointmentMouseUp=function(e){if(this.options.disabled)return;this.__targetAppt&&this.__targetAppt.removeClass("wijmo-wijev-dragging"),n(document).unbind(".tmp_wijevcal"),n(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").unbind(".tmp_wijevcal"),n(this.element).find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").unbind(".tmp_wijevcal");if(this._apptDragResizeFlag||this._apptMovedFlag){var t=this.findEventById(this.__targetAppt[0].className);this._onApptVisualDargOrResize(this.__targetAppt,t),this._apptMovedFlag=!1,this._movedFromTimeInervalApptElem=null,this.updateEvent(t),window.setTimeout(n.proxy(function(){this.__targetAppt&&!this.__targetAppt.hasClass("wijmo-wijev-dragging")&&(this._apptDragResizeFlag=!1,this._resolveDayViewAppointmentConflicts(this.__targetAppt.parents(".wijmo-wijev-daycolumn")))},this),1)}},t.prototype._updateAppointmentVisual=function(e){var t=this.element.find(".wijmo-wijev-dayview ."+this._eventIdToCssClass(e.id)),n=this.options,r,s,o,u,a,f,l,c;t.length===1&&(this._addColorClass(t,e.color),t.find(".wijmo-wijev-title").html(this._formatString(n.eventTitleFormat,e.start,e.end,e.subject,e.location,"",e.description)),a=i(e.start),r=(e.start-a)/1e3/60,s=(e.end-a)/1e3/60,o=Math.round(r*n.timeIntervalHeight/n.timeInterval),u=Math.round(s*n.timeIntervalHeight/n.timeInterval),t.css("top",o),t.css("height",u-o),f=this._dayDateToCssClass(a),t.parents(".wijmo-wijev-daycolumn."+f).length!==1&&(l=t[0].parentNode,c=this.element.find(".wijmo-wijev-daycolumn."+f),l.removeChild(t[0]),t.appendTo(c)))},t.prototype._onApptVisualDargOrResize=function(e,t){if(this.options.disabled)return;var n=this.options,r=e[0].offsetTop,s=r+e[0].offsetHeight,o,u,a,f,l,c,h,p;e.parents(".wijmo-wijev-dayheadercolumn").length>0?p=e.parents(".wijmo-wijev-dayheadercolumn")[0]:p=e.parents(".wijmo-wijev-daycolumn")[0],h=this._parseDateFromClass(p.className,null),o=Math.round(r*n.timeInterval/n.timeIntervalHeight),u=Math.round(s*n.timeInterval/n.timeIntervalHeight),a=new Date(o*60*1e3+h.getTime()),f=new Date(u*60*1e3+h.getTime()),t&&(this._isApptResize?l=f:(c=t.end.getTime()-t.start.getTime(),l=new Date(a.getTime()+c)),t.allday=e.parents(".wijmo-wijev-dayheadercolumn").length>0,t.start=a,t.end=l,e.find(".wijmo-wijev-title").html(this._formatString(n.eventTitleFormat,t.start,t.end,t.subject,t.location,"",t.description)),!this._isApptResize&&l.getTime()!==f.getTime()&&e.css("height",Math.round((t.end-i(t.start))/1e3/60*n.timeIntervalHeight/n.timeInterval)-Math.round((t.start-i(t.start))/1e3/60*n.timeIntervalHeight/n.timeInterval)))},t.prototype._onDayViewColumnMouseOver=function(e){if(this.options.disabled)return;var t=n(e.target).parents(".wijmo-wijev-daycolumn"),r=this.__targetAppt.parents(".wijmo-wijev-daycolumn");if(t.length<1)return;if(r.length<1){r=this.__targetAppt.parents(".wijmo-wijev-dayheadercolumn");if(r.length<1)return;this._movedFromTimeInervalApptElem?(this.__targetAppt.replaceWith(this._movedFromTimeInervalApptElem),this.__targetAppt=n(this._movedFromTimeInervalApptElem),this._movedFromTimeInervalApptElem=null):this.__targetAppt.html(this._getEventMarkup(this.findEventById(this.__targetAppt[0].className)))}t[0].className!==r[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this._resolveDayViewAppointmentConflicts(r),this.__targetAppt.appendTo(t),this._apptMovedFlag=!0)},t.prototype._onMonthViewCellMouseOver=function(e){if(this.options.disabled)return;var t=n(e.target),r=t.hasClass("wijmo-wijev-monthcellcontainer")?t:t.parents(".wijmo-wijev-monthcellcontainer"),i=this.__targetAppt.parents(".wijmo-wijev-monthcellcontainer");if(r.length<1||i.length<1)return;r[0].className!==i[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this.__targetAppt.appendTo(r.find(".wijmo-wijev-monthcell")),this.__targetApptChanged=!0)},t.prototype._onMonthViewAppointmentMouseUp=function(){if(this.options.disabled)return;var e,t=this.__targetAppt.parents(".wijmo-wijev-monthcellcontainer")[0],r=this._parseDateFromClass(t.className,null),s;n(document).unbind(".tmp_wijevcal"),this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellcontainer").unbind(".tmp_wijevcal"),this.__targetApptChanged&&(this.__targetApptChanged=!1,e=this.findEventById(this.__targetAppt[0].className),s=(r.getTime()-i(e.start).getTime())/864e5,e.start=this._addDays(e.start,s),e.end=this._addDays(e.end,s),this.updateEvent(e))},t.prototype._onDayViewAllDayMouseOver=function(e){if(this.options.disabled)return;var t=n(e.target).parents(".wijmo-wijev-dayheadercolumn"),r=this.__targetAppt.parents(".wijmo-wijev-daycolumn"),i;if(t.length<1)return;r.length>0?(i=n(this._getAllDayEventMarkup(this.findEventById(this.__targetAppt[0].className))),this._movedFromTimeInervalApptElem=this.__targetAppt[0].cloneNode(!0),this.__targetAppt.replaceWith(i),this.__targetAppt=i):r=this.__targetAppt.parents(".wijmo-wijev-dayheadercolumn");if(r.length<1)return;t[0].className!==r[0].className&&(this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]),this._resolveDayViewAppointmentConflicts(r),this.__targetAppt.appendTo(n(t).find(".wijmo-wijev-allday-cell")),this._apptMovedFlag=!0)},t.prototype._renderMonthView=function(){var e=this.options,t=e.selectedDate,r=e.firstDayOfWeek,i=!1,s=!1,o,u,a,f=new Date,l,c,h=!1,p,d=["","","","","","",""],v,m,g=this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview"),y,b=e.dayHeaderFormat,w=e.firstRowDayHeaderFormat;t||(t=new Date),u=new Date(t.getFullYear(),t.getMonth(),1);while(u.getDay()!==parseInt(r))u=this._addDays(u,-1);a=new Date(t.getFullYear(),t.getMonth(),this._daysInMonth(t.getMonth(),t.getFullYear())),o=u,l=0,c=0;while(o<a||l<7){o>a&&(a=o),v="",p="wijmo-wijev-monthcellcontainer "+e.wijCSS.content+" "+this._dayDateToCssClass(o),s=o.getMonth()!==t.getMonth(),s&&(p+=" wijmo-wijev-othermonth"),h?h=!1:(p+=" wijmo-wijev-leftborder",l===6&&(p+=" wijmo-wijev-rightborder")),i=this._compareDayDates(o,f)===0,i&&(p+=" wijmo-wijev-today",p+=" wijmo-wijev-rightborder",h=!0),v+='<div class="'+p+'">',v+='<div class="wijmo-wijev-monthcellheader',s&&(v+=" "+e.wijCSS.prioritySecondary),i&&(v+=" "+e.wijCSS.stateHighlight),v+='">',i&&(v+='<span class="wijmo-wijev-todaylabel">'+this.localizeString("labelToday","Today")+"</span>"),c===0?v+=this._formatString(w,o):v+=this._formatString(b,o),v+="</div>",v+='<div class="wijmo-wijev-monthcell',s&&(v+=" "+e.wijCSS.prioritySecondary),i&&(v+=" "+e.wijCSS.stateHighlight),v+='"></div>',v+="</div>",d[l]=d[l]+v,l+=1,o=this._addDays(o,1);if(l>6){if(o>a)break;l=0,c+=1}}g.length===0&&(g=n('<div class="wijmo-wijev-view wijmo-wijev-monthview '+e.wijCSS.content+'">'+'<h3 class="wijmo-wijev-header-title">title'+"</h3>"+'<div class="wijmo-wijev-monthview-inner">'+"</div>"+"</div>"),g.appendTo(this.element.find(".wijmo-wijev-view-container"))),y=g.find(".wijmo-wijev-monthview-inner"),y.find(".wijmo-wijev-monthcolumn").remove(),o=u;for(m=0;m<7;m+=1)y.append('<div class="wijmo-wijev-monthcolumn">'+d[m]+"</div>"),o=this._addDays(o,1);this._invalidateMonthView(),this._renderMonthViewAppointments()},t.prototype._invalidateMonthView=function(){var e=this.element.find(".wijmo-wijev-monthview"),t=e.find(".wijmo-wijev-monthview-inner"),r=e.find(".wijmo-wijev-monthcolumn"),i=e.find(".wijmo-wijev-monthcellcontainer"),s=this.element.find(".wijmo-wijev-monthview .wijmo-wijev-header-title"),o,u,a,f,l,c,h,p;this._invalidateView();if(r.length<1)return;o=e.innerWidth(),u=e.innerHeight()-s.outerHeight(!0),t.outerWidth(o),t.outerHeight(u),o-=t.outerWidth(!0)-t.innerWidth(),u-=t.outerHeight(!0)-t.innerHeight(),a=Math.floor(o/r.length),r.outerWidth(a),p=o-a*r.length,p>0&&n(r[r.length-1]).outerWidth(a+p),h=n(r[0]).find(".wijmo-wijev-weekdayname").outerHeight(!0),h||(h=0),f=Math.floor((u-h)/n(r[0]).find(".wijmo-wijev-monthcellcontainer").length),i.height(f),l=n(i[0]).find(".wijmo-wijev-monthcellheader").outerHeight(!0),c=f-l,i.find(".wijmo-wijev-monthcell").outerHeight(c)},t.prototype._renderMonthViewAppointments=function(){var e=this._eventsView,t,r,i,s,o,u=this.element.find(".wijmo-wijev-monthcellcontainer"),a,f,l,c;if(e)for(i=0,o=u.length;i<o;i+=1){a=u[i],f=this._parseDateFromClass(a.className),l=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59);for(r=0,s=e.length;r<s;r+=1)t=e[r],t.start<l&&t.end>f&&(c=n('<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(t.id)+'">'+'<div class="'+" wijmo-wijev-colordot wijmo-wijev-event-color-"+(t.color||"default")+'"></div>'+'<div class="wijmo-wijev-event-title">'+t.subject+"</div>"+"</div>"),n(a).find(".wijmo-wijev-monthcell").append(c))}u.find(".wijmo-wijev-monthcell").each(n.proxy(function(e,t){var r=n(t),i=r.find(".wijmo-wijev-appointment"),s=r.outerHeight(),o=i.outerHeight(),u=i.length*o,a=0;u>s&&(i.each(function(e,t){e*o+o>s&&(t.style.display="none",a+=1)}),a>0&&r.find(".wijmo-wijev-monthcell-showmore").length<1&&r.append(n('<div class="wijmo-wijev-monthcell-showmore">'+this._formatString(this.localizeString("monthCellMoreEventsFormat","{0}  more..."),a)+"</div>")))},this))},t.prototype.log=function(e,t){},t.prototype._log=function(e,t){var r;this.logPanel&&(r=new Date,this.logPanel.prepend(n('<span class="'+(t?t:"wijmo-wijev-information")+'">'+"["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"] "+e+"</span><br/>")))},t.prototype._createLogPanel=function(){if(!this.logPanel){this.logDialog=n('<div title="Log"><div class="wijmo-wijev-log"></div></div>'),this.logDialog.appendTo(this.element);var e={};e[this.localizeString("buttonClearAll","Clear All")]=function(){n(this).find(".wijmo-wijev-log").html("")},e[this.localizeString("buttonClose","Close")]=function(){n(this).wijdialog("close")},this.logPanel=this.logDialog.wijdialog({captionButtons:{},buttons:e,width:600,height:420,position:["right","top"]}).find(".wijmo-wijev-log")}this.logDialog.wijdialog("open")},t.prototype.status=function(e,t){this.element.find(".wijmo-wijev-statusbar").html("<span class='"+(t?t:"wijmo-wijev-status")+"'>"+e+"</span>"),this.log(e,t?t:"wijmo-wijev-status"),this.statusbarEventsAdded||(this.statusbarEventsAdded=!0,this._initStatusbar())},t.prototype._invalidateView=function(){var e=this.element.find(".wijmo-wijev-rightpane"),t=this.element.find(".wijmo-wijev-leftpane"),r=this.element.find(".wijmo-wijev-headerbar"),i=this.element.find(".wijmo-wijev-navigationbar"),s=this.element.find(".wijmo-wijev-statusbar"),o=this.element.find(".wijmo-wijev-view-container"),u=this.element.find(".wijmo-wijev-view"),a,f,l,c,h,p,d,v,m,g;a=this.element.innerWidth()-(o.outerWidth(!0)-o.innerWidth()),f=this.element.innerHeight()-(o.outerHeight(!0)-o.innerHeight()),l=r.is(":visible")?r.outerHeight(!0):0,c=i.is(":visible")?i.outerHeight(!0):0,h=s.is(":visible")?s.outerHeight(!0):0,o.outerWidth(a),o.outerHeight(f-l-c-h),v=0;for(g=0;g<t.length;g+=1)n(t[g]).is(":visible")&&(v+=n(t[g]).outerWidth());m=e.is(":visible")?e.outerWidth():0,p=f-l-c-h,d=a-m-v-1,u.outerHeight(p),u.outerWidth(d),r.outerWidth(d+v),i.outerWidth(this.element.innerWidth()),s.outerWidth(d+v+m),t.outerHeight(f-l-c-h),e.outerHeight(f+100),this.element.find(".wijmo-wijev-datepager").wijdatepager("refresh")},t.prototype._daysInMonth=function(e,t){var n=new Date(t,e+1,0);return n.getDate()},t.prototype._addMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+t)},t.prototype._addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},t.prototype._setTime=function(e,t,n){var r;return e=new Date(e),e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds()),n&&(r=Math.floor((t.getTime()-n.getTime())/864e5),r>0&&(e=this._addDays(e,r))),e},t.prototype._addMonths=function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,e.getDate())},t.prototype._compareDayDates=function(e,t){return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e<t?-1:e>t?1:0},t.prototype._dayDateToCssClass=function(e){return"wijmo-wijev-date_"+e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate()},t.prototype._parseDateFromClass=function(e,t,n){var r,i,s,o=new RegExp("wijmo-wijev-minute-(\\d+)\\s"),u=new RegExp("wijmo-wijev-date_(\\d+_\\d+_\\d+)\\s");return e?(s=u.exec(e+" ")[1].split("_"),r=new Date(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)),t&&(i=o.exec(t+" "),i&&(i=parseInt(i[1],10),r.setMinutes(i))),r):n||null},t.prototype._eventIdToCssClass=function(e){return"apptid_"+e},t.prototype._parseEventIdFromClass=function(e){var t="",n,r;return n=new RegExp("apptid_(\\S+)"),r=n.exec(e),r&&r.length>1&&(t=r[1]),t},t.prototype._isContainsDayDate=function(e,t){var n;if(!e)return!1;for(n=0;n<e.length;n+=1)if(this._compareDayDates(e[n],t)===0)return!0},t.prototype._formatString=function(e,t,n,r,i,s,o,u){var a,f=arguments,l,c,h=this;if(f.length<=1)return Globalize.format(f);typeof e=="string"&&(e==="_formatWeekTitle"?e=this._formatWeekTitle:e==="_formatMonthTitle"?e=this._formatMonthTitle:typeof window[e]=="function"&&(e=window[e]));if(typeof e=="function"){c=[];for(l=1;l<f.length;l+=1)c[l-1]=f[l];return e.apply(this,c)}return a=new RegExp("\\{(\\d+)(?:,([-+]?\\d+))?(?:\\:([^(^}]+)(?:\\(((?:\\\\\\)|[^)])+)\\)){0,1}){0,1}\\}","g"),e.replace(a,function(e,t,n,r,i){return e=f[Number(t)+1],r?Globalize.format(e,r,h._getCulture()):e})},t.prototype._formatMonthTitle=function(e){return this._formatString(this.localizeString("monthViewHeaderFormat","{0:MMMM yyyy}"),e)},t.prototype._formatWeekTitle=function(e,t){return e.getMonth()!==t.getMonth()?this._formatString(this.localizeString("weekViewHeaderFormat2Months","{0:MMMM} - {1:MMMM yyyy}"),e,t):this._formatString(this.localizeString("weekViewHeaderFormat","{0:MMMM yyyy}"),e)},t.prototype._formatDayHeaderDate=function(e){var t=this.options,n=t.viewType.toLowerCase(),r=this.options.dayViewHeaderFormat;if(r[n])r=r[n];else if(!r[n])return"";return this._formatString(r,e)},t.prototype._getCulture=function(e){return this._innerCulture||this._resetCulture(e),this._innerCulture},t.prototype._resetCulture=function(e){var t=n.wijGetCulture(e||this.options.culture,this.options.cultureCalendar);this._innerCulture=t},t.prototype._isRTL=function(){return!!this._getCulture().isRTL},t.prototype._onAjaxError=function(e,t,n,r){t?(this.status("Ajax error "+t.status+" ("+t.statusText+")","error"),this.log("Error, requested url: "+n.url,"error"),t.responseText&&this.log("Error, response text: "+t.responseText,"error")):(this.status("Ajax error detected.","error"),this.log("Error, requested url: "+n.url,"error"))},t.prototype._onWindowResize=function(){this.invalidate()},t}(e.wijmoWidget);t.wijevcal=p;var d=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-b",stateDefault:"ui-btn ui-btn-b"},this.initSelector=":jqmData(role='wijevcal')",this.culture="",this.cultureCalendar="",this.localization=null,this.datePagerLocalization=null,this.readOnly=!1,this.webServiceUrl="",this.colors=null,this.dataStorage={addEvent:null,updateEvent:null,deleteEvent:null,loadEvents:null,addCalendar:null,updateCalendar:null,deleteCalendar:null,loadCalendars:null},this.dataSource=null,this.eventsData=null,this.appointments=[],this.calendars=[],this.disabled=!1,this.editCalendarTemplate="",this.enableLogs=!1,this.eventTitleFormat="{2}",this.titleFormat={day:!1,week:"_formatWeekTitle",month:"_formatMonthTitle",list:!1},this.firstDayOfWeek=0,this.headerBarVisible=!0,this.navigationBarVisible=!0,this.rightPaneVisible=!1,this.selectedDate=null,this.selectedDates=null,this.statusBarVisible=!1,this.timeInterval=30,this.timeIntervalHeight=15,this.timeRulerInterval=60,this.timeRulerFormat="{0:h tt}",this.dayHeaderFormat="{0:d }",this.firstRowDayHeaderFormat="{0:ddd d}",this.dayViewHeaderFormat={day:"all-day events",week:"{0:d dddd}",list:"{0:d dddd}"},this.viewType="day",this.ensureEventDialogOnBody=!1,this.visibleCalendars=new Array("Default"),this.calendar=null,this.calendarsChanged=null,this.initialized=null,this.selectedDatesChanged=null,this.viewTypeChanged=null,this.beforeEditEventDialogShow=null,this.beforeAddEvent=null,this.beforeUpdateEvent=null,this.beforeDeleteEvent=null,this.beforeAddCalendar=null,this.beforeUpdateCalendar=null,this.beforeDeleteCalendar=null,this.eventsDataChanged=null}return e}();p.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new d),n.wijmo.registerWidget(r,p.prototype)})(e.evcal||(e.evcal={}));var t=e.evcal})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";function h(){return document.location.hash.match(/^#\w+=/)}var n=jQuery,r="wijappview",i={menu:"menu",content:"content",header:"header",footer:"footer",page:"appviewpage"},s={adjusted:r+"-adjusted"},o="",u=!1;n.fn.findRole=function(e){return this.find(":jqmData(role='"+e+"')")};var a=function(e){function t(){e.apply(this,arguments),this._updatingUrl=!1}return __extends(t,e),t.prototype._appViewCSS=function(){return this.options.wijCSS.wijappview},t.prototype._initMenu=function(){this._menuDiv=this.element.findRole(i.menu);if(!this._menuDiv.length)throw"A DIV with data-role='"+i.menu+"' not found!";this._linkList=this._menuDiv.find("ul");if(!this._linkList.length)throw"Invalid markup. Link list not found";this._menuDiv.addClass(this._appViewCSS().menu)},t.prototype._initPages=function(e,t){var r=this._pageStore,i=this._appViewCSS();e.each(function(){var e=n(this).addClass(i.page),r=e.attr("id"),s=t;if(e.jqmData("url"))return;r&&(s+="#"+r),e.attr("data-url",s)})},t.prototype._initPageContainer=function(){var e=this._appViewCSS(),t=this._pageStore;this._pageContainer=n("<div/>").addClass(e.pageContainer).prependTo(this.element);var r=this.element.findRole(i.page);this._initPages(r,this._documentUrl),r.each(function(e){t.push(n(this).clone()),e>0&&n(this).remove()}),this._firstPage=r.first().addClass(e.pageActive).appendTo(this._pageContainer),this._initCurrentPage()},t.prototype._getUrl=function(e){var t=e.is("form")?"action":"href",r=e.attr(t);return!r||r==="#"?null:(n.mobile.path.isRelativeUrl(r)&&e.parents(":jqmData(url)").each(function(e,t){var i=n(t).jqmData("url");if(i&&n.mobile.path.isAbsoluteUrl(i))return r=n.mobile.path.makeUrlAbsolute(r,i),!1}),r)},t.prototype._hijackLinks=function(e){var t=this;e.on("click."+r,"a:not(.WijListviewNestedLink), .ui-btn:not(.WijListviewNestedLink)",function(e){if(e.isDefaultPrevented())return;var r=t._findClosestLink(e.target);if(!r||n(r).jqmData("appviewpage")===!1)return;var i=t._getUrl(n(r));i&&(e.preventDefault(),e.stopPropagation(),t.changePage(i))})},t.prototype._hijackForms=function(e){var t=this;e.on("submit."+r,"form",function(e){if(e.isDefaultPrevented())return;var r=n(e.currentTarget),i=r.closest("."+t._appViewCSS().page);if(!n.mobile.ajaxEnabled||r.is(":jqmData(ajax='false')")||!r.jqmHijackable().length)return;var s=r.attr("method"),o=r.attr("target"),u=t._getUrl(r);if(!u)return;e.preventDefault(),e.stopPropagation(),t.changePage(u,{type:s&&s.length&&s.toLowerCase()||"get",data:r.serialize(),reloadPage:!0})})},t.prototype._initNavigation=function(){var e=this;this._onPopStateScoped=this._onPopStateScoped||n.proxy(this._onPopState,this),n(window).bind("popstate."+r,this._onPopStateScoped),n(window).bind("appviewpagehashchange."+r,function(){return e._navigateToCurrentLocation()}),this._onNavigateScoped=this._onNavigateScoped||n.proxy(this._onNavigate,this),n(n.mobile.pageContainer).bind("navigate."+r,this._onNavigateScoped)},t.prototype._create=function(){this._pageStore=[],this._documentUrl=this._removePageUrlParam(location.href),this.element.attr("data-url",this._documentUrl),this._jqmPageEnclosingWidget=this._findJqmPage(),this.element.addClass(this._appViewCSS().outerDiv),this._initMenu(),this._initPageContainer(),this._hijackLinks(this.element),this._hijackForms(this.element),this._initNavigation(),this._navigateToCurrentLocation()},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t="."+r;this.element.unbind(t),n(window).unbind(t),n(n.mobile.pageContainer).unbind(t)},t.prototype._findJqmPage=function(){for(var e=this.element;e.length;e=e.parent()){var t=e.jqmData("mobile-page");if(t)return t}return null},t.prototype._initCurrentPage=function(){var e=this._appViewCSS(),t=this.activePage();t.findRole(i.content).addClass(e.content);var n=t.findRole(i.header).addClass(e.header),r=n.jqmData("position"),s=!r||r==="fixed";s&&n.addClass("ui-header-fixed"),this.element.toggleClass(e.withFixedHeader,s)},t.prototype._findClosestLink=function(e){while(e&&(typeof e.nodeName!="string"||e.nodeName.toLowerCase()!=="a"))e=e.parentNode;return e},t.prototype._clickHandler=function(e){var t=n(e.currentTarget),r=t.is("li")?t.jqmData("url"):t.is("a")?t.attr("href"):null;if(!r)return;e.preventDefault(),e.stopPropagation(),this.changePage(r)},t.prototype._inheritAttribute=function(e,t,n){e.attr(n)&&!t.attr(n)&&t.attr(n,e.attr(n))},t.prototype._findInCache=function(e){return n(n.grep(this._pageStore,function(t){return t.jqmData("url")===e})[0]).clone()},t.prototype.loadPage=function(e,t){var r=this;e=e||"";var s=n.Deferred(),o=n.mobile.path,u=n.extend({},this.options.loadSettings,t),a=!e||e.charAt(0)==="#",f=null,l=null,c=this._makeAbsoluteUrl(e);if(u.data)switch(u.type){case"get":c=o.addSearchParams(c,u.data),u.data=undefined;break;case"post":u.reloadPage=!0}var h=n.Event("pagebeforeload"),p={url:e,absUrl:c,dataUrl:c,deferred:s,options:u};this._trigger(h.type,h,p);if(h.isDefaultPrevented())return s.promise();if(!n.mobile.allowCrossDomainPages&&!o.isSameDomain(o.parseLocation(),c))return s.reject(c,t),s.promise();var d=c&&o.getFilePath(c).replace(/#.+/,""),v=n.ajax({url:d,type:u.type,data:u.data,dataType:"html",success:function(u,a,h){function y(e){return o.isAbsoluteUrl(e)||/^(\w+:|#|\/)/.test(e)?null:o.makeUrlAbsolute(e,d)}var v=n("<div></div>"),m=new RegExp("(<[^>]+\\bdata-"+n.mobile.ns+"role=[\"']?"+i.page+"[\"']?[^>]*>)"),g=new RegExp("\\bdata-"+n.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");n.browser.msie&&parseFloat(n.browser.version)<=7&&(u=u.replace(/<a[^>]+href=['"][^'"]+['"]/g,function(e){return e.replace(/href=['"]([^'"]+)['"]/,function(e,t){return t=y(t)||t,"href='"+t+"'"})})),v.get(0).innerHTML=u;var b=r._getAllPages(v,e);b.length||(b=n("<div/>").attr("data-role",i.page).html(u.split(/<\/?body[^>]*>/gmi)[1]));var w=u.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;w&&~w.indexOf("&")&&(w=n("<div>"+w+"</div>").text()),b.each(function(e,t){t=n(t),t.attr("data-external-page",!0),!t.jqmData("title")&&w&&t.attr("data-title",w);var r=o.get(d);t.find("[src], [href]").each(function(){var e=n(this).is("[href]")?"href":n(this).is("[src]")?"src":"action",t=y(n(this).attr(e));t&&n(this).attr(e,t)})}),r._initPages(b,d),f=b.filter(function(){return n(this).jqmData("url")===c}),f.length||(f=b.first()),p.xhr=h,p.textStatus=a,p.page=f,p.allPages=b,r._trigger("pageload",null,p),b.each(function(e,t){r._pageStore.push(n(t).clone())}),s.resolve(c,t,f,l)},error:function(e,i,o){p.xhr=e,p.textStatus=i,p.errorThrown=o;var u=n.Event("pageloadfailed");r._trigger(u.type,u,p);if(u.isDefaultPrevented())return;s.reject(c,t)}});return s.fail(function(){v.abort()}),s},t.prototype._getAllPages=function(e,t){return e.findRole(i.page)},t.prototype.activePage=function(){return this._pageContainer.children("."+this._appViewCSS().pageActive).first()},t.prototype.isMenuUrl=function(e){var t=this;return e=e.toLowerCase(),this._menuDiv.find("a").is(function(){var r=t._getUrl(n(this));return r?r.toLowerCase()===e:!1})},t.prototype._showLoading=function(){n.mobile.loading("show")},t.prototype._hideLoading=function(){n.mobile.loading("hide")},t.prototype.changePage=function(e,t){var r=this;t=n.extend({updateUrl:!0},this.options.loadSettings,t);var o={toPage:e,options:t};this._curRequest&&this._curRequest.state()==="pending"&&this._curRequest.rejectWith&&this._curRequest.rejectWith(this,[e,t,!0]);var a,f;if(typeof e=="string"){a=this.activePage().data("url"),f=this._makeAbsoluteUrl(e);var l=f.indexOf("#");if(l>=0&&f.substr(0,l)===a.split("#")[0]){var c=this._findInCache(f);c.length&&(e=c)}}if(typeof e=="string"){this._updateUIBeforeChange(f),t.showLoadMsg&&this._showLoading(),this._curRequest=this.loadPage(e,t).always(function(){t.showLoadMsg&&r._hideLoading(),r._curRequest=null}).done(function(e,t,n,i){r._updateUIAfterChange(n.jqmData("url")),r.changePage(n,t)}).fail(function(e,t,n){n||r._updateUI(a),r._trigger("pagechangefailed",null,o)});return}var h=n.Event("pagebeforechange");this._trigger(h.type,h,o);if(h.isDefaultPrevented())return;var p=e.jqmData("url"),d=null;this._updateUI(p),p&&(d=this._makeRelative(p),d!=null&&(d=this._makeRelative(d)));var v=e.jqmData("title"),m=e.findRole("header"),g=this._appViewCSS();!m.length&&v&&(m=n("<div data-role='header'/>").append(n("<h2/>").text(v)).prependTo(e));if(m.length&&!m.jqmData(s.adjusted)){m.jqmData(s.adjusted,!0);var y=this._firstPage.findRole(i.header);y&&this._inheritAttribute(y,m,"data-position"),this.isMenuUrl(p)&&!m.find("a[data-icon=back]").length&&n("<a/>").attr({href:this._documentUrl,"data-icon":"back"}).text("Back").prependTo(m)}v&&(document.title=v),this._pageContainer.children().removeClass(g.pageActive),e.addClass(g.pageActive).appendTo(this._pageContainer.empty()),this._initCurrentPage();if(t.updateUrl||u)this._updateUrl(p,d,document.title),u=!1;e.jqmData("mobile-page",this._jqmPageEnclosingWidget).jqmData("page",this._jqmPageEnclosingWidget).enhanceWithin().trigger("pagecreate").trigger(this.widgetEventPrefix+"pageinit",o),this._trigger("pagechange",null,o)},t.prototype._updateUIBeforeChange=function(e){var t=this,r=e===this._documentUrl,i=this._linkList.find("li"),s=this._appViewCSS().menuItemActive;if(r)i.removeClass(s);else{var o=i.filter(function(){var r=t._getUrl(n(this).find("a"));return r&&r.toLowerCase()===e.toLowerCase()});o.length&&!o.hasClass(s)&&(i.removeClass(s),o.addClass(s))}},t.prototype._updateUIAfterChange=function(e){var t=this._appViewCSS(),n=e===this._documentUrl;this.element.toggleClass(t.inPage,!n)},t.prototype._updateUI=function(e){this._updateUIBeforeChange(e),this._updateUIAfterChange(e)},t.prototype._changePageIfDifferent=function(e,t){var n=typeof e=="string"?e:e.jqmData("url");this.activePage().jqmData("url")!==n&&this.changePage(e,t)},t.prototype._onNavigate=function(e){var t=new RegExp("^#?"+this.options.urlParamName+"=");(history.state&&history.state.wijappview||document.location.hash.match(t))&&e.preventDefault()},t.prototype._removePageUrlParam=function(e){return e.replace(/\#.*$/,"")},t.prototype._addUrl=function(e){var t=this.options.urlParamName,n=this._removePageUrlParam(location.href);return e&&(n+="#"+t+"="+e),n},t.prototype._makeRelative=function(e){var t=n.mobile.path.parseLocation(),r=e;if(e){var i=t.domain+t.directory;e.substr(0,t.hrefNoHash.length)===t.hrefNoHash?r=e.substr(t.hrefNoHash.length):e.substr(0,i.length)===i&&(r=e.substr(i.length))}return r},t.prototype._makeAbsoluteUrl=function(e){var t=n.mobile.path,r=this.activePage(),i=t.makeUrlAbsolute(r.jqmData("url")||this._documentUrl,this._documentUrl);return!i.match(/\/$/)&&!i.match(/\./)&&(i+="/"),e&&t.makeUrlAbsolute(e,i)},t.prototype._onPopState=function(e){if(this._updatingUrl)return;history.state&&history.state.wijappview?this._changePageIfDifferent(history.state.absUrl||this._firstPage,{updateUrl:!1}):this._navigateToCurrentLocation()},t.prototype._navigateToCurrentLocation=function(){var e=new RegExp("#"+this.options.urlParamName+"=(.+)"),t=e.exec(location.href)||o&&e.exec(o),r=t?n.mobile.path.makeUrlAbsolute(t[1],this._documentUrl):this._firstPage;o="",this._changePageIfDifferent(r,{updateUrl:!1})},t.prototype._updateUrl=function(e,t,r){this._updatingUrl=!0;try{n.mobile.navigate.navigator.preventHashAssignPopState=!0,document.location.hash=e===this._documentUrl?"":this.options.urlParamName+"="+t}finally{this._updatingUrl=!1}},t}(e.wijmoWidget);t.wijappview=a;var f="wijmo-wijappview",l=f+"-",c=function(){function e(){this.urlParamName="appviewpage",this.loadSettings={type:"GET",data:undefined,reloadPage:!1,showLoadMsg:!1},this.pagebeforeload=null,this.pageload=null,this.pageloadfailed=null,this.pagebeforechange=null,this.pagechange=null,this.pagechangefailed=null,this.wijCSS={wijappview:{outerDiv:f,inPage:l+"in-page",menu:l+"menu",menuItemActive:"ui-btn-down-b",page:l+"page",pageActive:l+"page-active",pageContainer:l+"page-container",content:l+"content",header:l+"header",withFixedHeader:l+"with-fixed-header"}}}return e}();t.wijappview_options=c,a.prototype.options=n.extend({},e.wijmoWidget.prototype.options,new c),n.mobile&&(n.wijmo.registerWidget(r,a.prototype),n(window).bind("hashchange",function(e){h()&&(e.stopImmediatePropagation(),n(window).trigger("appviewpagehashchange"))}),h()&&(o=document.location.hash,n(window).bind("pagecontainercreate",function(){document.location.hash="",u=!0})))})(e.appview||(e.appview={}));var t=e.appview})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijsparkline",i={line:{stroke:"#5b8f00","stroke-width":1,opacity:.9},area:{stroke:"#009999","stroke-width":1,fill:"#0099ff","fill-opacity":.5},column:{stroke:"none",fill:"#0099ff","fill-opacity":.9,negStyle:{fill:"#ff0000"},zeroStyle:{fill:"#808080"}}},s=function(){function e(e){this._hOffset=15,this._vOffset=-15,this._tooltipEle=n("<div style='position:absolute' class='wijmo-wijsparkline-tooltip'></div>"),this._tooltipEle.appendTo("body").hide()}return e.prototype.show=function(e,t){this._tooltipEle.css({left:t.originalLeft+this._hOffset,top:t.originalTop+this._vOffset}).empty().append(e),this._tooltipEle.is(":hidden")&&this._tooltipEle.show()},e.prototype.hide=function(){this._tooltipEle.hide()},e.prototype.destroy=function(){this._tooltipEle.remove(),this._tooltipEle=null},e}();t.SparklineTooltip=s;var o=function(t){function o(){t.apply(this,arguments)}return __extends(o,t),o.prototype._create=function(){var e=this.options,t=e.width||this.element.width(),r=e.height||this.element.height(),i=this.element.attr("style"),s,o;this.wrapper=n("<div class='ui-widget "+e.wijCSS.sparkline+"'></div>").attr("style",i||"").css({width:t,height:r}),this.canavsWrapper=n("<div class='"+e.wijCSS.canvasWrapper+"'></div>"),this.element.wrap(this.wrapper).after(this.canavsWrapper).hide(),e.data?this.data=e.data:(o=this.element.html(),this.data=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")),s=Raphael(this.canavsWrapper[0],t,r),this.canvas=s,this._render()},o.prototype._setOption=function(e,n){var r=this.options;e==="height"||e==="width"?(r[e]=n,this.element[e](n)):e==="data"?this.data=r.data=n:t.prototype._setOption.call(this,e,n),this.redraw()},o.prototype._render=function(){var e=this,t=e.options,r=t.type,i=t.seriesList,s=t.seriesStyles?t.seriesStyles.length:0,o;e.seriesRegionInfos=[],e.canvas.clear(),e.canvasBounds={startX:0,width:t.width||this.element.width(),startY:0,height:t.height||this.element.height()},r=r&&r!==""?r.toLowerCase():"line",i&&i.length>0?n.each(i,function(n,i){var u=i.type&&i.type!==""?i.type.toLowerCase():r;o=s>0?t.seriesStyles[n%s]:null,e._internalRender(i,t,u,o)}):(o=s>0?t.seriesStyles[0]:null,e._internalRender(null,t,r,o)),e._bindCanvasEvents()},o.prototype._internalRender=function(t,r,s,o){var u,o,a,f,l,c,u=i[s];o=n.extend({},u,o,t?t.seriesStyle:null),l=t&&t.data?t.data:this.data,t&&t.columnWidth!==undefined&&t.columnWidth!==null&&typeof t.columnWidth=="number"?c=t.columnWidth:c=r.columnWidth,a=new e.sparkline[s+"Render"](this.element,this.canvas,s,{data:l,min:r.min,max:r.max,valueAxis:r.valueAxis,origin:r.origin,animation:r.animation,bind:t?t.bind||r.bind:r.bind,seriesStyle:o,columnWidth:c,canvasBounds:this.canvasBounds}),a.render(),f={type:s,bind:t?t.bind:null,regionInfos:a.getRegionInfos()},s==="column"&&(this.containsColumnType=!0,this.colunmWidth=a.getColumnWidth()),this.seriesRegionInfos.push(f)},o.prototype.redraw=function(){var e=this.options,t=0,n=0;t=e.width||this.element.width(),n=e.height||this.element.height();if(t<1||n<1)return;this.canvas.setSize(t,n),this._render()},o.prototype.destroy=function(){this._unbindCanvasEvents(),this.element.unwrap().show(),this.canvas.clear(),this.wrapper=null,this.canavsWrapper.remove(),this.canavsWrapper=null,this.seriesRegionInfos=[],this.canvasBounds=null,this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),t.prototype.destroy.call(this)},o.prototype._bindCanvasEvents=function(){var e=this,t=e.options,i=e.canavsWrapper,s="",o="."+r;if(!i||!e.canvas)return;n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action","none"):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","none")),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(s="wij"),i.bind(s+"mousemove"+o,function(t){var n=e._getMousePosition(i,t),r=e.options.disabled;if(r)return;e._mouseMoveInsideArea(n)}),i.bind(s+"mouseout"+o,function(t){var n=t.currentTarget,r=t.relatedTarget?t.relatedTarget:t.toElement,i=e.options.disabled;if(i)return;if(n.nodeName.toLowerCase()!=="div")return;while(r&&r!==n&&r.nodeName.toLowerCase()!=="body")r=r.parentNode;if(r===n)return;e._mouseOutInsideArea()}),i.bind(s+"click"+o,function(t){var n=e._getMousePosition(i,t),r=e.options.disabled,s=[];if(r)return;s=e._getCurrentRegionInfos(n),e._trigger("click",null,{currentRegion:s})})},o.prototype._getMousePosition=function(e,t){var n=e.offset(),r=document.compatMode==="CSS1Compat",i=r?t.pageX:t.clientX,s=r?t.pageY:t.clientY,o={left:i-n.left,originalLeft:i,top:s-n.top,originalTop:s};return o},o.prototype._mouseMoveInsideArea=function(e){var t=this,r=t.options,i=r.tooltipFormat,s=r.tooltipContent,o="",u=[],a=NaN;u=t._getCurrentRegionInfos(e),u.length>0&&(n.each(u,function(e,r){var f;e===0&&(o+="<span>"),s&&n.isFunction(s)?f=n.proxy(s,t.data[r.index])():(r.bind&&(o+=r.bind+": "),i?f=i.replace(/\{(\d+)\}/g,r.value):f=r.value),o+=f,e<u.length-1?o+="<br />":o+="</span>";if(isNaN(a))if(t.containsColumnType)r.type==="column"&&(a=r.position.x+t.colunmWidth/2);else if(r.type==="line"||r.type==="area")a=r.position.x}),this._paintTooltip(o,e),this._paintIndicatorLine(a)),this._trigger("mouseMove",null,{currentRegion:u})},o.prototype._mouseOutInsideArea=function(){this.tooltip&&this.tooltip.hide(),this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null)},o.prototype._getCurrentRegionInfos=function(e){var t=this,r=[];return n.each(this.seriesRegionInfos,function(n,i){var s,o="_"+i.type+"GetCurrentRegionInfo",u=t[o];u&&(s=u.call(t,i,e),s&&(s.type=i.type,s.bind=i.bind,r.push(s)))}),r},o.prototype._lineGetCurrentRegionInfo=function(e,t,r){var i=e.regionInfos,s=i.length,o;return n.each(i,function(e,n){var r=n.position,u,a;if(e<s-1){u=i[e+1],a=u.position;if(t.left>=r.x&&t.left<a.x)return o=n,o.index=e,!1}else if(t.left>=r.x)return o=n,o.index=e,!1}),o},o.prototype._areaGetCurrentRegionInfo=function(e,t){return this._lineGetCurrentRegionInfo(e,t)},o.prototype._columnGetCurrentRegionInfo=function(e,t){return this._lineGetCurrentRegionInfo(e,t)},o.prototype._pieGetCurrentRegionInfo=function(e,t){return null},o.prototype._bulletGetCurrentRegionInfo=function(e,t){return null},o.prototype._unbindCanvasEvents=function(){n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(window.navigator.pointerEnabled?this.element.css("touch-action",""):window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action","")),this.element.unbind("."+r)},o.prototype._paintTooltip=function(e,t){this.tooltip||(this.tooltip=new s(this.options.tooltipStyle)),this.tooltip.show(e,t)},o.prototype._paintIndicatorLine=function(e){var t,n,r,i;this.indicatorLine?this.indicatorLine.transform("T"+e+" 0"):(t=this.canvasBounds.height,n=this.canvasBounds.startX,r=this.canvasBounds.startY,i=["M",n,r,"V",t],this.indicatorLine=this.canvas.path(i.join(" ")),this.indicatorLine.transform("T"+e+" 0"))},o}(e.wijmoWidget);t.wijsparkline=o;var u=function(){function e(e,t,n,r){this.values=[],this.type=n,this.options=r,this.element=e,this.canvas=t,this.animationSet=t.set(),this.scanValues(),this.options.min===null||this.options.min===undefined||typeof this.options.min!="number"?this.minValue=Math.min.apply(Math,this.values):this.minValue=this.options.min,this.options.max===null||this.options.max===undefined||typeof this.options.max!="number"?this.maxValue=Math.max.apply(Math,this.values):this.maxValue=this.options.max}return e.prototype.render=function(){if(!this.element||!this.canvas)return},e.prototype.playAnimation=function(){var e=this.options,t=e.canvasBounds,n=e.animation;this.animationSet.length>0&&n&&n.enabled&&(this.animationSet.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",t.startX,t.startY,t.height)),this.animationSet.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",t.startX,t.startY,t.width,t.height)},n.duration,n.easing,null))},e.prototype.scanValues=function(){var e=this,t=e.options,r=t.bind,i=t.data;n.isArray(i)&&n.each(i,function(t,n){var i;r&&n&&n[r]!==undefined?i=n[r]:i=n,typeof i=="string"&&(i=parseFloat(i)),e.values.push(i)})},e.prototype.setRegionInfos=function(){var e=this,t=0,r=e.options.canvasBounds.height,i=e.options.canvasBounds.width,s;if(!e.values||e.values.length===0)return;this.regionInfos||(this.regionInfos=[]),s=e.values.length,t=e.maxValue-e.minValue,e.valRange=t=t===0?1:t,n.each(e.values,function(n,o){var u,a;u=n*(i/s),a=r*(1-(o-e.minValue)/t),e.regionInfos.push({value:o,position:{x:u,y:a}})})},e.prototype.getRegionInfos=function(){return(!this.regionInfos||this.regionInfos.length===0)&&this.setRegionInfos(),this.regionInfos},e.prototype.getColumnWidth=function(){return null},e}();t.sparklineRenderBase=u;var a=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.regionInfos=[]}return __extends(t,e),t.prototype.render=function(){var t=this.options,r=[];e.prototype.render.call(this),this.setRegionInfos(),this.regionInfos&&this.regionInfos.length>0&&(n.each(this.regionInfos,function(e,t){var n=t.position;e===0?r.push("M"):r.push("L"),r.push(n.x),r.push(n.y)}),r.length>0&&(this.line=this.canvas.path(r.join(" ")),this.line.wijAttr(t.seriesStyle),this.line.wijAttr("fill","none"),this.animationSet.push(this.line),this.type==="line"&&this.playAnimation()))},t}(u);t.lineRender=a;var f=function(e){function t(t,n,r,i){e.call(this,t,n,r,i)}return __extends(t,e),t.prototype.render=function(){var t=this.options.canvasBounds.height,r=this.maxValue,i=this.minValue,s=this.options.origin,o,u,a,f;e.prototype.render.call(this);if(this.options.valueAxis){if(s===null||s===undefined||typeof s!="number")s=(r-i)/2+i;u=t*(1-(s-this.minValue)/this.valRange)}else u=t;a=Raphael.parsePathString(this.line.attr("path")),a&&a.length>0&&(f=[],n.each(a,function(e,t){n.each(t,function(e,t){f.push(t)}),t[0]==="M"&&(o=t[1]),e===a.length-1&&(f.push("V"),f.push(u),f.push("H"),f.push(o),f.push("Z"))})),f.length>0&&(this.area=this.canvas.path(f.join(" ")),this.area.wijAttr(this.options.seriesStyle),this.area.wijAttr("stroke","none"),this.animationSet.push(this.area),this.playAnimation())},t}(a);t.areaRender=f;var l=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.animateBars=[]}return __extends(t,e),t.prototype.render=function(){var t=this,r=this,i=r.maxValue,s=r.minValue,o=r.canvas,u=r.options,a=u.origin,f=u.animation,l=u.canvasBounds.height,c=u.seriesStyle,h=u.seriesStyle.negStyle,p=u.seriesStyle.zeroStyle,d,v,m;e.prototype.render.call(this),r.setRegionInfos(),delete c.zeroStyle,delete c.negStyle,h=n.extend({},c,h),p=n.extend({},c,p),this.columnWidth=r.adjustColumnWidth(),d=l/r.valRange,v=f&&f.enabled;if(u.valueAxis){if(a===null||a===undefined||typeof a!="number")a=(i-s)/2+s;m=(i-a)*d}else m=l;r.regionInfos&&r.regionInfos.length>0&&(n.each(r.regionInfos,function(e,n){var i,f,g,y,b,w,E=n.position.x,S=n.value;u.valueAxis?S>=a?(w=S===a,b=w?n.position.y-2*d:n.position.y,i=v?m:n.position.y,f=w?2*d:(S-a)*d,g=w?p:c):(b=i=m,f=(a-S)*d,g=h):(w=S===s,b=w?n.position.y-2*d:n.position.y,i=m,f=w?2*d:l-n.position.y,g=w?p:c),y=o.rect(E,i,t.columnWidth,f),y.wijAttr(g),y.top=b,y.height=f,r.animateBars.push(y)}),r.playAnimation())},t.prototype.playAnimation=function(){var e=this.options,t=e.animation,r=e.canvasBounds.height;this.animateBars.length>0&&t&&t.enabled&&n.each(this.animateBars,function(e,n){var r;n.wijAttr({height:0}),r={height:n.height,y:n.top},n.stop().wijAnimate(r,t.duration,t.easing,null)})},t.prototype.adjustColumnWidth=function(){var e=this.options,t=e.columnWidth,n=e.canvasBounds.width,r=2,i;return i=n/this.values.length-r,t>i?i:t},t.prototype.getColumnWidth=function(){return this.columnWidth},t}(u);t.columnRender=l;var c=function(){function e(){this.initSelector=":jqmData(role='wijsparkline')",this.wijCSS={sparkline:"wijmo-wijsparkline",canvasWrapper:"wijmo-sparkline-canvas-wrapper"},this.type="line",this.seriesList=[],this.width=null,this.height=null,this.data=null,this.bind=null,this.seriesStyles=[],this.animation={enabled:!0,duration:2e3,easing:"easeInCubic"},this.valueAxis=!1,this.origin=null,this.min=null,this.max=null,this.columnWidth=10,this.tooltipFormat=null,this.tooltipContent=null,this.mouseMove=null,this.click=null,this.disabled=!1}return e}();o.prototype.options=n.extend(!0,{},o.prototype.options,new c),o.prototype.widgetEventPrefix="wijsparkline",n.wijmo.registerWidget("wijsparkline",o.prototype)})(e.sparkline||(e.sparkline={}));var t=e.sparkline})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(t){function r(e){var n=new i(e.serviceUrl,e.method),r={fileName:e.fileName,height:e.height,width:e.width,widgetName:e.widgetName,widgetOptions:e.widgetOptions,HTMLContent:e.HTMLContent,widget:e.chart,type:e.exportFileType,pdfSetting:e.pdf},s=n.getExportData(r);t.exportFile(e,s)}function s(t,n,r,i){var s,o,u={},a;s=t===undefined?"export":t,o=n===undefined?"png":n,o=o.substr(0,1).toUpperCase()+o.substr(1),typeof r=="string"&&arguments.length===3?a=r:(a=i===undefined?"http://demos.componentone.com/ASPNET/ExportService/exportapi/chart":i,u=r),e.exporter.exportChart({fileName:s,serviceUrl:a,chart:this,exportFileType:e.exporter.ExportFileType[o],pdf:u})}(function(e){e[e.Content=0]="Content",e[e.Options=1]="Options"})(t.ChartExportMethod||(t.ChartExportMethod={}));var n=t.ChartExportMethod;t.exportChart=r;var i=function(){function e(e,t){this.serviceUrl=e,this.method=t}return e.prototype.getExportData=function(e){var t;return this.options=e,this._handleExportOption(),t={fileName:e.fileName,width:e.width,height:e.height,type:e.type,pdfSettings:e.pdfSetting},this.method===0?t.content=e.HTMLContent:(t.options=e.widgetOptions,t.widgetName=e.widgetName),JSON.stringify(t,function(e,t){if(e==="type")switch(t){case 6:return"bmp";case 7:return"gif";case 5:return"jpg";case 3:return"pdf";case 8:return"tiff";default:return"png"}return t})},e.prototype._handleExportOption=function(){var e=this.options;e.widget&&(this.method==0?e.HTMLContent=escape(e.widget.chartElement[0].outerHTML):(e.widgetName=this._getWidgetName(),e.widgetOptions=JSON.stringify(this._handleChartOptions(e.widget,e.widgetName),function(e,t){if(t!=null)return t})),e.width=e.widget.chartElement.width(),e.height=e.widget.chartElement.height())},e.prototype._getWidgetName=function(){return this.options.widget?this.options.widget.widgetName:""},e.prototype._handleChartOptions=function(e,t){var n=e.options,r=$.extend(!0,{},n,{animation:{enabled:!1},seriesTransition:{enabled:!1},hint:{enable:!1}});return delete r.wijCSS,delete r.seriesHoverStyles,t==="wijbarchart"?this._handleBarChartOptions(r):t==="wijcandlestickchart"?this._handleCandlestickChartOptions(r,e):t==="wijcompositechart"&&this._handleCompositeChartOptions(r,e),this._handleAxis(r),r},e.prototype._handleAxis=function(e){var t=this;this._removeAuto(e.axis.x),$.isArray(e.axis.y)?$.each(e.axis.y,function(e,n){t._removeAuto(n)}):this._removeAuto(e.axis.y)},e.prototype._handleBarChartOptions=function(e){if(e.horizontal){var t=e.axis.x.compass;e.axis.x.compass=e.axis.y.compass,e.axis.y.compass=t}},e.prototype._handleCandlestickChartOptions=function(e,t){$.each(e.seriesList,function(e,n){n.data&&n.data.x&&$.each(n.data.x,function(e,r){typeof r=="number"&&(n.data.x[e]=t.timeUtil.getTime(r))})})},e.prototype._handleCompositeChartOptions=function(e,t){t.isContainsCandlestick&&t.timeUtil&&$.each(e.seriesList,function(e,n){n.data&&n.data.x&&$.each(n.data.x,function(e,r){typeof r=="number"&&(n.data.x[e]=t.timeUtil.getTime(r))})})},e.prototype._removeAuto=function(e){e.autoMax&&delete e.max,e.autoMin&&delete e.min,e.autoMajor&&delete e.unitMajor,e.autoMinor&&delete e.unitMinor},e.prototype._exportByForm=function(e){var t=$("<form>").appendTo("body"),n=$("<input type='text' name='data'>").appendTo(t);window.exportFrame||(window.exportFrame=$("<iframe name='my_iframe'>").appendTo("body"),window.exportFrame.hide()),t.hide(),n.val(e),t.attr({method:"post",action:this.serviceUrl,target:"my_iframe"}),t.submit(),t.remove()},e}();t.chartExport=i,t.innerExportChart=s,e.chart&&e.chart.wijchartcore&&(e.chart.wijchartcore.prototype.exportChart=s);var o=["wijbarchart","wijbubblechart","wijcandlestickchart","wijcompositechart","wijlinechart","wijpiechart","wijscatterchart"];$.each(o,function(e,t){if(!$.wijmo[t])return;$.wijmo[t].prototype.exportChart=s})})(e.exporter||(e.exporter={}));var t=e.exporter})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){"use strict";function n(e,t){var n=e.sender,i=e.contentType,s=e.serviceUrl;n?n(t,e):i=="application/json"?a(t,s,e):r(t,s)}function r(e,n){var r='<input type="hidden" name="type" value="application/json"/>';r+='<input type="hidden" name="data" value="'+u(e)+'" />';var s=t("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");s.ready(function(){var e=i(s);e.write("<html><head></head><body><form method='Post' action='"+n+"'>"+r+"</form>dummy windows for postback</body></html>");var o=t(e).find("form");o.submit()})}function i(e){var t=e[0].contentWindow||e[0].contentDocument;return t.document&&(t=t.document),t}function u(e){return e.replace(s,function(e){return"&"+o[e]})}function a(e,t,n){var r=new XMLHttpRequest;r.open("post",t),r.send(e),r.responseType="blob",r.onreadystatechange=function(){r.response&&n.receiver&&n.receiver(r.response,n)}}var t=jQuery;e.exportFile=n;var s=/[<>&\r\n"']/gm,o={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};(function(e){e[e.Xls=0]="Xls",e[e.Xlsx=1]="Xlsx",e[e.Csv=2]="Csv",e[e.Pdf=3]="Pdf",e[e.Png=4]="Png",e[e.Jpg=5]="Jpg",e[e.Bmp=6]="Bmp",e[e.Gif=7]="Gif",e[e.Tiff=8]="Tiff"})(e.ExportFileType||(e.ExportFileType={}));var f=e.ExportFileType;(function(e){e[e.Standard=0]="Standard",e[e.TrueType=1]="TrueType",e[e.Embedded=2]="Embedded"})(e.FontType||(e.FontType={}));var l=e.FontType;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.Default=2]="Default",e[e.High=3]="High"})(e.ImageQuality||(e.ImageQuality={}));var c=e.ImageQuality;(function(e){e[e.Default=-1]="Default",e[e.None=0]="None",e[e.BestSpeed=1]="BestSpeed",e[e.BestCompression=9]="BestCompression"})(e.CompressionType||(e.CompressionType={}));var h=e.CompressionType;(function(e){e[e.NotPermit=0]="NotPermit",e[e.Standard40=2]="Standard40",e[e.Standard128=3]="Standard128",e[e.Aes128=4]="Aes128"})(e.PdfEncryptionType||(e.PdfEncryptionType={}));var p=e.PdfEncryptionType;(function(e){e[e.Custom=0]="Custom",e[e.Letter=1]="Letter",e[e.LetterSmall=2]="LetterSmall",e[e.Tabloid=3]="Tabloid",e[e.Ledger=4]="Ledger",e[e.Legal=5]="Legal",e[e.Statement=6]="Statement",e[e.Executive=7]="Executive",e[e.A3=8]="A3",e[e.A4=9]="A4",e[e.A4Small=10]="A4Small",e[e.A5=11]="A5",e[e.B4=12]="B4",e[e.B5=13]="B5",e[e.Folio=14]="Folio",e[e.Quarto=15]="Quarto",e[e.Standard10x14=16]="Standard10x14",e[e.Standard11x17=17]="Standard11x17",e[e.Note=18]="Note",e[e.Number9Envelope=19]="Number9Envelope",e[e.Number10Envelope=20]="Number10Envelope",e[e.Number11Envelope=21]="Number11Envelope",e[e.Number12Envelope=22]="Number12Envelope",e[e.Number14Envelope=23]="Number14Envelope",e[e.CSheet=24]="CSheet",e[e.DSheet=25]="DSheet",e[e.ESheet=26]="ESheet",e[e.DLEnvelope=27]="DLEnvelope",e[e.C5Envelope=28]="C5Envelope",e[e.C3Envelope=29]="C3Envelope",e[e.C4Envelope=30]="C4Envelope",e[e.C6Envelope=31]="C6Envelope",e[e.C65Envelope=32]="C65Envelope",e[e.B4Envelope=33]="B4Envelope",e[e.B5Envelope=34]="B5Envelope",e[e.B6Envelope=35]="B6Envelope",e[e.ItalyEnvelope=36]="ItalyEnvelope",e[e.MonarchEnvelope=37]="MonarchEnvelope",e[e.PersonalEnvelope=38]="PersonalEnvelope",e[e.USStandardFanfold=39]="USStandardFanfold",e[e.GermanStandardFanfold=40]="GermanStandardFanfold",e[e.GermanLegalFanfold=41]="GermanLegalFanfold",e[e.IsoB4=42]="IsoB4",e[e.JapanesePostcard=43]="JapanesePostcard",e[e.Standard9x11=44]="Standard9x11",e[e.Standard10x11=45]="Standard10x11",e[e.Standard15x11=46]="Standard15x11",e[e.InviteEnvelope=47]="InviteEnvelope",e[e.LetterExtra=50]="LetterExtra",e[e.LegalExtra=51]="LegalExtra",e[e.TabloidExtra=52]="TabloidExtra",e[e.A4Extra=53]="A4Extra",e[e.LetterTransverse=54]="LetterTransverse",e[e.A4Transverse=55]="A4Transverse",e[e.LetterExtraTransverse=56]="LetterExtraTransverse",e[e.APlus=57]="APlus",e[e.BPlus=58]="BPlus",e[e.LetterPlus=59]="LetterPlus",e[e.A4Plus=60]="A4Plus",e[e.A5Transverse=61]="A5Transverse",e[e.B5Transverse=62]="B5Transverse",e[e.A3Extra=63]="A3Extra",e[e.A5Extra=64]="A5Extra",e[e.B5Extra=65]="B5Extra",e[e.A2=66]="A2",e[e.A3Transverse=67]="A3Transverse",e[e.A3ExtraTransverse=68]="A3ExtraTransverse",e[e.JapaneseDoublePostcard=69]="JapaneseDoublePostcard",e[e.A6=70]="A6",e[e.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2",e[e.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3",e[e.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3",e[e.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4",e[e.LetterRotated=75]="LetterRotated",e[e.A3Rotated=76]="A3Rotated",e[e.A4Rotated=77]="A4Rotated",e[e.A5Rotated=78]="A5Rotated",e[e.B4JisRotated=79]="B4JisRotated",e[e.B5JisRotated=80]="B5JisRotated",e[e.JapanesePostcardRotated=81]="JapanesePostcardRotated",e[e.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated",e[e.A6Rotated=83]="A6Rotated",e[e.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated",e[e.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated",e[e.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated",e[e.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated",e[e.B6Jis=88]="B6Jis",e[e.B6JisRotated=89]="B6JisRotated",e[e.Standard12x11=90]="Standard12x11",e[e.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4",e[e.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated",e[e.Prc16K=93]="Prc16K",e[e.Prc32K=94]="Prc32K",e[e.Prc32KBig=95]="Prc32KBig",e[e.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1",e[e.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2",e[e.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3",e[e.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4",e[e.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5",e[e.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7",e[e.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8",e[e.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9",e[e.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10",e[e.Prc16KRotated=106]="Prc16KRotated",e[e.Prc32KRotated=107]="Prc32KRotated",e[e.Prc32KBigRotated=108]="Prc32KBigRotated",e[e.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated",e[e.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated",e[e.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated",e[e.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated",e[e.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated",e[e.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated",e[e.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated",e[e.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated",e[e.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated",e[e.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"})(e.PaperKind||(e.PaperKind={}));var d=e.PaperKind})(e.exporter||(e.exporter={}));var t=e.exporter})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(t){"use strict";function o(e){t.exportFile(e,JSON.stringify(u.exportSource(e)))}var n=jQuery;(function(e){e[e.None=0]="None",e[e.Template=1]="Template",e[e.AltTemplate=2]="AltTemplate"})(t.RowTemplateType||(t.RowTemplateType={}));var r=t.RowTemplateType;(function(e){e[e.Text=1]="Text",e[e.Image=2]="Image",e[e.Link=3]="Link",e[e.Checkbox=4]="Checkbox",e[e.Html=5]="Html"})(t.ColType||(t.ColType={}));var i=t.ColType,s=function(){function t(e,t){var n=this;n.environmentInfo=t,n._init(e)}return t.prototype._init=function(e){var t=this,r=e.dataView(),i=n(e.element).find(">colgroup>col");t.grid=e,t.showRowHeader=e.option("showRowHeader"),t.dataView=r,t.dataCount=r.count();if(t.dataCount>0){var s=r.item(0);t.isArrayData=n.type(s)=="array"}t._initColInfos(i)},t.prototype._initColInfos=function(e){var t=this;t.colLeaves=n.grep(t.grid.columns(),function(e){return e.option("isLeaf")}),t.colWidths=[],t.colInfos=e.map(function(e){if(e<0||e>t.colLeaves.length-1)return null;var r=t.colLeaves[e],i=1,s=r.option("dataTypeQualifier");t.isHtmlCol(r)?i=5:t.isLinkCol(r)?i=3:t.isImageCol(r)?i=2:t.isCheckBoxCol(r)&&(i=4),t.colWidths.push(t.computedWidthToPt(n(this).css("width")));var o={formatString:r.option("dataFormatString"),dataType:r.option("dataType"),type:i};return s&&(o.dataTypeQualifier=s),o}).get()},t.prototype.computedWidthToPt=function(e){return u.pxToPt(e,this.environmentInfo.dpiX)},t.prototype.computedHeightToPt=function(e){return u.pxToPt(e,this.environmentInfo.dpiY)},t.prototype.getDataValue=function(e,t){var n=this;if(e>=n.dataCount||e<0||t<0)return null;var r=n.grid.dataView().item(e);if(n.isArrayData)return n.showRowHeader&&t--,t<0||t>=r.length?null:r[t];var i=n.colLeaves;if(t>=i.length)return null;var s=i[t].option("dataKey");return r[s]},t.prototype.isCheckBoxCol=function(t){return t instanceof e.grid.c1booleanfield},t.prototype.isHtmlCol=function(e){return e.option("cellFormatter")!=null?!0:!1},t.prototype.isImageCol=function(e){return!1},t.prototype.isLinkCol=function(t){return t instanceof e.grid.c1buttonfield&&t.option("buttonType")=="link"?!0:!1},t}();t.exportContext=s,t.exportGrid=o;var u=function(){function t(){}return t.exportSource=function(t){var n=e.exporter.gridExporter._generateEnvironmentInfo(),r={grid:e.exporter.gridExporter._generateTemplate(new s(t.grid,n)),environmentInfo:n,exportFileType:t.exportFileType};return t.fileName&&(r.fileName=t.fileName),t.pdf&&(r.pdf=t.pdf),t.excel&&(r.excel=t.excel),r},t.pxToPt=function(t,n){if(t==null)return 0;t=t.trim().toLowerCase();var r="px";if(t.indexOf(r,t.length-r.length)==-1)return 0;var i=parseFloat(t);return isNaN(i)?0:i/n*e.exporter.gridExporter.pointPerInch},t._generateEnvironmentInfo=function(){var e=window.location,t=e.protocol+"//"+e.hostname+(e.port&&":"+e.port)+"/",r=n("<div style='height:1in;left:-100%;position: absolute;top:-100%;width:1in;'></div>").appendTo(n(document.body));return{baseUrl:t,dpiX:r.outerWidth(),dpiY:r.outerHeight(),culture:navigator.language?navigator.language:navigator.browserLanguage}},t._generateTemplate=function(t){var r=n(t.grid.element),i=e.exporter.gridExporter._readStyle(t,r),s=e.exporter.gridExporter._readSection(t,r.find(">thead")),o=e.exporter.gridExporter._readSection(t,r.find(">tfoot")),u=e.exporter.gridExporter._readSection(t,r.find(">tbody"),!0),a=r.parent();if(a.hasClass("wijmo-wijgrid")){var f={};n.extend(f,e.exporter.gridExporter._readStyle(t,a),i),i=f}return{colWidths:t.colWidths,style:i,header:s,footer:o,body:u,width:t.computedWidthToPt(r.css("width"))}},t._readSection=function(t,n,r){return{colInfos:r?t.colInfos:null,style:e.exporter.gridExporter._readStyle(t,n),rows:e.exporter.gridExporter._readRows(t,n,r),height:t.computedHeightToPt(n.css("height"))}},t._readRows=function(t,r,i){return!r||!r.length?null:r.find(">tr").map(function(r){var s=n(this),o=i&&r==1?2:!i||r==0?1:0,u={height:t.computedHeightToPt(s.css("height")),cells:e.exporter.gridExporter._readCells(t,s,r,i,o)};return o!=0&&(u.style=e.exporter.gridExporter._readStyle(t,s),u.templateType=o),u}).get()},t._readCells=function(t,r,i,s,o){var u=s&&o!=0;return r.find(">th,>td").map(function(r){var u=n(this),a={},f=e.exporter.gridExporter._getSpan(u,"colspan"),l=e.exporter.gridExporter._getSpan(u,"rowspan"),c=e.exporter.gridExporter._cellPos(u).left,h=t.colInfos[c],p=u.find(">.wijmo-wijgrid-innercell");p.length==0&&(p=u),c!=r&&(a.colIndex=c),l!=1&&(a.rowSpan=l),f!=1&&(a.colSpan=f);if(s)switch(h.type){case 2:var d=u.find("img");if(d.length!=0){var v={src:d.attr("src"),height:t.computedHeightToPt(d.css("height")),width:t.computedWidthToPt(d.css("width"))};a.value=v}break;case 3:var m=u.find("a");if(m.length!=0){var g={href:m.attr("href"),text:m.text()};a.value=g}break;case 5:a.value=u.html();break;case 1:case 4:a.value=t.getDataValue(i,c),a.text=u.text();break;default:throw"Wrong column type!"}else a.text=u.text();return o!=0&&(a.style=e.exporter.gridExporter._readStyle(t,u),n.extend(a.style,e.exporter.gridExporter._readFontStyle(t,p))),a}).get()},t._readStyle=function(t,r){var i={backgroundColor:r.css("backgroundColor"),verticalAlign:r.css("verticalAlign")};return n.extend(i,e.exporter.gridExporter._readBorderStyle(t,"Top",r),e.exporter.gridExporter._readBorderStyle(t,"Right",r),e.exporter.gridExporter._readBorderStyle(t,"Bottom",r),e.exporter.gridExporter._readBorderStyle(t,"Left",r)),i},t._readBorderStyle=function(e,t,n){var r={},i="border"+t+"Color",s="border"+t+"Style",o="border"+t+"Width",u=n.css(s);if(u!="none"){var a=e.computedWidthToPt(n.css(o));a!=0&&(r[i]=n.css(i),r[s]=u,r[o]=a)}return r},t._readFontStyle=function(e,t){var n={};return n.textAlign=t.css("textAlign"),n.color=t.css("color"),n.fontFamily=t.css("fontFamily"),n.fontWeight=t.css("fontWeight"),n.fontStyle=t.css("fontStyle"),n.fontSize=e.computedHeightToPt(t.css("fontSize")),n.textDecoration=t.css("textDecoration"),n},t._cellPos=function(t,n){var r=t.data("cellPos");if(!r||n){var i=t.closest("table, thead, tbody, tfoot");e.exporter.gridExporter._scanTable(i)}return r=t.data("cellPos"),r},t._getSpan=function(e,t){var n=e.attr(t);if(n){var r=parseInt(n);if(!isNaN(r))return r}return 1},t._scanTable=function(t){var r=[];t.children("tr").each(function(t,i){n(i).children("td, th").each(function(i,s){var o=n(s),u=e.exporter.gridExporter._getSpan(o,"colspan"),a=e.exporter.gridExporter._getSpan(o,"rowspan"),f,l;u=u?u:1,a=a?a:1;for(;r[t]&&r[t][i];++i);for(f=i;f<i+u;++f)for(l=t;l<t+a;++l)r[l]||(r[l]=[]),r[l][f]=!0;var c={top:t,left:i};o.data("cellPos",c)})})},t.pointPerInch=72,t}();t.gridExporter=u;var a=function(t,n,r,i){var s,o,u,a={},f;o=t===undefined?"export":t,u=n===undefined?"csv":n,u=u.substr(0,1).toUpperCase()+u.substr(1),typeof r=="string"&&arguments.length===3?f=r:(f=i===undefined?"http://demos.componentone.com/ASPNET/ExportService/exportapi/grid":i,a=r),s={fileName:o,serviceUrl:f,grid:this,exportFileType:e.exporter.ExportFileType[u]},n==="pdf"&&(s.pdf=a);if(n==="xls"||n==="xlsx")s.excel=a;e.exporter.exportGrid(s)};e.grid&&e.grid.wijgrid&&(e.grid.wijgrid.prototype.exportGrid=a),n.wijmo.wijgrid&&(n.wijmo.wijgrid.prototype.exportGrid=a)})(e.exporter||(e.exporter={}));var t=e.exporter})(wijmo||(wijmo={}));